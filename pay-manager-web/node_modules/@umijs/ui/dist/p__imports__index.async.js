"use strict";(self.webpackChunk_umijs_ui=self.webpackChunk_umijs_ui||[]).push([[664,829,765],{86041:function(W,i,e){e.d(i,{O:function(){return s}});var c=e(26568);function s(){return(0,c.useQuery)(["appData"],{queryFn:function(){return fetch("/__umi/api/app-data").then(function(o){return o.json()})}})}},45237:function(W,i,e){e.r(i),e.d(i,{ViewButton:function(){return x}});var c=e(28056),s=e.n(c),v=e(26568),o=e(29088),b,l=v.styled.div(b||(b=s()([`
  display: inline-block;

  .view {
    display: inline-block;
    border: 1px solid var(--text-color);
    padding: 0.25rem 0.75rem;
    position: relative;
    cursor: pointer;

    &.active {
      cursor: unset;
      z-index: 10;
      color: var(--highlight-color);
      border-color: var(--highlight-color);
    }

    &:first-child {
      border-bottom-left-radius: 4px;
      border-top-left-radius: 4px;
    }

    &:last-child {
      left: -1px;
      border-bottom-right-radius: 4px;
      border-top-right-radius: 4px;
    }
  }
`]))),x=function(_){var A=_.value,h=_.options,p=h===void 0?[]:h,n=_.onChange;return(0,o.jsx)(l,{children:p.map(function(d){return(0,o.jsx)("span",{className:A===d.value?"view active":"view",onClick:function(){return n(d.value)},children:(0,o.jsx)(v.Icon,{width:"24",height:"24",icon:"ant-design:".concat(d.icon)})},d.value)})})}},56624:function(W,i,e){e.r(i),e.d(i,{ViewChart:function(){return _}});var c=e(65645),s=e.n(c),v=e(45990),o=e.n(v),b=e(91376),l=e(18855),x=e(29088),D="#117cf3",_=function(h){var p=h.metaFile,n=(0,l.useRef)(null),d=(0,l.useMemo)(function(){var E=p.inputs,M=Object.keys(E),T=M.reduce(function(t,r,u){var P=o()(t,2),O=P[0],L=P[1],U=String(u),y=r.split(".").slice(-1)[0],B,I;switch(y){case"tsx":B="circle",I="#BDD2FD";break;case"ts":B="diamond",I="#BDEFDB";break;case"js":B="diamond",I="#FF9D4D";break;default:I="#FBE5A2",B="triangle"}var R={id:U,path:r,label:r.split("/").slice(-1)[0],type:B,style:{fill:I,stroke:0},stateStyles:{selected:{fill:D,stroke:0}},labelCfg:{position:"bottom",style:{fill:"#fff",shadowColor:"blue",shadowBlur:10}}};return O.push(R),L[r]=U,[O,L]},[[],{}]),a=o()(T,2),f=a[0],m=a[1],g=M.reduce(function(t,r){var u=E[r].imports||[],P=m[r],O=u.filter(function(L){return L.original}).map(function(L){var U=L.path,y=m[U];return{source:y,target:P,stateStyles:{selected:{stroke:D,fill:D,shadowBlur:0,endArrow:{stroke:D,path:"M 0,0 L 6,3 L 6,-3 Z",fill:D}}}}});return[].concat(s()(t),s()(O))},[]);return{nodes:f,edges:g}},[p]);return(0,l.useEffect)(function(){var E=document.getElementById("container"),M=E.scrollWidth,T=window.innerHeight-100,a=new b.ZP.Graph({container:"container",width:M,height:T,fitCenter:!0,modes:{default:["zoom-canvas","drag-canvas","drag-node"]},layout:{type:"forceAtlas2",preventOverlap:!0,kr:20},defaultNode:{size:24},animate:!0,defaultEdge:{style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e2e2e2"}}}}),f=function(t,r){var u,P=((u=t._cfg)===null||u===void 0?void 0:u.edges)||[];P.forEach(function(O){a.setItemState(O,"selected",r)}),a.setItemState(t,"selected",r)};a.on("click",function(g){var t,r,u=((t=g.item)===null||t===void 0||(r=t._cfg)===null||r===void 0?void 0:r.type)||null;u!=="node"&&n.current&&f(n.current,!1)}),a.on("node:click",function(g){var t=g.item;if(t===n.current){f(t,!1),n.current=null;return}n.current&&f(n.current,!1),f(t,!0),n.current=t}),a.data(d),a.render();var m=function(){var t=document.getElementById("container"),r=t.scrollWidth,u=window.innerHeight-100;a.changeSize(r,u)};return window.addEventListener("resize",m),function(){window.removeEventListener("resize",m),n.current=null,a.destroy()}},[d]),(0,x.jsx)("div",{children:(0,x.jsx)("div",{id:"container"})})}},11633:function(W,i,e){e.r(i),e.d(i,{ViewList:function(){return r}});var c=e(65645),s=e.n(c),v=e(45990),o=e.n(v),b=e(28056),l=e.n(b),x=e(30622),D=e(65948),_=e(42890),A=e(25239),h=e(18855),p=e(26568),n=e(29088),d,E,M,T=p.styled.div(d||(d=l()([`
  .switch-container {
    margin-bottom: 1rem;
    display: flex;
    align-items: center;

    .ant-switch {
      margin-right: 0.5rem;
      background: var(--text-color);

      &-checked {
        background: var(--highlight-color);
      }
    }
  }
`]))),a=p.styled.div(E||(E=l()([`
  background: var(--bg-color);

  .ant-input-affix-wrapper {
    background: var(--bg-color);
    border-color: var(--text-color);
  }

  .ant-input {
    background: var(--bg-color);
    color: var(--text-color);
  }

  .search-icon {
    margin-right: 0.5rem;
    color: var(--text-color);
  }
`]))),f=p.styled.div(M||(M=l()([`
  margin-top: 2rem;

  .ant-list-item {
    color: var(--text-color);
    border-color: var(--text-color);
    padding-left: 1rem;
  }
`]))),m=47,g=[/node_modules/],t=function(P){return g.some(function(O){return O.test(P)})},r=function(P){var O=P.metaFile,L=(0,h.useState)(!1),U=o()(L,2),y=U[0],B=U[1],I=(0,h.useState)(""),R=o()(I,2),V=R[0],F=R[1],S=(0,h.useMemo)(function(){var j=O.inputs,C=Object.keys(j).reduce(function(w,N){var H=j[N].imports||[],Z=H.map(function(K){return K.path}).filter(function(K){var $=K.indexOf(V)!==-1;return $&&(y||!t(K))});return[].concat(s()(w),s()(Z))},[]);return Array.from(new Set(C)).sort()},[O,y,V]),z=(0,h.useMemo)(function(){var j=window.innerHeight-216,C=m*S.length;return C>j?j:C},[S]);return(0,n.jsxs)("div",{children:[(0,n.jsx)(T,{children:(0,n.jsxs)("div",{className:"switch-container",children:[(0,n.jsx)(x.Z,{onChange:B}),"show node_modules paths"]})}),(0,n.jsx)(a,{children:(0,n.jsx)(D.Z,{size:"large",value:V,onChange:function(C){return F(C.target.value)},prefix:(0,n.jsx)(p.Icon,{width:"24",height:"24",icon:"ant-design:search-outlined",className:"search-icon"})})}),(0,n.jsx)(f,{children:(0,n.jsx)(_.ZP,{bordered:!0,children:(0,n.jsx)(A.Z,{data:S,height:z,itemHeight:m,itemKey:function(C){return C},children:function(C,w){return(0,n.jsx)(_.ZP.Item,{children:(0,n.jsx)("div",{children:C})})}})})})]})}},62713:function(W,i,e){e.r(i),e.d(i,{ViewButton:function(){return c.ViewButton},ViewChart:function(){return s.ViewChart},ViewList:function(){return v.ViewList}});var c=e(45237),s=e(56624),v=e(11633)},8826:function(W,i,e){e.r(i),e.d(i,{default:function(){return n}});var c=e(45990),s=e.n(c),v=e(28056),o=e.n(v),b=e(86041),l=e(62713),x=e(18855),D=e(26568),_=e(29088),A,h=D.styled.div(A||(A=o()([""]))),p=[{value:"list",icon:"bars-outlined"},{value:"chart",icon:"pie-chart-outlined"}];function n(){var d=(0,x.useState)("list"),E=s()(d,2),M=E[0],T=E[1],a=(0,b.O)(),f=a.data;if(!f)return(0,_.jsx)("div",{children:"Loading..."});var m=f.prepare.buildResult.metafile,g=function(){if(!m)return(0,_.jsx)("div",{children:"please set metaFile: true"});switch(M){case"list":return(0,_.jsx)(l.ViewList,{metaFile:m});case"chart":return(0,_.jsx)(l.ViewChart,{metaFile:m})}};return(0,_.jsxs)(h,{children:[(0,_.jsx)("div",{children:(0,_.jsx)(l.ViewButton,{value:M,options:p,onChange:function(r){return T(r)}})}),(0,_.jsx)("div",{style:{marginTop:"1rem"},children:g()})]})}}}]);
