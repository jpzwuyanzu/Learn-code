(self.webpackChunk_umijs_ui=self.webpackChunk_umijs_ui||[]).push([[313],{61601:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var S=function(k,E){var N=k.nodes,T=k.edges,m=[],y={};if(!N)throw new Error("invalid nodes data!");return N&&N.forEach(function(v,p){y[v.id]=p;var g=[];m.push(g)}),T&&T.forEach(function(v){var p=v.source,g=v.target,I=y[p],_=y[g];!I&&I!==0||!_&&_!==0||(m[I][_]=1,E||(m[_][I]=1))}),m},x=S;w.default=x},33101:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),Object.defineProperty(w,"GADDIAsync",{enumerable:!0,get:function(){return x.GADDIAsync}}),Object.defineProperty(w,"connectedComponentAsync",{enumerable:!0,get:function(){return x.connectedComponentAsync}}),w.default=void 0,Object.defineProperty(w,"detectAllCyclesAsync",{enumerable:!0,get:function(){return x.detectAllCyclesAsync}}),Object.defineProperty(w,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllDirectedCycleAsync}}),Object.defineProperty(w,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return x.detectAllUndirectedCycleAsync}}),Object.defineProperty(w,"detectCycleAsync",{enumerable:!0,get:function(){return x.detectCycleAsync}}),w.detectDirectedCycleAsync=void 0,Object.defineProperty(w,"dijkstraAsync",{enumerable:!0,get:function(){return x.dijkstraAsync}}),Object.defineProperty(w,"findAllPathAsync",{enumerable:!0,get:function(){return x.findAllPathAsync}}),Object.defineProperty(w,"findShortestPathAsync",{enumerable:!0,get:function(){return x.findShortestPathAsync}}),Object.defineProperty(w,"floydWarshallAsync",{enumerable:!0,get:function(){return x.floydWarshallAsync}}),Object.defineProperty(w,"getAdjMatrixAsync",{enumerable:!0,get:function(){return x.getAdjMatrixAsync}}),Object.defineProperty(w,"getDegreeAsync",{enumerable:!0,get:function(){return x.getDegreeAsync}}),Object.defineProperty(w,"getInDegreeAsync",{enumerable:!0,get:function(){return x.getInDegreeAsync}}),Object.defineProperty(w,"getNeighborsAsync",{enumerable:!0,get:function(){return x.getNeighborsAsync}}),Object.defineProperty(w,"getOutDegreeAsync",{enumerable:!0,get:function(){return x.getOutDegreeAsync}}),Object.defineProperty(w,"labelPropagationAsync",{enumerable:!0,get:function(){return x.labelPropagationAsync}}),Object.defineProperty(w,"louvainAsync",{enumerable:!0,get:function(){return x.louvainAsync}}),Object.defineProperty(w,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return x.minimumSpanningTreeAsync}}),Object.defineProperty(w,"pageRankAsync",{enumerable:!0,get:function(){return x.pageRankAsync}});var x=S(88312),z=x.detectCycleAsync;w.detectDirectedCycleAsync=z;var k={getAdjMatrixAsync:x.getAdjMatrixAsync,connectedComponentAsync:x.connectedComponentAsync,getDegreeAsync:x.getDegreeAsync,getInDegreeAsync:x.getInDegreeAsync,getOutDegreeAsync:x.getOutDegreeAsync,detectCycleAsync:x.detectCycleAsync,detectDirectedCycleAsync:z,detectAllCyclesAsync:x.detectAllCyclesAsync,detectAllDirectedCycleAsync:x.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:x.detectAllUndirectedCycleAsync,dijkstraAsync:x.dijkstraAsync,findAllPathAsync:x.findAllPathAsync,findShortestPathAsync:x.findShortestPathAsync,floydWarshallAsync:x.floydWarshallAsync,labelPropagationAsync:x.labelPropagationAsync,louvainAsync:x.louvainAsync,minimumSpanningTreeAsync:x.minimumSpanningTreeAsync,pageRankAsync:x.pageRankAsync,getNeighborsAsync:x.getNeighborsAsync,GADDIAsync:x.GADDIAsync};w.default=k},26773:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=k(S(99878)),z=S(21152);function k(m){return m&&m.__esModule?m:{default:m}}function E(m){m===void 0&&(m={});var y=m,v=function(){},p=function(){var g={};return function(I){var _=I.next,C=_;return g[C]?!1:(g[C]=!0,!0)}}();return y.allowTraversal=m.allowTraversal||p,y.enter=m.enter||v,y.leave=m.leave||v,y}var N=function(y,v,p,g){g===void 0&&(g=!0);var I=E(p),_=new x.default,C=y.edges,O=C===void 0?[]:C;_.enqueue(v);for(var b="",l=function(){var Z=_.dequeue();I.enter({current:Z,previous:b}),(0,z.getNeighbors)(Z,O,g?"target":void 0).forEach(function(X){I.allowTraversal({previous:b,current:Z,next:X})&&_.enqueue(X)}),I.leave({current:Z,previous:b}),b=Z};!_.isEmpty();)l()},T=N;w.default=T},15968:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=E,w.detectStrongConnectComponents=w.detectConnectedComponents=void 0;var x=S(21152),z=function(T){for(var m=T.nodes,y=m===void 0?[]:m,v=T.edges,p=v===void 0?[]:v,g=[],I={},_=[],C=function K(Z){_.push(Z),I[Z.id]=!0;for(var X=(0,x.getNeighbors)(Z.id,p),W=function(at){var J=X[at];if(!I[J]){var nt=y.filter(function(mt){return mt.id===J});nt.length>0&&K(nt[0])}},U=0;U<X.length;++U)W(U)},O=0;O<y.length;O++){var b=y[O];if(!I[b.id]){C(b);for(var l=[];_.length>0;)l.push(_.pop());g.push(l)}}return g};w.detectConnectedComponents=z;var k=function(T){for(var m=T.nodes,y=m===void 0?[]:m,v=T.edges,p=v===void 0?[]:v,g=[],I={},_={},C={},O=[],b=0,l=function W(U){_[U.id]=b,C[U.id]=b,b+=1,g.push(U),I[U.id]=!0;for(var et=(0,x.getNeighbors)(U.id,p,"target").filter(function(Mt){return y.map(function(vt){return vt.id}).indexOf(Mt)>-1}),at=function(vt){var zt=et[vt];if(!_[zt]&&_[zt]!==0){var re=y.filter(function(Rt){return Rt.id===zt});re.length>0&&W(re[0]),C[U.id]=Math.min(C[U.id],C[zt])}else I[zt]&&(C[U.id]=Math.min(C[U.id],_[zt]))},J=0;J<et.length;J++)at(J);if(C[U.id]===_[U.id]){for(var nt=[];g.length>0;){var mt=g.pop();if(I[mt.id]=!1,nt.push(mt),mt===U)break}nt.length>0&&O.push(nt)}},K=0,Z=y;K<Z.length;K++){var X=Z[K];!_[X.id]&&_[X.id]!==0&&l(X)}return O};w.detectStrongConnectComponents=k;function E(N,T){return T?k(N):z(N)}},94061:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.secondReg=w.dateReg=void 0;var S=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;w.secondReg=S;var x=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;w.dateReg=x},67543:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.getOutDegree=w.getInDegree=w.default=void 0;var S=function(N){var T={},m=N.nodes,y=m===void 0?[]:m,v=N.edges,p=v===void 0?[]:v;return y.forEach(function(g){T[g.id]={degree:0,inDegree:0,outDegree:0}}),p.forEach(function(g){T[g.source].degree++,T[g.source].outDegree++,T[g.target].degree++,T[g.target].inDegree++}),T},x=S;w.default=x;var z=function(N,T){var m=S(N);return m[T]?S(N)[T].inDegree:0};w.getInDegree=z;var k=function(N,T){var m=S(N);return m[T]?S(N)[T].outDegree:0};w.getOutDegree=k},27945:function(ae,w,S){"use strict";function x(_){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},x(_)}Object.defineProperty(w,"__esModule",{value:!0}),w.detectAllUndirectedCycle=w.detectAllDirectedCycle=w.detectAllCycles=w.default=void 0;var z=m(S(86015)),k=T(S(15968)),E=S(21152);function N(_){if(typeof WeakMap!="function")return null;var C=new WeakMap,O=new WeakMap;return(N=function(l){return l?O:C})(_)}function T(_,C){if(!C&&_&&_.__esModule)return _;if(_===null||x(_)!=="object"&&typeof _!="function")return{default:_};var O=N(C);if(O&&O.has(_))return O.get(_);var b={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in _)if(K!=="default"&&Object.prototype.hasOwnProperty.call(_,K)){var Z=l?Object.getOwnPropertyDescriptor(_,K):null;Z&&(Z.get||Z.set)?Object.defineProperty(b,K,Z):b[K]=_[K]}return b.default=_,O&&O.set(_,b),b}function m(_){return _&&_.__esModule?_:{default:_}}var y=function(C){var O=null,b=C.nodes,l=b===void 0?[]:b,K={},Z={},X={},W={};l.forEach(function(at){Z[at.id]=at});for(var U={enter:function(J){var nt=J.current,mt=J.previous;if(X[nt]){O={};for(var Mt=nt,vt=mt;vt!==nt;)O[Mt]=vt,Mt=vt,vt=K[vt];O[Mt]=vt}else X[nt]=nt,delete Z[nt],K[nt]=mt},leave:function(J){var nt=J.current;W[nt]=nt,delete X[nt]},allowTraversal:function(J){var nt=J.next;return O?!1:!W[nt]}};Object.keys(Z).length;){var et=Object.keys(Z)[0];(0,z.default)(C,et,U)}return O},v=function(C,O,b){var l,K;b===void 0&&(b=!0);for(var Z=[],X=(0,k.default)(C,!1),W=0,U=X;W<U.length;W++){var et=U[W];if(et.length)for(var at=et[0],J=at.id,nt=[at],mt=(l={},l[J]=at,l),Mt=(K={},K[J]=new Set,K);nt.length>0;)for(var vt=nt.pop(),zt=vt.id,re=(0,E.getNeighbors)(zt,C.edges),Rt=function(gt){var Vt,Ht=re[gt],It=C.nodes.find(function(_t){return _t.id===Ht});if(Ht===zt)Z.push((Vt={},Vt[Ht]=vt,Vt));else if(!(Ht in Mt))mt[Ht]=vt,nt.push(It),Mt[Ht]=new Set([vt]);else if(!Mt[zt].has(It)){for(var de=!0,De=[It,vt],Ye=mt[zt];Mt[Ht].size&&!Mt[Ht].has(Ye)&&(De.push(Ye),Ye!==mt[Ye.id]);)Ye=mt[Ye.id];if(De.push(Ye),O&&b?(de=!1,De.findIndex(function(_t){return O.indexOf(_t.id)>-1})>-1&&(de=!0)):O&&!b&&De.findIndex(function(_t){return O.indexOf(_t.id)>-1})>-1&&(de=!1),de){for(var kt={},Pt=1;Pt<De.length;Pt+=1)kt[De[Pt-1].id]=De[Pt];De.length&&(kt[De[De.length-1].id]=De[0]),Z.push(kt)}Mt[Ht].add(vt)}},At=0;At<re.length;At+=1)Rt(At)}return Z};w.detectAllUndirectedCycle=v;var p=function(C,O,b){b===void 0&&(b=!0);for(var l=[],K=new Set,Z=[],X=[],W={},U={},et=function(Ye){for(var kt=[Ye];kt.length>0;){var Pt=kt.pop();K.has(Pt)&&(K.delete(Pt),Z[Pt.id].forEach(function(_t){kt.push(_t)}),Z[Pt.id].clear())}},at=function De(Ye,kt,Pt){var _t=!1;if(O&&b===!1&&O.indexOf(Ye.id)>-1)return _t;l.push(Ye),K.add(Ye);for(var jt=Pt[Ye.id],Qt=0;Qt<jt.length;Qt+=1){var Tt=W[jt[Qt]];if(Tt===kt){for(var Zt={},Ee=1;Ee<l.length;Ee+=1)Zt[l[Ee-1].id]=l[Ee];l.length&&(Zt[l[l.length-1].id]=l[0]),X.push(Zt),_t=!0}else K.has(Tt)||De(Tt,kt,Pt)&&(_t=!0)}if(_t)et(Ye);else for(var Qt=0;Qt<jt.length;Qt+=1){var Tt=W[jt[Qt]];Z[Tt.id].has(Ye)||Z[Tt.id].add(Ye)}return l.pop(),_t},J=C.nodes,nt=J===void 0?[]:J,mt=0;mt<nt.length;mt+=1){var Mt=nt[mt],vt=Mt.id;U[vt]=mt,W[mt]=Mt}if(O&&b)for(var zt=function(Ye){var kt=O[Ye];U[nt[Ye].id]=U[kt],U[kt]=0,W[0]=nt.find(function(Pt){return Pt.id===kt}),W[U[nt[Ye].id]]=nt[Ye]},mt=0;mt<O.length;mt++)zt(mt);for(var re=function(Ye){for(var kt,Pt,_t=1/0,jt=0;jt<Ye.length;jt+=1)for(var Qt=Ye[jt],Tt=0;Tt<Qt.length;Tt++){var Zt=U[Qt[Tt].id];Zt<_t&&(_t=Zt,Pt=jt)}for(var Ee=Ye[Pt],dt=[],jt=0;jt<Ee.length;jt+=1){var bt=Ee[jt];dt[bt.id]=[];for(var wt=0,D=(0,E.getNeighbors)(bt.id,C.edges,"target").filter(function(ft){return Ee.map(function(ie){return ie.id}).indexOf(ft)>-1});wt<D.length;wt++){var rt=D[wt];rt===bt.id&&!(b===!1&&O.indexOf(bt.id)>-1)?X.push((kt={},kt[bt.id]=bt,kt)):dt[bt.id].push(U[rt])}}return{component:Ee,adjList:dt,minIdx:_t}},Rt=0;Rt<nt.length;){var At=nt.filter(function(De){return U[De.id]>=Rt}),Q=(0,k.detectStrongConnectComponents)({nodes:At,edges:C.edges}).filter(function(De){return De.length>1});if(Q.length===0)break;var gt=re(Q),Vt=gt.minIdx,Ht=gt.adjList,It=gt.component;if(It.length>1){It.forEach(function(De){Z[De.id]=new Set});var de=W[Vt];if(O&&b&&O.indexOf(de.id)===-1)return X;at(de,de,Ht),Rt=Vt+1}else break}return X};w.detectAllDirectedCycle=p;var g=function(C,O,b,l){return l===void 0&&(l=!0),O?p(C,b,l):v(C,b,l)};w.detectAllCycles=g;var I=y;w.default=I},86015:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=E;var x=S(21152);function z(N){N===void 0&&(N={});var T=N,m=function(){},y=function(){var v={};return function(p){var g=p.next;return v[g]?!1:(v[g]=!0,!0)}}();return T.allowTraversal=N.allowTraversal||y,T.enter=N.enter||m,T.leave=N.leave||m,T}function k(N,T,m,y){y.enter({current:T,previous:m});var v=N.edges,p=v===void 0?[]:v;(0,x.getNeighbors)(T,p,"target").forEach(function(g){y.allowTraversal({previous:m,current:T,next:g})&&k(N,g,T,y)}),y.leave({current:T,previous:m})}function E(N,T,m){k(N,T,"",z(m))}},40467:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=S(39889),z=S(76405),k=S(21152),E=function(v,p,g){for(var I=1/0,_,C=0;C<p.length;C++){var O=p[C].id;!g[O]&&v[O]<=I&&(I=v[O],_=p[C])}return _},N=function(v,p,g,I){var _=v.nodes,C=_===void 0?[]:_,O=v.edges,b=O===void 0?[]:O,l=[],K={},Z={},X={};C.forEach(function(mt,Mt){var vt=mt.id;l.push(vt),Z[vt]=1/0,vt===p&&(Z[vt]=0)});for(var W=C.length,U=function(Mt){var vt=E(Z,C,K),zt=vt.id;if(K[zt]=!0,Z[zt]===1/0)return"continue";var re=[];g?re=(0,k.getOutEdgesNodeId)(zt,b):re=(0,k.getEdgesByNodeId)(zt,b),re.forEach(function(Rt){var At=Rt.target,Q=Rt.source,gt=At===zt?Q:At,Vt=I&&Rt[I]?Rt[I]:1;Z[gt]>Z[vt.id]+Vt?(Z[gt]=Z[vt.id]+Vt,X[gt]=[vt.id]):Z[gt]===Z[vt.id]+Vt&&X[gt].push(vt.id)})},et=0;et<W;et++)U(et);X[p]=[p];var at={};for(var J in Z)Z[J]!==1/0&&m(p,J,X,at);var nt={};for(var J in at)nt[J]=at[J][0];return{length:Z,path:nt,allPath:at}},T=N;w.default=T;function m(y,v,p,g){if(y===v)return[y];if(g[v])return g[v];for(var I=[],_=0,C=p[v];_<C.length;_++){var O=C[_],b=m(y,O,p,g);if(!b)return;for(var l=0,K=b;l<K.length;l++){var Z=K[l];(0,z.isArray)(Z)?I.push((0,x.__spreadArray)((0,x.__spreadArray)([],Z,!0),[v],!1)):I.push([Z,v])}}return g[v]=I,g[v]}},80735:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.findShortestPath=w.findAllPath=void 0;var x=k(S(40467)),z=S(21152);function k(T){return T&&T.__esModule?T:{default:T}}var E=function(m,y,v,p,g){var I=(0,x.default)(m,y,p,g),_=I.length,C=I.path,O=I.allPath;return{length:_[v],path:C[v],allPath:O[v]}};w.findShortestPath=E;var N=function(m,y,v,p){var g;if(y===v)return[[y]];var I=m.edges,_=I===void 0?[]:I,C=[y],O=(g={},g[y]=!0,g),b=[],l=[],K=p?(0,z.getNeighbors)(y,_,"target"):(0,z.getNeighbors)(y,_);for(b.push(K);C.length>0&&b.length>0;){var Z=b[b.length-1];if(Z.length){var X=Z.shift();X&&(C.push(X),O[X]=!0,K=p?(0,z.getNeighbors)(X,_,"target"):(0,z.getNeighbors)(X,_),b.push(K.filter(function(et){return!O[et]})))}else{var W=C.pop();O[W]=!1,b.pop();continue}if(C[C.length-1]===v){var U=C.map(function(at){return at});l.push(U);var W=C.pop();O[W]=!1,b.pop()}}return l};w.findAllPath=N},90781:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=z(S(61601));function z(N){return N&&N.__esModule?N:{default:N}}var k=function(T,m){for(var y=(0,x.default)(T,m),v=[],p=y.length,g=0;g<p;g+=1){v[g]=[];for(var I=0;I<p;I+=1)g===I?v[g][I]=0:y[g][I]===0||!y[g][I]?v[g][I]=1/0:v[g][I]=y[g][I]}for(var _=0;_<p;_+=1)for(var g=0;g<p;g+=1)for(var I=0;I<p;I+=1)v[g][I]>v[g][_]+v[_][I]&&(v[g][I]=v[g][_]+v[_][I]);return v},E=k;w.default=E},8828:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=S(76405),z=S(47834),k=function(){function I(_,C,O,b,l){this.fromNode=_,this.toNode=C,this.nodeEdgeNodeLabel={nodeLabel1:O||z.VACANT_NODE_LABEL,edgeLabel:b||z.VACANT_EDGE_LABEL,nodeLabel2:l||z.VACANT_NODE_LABEL}}return I.prototype.equalTo=function(_){return this.fromNode===_.formNode&&this.toNode===_.toNode&&this.nodeEdgeNodeLabel===_.nodeEdgeNodeLabel},I.prototype.notEqualTo=function(_){return!this.equalTo(_)},I}(),E=function(){function I(){this.rmpath=[],this.dfsEdgeList=[]}return I.prototype.equalTo=function(_){var C=this.dfsEdgeList.length,O=_.length;if(C!==O)return!1;for(var b=0;b<C;b++)if(this.dfsEdgeList[b]!==_[b])return!1;return!0},I.prototype.notEqualTo=function(_){return!this.equalTo(_)},I.prototype.pushBack=function(_,C,O,b,l){return this.dfsEdgeList.push(new k(_,C,O,b,l)),this.dfsEdgeList},I.prototype.toGraph=function(_,C){_===void 0&&(_=z.VACANT_GRAPH_ID),C===void 0&&(C=!1);var O=new z.Graph(_,!0,C);return this.dfsEdgeList.forEach(function(b){var l=b.fromNode,K=b.toNode,Z=b.nodeEdgeNodeLabel,X=Z.nodeLabel1,W=Z.edgeLabel,U=Z.nodeLabel2;X!==z.VACANT_NODE_LABEL&&O.addNode(l,X),U!==z.VACANT_NODE_LABEL&&O.addNode(K,U),X!==z.VACANT_NODE_LABEL&&U!==X&&O.addEdge(void 0,l,K,W)}),O},I.prototype.buildRmpath=function(){this.rmpath=[];for(var _=void 0,C=this.dfsEdgeList.length,O=C-1;O>=0;O--){var b=this.dfsEdgeList[O],l=b.fromNode,K=b.toNode;l<K&&(_===void 0||K===_)&&(this.rmpath.push(O),_=l)}return this.rmpath},I.prototype.getNodeNum=function(){var _={};return this.dfsEdgeList.forEach(function(C){_[C.fromNode]||(_[C.fromNode]=!0),_[C.toNode]||(_[C.toNode]=!0)}),Object.keys(_).length},I}(),N=function(){function I(_){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!_){for(;_;){var C=_.edge;this.edges.push(C),this.nodesUsed[C.from]=1,this.nodesUsed[C.to]=1,this.edgesUsed[C.id]=1,_=_.preNode}this.edges=this.edges.reverse()}}return I.prototype.hasNode=function(_){return this.nodesUsed[_.id]===1},I.prototype.hasEdge=function(_){return this.edgesUsed[_.id]===1},I}(),T=function(){function I(_){var C=_.graphs,O=_.minSupport,b=O===void 0?2:O,l=_.minNodeNum,K=l===void 0?1:l,Z=_.maxNodeNum,X=Z===void 0?4:Z,W=_.top,U=W===void 0?10:W,et=_.directed,at=et===void 0?!1:et,J=_.verbose,nt=J===void 0?!1:J;this.graphs=C,this.dfsCode=new E,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=b,this.top=U,this.directed=at,this.counter=0,this.maxNodeNum=X,this.minNodeNum=K,this.verbose=nt,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return I.prototype.findForwardRootEdges=function(_,C){var O=this,b=[],l=_.nodeMap;return C.edges.forEach(function(K){(O.directed||C.label<=l[K.to].label)&&b.push(K)}),b},I.prototype.findBackwardEdge=function(_,C,O,b){if(!this.directed&&C===O)return null;for(var l=_.nodeMap,K=l[O.to],Z=K.edges,X=Z.length,W=0;W<X;W++){var U=Z[W];if(!(b.hasEdge(U)||U.to!==C.from)){if(this.directed){if(l[C.from].label<l[O.to].label||l[C.from].label===l[O.to].label&&C.label<=U.label)return U}else if(C.label<U.label||C.label===U.label&&l[C.to].label<=l[O.to].label)return U}}return null},I.prototype.findForwardPureEdges=function(_,C,O,b){for(var l=[],K=C.to,Z=_.nodeMap[K].edges,X=Z.length,W=0;W<X;W++){var U=Z[W],et=_.nodeMap[U.to];O<=et.label&&!b.hasNode(et)&&l.push(U)}return l},I.prototype.findForwardRmpathEdges=function(_,C,O,b){for(var l=[],K=_.nodeMap,Z=K[C.to].label,X=K[C.from],W=X.edges,U=W.length,et=0;et<U;et++){var at=W[et],J=K[at.to].label;C.to===at.to||O>J||b.hasNode(K[at.to])||(C.label<at.label||C.label===at.label&&Z<=J)&&l.push(at)}return l},I.prototype.getSupport=function(_){var C={};return _.forEach(function(O){C[O.graphId]||(C[O.graphId]=!0)}),Object.keys(C).length},I.prototype.findMinLabel=function(_){var C=void 0;return Object.keys(_).forEach(function(O){var b=_[O],l=b.nodeLabel1,K=b.edgeLabel,Z=b.nodeLabel2;if(!C){C={nodeLabel1:l,edgeLabel:K,nodeLabel2:Z};return}(l<C.nodeLabel1||l===C.nodeLabel1&&K<C.edgeLabel||l===C.nodeLabel1&&K===C.edgeLabel&&Z<C.nodeLabel2)&&(C={nodeLabel1:l,edgeLabel:K,nodeLabel2:Z})}),C},I.prototype.isMin=function(){var _=this,C=this.dfsCode;if(this.verbose&&console.log("isMin checking",C),C.dfsEdgeList.length===1)return!0;var O=this.directed,b=C.toGraph(z.VACANT_GRAPH_ID,O),l=b.nodeMap,K=new E,Z={};b.nodes.forEach(function(et){var at=_.findForwardRootEdges(b,et);at.forEach(function(J){var nt=l[J.to],mt="".concat(et.label,"-").concat(J.label,"-").concat(nt.label);Z[mt]||(Z[mt]={projected:[],nodeLabel1:et.label,edgeLabel:J.label,nodeLabel2:nt.label});var Mt={graphId:b.id,edge:J,preNode:null};Z[mt].projected.push(Mt)})});var X=this.findMinLabel(Z);if(X){K.dfsEdgeList.push(new k(0,1,X.nodeLabel1,X.edgeLabel,X.nodeLabel2));var W=function et(at){for(var J=K.buildRmpath(),nt=K.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,mt=K.dfsEdgeList[J[0]].toNode,Mt={},vt=!1,zt=0,re=O?-1:0,Rt=function(jt){if(vt)return"break";at.forEach(function(Qt){var Tt=new N(Qt),Zt=_.findBackwardEdge(b,Tt.edges[J[jt]],Tt.edges[J[0]],Tt);Zt&&(Mt[Zt.label]||(Mt[Zt.label]={projected:[],edgeLabel:Zt.label}),Mt[Zt.label].projected.push({graphId:b.id,edge:Mt,preNode:Qt}),zt=K.dfsEdgeList[J[jt]].fromNode,vt=!0)})},At=J.length-1;At>re;At--){var Q=Rt(At);if(Q==="break")break}if(vt){var gt=_.findMinLabel(Mt);K.dfsEdgeList.push(new k(mt,zt,z.VACANT_NODE_LABEL,gt.edgeLabel,z.VACANT_NODE_LABEL));var Vt=K.dfsEdgeList.length-1;return _.dfsCode.dfsEdgeList[Vt]!==K.dfsEdgeList[Vt]?!1:et(Mt[gt.edgeLabel].projected)}var Ht={};vt=!1;var It=0;at.forEach(function(_t){var jt=new N(_t),Qt=_.findForwardPureEdges(b,jt.edges[J[0]],nt,jt);Qt.length>0&&(vt=!0,It=mt,Qt.forEach(function(Tt){var Zt="".concat(Tt.label,"-").concat(l[Tt.to].label);Ht[Zt]||(Ht[Zt]={projected:[],edgeLabel:Tt.label,nodeLabel2:l[Tt.to].label}),Ht[Zt].projected.push({graphId:b.id,edge:Tt,preNode:_t})}))});for(var de=J.length,De=function(jt){if(vt)return"break";var Qt=J[jt];at.forEach(function(Tt){var Zt=new N(Tt),Ee=_.findForwardRmpathEdges(b,Zt.edges[Qt],nt,Zt);Ee.length>0&&(vt=!0,It=K.dfsEdgeList[Qt].fromNode,Ee.forEach(function(dt){var bt="".concat(dt.label,"-").concat(l[dt.to].label);Ht[bt]||(Ht[bt]={projected:[],edgeLabel:dt.label,nodeLabel2:l[dt.to].label}),Ht[bt].projected.push({graphId:b.id,edge:dt,preNode:Tt})}))})},At=0;At<de;At++){var Ye=De(At);if(Ye==="break")break}if(!vt)return!0;var kt=_.findMinLabel(Ht);K.dfsEdgeList.push(new k(It,mt+1,z.VACANT_NODE_LABEL,kt.edgeLabel,kt.nodeLabel2));var Pt=K.dfsEdgeList.length-1;return C.dfsEdgeList[Pt]!==K.dfsEdgeList[Pt]?!1:et(Ht["".concat(kt.edgeLabel,"-").concat(kt.nodeLabel2)].projected)},U="".concat(X.nodeLabel1,"-").concat(X.edgeLabel,"-").concat(X.nodeLabel2);return W(Z[U].projected)}},I.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var _=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,x.clone)(_))}},I.prototype.subGraphMining=function(_){var C=this,O=this.getSupport(_);if(!(O<this.minSupport)&&this.isMin()){this.report();var b=this.dfsCode.getNodeNum(),l=this.dfsCode.buildRmpath(),K=this.dfsCode.dfsEdgeList[l[0]].toNode,Z=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,X={},W={};_.forEach(function(U){for(var et=C.graphs[U.graphId],at=et.nodeMap,J=new N(U),nt=l.length-1;nt>=0;nt--){var mt=C.findBackwardEdge(et,J.edges[l[nt]],J.edges[l[0]],J);if(mt){var Mt="".concat(C.dfsCode.dfsEdgeList[l[nt]].fromNode,"-").concat(mt.label);W[Mt]||(W[Mt]={projected:[],toNodeId:C.dfsCode.dfsEdgeList[l[nt]].fromNode,edgeLabel:mt.label}),W[Mt].projected.push({graphId:U.graphId,edge:mt,preNode:U})}}if(!(b>=C.maxNodeNum)){var vt=C.findForwardPureEdges(et,J.edges[l[0]],Z,J);vt.forEach(function(re){var Rt="".concat(K,"-").concat(re.label,"-").concat(at[re.to].label);X[Rt]||(X[Rt]={projected:[],fromNodeId:K,edgeLabel:re.label,nodeLabel2:at[re.to].label}),X[Rt].projected.push({graphId:U.graphId,edge:re,preNode:U})});for(var zt=function(Rt){var At=C.findForwardRmpathEdges(et,J.edges[l[Rt]],Z,J);At.forEach(function(Q){var gt="".concat(C.dfsCode.dfsEdgeList[l[Rt]].fromNode,"-").concat(Q.label,"-").concat(at[Q.to].label);X[gt]||(X[gt]={projected:[],fromNodeId:C.dfsCode.dfsEdgeList[l[Rt]].fromNode,edgeLabel:Q.label,nodeLabel2:at[Q.to].label}),X[gt].projected.push({graphId:U.graphId,edge:Q,preNode:U})})},nt=0;nt<l.length;nt++)zt(nt)}}),Object.keys(W).forEach(function(U){var et=W[U],at=et.toNodeId,J=et.edgeLabel;C.dfsCode.dfsEdgeList.push(new k(K,at,"-1",J,"-1")),C.subGraphMining(W[U].projected),C.dfsCode.dfsEdgeList.pop()}),Object.keys(X).forEach(function(U){var et=X[U],at=et.fromNodeId,J=et.edgeLabel,nt=et.nodeLabel2;C.dfsCode.dfsEdgeList.push(new k(at,K+1,z.VACANT_NODE_LABEL,J,nt)),C.subGraphMining(X[U].projected),C.dfsCode.dfsEdgeList.pop()})}},I.prototype.generate1EdgeFrequentSubGraphs=function(){var _=this.graphs,C=this.directed,O=this.minSupport,b=this.frequentSize1Subgraphs,l={},K={},Z={},X={};return Object.keys(_).forEach(function(W){var U=_[W],et=U.nodeMap;U.nodes.forEach(function(at,J){var nt=at.label,mt="".concat(W,"-").concat(nt);if(!Z[mt]){var Mt=l[nt]||0;Mt++,l[nt]=Mt}Z[mt]={graphKey:W,label:nt},at.edges.forEach(function(vt){var zt=nt,re=et[vt.to].label;if(!C&&zt>re){var Rt=re;re=zt,zt=Rt}var At=vt.label,Q="".concat(W,"-").concat(zt,"-").concat(At,"-").concat(re),gt="".concat(zt,"-").concat(At,"-").concat(re);if(!K[gt]){var Vt=K[gt]||0;Vt++,K[gt]=Vt}X[Q]={graphId:W,nodeLabel1:zt,edgeLabel:At,nodeLabel2:re}})})}),Object.keys(l).forEach(function(W){var U=l[W];if(!(U<O)){var et={nodes:[],edges:[]};et.nodes.push({id:"0",label:W}),b.push(et)}}),b},I.prototype.run=function(){var _=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var C=this.graphs,O=this.directed,b={};Object.keys(C).forEach(function(l){var K=C[l],Z=K.nodeMap;K.nodes.forEach(function(X){var W=_.findForwardRootEdges(K,X);W.forEach(function(U){var et=Z[U.to],at="".concat(X.label,"-").concat(U.label,"-").concat(et.label);b[at]||(b[at]={projected:[],nodeLabel1:X.label,edgeLabel:U.label,nodeLabel2:et.label});var J={graphId:l,edge:U,preNode:null};b[at].projected.push(J)})})}),Object.keys(b).forEach(function(l){var K=b[l],Z=K.projected,X=K.nodeLabel1,W=K.edgeLabel,U=K.nodeLabel2;_.dfsCode.dfsEdgeList.push(new k(0,1,X,W,U)),_.subGraphMining(Z),_.dfsCode.dfsEdgeList.pop()})}},I}(),m=function(_,C,O,b){var l={};return Object.keys(_).forEach(function(K,Z){var X=_[K],W=new z.Graph(Z,!0,C),U={};X.nodes.forEach(function(et,at){W.addNode(at,et[O]),U[et.id]=at}),X.edges.forEach(function(et,at){var J=U[et.source],nt=U[et.target];W.addEdge(-1,J,nt,et[b])}),W&&W.getNodeNum()&&(l[W.id]=W)}),l},y=function(_,C,O){var b=[];return _.forEach(function(l){var K={nodes:[],edges:[]};l.nodes.forEach(function(Z){var X;K.nodes.push((X={id:"".concat(Z.id)},X[C]=Z.label,X))}),l.edges.forEach(function(Z){var X;K.edges.push((X={source:"".concat(Z.from),target:"".concat(Z.to)},X[O]=Z.label,X))}),b.push(K)}),b},v="cluster",p=function(_){var C=_.graphs,O=_.directed,b=O===void 0?!1:O,l=_.nodeLabelProp,K=l===void 0?v:l,Z=_.edgeLabelProp,X=Z===void 0?v:Z,W=m(C,b,K,X),U=_.minSupport,et=_.maxNodeNum,at=_.minNodeNum,J=_.verbose,nt=_.top,mt={graphs:W,minSupport:U,maxNodeNum:et,minNodeNum:at,top:nt,verbose:J,directed:b},Mt=new T(mt);Mt.run();var vt=y(Mt.frequentSubgraphs,K,X);return vt},g=p;w.default=g},47834:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.VACANT_NODE_LABEL=w.VACANT_NODE_ID=w.VACANT_GRAPH_ID=w.VACANT_EDGE_LABEL=w.VACANT_EDGE_ID=w.Node=w.Graph=w.Edge=w.AUTO_EDGE_ID=void 0;var S=-1;w.VACANT_EDGE_ID=S;var x=-1;w.VACANT_NODE_ID=x;var z="-1";w.VACANT_EDGE_LABEL=z;var k="-1";w.VACANT_NODE_LABEL=k;var E=-1;w.VACANT_GRAPH_ID=E;var N="-1";w.AUTO_EDGE_ID=N;var T=function(){function v(p,g,I,_){p===void 0&&(p=S),g===void 0&&(g=x),I===void 0&&(I=x),_===void 0&&(_=z),this.id=p,this.from=g,this.to=I,this.label=_}return v}();w.Edge=T;var m=function(){function v(p,g){p===void 0&&(p=x),g===void 0&&(g=k),this.id=p,this.label=g,this.edges=[],this.edgeMap={}}return v.prototype.addEdge=function(p){this.edges.push(p),this.edgeMap[p.id]=p},v}();w.Node=m;var y=function(){function v(p,g,I){p===void 0&&(p=x),g===void 0&&(g=!0),I===void 0&&(I=!1),this.id=p,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=I}return v.prototype.getNodeNum=function(){return this.nodes.length},v.prototype.addNode=function(p,g){if(!this.nodeMap[p]){var I=new m(p,g);this.nodes.push(I),this.nodeMap[p]=I,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(p)}},v.prototype.addEdge=function(p,g,I,_){if((this.edgeIdAutoIncrease||p===void 0)&&(p=this.counter++),!(this.nodeMap[g]&&this.nodeMap[I]&&this.nodeMap[I].edgeMap[p])){var C=new T(p,g,I,_);if(this.edges.push(C),this.edgeMap[p]=C,this.nodeMap[g].addEdge(C),this.edgeLabelMap[_]||(this.edgeLabelMap[_]=[]),this.edgeLabelMap[_].push(C),!this.directed){var O=new T(p,I,g,_);this.nodeMap[I].addEdge(O),this.edgeLabelMap[_].push(O)}}},v}();w.Graph=y},22735:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=S(39889),z=T(S(90781)),k=T(S(8828)),E=T(S(40467)),N=S(21152);function T(X){return X&&X.__esModule?X:{default:X}}var m=function(W,U,et,at){et===void 0&&(et="cluster"),at===void 0&&(at=2);var J=[],nt=W.nodes;return U.forEach(function(mt,Mt){J.push(y(nt,mt,Mt,et,at))}),J},y=function(W,U,et,at,J){var nt=[et],mt=[],Mt={};return U.forEach(function(vt,zt){if(vt<=J&&et!==zt){nt.push(zt),mt.push(W[zt]);var re=W[zt][at];Mt[re]?(Mt[re].count++,Mt[re].dists.push(vt)):Mt[re]={count:1,dists:[vt]}}}),Object.keys(Mt).forEach(function(vt){Mt[vt].dists=Mt[vt].dists.sort(function(zt,re){return zt-re})}),{nodeIdx:et,nodeId:W[et].id,nodeIdxs:nt,neighbors:mt,neighborNum:nt.length-1,nodeLabelCountMap:Mt}},v=function(W,U,et,at,J){var nt=Math.ceil(et/U),mt={},Mt=0;return at.forEach(function(vt,zt){for(var re=0,Rt=0,At=vt.nodeIdxs,Q=vt.neighborNum-1;re<nt;){for(var gt=At[1+Math.floor(Math.random()*Q)],Vt=0;(mt["".concat(zt,"-").concat(gt)]||mt["".concat(gt,"-").concat(zt)])&&(gt=Math.floor(Math.random()*U),Vt++,!(Vt>2*U)););if(Vt<2*U&&(mt["".concat(zt,"-").concat(gt)]={start:zt,end:gt,distance:J[zt][gt]},re++,Mt++,Mt>=et))return mt;if(Rt++,Rt>2*U)break}if(re<nt){var Ht=nt-re;nt=(nt+Ht)/(U-zt-1)}}),mt},p=function(W,U,et,at){var J=et.nodes;return at||(at={}),Object.keys(W).forEach(function(nt){var mt,Mt;if(!(at&&at[nt])){at[nt]={nodes:[],edges:[]};var vt=W[nt],zt=(mt=U[vt.start])===null||mt===void 0?void 0:mt.nodeIdxs,re=(Mt=U[vt.end])===null||Mt===void 0?void 0:Mt.nodeIdxs;if(!(!zt||!re)){var Rt=new Set(re),At=zt.filter(function(It){return Rt.has(It)});if(!(!At||!At.length)){for(var Q={},gt=At.length,Vt=0;Vt<gt;Vt++){var Ht=J[At[Vt]];at[nt].nodes.push(Ht),Q[Ht.id]=!0}et.edges.forEach(function(It){Q[It.source]&&Q[It.target]&&at[nt].edges.push(It)})}}}}),at},g=function(W,U,et,at){var J,nt,mt={};W.nodes.forEach(function(vt){mt[vt.id]=vt});var Mt=0;return!(!((J=U==null?void 0:U.edges)===null||J===void 0)&&J.length)||((nt=U==null?void 0:U.nodes)===null||nt===void 0?void 0:nt.length)<2?0:(W.edges.forEach(function(vt){var zt=mt[vt.source][et],re=mt[vt.target][et],Rt=U==null?void 0:U.nodes[0][et],At=U==null?void 0:U.nodes[1][et],Q=U==null?void 0:U.edges[0][at];vt[at]===Q&&(zt===Rt&&re===At||zt===At&&re===Rt)&&Mt++}),Mt)},I=function(W,U,et){for(var at=1/0,J=0,nt=function(vt){var zt=W[vt],re=Object.keys(zt).sort(function(It,de){return zt[It]-zt[de]}),Rt=10,At=[];re.forEach(function(It,de){At[de%Rt]||(At[de%Rt]={graphs:[],totalCount:0,aveCount:0}),At[de%Rt].graphs.push(It),At[de%Rt].totalCount+=zt[It]});var Q=0,gt=[];At.forEach(function(It){var de=It.totalCount/It.graphs.length;It.aveCount=de,gt.push(de);var De=0,Ye=It.length;It.graphs.forEach(function(kt,Pt){var _t=zt[kt];It.graphs.forEach(function(jt,Qt){Pt!==Qt&&(De+=Math.abs(_t-zt[jt]))})}),De/=Ye*(Ye-1)/2,Q+=De}),Q/=At.length;var Vt=0;gt.forEach(function(It,de){gt.forEach(function(De,Ye){de!==Ye&&(Vt+=Math.abs(It-De))}),Vt/=gt.length*(gt.length-1)/2});var Ht=Vt-Q;at<Ht&&(at=Ht,J=vt)},mt=0;mt<U;mt++)nt(mt);return{structure:et[J],structureCountMap:W[J]}},_=function(W,U){var et={},at={};return W.forEach(function(J,nt){et[J.id]={idx:nt,node:J,degree:0,inDegree:0,outDegree:0};var mt=J[U];at[mt]||(at[mt]=[]),at[mt].push(J)}),{nodeMap:et,nodeLabelMap:at}},C=function(W,U,et){var at={},J={};return W.forEach(function(nt,mt){at["".concat(N.uniqueId)]={idx:mt,edge:nt};var Mt=nt[U];J[Mt]||(J[Mt]=[]),J[Mt].push(nt);var vt=et[nt.source];vt&&(vt.degree++,vt.outDegree++);var zt=et[nt.target];zt&&(zt.degree++,zt.inDegree++)}),{edgeMap:at,edgeLabelMap:J}},O=function(W,U,et){var at=U.length,J={};return U.forEach(function(nt,mt){for(var Mt=et?0:mt+1,vt=W[mt].id,zt=Mt;zt<at;zt++)if(mt!==zt){var re=W[zt].id,Rt=nt[zt];J["".concat(vt,"-").concat(re)]=Rt,et||(J["".concat(re,"-").concat(vt)]=Rt)}}),J},b=function(W,U,et,at,J,nt,mt,Mt,vt,zt,re){var Rt,At="".concat(U.id,"-").concat(et.id);if(zt&&zt[At])return zt[At];var Q=re?re[At]:void 0;if(!Q){var gt=(Rt={},Rt[At]={start:at[U.id].idx,end:at[et.id].idx,distance:J},Rt);re=p(gt,nt,W,re),Q=re[At]}return g(Q,mt,Mt,vt)},l=function(W,U,et,at){var J,nt,mt,Mt=(J=W[U])===null||J===void 0?void 0:J.degree,vt=(nt=W[U])===null||nt===void 0?void 0:nt.inDegree,zt=(mt=W[U])===null||mt===void 0?void 0:mt.outDegree;return W[U]===void 0&&(Mt=1/0,vt=1/0,zt=1/0,at[U].forEach(function(re){var Rt=et[re.id].degree;Mt>Rt&&(Mt=Rt);var At=et[re.id].inDegree;vt>At&&(vt=At);var Q=et[re.id].outDegree;zt>Q&&(zt=Q)}),W[U]={degree:Mt,inDegree:vt,outDegree:zt}),{minPatternNodeLabelDegree:Mt,minPatternNodeLabelInDegree:vt,minPatternNodeLabelOutDegree:zt}},K=function(W,U,et,at,J,nt,mt){var Mt;if(et===void 0&&(et=!1),nt===void 0&&(nt="cluster"),mt===void 0&&(mt="cluster"),!(!W||!W.nodes)){var vt=W.nodes.length;if(vt){var zt=(0,z.default)(W,et),re=(0,z.default)(U,et),Rt=O(W.nodes,zt,et),At=O(U.nodes,re,et),Q=_(W.nodes,nt),gt=Q.nodeMap,Vt=Q.nodeLabelMap,Ht=_(U.nodes,nt),It=Ht.nodeMap,de=Ht.nodeLabelMap;C(W.edges,mt,gt);var De=C(U.edges,mt,It).edgeLabelMap,Ye=[];re==null||re.forEach(function(nn){Ye=Ye.concat(nn)}),J||(J=Math.max.apply(Math,(0,x.__spreadArray)((0,x.__spreadArray)([],Ye,!1),[2],!1))),at||(at=J);var kt=m(W,zt,nt,at),Pt=m(U,re,nt,at),_t=Math.min(100,vt*(vt-1)/2),jt=v(at,vt,_t,kt,zt),Qt=p(jt,kt,W),Tt=10,Zt=1,Ee=1,dt=4,bt={graphs:Qt,nodeLabelProp:nt,edgeLabelProp:mt,minSupport:Zt,minNodeNum:Ee,maxNodeNum:dt,directed:et},wt=(0,k.default)(bt).slice(0,Tt),D=wt.length,rt=[];wt.forEach(function(nn,vn){rt[vn]={},Object.keys(Qt).forEach(function(ln){var pn=Qt[ln],Bn=g(pn,nn,nt,mt);rt[vn][ln]=Bn})});var Nt=I(rt,D,wt),ft=Nt.structure,ie=Nt.structureCountMap,ge=U.nodes[0],Ge=[],Re=(Mt=U.nodes[0])===null||Mt===void 0?void 0:Mt[nt],qe=-1/0;U.nodes.forEach(function(nn){var vn=nn[nt],ln=Vt[vn];(ln==null?void 0:ln.length)>qe&&(qe=ln.length,Ge=ln,Re=vn,ge=nn)});var Ve={},le={},Le={},je={},Be={},vr={};Object.keys(de).forEach(function(nn,vn){Be[nn]=[],et&&(vr[nn]=[]);var ln=-1/0,pn=de[nn],Bn={};pn.forEach(function(zn){var Hn=At["".concat(ge.id,"-").concat(zn.id)];if(Hn&&Be[nn].push(Hn),ln<Hn&&(ln=Hn),Bn["".concat(ge.id,"-").concat(zn.id)]={start:0,end:It[zn.id].idx,distance:Hn},et){var hi=At["".concat(zn.id,"-").concat(ge.id)];hi&&vr[nn].push(hi)}}),Be[nn]=Be[nn].sort(function(zn,Hn){return zn-Hn}),et&&(vr[nn]=vr[nn].sort(function(zn,Hn){return zn-Hn})),le=p(Bn,Pt,U,le);var Pe=[];if(Object.keys(Bn).forEach(function(zn){if(Le[zn]){Pe.push(Le[zn]);return}var Hn=le[zn];Le[zn]=g(Hn,ft,nt,mt),Pe.push(Le[zn])}),Pe=Pe.sort(function(zn,Hn){return Hn-zn}),je["".concat(ge.id,"-").concat(nn)]=Pe,nn!==Re)for(var Cn=(Ge==null?void 0:Ge.length)||0,Gn=function(Hn){var hi=Ge[Hn],Si=kt[gt[hi.id].idx],pi=Si.nodeLabelCountMap[nn],Dt=de[nn].length;if(!pi||pi.count<Dt)return Ge.splice(Hn,1),"continue";for(var Lt=!1,H=0;H<Dt;H++)if(pi.dists[H]>Be[nn][H]){Lt=!0;break}if(Lt)return Ge.splice(Hn,1),"continue";var G={};Si.neighbors.forEach(function(Bt){var Kt=Rt["".concat(hi.id,"-").concat(Bt.id)];G["".concat(hi.id,"-").concat(Bt.id)]={start:gt[hi.id].idx,end:gt[Bt.id].idx,distance:Kt}}),Qt=p(G,kt,W,Qt);var F=[];Object.keys(G).forEach(function(Bt){if(ie[Bt]){F.push(ie[Bt]);return}var Kt=Qt[Bt];ie[Bt]=g(Kt,ft,nt,mt),F.push(ie[Bt])}),F=F.sort(function(Bt,Kt){return Kt-Bt});for(var st=!1,H=0;H<Dt;H++)if(F[H]<Pe[H]){st=!0;break}if(st)return Ge.splice(Hn,1),"continue"},bi=Cn-1;bi>=0;bi--)Gn(bi)});var or=[];Ge==null||Ge.forEach(function(nn){for(var vn=gt[nn.id].idx,ln=y(W.nodes,zt[vn],vn,nt,J),pn=ln.neighbors,Bn=pn.length,Pe=!1,Cn=Bn-1;Cn>=0;Cn--){if(pn.length+1<U.nodes.length){Pe=!0;return}var Gn=pn[Cn],bi=Gn[nt];if(!de[bi]||!de[bi].length){pn.splice(Cn,1);continue}if(!Be[bi]||!Be[bi].length){pn.splice(Cn,1);continue}var zn="".concat(nn.id,"-").concat(Gn.id),Hn=Rt[zn],hi=Be[bi].length-1,Si=Be[bi][hi];if(Hn>Si){pn.splice(Cn,1);continue}if(et){var pi="".concat(Gn.id,"-").concat(nn.id),Dt=Rt[pi];hi=vr[bi].length-1;var Lt=vr[bi][hi];if(Dt>Lt){pn.splice(Cn,1);continue}}var H=ie[zn]?ie[zn]:b(W,nn,Gn,gt,Hn,kt,ft,nt,mt,ie,Qt),G="".concat(ge.id,"-").concat(bi),F=je[G][je[G].length-1];if(H<F){pn.splice(Cn,1);continue}var st=l(Ve,bi,It,de),Bt=st.minPatternNodeLabelDegree,Kt=st.minPatternNodeLabelInDegree,Yt=st.minPatternNodeLabelOutDegree;if(gt[Gn.id].degree<Bt){pn.splice(Cn,1);continue}}Pe||or.push({nodes:[nn].concat(pn)})});var Ae=(0,E.default)(U,ge.id,!1).length,yr={};et?(Object.keys(Ae).forEach(function(nn){var vn=It[nn].node[nt];yr[vn]?yr[vn].push(Ae[nn]):yr[vn]=[Ae[nn]]}),Object.keys(yr).forEach(function(nn){yr[nn].sort(function(vn,ln){return vn-ln})})):yr=Be;for(var Cr=or.length,zr=function(vn){var ln=or[vn],pn=ln.nodes[0],Bn={},Pe={};ln.nodes.forEach(function(Er,me){Pe[Er.id]={idx:me,node:Er,degree:0,inDegree:0,outDegree:0};var Ft=Er[nt];Bn[Ft]?Bn[Ft]++:Bn[Ft]=1});var Cn=[],Gn={};W.edges.forEach(function(Er){Pe[Er.source]&&Pe[Er.target]&&(Cn.push(Er),Gn[Er[mt]]?Gn[Er[mt]]++:Gn[Er[mt]]=1,Pe[Er.source].degree++,Pe[Er.target].degree++,Pe[Er.source].outDegree++,Pe[Er.target].inDegree++)});for(var bi=Object.keys(De).length,zn=!1,Hn=0;Hn<bi;Hn++){var hi=Object.keys(De)[Hn];if(!Gn[hi]||Gn[hi]<De[hi].length){zn=!0;break}}if(zn)return or.splice(vn,1),"continue";var Si=Cn.length;if(Si<U.edges.length)return or.splice(vn,1),"break";for(var pi=!1,Dt=function(me){var Ft=Cn[me],ne=Ft[mt],Ie=De[ne];if(!Ie||!Ie.length)return Gn[ne]--,Ie&&Gn[ne]<Ie.length?(pi=!0,"break"):(Cn.splice(me,1),Pe[Ft.source].degree--,Pe[Ft.target].degree--,Pe[Ft.source].outDegree--,Pe[Ft.target].inDegree--,"continue");var Ce=Pe[Ft.source].node[nt],Ue=Pe[Ft.target].node[nt],Xe=!1;if(Ie.forEach(function(Wr){var $r=It[Wr.source].node,mn=It[Wr.target].node;$r[nt]===Ce&&mn[nt]===Ue&&(Xe=!0),!et&&$r[nt]===Ue&&mn[nt]===Ce&&(Xe=!0)}),!Xe)return Gn[ne]--,Ie&&Gn[ne]<Ie.length?(pi=!0,"break"):(Cn.splice(me,1),Pe[Ft.source].degree--,Pe[Ft.target].degree--,Pe[Ft.source].outDegree--,Pe[Ft.target].inDegree--,"continue")},Hn=Si-1;Hn>=0;Hn--){var Lt=Dt(Hn);if(Lt==="break")break}if(pi)return or.splice(vn,1),"continue";ln.edges=Cn;var H=(0,E.default)(ln,ln.nodes[0].id,!1).length;if(Object.keys(H).reverse().forEach(function(Er){if(!(Er===ln.nodes[0].id||pi)){if(H[Er]===1/0){var me=Pe[Er].node[nt];if(Bn[me]--,Bn[me]<de[me].length){pi=!0;return}var Ft=ln.nodes.indexOf(Pe[Er].node);ln.nodes.splice(Ft,1),Pe[Er]=void 0;return}var ne=gt[Er].node[nt];if(!yr[ne]||!yr[ne].length||H[Er]>yr[ne][yr[ne].length-1]){var me=Pe[Er].node[nt];if(Bn[me]--,Bn[me]<de[me].length){pi=!0;return}var Ft=ln.nodes.indexOf(Pe[Er].node);ln.nodes.splice(Ft,1),Pe[Er]=void 0}}}),pi)return or.splice(vn,1),"continue";for(var G=!0,F=0;G&&!pi;){G=!1;var st=et?Pe[pn.id].degree<It[ge.id].degree||Pe[pn.id].inDegree<It[ge.id].inDegree||Pe[pn.id].outDegree<It[ge.id].outDegree:Pe[pn.id].degree<It[ge.id].degree;if(st){pi=!0;break}if(Bn[pn[nt]]<de[pn[nt]].length){pi=!0;break}for(var Bt=ln.nodes.length,Kt=Bt-1;Kt>=0;Kt--){var Yt=ln.nodes[Kt],he=Pe[Yt.id].degree,ot=Pe[Yt.id].inDegree,yt=Pe[Yt.id].outDegree,te=Yt[nt],Me=l(Ve,te,It,de),Se=Me.minPatternNodeLabelDegree,er=Me.minPatternNodeLabelInDegree,sr=Me.minPatternNodeLabelOutDegree,ye=et?he<Se||ot<er||yt<sr:he<Se;if(ye){if(Bn[Yt[nt]]--,Bn[Yt[nt]]<de[Yt[nt]].length){pi=!0;break}ln.nodes.splice(Kt,1),Pe[Yt.id]=void 0,G=!0}}if(pi||!G&&F!==0)break;Si=Cn.length;for(var Fe=Si-1;Fe>=0;Fe--){var tr=Cn[Fe];if(!Pe[tr.source]||!Pe[tr.target]){Cn.splice(Fe,1);var Sr=tr[mt];if(Gn[Sr]--,Pe[tr.source]&&(Pe[tr.source].degree--,Pe[tr.source].outDegree--),Pe[tr.target]&&(Pe[tr.target].degree--,Pe[tr.target].inDegree--),De[Sr]&&Gn[Sr]<De[Sr].length){pi=!0;break}G=!0}}F++}if(pi||pi||ln.nodes.length<U.nodes.length||Cn.length<U.edges.length)return or.splice(vn,1),"continue"},Mr=Cr-1;Mr>=0;Mr--){var un=zr(Mr);if(un==="break")break}for(var hn=or.length,Un=function(vn){var ln=or[vn],pn={};ln.edges.forEach(function(Cn){var Gn="".concat(Cn.source,"-").concat(Cn.target,"-").concat(Cn.label);pn[Gn]?pn[Gn]++:pn[Gn]=1});for(var Bn=function(Gn){var bi=or[Gn],zn={};bi.edges.forEach(function(hi){var Si="".concat(hi.source,"-").concat(hi.target,"-").concat(hi.label);zn[Si]?zn[Si]++:zn[Si]=1});var Hn=!0;Object.keys(zn).length!==Object.keys(pn).length?Hn=!1:Object.keys(pn).forEach(function(hi){zn[hi]!==pn[hi]&&(Hn=!1)}),Hn&&or.splice(Gn,1)},Pe=hn-1;Pe>vn;Pe--)Bn(Pe);hn=or.length},Mr=0;Mr<=hn-1;Mr++)Un(Mr);return or}}},Z=K;w.default=Z},60877:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=k(S(61601)),z=S(21152);function k(T){return T&&T.__esModule?T:{default:T}}var E=function(m,y,v,p){y===void 0&&(y=!1),v===void 0&&(v="weight"),p===void 0&&(p=1e3);var g=m.nodes,I=g===void 0?[]:g,_=m.edges,C=_===void 0?[]:_,O={},b={};I.forEach(function(nt,mt){var Mt=(0,z.uniqueId)();nt.clusterId=Mt,O[Mt]={id:Mt,nodes:[nt]},b[nt.id]={node:nt,idx:mt}});var l=(0,x.default)(m,y),K=[],Z={};l.forEach(function(nt,mt){var Mt=0,vt=I[mt].id;Z[vt]={},nt.forEach(function(zt,re){if(zt){Mt+=zt;var Rt=I[re].id;Z[vt][Rt]=zt}}),K.push(Mt)});for(var X=0,W=function(){var mt=!1;if(I.forEach(function(Mt){var vt={};Object.keys(Z[Mt.id]).forEach(function(Ht){var It=Z[Mt.id][Ht],de=b[Ht].node,De=de.clusterId;vt[De]||(vt[De]=0),vt[De]+=It});var zt=-1/0,re=[];if(Object.keys(vt).forEach(function(Ht){zt<vt[Ht]?(zt=vt[Ht],re=[Ht]):zt===vt[Ht]&&re.push(Ht)}),!(re.length===1&&re[0]===Mt.clusterId)){var Rt=re.indexOf(Mt.clusterId);if(Rt>=0&&re.splice(Rt,1),re&&re.length){mt=!0;var At=O[Mt.clusterId],Q=At.nodes.indexOf(Mt);At.nodes.splice(Q,1);var gt=Math.floor(Math.random()*re.length),Vt=O[re[gt]];Vt.nodes.push(Mt),Mt.clusterId=Vt.id}}}),!mt)return"break";X++};X<p;){var U=W();if(U==="break")break}Object.keys(O).forEach(function(nt){var mt=O[nt];(!mt.nodes||!mt.nodes.length)&&delete O[nt]});var et=[],at={};C.forEach(function(nt){var mt=nt.source,Mt=nt.target,vt=nt[v]||1,zt=b[mt].node.clusterId,re=b[Mt].node.clusterId,Rt="".concat(zt,"---").concat(re);if(at[Rt])at[Rt].weight+=vt,at[Rt].count++;else{var At={source:zt,target:re,weight:vt,count:1};at[Rt]=At,et.push(At)}});var J=[];return Object.keys(O).forEach(function(nt){J.push(O[nt])}),{clusters:J,clusterEdges:et}},N=E;w.default=N},16742:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=S(76405),z=T(S(61601)),k=T(S(12023)),E=S(26580),N=S(71547);function T(g){return g&&g.__esModule?g:{default:g}}var m=function(I,_,C,O){for(var b=_.length,l=2*O,K=0,Z=0;Z<b;Z++)for(var X=I[Z].clusterId,W=0;W<b;W++){var U=I[W].clusterId;if(X===U){var et=_[Z][W]||0,at=C[Z]||0,J=C[W]||0;K+=et-at*J/l}}return K*=1/l,K},y=function(I,_){I===void 0&&(I=[]);for(var C=I.length,O=new k.default([]),b=0;b<C;b++)O=O.add(new k.default(_[b]));var l=O.avg(C);l.normalize();for(var K=0,b=0;b<C;b++){var Z=new k.default(_[b]),X=Z.squareEuclideanDistance(l);K+=X}var W=[];I.forEach(function(){W.push([])});for(var b=0;b<C;b++){var Z=new k.default(_[b]);I[b].clusterInertial=0;for(var U=0;U<C;U++){if(b===U){W[b][U]=0;continue}var et=new k.default(_[U]);W[b][U]=Z.squareEuclideanDistance(et),I[b].clusterInertial+=W[b][U]}}for(var at=0,J=2*C*K,b=0;b<C;b++)for(var nt=I[b].clusterId,U=0;U<C;U++){var mt=I[U].clusterId;if(!(b===U||nt!==mt)){var Mt=I[b].clusterInertial*I[U].clusterInertial/Math.pow(J,2)-W[b][U]/J;at+=Mt}}return Number(at.toFixed(4))},v=function(I,_,C,O,b,l,K,Z,X){_===void 0&&(_=!1),C===void 0&&(C="weight"),O===void 0&&(O=1e-4),b===void 0&&(b=!1),l===void 0&&(l=void 0),K===void 0&&(K=[]),Z===void 0&&(Z=["id"]),X===void 0&&(X=1);var W=I.nodes,U=W===void 0?[]:W,et=I.edges,at=et===void 0?[]:et,J=[];if(b){U.forEach(function(Qt,Tt){Qt.properties=Qt.properties||{},Qt.originIndex=Tt});var nt=[];U.every(function(Qt){return Qt.hasOwnProperty("nodeType")})&&(nt=Array.from(new Set(U.map(function(Qt){return Qt.nodeType}))),U.forEach(function(Qt){Qt.properties.nodeType=nt.findIndex(function(Tt){return Tt===Qt.nodeType})}));var mt=(0,E.getAllProperties)(U,l);J=(0,N.oneHot)(mt,K,Z)}var Mt=1,vt={},zt={};U.forEach(function(Qt,Tt){var Zt=String(Mt++);Qt.clusterId=Zt,vt[Zt]={id:Zt,nodes:[Qt]},zt[Qt.id]={node:Qt,idx:Tt}});var re=(0,z.default)(I,_),Rt=[],At={},Q=0;re.forEach(function(Qt,Tt){var Zt=0,Ee=U[Tt].id;At[Ee]={},Qt.forEach(function(dt,bt){if(dt){Zt+=dt;var wt=U[bt].id;At[Ee][wt]=dt,Q+=dt}}),Rt.push(Zt)}),Q/=2;for(var gt=1/0,Vt=1/0,Ht=0,It=[],de={};;){b&&U.every(function(Qt){return Qt.hasOwnProperty("properties")})?gt=m(U,re,Rt,Q)+y(U,J)*X:gt=m(U,re,Rt,Q),Ht===0&&(Vt=gt,It=U,de=vt);var De=gt>0&&gt>Vt&&gt-Vt<O;if(gt>Vt&&(It=U.map(function(Qt){return{node:Qt,clusterId:Qt.clusterId}}),de=(0,x.clone)(vt),Vt=gt),De||Ht>100)break;Ht++,Object.keys(vt).forEach(function(Qt){var Tt=0;at.forEach(function(Zt){var Ee=Zt.source,dt=Zt.target,bt=zt[Ee].node.clusterId,wt=zt[dt].node.clusterId;(bt===Qt&&wt!==Qt||wt===Qt&&bt!==Qt)&&(Tt=Tt+(Zt[C]||1))}),vt[Qt].sumTot=Tt}),U.forEach(function(Qt,Tt){var Zt=vt[Qt.clusterId],Ee=0,dt,bt=Rt[Tt]/(2*Q),wt=0,D=Zt.nodes;D.forEach(function(le){var Le=zt[le.id].idx;wt+=re[Tt][Le]||0});var rt=wt-Zt.sumTot*bt,Nt=D.filter(function(le){return le.id!==Qt.id}),ft=[];Nt.forEach(function(le,Le){ft[Le]=J[le.originIndex]});var ie=y(Nt,J)*X,ge=At[Qt.id];if(Object.keys(ge).forEach(function(le){var Le=zt[le].node,je=Le.clusterId;if(je!==Qt.clusterId){var Be=vt[je],vr=Be.nodes;if(!(!vr||!vr.length)){var or=0;vr.forEach(function(un){var hn=zt[un.id].idx;or+=re[Tt][hn]||0});var Ae=or-Be.sumTot*bt,yr=vr.concat([Qt]),Cr=[];yr.forEach(function(un,hn){Cr[hn]=J[un.originIndex]});var zr=y(yr,J)*X,Mr=Ae-rt;b&&(Mr=Ae+zr-(rt+ie)),Mr>Ee&&(Ee=Mr,dt=Be)}}}),Ee>0){dt.nodes.push(Qt);var Ge=Qt.clusterId;Qt.clusterId=dt.id;var Re=Zt.nodes.indexOf(Qt);Zt.nodes.splice(Re,1);var qe=0,Ve=0;at.forEach(function(le){var Le=le.source,je=le.target,Be=zt[Le].node.clusterId,vr=zt[je].node.clusterId;(Be===dt.id&&vr!==dt.id||vr===dt.id&&Be!==dt.id)&&(qe=qe+(le[C]||1)),(Be===Ge&&vr!==Ge||vr===Ge&&Be!==Ge)&&(Ve=Ve+(le[C]||1))}),dt.sumTot=qe,Zt.sumTot=Ve}})}var Ye={},kt=0;Object.keys(de).forEach(function(Qt){var Tt=de[Qt];if(!Tt.nodes||!Tt.nodes.length){delete de[Qt];return}var Zt=String(kt+1);Zt!==Qt&&(Tt.id=Zt,Tt.nodes=Tt.nodes.map(function(Ee){return{id:Ee.id,clusterId:Zt}}),de[Zt]=Tt,Ye[Qt]=Zt,delete de[Qt],kt++)}),It.forEach(function(Qt){var Tt=Qt.node,Zt=Qt.clusterId;Tt&&(Tt.clusterId=Zt,Tt.clusterId&&Ye[Tt.clusterId]&&(Tt.clusterId=Ye[Tt.clusterId]))});var Pt=[],_t={};at.forEach(function(Qt){var Tt=Qt.source,Zt=Qt.target,Ee=Qt[C]||1,dt=zt[Tt].node.clusterId,bt=zt[Zt].node.clusterId;if(!(!dt||!bt)){var wt="".concat(dt,"---").concat(bt);if(_t[wt])_t[wt].weight+=Ee,_t[wt].count++;else{var D={source:dt,target:bt,weight:Ee,count:1};_t[wt]=D,Pt.push(D)}}});var jt=[];return Object.keys(de).forEach(function(Qt){jt.push(de[Qt])}),{clusters:jt,clusterEdges:Pt}},p=v;w.default=p},39972:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=E(S(80746)),z=E(S(7846)),k=S(21152);function E(v){return v&&v.__esModule?v:{default:v}}var N=function(p,g){var I=[],_=p.nodes,C=_===void 0?[]:_,O=p.edges,b=O===void 0?[]:O;if(C.length===0)return I;var l=C[0],K=new Set;K.add(l);var Z=function(J,nt){return g?J.weight-nt.weight:0},X=new z.default(Z);for((0,k.getEdgesByNodeId)(l.id,b).forEach(function(at){X.insert(at)});!X.isEmpty();){var W=X.delMin(),U=W.source,et=W.target;K.has(U)&&K.has(et)||(I.push(W),K.has(U)||(K.add(U),(0,k.getEdgesByNodeId)(U,b).forEach(function(at){X.insert(at)})),K.has(et)||(K.add(et),(0,k.getEdgesByNodeId)(et,b).forEach(function(at){X.insert(at)})))}return I},T=function(p,g){var I=[],_=p.nodes,C=_===void 0?[]:_,O=p.edges,b=O===void 0?[]:O;if(C.length===0)return I;var l=b.map(function(U){return U});g&&l.sort(function(U,et){return U.weight-et.weight});for(var K=new x.default(C.map(function(U){return U.id}));l.length>0;){var Z=l.shift(),X=Z.source,W=Z.target;K.connected(X,W)||(I.push(Z),K.union(X,W))}return I},m=function(p,g,I){var _={prim:N,kruskal:T};return I?_[I](p,g):T(p,g)},y=m;w.default=y},91234:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=k(S(67543)),z=S(21152);function k(T){return T&&T.__esModule?T:{default:T}}var E=function(m,y,v){typeof y!="number"&&(y=1e-6),typeof v!="number"&&(v=.85);for(var p=1,g=0,I=1e3,_=m.nodes,C=_===void 0?[]:_,O=m.edges,b=O===void 0?[]:O,l=C.length,K,Z={},X={},W=0;W<l;++W){var U=C[W],et=U.id;Z[et]=1/l,X[et]=1/l}for(var at=(0,x.default)(m);I>0&&p>y;){g=0;for(var W=0;W<l;++W){var U=C[W],et=U.id;if(K=0,at[U.id].inDegree===0)Z[et]=0;else{for(var J=(0,z.getNeighbors)(et,b,"source"),nt=0;nt<J.length;++nt){var mt=J[nt],Mt=at[mt].outDegree;Mt>0&&(K+=X[mt]/Mt)}Z[et]=v*K,g+=Z[et]}}g=(1-g)/l,p=0;for(var W=0;W<l;++W){var U=C[W],et=U.id;K=Z[et]+g,p+=Math.abs(K-X[et]),X[et]=K}I-=1}return X},N=E;w.default=N},7846:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var S=function(E,N){return E-N},x=function(){function k(E){E===void 0&&(E=S),this.compareFn=E,this.list=[]}return k.prototype.getLeft=function(E){return 2*E+1},k.prototype.getRight=function(E){return 2*E+2},k.prototype.getParent=function(E){return E===0?null:Math.floor((E-1)/2)},k.prototype.isEmpty=function(){return this.list.length<=0},k.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},k.prototype.delMin=function(){var E=this.top(),N=this.list.pop();return this.list.length>0&&(this.list[0]=N,this.moveDown(0)),E},k.prototype.insert=function(E){if(E!==null){this.list.push(E);var N=this.list.length-1;return this.moveUp(N),!0}return!1},k.prototype.moveUp=function(E){for(var N=this.getParent(E);E&&E>0&&this.compareFn(this.list[N],this.list[E])>0;){var T=this.list[N];this.list[N]=this.list[E],this.list[E]=T,E=N,N=this.getParent(E)}},k.prototype.moveDown=function(E){var N,T=E,m=this.getLeft(E),y=this.getRight(E),v=this.list.length;m!==null&&m<v&&this.compareFn(this.list[T],this.list[m])>0?T=m:y!==null&&y<v&&this.compareFn(this.list[T],this.list[y])>0&&(T=y),E!==T&&(N=[this.list[T],this.list[E]],this.list[E]=N[0],this.list[T]=N[1],this.moveDown(T))},k}(),z=x;w.default=z},62207:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=w.LinkedListNode=void 0;var S=function(N,T){return N===T},x=function(){function E(N,T){T===void 0&&(T=null),this.value=N,this.next=T}return E.prototype.toString=function(N){return N?N(this.value):"".concat(this.value)},E}();w.LinkedListNode=x;var z=function(){function E(N){N===void 0&&(N=S),this.head=null,this.tail=null,this.compare=N}return E.prototype.prepend=function(N){var T=new x(N,this.head);return this.head=T,this.tail||(this.tail=T),this},E.prototype.append=function(N){var T=new x(N);return this.head?(this.tail.next=T,this.tail=T,this):(this.head=T,this.tail=T,this)},E.prototype.delete=function(N){if(!this.head)return null;for(var T=null;this.head&&this.compare(this.head.value,N);)T=this.head,this.head=this.head.next;var m=this.head;if(m!==null)for(;m.next;)this.compare(m.next.value,N)?(T=m.next,m.next=m.next.next):m=m.next;return this.compare(this.tail.value,N)&&(this.tail=m),T},E.prototype.find=function(N){var T=N.value,m=T===void 0?void 0:T,y=N.callback,v=y===void 0?void 0:y;if(!this.head)return null;for(var p=this.head;p;){if(v&&v(p.value)||m!==void 0&&this.compare(p.value,m))return p;p=p.next}return null},E.prototype.deleteTail=function(){var N=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,N;for(var T=this.head;T.next;)T.next.next?T=T.next:T.next=null;return this.tail=T,N},E.prototype.deleteHead=function(){if(!this.head)return null;var N=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),N},E.prototype.fromArray=function(N){var T=this;return N.forEach(function(m){return T.append(m)}),this},E.prototype.toArray=function(){for(var N=[],T=this.head;T;)N.push(T),T=T.next;return N},E.prototype.reverse=function(){for(var N=this.head,T=null,m=null;N;)m=N.next,N.next=T,T=N,N=m;this.tail=this.head,this.head=T},E.prototype.toString=function(N){return N===void 0&&(N=void 0),this.toArray().map(function(T){return T.toString(N)}).toString()},E}(),k=z;w.default=k},99878:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=z(S(62207));function z(N){return N&&N.__esModule?N:{default:N}}var k=function(){function N(){this.linkedList=new x.default}return N.prototype.isEmpty=function(){return!this.linkedList.head},N.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},N.prototype.enqueue=function(T){this.linkedList.append(T)},N.prototype.dequeue=function(){var T=this.linkedList.deleteHead();return T?T.value:null},N.prototype.toString=function(T){return this.linkedList.toString(T)},N}(),E=k;w.default=E},80746:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var S=function(){function z(k){this.count=k.length,this.parent={};for(var E=0,N=k;E<N.length;E++){var T=N[E];this.parent[T]=T}}return z.prototype.find=function(k){for(;this.parent[k]!==k;)k=this.parent[k];return k},z.prototype.union=function(k,E){var N=this.find(k),T=this.find(E);N!==T&&(N<T?(this.parent[E]!==E&&this.union(this.parent[E],k),this.parent[E]=this.parent[k]):(this.parent[k]!==k&&this.union(this.parent[k],E),this.parent[k]=this.parent[E]))},z.prototype.connected=function(k,E){return this.find(k)===this.find(E)},z}(),x=S;w.default=x},19392:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.DistanceType=void 0;var S;w.DistanceType=S,function(x){x.EuclideanDistance="euclideanDistance"}(S||(w.DistanceType=S={}))},21152:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.uniqueId=w.getOutEdgesNodeId=w.getNeighbors=w.getEdgesByNodeId=void 0;var S=function(N,T,m){T===void 0&&(T=[]);var y=T.filter(function(I){return I.source===N||I.target===N});if(m==="target"){var v=function(_){return _.source===N};return y.filter(v).map(function(I){return I.target})}if(m==="source"){var p=function(_){return _.target===N};return y.filter(p).map(function(I){return I.source})}var g=function(_){return _.source===N?_.target:_.source};return y.map(g)};w.getNeighbors=S;var x=function(N,T){return T.filter(function(m){return m.source===N})};w.getOutEdgesNodeId=x;var z=function(N,T){return T.filter(function(m){return m.source===N||m.target===N})};w.getEdgesByNodeId=z;var k=function(N){N===void 0&&(N=0);var T="".concat(Math.random()).split(".")[1].substr(0,5),m="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(N,"-").concat(T).concat(m)};w.uniqueId=k},71547:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.oneHot=w.getDistance=w.getAllKeyValueMap=w.default=void 0;var x=S(76405),z=S(19392),k=E(S(12023));function E(v){return v&&v.__esModule?v:{default:v}}var N=function(p,g,I){var _=[];g!=null&&g.length?_=g:(p.forEach(function(O){_=_.concat(Object.keys(O))}),_=(0,x.uniq)(_));var C={};return _.forEach(function(O){var b=[];p.forEach(function(l){l[O]!==void 0&&l[O]!==""&&b.push(l[O])}),b.length&&!(I!=null&&I.includes(O))&&(C[O]=(0,x.uniq)(b))}),C};w.getAllKeyValueMap=N;var T=function(p,g,I){var _=N(p,g,I),C=[];return Object.keys(_).length&&p.forEach(function(O,b){var l=[];if(Object.keys(_).length===1){var K=Object.keys(_)[0],Z=_[K];Z.every(function(X){return!isNaN(Number(X))})&&(l=[O[K]])}else Object.keys(_).forEach(function(X){for(var W=O[X],U=_[X],et=U.findIndex(function(nt){return W===nt}),at=[],J=0;J<U.length;J++)J===et?at.push(1):at.push(0);l=l.concat(at)});C[b]=l}),C};w.oneHot=T;var m=function(p,g,I,_){I===void 0&&(I=z.DistanceType.EuclideanDistance);var C=0;switch(I){case z.DistanceType.EuclideanDistance:C=new k.default(p).euclideanDistance(new k.default(g));break;default:break}return C};w.getDistance=m;var y={getAllKeyValueMap:N,oneHot:T,getDistance:m};w.default=y},26580:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.getPropertyWeight=w.getAllSortProperties=w.getAllProperties=w.default=void 0;var x=S(94061),z=function(y,v){y===void 0&&(y=[]),v===void 0&&(v=100);var p={};y.forEach(function(I){I.properties&&Object.keys(I.properties).forEach(function(_){if(_==="id"||!"".concat(I.properties[_]).match(x.secondReg)&&!"".concat(I.properties[_]).match(x.dateReg)&&isNaN(Number(I.properties[_]))){p.hasOwnProperty(_)&&delete p[_];return}p.hasOwnProperty(_)?p[_]+=1:p[_]=1})});var g=Object.keys(p).sort(function(I,_){return p[_]-p[I]});return g.length<v?g:g.slice(0,v)};w.getAllSortProperties=z;var k=function(y,v){return v.map(function(p){if(y.hasOwnProperty(p)){if(!isNaN(Number(y[p])))return Number(y[p]);if(y[p].match(x.secondReg)||y[p].match(x.dateReg))return Number(Date.parse(new Date(y[p])))/1e3}return 0})},E=function(y){for(var v=z(y),p=[],g=0;g<y.length;g++)p[g]=k(y[g].properties,v);return p};w.getPropertyWeight=E;var N=function(y,v){v===void 0&&(v=void 0);var p=[];return y.forEach(function(g){v===void 0&&p.push(g),g[v]!==void 0&&p.push(g[v])}),p};w.getAllProperties=N;var T={getAllSortProperties:z,getPropertyWeight:E,getAllProperties:N};w.default=T},12023:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=S(76405),z=function(){function E(N){this.arr=N}return E.prototype.getArr=function(){return this.arr||[]},E.prototype.add=function(N){var T,m=N.arr;if(!(!((T=this.arr)===null||T===void 0)&&T.length))return new E(m);if(!(m!=null&&m.length))return new E(this.arr);if(this.arr.length===m.length){var y=[];for(var v in this.arr)y[v]=this.arr[v]+m[v];return new E(y)}},E.prototype.subtract=function(N){var T,m=N.arr;if(!(!((T=this.arr)===null||T===void 0)&&T.length))return new E(m);if(!(m!=null&&m.length))return new E(this.arr);if(this.arr.length===m.length){var y=[];for(var v in this.arr)y[v]=this.arr[v]-m[v];return new E(y)}},E.prototype.avg=function(N){var T=[];if(N!==0)for(var m in this.arr)T[m]=this.arr[m]/N;return new E(T)},E.prototype.negate=function(){var N=[];for(var T in this.arr)N[T]=-this.arr[T];return new E(N)},E.prototype.squareEuclideanDistance=function(N){var T,m=N.arr;if(!(!((T=this.arr)===null||T===void 0)&&T.length)||!(m!=null&&m.length))return 0;if(this.arr.length===m.length){var y=0;for(var v in this.arr)y+=Math.pow(this.arr[v]-N.arr[v],2);return y}},E.prototype.euclideanDistance=function(N){var T,m=N.arr;if(!(!((T=this.arr)===null||T===void 0)&&T.length)||!(m!=null&&m.length))return 0;if(this.arr.length===m.length){var y=0;for(var v in this.arr)y+=Math.pow(this.arr[v]-N.arr[v],2);return Math.sqrt(y)}else console.error("The two vectors are unequal in length.")},E.prototype.normalize=function(){var N=[],T=(0,x.clone)(this.arr);T.sort(function(p,g){return p-g});var m=T[T.length-1],y=T[0];for(var v in this.arr)N[v]=(this.arr[v]-y)/(m-y);return new E(N)},E.prototype.norm2=function(){var N;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return 0;var T=0;for(var m in this.arr)T+=Math.pow(this.arr[m],2);return Math.sqrt(T)},E.prototype.dot=function(N){var T,m=N.arr;if(!(!((T=this.arr)===null||T===void 0)&&T.length)||!(m!=null&&m.length))return 0;if(this.arr.length===m.length){var y=0;for(var v in this.arr)y+=this.arr[v]*N.arr[v];return y}else console.error("The two vectors are unequal in length.")},E.prototype.equal=function(N){var T,m=N.arr;if(((T=this.arr)===null||T===void 0?void 0:T.length)!==(m==null?void 0:m.length))return!1;for(var y in this.arr)if(this.arr[y]!==m[y])return!1;return!0},E}(),k=z;w.default=k},33013:function(ae,w,S){"use strict";function x(X){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},x(X)}Object.defineProperty(w,"__esModule",{value:!0}),Object.defineProperty(w,"GADDI",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(w,"breadthFirstSearch",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(w,"connectedComponent",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(w,"depthFirstSearch",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(w,"detectCycle",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(w,"dijkstra",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(w,"findAllPath",{enumerable:!0,get:function(){return v.findAllPath}}),Object.defineProperty(w,"findShortestPath",{enumerable:!0,get:function(){return v.findShortestPath}}),Object.defineProperty(w,"floydWarshall",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(w,"getAdjMatrix",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(w,"getDegree",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(w,"getInDegree",{enumerable:!0,get:function(){return N.getInDegree}}),Object.defineProperty(w,"getNeighbors",{enumerable:!0,get:function(){return b.getNeighbors}}),Object.defineProperty(w,"getOutDegree",{enumerable:!0,get:function(){return N.getOutDegree}}),Object.defineProperty(w,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(w,"louvain",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(w,"minimumSpanningTree",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(w,"pageRank",{enumerable:!0,get:function(){return C.default}});var z=Z(S(61601)),k=Z(S(26773)),E=Z(S(15968)),N=K(S(67543)),T=Z(S(27945)),m=Z(S(86015)),y=Z(S(40467)),v=S(80735),p=Z(S(90781)),g=Z(S(60877)),I=Z(S(16742)),_=Z(S(39972)),C=Z(S(91234)),O=Z(S(22735)),b=S(21152);function l(X){if(typeof WeakMap!="function")return null;var W=new WeakMap,U=new WeakMap;return(l=function(at){return at?U:W})(X)}function K(X,W){if(!W&&X&&X.__esModule)return X;if(X===null||x(X)!=="object"&&typeof X!="function")return{default:X};var U=l(W);if(U&&U.has(X))return U.get(X);var et={},at=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in X)if(J!=="default"&&Object.prototype.hasOwnProperty.call(X,J)){var nt=at?Object.getOwnPropertyDescriptor(X,J):null;nt&&(nt.get||nt.set)?Object.defineProperty(et,J,nt):et[J]=X[J]}return et.default=X,U&&U.set(X,et),et}function Z(X){return X&&X.__esModule?X:{default:X}}},52415:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.MESSAGE=w.ALGORITHM=void 0;var S={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};w.ALGORITHM=S;var x={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};w.MESSAGE=x},19240:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var x=S(52415),z=k(S(17924));function k(T){return T&&T.__esModule?T:{default:T}}var E=function(m){return function(){for(var y=[],v=0;v<arguments.length;v++)y[v]=arguments[v];return new Promise(function(p,g){var I=new z.default;I.postMessage({_algorithmType:m,data:y}),I.onmessage=function(_){var C=_.data,O=C.data,b=C._algorithmType;x.MESSAGE.SUCCESS===b?p(O):g(),I.terminate()}})}},N=E;w.default=N},88312:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.pageRankAsync=w.minimumSpanningTreeAsync=w.louvainAsync=w.labelPropagationAsync=w.getOutDegreeAsync=w.getNeighborsAsync=w.getInDegreeAsync=w.getDegreeAsync=w.getAdjMatrixAsync=w.floydWarshallAsync=w.findShortestPathAsync=w.findAllPathAsync=w.dijkstraAsync=w.detectCycleAsync=w.detectAllUndirectedCycleAsync=w.detectAllDirectedCycleAsync=w.detectAllCyclesAsync=w.connectedComponentAsync=w.GADDIAsync=void 0;var x=k(S(19240)),z=S(52415);function k(et){return et&&et.__esModule?et:{default:et}}var E=function(at,J){return(0,x.default)(z.ALGORITHM.getAdjMatrix).apply(void 0,[at,J])};w.getAdjMatrixAsync=E;var N=function(at,J){return(0,x.default)(z.ALGORITHM.connectedComponent).apply(void 0,[at,J])};w.connectedComponentAsync=N;var T=function(at){return(0,x.default)(z.ALGORITHM.getDegree)(at)};w.getDegreeAsync=T;var m=function(at,J){return(0,x.default)(z.ALGORITHM.getInDegree)(at,J)};w.getInDegreeAsync=m;var y=function(at,J){return(0,x.default)(z.ALGORITHM.getOutDegree)(at,J)};w.getOutDegreeAsync=y;var v=function(at){return(0,x.default)(z.ALGORITHM.detectCycle)(at)};w.detectCycleAsync=v;var p=function(at){return(0,x.default)(z.ALGORITHM.detectAllCycles)(at)};w.detectAllCyclesAsync=p;var g=function(at){return(0,x.default)(z.ALGORITHM.detectAllDirectedCycle)(at)};w.detectAllDirectedCycleAsync=g;var I=function(at){return(0,x.default)(z.ALGORITHM.detectAllUndirectedCycle)(at)};w.detectAllUndirectedCycleAsync=I;var _=function(at,J,nt,mt){return(0,x.default)(z.ALGORITHM.dijkstra).apply(void 0,[at,J,nt,mt])};w.dijkstraAsync=_;var C=function(at,J,nt,mt){return(0,x.default)(z.ALGORITHM.findAllPath).apply(void 0,[at,J,nt,mt])};w.findAllPathAsync=C;var O=function(at,J,nt,mt,Mt){return(0,x.default)(z.ALGORITHM.findShortestPath).apply(void 0,[at,J,nt,mt,Mt])};w.findShortestPathAsync=O;var b=function(at,J){return(0,x.default)(z.ALGORITHM.floydWarshall).apply(void 0,[at,J])};w.floydWarshallAsync=b;var l=function(at,J,nt,mt){return mt===void 0&&(mt=1e3),(0,x.default)(z.ALGORITHM.labelPropagation)(at,J,nt,mt)};w.labelPropagationAsync=l;var K=function(at,J,nt,mt){return(0,x.default)(z.ALGORITHM.louvain)(at,J,nt,mt)};w.louvainAsync=K;var Z=function(at,J,nt){return(0,x.default)(z.ALGORITHM.minimumSpanningTree).apply(void 0,[at,J,nt])};w.minimumSpanningTreeAsync=Z;var X=function(at,J,nt){return(0,x.default)(z.ALGORITHM.pageRank).apply(void 0,[at,J,nt])};w.pageRankAsync=X;var W=function(at,J,nt){return(0,x.default)(z.ALGORITHM.getNeighbors).apply(void 0,[at,J,nt])};w.getNeighborsAsync=W;var U=function(at,J,nt,mt,Mt,vt,zt){return nt===void 0&&(nt=!1),vt===void 0&&(vt="cluster"),zt===void 0&&(zt="cluster"),(0,x.default)(z.ALGORITHM.GADDI).apply(void 0,[at,J,nt,mt,Mt,vt,zt])};w.GADDIAsync=U},17924:function(ae,w,S){"use strict";function x(y){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},x(y)}Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var z=N(S(33013)),k=S(52415);function E(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,p=new WeakMap;return(E=function(I){return I?p:v})(y)}function N(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||x(y)!=="object"&&typeof y!="function")return{default:y};var p=E(v);if(p&&p.has(y))return p.get(y);var g={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in y)if(_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)){var C=I?Object.getOwnPropertyDescriptor(y,_):null;C&&(C.get||C.set)?Object.defineProperty(g,_,C):g[_]=y[_]}return g.default=y,p&&p.set(y,g),g}var T=typeof self!="undefined"?self:{};T.onmessage=function(y){var v=y.data,p=v._algorithmType,g=v.data;if(p){if(typeof z[p]=="function"){var I=z[p].apply(z,g);T.postMessage({_algorithmType:k.MESSAGE.SUCCESS,data:I});return}T.postMessage({_algorithmType:k.MESSAGE.FAILURE})}};var m=null;w.default=m},72470:function(){},70434:function(){},85337:function(){},10758:function(){},1036:function(){},87117:function(){},42622:function(){},43295:function(){},7193:function(){},31974:function(){},69069:function(){},18859:function(){},82274:function(ae,w,S){"use strict";S.r(w),S.d(w,{Camera:function(){return wu},Geometry:function(){return Fs},Kernel:function(){return la},Material:function(){return cu},Renderable:function(){return Qo},World:function(){return rv}});function x(M,it,R,Y){R&&Object.defineProperty(M,it,{enumerable:R.enumerable,configurable:R.configurable,writable:R.writable,value:R.initializer?R.initializer.call(Y):void 0})}var z=S(20319),k=S(88024);function E(M,it,R,Y,q){var Et={};return Object.keys(Y).forEach(function(Gt){Et[Gt]=Y[Gt]}),Et.enumerable=!!Et.enumerable,Et.configurable=!!Et.configurable,("value"in Et||Et.initializer)&&(Et.writable=!0),Et=R.slice().reverse().reduce(function(Gt,ee){return ee(M,it,Gt)||Gt},Et),q&&Et.initializer!==void 0&&(Et.value=Et.initializer?Et.initializer.call(q):void 0,Et.initializer=void 0),Et.initializer===void 0&&(Object.defineProperty(M,it,Et),Et=null),Et}var N=S(91010),T=S(366),m=S.n(T),y=S(10270),v=-1,p=1;function g(){return p++}var I=function M(it){(0,z.Z)(this,M)},_=function(){function M(it){(0,z.Z)(this,M),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=it}return(0,k.Z)(M,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(R){return this.lookup[R]>-1}},{key:"create",value:function(R,Y){this.lookup[R]=this.components.length;var q=new this.clazz(Y||{});return this.components.push(q),this.entities.push(R),q}},{key:"remove",value:function(R){var Y=this.lookup[R];Y>-1&&Y<this.components.length-1&&(this.components[Y]=this.components[this.components.length-1],this.entities[Y]=this.entities[this.entities.length-1],this.lookup[this.entities[Y]]=Y),this.components.pop(),this.entities.pop(),delete this.lookup[R]}},{key:"removeKeepSorted",value:function(R){var Y=this.lookup[R];if(Y>-1){var q=this.entities[Y];if(Y<this.components.length-1){for(var Et=Y+1;Et<this.components.length;++Et)this.components[Et-1]=this.components[Et];for(var Gt=Y+1;Gt<this.entities.length;++Gt)this.entities[Gt-1]=this.entities[Gt],this.lookup[this.entities[Gt-1]]=Gt-1}this.components.pop(),this.entities.pop(),delete this.lookup[q]}}},{key:"moveItem",value:function(R,Y){if(R!==Y){for(var q=this.components[R],Et=this.entities[R],Gt=R<Y?1:-1,ee=R;ee!==Y;ee+=Gt){var pe=ee+Gt;this.components[ee]=this.components[pe],this.entities[ee]=this.entities[pe],this.lookup[this.entities[ee]]=ee}this.components[Y]=q,this.entities[Y]=Et,this.lookup[Et]=Y}}},{key:"getEntity",value:function(R){return this.entities[R]}},{key:"getComponent",value:function(R){return this.components[R]}},{key:"getComponentByEntity",value:function(R){var Y=this.lookup[R];return Y>-1?this.components[Y]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(R){for(var Y=0,q=Object.keys(this.lookup);Y<q.length;Y++){var Et=q[Y],Gt=Number(Et);if(this.lookup[Gt]===R)return Gt}return v}},{key:"find",value:function(R){for(var Y=0;Y<this.getCount();Y++){var q=this.getComponent(Y);if(R(q,Y))return q}return null}},{key:"findIndex",value:function(R){for(var Y=0;Y<this.getCount();Y++){var q=this.getComponent(Y);if(R(q,Y))return Y}return-1}},{key:"forEach",value:function(R){for(var Y=0,q=Object.keys(this.lookup);Y<q.length;Y++){var Et=q[Y],Gt=Number(Et),ee=this.lookup[Gt];R(Gt,this.getComponent(ee))}}},{key:"forEachAsync",value:function(){var it=(0,y.Z)(m().mark(function Y(q){var Et,Gt,ee,pe,Te;return m().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:Et=0,Gt=Object.keys(this.lookup);case 1:if(!(Et<Gt.length)){pr.next=10;break}return ee=Gt[Et],pe=Number(ee),Te=this.lookup[pe],pr.next=7,q(pe,this.getComponent(Te));case 7:Et++,pr.next=1;break;case 10:case"end":return pr.stop()}},Y,this)}));function R(Y){return it.apply(this,arguments)}return R}()},{key:"map",value:function(R){for(var Y=[],q=0,Et=Object.keys(this.lookup);q<Et.length;q++){var Gt=Et[q],ee=Number(Gt),pe=this.lookup[ee];Y.push(R(ee,this.getComponent(pe)))}return Y}}]),M}(),C=S(39455),O=S(45540),b={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},l=function M(){(0,z.Z)(this,M),this.index=void 0},K=function M(){(0,z.Z)(this,M),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Z=function(){function M(){(0,z.Z)(this,M),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,k.Z)(M,[{key:"read",value:function(R){return this.reads.find(function(Y){return Y.index===R.index})||this.reads.push(R),R}},{key:"sample",value:function(R){return this.read(R),R}},{key:"write",value:function(R,Y){var q=this.writes.find(function(pe){return pe.index===Y.index});if(q)return Y;var Et=R.getResourceNode(Y);Et.resource.version++,Et.resource.imported&&(this.hasSideEffect=!0);var Gt=R.createResourceNode(Et.resource),ee=R.getResourceNode(Gt);return ee.writer=this,this.writes.push(Gt),Gt}}]),M}(),X=S(40883),W=S(28830),U=S(9809),et=function M(){(0,z.Z)(this,M),this.first=void 0,this.last=void 0};function at(M){var it=J();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var nt=function(M){(0,X.Z)(R,M);var it=at(R);function R(){var Y;(0,z.Z)(this,R);for(var q=arguments.length,Et=new Array(q),Gt=0;Gt<q;Gt++)Et[Gt]=arguments[Gt];return Y=it.call.apply(it,[this].concat(Et)),Y.version=0,Y.refs=0,Y.name=void 0,Y.imported=void 0,Y.priority=void 0,Y.discardStart=!0,Y.discardEnd=!1,Y.descriptor=void 0,Y.resource=void 0,Y}return(0,k.Z)(R,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),R}(et),mt=function M(){(0,z.Z)(this,M),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},Mt,vt,zt,re,Rt,At;function Q(M,it){var R;if(typeof Symbol=="undefined"||M[Symbol.iterator]==null){if(Array.isArray(M)||(R=gt(M))||it&&M&&typeof M.length=="number"){R&&(M=R);var Y=0,q=function(){};return{s:q,n:function(){return Y>=M.length?{done:!0}:{done:!1,value:M[Y++]}},e:function(Te){throw Te},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=M[Symbol.iterator]()},n:function(){var Te=R.next();return Et=Te.done,Te},e:function(Te){Gt=!0,ee=Te},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function gt(M,it){if(M){if(typeof M=="string")return Vt(M,it);var R=Object.prototype.toString.call(M).slice(8,-1);if(R==="Object"&&M.constructor&&(R=M.constructor.name),R==="Map"||R==="Set")return Array.from(M);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return Vt(M,it)}}function Vt(M,it){(it==null||it>M.length)&&(it=M.length);for(var R=0,Y=new Array(it);R<it;R++)Y[R]=M[R];return Y}var Ht=(Mt=(0,O.b2)(),vt=(0,O.f3)(b.RenderEngine),Mt(zt=(re=(At=function(){function M(){(0,z.Z)(this,M),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],x(this,"engine",Rt,this)}return(0,k.Z)(M,[{key:"execute",value:function(){var it=(0,y.Z)(m().mark(function Y(q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return this.compile(),Gt.next=3,this.executePassNodes(q);case 3:case"end":return Gt.stop()}},Y,this)}));function R(Y){return it.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(R){R.tearDown&&R.tearDown()}),this.reset()}},{key:"addPass",value:function(R,Y,q,Et){var Gt=new K;Gt.execute=q,Et&&(Gt.tearDown=Et),Gt.name=R;var ee=new Z;return ee.name=R,this.passNodes.push(ee),this.frameGraphPasses.push(Gt),Y(this,ee,Gt),Gt}},{key:"getPass",value:function(R){return this.frameGraphPasses.find(function(Y){return Y.name===R})}},{key:"compile",value:function(){var R=this,Y=Q(this.passNodes),q;try{for(Y.s();!(q=Y.n()).done;){var Et=q.value;Et.refCount=Et.writes.length+(Et.hasSideEffect?1:0),Et.reads.forEach(function(Ji){R.resourceNodes[Ji.index].readerCount++})}}catch(Ji){Y.e(Ji)}finally{Y.f()}var Gt=[],ee=Q(this.resourceNodes),pe;try{for(ee.s();!(pe=ee.n()).done;){var Te=pe.value;Te.readerCount===0&&Gt.push(Te)}}catch(Ji){ee.e(Ji)}finally{ee.f()}for(;Gt.length;){var We=Gt.pop(),pr=We&&We.writer;if(pr&&--pr.refCount===0){var Tr=Q(pr.reads),Br;try{for(Tr.s();!(Br=Tr.n()).done;){var Ir=Br.value,Dr=this.resourceNodes[Ir.index];--Dr.readerCount===0&&Gt.push(Dr)}}catch(Ji){Tr.e(Ji)}finally{Tr.f()}}}this.resourceNodes.forEach(function(Ji){Ji.resource.refs+=Ji.readerCount});var en=Q(this.passNodes),_n;try{for(en.s();!(_n=en.n()).done;){var Dn=_n.value;if(Dn.refCount){var gn=Q(Dn.reads),ei;try{for(gn.s();!(ei=gn.n()).done;){var In=ei.value,xi=this.resourceNodes[In.index].resource;xi.first=xi.first?xi.first:Dn,xi.last=Dn}}catch(Ji){gn.e(Ji)}finally{gn.f()}var ai=Q(Dn.writes),oi;try{for(ai.s();!(oi=ai.n()).done;){var va=oi.value,Yi=this.resourceNodes[va.index].resource;Yi.first=Yi.first?Yi.first:Dn,Yi.last=Dn}}catch(Ji){ai.e(Ji)}finally{ai.f()}}}}catch(Ji){en.e(Ji)}finally{en.f()}for(var Ia=0;Ia<2;Ia++){var ra=Q(this.resourceNodes),Pa;try{for(ra.s();!(Pa=ra.n()).done;){var Jr=Pa.value,Ys=Jr.resource;if(Ys.priority===Ia&&Ys.refs){var tc=Ys.first,Bc=Ys.last;tc&&Bc&&(tc.devirtualize.push(Ys),Bc.destroy.push(Ys))}}}catch(Ji){ra.e(Ji)}finally{ra.f()}}}},{key:"executePassNodes",value:function(){var it=(0,y.Z)(m().mark(function Y(q){var Et,Gt,ee,pe,Te,We,pr,Tr,Br,Ir,Dr,en,_n,Dn,gn,ei,In;return m().wrap(function(ai){for(;;)switch(ai.prev=ai.next){case 0:Et=Q(this.passNodes.entries()),ai.prev=1,Et.s();case 3:if((Gt=Et.n()).done){ai.next=18;break}if(ee=(0,C.Z)(Gt.value,2),pe=ee[0],Te=ee[1],!Te.refCount){ai.next=16;break}We=Q(Te.devirtualize);try{for(We.s();!(pr=We.n()).done;)Tr=pr.value,Tr.preExecuteDevirtualize(this.engine)}catch(oi){We.e(oi)}finally{We.f()}Br=Q(Te.destroy);try{for(Br.s();!(Ir=Br.n()).done;)Dr=Ir.value,Dr.preExecuteDestroy(this.engine)}catch(oi){Br.e(oi)}finally{Br.f()}return ai.next=12,this.frameGraphPasses[pe].execute(this,this.frameGraphPasses[pe],q);case 12:en=Q(Te.devirtualize);try{for(en.s();!(_n=en.n()).done;)Dn=_n.value,Dn.postExecuteDevirtualize(this.engine)}catch(oi){en.e(oi)}finally{en.f()}gn=Q(Te.destroy);try{for(gn.s();!(ei=gn.n()).done;)In=ei.value,In.postExecuteDestroy(this.engine)}catch(oi){gn.e(oi)}finally{gn.f()}case 16:ai.next=3;break;case 18:ai.next=23;break;case 20:ai.prev=20,ai.t0=ai.catch(1),Et.e(ai.t0);case 23:return ai.prev=23,Et.f(),ai.finish(23);case 26:this.reset();case 27:case"end":return ai.stop()}},Y,this,[[1,20,23,26]])}));function R(Y){return it.apply(this,arguments)}return R}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(R){return this.resourceNodes[R.index]}},{key:"createResourceNode",value:function(R){var Y=new mt;Y.resource=R,Y.version=R.version,this.resourceNodes.push(Y);var q=new l;return q.index=this.resourceNodes.length-1,q}},{key:"createTexture",value:function(R,Y,q){var Et=new nt;return Et.name=Y,Et.descriptor=q,this.createResourceNode(Et)}},{key:"createRenderTarget",value:function(R,Y,q){var Et=new nt;return Et.name=Y,Et.descriptor=q,this.createResourceNode(Et)}},{key:"present",value:function(R){this.addPass("Present",function(Y,q){q.read(R),q.hasSideEffect=!0},(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:case"end":return Et.stop()}},Y)})))}}]),M}(),At),Rt=E(re.prototype,"engine",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re))||zt),It=S(41470),de=S(95353),De=S(59196),Ye=S(65316),kt=S(91606),Pt=S(24622),_t=9007199254740991,jt="[object Arguments]",Qt="[object Array]",Tt="[object Boolean]",Zt="[object Date]",Ee="[object Error]",dt="[object Function]",bt="[object Map]",wt="[object Number]",D="[object Object]",rt="[object RegExp]",Nt="[object Set]",ft="[object String]",ie="[object WeakMap]",ge="[object ArrayBuffer]",Ge="[object DataView]",Re="[object Float32Array]",qe="[object Float64Array]",Ve="[object Int8Array]",le="[object Int16Array]",Le="[object Int32Array]",je="[object Uint8Array]",Be="[object Uint8ClampedArray]",vr="[object Uint16Array]",or="[object Uint32Array]",Ae={};Ae[Re]=Ae[qe]=Ae[Ve]=Ae[le]=Ae[Le]=Ae[je]=Ae[Be]=Ae[vr]=Ae[or]=!0,Ae[jt]=Ae[Qt]=Ae[ge]=Ae[Tt]=Ae[Ge]=Ae[Zt]=Ae[Ee]=Ae[dt]=Ae[bt]=Ae[wt]=Ae[D]=Ae[rt]=Ae[Nt]=Ae[ft]=Ae[ie]=!1;function yr(M){return function(it){return M(it)}}var Cr=Object.prototype,zr=Cr.toString;function Mr(M){return hn(M)&&un(M.length)&&!!Ae[zr.call(M)]}function un(M){return typeof M=="number"&&M>-1&&M%1===0&&M<=_t}function hn(M){return!!M&&(0,Pt.Z)(M)==="object"}var Un=Mr;function nn(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function vn(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?nn(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):nn(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}function ln(M){var it=pn();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function pn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Bn=function(M){(0,X.Z)(R,M);var it=ln(R);function R(Y){var q;return(0,z.Z)(this,R),q=it.call(this,Y),q.dirty=!0,q.attributes=[],q.indices=void 0,q.indicesBuffer=void 0,q.vertexCount=0,q.maxInstancedCount=void 0,q.aabb=void 0,q.entity=void 0,Object.assign((0,de.Z)(q),Y),q}return(0,k.Z)(R,[{key:"setAttribute",value:function(q,Et,Gt,ee){var pe=this.attributes.find(function(Te){return Te.name===q});return pe?(pe.data=Et,pe.dirty=!0):this.attributes.push(vn(vn({dirty:!0,name:q,data:Et},Gt),{},{bufferGetter:ee})),this.dirty=!0,this}},{key:"setIndex",value:function(q){return this.indices=new Uint32Array(q.buffer?q.buffer:q),this.dirty=!0,this}},{key:"applyMatrix",value:function(q){var Et=this.attributes.find(function(Tr){var Br=Tr.name;return Br==="position"}),Gt=this.attributes.find(function(Tr){var Br=Tr.name;return Br==="normal"});if(Et&&(Et.dirty=!0,Et.data&&Et.data.length))for(var ee=0;ee<Et.data.length;ee+=3){var pe=De.fromValues(Et.data[ee],Et.data[ee+1],Et.data[ee+2],1);De.transformMat4(pe,pe,q),Un(Et.data)?Et.data.set([pe[0],pe[1],pe[2]],ee):(Et.data[ee]=pe[0],Et.data[ee+1]=pe[1],Et.data[ee+2]=pe[2])}if(Gt){var Te=Ye.normalFromMat4(Ye.create(),q);if(Gt.data&&Gt.data.length)for(var We=0;We<Gt.data.length;We+=3){var pr=kt.fromValues(Gt.data[We],Gt.data[We+1],Gt.data[We+2]);kt.transformMat3(pr,pr,Te),kt.normalize(pr,pr),Un(Gt.data)?Gt.data.set([pr[0],pr[1],pr[2]],We):(Gt.data[We]=pr[0],Gt.data[We+1]=pr[1],Gt.data[We+2]=pr[2])}}}}]),R}(I),Pe;(function(M){M[M.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",M[M.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",M[M.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",M[M.POINTS=0]="POINTS",M[M.LINES=1]="LINES",M[M.LINE_LOOP=2]="LINE_LOOP",M[M.LINE_STRIP=3]="LINE_STRIP",M[M.TRIANGLES=4]="TRIANGLES",M[M.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",M[M.TRIANGLE_FAN=6]="TRIANGLE_FAN",M[M.ZERO=0]="ZERO",M[M.ONE=1]="ONE",M[M.SRC_COLOR=768]="SRC_COLOR",M[M.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",M[M.SRC_ALPHA=770]="SRC_ALPHA",M[M.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",M[M.DST_ALPHA=772]="DST_ALPHA",M[M.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",M[M.DST_COLOR=774]="DST_COLOR",M[M.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",M[M.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",M[M.FUNC_ADD=32774]="FUNC_ADD",M[M.BLEND_EQUATION=32777]="BLEND_EQUATION",M[M.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",M[M.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",M[M.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",M[M.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",M[M.MAX_EXT=32776]="MAX_EXT",M[M.MIN_EXT=32775]="MIN_EXT",M[M.BLEND_DST_RGB=32968]="BLEND_DST_RGB",M[M.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",M[M.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",M[M.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",M[M.CONSTANT_COLOR=32769]="CONSTANT_COLOR",M[M.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",M[M.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",M[M.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",M[M.BLEND_COLOR=32773]="BLEND_COLOR",M[M.ARRAY_BUFFER=34962]="ARRAY_BUFFER",M[M.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",M[M.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",M[M.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",M[M.STREAM_DRAW=35040]="STREAM_DRAW",M[M.STATIC_DRAW=35044]="STATIC_DRAW",M[M.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",M[M.BUFFER_SIZE=34660]="BUFFER_SIZE",M[M.BUFFER_USAGE=34661]="BUFFER_USAGE",M[M.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",M[M.FRONT=1028]="FRONT",M[M.BACK=1029]="BACK",M[M.FRONT_AND_BACK=1032]="FRONT_AND_BACK",M[M.CULL_FACE=2884]="CULL_FACE",M[M.BLEND=3042]="BLEND",M[M.DITHER=3024]="DITHER",M[M.STENCIL_TEST=2960]="STENCIL_TEST",M[M.DEPTH_TEST=2929]="DEPTH_TEST",M[M.SCISSOR_TEST=3089]="SCISSOR_TEST",M[M.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",M[M.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",M[M.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",M[M.NO_ERROR=0]="NO_ERROR",M[M.INVALID_ENUM=1280]="INVALID_ENUM",M[M.INVALID_VALUE=1281]="INVALID_VALUE",M[M.INVALID_OPERATION=1282]="INVALID_OPERATION",M[M.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",M[M.CW=2304]="CW",M[M.CCW=2305]="CCW",M[M.LINE_WIDTH=2849]="LINE_WIDTH",M[M.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",M[M.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",M[M.CULL_FACE_MODE=2885]="CULL_FACE_MODE",M[M.FRONT_FACE=2886]="FRONT_FACE",M[M.DEPTH_RANGE=2928]="DEPTH_RANGE",M[M.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",M[M.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",M[M.DEPTH_FUNC=2932]="DEPTH_FUNC",M[M.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",M[M.STENCIL_FUNC=2962]="STENCIL_FUNC",M[M.STENCIL_FAIL=2964]="STENCIL_FAIL",M[M.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",M[M.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",M[M.STENCIL_REF=2967]="STENCIL_REF",M[M.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",M[M.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",M[M.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",M[M.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",M[M.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",M[M.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",M[M.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",M[M.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",M[M.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",M[M.VIEWPORT=2978]="VIEWPORT",M[M.SCISSOR_BOX=3088]="SCISSOR_BOX",M[M.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",M[M.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",M[M.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",M[M.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",M[M.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",M[M.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",M[M.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",M[M.RED_BITS=3410]="RED_BITS",M[M.GREEN_BITS=3411]="GREEN_BITS",M[M.BLUE_BITS=3412]="BLUE_BITS",M[M.ALPHA_BITS=3413]="ALPHA_BITS",M[M.DEPTH_BITS=3414]="DEPTH_BITS",M[M.STENCIL_BITS=3415]="STENCIL_BITS",M[M.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",M[M.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",M[M.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",M[M.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",M[M.SAMPLES=32937]="SAMPLES",M[M.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",M[M.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",M[M.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",M[M.DONT_CARE=4352]="DONT_CARE",M[M.FASTEST=4353]="FASTEST",M[M.NICEST=4354]="NICEST",M[M.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",M[M.BYTE=5120]="BYTE",M[M.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",M[M.SHORT=5122]="SHORT",M[M.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",M[M.INT=5124]="INT",M[M.UNSIGNED_INT=5125]="UNSIGNED_INT",M[M.FLOAT=5126]="FLOAT",M[M.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",M[M.ALPHA=6406]="ALPHA",M[M.RGB=6407]="RGB",M[M.RGBA=6408]="RGBA",M[M.LUMINANCE=6409]="LUMINANCE",M[M.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",M[M.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",M[M.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",M[M.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",M[M.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",M[M.VERTEX_SHADER=35633]="VERTEX_SHADER",M[M.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",M[M.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",M[M.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",M[M.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",M[M.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",M[M.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",M[M.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",M[M.SHADER_TYPE=35663]="SHADER_TYPE",M[M.DELETE_STATUS=35712]="DELETE_STATUS",M[M.LINK_STATUS=35714]="LINK_STATUS",M[M.VALIDATE_STATUS=35715]="VALIDATE_STATUS",M[M.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",M[M.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",M[M.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",M[M.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",M[M.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",M[M.NEVER=512]="NEVER",M[M.LESS=513]="LESS",M[M.EQUAL=514]="EQUAL",M[M.LEQUAL=515]="LEQUAL",M[M.GREATER=516]="GREATER",M[M.NOTEQUAL=517]="NOTEQUAL",M[M.GEQUAL=518]="GEQUAL",M[M.ALWAYS=519]="ALWAYS",M[M.KEEP=7680]="KEEP",M[M.REPLACE=7681]="REPLACE",M[M.INCR=7682]="INCR",M[M.DECR=7683]="DECR",M[M.INVERT=5386]="INVERT",M[M.INCR_WRAP=34055]="INCR_WRAP",M[M.DECR_WRAP=34056]="DECR_WRAP",M[M.VENDOR=7936]="VENDOR",M[M.RENDERER=7937]="RENDERER",M[M.VERSION=7938]="VERSION",M[M.NEAREST=9728]="NEAREST",M[M.LINEAR=9729]="LINEAR",M[M.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",M[M.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",M[M.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",M[M.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",M[M.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",M[M.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",M[M.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",M[M.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",M[M.TEXTURE_2D=3553]="TEXTURE_2D",M[M.TEXTURE=5890]="TEXTURE",M[M.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",M[M.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",M[M.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",M[M.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",M[M.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",M[M.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",M[M.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",M[M.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",M[M.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",M[M.TEXTURE0=33984]="TEXTURE0",M[M.TEXTURE1=33985]="TEXTURE1",M[M.TEXTURE2=33986]="TEXTURE2",M[M.TEXTURE3=33987]="TEXTURE3",M[M.TEXTURE4=33988]="TEXTURE4",M[M.TEXTURE5=33989]="TEXTURE5",M[M.TEXTURE6=33990]="TEXTURE6",M[M.TEXTURE7=33991]="TEXTURE7",M[M.TEXTURE8=33992]="TEXTURE8",M[M.TEXTURE9=33993]="TEXTURE9",M[M.TEXTURE10=33994]="TEXTURE10",M[M.TEXTURE11=33995]="TEXTURE11",M[M.TEXTURE12=33996]="TEXTURE12",M[M.TEXTURE13=33997]="TEXTURE13",M[M.TEXTURE14=33998]="TEXTURE14",M[M.TEXTURE15=33999]="TEXTURE15",M[M.TEXTURE16=34e3]="TEXTURE16",M[M.TEXTURE17=34001]="TEXTURE17",M[M.TEXTURE18=34002]="TEXTURE18",M[M.TEXTURE19=34003]="TEXTURE19",M[M.TEXTURE20=34004]="TEXTURE20",M[M.TEXTURE21=34005]="TEXTURE21",M[M.TEXTURE22=34006]="TEXTURE22",M[M.TEXTURE23=34007]="TEXTURE23",M[M.TEXTURE24=34008]="TEXTURE24",M[M.TEXTURE25=34009]="TEXTURE25",M[M.TEXTURE26=34010]="TEXTURE26",M[M.TEXTURE27=34011]="TEXTURE27",M[M.TEXTURE28=34012]="TEXTURE28",M[M.TEXTURE29=34013]="TEXTURE29",M[M.TEXTURE30=34014]="TEXTURE30",M[M.TEXTURE31=34015]="TEXTURE31",M[M.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",M[M.REPEAT=10497]="REPEAT",M[M.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",M[M.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",M[M.FLOAT_VEC2=35664]="FLOAT_VEC2",M[M.FLOAT_VEC3=35665]="FLOAT_VEC3",M[M.FLOAT_VEC4=35666]="FLOAT_VEC4",M[M.INT_VEC2=35667]="INT_VEC2",M[M.INT_VEC3=35668]="INT_VEC3",M[M.INT_VEC4=35669]="INT_VEC4",M[M.BOOL=35670]="BOOL",M[M.BOOL_VEC2=35671]="BOOL_VEC2",M[M.BOOL_VEC3=35672]="BOOL_VEC3",M[M.BOOL_VEC4=35673]="BOOL_VEC4",M[M.FLOAT_MAT2=35674]="FLOAT_MAT2",M[M.FLOAT_MAT3=35675]="FLOAT_MAT3",M[M.FLOAT_MAT4=35676]="FLOAT_MAT4",M[M.SAMPLER_2D=35678]="SAMPLER_2D",M[M.SAMPLER_CUBE=35680]="SAMPLER_CUBE",M[M.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",M[M.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",M[M.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",M[M.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",M[M.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",M[M.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",M[M.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",M[M.COMPILE_STATUS=35713]="COMPILE_STATUS",M[M.LOW_FLOAT=36336]="LOW_FLOAT",M[M.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",M[M.HIGH_FLOAT=36338]="HIGH_FLOAT",M[M.LOW_INT=36339]="LOW_INT",M[M.MEDIUM_INT=36340]="MEDIUM_INT",M[M.HIGH_INT=36341]="HIGH_INT",M[M.FRAMEBUFFER=36160]="FRAMEBUFFER",M[M.RENDERBUFFER=36161]="RENDERBUFFER",M[M.RGBA4=32854]="RGBA4",M[M.RGB5_A1=32855]="RGB5_A1",M[M.RGB565=36194]="RGB565",M[M.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",M[M.STENCIL_INDEX=6401]="STENCIL_INDEX",M[M.STENCIL_INDEX8=36168]="STENCIL_INDEX8",M[M.DEPTH_STENCIL=34041]="DEPTH_STENCIL",M[M.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",M[M.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",M[M.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",M[M.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",M[M.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",M[M.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",M[M.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",M[M.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",M[M.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",M[M.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",M[M.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",M[M.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",M[M.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",M[M.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",M[M.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",M[M.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",M[M.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",M[M.NONE=0]="NONE",M[M.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",M[M.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",M[M.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",M[M.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",M[M.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",M[M.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",M[M.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",M[M.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",M[M.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",M[M.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",M[M.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",M[M.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",M[M.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",M[M.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",M[M.COPY_SRC=1]="COPY_SRC",M[M.COPY_DST=2]="COPY_DST",M[M.SAMPLED=4]="SAMPLED",M[M.STORAGE=8]="STORAGE",M[M.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Pe||(Pe={}));var Cn,Gn,bi,zn,Hn,hi,Si,pi,Dt=(Cn=(0,O.b2)(),Gn=(0,O.f3)(b.GeometryComponentManager),bi=(0,O.f3)(b.RenderEngine),Cn(zn=(Hn=(pi=function(){function M(){(0,z.Z)(this,M),x(this,"geometry",hi,this),x(this,"engine",Si,this)}return(0,k.Z)(M,[{key:"execute",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q=this;return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:this.geometry.forEach(function(ee,pe){pe.dirty&&(pe.attributes.forEach(function(Te){if(Te.dirty&&Te.data){if(!Te.buffer)Te.buffer=q.engine.createBuffer({data:Te.data,type:Pe.FLOAT});else{var We;(We=Te.buffer)===null||We===void 0||We.subData({data:Te.data,offset:0})}Te.dirty=!1}}),pe.indices&&(pe.indicesBuffer?pe.indicesBuffer.subData({data:pe.indices,offset:0}):pe.indicesBuffer=q.engine.createElements({data:pe.indices,count:pe.indices.length,type:Pe.UNSIGNED_INT,usage:Pe.STATIC_DRAW})),pe.dirty=!1)});case 1:case"end":return Gt.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.geometry.forEach(function(R,Y){Y.indicesBuffer&&Y.indicesBuffer.destroy(),Y.attributes.forEach(function(q){q.buffer&&q.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},Y=R.vertexCount,q=g();return this.geometry.create(q,{vertexCount:Y})}},{key:"createInstancedBufferGeometry",value:function(R){var Y=R.maxInstancedCount,q=R.vertexCount,Et=g();return this.geometry.create(Et,{maxInstancedCount:Y,vertexCount:q})}}]),M}(),pi),hi=E(Hn.prototype,"geometry",[Gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=E(Hn.prototype,"engine",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn))||zn);function Lt(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function H(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Lt(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Lt(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}function G(M){var it=F();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function F(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var st=function(M){(0,X.Z)(R,M);var it=G(R);function R(Y){var q;return(0,z.Z)(this,R),q=it.call(this,Y),q.vertexShaderGLSL=void 0,q.fragmentShaderGLSL=void 0,q.defines={},q.dirty=!0,q.uniforms=[],q.cull={enable:!0,face:Pe.BACK},q.depth={enable:!0},q.blend=void 0,q.entity=void 0,q.type=void 0,Object.assign((0,de.Z)(q),Y),q}return(0,k.Z)(R,[{key:"setDefines",value:function(q){return this.defines=H(H({},this.defines),q),this}},{key:"setCull",value:function(q){return this.cull=q,this}},{key:"setDepth",value:function(q){return this.depth=q,this}},{key:"setBlend",value:function(q){return this.blend=q,this}},{key:"setUniform",value:function(q,Et){var Gt=this;if(typeof q!="string")return Object.keys(q).forEach(function(pe){return Gt.setUniform(pe,q[pe])}),this;var ee=this.uniforms.find(function(pe){return pe.name===q});return ee?(ee.dirty=!0,ee.data=Et):this.uniforms.push({name:q,dirty:!0,data:Et}),this.dirty=!0,this}}]),R}(I),Bt,Kt,Yt,he,ot,yt,te,Me,Se,er;function sr(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function ye(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?sr(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):sr(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}var Fe=(Bt=(0,O.b2)(),Kt=(0,O.f3)(b.MaterialComponentManager),Yt=(0,O.f3)(b.RenderEngine),he=(0,O.f3)(b.ShaderModuleService),Bt(ot=(yt=(er=function(){function M(){(0,z.Z)(this,M),x(this,"material",te,this),x(this,"engine",Me,this),x(this,"shaderModule",Se,this)}return(0,k.Z)(M,[{key:"execute",value:function(){var it=(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:case"end":return Et.stop()}},Y)}));function R(){return it.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(R){var Y=g(),q=R.vertexShader,Et=R.fragmentShader,Gt=[];if(!this.engine.supportWebGPU){var ee="material-".concat(Y);this.shaderModule.registerModule(ee,{vs:R.vertexShader,fs:R.fragmentShader});var pe=this.shaderModule.getModule(ee);q=pe.vs,Et=pe.fs,pe.uniforms&&(Gt=Object.keys(pe.uniforms).map(function(Te){return{dirty:!0,name:Te,data:pe.uniforms[Te]}}))}return this.material.create(Y,ye(ye({vertexShaderGLSL:q,fragmentShaderGLSL:Et},R),{},{uniforms:Gt}))}}]),M}(),er),te=E(yt.prototype,"material",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=E(yt.prototype,"engine",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=E(yt.prototype,"shaderModule",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt))||ot);function tr(M){var it=Sr();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function Sr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Er;(function(M){M[M.Standard=0]="Standard"})(Er||(Er={}));var me=function(M){(0,X.Z)(R,M);var it=tr(R);function R(Y){var q;return(0,z.Z)(this,R),q=it.call(this,Y),q.strategy=Er.Standard,q.visibilityPlaneMask=0,q.visible=!1,Object.assign((0,de.Z)(q),Y),q}return R}(I),Ft=function(){function M(it,R){(0,z.Z)(this,M),this.center=void 0,this.halfExtents=void 0,this.min=kt.create(),this.max=kt.create(),this.update(it,R)}return(0,k.Z)(M,[{key:"update",value:function(R,Y){this.center=R||kt.create(),this.halfExtents=Y||kt.fromValues(.5,.5,.5),this.min=kt.sub(this.min,this.center,this.halfExtents),this.max=kt.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(R,Y){kt.add(this.center,Y,R),kt.scale(this.center,this.center,.5),kt.sub(this.halfExtents,Y,R),kt.scale(this.halfExtents,this.halfExtents,.5),kt.copy(this.min,R),kt.copy(this.max,Y)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(R){var Y=this.center,q=Y[0],Et=Y[1],Gt=Y[2],ee=this.halfExtents,pe=ee[0],Te=ee[1],We=ee[2],pr=q-pe,Tr=q+pe,Br=Et-Te,Ir=Et+Te,Dr=Gt-We,en=Gt+We,_n=R.center,Dn=_n[0],gn=_n[1],ei=_n[2],In=R.halfExtents,xi=In[0],ai=In[1],oi=In[2],va=Dn-xi,Yi=Dn+xi,Ia=gn-ai,ra=gn+ai,Pa=ei-oi,Jr=ei+oi;va<pr&&(pr=va),Yi>Tr&&(Tr=Yi),Ia<Br&&(Br=Ia),ra>Ir&&(Ir=ra),Pa<Dr&&(Dr=Pa),Jr>en&&(en=Jr),Y[0]=(pr+Tr)*.5,Y[1]=(Br+Ir)*.5,Y[2]=(Dr+en)*.5,ee[0]=(Tr-pr)*.5,ee[1]=(Ir-Br)*.5,ee[2]=(en-Dr)*.5,this.min[0]=pr,this.min[1]=Br,this.min[2]=Dr,this.max[0]=Tr,this.max[1]=Ir,this.max[2]=en}},{key:"intersects",value:function(R){var Y=this.getMax(),q=this.getMin(),Et=R.getMax(),Gt=R.getMin();return q[0]<=Et[0]&&Y[0]>=Gt[0]&&q[1]<=Et[1]&&Y[1]>=Gt[1]&&q[2]<=Et[2]&&Y[2]>=Gt[2]}},{key:"containsPoint",value:function(R){var Y=this.getMin(),q=this.getMax();return!(R[0]<Y[0]||R[0]>q[0]||R[1]<Y[1]||R[1]>q[1]||R[2]<Y[2]||R[2]>q[2])}},{key:"getNegativeFarPoint",value:function(R){return R.pnVertexFlag===273?kt.copy(kt.create(),this.min):R.pnVertexFlag===272?kt.fromValues(this.min[0],this.min[1],this.max[2]):R.pnVertexFlag===257?kt.fromValues(this.min[0],this.max[1],this.min[2]):R.pnVertexFlag===256?kt.fromValues(this.min[0],this.max[1],this.max[2]):R.pnVertexFlag===17?kt.fromValues(this.max[0],this.min[1],this.min[2]):R.pnVertexFlag===16?kt.fromValues(this.max[0],this.min[1],this.max[2]):R.pnVertexFlag===1?kt.fromValues(this.max[0],this.max[1],this.min[2]):kt.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(R){return R.pnVertexFlag===273?kt.copy(kt.create(),this.max):R.pnVertexFlag===272?kt.fromValues(this.max[0],this.max[1],this.min[2]):R.pnVertexFlag===257?kt.fromValues(this.max[0],this.min[1],this.max[2]):R.pnVertexFlag===256?kt.fromValues(this.max[0],this.min[1],this.min[2]):R.pnVertexFlag===17?kt.fromValues(this.min[0],this.max[1],this.max[2]):R.pnVertexFlag===16?kt.fromValues(this.min[0],this.max[1],this.min[2]):R.pnVertexFlag===1?kt.fromValues(this.min[0],this.min[1],this.max[2]):kt.fromValues(this.min[0],this.min[1],this.min[2])}}]),M}();function ne(M){var it=Ie();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function Ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Ce=function(M){(0,X.Z)(R,M);var it=ne(R);function R(Y){var q;return(0,z.Z)(this,R),q=it.call(this,Y),q.material=void 0,q.geometry=void 0,q.aabb=new Ft,q.aabbDirty=!0,q.model=void 0,q.visible=!0,q.children=[],Object.assign((0,de.Z)(q),Y),q}return R}(I),Ue=function(){function M(it,R){(0,z.Z)(this,M),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=it||0,this.normal=R||kt.fromValues(0,1,0),this.updatePNVertexFlag()}return(0,k.Z)(M,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(R){return kt.dot(R,this.normal)-this.distance}},{key:"normalize",value:function(){var R=1/kt.len(this.normal);kt.scale(this.normal,this.normal,R),this.distance*=R}},{key:"intersectsLine",value:function(R,Y,q){var Et=this.distanceToPoint(R),Gt=this.distanceToPoint(Y),ee=Et/(Et-Gt),pe=ee>=0&&ee<=1;return pe&&q&&kt.lerp(q,R,Y,ee),pe}}]),M}(),Xe;(function(M){M[M.OUTSIDE=4294967295]="OUTSIDE",M[M.INSIDE=0]="INSIDE",M[M.INDETERMINATE=2147483647]="INDETERMINATE"})(Xe||(Xe={}));var Wr=function(){function M(it){if((0,z.Z)(this,M),this.planes=[],it)this.planes=it;else for(var R=0;R<6;R++)this.planes.push(new Ue)}return(0,k.Z)(M,[{key:"extractFromVPMatrix",value:function(R){var Y=(0,C.Z)(R,16),q=Y[0],Et=Y[1],Gt=Y[2],ee=Y[3],pe=Y[4],Te=Y[5],We=Y[6],pr=Y[7],Tr=Y[8],Br=Y[9],Ir=Y[10],Dr=Y[11],en=Y[12],_n=Y[13],Dn=Y[14],gn=Y[15];kt.set(this.planes[0].normal,ee-q,pr-pe,Dr-Tr),this.planes[0].distance=-(gn-en),kt.set(this.planes[1].normal,ee+q,pr+pe,Dr+Tr),this.planes[1].distance=-(gn+en),kt.set(this.planes[2].normal,ee+Et,pr+Te,Dr+Br),this.planes[2].distance=-(gn+_n),kt.set(this.planes[3].normal,ee-Et,pr-Te,Dr-Br),this.planes[3].distance=-(gn-_n),kt.set(this.planes[4].normal,ee-Gt,pr-We,Dr-Ir),this.planes[4].distance=-(gn-Dn),kt.set(this.planes[5].normal,ee+Gt,pr+We,Dr+Ir),this.planes[5].distance=-(gn+Dn),this.planes.forEach(function(ei){ei.normalize(),ei.updatePNVertexFlag()})}}]),M}();function $r(M){return typeof M=="number"}function mn(M){return M===void 0?0:M>360||M<-360?M%360:M}function Nn(M,it,R){return isNumber(M)?vec3.fromValues(M,it,R):M.length===3?vec3.clone(M):vec3.fromValues(M[0],M[1],M[2])}function kn(M,it){return it[0]=M[0],it[1]=M[1],it[2]=M[2],it[3]=M[4],it[4]=M[5],it[5]=M[6],it[6]=M[8],it[7]=M[9],it[8]=M[10],it}function Jn(M){var it=(0,C.Z)(M,3),R=it[0],Y=it[1],q=it[2],Et=R+Y*256+q*65536-1;return Et}function ri(M){return[M+1&255,M+1>>8&255,M+1>>8>>8&255]}var Ri,di,Ki,yo,Ea,ta,mo,Na,To,vi,xa,Vo,zi,ao;function jo(M,it){var R;if(typeof Symbol=="undefined"||M[Symbol.iterator]==null){if(Array.isArray(M)||(R=ps(M))||it&&M&&typeof M.length=="number"){R&&(M=R);var Y=0,q=function(){};return{s:q,n:function(){return Y>=M.length?{done:!0}:{done:!1,value:M[Y++]}},e:function(Te){throw Te},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=M[Symbol.iterator]()},n:function(){var Te=R.next();return Et=Te.done,Te},e:function(Te){Gt=!0,ee=Te},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function ps(M,it){if(M){if(typeof M=="string")return Io(M,it);var R=Object.prototype.toString.call(M).slice(8,-1);if(R==="Object"&&M.constructor&&(R=M.constructor.name),R==="Map"||R==="Set")return Array.from(M);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return Io(M,it)}}function Io(M,it){(it==null||it>M.length)&&(it=M.length);for(var R=0,Y=new Array(it);R<it;R++)Y[R]=M[R];return Y}var Ja=(Ri=(0,O.b2)(),di=(0,O.f3)(b.MeshComponentManager),Ki=(0,O.f3)(b.CullableComponentManager),yo=(0,O.f3)(b.GeometryComponentManager),Ea=(0,O.f3)(b.HierarchyComponentManager),ta=(0,O.f3)(b.TransformComponentManager),Ri(mo=(Na=(ao=function(){function M(){(0,z.Z)(this,M),x(this,"mesh",To,this),x(this,"cullable",vi,this),x(this,"geometry",xa,this),x(this,"hierarchy",Vo,this),x(this,"transform",zi,this),this.planes=void 0}return(0,k.Z)(M,[{key:"setFrustumPlanes",value:function(R){this.planes=R}},{key:"execute",value:function(){var it=(0,y.Z)(m().mark(function Y(q){var Et,Gt,ee,pe,Te,We,pr,Tr,Br,Ir,Dr,en,_n,Dn,gn,ei,In,xi,ai,oi,va;return m().wrap(function(Ia){for(;;)switch(Ia.prev=Ia.next){case 0:Et=jo(q);try{for(Et.s();!(Gt=Et.n()).done;){ee=Gt.value,pe=ee.getScene(),Te=ee.getCamera(),We=jo(pe.getEntities());try{for(We.s();!(pr=We.n()).done;)Tr=pr.value,Br=this.mesh.getComponentByEntity(Tr),Br&&(Ir=this.hierarchy.getComponentByEntity(Tr),Dr=this.cullable.getComponentByEntity(Tr),en=Br.geometry,_n=this.transform.getComponentByEntity(Tr),en&&en.aabb&&_n&&Br.aabbDirty&&(Dn=_n.worldTransform,gn=en.aabb,ei=gn.center,In=gn.halfExtents,xi=kt.transformMat4(kt.create(),ei,Dn),ai=kn(Dn,Ye.create()),oi=kt.transformMat3(kt.create(),In,ai),Br.aabb.update(xi,oi),Br.aabbDirty=!1),Dr&&en&&(va=this.cullable.getComponentByEntity((Ir==null?void 0:Ir.parentID)||-1),Dr.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(Br.aabb,(va==null?void 0:va.visibilityPlaneMask)||Xe.INDETERMINATE,this.planes||Te.getFrustum().planes),Dr.visible=Dr.visibilityPlaneMask!==Xe.OUTSIDE))}catch(ra){We.e(ra)}finally{We.f()}}}catch(ra){Et.e(ra)}finally{Et.f()}case 2:case"end":return Ia.stop()}},Y,this)}));function R(Y){return it.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(R,Y,q){if(Y===Xe.OUTSIDE||Y===Xe.INSIDE)return Y;for(var Et=Xe.INSIDE,Gt=0,ee=q.length;Gt<ee;++Gt){var pe=Gt<31?1<<Gt:0;if(!(Gt<31&&!(Y&pe))){var Te=q[Gt],We=Te.normal,pr=Te.distance;if(kt.dot(We,R.getNegativeFarPoint(q[Gt]))+pr>0)return Xe.OUTSIDE;kt.dot(We,R.getPositiveFarPoint(q[Gt]))+pr>0&&(Et|=pe)}}return Et}}]),M}(),ao),To=E(Na.prototype,"mesh",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=E(Na.prototype,"cullable",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=E(Na.prototype,"geometry",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vo=E(Na.prototype,"hierarchy",[Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zi=E(Na.prototype,"transform",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Na))||mo),Pn=S(96518),$s,na,oo,Xa,qo,On,bo,gs,ts,es,Wn,so,ia,Bi,rs,Po,ga,ys,Qs,ms,Eo,Ai,Ya,bs;function Ha(M,it){var R;if(typeof Symbol=="undefined"||M[Symbol.iterator]==null){if(Array.isArray(M)||(R=Ns(M))||it&&M&&typeof M.length=="number"){R&&(M=R);var Y=0,q=function(){};return{s:q,n:function(){return Y>=M.length?{done:!0}:{done:!1,value:M[Y++]}},e:function(Te){throw Te},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=M[Symbol.iterator]()},n:function(){var Te=R.next();return Et=Te.done,Te},e:function(Te){Gt=!0,ee=Te},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function Ns(M,it){if(M){if(typeof M=="string")return La(M,it);var R=Object.prototype.toString.call(M).slice(8,-1);if(R==="Object"&&M.constructor&&(R=M.constructor.name),R==="Map"||R==="Set")return Array.from(M);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return La(M,it)}}function La(M,it){(it==null||it>M.length)&&(it=M.length);for(var R=0,Y=new Array(it);R<it;R++)Y[R]=M[R];return Y}var ya=($s=(0,O.b2)(),na=(0,O.f3)(b.MeshComponentManager),oo=(0,O.f3)(b.GeometryComponentManager),Xa=(0,O.f3)(b.MaterialComponentManager),qo=(0,O.f3)(b.CullableComponentManager),On=(0,O.f3)(b.TransformComponentManager),bo=(0,O.f3)(b.HierarchyComponentManager),gs=(0,O.f3)(b.Systems),ts=(0,O.t6)(b.FrameGraphSystem),es=(0,O.f3)(b.RenderEngine),Wn=(0,O.f3)(b.ResourcePool),$s(so=(ia=(bs=Ya=function(){function M(){var it=this;(0,z.Z)(this,M),x(this,"mesh",Bi,this),x(this,"geometry",rs,this),x(this,"material",Po,this),x(this,"cullable",ga,this),x(this,"transform",ys,this),x(this,"hierarchy",Qs,this),x(this,"frameGraphSystem",ms,this),x(this,"engine",Eo,this),x(this,"resourcePool",Ai,this),this.modelCache={},this.setup=function(R,Y,q){var Et=R.createRenderTarget(Y,"color buffer",{width:1,height:1,usage:Pe.RENDER_ATTACHMENT|Pe.SAMPLED|Pe.COPY_SRC});q.data={output:Y.write(R,Et)}},this.execute=function(){var R=(0,y.Z)(m().mark(function Y(q,Et,Gt){var ee,pe,Te,We,pr,Tr;return m().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:ee=q.getResourceNode(Et.data.output),pe=it.resourcePool.getOrCreateResource(ee.resource),Te=Ha(Gt),Ir.prev=3,Te.s();case 5:if((We=Te.n()).done){Ir.next=11;break}return pr=We.value,Ir.next=9,it.initView(pr);case 9:Ir.next=5;break;case 11:Ir.next=16;break;case 13:Ir.prev=13,Ir.t0=Ir.catch(3),Te.e(Ir.t0);case 16:return Ir.prev=16,Te.f(),Ir.finish(16);case 19:Tr=it.engine.getCanvas(),pe.resize({width:Tr.width,height:Tr.height}),it.engine.setScissor({enable:!1}),it.engine.clear({framebuffer:pe,color:Gt[0].getClearColor(),depth:1}),it.engine.useFramebuffer(pe,function(){var Dr=Ha(Gt),en;try{for(Dr.s();!(en=Dr.n()).done;){var _n=en.value;it.renderView(_n)}}catch(Dn){Dr.e(Dn)}finally{Dr.f()}});case 24:case"end":return Ir.stop()}},Y,null,[[3,13,16,19]])}));return function(Y,q,Et){return R.apply(this,arguments)}}()}return(0,k.Z)(M,[{key:"renderView",value:function(R){var Y=R.getScene(),q=R.getCamera(),Et=q.getViewTransform(),Gt=Pn.multiply(Pn.create(),q.getPerspective(),Et);q.getFrustum().extractFromVPMatrix(Gt);var ee=R.getViewport(),pe=ee.x,Te=ee.y,We=ee.width,pr=ee.height;this.engine.viewport({x:pe,y:Te,width:We,height:pr});var Tr=Ha(Y.getEntities()),Br;try{for(Tr.s();!(Br=Tr.n()).done;){var Ir=Br.value;this.renderMesh(Ir,{camera:q,view:R,viewMatrix:Et})}}catch(Dr){Tr.e(Dr)}finally{Tr.f()}}},{key:"renderMesh",value:function(R,Y){var q=Y.camera,Et=Y.view,Gt=Y.viewMatrix,ee=this.mesh.getComponentByEntity(R);if(!(!ee||!ee.visible)){var pe=ee.material,Te=ee.geometry;if(!(!Te||Te.dirty||!pe)){var We=this.transform.getComponentByEntity(R),pr=Pn.multiply(Pn.create(),Gt,We.worldTransform),Tr=Et.getViewport(),Br=Tr.width,Ir=Tr.height;pe.setUniform({projectionMatrix:q.getPerspective(),modelViewMatrix:pr,modelMatrix:We.worldTransform,viewMatrix:Gt,cameraPosition:q.getPosition(),u_viewport:[Br,Ir]}),ee.model&&(ee.model.draw({uniforms:pe.uniforms.reduce(function(Dr,en){return Dr[en.name]=en.data,Dr},{})}),pe.uniforms.forEach(function(Dr){Dr.dirty=!1}),pe.dirty=!1)}}}},{key:"initMesh",value:function(){var it=(0,y.Z)(m().mark(function Y(q,Et){var Gt,ee,pe,Te,We,pr,Tr,Br;return m().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(Gt=this.mesh.getComponentByEntity(q),Gt){Dr.next=3;break}return Dr.abrupt("return");case 3:if(ee=Gt.material,pe=Gt.geometry,!(!pe||pe.dirty||!ee)){Dr.next=7;break}return Dr.abrupt("return");case 7:if(Gt.model){Dr.next=24;break}if(Te="m-".concat(ee.entity,"-g-").concat(pe.entity),!this.modelCache[Te]){Dr.next=12;break}return Gt.model=this.modelCache[Te],Dr.abrupt("return");case 12:return ee.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),We=this.engine,pr=We.createModel,Tr=We.createAttribute,Br={vs:ee.vertexShaderGLSL,fs:ee.fragmentShaderGLSL,defines:ee.defines,attributes:pe.attributes.reduce(function(en,_n){return _n.data&&_n.buffer&&(en[_n.name]=Tr({buffer:_n.buffer,attributes:_n.attributes,arrayStride:_n.arrayStride,stepMode:_n.stepMode,divisor:_n.stepMode==="vertex"?0:1})),en},{}),uniforms:ee.uniforms.reduce(function(en,_n){return en[_n.name]=_n.data,en},{}),scissor:{enable:!0,box:function(){return Et.getViewport()}}},ee.cull&&(Br.cull=ee.cull),ee.depth&&(Br.depth=ee.depth),ee.blend&&(Br.blend=ee.blend),pe.indicesBuffer&&(Br.elements=pe.indicesBuffer),pe.maxInstancedCount&&(Br.instances=pe.maxInstancedCount,Br.count=pe.vertexCount||3),Dr.next=22,pr(Br);case 22:Gt.model=Dr.sent,this.modelCache[Te]=Gt.model;case 24:case"end":return Dr.stop()}},Y,this)}));function R(Y,q){return it.apply(this,arguments)}return R}()},{key:"initView",value:function(){var it=(0,y.Z)(m().mark(function Y(q){var Et,Gt,ee,pe;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:Et=q.getScene(),Gt=Ha(Et.getEntities()),We.prev=2,Gt.s();case 4:if((ee=Gt.n()).done){We.next=10;break}return pe=ee.value,We.next=8,this.initMesh(pe,q);case 8:We.next=4;break;case 10:We.next=15;break;case 12:We.prev=12,We.t0=We.catch(2),Gt.e(We.t0);case 15:return We.prev=15,Gt.f(),We.finish(15);case 18:case"end":return We.stop()}},Y,this,[[2,12,15,18]])}));function R(Y){return it.apply(this,arguments)}return R}()}]),M}(),Ya.IDENTIFIER="Render Pass",bs),Bi=E(ia.prototype,"mesh",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rs=E(ia.prototype,"geometry",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Po=E(ia.prototype,"material",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ga=E(ia.prototype,"cullable",[qo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ys=E(ia.prototype,"transform",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qs=E(ia.prototype,"hierarchy",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ms=E(ia.prototype,"frameGraphSystem",[gs,ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eo=E(ia.prototype,"engine",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ai=E(ia.prototype,"resourcePool",[Wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ia))||so),Za,xo,Ka,Ga,Js,ka,$a,wo,qa,Xo,fi,ma,to;function ba(M,it){var R;if(typeof Symbol=="undefined"||M[Symbol.iterator]==null){if(Array.isArray(M)||(R=Mi(M))||it&&M&&typeof M.length=="number"){R&&(M=R);var Y=0,q=function(){};return{s:q,n:function(){return Y>=M.length?{done:!0}:{done:!1,value:M[Y++]}},e:function(Te){throw Te},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=M[Symbol.iterator]()},n:function(){var Te=R.next();return Et=Te.done,Te},e:function(Te){Gt=!0,ee=Te},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function Mi(M,it){if(M){if(typeof M=="string")return ca(M,it);var R=Object.prototype.toString.call(M).slice(8,-1);if(R==="Object"&&M.constructor&&(R=M.constructor.name),R==="Map"||R==="Set")return Array.from(M);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return ca(M,it)}}function ca(M,it){(it==null||it>M.length)&&(it=M.length);for(var R=0,Y=new Array(it);R<it;R++)Y[R]=M[R];return Y}var Es={NONE:0,ENCODE:1,HIGHLIGHT:2},aa=(Za=(0,O.b2)(),xo=(0,O.f3)(b.RenderEngine),Ka=(0,O.f3)(b.ResourcePool),Ga=(0,O.f3)(b.RenderPassFactory),Js=(0,O.f3)(b.MeshComponentManager),Za(ka=($a=(to=ma=function(){function M(){var it=this;(0,z.Z)(this,M),x(this,"engine",wo,this),x(this,"resourcePool",qa,this),x(this,"renderPassFactory",Xo,this),x(this,"mesh",fi,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(R,Y,q){var Et=R.createRenderTarget(Y,"picking fbo",{width:1,height:1});q.data={output:Y.write(R,Et)},Y.hasSideEffect=!0},this.execute=function(){var R=(0,y.Z)(m().mark(function Y(q,Et,Gt){var ee,pe,Te;return m().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(it.views=Gt,!it.alreadyInRendering){pr.next=3;break}return pr.abrupt("return");case 3:ee=ba(Gt);try{for(Te=function(){var Br=pe.value,Ir=Br.getViewport(),Dr=Ir.width,en=Ir.height;it.alreadyInRendering=!0;var _n=q.getResourceNode(Et.data.output);it.pickingFBO=it.resourcePool.getOrCreateResource(_n.resource),it.pickingFBO.resize({width:Dr,height:en}),it.engine.useFramebuffer(it.pickingFBO,function(){it.engine.clear({framebuffer:it.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Dn=it.renderPassFactory(ya.IDENTIFIER),gn=[],ei=Br.getScene(),In=ba(ei.getEntities()),xi;try{for(In.s();!(xi=In.n()).done;){var ai=xi.value,oi=it.mesh.getComponentByEntity(ai),va=oi.material;va.setUniform("u_PickingStage",Es.ENCODE),gn.push(oi)}}catch(Yi){In.e(Yi)}finally{In.f()}Dn.renderView(Br),gn.forEach(function(Yi){var Ia=Yi.material;Ia.setUniform("u_PickingStage",Es.HIGHLIGHT)}),it.alreadyInRendering=!1})},ee.s();!(pe=ee.n()).done;)Te()}catch(Tr){ee.e(Tr)}finally{ee.f()}case 5:case"end":return pr.stop()}},Y)}));return function(Y,q,Et){return R.apply(this,arguments)}}(),this.pick=function(R,Y){var q=R.x,Et=R.y,Gt=it.engine,ee=Gt.readPixels,pe=Gt.useFramebuffer,Te=Y.getViewport(),We=Te.width,pr=Te.height,Tr=q*window.devicePixelRatio,Br=Et*window.devicePixelRatio;if(!(Tr>We||Tr<0||Br>pr||Br<0)){var Ir,Dr;return pe(it.pickingFBO,function(){Ir=ee({x:Math.round(Tr),y:Math.round(pr-(Et+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:it.pickingFBO}),(Ir[0]!==0||Ir[1]!==0||Ir[2]!==0)&&(Dr=Jn(Ir),it.highlightEnabled&&it.highlightPickedFeature(Ir,Y))}),Dr}}}return(0,k.Z)(M,[{key:"enableHighlight",value:function(R){this.highlightEnabled=R}},{key:"setHighlightColor",value:function(R){this.highlightColor=R}},{key:"highlightPickedFeature",value:function(R,Y){if(R){var q=ba(Y.getScene().getEntities()),Et;try{for(q.s();!(Et=q.n()).done;){var Gt=Et.value,ee=this.mesh.getComponentByEntity(Gt),pe=ee.material;pe.setUniform("u_PickingStage",Es.HIGHLIGHT),pe.setUniform("u_PickingColor",[R[0],R[1],R[2]]),pe.setUniform("u_HighlightColor",this.highlightColor)}}catch(Te){q.e(Te)}finally{q.f()}}}}]),M}(),ma.IDENTIFIER="PixelPicking Pass",to),wo=E($a.prototype,"engine",[xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qa=E($a.prototype,"resourcePool",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xo=E($a.prototype,"renderPassFactory",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi=E($a.prototype,"mesh",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$a))||ka),uo,eo,fo,qs,Yo,Oo,ns,Wu,yu,xs=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Xt=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ue=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,nr=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,cr=(uo=(0,O.b2)(),eo=(0,O.f3)(b.RenderEngine),fo=(0,O.f3)(b.ResourcePool),uo(qs=(Yo=(yu=Wu=function M(){var it=this;(0,z.Z)(this,M),x(this,"engine",Oo,this),x(this,"resourcePool",ns,this),this.model=void 0,this.setup=function(R,Y,q){var Et=R.getPass(ya.IDENTIFIER);if(Et){var Gt=R.createRenderTarget(Y,"render to screen",{width:1,height:1});q.data={input:Y.read(Et.data.output),output:Y.write(R,Gt)}}},this.execute=function(){var R=(0,y.Z)(m().mark(function Y(q,Et){var Gt,ee,pe,Te,We,pr,Tr;return m().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(Gt=it.engine,ee=Gt.createModel,pe=Gt.createAttribute,Te=Gt.createBuffer,it.model){Ir.next=6;break}return Ir.next=4,ee({vs:it.engine.supportWebGPU?nr:Xt,fs:it.engine.supportWebGPU?ue:xs,attributes:{a_Position:pe({buffer:Te({data:[-4,-4,4,-4,0,4],type:Pe.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:We=Ir.sent,it.model=We;case 6:pr=q.getResourceNode(Et.data.input),Tr=it.resourcePool.getOrCreateResource(pr.resource),it.engine.useFramebuffer(null,function(){it.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),it.model.draw({uniforms:{u_Texture:Tr}})});case 9:case"end":return Ir.stop()}},Y)}));return function(Y,q){return R.apply(this,arguments)}}(),this.tearDown=function(){it.model=void 0}},Wu.IDENTIFIER="Copy Pass",yu),Oo=E(Yo.prototype,"engine",[eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=E(Yo.prototype,"resourcePool",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yo))||qs),Gr,cn,xn,Zn,Wi,Ra,Fa,Ho,xf,wa,ro,mu,ic,Yc=(Gr=(0,O.b2)(),cn=(0,O.f3)(b.Systems),xn=(0,O.t6)(b.FrameGraphSystem),Zn=(0,O.f3)(b.RenderPassFactory),Wi=(0,O.f3)(b.ConfigService),Ra=(0,O.f3)(b.ResourcePool),Gr(Fa=(Ho=(ic=function(){function M(){(0,z.Z)(this,M),x(this,"frameGraphSystem",xf,this),x(this,"renderPassFactory",wa,this),x(this,"configService",ro,this),x(this,"resourcePool",mu,this)}return(0,k.Z)(M,[{key:"execute",value:function(){var it=(0,y.Z)(m().mark(function Y(q){var Et,Gt,ee,pe,Te,We,pr,Tr,Br;return m().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:Et=this.renderPassFactory(ya.IDENTIFIER),Gt=Et.setup,ee=Et.execute,pe=this.frameGraphSystem.addPass(ya.IDENTIFIER,Gt,ee),Te=this.renderPassFactory(cr.IDENTIFIER),We=Te.setup,pr=Te.execute,Tr=Te.tearDown,Br=this.frameGraphSystem.addPass(cr.IDENTIFIER,We,pr,Tr),this.frameGraphSystem.present(Br.data.output);case 5:case"end":return Dr.stop()}},Y,this)}));function R(Y){return it.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(R,Y){var q=this.renderPassFactory(aa.IDENTIFIER);return q.pick(R,Y)}}]),M}(),ic),xf=E(Ho.prototype,"frameGraphSystem",[cn,xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=E(Ho.prototype,"renderPassFactory",[Zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ro=E(Ho.prototype,"configService",[Wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mu=E(Ho.prototype,"resourcePool",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ho))||Fa);function wf(M){var it=_f();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function _f(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Sf=function(M){(0,X.Z)(R,M);var it=wf(R);function R(Y){var q;return(0,z.Z)(this,R),q=it.call(this,Y),q.parentID=void 0,Object.assign((0,de.Z)(q),Y),q}return R}(I),tu,bu,eu,co,Hc,Mf,zl,Ls,Wl,Vl,Eu=(tu=(0,O.b2)(),bu=(0,O.f3)(b.HierarchyComponentManager),eu=(0,O.f3)(b.TransformComponentManager),co=(0,O.f3)(b.MeshComponentManager),tu(Hc=(Mf=(Vl=function(){function M(){(0,z.Z)(this,M),x(this,"hierarchy",zl,this),x(this,"transform",Ls,this),x(this,"mesh",Wl,this)}return(0,k.Z)(M,[{key:"execute",value:function(){var it=(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return Et.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var R=this;this.transform.forEach(function(Y,q){(q.isDirty()||q.isLocalDirty())&&(R.setMeshAABBDirty(R.mesh.getComponentByEntity(Y)),q.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var R=this;this.hierarchy.forEach(function(Y,q){var Et=R.transform.getComponentByEntity(Y),Gt=R.transform.getComponentByEntity(q.parentID);Et!==null&&Gt!==null&&Et.updateTransformWithParent(Gt)})}},{key:"attach",value:function(R,Y,q){this.hierarchy.contains(R)&&this.detach(R),this.hierarchy.create(R,{parentID:Y});var Et=this.mesh.getComponentByEntity(Y);if(this.setMeshAABBDirty(Et),Et&&Et.children.indexOf(R)===-1&&Et.children.push(R),this.hierarchy.getCount()>1)for(var Gt=this.hierarchy.getCount()-1;Gt>0;--Gt)for(var ee=this.hierarchy.getEntity(Gt),pe=0;pe<Gt;++pe){var Te=this.hierarchy.getComponent(pe);if(Te.parentID===ee){this.hierarchy.moveItem(Gt,pe),++Gt;break}}var We=this.hierarchy.getComponentByEntity(R),pr=this.transform.getComponentByEntity(Y);pr===null&&(pr=this.transform.create(Y));var Tr=this.transform.getComponentByEntity(R);Tr===null&&(Tr=this.transform.create(R),pr=this.transform.getComponentByEntity(Y)),Tr.parent=pr,!q&&pr&&(Tr.matrixTransform(Pn.invert(Pn.create(),pr.worldTransform)),Tr.updateTransform()),pr&&Tr.updateTransformWithParent(pr)}},{key:"detach",value:function(R){var Y=this.hierarchy.getComponentByEntity(R);if(Y!==null){var q=this.transform.getComponentByEntity(R);q!==null&&(q.parent=null,q.applyTransform()),this.hierarchy.removeKeepSorted(R);var Et=this.mesh.getComponentByEntity(Y.parentID);if(Et){var Gt=Et.children.indexOf(R);Et.children.splice(Gt,1)}this.setMeshAABBDirty(Et)}}},{key:"detachChildren",value:function(R){var Y=this.mesh.getComponentByEntity(R);Y&&(Y.children=[]);for(var q=0;q<this.hierarchy.getCount();){var Et;if(((Et=this.hierarchy.getComponent(q))===null||Et===void 0?void 0:Et.parentID)===R){var Gt=this.hierarchy.getEntity(q);this.detach(Gt)}else++q}}},{key:"setMeshAABBDirty",value:function(R){R&&(R.aabbDirty=!0)}}]),M}(),Vl),zl=E(Mf.prototype,"hierarchy",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ls=E(Mf.prototype,"transform",[eu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wl=E(Mf.prototype,"mesh",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mf))||Hc),Xn=S(14717);function Cf(M){var it=Af();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function Af(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Vu=function(M){(0,X.Z)(R,M);var it=Cf(R);function R(Y){var q;return(0,z.Z)(this,R),q=it.call(this,Y),q.dirtyFlag=void 0,q.localDirtyFlag=void 0,q.parent=null,q.localPosition=kt.fromValues(0,0,0),q.localRotation=Xn.fromValues(0,0,0,1),q.localScale=kt.fromValues(1,1,1),q.localTransform=Pn.create(),q.position=kt.fromValues(0,0,0),q.rotation=Xn.fromValues(0,0,0,1),q.scaling=kt.fromValues(1,1,1),q.worldTransform=Pn.create(),q.matrixTransform=function(){var Et=Pn.create();return function(Gt){Pn.multiply(Et,q.getLocalTransform(),Gt),Pn.getScaling(q.localScale,Et),Pn.getTranslation(q.localPosition,Et),Pn.getRotation(q.localRotation,Et)}}(),q.rotateRollPitchYaw=function(){var Et=Xn.create(),Gt=Xn.create(),ee=Xn.create();return function(pe,Te,We){q.setDirty(),Xn.fromEuler(Et,pe,0,0),Xn.fromEuler(Gt,0,Te,0),Xn.fromEuler(ee,0,0,We),Xn.multiply(q.localRotation,Et,q.localRotation),Xn.multiply(q.localRotation,q.localRotation,Gt),Xn.multiply(q.localRotation,ee,q.localRotation),Xn.normalize(q.localRotation,q.localRotation)}}(),q.lerp=function(){var Et=kt.create(),Gt=Xn.create(),ee=kt.create(),pe=kt.create(),Te=Xn.create(),We=kt.create();return function(pr,Tr,Br){q.setDirty(),Pn.getScaling(Et,pr.worldTransform),Pn.getTranslation(ee,pr.worldTransform),Pn.getRotation(Gt,pr.worldTransform),Pn.getScaling(pe,Tr.worldTransform),Pn.getTranslation(We,Tr.worldTransform),Pn.getRotation(Te,Tr.worldTransform),kt.lerp(q.localScale,Et,pe,Br),Xn.slerp(q.localRotation,Gt,Te,Br),kt.lerp(q.localPosition,ee,We,Br)}}(),q.translate=function(){var Et=kt.create();return function(Gt){return kt.add(Et,q.getPosition(),Gt),q.setPosition(Et),q.setDirty(!0),(0,de.Z)(q)}}(),q.translateLocal=function(){return function(Et){return kt.transformQuat(Et,Et,q.localRotation),kt.add(q.localPosition,q.localPosition,Et),q.setLocalDirty(!0),(0,de.Z)(q)}}(),q.setPosition=function(){var Et=Pn.create();return function(Gt){return q.position=Gt,q.setLocalDirty(!0),q.parent===null?kt.copy(q.localPosition,Gt):(Pn.copy(Et,q.parent.worldTransform),Pn.invert(Et,Et),kt.transformMat4(q.localPosition,Gt,Et)),(0,de.Z)(q)}}(),q.rotate=function(){var Et=Xn.create();return function(Gt){if(q.parent===null)Xn.multiply(q.localRotation,q.localRotation,Gt),Xn.normalize(q.localRotation,q.localRotation);else{var ee=q.getRotation(),pe=q.parent.getRotation();Xn.copy(Et,pe),Xn.invert(Et,Et),Xn.multiply(Et,Et,Gt),Xn.multiply(q.localRotation,Gt,ee),Xn.normalize(q.localRotation,q.localRotation)}return q.setLocalDirty(),(0,de.Z)(q)}}(),q.rotateLocal=function(){return function(Et){return Xn.multiply(q.localRotation,q.localRotation,Et),Xn.normalize(q.localRotation,q.localRotation),q.setLocalDirty(!0),(0,de.Z)(q)}}(),q.setRotation=function(){var Et=Xn.create();return function(Gt){return q.parent===null?Xn.copy(q.localRotation,Gt):(Xn.copy(Et,q.parent.getRotation()),Xn.invert(Et,Et),Xn.copy(q.localRotation,Et),Xn.mul(q.localRotation,q.localRotation,Gt)),q.setLocalDirty(!0),(0,de.Z)(q)}}(),q}return(0,k.Z)(R,[{key:"setLocalPosition",value:function(q){kt.copy(this.localPosition,q),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(q){kt.copy(this.localScale,q),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(q){return Xn.copy(this.localRotation,q),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;q?this.dirtyFlag|=R.DIRTY:this.dirtyFlag&=~R.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;q?(this.localDirtyFlag|=R.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~R.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(Pn.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(q){Pn.multiply(this.worldTransform,q.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Pn.getScaling(this.localScale,this.worldTransform),Pn.getTranslation(this.localPosition,this.worldTransform),Pn.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=kt.fromValues(0,0,0),this.localRotation=Xn.fromValues(0,0,0,1),this.localScale=kt.fromValues(1,1,1)}},{key:"scaleLocal",value:function(q){return this.setLocalDirty(),kt.multiply(this.localScale,this.localScale,q),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(Pn.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return Pn.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return Pn.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Pn.getScaling(this.scaling,this.worldTransform),this.scaling}}]),R}(I);Vu.DIRTY=1<<0;var ac=S(79309),Tf,oc,If,sc,Zc,Pf,Kc=(Tf=(0,O.b2)(),oc=(0,O.f3)(b.RenderEngine),Tf(If=(sc=(Pf=function(){function M(){(0,z.Z)(this,M),x(this,"engine",Zc,this),this.resourcePool={}}return(0,k.Z)(M,[{key:"getOrCreateResource",value:function(R){if(!this.resourcePool[R.name]){var Y=R.descriptor,q=Y.width,Et=Y.height,Gt=Y.usage;this.resourcePool[R.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:q,height:Et,wrapS:Pe.CLAMP_TO_EDGE,wrapT:Pe.CLAMP_TO_EDGE,usage:Gt})})}return this.resourcePool[R.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),M}(),Pf),Zc=E(sc.prototype,"engine",[oc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc))||If);function jl(M){var it=ks();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function ks(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var $c=function(M){(0,X.Z)(R,M);var it=jl(R);function R(Y){var q;return(0,z.Z)(this,R),q=it.call(this,Y),q.name=void 0,q.name=Y.name||"",q}return R}(I),ju,Xu,Qc,Yu=(ju=(0,O.b2)(),ju(Xu=(Qc=function(){function M(){(0,z.Z)(this,M),this.config=void 0}return(0,k.Z)(M,[{key:"get",value:function(){return this.config}},{key:"set",value:function(R){this.config=R}}]),M}(),Qc))||Xu),Do,xu,Jc;(function(M){M.PANSTART="PANSTART",M.PANEND="PANEND",M.PANMOVE="PANMOVE",M.PINCH="PINCH",M.KEYDOWN="KEYDOWN",M.KEYUP="KEYUP",M.HOVER="HOVER"})(Jc||(Jc={}));var Xl=(Do=(0,O.b2)(),Do(xu=function(){function M(){(0,z.Z)(this,M)}return(0,k.Z)(M,[{key:"listen",value:function(R){}},{key:"on",value:function(R,Y){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),M}())||xu);function qc(M){var it=0;switch(M){case"vec2":case"ivec2":it=2;break;case"vec3":case"ivec3":it=3;break;case"vec4":case"ivec4":case"mat2":it=4;break;case"mat3":it=9;break;case"mat4":it=16;break;default:}return it}var Yl=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Of(M){var it={};return M=M.replace(Yl,function(R,Y,q){var Et=q.split(":"),Gt=Et[0].trim(),ee="";switch(Et.length>1&&(ee=Et[1].trim()),Y){case"bool":ee=ee==="true";break;case"float":case"int":ee=Number(ee);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":ee?ee=ee.replace("[","").replace("]","").split(",").reduce(function(pe,Te){return pe.push(Number(Te.trim())),pe},[]):ee=new Array(qc(Y)).fill(0);break;default:}return it[Gt]=ee,"uniform ".concat(Y," ").concat(Gt,`;
`)}),{content:M,uniforms:it}}function Hl(M){return M.filter(function(it,R,Y){return Y.indexOf(it)===R})}var tl,ru,Aa;function Df(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function nu(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Df(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Df(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}var Zo=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,el=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,rl=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,Zl=/precision\s+(high|low|medium)p\s+float/,Kl=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,$l=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,nl=(tl=(0,O.b2)(),tl(ru=(Aa=function(){function M(){(0,z.Z)(this,M),this.moduleCache={},this.rawContentCache={}}return(0,k.Z)(M,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:el,fs:Zo}),this.registerModule("sdf2d",{vs:"",fs:rl})}},{key:"registerModule",value:function(R,Y){if(!this.rawContentCache[R]){var q=Y.vs,Et=q===void 0?"":q,Gt=Y.fs,ee=Gt===void 0?"":Gt,pe=Y.uniforms,Te=Of(Et),We=Te.content,pr=Te.uniforms,Tr=Of(ee),Br=Tr.content,Ir=Tr.uniforms;this.rawContentCache[R]={fs:Br,uniforms:nu(nu(nu({},pr),Ir),pe),vs:We}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(R){var Y=this;if(this.moduleCache[R])return this.moduleCache[R];var q=this.rawContentCache[R].vs||"",Et=this.rawContentCache[R].fs||"",Gt=this.processModule(q,[],"vs"),ee=Gt.content,pe=Gt.includeList,Te=this.processModule(Et,[],"fs"),We=Te.content,pr=Te.includeList,Tr=We,Br=Hl(pe.concat(pr).concat(R)).reduce(function(Ir,Dr){return nu(nu({},Ir),Y.rawContentCache[Dr].uniforms)},{});return Zl.test(We)||(Tr=Kl+We),this.moduleCache[R]={fs:Tr.trim(),uniforms:Br,vs:ee.trim()},this.moduleCache[R]}},{key:"processModule",value:function(R,Y,q){var Et=this,Gt=R.replace($l,function(ee,pe){var Te=pe.split(" "),We=Te[0].replace(/"/g,"");if(Y.indexOf(We)>-1)return"";var pr=Et.rawContentCache[We][q];Y.push(We);var Tr=Et.processModule(pr||"",Y,q),Br=Tr.content;return Br});return{content:Gt,includeList:Y}}}]),M}(),Aa))||ru),Ko=new O.W2,il=(0,ac.Z)(Ko,!1),al=function(it){var R=il.lazyInject(it);return function(Y,q,Et){R.call(this,Y,q),Et&&(Et.initializer=function(){return Y[q]})}},ol=function(it){var R=il.lazyMultiInject(it);return function(Y,q,Et){R.call(this,Y,q),Et&&(Et.initializer=function(){return Y[q]})}};Ko.bind(b.ShaderModuleService).to(nl).inSingletonScope(),Ko.bind(b.NameComponentManager).toConstantValue(new _($c)),Ko.bind(b.HierarchyComponentManager).toConstantValue(new _(Sf)),Ko.bind(b.TransformComponentManager).toConstantValue(new _(Vu)),Ko.bind(b.MeshComponentManager).toConstantValue(new _(Ce)),Ko.bind(b.CullableComponentManager).toConstantValue(new _(me)),Ko.bind(b.GeometryComponentManager).toConstantValue(new _(Bn)),Ko.bind(b.MaterialComponentManager).toConstantValue(new _(st));function Ql(){var M=new O.W2;return M.parent=Ko,M.bind(b.Systems).to(Eu).inSingletonScope().whenTargetNamed(b.SceneGraphSystem),M.bind(b.Systems).to(Ht).inSingletonScope().whenTargetNamed(b.FrameGraphSystem),M.bind(b.Systems).to(Ja).inSingletonScope().whenTargetNamed(b.MeshSystem),M.bind(b.Systems).to(Dt).inSingletonScope().whenTargetNamed(b.GeometrySystem),M.bind(b.Systems).to(Fe).inSingletonScope().whenTargetNamed(b.MaterialSystem),M.bind(b.Systems).to(Yc).inSingletonScope().whenTargetNamed(b.RendererSystem),M.bind(b.ResourcePool).to(Kc).inSingletonScope(),M.bind(b.ConfigService).to(Yu).inSingletonScope(),M.bind(b.InteractorService).to(Xl).inSingletonScope(),M.bind(b.RenderPass).to(ya).inSingletonScope().whenTargetNamed(ya.IDENTIFIER),M.bind(b.RenderPass).to(cr).inSingletonScope().whenTargetNamed(cr.IDENTIFIER),M.bind(b.RenderPass).to(aa).inSingletonScope().whenTargetNamed(aa.IDENTIFIER),M.bind(b.RenderPassFactory).toFactory(function(it){return function(R){return it.container.getNamed(b.RenderPass,R)}}),M}function sl(M){for(var it=new Ft,R=kt.fromValues(M[0],M[1],M[2]),Y=kt.fromValues(M[0],M[1],M[2]),q=3;q<M.length;){var Et=M[q++],Gt=M[q++],ee=M[q++];Et<R[0]&&(R[0]=Et),Gt<R[1]&&(R[1]=Gt),ee<R[2]&&(R[2]=ee),Et>Y[0]&&(Y[0]=Et),Gt>Y[1]&&(Y[1]=Gt),ee>Y[2]&&(Y[2]=ee)}return it.setMinMax(R,Y),it}var Ta=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Nh=kt.create(),bn=null,Nf=kt.create(),Ei=kt.create(),ul=kt.create(),Jl=kt.create(),Hu=kt.create(),ql=null,uc=S(85337),Lh=S(10758),th=S(1036),kh=S(87117),ws=S(42622),Rh=S(43295),fc;(function(M){M.Normal="normal",M.PostProcessing="post-processing"})(fc||(fc={}));var ea=S(7193),cc=S(31974),_s=S(69069),Lf=S(18859),eh=S(72470),Bh=S(70434),iu;(function(M){M.Void="Void",M.Boolean="Boolean",M.Float="Float",M.Uint32="Uint32",M.Int32="Int32",M.Vector="Vector",M.Vector2Float="vec2<f32>",M.Vector3Float="vec3<f32>",M.Vector4Float="vec4<f32>",M.Vector2Boolean="vec2<bool>",M.Vector3Boolean="vec3<bool>",M.Vector4Boolean="vec4<bool>",M.Vector2Uint="vec2<u32>",M.Vector3Uint="vec3<u32>",M.Vector4Uint="vec4<u32>",M.Vector2Int="vec2<i32>",M.Vector3Int="vec3<i32>",M.Vector4Int="vec4<i32>",M.Matrix="Matrix",M.Matrix3x3Float="mat3x3<f32>",M.Matrix4x4Float="mat4x4<i32>",M.Struct="Struct",M.FloatArray="Float[]",M.Vector4FloatArray="vec4<f32>[]"})(iu||(iu={}));var fl;(function(M){M.Program="Program",M.Identifier="Identifier",M.VariableDeclaration="VariableDeclaration",M.BlockStatement="BlockStatement",M.ReturnStatement="ReturnStatement",M.FunctionDeclaration="FunctionDeclaration",M.VariableDeclarator="VariableDeclarator",M.AssignmentExpression="AssignmentExpression",M.LogicalExpression="LogicalExpression",M.BinaryExpression="BinaryExpression",M.ArrayExpression="ArrayExpression",M.UnaryExpression="UnaryExpression",M.UpdateExpression="UpdateExpression",M.FunctionExpression="FunctionExpression",M.MemberExpression="MemberExpression",M.ConditionalExpression="ConditionalExpression",M.ExpressionStatement="ExpressionStatement",M.CallExpression="CallExpression",M.NumThreadStatement="NumThreadStatement",M.StorageStatement="StorageStatement",M.DoWhileStatement="DoWhileStatement",M.WhileStatement="WhileStatement",M.ForStatement="ForStatement",M.BreakStatement="BreakStatement",M.ContinueStatement="ContinueStatement",M.IfStatement="IfStatement",M.ImportedFunctionStatement="ImportedFunctionStatement"})(fl||(fl={}));var is;(function(M){M.Input="Input",M.Output="Output",M.Uniform="Uniform",M.Workgroup="Workgroup",M.UniformConstant="UniformConstant",M.Image="Image",M.StorageBuffer="StorageBuffer",M.Private="Private",M.Function="Function"})(is||(is={}));var Zu;(function(M){M.GLSL100="GLSL100",M.GLSL450="GLSL450",M.WGSL="WGSL"})(Zu||(Zu={}));var lc="__DefineValuePlaceholder__";function hc(M){return typeof M=="number"}function Ss(M){return M===void 0?0:M>360||M<-360?M%360:M}function as(M,it,R){return hc(M)?kt.fromValues(M,it,R):M.length===3?kt.clone(M):kt.fromValues(M[0],M[1],M[2])}var cl=function(){function M(it,R){(0,z.Z)(this,M),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=it,this.matrix=Pn.clone(R.matrix),this.right=kt.clone(R.right),this.up=kt.clone(R.up),this.forward=kt.clone(R.forward),this.position=kt.clone(R.position),this.focalPoint=kt.clone(R.focalPoint),this.distanceVector=kt.clone(R.distanceVector),this.azimuth=R.azimuth,this.elevation=R.elevation,this.roll=R.roll,this.relAzimuth=R.relAzimuth,this.relElevation=R.relElevation,this.relRoll=R.relRoll,this.dollyingStep=R.dollyingStep,this.distance=R.distance}return(0,k.Z)(M,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(R){R.matrix=Pn.copy(R.matrix,this.matrix),R.right=kt.copy(R.right,this.right),R.up=kt.copy(R.up,this.up),R.forward=kt.copy(R.forward,this.forward),R.position=kt.copy(R.position,this.position),R.focalPoint=kt.copy(R.focalPoint,this.focalPoint),R.distanceVector=kt.copy(R.distanceVector,this.distanceVector),R.azimuth=this.azimuth,R.elevation=this.elevation,R.roll=this.roll,R.relAzimuth=this.relAzimuth,R.relElevation=this.relElevation,R.relRoll=this.relRoll,R.dollyingStep=this.dollyingStep,R.distance=this.distance}}]),M}(),_o,dc,au,ll,rh,vc,kf,Gi;(function(M){M.ORBITING="ORBITING",M.EXPLORING="EXPLORING",M.TRACKING="TRACKING"})(Gi||(Gi={}));var Rs;(function(M){M.DEFAULT="DEFAULT",M.ROTATIONAL="ROTATIONAL",M.TRANSLATIONAL="TRANSLATIONAL",M.CINEMATIC="CINEMATIC"})(Rs||(Rs={}));var os;(function(M){M.ORTHOGRAPHIC="ORTHOGRAPHIC",M.PERSPECTIVE="PERSPECTIVE"})(os||(os={}));var No=Math.PI/180,Bs=180/Math.PI,wu=(_o=(0,O.b2)(),dc=(0,O.f3)(b.InteractorService),_o(au=(ll=(kf=vc=function(){function M(){(0,z.Z)(this,M),this.matrix=Pn.create(),this.right=kt.fromValues(1,0,0),this.up=kt.fromValues(0,1,0),this.forward=kt.fromValues(0,0,1),this.position=kt.fromValues(0,0,1),this.focalPoint=kt.fromValues(0,0,0),this.distanceVector=kt.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,x(this,"interactor",rh,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Pn.create(),this.view=void 0,this.following=void 0,this.type=Gi.EXPLORING,this.trackingMode=Rs.DEFAULT,this.projectionMode=os.PERSPECTIVE,this.frustum=new Wr,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,k.Z)(M,[{key:"clone",value:function(){var R=new M;return R.setType(this.type,void 0),R.interactor=this.interactor,R}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(R,Y){return this.type=R,this.type===Gi.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Gi.TRACKING&&Y!==void 0&&this.setTrackingMode(Y),this}},{key:"setProjectionMode",value:function(R){return this.projectionMode=R,this}},{key:"setTrackingMode",value:function(R){if(this.type!==Gi.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=R,this}},{key:"setWorldRotation",value:function(R){this.rotateWorld=R,this._getAngles()}},{key:"getViewTransform",value:function(){return Pn.invert(Pn.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(R){return this.matrix=R,this._update(),this}},{key:"setAspect",value:function(R){return this.setPerspective(this.near,this.far,this.fov,R),this}},{key:"setViewOffset",value:function(R,Y,q,Et,Gt,ee){return this.aspect=R/Y,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=R,this.view.fullHeight=Y,this.view.offsetX=q,this.view.offsetY=Et,this.view.width=Gt,this.view.height=ee,this.projectionMode===os.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===os.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(R,Y,q,Et){return this.projectionMode=os.PERSPECTIVE,this.fov=q,this.near=R,this.far=Y,this.aspect=Et,Pn.perspective(this.perspective,this.fov*No,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(R,Y,q,Et,Gt,ee){this.projectionMode=os.ORTHOGRAPHIC,this.rright=Y,this.left=R,this.top=q,this.bottom=Et,this.near=Gt,this.far=ee;var pe=(this.rright-this.left)/(2*this.zoom),Te=(this.top-this.bottom)/(2*this.zoom),We=(this.rright+this.left)/2,pr=(this.top+this.bottom)/2,Tr=We-pe,Br=We+pe,Ir=pr+Te,Dr=pr-Te;if(this.view!==void 0&&this.view.enabled){var en=(this.rright-this.left)/this.view.fullWidth/this.zoom,_n=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Tr+=en*this.view.offsetX,Br=Tr+en*this.view.width,Ir-=_n*this.view.offsetY,Dr=Ir-_n*this.view.height}return Pn.ortho(this.perspective,Tr,Br,Ir,Dr,Gt,ee),this}},{key:"setPosition",value:function(R,Y,q){return this._setPosition(R,Y,q),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(R,Y,q){var Et=kt.fromValues(0,1,0);if(this.focalPoint=as(R,Y,q),this.trackingMode===Rs.CINEMATIC){var Gt=kt.subtract(kt.create(),this.focalPoint,this.position);R=Gt[0],Y=Gt[1],q=Gt[2];var ee=kt.length(Gt),pe=Math.asin(Y/ee)*Bs,Te=90+Math.atan2(q,R)*Bs,We=Pn.create();Pn.rotateY(We,We,Te*No),Pn.rotateX(We,We,pe*No),Et=kt.transformMat4(kt.create(),[0,1,0],We)}return Pn.invert(this.matrix,Pn.lookAt(Pn.create(),this.position,this.focalPoint,Et)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(R){if(!(this.distance===R||R<0)){this.distance=R,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var Y=kt.create();R=this.distance;var q=this.forward,Et=this.focalPoint;return Y[0]=R*q[0]+Et[0],Y[1]=R*q[1]+Et[1],Y[2]=R*q[2]+Et[2],this._setPosition(Y),this}}},{key:"setMaxDistance",value:function(R){return this.maxDistance=R,this}},{key:"setMinDistance",value:function(R){return this.minDistance=R,this}},{key:"changeAzimuth",value:function(R){return this.setAzimuth(this.azimuth+R),this}},{key:"changeElevation",value:function(R){return this.setElevation(this.elevation+R),this}},{key:"changeRoll",value:function(R){return this.setRoll(this.roll+R),this}},{key:"setAzimuth",value:function(R){return this.azimuth=Ss(R),this.computeMatrix(),this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(R){return this.elevation=Ss(R),this.computeMatrix(),this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(R){return this.roll=Ss(R),this.computeMatrix(),this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(R,Y,q){if(this.type===Gi.EXPLORING){R=Ss(R),Y=Ss(Y),q=Ss(q);var Et=Xn.setAxisAngle(Xn.create(),[1,0,0],(this.rotateWorld?1:-1)*Y*No),Gt=Xn.setAxisAngle(Xn.create(),[0,1,0],(this.rotateWorld?1:-1)*R*No),ee=Xn.setAxisAngle(Xn.create(),[0,0,1],q*No),pe=Xn.multiply(Xn.create(),Gt,Et);pe=Xn.multiply(Xn.create(),pe,ee);var Te=Pn.fromQuat(Pn.create(),pe);Pn.translate(this.matrix,this.matrix,[0,0,-this.distance]),Pn.multiply(this.matrix,this.matrix,Te),Pn.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+Y)>90)return;this.relElevation=Ss(Y),this.relAzimuth=Ss(R),this.relRoll=Ss(q),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getPosition():this.type===Gi.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(R,Y){var q=as(R,Y,0),Et=kt.clone(this.position);return kt.add(Et,Et,kt.scale(kt.create(),this.right,q[0])),kt.add(Et,Et,kt.scale(kt.create(),this.up,q[1])),this._setPosition(Et),this}},{key:"dolly",value:function(R){var Y=this.forward,q=kt.clone(this.position),Et=R*this.dollyingStep,Gt=this.distance+R*this.dollyingStep;return Et=Math.max(Math.min(Gt,this.maxDistance),this.minDistance)-this.distance,q[0]+=Et*Y[0],q[1]+=Et*Y[1],q[2]+=Et*Y[2],this._setPosition(q),this.type===Gi.ORBITING||this.type===Gi.EXPLORING?this._getDistance():this.type===Gi.TRACKING&&kt.add(this.focalPoint,q,this.distanceVector),this}},{key:"createLandmark",value:function(R,Y){var q=this.clone();q.setPosition(Y.position),q.setFocalPoint(Y.focalPoint),Y.roll!==void 0&&q.setRoll(Y.roll);var Et=new cl(R,q);return this.landmarks.push(Et),Et}},{key:"setLandmark",value:function(R){var Y=new cl(R,this);return this.landmarks.push(Y),this}},{key:"gotoLandmark",value:function(R){var Y=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,Et=this.landmarks.find(function(pr){return pr.name===R});if(Et){if(q===0){Et.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var Gt=Et.getPosition(),ee=Et.getFocalPoint(),pe=Et.getRoll(),Te,We=function pr(Tr){Te===void 0&&(Te=Tr);var Br=Tr-Te,Ir=(1-Math.cos(Br/q*Math.PI))/2,Dr=kt.create(),en=kt.create(),_n=0;kt.lerp(Dr,Y.focalPoint,ee,Ir),kt.lerp(en,Y.position,Gt,Ir),_n=Y.roll*(1-Ir)+pe*Ir,Y.setFocalPoint(Dr),Y.setPosition(en),Y.setRoll(_n),Y.computeMatrix();var Dn=kt.dist(Dr,ee)+kt.dist(en,Gt);if(!(Dn>.01)){Y.setFocalPoint(Dr),Y.setPosition(en),Y.setRoll(_n),Y.computeMatrix(),Y.interactor.connect();return}Br<q&&(Y.landmarkAnimationID=window.requestAnimationFrame(pr))};window.requestAnimationFrame(We)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var R,Y,q=Xn.setAxisAngle(Xn.create(),[0,0,1],this.roll*No);Pn.identity(this.matrix),R=Xn.setAxisAngle(Xn.create(),[1,0,0],(this.rotateWorld&&this.type!==Gi.TRACKING||this.type===Gi.TRACKING?1:-1)*this.elevation*No),Y=Xn.setAxisAngle(Xn.create(),[0,1,0],(this.rotateWorld&&this.type!==Gi.TRACKING||this.type===Gi.TRACKING?1:-1)*this.azimuth*No);var Et=Xn.multiply(Xn.create(),Y,R);Et=Xn.multiply(Xn.create(),Et,q);var Gt=Pn.fromQuat(Pn.create(),Et);this.type===Gi.ORBITING||this.type===Gi.EXPLORING?(Pn.translate(this.matrix,this.matrix,this.focalPoint),Pn.multiply(this.matrix,this.matrix,Gt),Pn.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Gi.TRACKING&&(Pn.translate(this.matrix,this.matrix,this.position),Pn.multiply(this.matrix,this.matrix,Gt))}},{key:"_setPosition",value:function(R,Y,q){this.position=as(R,Y,q);var Et=this.matrix;Et[12]=this.position[0],Et[13]=this.position[1],Et[14]=this.position[2],Et[15]=1}},{key:"_getAxes",value:function(){kt.copy(this.right,as(De.transformMat4(De.create(),[1,0,0,0],this.matrix))),kt.copy(this.up,as(De.transformMat4(De.create(),[0,1,0,0],this.matrix))),kt.copy(this.forward,as(De.transformMat4(De.create(),[0,0,1,0],this.matrix))),kt.normalize(this.right,this.right),kt.normalize(this.up,this.up),kt.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var R=this.distanceVector[0],Y=this.distanceVector[1],q=this.distanceVector[2],Et=kt.length(this.distanceVector);if(Et===0){this.elevation=0,this.azimuth=0;return}this.type===Gi.TRACKING?(this.elevation=Math.asin(Y/Et)*Bs,this.azimuth=Math.atan2(-R,-q)*Bs):this.rotateWorld?(this.elevation=Math.asin(Y/Et)*Bs,this.azimuth=Math.atan2(-R,-q)*Bs):(this.elevation=-Math.asin(Y/Et)*Bs,this.azimuth=-Math.atan2(-R,-q)*Bs)}},{key:"_getPosition",value:function(){kt.copy(this.position,as(De.transformMat4(De.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){kt.transformMat3(this.distanceVector,[0,0,-this.distance],Ye.fromMat4(Ye.create(),this.matrix)),kt.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=kt.subtract(kt.create(),this.focalPoint,this.position),this.distance=kt.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),M}(),vc.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},kf),rh=E(ll.prototype,"interactor",[dc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll))||au),Gs,Rf,ou,Ku,_u,ss,hl,Fs=(Gs=(0,O.b2)(),Rf=(0,O.f3)(b.GeometryComponentManager),Gs(ou=(Ku=(hl=ss=function(){function M(){(0,z.Z)(this,M),this.config=void 0,x(this,"geometry",_u,this),this.entity=void 0,this.component=void 0}return(0,k.Z)(M,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(R){this.config=R}},{key:"setEntity",value:function(R){this.entity=R,this.component=this.geometry.create(R),this.component.entity=R,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),M}(),ss.BOX="box",ss.SPHERE="sphere",ss.PLANE="plane",ss.MERGED="merged",hl),_u=E(Ku.prototype,"geometry",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ku))||ou),an=S(75946);function Bf(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var Gh={}.toString,Gf=function(it,R){return Gh.call(it)==="[object "+R+"]"},Fh=Gf,Uh=function(M){return Array.isArray?Array.isArray(M):Fh(M,"Array")},pc=9007199254740991,dl="[object Arguments]",nh="[object Array]",Us="[object Boolean]",Su="[object Date]",Mu="[object Error]",$u="[object Function]",Ms="[object Map]",lo="[object Number]",ih="[object Object]",Qu="[object RegExp]",ah="[object Set]",Ju="[object String]",vl="[object WeakMap]",pl="[object ArrayBuffer]",gl="[object DataView]",gc="[object Float32Array]",yc="[object Float64Array]",mc="[object Int8Array]",yl="[object Int16Array]",qu="[object Int32Array]",ml="[object Uint8Array]",Ff="[object Uint8ClampedArray]",oh="[object Uint16Array]",tf="[object Uint32Array]",gi={};gi[gc]=gi[yc]=gi[mc]=gi[yl]=gi[qu]=gi[ml]=gi[Ff]=gi[oh]=gi[tf]=!0,gi[dl]=gi[nh]=gi[pl]=gi[Us]=gi[gl]=gi[Su]=gi[Mu]=gi[$u]=gi[Ms]=gi[lo]=gi[ih]=gi[Qu]=gi[ah]=gi[Ju]=gi[vl]=!1;function sh(M){return function(it){return M(it)}}var bl=Object.prototype,bc=bl.toString;function ef(M){return Ke(M)&&Ec(M.length)&&!!gi[bc.call(M)]}function Ec(M){return typeof M=="number"&&M>-1&&M%1===0&&M<=pc}function Ke(M){return!!M&&(0,Pt.Z)(M)==="object"}var $o=ef,zs,rf,El,xc,Cu,wc,nf,_c;function Sc(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function af(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Sc(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Sc(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}var la=(zs=(0,O.b2)(),rf=(0,O.f3)(b.RenderEngine),El=(0,O.f3)(b.ConfigService),zs(xc=(Cu=(_c=function(){function M(){(0,z.Z)(this,M),x(this,"engine",wc,this),x(this,"configService",nf,this),this.entity=g(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,k.Z)(M,[{key:"init",value:function(){var R=this.configService.get(),Y=R.canvas,q=R.engineOptions;this.initPromise=this.engine.init(af({canvas:Y||Bf(),swapChainFormat:an.EV.BGRA8Unorm,antialiasing:!1},q))}},{key:"setBundle",value:function(R){this.compiledBundle=JSON.parse(JSON.stringify(R))}},{key:"setDispatch",value:function(R){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=R),this}},{key:"setMaxIteration",value:function(R){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=R),this}},{key:"setBinding",value:function(R,Y){var q=this;if(typeof R=="string"){var Et=hc(Y)||$o(Y)||Uh(Y);if(this.compiledBundle&&this.compiledBundle.context){var Gt=this.compiledBundle.context.defines.find(function(pe){return pe.name===R});if(Gt)return Gt.value=Y,this;var ee=this.compiledBundle.context.uniforms.find(function(pe){return pe.name===R});ee&&(Et?(ee.data=Y,ee.isReferer=!1,ee.storageClass===is.Uniform?this.model&&this.model.updateUniform(R,Y):this.model&&this.model.updateBuffer(R,Y)):(ee.isReferer=!0,ee.data=Y))}}else Object.keys(R).forEach(function(pe){q.setBinding(pe,R[pe])});return this}},{key:"execute",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q=this,Et,Gt,ee=arguments;return m().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(Et=ee.length>0&&ee[0]!==void 0?ee[0]:1,!this.dirty){Te.next=6;break}return this.compiledBundle.context&&(Et>1?this.compiledBundle.context.maxIteration=Et:this.compiledBundle.context.maxIteration++),Te.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(We){var pr=We.isReferer;return pr}).forEach(function(We){var pr=We.data,Tr=We.name;q.model.confirmInput(pr.model,Tr)}),Gt=0;Gt<Et;Gt++)this.model.run();return this.engine.endFrame(),Te.abrupt("return",this);case 12:case"end":return Te.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"getOutput",value:function(){var it=(0,y.Z)(m().mark(function Y(){return m().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Et.abrupt("return",this.model.readData());case 1:case"end":return Et.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"compile",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q,Et,Gt;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,this.initPromise;case 2:return q=af({},this.compiledBundle.context),Et=this.engine.supportWebGPU?this.engine.useWGSL?Zu.WGSL:Zu.GLSL450:Zu.GLSL100,Gt=this.compiledBundle.shaders[Et],q.defines.filter(function(Te){return Te.runtime}).forEach(function(Te){var We="".concat(lc).concat(Te.name);Gt=Gt.replace(We,"".concat(Te.value))}),q.shader=Gt,q.uniforms.forEach(function(Te){if(!Te.data&&Te.storageClass===is.StorageBuffer){var We=1;Te.type===iu.FloatArray?We=1:Te.type===iu.Vector4FloatArray&&(We=4),Te.data=new Float32Array(q.output.length*We).fill(0)}}),this.compiledBundle.context=q,pe.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=pe.sent;case 12:case"end":return pe.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()}]),M}(),_c),wc=E(Cu.prototype,"engine",[rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=E(Cu.prototype,"configService",[El],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cu))||xc),su,xl,Uf,Lo,uu,fu,Cs,cu=(su=(0,O.b2)(),xl=(0,O.f3)(b.MaterialComponentManager),su(Uf=(Lo=(Cs=fu=function(){function M(){(0,z.Z)(this,M),this.config=void 0,x(this,"material",uu,this),this.entity=void 0,this.component=void 0}return(0,k.Z)(M,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(R){this.config=R}},{key:"setEntity",value:function(R,Y){this.entity=R,this.component=this.material.create(R),this.component.entity=R,this.component.type=Y,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),M}(),fu.BASIC="basic",Cs),uu=E(Lo.prototype,"material",[xl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lo))||Uf),As,lu,Ts,Au,zf,of,Mc,us,Tu,ko,Cc,Ac,Iu,Tc,Qo=(As=(0,O.b2)(),lu=(0,O.f3)(b.MeshComponentManager),Ts=(0,O.f3)(b.CullableComponentManager),Au=(0,O.f3)(b.TransformComponentManager),zf=(0,O.f3)(b.Systems),of=(0,O.t6)(b.SceneGraphSystem),As(Mc=(us=(Tc=Iu=function(){function M(){(0,z.Z)(this,M),this.attributes={},this.config=void 0,x(this,"mesh",Tu,this),x(this,"cullable",ko,this),x(this,"transform",Cc,this),x(this,"sceneGraphSystem",Ac,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,k.Z)(M,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(R){this.config=R}},{key:"setEntity",value:function(R){this.entity=R,this.cullable.create(R),this.meshComponent=this.mesh.create(R),this.transformComponent=this.transform.create(R),this.onEntityCreated()}},{key:"setMaterial",value:function(R){return this.meshComponent.material=R,this}},{key:"setGeometry",value:function(R){return this.meshComponent.geometry=R,this}},{key:"setAttributes",value:function(R){var Y=this;Object.keys(R).forEach(function(q){R[q]!==void 0&&R[q]!==Y.attributes[q]&&(Y.onAttributeChanged({name:q,data:R[q]}),Y.attributes[q]=R[q])})}},{key:"setVisible",value:function(R){var Y=this;return this.meshComponent.visible=R,this.meshComponent.children.forEach(function(q){var Et=Y.mesh.getComponentByEntity(q);Et&&(Et.visible=R)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(R){return this.sceneGraphSystem.attach(this.entity,R.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(R){var Y=R.name,q=R.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(Y),q)}},{key:"convertAttributeName2UniformName",value:function(R){return R}}]),M}(),Iu.POINT="point",Iu.LINE="line",Iu.GRID="grid",Tc),Tu=E(us.prototype,"mesh",[lu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ko=E(us.prototype,"cullable",[Ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=E(us.prototype,"transform",[Au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ac=E(us.prototype,"sceneGraphSystem",[zf,of],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us))||Mc),Ic=S(4085),Pu=S.n(Ic),uh=function(){function M(it,R){(0,z.Z)(this,M),this.attribute=void 0,this.buffer=void 0;var Y=R.buffer,q=R.offset,Et=R.stride,Gt=R.normalized,ee=R.size,pe=R.divisor;this.buffer=Y,this.attribute={buffer:Y.get(),offset:q||0,stride:Et||0,normalized:Gt||!1,divisor:pe||0},ee&&(this.attribute.size=ee)}return(0,k.Z)(M,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(R){this.buffer.subData(R)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),M}(),fs,sf,cs,Ro,Wf,Is,Bo,Pc,ls,Ws,Ua,hs,Go,Ps,Oc=(fs={},(0,It.Z)(fs,Pe.POINTS,"points"),(0,It.Z)(fs,Pe.LINES,"lines"),(0,It.Z)(fs,Pe.LINE_LOOP,"line loop"),(0,It.Z)(fs,Pe.LINE_STRIP,"line strip"),(0,It.Z)(fs,Pe.TRIANGLES,"triangles"),(0,It.Z)(fs,Pe.TRIANGLE_FAN,"triangle fan"),(0,It.Z)(fs,Pe.TRIANGLE_STRIP,"triangle strip"),fs),Vf=(sf={},(0,It.Z)(sf,Pe.STATIC_DRAW,"static"),(0,It.Z)(sf,Pe.DYNAMIC_DRAW,"dynamic"),(0,It.Z)(sf,Pe.STREAM_DRAW,"stream"),sf),uf=(cs={},(0,It.Z)(cs,Pe.BYTE,"int8"),(0,It.Z)(cs,Pe.UNSIGNED_INT,"int16"),(0,It.Z)(cs,Pe.INT,"int32"),(0,It.Z)(cs,Pe.UNSIGNED_BYTE,"uint8"),(0,It.Z)(cs,Pe.UNSIGNED_SHORT,"uint16"),(0,It.Z)(cs,Pe.UNSIGNED_INT,"uint32"),(0,It.Z)(cs,Pe.FLOAT,"float"),cs),wl=(Ro={},(0,It.Z)(Ro,Pe.ALPHA,"alpha"),(0,It.Z)(Ro,Pe.LUMINANCE,"luminance"),(0,It.Z)(Ro,Pe.LUMINANCE_ALPHA,"luminance alpha"),(0,It.Z)(Ro,Pe.RGB,"rgb"),(0,It.Z)(Ro,Pe.RGBA,"rgba"),(0,It.Z)(Ro,Pe.RGBA4,"rgba4"),(0,It.Z)(Ro,Pe.RGB5_A1,"rgb5 a1"),(0,It.Z)(Ro,Pe.RGB565,"rgb565"),(0,It.Z)(Ro,Pe.DEPTH_COMPONENT,"depth"),(0,It.Z)(Ro,Pe.DEPTH_STENCIL,"depth stencil"),Ro),Dc=(Wf={},(0,It.Z)(Wf,Pe.DONT_CARE,"dont care"),(0,It.Z)(Wf,Pe.NICEST,"nice"),(0,It.Z)(Wf,Pe.FASTEST,"fast"),Wf),jf=(Is={},(0,It.Z)(Is,Pe.NEAREST,"nearest"),(0,It.Z)(Is,Pe.LINEAR,"linear"),(0,It.Z)(Is,Pe.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,It.Z)(Is,Pe.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,It.Z)(Is,Pe.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,It.Z)(Is,Pe.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Is),ff=(Bo={},(0,It.Z)(Bo,Pe.REPEAT,"repeat"),(0,It.Z)(Bo,Pe.CLAMP_TO_EDGE,"clamp"),(0,It.Z)(Bo,Pe.MIRRORED_REPEAT,"mirror"),Bo),_l=(Pc={},(0,It.Z)(Pc,Pe.NONE,"none"),(0,It.Z)(Pc,Pe.BROWSER_DEFAULT_WEBGL,"browser"),Pc),Ou=(ls={},(0,It.Z)(ls,Pe.NEVER,"never"),(0,It.Z)(ls,Pe.ALWAYS,"always"),(0,It.Z)(ls,Pe.LESS,"less"),(0,It.Z)(ls,Pe.LEQUAL,"lequal"),(0,It.Z)(ls,Pe.GREATER,"greater"),(0,It.Z)(ls,Pe.GEQUAL,"gequal"),(0,It.Z)(ls,Pe.EQUAL,"equal"),(0,It.Z)(ls,Pe.NOTEQUAL,"notequal"),ls),Xf=(Ws={},(0,It.Z)(Ws,Pe.FUNC_ADD,"add"),(0,It.Z)(Ws,Pe.MIN_EXT,"min"),(0,It.Z)(Ws,Pe.MAX_EXT,"max"),(0,It.Z)(Ws,Pe.FUNC_SUBTRACT,"subtract"),(0,It.Z)(Ws,Pe.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ws),ds=(Ua={},(0,It.Z)(Ua,Pe.ZERO,"zero"),(0,It.Z)(Ua,Pe.ONE,"one"),(0,It.Z)(Ua,Pe.SRC_COLOR,"src color"),(0,It.Z)(Ua,Pe.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,It.Z)(Ua,Pe.SRC_ALPHA,"src alpha"),(0,It.Z)(Ua,Pe.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,It.Z)(Ua,Pe.DST_COLOR,"dst color"),(0,It.Z)(Ua,Pe.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,It.Z)(Ua,Pe.DST_ALPHA,"dst alpha"),(0,It.Z)(Ua,Pe.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,It.Z)(Ua,Pe.CONSTANT_COLOR,"constant color"),(0,It.Z)(Ua,Pe.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,It.Z)(Ua,Pe.CONSTANT_ALPHA,"constant alpha"),(0,It.Z)(Ua,Pe.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,It.Z)(Ua,Pe.SRC_ALPHA_SATURATE,"src alpha saturate"),Ua),Yf=(hs={},(0,It.Z)(hs,Pe.NEVER,"never"),(0,It.Z)(hs,Pe.ALWAYS,"always"),(0,It.Z)(hs,Pe.LESS,"less"),(0,It.Z)(hs,Pe.LEQUAL,"lequal"),(0,It.Z)(hs,Pe.GREATER,"greater"),(0,It.Z)(hs,Pe.GEQUAL,"gequal"),(0,It.Z)(hs,Pe.EQUAL,"equal"),(0,It.Z)(hs,Pe.NOTEQUAL,"notequal"),hs),Jo=(Go={},(0,It.Z)(Go,Pe.ZERO,"zero"),(0,It.Z)(Go,Pe.KEEP,"keep"),(0,It.Z)(Go,Pe.REPLACE,"replace"),(0,It.Z)(Go,Pe.INVERT,"invert"),(0,It.Z)(Go,Pe.INCR,"increment"),(0,It.Z)(Go,Pe.DECR,"decrement"),(0,It.Z)(Go,Pe.INCR_WRAP,"increment wrap"),(0,It.Z)(Go,Pe.DECR_WRAP,"decrement wrap"),Go),cf=(Ps={},(0,It.Z)(Ps,Pe.FRONT,"front"),(0,It.Z)(Ps,Pe.BACK,"back"),Ps),Hf=function(){function M(it,R){(0,z.Z)(this,M),this.buffer=void 0;var Y=R.data,q=R.usage,Et=R.type;this.buffer=it.buffer({data:Y,usage:Vf[q||Pe.STATIC_DRAW],type:uf[Et||Pe.UNSIGNED_BYTE]})}return(0,k.Z)(M,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(R){var Y=R.data,q=R.offset;this.buffer.subdata(Y,q)}}]),M}(),$i=S(59194),Du=9007199254740991,Nu="[object Arguments]",Vs="[object Array]",fh="[object Boolean]",Zf="[object Date]",zh="[object Error]",ch="[object Function]",Wh="[object Map]",Lu="[object Number]",lh="[object Object]",hh="[object RegExp]",Sl="[object Set]",Vh="[object String]",dh="[object WeakMap]",jh="[object ArrayBuffer]",Qa="[object DataView]",vh="[object Float32Array]",ku="[object Float64Array]",hu="[object Int8Array]",Ml="[object Int16Array]",ph="[object Int32Array]",Kf="[object Uint8Array]",gh="[object Uint8ClampedArray]",ho="[object Uint16Array]",du="[object Uint32Array]",ii={};ii[vh]=ii[ku]=ii[hu]=ii[Ml]=ii[ph]=ii[Kf]=ii[gh]=ii[ho]=ii[du]=!0,ii[Nu]=ii[Vs]=ii[jh]=ii[fh]=ii[Qa]=ii[Zf]=ii[zh]=ii[ch]=ii[Wh]=ii[Lu]=ii[lh]=ii[hh]=ii[Sl]=ii[Vh]=ii[dh]=!1;function no(M){return function(it){return M(it)}}var Nc=Object.prototype,Xh=Nc.toString;function Cl(M){return yh(M)&&Yh(M.length)&&!!ii[Xh.call(M)]}function Yh(M){return typeof M=="number"&&M>-1&&M%1===0&&M<=Du}function yh(M){return!!M&&(0,Pt.Z)(M)==="object"}var Lc=Cl;function Al(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function Tl(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Al(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Al(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}var Os=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Il=0,lf=!1,kc=function(){function M(it,R){var Y=this;(0,z.Z)(this,M),this.reGl=it,this.context=R,this.entity=g(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var q={};this.context.uniforms.forEach(function(Te){var We=Te.name,pr=Te.type,Tr=Te.data,Br=Te.isReferer,Ir=Te.storageClass;if(Ir===is.StorageBuffer){if(Br)Y.textureCache[We]={data:void 0},q["".concat(We,"Size")]=function(){return Tr.compiledBundle.context.output.textureSize};else{Y.textureCache[We]=Y.calcDataTexture(We,pr,Tr);var Dr=Y.textureCache[We],en=Dr.textureWidth,_n=Dr.isOutput;q["".concat(We,"Size")]=[en,en],_n&&(Y.outputTextureName=We,Y.context.needPingpong&&(Y.outputTextureName="".concat(We,"Output"),Y.textureCache[Y.outputTextureName]=Y.calcDataTexture(We,pr,Tr)))}q[We]=function(){return lf&&console.log("[".concat(Y.entity,"]: ").concat(We," ").concat(Y.textureCache[We].id)),Y.textureCache[We].texture}}else if(Ir===is.Uniform){if(Tr&&(Array.isArray(Tr)||Lc(Tr))&&Tr.length>16)throw new Error("invalid data type ".concat(pr));q[We]=function(){return Te.data}}});var Et=this.getOuputDataTexture(),Gt=Et.textureWidth,ee=Et.texelCount;q.u_OutputTextureSize=[Gt,Gt],q.u_OutputTexelCount=ee,this.context.output.textureSize=[Gt,Gt];var pe={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:q,vert:Os,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(pe)}return(0,k.Z)(M,[{key:"run",value:function(){var R=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){R.computeCommand()}),lf&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q=this,Et,Gt,ee,pe,Te,We,pr,Tr;return m().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Et=q.reGl.read()}),!Et){Ir.next=6;break}if(Gt=this.getOuputDataTexture(),ee=Gt.originalDataLength,pe=Gt.elementsPerTexel,Te=Gt.typedArrayConstructor,We=Te===void 0?Float32Array:Te,pr=[],pe!==4)for(Tr=0;Tr<Et.length;Tr+=4)pe===1?pr.push(Et[Tr]):pe===2?pr.push(Et[Tr],Et[Tr+1]):pr.push(Et[Tr],Et[Tr+1],Et[Tr+2]);else pr=Et;return Ir.abrupt("return",new We(pr.slice(0,ee)));case 6:return Ir.abrupt("return",new Float32Array);case 7:case"end":return Ir.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"confirmInput",value:function(R,Y){var q;this.entity===R.entity?(this.dynamicPingpong=!0,q=this):q=R,this.textureCache[Y].id=q.getOuputDataTexture().id,this.textureCache[Y].texture=q.getOuputDataTexture().texture,lf&&console.log("[".concat(this.entity,"]: confirm input ").concat(Y," from model ").concat(q.entity,", ").concat(q.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(R,Y){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Et=this.context.uniforms.find(function(Te){var We=Te.name;return We===R});if(Et){var Gt=this.calcDataTexture(R,Et.type,Y),ee=Gt.texture,pe=Gt.data;this.textureCache[R].data=pe,this.textureCache[R].texture=ee}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var R=this.context.output.name;this.textureCache[R].id=this.getOuputDataTexture().id,this.textureCache[R].texture=this.getOuputDataTexture().texture}var Y=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Y,lf&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var R=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=R}},{key:"cloneDataTexture",value:function(R){var Y=R.data,q=R.textureWidth;return Tl(Tl({},R),{},{id:Il++,texture:this.reGl.texture({width:q,height:q,data:Y,type:"float"})})}},{key:"calcDataTexture",value:function(R,Y,q){var Et=1;Y===iu.Vector4FloatArray&&(Et=4);for(var Gt=[],ee=0;ee<q.length;ee+=Et)Et===1?Gt.push(q[ee],0,0,0):Et===2?Gt.push(q[ee],q[ee+1],0,0):Et===3?Gt.push(q[ee],q[ee+1],q[ee+2],0):Et===4&&Gt.push(q[ee],q[ee+1],q[ee+2],q[ee+3]);var pe=q.length,Te=Math.ceil(pe/Et),We=Math.ceil(Math.sqrt(Te)),pr=We*We;Te<pr&&Gt.push.apply(Gt,(0,$i.Z)(new Array((pr-Te)*4).fill(0)));var Tr=this.reGl.texture({width:We,height:We,data:Gt,type:"float"});return{id:Il++,data:Gt,originalDataLength:pe,typedArrayConstructor:Lc(q)?q.constructor:void 0,textureWidth:We,texture:Tr,texelCount:Te,elementsPerTexel:Et,isOutput:R===this.context.output.name}}}]),M}(),Ru=function(){function M(it,R){(0,z.Z)(this,M),this.elements=void 0;var Y=R.data,q=R.usage,Et=R.type,Gt=R.count;this.elements=it.elements({data:Y,usage:Vf[q||Pe.STATIC_DRAW],type:uf[Et||Pe.UNSIGNED_BYTE],count:Gt})}return(0,k.Z)(M,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(R){var Y=R.data;this.elements.subdata(Y)}},{key:"destroy",value:function(){this.elements.destroy()}}]),M}(),$f=function(){function M(it,R){(0,z.Z)(this,M),this.framebuffer=void 0;var Y=R.width,q=R.height,Et=R.color,Gt=R.colors,ee=R.depth,pe=R.stencil,Te={width:Y,height:q};Array.isArray(Gt)&&(Te.colors=Gt.map(function(We){return We.get()})),Et&&typeof Et!="boolean"&&(Te.color=Et.get()),this.framebuffer=it.framebuffer(Te)}return(0,k.Z)(M,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(R){var Y=R.width,q=R.height;this.framebuffer.resize(Y,q)}}]),M}();function io(M){var it=(0,Pt.Z)(M);return M!=null&&(it==="object"||it==="function")}function js(M){var it={};return Object.keys(M).forEach(function(R){Xs(R,M[R],it,"")}),it}function Xs(M,it,R,Y){if(it===null||typeof it=="number"||typeof it=="boolean"||Array.isArray(it)&&typeof it[0]=="number"||Lc(it)||it===""||it.resize!==void 0){R["".concat(Y&&Y+".").concat(M)]=it;return}io(it)&&Object.keys(it).forEach(function(q){Xs(q,it[q],R,"".concat(Y&&Y+".").concat(M))}),Array.isArray(it)&&it.forEach(function(q,Et){Object.keys(q).forEach(function(Gt){Xs(Gt,q[Gt],R,"".concat(Y&&Y+".").concat(M,"[").concat(Et,"]"))})})}function Rc(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function Ct(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Rc(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Rc(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}var ce=function(){function M(it,R){(0,z.Z)(this,M),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=it;var Y=R.vs,q=R.fs,Et=R.defines,Gt=R.attributes,ee=R.uniforms,pe=R.primitive,Te=R.count,We=R.elements,pr=R.depth,Tr=R.blend,Br=R.stencil,Ir=R.cull,Dr=R.instances,en=R.scissor,_n=R.viewport,Dn={};ee&&(this.uniforms=js(ee),Object.keys(ee).forEach(function(xi){Dn[xi]=it.prop(xi)}));var gn={};Object.keys(Gt).forEach(function(xi){gn[xi]=Gt[xi].get()});var ei=Et&&this.generateDefines(Et)||"",In={attributes:gn,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(ei,`
`).concat(q),uniforms:Dn,vert:`
`.concat(ei,`
`).concat(Y),primitive:Oc[pe===void 0?Pe.TRIANGLES:pe]};Dr&&(In.instances=Dr),Te&&(In.count=Te),We&&(In.elements=We.get()),en&&(In.scissor=en),_n&&(In.viewport=_n),this.initDepthDrawParams({depth:pr},In),this.initBlendDrawParams({blend:Tr},In),this.initStencilDrawParams({stencil:Br},In),this.initCullDrawParams({cull:Ir},In),this.drawCommand=it(In)}return(0,k.Z)(M,[{key:"addUniforms",value:function(R){this.uniforms=Ct(Ct({},this.uniforms),js(R))}},{key:"draw",value:function(R){var Y=Ct(Ct({},this.uniforms),js(R.uniforms||{})),q={};Object.keys(Y).forEach(function(Et){var Gt=(0,Pt.Z)(Y[Et]);Gt==="boolean"||Gt==="number"||Array.isArray(Y[Et])||Y[Et].BYTES_PER_ELEMENT?q[Et]=Y[Et]:Gt==="string"||(q[Et]=Y[Et].get())}),this.drawCommand(q)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(R,Y){var q=R.depth;q&&(Y.depth={enable:q.enable===void 0?!0:!!q.enable,mask:q.mask===void 0?!0:!!q.mask,func:Ou[q.func||Pe.LESS],range:q.range||[0,1]})}},{key:"initBlendDrawParams",value:function(R,Y){var q=R.blend;if(q){var Et=q.enable,Gt=q.func,ee=q.equation,pe=q.color,Te=pe===void 0?[0,0,0,0]:pe;Y.blend={enable:!!Et,func:{srcRGB:ds[Gt&&Gt.srcRGB||Pe.SRC_ALPHA],srcAlpha:ds[Gt&&Gt.srcAlpha||Pe.SRC_ALPHA],dstRGB:ds[Gt&&Gt.dstRGB||Pe.ONE_MINUS_SRC_ALPHA],dstAlpha:ds[Gt&&Gt.dstAlpha||Pe.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Xf[ee&&ee.rgb||Pe.FUNC_ADD],alpha:Xf[ee&&ee.alpha||Pe.FUNC_ADD]},color:Te}}}},{key:"initStencilDrawParams",value:function(R,Y){var q=R.stencil;if(q){var Et=q.enable,Gt=q.mask,ee=Gt===void 0?-1:Gt,pe=q.func,Te=pe===void 0?{cmp:Pe.ALWAYS,ref:0,mask:-1}:pe,We=q.opFront,pr=We===void 0?{fail:Pe.KEEP,zfail:Pe.KEEP,zpass:Pe.KEEP}:We,Tr=q.opBack,Br=Tr===void 0?{fail:Pe.KEEP,zfail:Pe.KEEP,zpass:Pe.KEEP}:Tr;Y.stencil={enable:!!Et,mask:ee,func:Ct(Ct({},Te),{},{cmp:Yf[Te.cmp]}),opFront:{fail:Jo[pr.fail],zfail:Jo[pr.zfail],zpass:Jo[pr.zpass]},opBack:{fail:Jo[Br.fail],zfail:Jo[Br.zfail],zpass:Jo[Br.zpass]}}}}},{key:"initCullDrawParams",value:function(R,Y){var q=R.cull;if(q){var Et=q.enable,Gt=q.face,ee=Gt===void 0?Pe.BACK:Gt;Y.cull={enable:!!Et,face:cf[ee]}}}},{key:"generateDefines",value:function(R){return Object.keys(R).map(function(Y){return"#define ".concat(Y," ").concat(Number(R[Y]))}).join(`
`)}}]),M}(),ze=function(){function M(it,R){(0,z.Z)(this,M),this.texture=void 0,this.width=void 0,this.height=void 0;var Y=R.data,q=R.type,Et=q===void 0?Pe.UNSIGNED_BYTE:q,Gt=R.width,ee=R.height,pe=R.flipY,Te=pe===void 0?!1:pe,We=R.format,pr=We===void 0?Pe.RGBA:We,Tr=R.mipmap,Br=Tr===void 0?!1:Tr,Ir=R.wrapS,Dr=Ir===void 0?Pe.CLAMP_TO_EDGE:Ir,en=R.wrapT,_n=en===void 0?Pe.CLAMP_TO_EDGE:en,Dn=R.aniso,gn=Dn===void 0?0:Dn,ei=R.alignment,In=ei===void 0?1:ei,xi=R.premultiplyAlpha,ai=xi===void 0?!1:xi,oi=R.mag,va=oi===void 0?Pe.NEAREST:oi,Yi=R.min,Ia=Yi===void 0?Pe.NEAREST:Yi,ra=R.colorSpace,Pa=ra===void 0?Pe.BROWSER_DEFAULT_WEBGL:ra;this.width=Gt,this.height=ee;var Jr={width:Gt,height:ee,type:uf[Et],format:wl[pr],wrapS:ff[Dr],wrapT:ff[_n],mag:jf[va],min:jf[Ia],alignment:In,flipY:Te,colorSpace:_l[Pa],premultiplyAlpha:ai,aniso:gn};Y&&(Jr.data=Y),typeof Br=="number"?Jr.mipmap=Dc[Br]:typeof Br=="boolean"&&(Jr.mipmap=Br),this.texture=it.texture(Jr)}return(0,k.Z)(M,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(R){var Y=R.width,q=R.height;this.texture.resize(Y,q),this.width=Y,this.height=q}},{key:"destroy",value:function(){this.texture.destroy()}}]),M}(),wr,Rr,br,Ar=(wr=(0,O.b2)(),wr(Rr=(br=function(){function M(){var it=this;(0,z.Z)(this,M),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var R=(0,y.Z)(m().mark(function Y(q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(!q.uniforms){Gt.next=3;break}return Gt.next=3,Promise.all(Object.keys(q.uniforms).map(function(){var ee=(0,y.Z)(m().mark(function pe(Te){var We;return m().wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:if(!(q.uniforms[Te]&&q.uniforms[Te].load!==void 0)){Tr.next=5;break}return Tr.next=3,q.uniforms[Te].load();case 3:We=Tr.sent,q.uniforms[Te]=We;case 5:case"end":return Tr.stop()}},pe)}));return function(pe){return ee.apply(this,arguments)}}()));case 3:return Gt.abrupt("return",new ce(it.gl,q));case 4:case"end":return Gt.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.createAttribute=function(R){return new uh(it.gl,R)},this.createBuffer=function(R){return new Hf(it.gl,R)},this.createElements=function(R){return new Ru(it.gl,R)},this.createTexture2D=function(R){return new ze(it.gl,R)},this.createFramebuffer=function(R){return new $f(it.gl,R)},this.useFramebuffer=function(R,Y){it.gl({framebuffer:R?R.get():null})(Y)},this.createComputeModel=function(){var R=(0,y.Z)(m().mark(function Y(q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return Gt.abrupt("return",new kc(it.gl,q));case 1:case"end":return Gt.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.clear=function(R){var Y=R.color,q=R.depth,Et=R.stencil,Gt=R.framebuffer,ee=Gt===void 0?null:Gt,pe={color:Y,depth:q,stencil:Et};pe.framebuffer=ee===null?ee:ee.get(),it.gl.clear(pe)},this.setScissor=function(R){it.gl&&it.gl._gl&&(R.enable&&R.box?(it.gl._gl.enable(Pe.SCISSOR_TEST),it.gl._gl.scissor(R.box.x,R.box.y,R.box.width,R.box.height)):it.gl._gl.disable(Pe.SCISSOR_TEST),it.gl._refresh())},this.viewport=function(R){var Y=R.x,q=R.y,Et=R.width,Gt=R.height;it.gl&&it.gl._gl&&(it.gl._gl.viewport(Y,q,Et,Gt),it.gl._refresh())},this.readPixels=function(R){var Y=R.framebuffer,q=R.x,Et=R.y,Gt=R.width,ee=R.height,pe={x:q,y:Et,width:Gt,height:ee};return Y&&(pe.framebuffer=Y.get()),it.gl.read(pe)},this.getCanvas=function(){return it.$canvas},this.getGLContext=function(){return it.gl._gl},this.destroy=function(){it.gl&&(it.gl.destroy(),it.inited=!1)}}return(0,k.Z)(M,[{key:"init",value:function(){var it=(0,y.Z)(m().mark(function Y(q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(!this.inited){Gt.next=2;break}return Gt.abrupt("return");case 2:return this.$canvas=q.canvas,Gt.next=5,new Promise(function(ee,pe){Pu()({canvas:q.canvas,attributes:{alpha:!0,antialias:q.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(We,pr){(We||!pr)&&pe(We),ee(pr)}})});case 5:this.gl=Gt.sent,this.inited=!0;case 7:case"end":return Gt.stop()}},Y,this)}));function R(Y){return it.apply(this,arguments)}return R}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),M}(),br))||Rr);function jr(){return typeof window!="undefined"}function Hr(M,it,R,Y){if(jr()){var q=document.getElementsByTagName("head")[0],Et=document.createElement("script");Et.setAttribute("type","text/javascript"),Et.setAttribute("src",M),Y&&(Et.id=Y),Et.onload=function(){it&&it()},Et.onerror=function(Gt){R&&R("Unable to load script '".concat(M,"'"),Gt)},q.appendChild(Et)}}function Kr(M,it){return new Promise(function(R,Y){Hr(M,function(){R()},function(q,Et){Y(Et)})})}var Vr;function Qr(){return d.apply(this,arguments)}function d(){return d=(0,y.Z)(m().mark(function M(){return m().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!Vr){R.next=2;break}return R.abrupt("return",Vr);case 2:return R.next=4,Kr("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Vr=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),R.abrupt("return",Vr);case 6:case"end":return R.stop()}},M)})),d.apply(this,arguments)}var L=function(){function M(it,R){(0,z.Z)(this,M),this.engine=it,this.options=R,this.attribute=void 0,this.buffer=void 0;var Y=R,q=Y.buffer,Et=Y.offset,Gt=Y.stride,ee=Y.normalized,pe=Y.size,Te=Y.divisor,We=Y.arrayStride,pr=Y.attributes,Tr=Y.stepMode;this.buffer=q,this.attribute={buffer:q.get(),offset:Et||0,stride:Gt||0,normalized:ee||!1,divisor:Te||0,arrayStride:We||0,attributes:pr,stepMode:Tr||"vertex"},pe&&(this.attribute.size=pe)}return(0,k.Z)(M,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(R){this.buffer.subData(R)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),M}(),j=function(){function M(it,R){(0,z.Z)(this,M),this.engine=it,this.options=R,this.buffer=void 0;var Y=R,q=Y.data,Et=Y.usage,Gt=Y.type;this.buffer=this.createBuffer(q instanceof Array?new Float32Array(q):q,Et||an.FB.Vertex|an.FB.CopyDst)}return(0,k.Z)(M,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(R){var Y=R.data,q=R.offset;this.setSubData(this.buffer,q,Y instanceof Array?new Float32Array(Y):Y)}},{key:"createBuffer",value:function(R,Y){var q=R.byteLength%4,Et={size:R.byteLength+q,usage:Y},Gt=this.engine.device.createBuffer(Et);return this.setSubData(Gt,0,R),Gt}},{key:"setSubData",value:function(R,Y,q){var Et=Ta?this.engine.device.getQueue():this.engine.device.defaultQueue;Et.writeBuffer(R,Y,q)}}]),M}();function tt(M){return typeof M=="number"}var lt=function(){function M(it,R){(0,z.Z)(this,M),this.engine=it,this.context=R,this.entity=g(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,k.Z)(M,[{key:"init",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q=this,Et,Gt,ee,pe,Te,We,pr;return m().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:return Br.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:Et=Br.sent,Gt=Et.computeStage,ee=this.context.uniforms.filter(function(Ir){return Ir.storageClass===is.StorageBuffer}),pe=this.context.uniforms.filter(function(Ir){return Ir.storageClass===is.Uniform}),Te=pe.length?1:0,this.bindGroupEntries=[],Te&&(We=0,pr=[],pe.forEach(function(Ir){if(tt(Ir.data))q.uniformGPUBufferLayout.push({name:Ir.name,offset:We}),We+=4,pr.push(Ir.data);else{var Dr,en=((Dr=Ir.data)===null||Dr===void 0?void 0:Dr.length)||1;en===3&&(en=4,Ir.data.push(0));var _n=We/4%4;if(_n>0){var Dn=4-_n;if(en>1&&en<=Dn)en===2&&(Dn===3&&(We+=4,pr.push(0)),pr.push.apply(pr,(0,$i.Z)(Ir.data)),q.uniformGPUBufferLayout.push({name:Ir.name,offset:We}));else{for(var gn=0;gn<Dn;gn++)We+=4,pr.push(0);pr.push.apply(pr,(0,$i.Z)(Ir.data)),q.uniformGPUBufferLayout.push({name:Ir.name,offset:We})}}We+=4*en}}),this.uniformBuffer=new j(this.engine,{data:pr instanceof Array?new Float32Array(pr):pr,usage:an.FB.Uniform|an.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),ee.forEach(function(Ir){if(Ir.data!==null&&(Ir.type===iu.Vector4FloatArray||Ir.type===iu.FloatArray)){var Dr;Ir.name===q.context.output.name?(Dr=new j(q.engine,{data:isFinite(Number(Ir.data))?[Ir.data]:Ir.data,usage:an.FB.Storage|an.FB.CopyDst|an.FB.CopySrc}),q.outputBuffer=Dr,q.context.output={name:Ir.name,length:isFinite(Number(Ir.data))?1:Ir.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Dr.get()}):Ir.isReferer?Ir.data.model&&Ir.data.model.outputBuffer&&(Dr=Ir.data.model.outputBuffer):Dr=new j(q.engine,{data:isFinite(Number(Ir.data))?[Ir.data]:Ir.data,usage:an.FB.Storage|an.FB.CopyDst|an.FB.CopySrc}),q.vertexBuffers[Ir.name]=Dr,q.bindGroupEntries.push({binding:Te,resource:{name:Ir.name,refer:Dr?void 0:Ir.data,buffer:Dr?Dr.get():void 0}}),Te++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:Gt}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Br.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"destroy",value:function(){var R=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(Y){return R.vertexBuffers[Y].destroy()})}},{key:"readData",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q,Et,Gt,ee,pe,Te,We,pr,Tr,Br;return m().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:if(q=this.context.output,!q){Dr.next=16;break}if(Et=q.length,Gt=q.typedArrayConstructor,ee=q.gpuBuffer,!ee){Dr.next=16;break}return pe=Et*Gt.BYTES_PER_ELEMENT,Te=this.engine.device.createBuffer({size:pe,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),We=this.engine.device.createCommandEncoder(),We.copyBufferToBuffer(ee,0,Te,0,pe),pr=Ta?this.engine.device.getQueue():this.engine.device.defaultQueue,pr.submit([We.finish()]),Dr.next=12,Te.mapAsync(an.gc.Read);case 12:return Tr=Te.getMappedRange(),Br=new Gt(Tr.slice(0)),Te.unmap(),Dr.abrupt("return",Br);case 16:return Dr.abrupt("return",new Float32Array);case 17:case"end":return Dr.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"run",value:function(){if(this.engine.currentComputePass){var R;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(R=this.engine.currentComputePass).dispatch.apply(R,(0,$i.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(R,Y){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Et=this.vertexBuffers[R];Et&&Et.subData({data:Y,offset:q})}},{key:"updateUniform",value:function(R,Y){var q=this.uniformGPUBufferLayout.find(function(Et){return Et.name===R});q&&this.uniformBuffer.subData({data:Number.isFinite(Y)?new Float32Array([Y]):new Float32Array(Y),offset:q.offset})}},{key:"confirmInput",value:function(R,Y){var q=this.vertexBuffers[Y],Et=R.outputBuffer;if(q&&Et&&q!==Et){var Gt=this.engine.device.createCommandEncoder(),ee=R.context.output,pe=ee.length,Te=ee.typedArrayConstructor,We=pe*Te.BYTES_PER_ELEMENT;Gt.copyBufferToBuffer(Et.get(),0,q.get(),0,We);var pr=Ta?this.engine.device.getQueue():this.engine.device.defaultQueue;pr.submit([Gt.finish()])}}},{key:"compileShaderToSpirV",value:function(R,Y,q){return this.compileRawShaderToSpirV(q+R,Y)}},{key:"compileRawShaderToSpirV",value:function(R,Y){return this.engine.glslang.compileGLSL(R,Y)}},{key:"compileComputePipelineStageDescriptor",value:function(){var it=(0,y.Z)(m().mark(function Y(q){var Et,Gt;return m().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(Et=q,Gt=`#version 450
`,this.engine.options.useWGSL){pe.next=6;break}return pe.next=5,this.compileShaderToSpirV(q,"compute",Gt);case 5:Et=pe.sent;case 6:return pe.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:Et,isWHLSL:Ta}),entryPoint:"main"}});case 7:case"end":return pe.stop()}},Y,this)}));function R(Y){return it.apply(this,arguments)}return R}()}]),M}(),pt=function(){function M(it,R){(0,z.Z)(this,M),this.engine=it,this.options=R,this.indexCount=void 0,this.buffer=void 0;var Y=R,q=Y.data,Et=Y.usage,Gt=Y.type,ee=Y.count;this.indexCount=ee||0,this.buffer=new j(it,{data:q instanceof Array?new Uint16Array(q):q,usage:an.FB.Index|an.FB.CopyDst})}return(0,k.Z)(M,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(R){this.buffer.subData(R)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),M}(),St=function(){function M(it,R){(0,z.Z)(this,M),this.engine=it,this.options=R,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var Y=R,q=Y.width,Et=Y.height,Gt=Y.color,ee=Y.colors,pe=Y.depth,Te=Y.stencil;Gt&&(this.colorTexture=Gt),pe&&(this.depthTexture=pe)}return(0,k.Z)(M,[{key:"get",value:function(){var R,Y;return{color:(R=this.colorTexture)===null||R===void 0?void 0:R.get(),depth:(Y=this.depthTexture)===null||Y===void 0?void 0:Y.get()}}},{key:"destroy",value:function(){var R,Y;(R=this.colorTexture)===null||R===void 0||R.destroy(),(Y=this.depthTexture)===null||Y===void 0||Y.destroy()}},{key:"resize",value:function(R){var Y=R.width,q=R.height;if(Y!==this.width||q!==this.height){var Et,Gt;(Et=this.colorTexture)===null||Et===void 0||Et.resize({width:Y,height:q}),(Gt=this.depthTexture)===null||Gt===void 0||Gt.resize({width:Y,height:q})}this.width=Y,this.height=q}}]),M}(),Ot,Ut,qt,fe,oe,Ne,rr,Pr=(Ot={},(0,It.Z)(Ot,Pe.POINTS,an.YV.PointList),(0,It.Z)(Ot,Pe.LINES,an.YV.LineList),(0,It.Z)(Ot,Pe.LINE_LOOP,an.YV.LineList),(0,It.Z)(Ot,Pe.LINE_STRIP,an.YV.LineStrip),(0,It.Z)(Ot,Pe.TRIANGLES,an.YV.TriangleList),(0,It.Z)(Ot,Pe.TRIANGLE_FAN,an.YV.TriangleList),(0,It.Z)(Ot,Pe.TRIANGLE_STRIP,an.YV.TriangleStrip),Ot),ur=(Ut={},(0,It.Z)(Ut,Pe.NEVER,an.wb.Never),(0,It.Z)(Ut,Pe.ALWAYS,an.wb.Always),(0,It.Z)(Ut,Pe.LESS,an.wb.Less),(0,It.Z)(Ut,Pe.LEQUAL,an.wb.LessEqual),(0,It.Z)(Ut,Pe.GREATER,an.wb.Greater),(0,It.Z)(Ut,Pe.GEQUAL,an.wb.GreaterEqual),(0,It.Z)(Ut,Pe.EQUAL,an.wb.Equal),(0,It.Z)(Ut,Pe.NOTEQUAL,an.wb.NotEqual),Ut),hr=(qt={},(0,It.Z)(qt,Pe.FUNC_ADD,an.db.Add),(0,It.Z)(qt,Pe.MIN_EXT,an.db.Min),(0,It.Z)(qt,Pe.MAX_EXT,an.db.Max),(0,It.Z)(qt,Pe.FUNC_SUBTRACT,an.db.Subtract),(0,It.Z)(qt,Pe.FUNC_REVERSE_SUBTRACT,an.db.ReverseSubtract),qt),fr=(fe={},(0,It.Z)(fe,Pe.ZERO,an.zi.Zero),(0,It.Z)(fe,Pe.ONE,an.zi.One),(0,It.Z)(fe,Pe.SRC_COLOR,an.zi.SrcColor),(0,It.Z)(fe,Pe.ONE_MINUS_SRC_COLOR,an.zi.OneMinusSrcColor),(0,It.Z)(fe,Pe.SRC_ALPHA,an.zi.SrcAlpha),(0,It.Z)(fe,Pe.ONE_MINUS_SRC_ALPHA,an.zi.OneMinusSrcAlpha),(0,It.Z)(fe,Pe.DST_COLOR,an.zi.DstColor),(0,It.Z)(fe,Pe.ONE_MINUS_DST_COLOR,an.zi.OneMinusDstColor),(0,It.Z)(fe,Pe.DST_ALPHA,an.zi.DstAlpha),(0,It.Z)(fe,Pe.ONE_MINUS_DST_ALPHA,an.zi.OneMinusDstAlpha),(0,It.Z)(fe,Pe.CONSTANT_COLOR,an.zi.BlendColor),(0,It.Z)(fe,Pe.ONE_MINUS_CONSTANT_COLOR,an.zi.OneMinusBlendColor),(0,It.Z)(fe,Pe.SRC_ALPHA_SATURATE,an.zi.SrcAlphaSaturated),fe),Xr=(oe={},(0,It.Z)(oe,Pe.ALPHA,"r8unorm"),(0,It.Z)(oe,Pe.RGBA,"rgba8unorm"),(0,It.Z)(oe,Pe.DEPTH_COMPONENT,"depth32float"),(0,It.Z)(oe,Pe.DEPTH_STENCIL,"depth24plus-stencil8"),oe),fn=(Ne={},(0,It.Z)(Ne,Pe.NEAREST,"nearest"),(0,It.Z)(Ne,Pe.LINEAR,"linear"),Ne),tn=(rr={},(0,It.Z)(rr,Pe.REPEAT,"repeat"),(0,It.Z)(rr,Pe.CLAMP_TO_EDGE,"clamp-to-edge"),(0,It.Z)(rr,Pe.MIRRORED_REPEAT,"mirror-repeat"),rr);function Tn(M){var it=M.cull;if(!it||!it.enable)return an.Wf.None;if(it.face)return it.face===Pe.FRONT?an.Wf.Front:an.Wf.Back}function wn(M){var it=M.depth,R=M.stencil,Y={compare:an.wb.Always,depthFailOp:an.xS.Keep,failOp:an.xS.Keep,passOp:an.xS.Keep};return{depthWriteEnabled:it&&it.enable,depthCompare:ur[(it==null?void 0:it.func)||Pe.ALWAYS],format:an.EV.Depth24PlusStencil8,stencilFront:Y,stencilBack:Y,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Rn(M,it){var R=M.blend;return[{format:it,alphaBlend:{srcFactor:fr[R&&R.func&&R.func.srcAlpha||Pe.ONE],dstFactor:fr[R&&R.func&&R.func.dstAlpha||Pe.ZERO],operation:hr[R&&R.equation&&R.equation.alpha||Pe.FUNC_ADD]},colorBlend:{srcFactor:fr[R&&R.func&&R.func.srcRGB||Pe.ONE],dstFactor:fr[R&&R.func&&R.func.dstRGB||Pe.ZERO],operation:hr[R&&R.equation&&R.equation.rgb||Pe.FUNC_ADD]},writeMask:an.Yw.All}]}function Kn(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function Fn(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Kn(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Kn(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}function Vi(M){for(var it=0,R=arguments.length,Y=new Array(R>1?R-1:0),q=1;q<R;q++)Y[q-1]=arguments[q];for(var Et=0,Gt=Y;Et<Gt.length;Et++){var ee=Gt[Et];it+=ee.length}for(var pe=new M(it),Te=0,We=0,pr=Y;We<pr.length;We++){var Tr=pr[We];pe.set(Tr,Te),Te+=Tr.length}return pe}var Qn=function(){function M(it,R){(0,z.Z)(this,M),this.engine=it,this.options=R,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,k.Z)(M,[{key:"init",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q=this,Et,Gt,ee,pe,Te,We,pr,Tr,Br,Ir,Dr,en,_n,Dn,gn,ei,In,xi;return m().wrap(function(oi){for(;;)switch(oi.prev=oi.next){case 0:return Et=this.options,Gt=Et.vs,ee=Et.fs,pe=Et.attributes,Te=Et.uniforms,We=Et.primitive,pr=Et.count,Tr=Et.elements,Br=Et.depth,Ir=Et.blend,Dr=Et.stencil,en=Et.cull,_n=Et.instances,oi.next=3,this.compilePipelineStageDescriptor(Gt,ee,null);case 3:Dn=oi.sent,gn=Dn.vertexStage,ei=Dn.fragmentStage,Te&&this.buildUniformBindGroup(Te),Tr&&(this.indexBuffer=Tr.get(),this.indexCount=Tr.indexCount),In={vertexBuffers:Object.keys(pe).map(function(va,Yi){var Ia=pe[va],ra=Ia.get(),Pa=ra.arrayStride,Jr=ra.stepMode,Ys=ra.attributes;return q.attributeCache[va]=Ia,{arrayStride:Pa,stepMode:Jr,attributes:Ys}})},xi={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Pr[We||Pe.TRIANGLES],rasterizationState:Fn(Fn({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Tn({cull:en})}),depthStencilState:wn({depth:Br,stencil:Dr}),colorStates:Rn({blend:Ir},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:gn,fragmentStage:ei,vertexState:In},this.renderPipeline=this.engine.device.createRenderPipeline(xi);case 11:case"end":return oi.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"addUniforms",value:function(R){this.uniforms=Fn(Fn({},this.uniforms),js(R))}},{key:"draw",value:function(R){var Y=this,q=this.engine.getCurrentRenderPass(),Et=Fn(Fn({},this.uniforms),js(R.uniforms||{})),Gt=[];Object.keys(Et).forEach(function(ee){var pe=(0,Pt.Z)(Et[ee]);if(pe==="boolean"||pe==="number"||Array.isArray(Et[ee])||Et[ee].BYTES_PER_ELEMENT){var Te,We=(Te=Y.uniformGPUBufferLayout.find(function(_n){var Dn=_n.name;return Dn===ee}))===null||Te===void 0?void 0:Te.offset;We!==null&&Y.uniformBuffer.subData({data:Et[ee],offset:We})}else{var pr,Tr=(pr=Y.uniformGPUBufferLayout.find(function(_n){var Dn=_n.name;return Dn===ee}))===null||pr===void 0?void 0:pr.offset;if(Tr!==null){var Br=Et[ee].get(),Ir=Br.color||Br,Dr=Ir.texture,en=Ir.sampler;en&&(Gt.push({binding:Tr,resource:en}),Tr++),Gt.push({binding:Tr,resource:Dr.createView()})}}}),this.uniformBuffer&&(Gt[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:Gt}),this.renderPipeline&&q.setPipeline(this.renderPipeline),q.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&q.setIndexBuffer(this.indexBuffer.get(),an.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(ee,pe){q.setVertexBuffer(0+pe,Y.attributeCache[ee].get().buffer,0)}),this.indexBuffer?q.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):q.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var it=(0,y.Z)(m().mark(function Y(q,Et,Gt){var ee,pe,Te;return m().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(ee=`#version 450
`,pe=q,Te=Et,this.engine.options.useWGSL){pr.next=10;break}return pr.next=6,this.compileShaderToSpirV(q,"vertex",ee);case 6:return pe=pr.sent,pr.next=9,this.compileShaderToSpirV(Et,"fragment",ee);case 9:Te=pr.sent;case 10:return pr.abrupt("return",this.createPipelineStageDescriptor(pe,Te));case 11:case"end":return pr.stop()}},Y,this)}));function R(Y,q,Et){return it.apply(this,arguments)}return R}()},{key:"compileShaderToSpirV",value:function(R,Y,q){return this.compileRawShaderToSpirV(q+R,Y)}},{key:"compileRawShaderToSpirV",value:function(R,Y){return this.engine.glslang.compileGLSL(R,Y)}},{key:"createPipelineStageDescriptor",value:function(R,Y){return{vertexStage:{module:this.engine.device.createShaderModule({code:R,isWHLSL:Ta}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:Y,isWHLSL:Ta}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:an.zX.CCW,cullMode:an.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(R){var Y=this,q=0,Et=Vi.apply(void 0,[Float32Array].concat((0,$i.Z)(Object.keys(R).map(function(pe){return R[pe]?(Y.uniformGPUBufferLayout.push({name:pe,offset:q}),q+=(R[pe].length||1)*4,R[pe]):[]})))),Gt=[],ee=!1;Et.length&&(ee=!0,Gt.push({binding:0,visibility:an.$X.Fragment|an.$X.Vertex,type:an.$l.UniformBuffer})),Object.keys(R).filter(function(pe){return R[pe]===null}).forEach(function(pe,Te){Y.uniformGPUBufferLayout.push({name:pe,offset:Te*2+(ee?1:0)}),Gt.push({binding:Te*2+(ee?1:0),visibility:an.$X.Fragment,type:an.$l.Sampler},{binding:Te*2+(ee?1:0)+1,visibility:an.$X.Fragment,type:an.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:Gt}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),ee&&(this.uniformBuffer=new j(this.engine,{data:Et instanceof Array?new Float32Array(Et):Et,usage:an.FB.Uniform|an.FB.CopyDst}))}}]),M}(),oa=function(){function M(it,R){(0,z.Z)(this,M),this.engine=it,this.options=R,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,k.Z)(M,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(R){var Y=R.width,q=R.height;(Y!==this.width||q!==this.height)&&(this.destroy(),this.createTexture()),this.width=Y,this.height=q}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var R=this.options,Y=R.data,q=R.type,Et=q===void 0?Pe.UNSIGNED_BYTE:q,Gt=R.width,ee=R.height,pe=R.flipY,Te=pe===void 0?!1:pe,We=R.format,pr=We===void 0?Pe.RGBA:We,Tr=R.mipmap,Br=Tr===void 0?!1:Tr,Ir=R.wrapS,Dr=Ir===void 0?Pe.CLAMP_TO_EDGE:Ir,en=R.wrapT,_n=en===void 0?Pe.CLAMP_TO_EDGE:en,Dn=R.aniso,gn=Dn===void 0?0:Dn,ei=R.alignment,In=ei===void 0?1:ei,xi=R.premultiplyAlpha,ai=xi===void 0?!1:xi,oi=R.mag,va=oi===void 0?Pe.NEAREST:oi,Yi=R.min,Ia=Yi===void 0?Pe.NEAREST:Yi,ra=R.colorSpace,Pa=ra===void 0?Pe.BROWSER_DEFAULT_WEBGL:ra,Jr=R.usage;this.width=Gt,this.height=ee,this.texture=this.engine.device.createTexture({size:[Gt,ee,1],mipLevelCount:1,sampleCount:1,dimension:an.kd.E2d,format:Xr[pr],usage:Jr||an.v2.Sampled|an.v2.CopyDst}),(!Jr||Jr&an.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:tn[Dr],addressModeV:tn[_n],addressModeW:tn[Dr],magFilter:fn[va],minFilter:fn[Ia],maxAnisotropy:gn}))}}]),M}(),Di,ui,Qi,sa=(Di=(0,O.b2)(),Di(ui=(Qi=function(){function M(){var it=this;(0,z.Z)(this,M),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(R){var Y=R.framebuffer,q=R.color,Et=R.depth,Gt=R.stencil;it.options.supportCompute&&it.startComputePass(),it.currentRenderTarget?(it.currentRenderPass&&it.endRenderTargetRenderPass(),it.startRenderTargetRenderPass(it.currentRenderTarget,q||null,!!Et,!!Gt)):(it.mainColorAttachments[0].loadValue=q||an.Ws.Load,it.mainDepthAttachment.depthLoadValue=Et||an.Ws.Load,it.mainDepthAttachment.stencilLoadValue=Gt?it.clearStencilValue:an.Ws.Load,it.mainRenderPass&&it.endMainRenderPass(),it.startMainRenderPass())},this.createModel=function(){var R=(0,y.Z)(m().mark(function Y(q){var Et;return m().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Et=new Qn(it,q),ee.next=3,Et.init();case 3:return ee.abrupt("return",Et);case 4:case"end":return ee.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.createAttribute=function(R){return new L(it,R)},this.createBuffer=function(R){return new j(it,R)},this.createElements=function(R){return new pt(it,R)},this.createTexture2D=function(R){return new oa(it,R)},this.createFramebuffer=function(R){return new St(it,R)},this.useFramebuffer=function(R,Y){it.currentRenderTarget&&it.unbindFramebuffer(it.currentRenderTarget),it.currentRenderTarget=R,it.currentRenderTargetViewDescriptor={dimension:an.p_.E2d,arrayLayerCount:1,aspect:an.H7.All},it.currentRenderPass=null,Y()},this.createComputeModel=function(){var R=(0,y.Z)(m().mark(function Y(q){var Et;return m().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return Et=new lt(it,q),ee.next=3,Et.init();case 3:return ee.abrupt("return",Et);case 4:case"end":return ee.stop()}},Y)}));return function(Y){return R.apply(this,arguments)}}(),this.getCanvas=function(){return it.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(R){var Y=R.x,q=R.y,Et=R.width,Gt=R.height;if(!it.currentRenderPass)it.transientViewport={x:Y,y:q,width:Et,height:Gt};else if(it.transientViewport.x!==1/0){var ee=it.getCurrentRenderPass();ee.setViewport(it.transientViewport.x,it.transientViewport.y,it.transientViewport.width,it.transientViewport.height,0,1)}else if(Y!==it.cachedViewport.x||q!==it.cachedViewport.y||Et!==it.cachedViewport.width||Gt!==it.cachedViewport.height){it.cachedViewport={x:Y,y:q,width:Et,height:Gt};var pe=it.getCurrentRenderPass();pe.setViewport(Y,q,Et,Gt,0,1)}},this.readPixels=function(R){throw new Error("Method not implemented.")}}return(0,k.Z)(M,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var it=(0,y.Z)(m().mark(function Y(q){return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return this.canvas=q.canvas,this.options=q,this.useWGSL=!!q.useWGSL,this.mainPassSampleCount=q.antialiasing?this.defaultSampleCount:1,Gt.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return Gt.stop()}},Y,this)}));function R(Y){return it.apply(this,arguments)}return R}()},{key:"setScissor",value:function(R){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(R){return R.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Ta?this.device.getQueue().submit(this.commandBuffers.filter(function(R){return R})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(R){return R}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q,Et;return m().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,Qr();case 2:return this.glslang=ee.sent,ee.next=5,(q=navigator)===null||q===void 0||(Et=q.gpu)===null||Et===void 0?void 0:Et.requestAdapter();case 5:return this.adapter=ee.sent,ee.next=8,this.adapter.requestDevice();case 8:this.device=ee.sent;case 9:case"end":return ee.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Ta?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:an.v2.OutputAttachment|an.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var R={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:an.kd.E2d,format:an.EV.BGRA8Unorm,usage:an.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(R),this.mainColorAttachments=[{attachment:Ta?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:an.EG.Store}]}else this.mainColorAttachments=[{attachment:Ta?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:an.EG.Store}];var Y={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:an.kd.E2d,format:Ta?"depth32float-stencil8":an.EV.Depth24PlusStencil8,usage:an.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(Y),this.mainDepthAttachment={attachment:Ta?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:an.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:an.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Ta?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Ta?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(R,Y,q){var Et,Gt,ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,pe=(Et=R.get().color)===null||Et===void 0?void 0:Et.texture,Te;pe&&(Te=pe.createView(this.currentRenderTargetViewDescriptor));var We=(Gt=R.get().depth)===null||Gt===void 0?void 0:Gt.texture,pr;We&&(pr=We.createView());var Tr=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:Te,loadValue:Y!==null?Y:an.Ws.Load,storeOp:an.EG.Store}],depthStencilAttachment:We&&pr?{attachment:pr,depthLoadValue:q?this.clearDepthValue:an.Ws.Load,depthStoreOp:an.EG.Store,stencilLoadValue:ee?this.clearStencilValue:an.Ws.Load,stencilStoreOp:an.EG.Store}:void 0});this.currentRenderPass=Tr,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(R){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),M}(),Qi))||ui),_a,za;function Sa(M){var it=ni();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function ni(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Wa=4/64,Ii=1-Wa*2,Vn=(_a=(0,O.b2)(),_a(za=function(M){(0,X.Z)(R,M);var it=Sa(R);function R(){return(0,z.Z)(this,R),it.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){var q=this.config,Et=q.widthSegments,Gt=Et===void 0?1:Et,ee=q.heightSegments,pe=ee===void 0?1:ee,Te=q.depthSegments,We=Te===void 0?1:Te,pr=q.halfExtents,Tr=pr===void 0?kt.fromValues(.5,.5,.5):pr,Br=Gt,Ir=pe,Dr=We,en=(0,C.Z)(Tr,3),_n=en[0],Dn=en[1],gn=en[2],ei=[kt.fromValues(-_n,-Dn,gn),kt.fromValues(_n,-Dn,gn),kt.fromValues(_n,Dn,gn),kt.fromValues(-_n,Dn,gn),kt.fromValues(_n,-Dn,-gn),kt.fromValues(-_n,-Dn,-gn),kt.fromValues(-_n,Dn,-gn),kt.fromValues(_n,Dn,-gn)],In=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],xi=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],ai={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},oi=[],va=[],Yi=[],Ia=[],ra=[],Pa=0,Jr=function(Ji,df,Gu){var Nl,Gc,_h,Sh;for(_h=0;_h<=df;_h++)for(Sh=0;Sh<=Gu;Sh++){var ep=kt.create(),nv=kt.create(),iv=kt.create(),Sd=kt.create();kt.lerp(ep,ei[In[Ji][0]],ei[In[Ji][1]],_h/df),kt.lerp(nv,ei[In[Ji][0]],ei[In[Ji][2]],Sh/Gu),kt.sub(iv,nv,ei[In[Ji][0]]),kt.add(Sd,ep,iv),Nl=_h/df,Gc=Sh/Gu,oi.push(Sd[0],Sd[1],Sd[2]),va.push(xi[Ji][0],xi[Ji][1],xi[Ji][2]),Yi.push(Nl,Gc),Nl/=3,Gc/=3,Nl=Nl*Ii+Wa,Gc=Gc*Ii+Wa,Nl+=Ji%3/3,Gc+=Math.floor(Ji/3)/3,Ia.push(Nl,Gc),_h<df&&Sh<Gu&&(ra.push(Pa+Gu+1,Pa+1,Pa),ra.push(Pa+Gu+1,Pa+Gu+2,Pa+1)),Pa++}};Jr(ai.FRONT,Br,Ir),Jr(ai.BACK,Br,Ir),Jr(ai.TOP,Br,Dr),Jr(ai.BOTTOM,Br,Dr),Jr(ai.RIGHT,Dr,Ir),Jr(ai.LEFT,Dr,Ir);var Ys=sl(oi),tc=this.getComponent();tc.indices=Uint32Array.from(ra),tc.aabb=Ys,tc.vertexCount=Pa,tc.attributes=[{dirty:!0,name:"position",data:Float32Array.from(oi),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(va),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Yi),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),R}(Fs))||za);function ci(M,it){if(!M&&!it)throw new Error("Please specify valid arguments for parameters a and b.");if(!it||it.length===0)return M;if(!M||M.length===0)return it;if(Object.prototype.toString.call(M)!==Object.prototype.toString.call(it))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var R=new M.constructor(M.length+it.length);return R.set(M),R.set(it,M.length),R}var yi,ha;function vu(M){var it=Qf();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function Qf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var ke=(yi=(0,O.b2)(),yi(ha=function(M){(0,X.Z)(R,M);var it=vu(R);function R(){return(0,z.Z)(this,R),it.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){var q=this.config.geometries,Et=q===void 0?[]:q,Gt=this.getComponent();Gt.aabb=new Ft;var ee=[],pe=[],Te=0;Et.forEach(function(We){var pr=We.aabb,Tr=We.indices,Br=We.vertexCount,Ir=We.attributes;Gt.aabb.add(pr),Gt.vertexCount+=Br,Tr&&pe.push.apply(pe,(0,$i.Z)(Tr.map(function(Dr){return Dr+Te}))),Te+=Br,Ir.forEach(function(Dr,en){ee[en]?Dr.data&&(hc(Dr.data)?ee[en].push(Dr.data):$o(Dr.data)?ee[en].data=ci(ee[en].data,Dr.data):ee[en].data=ee[en].data.concat(Dr.data)):(ee[en]=Dr,ee[en].dirty=!0)})}),Gt.attributes=ee,Gt.indices=Uint32Array.from(pe),Gt.dirty=!0}}]),R}(Fs))||ha),_r,xr;function En(M){var it=si();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function si(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var _e=(_r=(0,O.b2)(),_r(xr=function(M){(0,X.Z)(R,M);var it=En(R);function R(){return(0,z.Z)(this,R),it.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){for(var q=this.config,Et=q.halfExtents,Gt=Et===void 0?[.5,.5]:Et,ee=q.widthSegments,pe=ee===void 0?5:ee,Te=q.lengthSegments,We=Te===void 0?5:Te,pr=[],Tr=[],Br=[],Ir=[],Dr=0,en=0;en<=pe;en++)for(var _n=0;_n<=We;_n++){var Dn=-Gt[0]+2*Gt[0]*en/pe,gn=0,ei=-(-Gt[1]+2*Gt[1]*_n/We),In=en/pe,xi=_n/We;pr.push(Dn,gn,ei),Tr.push(0,1,0),Br.push(In,xi),en<pe&&_n<We&&(Ir.push(Dr+We+1,Dr+1,Dr),Ir.push(Dr+We+1,Dr+We+2,Dr+1)),Dr++}var ai=sl(pr),oi=this.getComponent();oi.indices=Uint32Array.from(Ir),oi.aabb=ai,oi.vertexCount=Dr,oi.attributes=[{dirty:!0,name:"position",data:Float32Array.from(pr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Tr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Br),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),R}(Fs))||xr),se,$e;function dr(M){var it=gr();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function gr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Je=(se=(0,O.b2)(),se($e=function(M){(0,X.Z)(R,M);var it=dr(R);function R(){return(0,z.Z)(this,R),it.apply(this,arguments)}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){for(var q=this.config,Et=q.radius,Gt=Et===void 0?.5:Et,ee=q.latitudeBands,pe=ee===void 0?16:ee,Te=q.longitudeBands,We=Te===void 0?16:Te,pr=[],Tr=[],Br=[],Ir=[],Dr=0;Dr<=pe;Dr++)for(var en=Dr*Math.PI/pe,_n=Math.sin(en),Dn=Math.cos(en),gn=0;gn<=We;gn++){var ei=gn*2*Math.PI/We-Math.PI/2,In=Math.sin(ei),xi=Math.cos(ei),ai=xi*_n,oi=Dn,va=In*_n,Yi=1-gn/We,Ia=1-Dr/pe;pr.push(ai*Gt,oi*Gt,va*Gt),Tr.push(ai,oi,va),Br.push(Yi,Ia)}for(var ra=0;ra<pe;++ra)for(var Pa=0;Pa<We;++Pa){var Jr=ra*(We+1)+Pa,Ys=Jr+We+1;Ir.push(Jr+1,Ys,Jr),Ir.push(Jr+1,Ys+1,Ys)}var tc=sl(pr),Bc=this.getComponent();Bc.indices=Uint32Array.from(Ir),Bc.aabb=tc,Bc.vertexCount=pr.length/3,Bc.attributes=[{dirty:!0,name:"position",data:Float32Array.from(pr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Tr),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Br),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),R}(Fs))||$e),Qe,ir,we,He,be,lr,mr,kr;function Ur(M){var it=Or();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function Or(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var qr=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,An=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,qn=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,Mn=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,jn=(Qe=(0,O.b2)(),ir=(0,O.f3)(b.RenderEngine),we=(0,O.f3)(b.ShaderModuleService),Qe(He=(be=(kr=function(M){(0,X.Z)(R,M);var it=Ur(R);function R(){var Y;(0,z.Z)(this,R);for(var q=arguments.length,Et=new Array(q),Gt=0;Gt<q;Gt++)Et[Gt]=arguments[Gt];return Y=it.call.apply(it,[this].concat(Et)),x(Y,"engine",lr,(0,de.Z)(Y)),x(Y,"shaderModuleService",mr,(0,de.Z)(Y)),Y}return(0,k.Z)(R,[{key:"onEntityCreated",value:function(){var q=this.getComponent(),Et=this.engine.supportWebGPU?Mn:An,Gt=this.engine.supportWebGPU?qn:qr;this.shaderModuleService.registerModule("material-basic",{vs:Et,fs:Gt});var ee=this.shaderModuleService.getModule("material-basic"),pe=ee.vs,Te=ee.fs,We=ee.uniforms;q.vertexShaderGLSL=pe,q.fragmentShaderGLSL=Te,q.setUniform(We),this.config.map&&(q.setDefines({USE_UV:1,USE_MAP:1}),q.setUniform({map:this.config.map,uvTransform:Ye.create()}))}}]),R}(cu),kr),lr=E(be.prototype,"engine",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=E(be.prototype,"shaderModuleService",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be))||He),$n,Ci,da,Fo,Jf,Uo,mh,vo,Hh,Id,Pd,Od;function Pp(M){var it=_v();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function _v(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Op=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,Ag=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,Dp=($n=(0,O.b2)(),Ci=(0,O.f3)(b.Systems),da=(0,O.t6)(b.MaterialSystem),Fo=(0,O.f3)(b.Systems),Jf=(0,O.t6)(b.GeometrySystem),Uo=(0,O.f3)(b.ShaderModuleService),$n(mh=(vo=(Od=function(M){(0,X.Z)(R,M);var it=Pp(R);function R(){var Y;(0,z.Z)(this,R);for(var q=arguments.length,Et=new Array(q),Gt=0;Gt<q;Gt++)Et[Gt]=arguments[Gt];return Y=it.call.apply(it,[this].concat(Et)),x(Y,"materialSystem",Hh,(0,de.Z)(Y)),x(Y,"geometrySystem",Id,(0,de.Z)(Y)),x(Y,"shaderModuleService",Pd,(0,de.Z)(Y)),Y}return(0,k.Z)(R,[{key:"onAttributeChanged",value:function(q){var Et=q.name,Gt=q.data,ee=this.getMeshComponent();ee&&ee.material&&(Et==="gridColor"?(ee.material.setUniform("u_GridColor",Gt),ee.material.setUniform("u_GridColor2",Gt)):Et==="gridSize"&&(ee.material.setUniform("u_GridSize",Gt),ee.material.setUniform("u_GridSize2",Gt)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Ag,fs:Op});var q=this.shaderModuleService.getModule("grid"),Et=q.vs,Gt=q.fs,ee=q.uniforms,pe=this.materialSystem.createShaderMaterial({vertexShader:Et,fragmentShader:Gt});this.setMaterial(pe);var Te=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(Te),pe.setCull({enable:!1,face:Pe.BACK}).setDepth({enable:!0,func:Pe.LESS}),pe.setUniform(ee),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),Te.setIndex([0,3,2,2,1,0]),Te.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),R}(Qo),Od),Hh=E(vo.prototype,"materialSystem",[Ci,da],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Id=E(vo.prototype,"geometrySystem",[Fo,Jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pd=E(vo.prototype,"shaderModuleService",[Uo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo))||mh),Pl=S(42850),Ol=S(8639);function fd(M,it,R,Y,q){Zh(it,Y,-q),Zh(it,Y,q),M.push(R),M.push(R)}function Zh(M,it,R){M.push([[it[0],it[1]],R])}function Tg(M,it,R){var Y=[0,0],q=[0,0],Et=[0,0],Gt=[0,0],ee=-1,pe=!1,Te=null,We=(0,Pl.create)(),pr=R||0,Tr=3,Br=[],Ir=[],Dr=[],en=[0,0];it&&(M=M.slice(),M.push(M[0]));for(var _n=M.length,Dn=1;Dn<_n;Dn++){var gn=pr,ei=M[Dn-1],In=M[Dn],xi=Dn<M.length-1?M[Dn+1]:null;if(en.push(Dn/_n,Dn/_n),(0,Ol.o7)(Y,In,ei),Te||(Te=[0,0],(0,Ol.mJ)(Te,Y)),pe||(pe=!0,fd(Ir,Br,ei,Te,1)),Dr.push([gn+0,gn+1,gn+2]),!xi)(0,Ol.mJ)(Te,Y),fd(Ir,Br,In,Te,1),Dr.push(ee===1?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),pr+=2;else{(0,Ol.o7)(q,xi,In);var ai=(0,Ol.x7)(Et,Gt,Y,q,1),oi=(0,Pl.dot)(Et,Te)<0?-1:1,va=ai>Tr;if(!isFinite(ai)){(0,Ol.mJ)(Te,Y),fd(Ir,Br,In,Te,1),Dr.push(ee===1?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),pr+=2,ee=oi;continue}va?(ai=Tr,en.push(Dn/_n),Zh(Br,Te,-oi),Ir.push(In),Zh(Br,Gt,ai*oi),Ir.push(In),Dr.push(ee!==-oi?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),Dr.push([gn+2,gn+3,gn+4]),(0,Ol.mJ)(We,q),(0,Pl.copy)(Te,We),Zh(Br,Te,-oi),Ir.push(In),pr+=3):(fd(Ir,Br,In,Gt,ai),Dr.push(ee===1?[gn,gn+2,gn+3]:[gn+2,gn+1,gn+3]),oi=-1,(0,Pl.copy)(Te,Gt),pr+=2),ee=oi}}return{normals:Br,attrIndex:Dr,attrPos:Ir,attrCounters:en}}var Sv,cd,ld,Mv,Cv,Bu,Dd,Kh,Nd,Av,Tv,hd;function Iv(M){var it=Np();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function Np(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Lp=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,Pv=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,kp=(Sv=(0,O.b2)(),cd=(0,O.f3)(b.Systems),ld=(0,O.t6)(b.MaterialSystem),Mv=(0,O.f3)(b.Systems),Cv=(0,O.t6)(b.GeometrySystem),Bu=(0,O.f3)(b.ShaderModuleService),Sv(Dd=(Kh=(hd=function(M){(0,X.Z)(R,M);var it=Iv(R);function R(){var Y;(0,z.Z)(this,R);for(var q=arguments.length,Et=new Array(q),Gt=0;Gt<q;Gt++)Et[Gt]=arguments[Gt];return Y=it.call.apply(it,[this].concat(Et)),x(Y,"materialSystem",Nd,(0,de.Z)(Y)),x(Y,"geometrySystem",Av,(0,de.Z)(Y)),x(Y,"shaderModuleService",Tv,(0,de.Z)(Y)),Y.vertexCount=void 0,Y}return(0,k.Z)(R,[{key:"onAttributeChanged",value:function(q){var Et=q.name,Gt=q.data,ee=this.getMeshComponent();if(ee&&ee.material)switch(Et){case"dashArray":ee.material.setUniform("u_dash_array",Gt);break;case"dashOffset":ee.material.setUniform("u_dash_offset",Gt);break;case"dashRatio":ee.material.setUniform("u_dash_ratio",Gt);break;case"thickness":ee.material.setUniform("u_thickness",Gt);break;case"color":var pe=new Array(this.vertexCount).fill(void 0).map(function(){return Gt}).reduce(function(Te,We){return[].concat((0,$i.Z)(Te),(0,$i.Z)(We))},[]);ee.geometry.setAttribute("a_color",Float32Array.from(pe),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var q=this;this.shaderModuleService.registerModule("line",{vs:Pv,fs:Lp});var Et=this.shaderModuleService.getModule("line"),Gt=Et.vs,ee=Et.fs,pe=Et.uniforms,Te=this.materialSystem.createShaderMaterial({vertexShader:Gt,fragmentShader:ee}),We=Tg(this.config.points,!1),pr=We.normals,Tr=We.attrIndex,Br=We.attrPos,Ir=We.attrCounters,Dr=Br.length;this.vertexCount=Dr;var en=this.geometrySystem.createBufferGeometry({vertexCount:Dr});this.setMaterial(Te),this.setGeometry(en),Te.setCull({enable:!1,face:Pe.BACK}).setUniform(pe),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var _n=[],Dn=[];pr.forEach(function(ei){var In=ei[0],xi=ei[1];_n.push([In[0],In[1]]),Dn.push(xi)}),en.setIndex(Tr.reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[])),en.setAttribute("a_pos",Float32Array.from(Br.reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var gn=new Array(Dr).fill(void 0).map(function(){return(0,$i.Z)(q.config.color)}).reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[]);en.setAttribute("a_color",Float32Array.from(gn),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),en.setAttribute("a_line_miter",Float32Array.from(Dn),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),en.setAttribute("a_line_normal",Float32Array.from(_n.reduce(function(ei,In){return[].concat((0,$i.Z)(ei),(0,$i.Z)(In))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),en.setAttribute("a_counters",Float32Array.from(Ir),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),R}(Qo),hd),Nd=E(Kh.prototype,"materialSystem",[cd,ld],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Av=E(Kh.prototype,"geometrySystem",[Mv,Cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tv=E(Kh.prototype,"shaderModuleService",[Bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kh))||Dd);function Ov(M){return[M+1&255,M+1>>8&255,M+1>>8>>8&255]}var Ld,kd,dd,Rd,Dv,vd,$h,Va,pd,gd,Rp,Nv;function Bd(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function yd(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Bd(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Bd(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}function hf(M){var it=bh();return function(){var Y=(0,U.Z)(M),q;if(it){var Et=(0,U.Z)(this).constructor;q=Reflect.construct(Y,arguments,Et)}else q=Y.apply(this,arguments);return(0,W.Z)(this,q)}}function bh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}var Bp=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,Gp=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,Lv=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],Gd=(Ld=(0,O.b2)(),kd=(0,O.f3)(b.Systems),dd=(0,O.t6)(b.MaterialSystem),Rd=(0,O.f3)(b.Systems),Dv=(0,O.t6)(b.GeometrySystem),vd=(0,O.f3)(b.ShaderModuleService),Ld($h=(Va=(Nv=function(M){(0,X.Z)(R,M);var it=hf(R);function R(){var Y;(0,z.Z)(this,R);for(var q=arguments.length,Et=new Array(q),Gt=0;Gt<q;Gt++)Et[Gt]=arguments[Gt];return Y=it.call.apply(it,[this].concat(Et)),x(Y,"materialSystem",pd,(0,de.Z)(Y)),x(Y,"geometrySystem",gd,(0,de.Z)(Y)),x(Y,"shaderModuleService",Rp,(0,de.Z)(Y)),Y}return(0,k.Z)(R,[{key:"onAttributeChanged",value:function(q){var Et=q.name,Gt=q.data,ee=this.getMeshComponent();ee&&ee.material&&(Et==="strokeWidth"?ee.material.setUniform("u_stroke_width",Gt):Et==="strokeColor"?ee.material.setUniform("u_stroke_color",Gt):Et==="strokeOpacity"?ee.material.setUniform("u_stroke_opacity",Gt):Et==="opacity"?ee.material.setUniform("u_opacity",Gt):Et==="blur"&&ee.material.setUniform("u_blur",Gt))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Gp,fs:Bp});var q=this.shaderModuleService.getModule("grid"),Et=q.vs,Gt=q.fs,ee=q.uniforms,pe=this.materialSystem.createShaderMaterial({vertexShader:Et,fragmentShader:Gt,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Pe.SRC_ALPHA,dstRGB:Pe.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});pe.setUniform(yd({u_device_pixel_ratio:window.devicePixelRatio},ee));var Te=this.buildAttributes(),We=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:Te.instancedOffsets.length/2,vertexCount:6});We.setIndex([0,2,1,0,3,2]),We.setAttribute("position",Float32Array.from(Te.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),We.setAttribute("offset",Float32Array.from(Te.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),We.setAttribute("color",Float32Array.from(Te.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),We.setAttribute("size",Float32Array.from(Te.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),We.setAttribute("shape",Float32Array.from(Te.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),We.setAttribute("a_PickingColor",Float32Array.from(Te.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(pe),this.setGeometry(We)}},{key:"buildAttribute",value:function(q,Et,Gt){var ee,pe,Te,We;(ee=Et.instancedPickingColors).push.apply(ee,(0,$i.Z)(Ov(q.id||Gt))),Et.instancedShapes.push(Lv.indexOf(q.shape||"circle")),(pe=Et.instancedColors).push.apply(pe,(0,$i.Z)(q.color||[1,0,0,1])),(Te=Et.instancedOffsets).push.apply(Te,(0,$i.Z)(q.position||[0,0])),(We=Et.instancedSizes).push.apply(We,(0,$i.Z)(q.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var q=this,Et={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(Gt,ee){q.buildAttribute(Gt,Et,ee)}):this.buildAttribute(this.config,Et,0),Et}}]),R}(Qo),Nv),pd=E(Va.prototype,"materialSystem",[kd,dd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gd=E(Va.prototype,"geometrySystem",[Rd,Dv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=E(Va.prototype,"shaderModuleService",[vd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Va))||$h),kv,Rv,md,Fd,Ud,Eh,zd,Bv,Wd,Qh;function Jh(M,it){var R;if(typeof Symbol=="undefined"||M[Symbol.iterator]==null){if(Array.isArray(M)||(R=Gv(M))||it&&M&&typeof M.length=="number"){R&&(M=R);var Y=0,q=function(){};return{s:q,n:function(){return Y>=M.length?{done:!0}:{done:!1,value:M[Y++]}},e:function(Te){throw Te},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Et=!0,Gt=!1,ee;return{s:function(){R=M[Symbol.iterator]()},n:function(){var Te=R.next();return Et=Te.done,Te},e:function(Te){Gt=!0,ee=Te},f:function(){try{!Et&&R.return!=null&&R.return()}finally{if(Gt)throw ee}}}}function Gv(M,it){if(M){if(typeof M=="string")return xh(M,it);var R=Object.prototype.toString.call(M).slice(8,-1);if(R==="Object"&&M.constructor&&(R=M.constructor.name),R==="Map"||R==="Set")return Array.from(M);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return xh(M,it)}}function xh(M,it){(it==null||it>M.length)&&(it=M.length);for(var R=0,Y=new Array(it);R<it;R++)Y[R]=M[R];return Y}var Fp=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,Fv=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,qf=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,Up=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,zp=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,Uv=(kv=(0,O.b2)(),Rv=(0,O.f3)(b.RenderEngine),md=(0,O.f3)(b.ShaderModuleService),Fd=(0,O.f3)(b.ConfigService),kv(Ud=(Eh=(Qh=function(){function M(){(0,z.Z)(this,M),this.container=void 0,x(this,"engine",zd,this),x(this,"shaderModule",Bv,this),x(this,"configService",Wd,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,k.Z)(M,[{key:"init",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q,Et,Gt,ee,pe;return m().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:Up}),this.shaderModule.registerModule("uv.vert.main",{vs:zp}),this.shaderModule.registerModule("uv.frag.declaration",{fs:qf}),this.shaderModule.registerModule("map.frag.declaration",{fs:Fp}),this.shaderModule.registerModule("map.frag.main",{fs:Fv}),q=this.container.getAll(b.Systems),Et=this.configService.get(),!Et.canvas){We.next=30;break}return We.next=11,this.engine.init({canvas:Et.canvas,swapChainFormat:an.EV.BGRA8Unorm,antialiasing:!1});case 11:Gt=Jh(q),We.prev=12,Gt.s();case 14:if((ee=Gt.n()).done){We.next=21;break}if(pe=ee.value,!pe.initialize){We.next=19;break}return We.next=19,pe.initialize();case 19:We.next=14;break;case 21:We.next=26;break;case 23:We.prev=23,We.t0=We.catch(12),Gt.e(We.t0);case 26:return We.prev=26,Gt.f(),We.finish(26);case 29:this.inited=!0;case 30:case"end":return We.stop()}},Y,this,[[12,23,26,29]])}));function R(){return it.apply(this,arguments)}return R}()},{key:"render",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q,Et,Gt,ee,pe,Te,We,pr=arguments;return m().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:if(!(!this.inited||this.rendering)){Br.next=2;break}return Br.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(Ir){Ir()}),this.rendering=!0,this.engine.beginFrame(),q=this.container.getAll(b.Systems),Et=pr.length,Gt=new Array(Et),ee=0;ee<Et;ee++)Gt[ee]=pr[ee];pe=Jh(q),Br.prev=8,pe.s();case 10:if((Te=pe.n()).done){Br.next=17;break}if(We=Te.value,!We.execute){Br.next=15;break}return Br.next=15,We.execute(Gt);case 15:Br.next=10;break;case 17:Br.next=22;break;case 19:Br.prev=19,Br.t0=Br.catch(8),pe.e(Br.t0);case 22:return Br.prev=22,pe.f(),Br.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Br.stop()}},Y,this,[[8,19,22,25]])}));function R(){return it.apply(this,arguments)}return R}()},{key:"clear",value:function(R){var Y=this;return this.inited?this.engine.clear(R):this.pendings.unshift(function(){Y.engine.clear(R),Y.pendings.shift()}),this}},{key:"setSize",value:function(R){var Y=R.width,q=R.height,Et=this.engine.getCanvas();return this.size={width:Y,height:q},Et.width=Y,Et.height=q,this}},{key:"getSize",value:function(){return this.size}}]),M}(),Qh),zd=E(Eh.prototype,"engine",[Rv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bv=E(Eh.prototype,"shaderModule",[md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wd=E(Eh.prototype,"configService",[Fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eh))||Ud),zv,Wv,Vd,qh=(zv=(0,O.b2)(),zv(Wv=(Vd=function(){function M(){(0,z.Z)(this,M),this.entities=[]}return(0,k.Z)(M,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(R){return this.addEntity(R.getEntity()),this}},{key:"removeRenderable",value:function(R){return this.removeEntity(R.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(R){return this.entities.indexOf(R)===-1&&this.entities.push(R),this}},{key:"removeEntity",value:function(R){var Y=this.entities.indexOf(R);return this.entities.splice(Y,1),this}}]),M}(),Vd))||Wv),Vv,bd,Ed,jd=(Vv=(0,O.b2)(),Vv(bd=(Ed=function(){function M(){(0,z.Z)(this,M),this.cache={}}return(0,k.Z)(M,[{key:"get",value:function(R){return this.cache[R]}},{key:"set",value:function(R,Y){this.cache[R]=Y}}]),M}(),Ed))||bd),Xd,Yd,xd,Hd,wd,Zd,Kd,jv;function Xv(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function Yv(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Xv(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Xv(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}var Hv=(Xd=(0,O.b2)(),Yd=(0,O.f3)(jd),xd=(0,O.f3)(b.RenderEngine),Xd(Hd=(wd=(jv=function(){function M(){(0,z.Z)(this,M),x(this,"textureCache",Zd,this),x(this,"engine",Kd,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,k.Z)(M,[{key:"setConfig",value:function(R){this.config=R}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q=this;return m().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(!this.config.url){Gt.next=4;break}return Gt.abrupt("return",new Promise(function(ee,pe){var Te=q.textureCache.get(q.config.url);if(Te)ee(Te);else{var We=new Image;We.crossOrigin="Anonymous",We.src=q.config.url,We.onload=function(){var pr=q.engine.createTexture2D(Yv(Yv({},q.config),{},{data:We,width:We.width,height:We.height,flipY:!0}));q.textureCache.set(q.config.url,pr),q.texture=pr,q.loaded=!0,ee(pr)},We.onerror=function(){pe()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),Gt.abrupt("return",this.texture);case 7:case"end":return Gt.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()}]),M}(),jv),Zd=E(wd.prototype,"textureCache",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=E(wd.prototype,"engine",[xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wd))||Hd),$d,Zv,Kv,$v,Qd,Qv,Jd,Jv=($d=(0,O.b2)(),Zv=(0,O.f3)(b.Systems),Kv=(0,O.t6)(b.RendererSystem),$d($v=(Qd=(Jd=function(){function M(){(0,z.Z)(this,M),x(this,"rendererSystem",Qv,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,k.Z)(M,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(R){return this.camera=R,this}},{key:"setScene",value:function(R){return this.scene=R,this}},{key:"setViewport",value:function(R){return this.viewport=R,this}},{key:"setClearColor",value:function(R){return this.clearColor=R,this}},{key:"pick",value:function(R){return this.rendererSystem.pick(R,this)}}]),M}(),Jd),Qv=E(Qd.prototype,"rendererSystem",[Zv,Kv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qd))||$v),qd,wh,qv,tv,ev,_d;function Dl(M,it){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(M);it&&(Y=Y.filter(function(q){return Object.getOwnPropertyDescriptor(M,q).enumerable})),R.push.apply(R,Y)}return R}function tp(M){for(var it=1;it<arguments.length;it++){var R=arguments[it]!=null?arguments[it]:{};it%2?Dl(Object(R),!0).forEach(function(Y){(0,It.Z)(M,Y,R[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):Dl(Object(R)).forEach(function(Y){Object.defineProperty(M,Y,Object.getOwnPropertyDescriptor(R,Y))})}return M}var rv=(qd=(0,O.b2)(),wh=(0,O.f3)(b.ConfigService),qd(qv=(tv=(_d=function(){function M(){(0,z.Z)(this,M),x(this,"configService",ev,this),this.container=void 0}return(0,k.Z)(M,[{key:"getEngine",value:function(){var it=(0,y.Z)(m().mark(function Y(){var q,Et,Gt,ee;return m().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return q=this.container.get(b.RenderEngine),Et=this.configService.get(),Gt=Et.canvas,ee=Et.engineOptions,Te.next=4,q.init(tp({canvas:Gt||Bf(),swapChainFormat:an.EV.BGRA8Unorm,antialiasing:!1},ee));case 4:return Te.abrupt("return",q);case 5:case"end":return Te.stop()}},Y,this)}));function R(){return it.apply(this,arguments)}return R}()},{key:"getTransformComponent",value:function(R){var Y=this.container.get(b.TransformComponentManager);return Y.getComponentByEntity(R)}},{key:"getMeshComponent",value:function(R){var Y=this.container.get(b.MeshComponentManager);return Y.getComponentByEntity(R)}},{key:"setConfig",value:function(R){this.configService.set(R)}},{key:"setContainer",value:function(R){this.container=R}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return g()}},{key:"createScene",value:function(){return this.container.get(qh)}},{key:"createCamera",value:function(){return this.container.get(wu)}},{key:"createView",value:function(){return this.container.get(Jv)}},{key:"createRenderable",value:function(R,Y){var q=R?this.container.getNamed(b.Renderable,R):this.container.get(Qo),Et=g();return q.setConfig(Y||{}),q.setEntity(Et),q}},{key:"createGeometry",value:function(R,Y){var q=this.container.getNamed(b.Geometry,R),Et=g();return q.setConfig(Y||{}),q.setEntity(Et),q.getComponent()}},{key:"createMaterial",value:function(R,Y){var q=this.container.getNamed(b.Material,R),Et=g();return q.setConfig(Y||{}),q.setEntity(Et,R),q.getComponent()}},{key:"createTexture2D",value:function(R){var Y=this.container.get(Hv);return Y.setConfig(R),Y}},{key:"createBufferGeometry",value:function(R){var Y=this.container.getNamed(b.Systems,b.GeometrySystem);return Y.createBufferGeometry(R)}},{key:"createInstancedBufferGeometry",value:function(R){var Y=this.container.getNamed(b.Systems,b.GeometrySystem);return Y.createInstancedBufferGeometry(R)}},{key:"createShaderMaterial",value:function(R){var Y=this.container.getNamed(b.Systems,b.MaterialSystem);return Y.createShaderMaterial(R)}},{key:"createKernel",value:function(R){var Y=this.container.get(la);return typeof R=="string"?Y.setBundle(JSON.parse(R)):Y.setBundle(R),Y.init(),Y}},{key:"createRenderer",value:function(){var R=this.container.get(Uv);return R.container=this.container,R.init(),R}},{key:"destroy",value:function(){var R=this.container.getAll(b.Systems);R.forEach(function(Et){Et.tearDown&&Et.tearDown()});var Y=this.container.get(b.RenderEngine);Y.destroy();var q=this.container.get(b.InteractorService);q.destroy()}}],[{key:"create",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=Ql(),q=navigator.gpu?sa:Ar;Y.isBound(b.RenderEngine)||Y.bind(b.RenderEngine).to(q).inSingletonScope(),Y.bind(Uv).toSelf(),Y.bind(la).toSelf(),Y.bind(Qo).toSelf(),Y.bind(Jv).toSelf(),Y.bind(wu).toSelf(),Y.bind(qh).toSelf(),Y.bind(M).toSelf(),Y.bind(jd).toSelf(),Y.bind(Hv).toSelf(),Y.bind(b.Geometry).to(Vn).whenTargetNamed(Fs.BOX),Y.bind(b.Geometry).to(Je).whenTargetNamed(Fs.SPHERE),Y.bind(b.Geometry).to(_e).whenTargetNamed(Fs.PLANE),Y.bind(b.Geometry).to(ke).whenTargetNamed(Fs.MERGED),Y.bind(b.Material).to(jn).whenTargetNamed(cu.BASIC),Y.bind(b.Renderable).to(Gd).whenTargetNamed(Qo.POINT),Y.bind(b.Renderable).to(kp).whenTargetNamed(Qo.LINE),Y.bind(b.Renderable).to(Dp).whenTargetNamed(Qo.GRID);var Et=Y.get(M);return Et.setContainer(Y),Et.setConfig(R),Et}}]),M}(),_d),ev=E(tv.prototype,"configService",[wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tv))||qv)},91376:function(ae,w,S){"use strict";S.d(w,{ZP:function(){return I_}});var x={};S.r(x),S.d(x,{GADDI:function(){return Pn},Stack:function(){return na},breadthFirstSearch:function(){return Ee},connectedComponent:function(){return wt},cosineSimilarity:function(){return ot},default:function(){return Xa},depthFirstSearch:function(){return Ge},detectAllCycles:function(){return le},detectAllDirectedCycle:function(){return Ve},detectAllUndirectedCycle:function(){return qe},detectCycle:function(){return Le},detectDirectedCycle:function(){return oo},dijkstra:function(){return vr},findAllPath:function(){return yr},findShortestPath:function(){return Ae},floydWarshall:function(){return zr},getAdjMatrix:function(){return Vt},getDegree:function(){return rt},getInDegree:function(){return Nt},getNeighbors:function(){return Pt},getOutDegree:function(){return ft},iLouvain:function(){return G},kCore:function(){return st},kMeans:function(){return Yt},labelPropagation:function(){return un},louvain:function(){return Lt},minimumSpanningTree:function(){return Er},nodesCosineSimilarity:function(){return te},pageRank:function(){return Ft}});var z={};S.r(z),S.d(z,{Line:function(){return Ka},applyMatrix:function(){return Bi},compare:function(){return gs},distance:function(){return ga},floydWarshall:function(){return Qs},fractionToLine:function(){return $a},getAdjMatrix:function(){return ms},getBBoxBoundLine:function(){return Ga},getCircleCenterByPoints:function(){return Po},getCircleIntersectByPoint:function(){return so},getDegree:function(){return Ha},getEllipseIntersectByPoint:function(){return ia},getLineIntersect:function(){return es},getPointsCenter:function(){return wo},getRectIntersectByPoint:function(){return Wn},intersectBBox:function(){return ya},invertMatrix:function(){return rs},isPointInPolygon:function(){return La},isPointsOverlap:function(){return fi},isPolygonsIntersect:function(){return xo},itemIntersectByLine:function(){return ka},lerp:function(){return ba},lerpArray:function(){return Mi},move:function(){return Ai},pointLineDistance:function(){return to},pointLineSquareDist:function(){return Xo},pointRectSquareDist:function(){return ma},rotate:function(){return bs},scale:function(){return Ya},scaleMatrix:function(){return ys},squareDist:function(){return qa},translate:function(){return Eo}});var k={};S.r(k),S.d(k,{cloneBesidesImg:function(){return bu},getAnimateCfgWithCallback:function(){return eu},getBBox:function(){return Wi},getComboBBox:function(){return Sf},getLabelPosition:function(){return Fa},getLetterWidth:function(){return mu},getLoopCfgs:function(){return Ra},getTextSize:function(){return ic},plainCombosToTrees:function(){return wf},reconstructTree:function(){return _f},shouldRefreshEdge:function(){return tu},traverseTree:function(){return wa},traverseTreeUp:function(){return ro},truncateLabelByLength:function(){return Yc}});var E={};S.r(E),S.d(E,{catmullRomToBezier:function(){return Xn},fillPath:function(){return Of},fillPathByDiff:function(){return Aa},formatPath:function(){return Zo},intersection:function(){return Jc},parsePathArray:function(){return sc},parsePathString:function(){return Eu},pathToAbsolute:function(){return Af},pathToCurve:function(){return oc},rectPath:function(){return $c}});var N={};S.r(N),S.d(N,{easeBack:function(){return $i},easeBackIn:function(){return cf},easeBackInOut:function(){return $i},easeBackOut:function(){return Hf},easeBounce:function(){return ds},easeBounceIn:function(){return Xf},easeBounceInOut:function(){return Yf},easeBounceOut:function(){return ds},easeCircle:function(){return Go},easeCircleIn:function(){return Ua},easeCircleInOut:function(){return Go},easeCircleOut:function(){return hs},easeCubic:function(){return Qo},easeCubicIn:function(){return Iu},easeCubicInOut:function(){return Qo},easeCubicOut:function(){return Tc},easeElastic:function(){return Zf},easeElasticIn:function(){return fh},easeElasticInOut:function(){return zh},easeElasticOut:function(){return Zf},easeExp:function(){return Ws},easeExpIn:function(){return Pc},easeExpInOut:function(){return Ws},easeExpOut:function(){return ls},easeLinear:function(){return Tu},easePoly:function(){return fs},easePolyIn:function(){return Pu},easePolyInOut:function(){return fs},easePolyOut:function(){return uh},easeQuad:function(){return Ac},easeQuadIn:function(){return ko},easeQuadInOut:function(){return Ac},easeQuadOut:function(){return Cc},easeSin:function(){return Is},easeSinIn:function(){return Ro},easeSinInOut:function(){return Is},easeSinOut:function(){return Wf}});var T={};S.r(T),S.d(T,{calculationItemsBBox:function(){return Dd},cloneEvent:function(){return Mv},formatPadding:function(){return ld},isNaN:function(){return Bu},isViewportChanged:function(){return Cv},processParallelEdges:function(){return Kh},uniqueId:function(){return cd}});var m={};S.r(m),S.d(m,{getClosedSpline:function(){return Ed},getControlPoint:function(){return qh},getSpline:function(){return Vd},getStarPath:function(){return wd},paddedHull:function(){return Hd},pathToPoints:function(){return bd},pointsToPolygon:function(){return Vv},roundedHull:function(){return xd}});var y={};S.r(y),S.d(y,{defaultSubjectColors:function(){return _n}});var v={};S.r(v),S.d(v,{isForce:function(){return Dn}});var p={};S.r(p),S.d(p,{Base:function(){return ec},Circle:function(){return nm},Ellipse:function(){return am},Image:function(){return sm},Line:function(){return fm},Marker:function(){return hm},Path:function(){return $p},Polygon:function(){return xm},Polyline:function(){return _m},Rect:function(){return Am},Text:function(){return Im}});var g={};S.r(g),S.d(g,{Base:function(){return pf},Circle:function(){return Bm},Dom:function(){return Fm},Ellipse:function(){return zm},Image:function(){return Vm},Line:function(){return Xm},Marker:function(){return Hm},Path:function(){return Km},Polygon:function(){return Qm},Polyline:function(){return qm},Rect:function(){return i1},Text:function(){return f1}});var I={};S.r(I),S.d(I,{getColorSetsBySubjectColors:function(){return G1},getColorsWithSubjectColor:function(){return tg},mixColor:function(){return zo}});var _={};S.r(_),S.d(_,{arrayToTextureData:function(){return Q1},attributesToTextureData:function(){return $1},buildTextureData:function(){return H1},buildTextureDataWithOneEdgeAttr:function(){return Z1},buildTextureDataWithTwoEdgeAttr:function(){return K1},proccessToFunc:function(){return Y1},radialLayout:function(){return J1}});var C={};S.r(C),S.d(C,{gpuDetector:function(){return f0}});var O={};S.r(O),S.d(O,{assign:function(){return Th},default:function(){return G0},defaultI18n:function(){return ug},format:function(){return R0},parse:function(){return B0},setGlobalDateI18n:function(){return T0},setGlobalDateMasks:function(){return k0}});var b=S(98725),l=S(76405),K={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,l.each)(r,function(n,i){e.on(i,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,l.each)(t,function(n,i){e.off(i,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},Z=function(){function a(){}return a.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,l.clone)(K);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,l.each)(u,function(c,h){f[h]=(0,l.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,a.types[e]=n},a.hasBehavior=function(e){return!!a.types[e]},a.getBehavior=function(e){return a.types[e]},a.types={},a}(),X=Z,W=X,U=S(39889),et="*",at=function(){function a(){this._events={}}return a.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},a.prototype.once=function(e,t){return this.on(e,t,!0)},a.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=this._events[e]||[],o=this._events[et]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var h=u[c],A=h.callback,P=h.once;P&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),A.apply(t,r)}};s(i),s(o)},a.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,i=0;i<n;i++)r[i].callback===t&&(r.splice(i,1),n--,i--);r.length===0&&delete this._events[e]}return this},a.prototype.getEvents=function(){return this._events},a}(),J=at,nt=S(65316);function mt(a,e,t){var r=[0,0,0,0,0,0,0,0,0];return nt.fromTranslation(r,t),nt.multiply(a,r,e)}function Mt(a,e,t){var r=[0,0,0,0,0,0,0,0,0];return nt.fromRotation(r,t),nt.multiply(a,r,e)}function vt(a,e,t){var r=[0,0,0,0,0,0,0,0,0];return nt.fromScaling(r,t),nt.multiply(a,r,e)}function zt(a,e,t){return nt.multiply(a,t,e)}function re(a,e){for(var t=a?[].concat(a):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var i=e[r];switch(i[0]){case"t":mt(t,t,[i[1],i[2]]);break;case"s":vt(t,t,[i[1],i[2]]);break;case"r":Mt(t,t,i[1]);break;case"m":zt(t,t,i[1]);break;default:break}}return t}function Rt(a,e){return a[0]*e[1]-e[0]*a[1]}function At(a,e,t){var r=vec2.angle(a,e),n=Rt(a,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function Q(a,e,t){return t?(a[0]=e[1],a[1]=-1*e[0]):(a[0]=-1*e[1],a[1]=e[0]),a}var gt=function(e,t){var r=e.nodes,n=e.edges,i=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];i.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],h=o[f];!c&&c!==0||!h&&h!==0||(i[c][h]=1,t||(i[h][c]=1))}),i},Vt=gt,Ht=function(e,t){return e===t},It=function(){function a(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return a.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},a}(),de=function(){function a(e){e===void 0&&(e=Ht),this.head=null,this.tail=null,this.compare=e}return a.prototype.prepend=function(e){var t=new It(e,this.head);return this.head=t,this.tail||(this.tail=t),this},a.prototype.append=function(e){var t=new It(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},a.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},a.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,i=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},a.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},a.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},a.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},a.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},a.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},a.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},a}(),De=de,Ye=function(){function a(){this.linkedList=new De}return a.prototype.isEmpty=function(){return!this.linkedList.head},a.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},a.prototype.enqueue=function(e){this.linkedList.append(e)},a.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},a.prototype.toString=function(e){return this.linkedList.toString(e)},a}(),kt=Ye,Pt=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var i=function(f){return f.source===e};return n.filter(i).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},_t=function(e,t){return t.filter(function(r){return r.source===e})},jt=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},Qt=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function Tt(a){a===void 0&&(a={});var e=a,t=function(){},r=function(){var n={};return function(i){var o=i.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=a.allowTraversal||r,e.enter=a.enter||t,e.leave=a.leave||t,e}var Zt=function(e,t,r,n){n===void 0&&(n=!0);var i=Tt(r),o=new kt,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var A=o.dequeue();i.enter({current:A,previous:f}),Pt(A,u,n?"target":void 0).forEach(function(P){i.allowTraversal({previous:f,current:A,next:P})&&o.enqueue(P)}),i.leave({current:A,previous:f}),f=A};!o.isEmpty();)c()},Ee=Zt,dt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,i=n===void 0?[]:n,o=[],s={},u=[],f=function P(B){u.push(B),s[B.id]=!0;for(var V=Pt(B.id,i),$=function(ht){var xt=V[ht];if(!s[xt]){var Wt=r.filter(function(Jt){return Jt.id===xt});Wt.length>0&&P(Wt[0])}},ut=0;ut<V.length;++ut)$(ut)},c=0;c<r.length;c++){var h=r[c];if(!s[h.id]){f(h);for(var A=[];u.length>0;)A.push(u.pop());o.push(A)}}return o},bt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,i=n===void 0?[]:n,o=[],s={},u={},f={},c=[],h=0,A=function $(ut){u[ut.id]=h,f[ut.id]=h,h+=1,o.push(ut),s[ut.id]=!0;for(var ct=Pt(ut.id,i,"target").filter(function($t){return r.map(function(ve){return ve.id}).indexOf($t)>-1}),ht=function(ve){var Oe=ct[ve];if(!u[Oe]&&u[Oe]!==0){var xe=r.filter(function(Ze){return Ze.id===Oe});xe.length>0&&$(xe[0]),f[ut.id]=Math.min(f[ut.id],f[Oe])}else s[Oe]&&(f[ut.id]=Math.min(f[ut.id],u[Oe]))},xt=0;xt<ct.length;xt++)ht(xt);if(f[ut.id]===u[ut.id]){for(var Wt=[];o.length>0;){var Jt=o.pop();if(s[Jt.id]=!1,Wt.push(Jt),Jt===ut)break}Wt.length>0&&c.push(Wt)}},P=0,B=r;P<B.length;P++){var V=B[P];!u[V.id]&&u[V.id]!==0&&A(V)}return c};function wt(a,e){return e?bt(a):dt(a)}var D=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,i=e.edges,o=i===void 0?[]:i;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},rt=D,Nt=function(e,t){var r=D(e);return r[t]?D(e)[t].inDegree:0},ft=function(e,t){var r=D(e);return r[t]?D(e)[t].outDegree:0};function ie(a){a===void 0&&(a={});var e=a,t=function(){},r=function(){var n={};return function(i){var o=i.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=a.allowTraversal||r,e.enter=a.enter||t,e.leave=a.leave||t,e}function ge(a,e,t,r){r.enter({current:e,previous:t});var n=a.edges,i=n===void 0?[]:n;Pt(e,i,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&ge(a,o,e,r)}),r.leave({current:e,previous:t})}function Ge(a,e,t){ge(a,e,"",ie(t))}var Re=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,i={},o={},s={},u={};n.forEach(function(h){o[h.id]=h});for(var f={enter:function(A){var P=A.current,B=A.previous;if(s[P]){t={};for(var V=P,$=B;$!==P;)t[V]=$,V=$,$=i[$];t[V]=$}else s[P]=P,delete o[P],i[P]=B},leave:function(A){var P=A.current;u[P]=P,delete s[P]},allowTraversal:function(A){var P=A.next;return t?!1:!u[P]}};Object.keys(o).length;){var c=Object.keys(o)[0];Ge(e,c,f)}return t},qe=function(e,t,r){var n,i;r===void 0&&(r=!0);for(var o=[],s=wt(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var h=c[0],A=h.id,P=[h],B=(n={},n[A]=h,n),V=(i={},i[A]=new Set,i);P.length>0;)for(var $=P.pop(),ut=$.id,ct=Pt(ut,e.edges),ht=function(Jt){var $t,ve=ct[Jt],Oe=e.nodes.find(function(Zr){return Zr.id===ve});if(ve===ut)o.push(($t={},$t[ve]=$,$t));else if(!(ve in V))B[ve]=$,P.push(Oe),V[ve]=new Set([$]);else if(!V[ut].has(Oe)){for(var xe=!0,Ze=[Oe,$],ar=B[ut];V[ve].size&&!V[ve].has(ar)&&(Ze.push(ar),ar!==B[ar.id]);)ar=B[ar.id];if(Ze.push(ar),t&&r?(xe=!1,Ze.findIndex(function(Zr){return t.indexOf(Zr.id)>-1})>-1&&(xe=!0)):t&&!r&&Ze.findIndex(function(Zr){return t.indexOf(Zr.id)>-1})>-1&&(xe=!1),xe){for(var Fr={},rn=1;rn<Ze.length;rn+=1)Fr[Ze[rn-1].id]=Ze[rn];Ze.length&&(Fr[Ze[Ze.length-1].id]=Ze[0]),o.push(Fr)}V[ve].add($)}},xt=0;xt<ct.length;xt+=1)ht(xt)}return o},Ve=function(e,t,r){r===void 0&&(r=!0);for(var n=[],i=new Set,o=[],s=[],u={},f={},c=function(ar){for(var Fr=[ar];Fr.length>0;){var rn=Fr.pop();i.has(rn)&&(i.delete(rn),o[rn.id].forEach(function(Zr){Fr.push(Zr)}),o[rn.id].clear())}},h=function Ze(ar,Fr,rn){var Zr=!1;if(t&&r===!1&&t.indexOf(ar.id)>-1)return Zr;n.push(ar),i.add(ar);for(var Nr=rn[ar.id],yn=0;yn<Nr.length;yn+=1){var dn=u[Nr[yn]];if(dn===Fr){for(var Lr={},Yr=1;Yr<n.length;Yr+=1)Lr[n[Yr-1].id]=n[Yr];n.length&&(Lr[n[n.length-1].id]=n[0]),s.push(Lr),Zr=!0}else i.has(dn)||Ze(dn,Fr,rn)&&(Zr=!0)}if(Zr)c(ar);else for(var yn=0;yn<Nr.length;yn+=1){var dn=u[Nr[yn]];o[dn.id].has(ar)||o[dn.id].add(ar)}return n.pop(),Zr},A=e.nodes,P=A===void 0?[]:A,B=0;B<P.length;B+=1){var V=P[B],$=V.id;f[$]=B,u[B]=V}if(t&&r)for(var ut=function(ar){var Fr=t[ar];f[P[ar].id]=f[Fr],f[Fr]=0,u[0]=P.find(function(rn){return rn.id===Fr}),u[f[P[ar].id]]=P[ar]},B=0;B<t.length;B++)ut(B);for(var ct=function(ar){for(var Fr,rn,Zr=1/0,Nr=0;Nr<ar.length;Nr+=1)for(var yn=ar[Nr],dn=0;dn<yn.length;dn++){var Lr=f[yn[dn].id];Lr<Zr&&(Zr=Lr,rn=Nr)}for(var Yr=ar[rn],on=[],Nr=0;Nr<Yr.length;Nr+=1){var sn=Yr[Nr];on[sn.id]=[];for(var Sn=0,Ln=Pt(sn.id,e.edges,"target").filter(function(Hi){return Yr.map(function(ki){return ki.id}).indexOf(Hi)>-1});Sn<Ln.length;Sn++){var ti=Ln[Sn];ti===sn.id&&!(r===!1&&t.indexOf(sn.id)>-1)?s.push((Fr={},Fr[sn.id]=sn,Fr)):on[sn.id].push(f[ti])}}return{component:Yr,adjList:on,minIdx:Zr}},ht=0;ht<P.length;){var xt=P.filter(function(Ze){return f[Ze.id]>=ht}),Wt=bt({nodes:xt,edges:e.edges}).filter(function(Ze){return Ze.length>1});if(Wt.length===0)break;var Jt=ct(Wt),$t=Jt.minIdx,ve=Jt.adjList,Oe=Jt.component;if(Oe.length>1){Oe.forEach(function(Ze){o[Ze.id]=new Set});var xe=u[$t];if(t&&r&&t.indexOf(xe.id)===-1)return s;h(xe,xe,ve),ht=$t+1}else break}return s},le=function(e,t,r,n){return n===void 0&&(n=!0),t?Ve(e,r,n):qe(e,r,n)},Le=Re,je=function(e,t,r){for(var n=1/0,i,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],i=t[o])}return i},Be=function(e,t,r,n){var i=e.nodes,o=i===void 0?[]:i,s=e.edges,u=s===void 0?[]:s,f=[],c={},h={},A={};o.forEach(function(ht,xt){var Wt=ht.id;f.push(Wt),h[Wt]=1/0,Wt===t&&(h[Wt]=0)});for(var P=o.length,B=function(xt){var Wt=je(h,o,c),Jt=Wt.id;if(c[Jt]=!0,h[Jt]===1/0)return"continue";var $t=[];r?$t=_t(Jt,u):$t=jt(Jt,u),$t.forEach(function(ve){var Oe=ve.target,xe=ve.source,Ze=Oe===Jt?xe:Oe,ar=n&&ve[n]?ve[n]:1;h[Ze]>h[Wt.id]+ar?(h[Ze]=h[Wt.id]+ar,A[Ze]=[Wt.id]):h[Ze]===h[Wt.id]+ar&&A[Ze].push(Wt.id)})},V=0;V<P;V++)B(V);A[t]=[t];var $={};for(var ut in h)h[ut]!==1/0&&or(t,ut,A,$);var ct={};for(var ut in $)ct[ut]=$[ut][0];return{length:h,path:ct,allPath:$}},vr=Be;function or(a,e,t,r){if(a===e)return[a];if(r[e])return r[e];for(var n=[],i=0,o=t[e];i<o.length;i++){var s=o[i],u=or(a,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var h=c[f];(0,l.isArray)(h)?n.push((0,U.__spreadArray)((0,U.__spreadArray)([],h,!0),[e],!1)):n.push([h,e])}}return r[e]=n,r[e]}var Ae=function(e,t,r,n,i){var o=vr(e,t,n,i),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},yr=function(e,t,r,n){var i;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(i={},i[t]=!0,i),c=[],h=[],A=n?Pt(t,s,"target"):Pt(t,s);for(c.push(A);u.length>0&&c.length>0;){var P=c[c.length-1];if(P.length){var B=P.shift();B&&(u.push(B),f[B]=!0,A=n?Pt(B,s,"target"):Pt(B,s),c.push(A.filter(function(ut){return!f[ut]})))}else{var V=u.pop();f[V]=!1,c.pop();continue}if(u[u.length-1]===r){var $=u.map(function(ct){return ct});h.push($);var V=u.pop();f[V]=!1,c.pop()}}return h},Cr=function(e,t){for(var r=Vt(e,t),n=[],i=r.length,o=0;o<i;o+=1){n[o]=[];for(var s=0;s<i;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<i;u+=1)for(var o=0;o<i;o+=1)for(var s=0;s<i;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},zr=Cr,Mr=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var i=e.nodes,o=i===void 0?[]:i,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(xt,Wt){var Jt=Qt();xt.clusterId=Jt,f[Jt]={id:Jt,nodes:[xt]},c[xt.id]={node:xt,idx:Wt}});var h=Vt(e,t),A=[],P={};h.forEach(function(xt,Wt){var Jt=0,$t=o[Wt].id;P[$t]={},xt.forEach(function(ve,Oe){if(ve){Jt+=ve;var xe=o[Oe].id;P[$t][xe]=ve}}),A.push(Jt)});for(var B=0,V=function(){var Wt=!1;if(o.forEach(function(Jt){var $t={};Object.keys(P[Jt.id]).forEach(function(Zr){var Nr=P[Jt.id][Zr],yn=c[Zr].node,dn=yn.clusterId;$t[dn]||($t[dn]=0),$t[dn]+=Nr});var ve=-1/0,Oe=[];if(Object.keys($t).forEach(function(Zr){ve<$t[Zr]?(ve=$t[Zr],Oe=[Zr]):ve===$t[Zr]&&Oe.push(Zr)}),!(Oe.length===1&&Oe[0]===Jt.clusterId)){var xe=Oe.indexOf(Jt.clusterId);if(xe>=0&&Oe.splice(xe,1),Oe&&Oe.length){Wt=!0;var Ze=f[Jt.clusterId],ar=Ze.nodes.indexOf(Jt);Ze.nodes.splice(ar,1);var Fr=Math.floor(Math.random()*Oe.length),rn=f[Oe[Fr]];rn.nodes.push(Jt),Jt.clusterId=rn.id}}}),!Wt)return"break";B++};B<n;){var $=V();if($==="break")break}Object.keys(f).forEach(function(xt){var Wt=f[xt];(!Wt.nodes||!Wt.nodes.length)&&delete f[xt]});var ut=[],ct={};u.forEach(function(xt){var Wt=xt.source,Jt=xt.target,$t=xt[r]||1,ve=c[Wt].node.clusterId,Oe=c[Jt].node.clusterId,xe="".concat(ve,"---").concat(Oe);if(ct[xe])ct[xe].weight+=$t,ct[xe].count++;else{var Ze={source:ve,target:Oe,weight:$t,count:1};ct[xe]=Ze,ut.push(Ze)}});var ht=[];return Object.keys(f).forEach(function(xt){ht.push(f[xt])}),{clusters:ht,clusterEdges:ut}},un=Mr,hn=function(){function a(e){this.arr=e}return a.prototype.getArr=function(){return this.arr||[]},a.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new a(r);if(!(r!=null&&r.length))return new a(this.arr);if(this.arr.length===r.length){var n=[];for(var i in this.arr)n[i]=this.arr[i]+r[i];return new a(n)}},a.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new a(r);if(!(r!=null&&r.length))return new a(this.arr);if(this.arr.length===r.length){var n=[];for(var i in this.arr)n[i]=this.arr[i]-r[i];return new a(n)}},a.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new a(t)},a.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new a(e)},a.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var i in this.arr)n+=Math.pow(this.arr[i]-e.arr[i],2);return n}},a.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var i in this.arr)n+=Math.pow(this.arr[i]-e.arr[i],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},a.prototype.normalize=function(){var e=[],t=(0,l.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var i in this.arr)e[i]=(this.arr[i]-n)/(r-n);return new a(e)},a.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},a.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var i in this.arr)n+=this.arr[i]*e.arr[i];return n}else console.error("The two vectors are unequal in length.")},a.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},a}(),Un=hn,nn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,vn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,ln=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(i){i.properties&&Object.keys(i.properties).forEach(function(o){if(o==="id"||!"".concat(i.properties[o]).match(nn)&&!"".concat(i.properties[o]).match(vn)&&isNaN(Number(i.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(i,o){return r[o]-r[i]});return n.length<t?n:n.slice(0,t)},pn=function(e,t){return t.map(function(r){if(e.hasOwnProperty(r)){if(!isNaN(Number(e[r])))return Number(e[r]);if(e[r].match(nn)||e[r].match(vn))return Number(Date.parse(new Date(e[r])))/1e3}return 0})},Bn=function(e){for(var t=ln(e),r=[],n=0;n<e.length;n++)r[n]=pn(e[n].properties,t);return r},Pe=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},Cn={getAllSortProperties:ln,getPropertyWeight:Bn,getAllProperties:Pe},Gn;(function(a){a.EuclideanDistance="euclideanDistance"})(Gn||(Gn={}));var bi=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,l.uniq)(n));var i={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(i[o]=(0,l.uniq)(s))}),i},zn=function(e,t,r){var n=bi(e,t,r),i=[];return Object.keys(n).length&&e.forEach(function(o,s){var u=[];if(Object.keys(n).length===1){var f=Object.keys(n)[0],c=n[f];c.every(function(h){return!isNaN(Number(h))})&&(u=[o[f]])}else Object.keys(n).forEach(function(h){for(var A=o[h],P=n[h],B=P.findIndex(function(ut){return A===ut}),V=[],$=0;$<P.length;$++)$===B?V.push(1):V.push(0);u=u.concat(V)});i[s]=u}),i},Hn=function(e,t,r,n){r===void 0&&(r=Gn.EuclideanDistance);var i=0;switch(r){case Gn.EuclideanDistance:i=new Un(e).euclideanDistance(new Un(t));break;default:break}return i},hi={getAllKeyValueMap:bi,oneHot:zn,getDistance:Hn},Si=function(e,t,r,n){for(var i=t.length,o=2*n,s=0,u=0;u<i;u++)for(var f=e[u].clusterId,c=0;c<i;c++){var h=e[c].clusterId;if(f===h){var A=t[u][c]||0,P=r[u]||0,B=r[c]||0;s+=A-P*B/o}}return s*=1/o,s},pi=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new Un([]),i=0;i<r;i++)n=n.add(new Un(t[i]));var o=n.avg(r);o.normalize();for(var s=0,i=0;i<r;i++){var u=new Un(t[i]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var i=0;i<r;i++){var u=new Un(t[i]);e[i].clusterInertial=0;for(var h=0;h<r;h++){if(i===h){c[i][h]=0;continue}var A=new Un(t[h]);c[i][h]=u.squareEuclideanDistance(A),e[i].clusterInertial+=c[i][h]}}for(var P=0,B=2*r*s,i=0;i<r;i++)for(var V=e[i].clusterId,h=0;h<r;h++){var $=e[h].clusterId;if(!(i===h||V!==$)){var ut=e[i].clusterInertial*e[h].clusterInertial/Math.pow(B,2)-c[i][h]/B;P+=ut}}return Number(P.toFixed(4))},Dt=function(e,t,r,n,i,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),i===void 0&&(i=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,h=c===void 0?[]:c,A=e.edges,P=A===void 0?[]:A,B=[];if(i){h.forEach(function(Lr,Yr){Lr.properties=Lr.properties||{},Lr.originIndex=Yr});var V=[];h.every(function(Lr){return Lr.hasOwnProperty("nodeType")})&&(V=Array.from(new Set(h.map(function(Lr){return Lr.nodeType}))),h.forEach(function(Lr){Lr.properties.nodeType=V.findIndex(function(Yr){return Yr===Lr.nodeType})}));var $=Pe(h,o);B=zn($,s,u)}var ut=1,ct={},ht={};h.forEach(function(Lr,Yr){var on=String(ut++);Lr.clusterId=on,ct[on]={id:on,nodes:[Lr]},ht[Lr.id]={node:Lr,idx:Yr}});var xt=Vt(e,t),Wt=[],Jt={},$t=0;xt.forEach(function(Lr,Yr){var on=0,sn=h[Yr].id;Jt[sn]={},Lr.forEach(function(Sn,Ln){if(Sn){on+=Sn;var ti=h[Ln].id;Jt[sn][ti]=Sn,$t+=Sn}}),Wt.push(on)}),$t/=2;for(var ve=1/0,Oe=1/0,xe=0,Ze=[],ar={};;){i&&h.every(function(Lr){return Lr.hasOwnProperty("properties")})?ve=Si(h,xt,Wt,$t)+pi(h,B)*f:ve=Si(h,xt,Wt,$t),xe===0&&(Oe=ve,Ze=h,ar=ct);var Fr=ve>0&&ve>Oe&&ve-Oe<n;if(ve>Oe&&(Ze=h.map(function(Lr){return{node:Lr,clusterId:Lr.clusterId}}),ar=(0,l.clone)(ct),Oe=ve),Fr||xe>100)break;xe++,Object.keys(ct).forEach(function(Lr){var Yr=0;P.forEach(function(on){var sn=on.source,Sn=on.target,Ln=ht[sn].node.clusterId,ti=ht[Sn].node.clusterId;(Ln===Lr&&ti!==Lr||ti===Lr&&Ln!==Lr)&&(Yr=Yr+(on[r]||1))}),ct[Lr].sumTot=Yr}),h.forEach(function(Lr,Yr){var on=ct[Lr.clusterId],sn=0,Sn,Ln=Wt[Yr]/(2*$t),ti=0,li=on.nodes;li.forEach(function(Co){var Ao=ht[Co.id].idx;ti+=xt[Yr][Ao]||0});var Hi=ti-on.sumTot*Ln,ki=li.filter(function(Co){return Co.id!==Lr.id}),Zi=[];ki.forEach(function(Co,Ao){Zi[Ao]=B[Co.originIndex]});var qi=pi(ki,B)*f,Ca=Jt[Lr.id];if(Object.keys(Ca).forEach(function(Co){var Ao=ht[Co].node,Fu=Ao.clusterId;if(Fu!==Lr.clusterId){var vs=ct[Fu],Hs=vs.nodes;if(!(!Hs||!Hs.length)){var _i=0;Hs.forEach(function(Ti){var Oi=ht[Ti.id].idx;_i+=xt[Yr][Oi]||0});var ji=_i-vs.sumTot*Ln,mi=Hs.concat([Lr]),Xi=[];mi.forEach(function(Ti,Oi){Xi[Oi]=B[Ti.originIndex]});var ua=pi(mi,B)*f,Yn=ji-Hi;i&&(Yn=ji+ua-(Hi+qi)),Yn>sn&&(sn=Yn,Sn=vs)}}}),sn>0){Sn.nodes.push(Lr);var pa=Lr.clusterId;Lr.clusterId=Sn.id;var mf=on.nodes.indexOf(Lr);on.nodes.splice(mf,1);var Mo=0,bf=0;P.forEach(function(Co){var Ao=Co.source,Fu=Co.target,vs=ht[Ao].node.clusterId,Hs=ht[Fu].node.clusterId;(vs===Sn.id&&Hs!==Sn.id||Hs===Sn.id&&vs!==Sn.id)&&(Mo=Mo+(Co[r]||1)),(vs===pa&&Hs!==pa||Hs===pa&&vs!==pa)&&(bf=bf+(Co[r]||1))}),Sn.sumTot=Mo,on.sumTot=bf}})}var rn={},Zr=0;Object.keys(ar).forEach(function(Lr){var Yr=ar[Lr];if(!Yr.nodes||!Yr.nodes.length){delete ar[Lr];return}var on=String(Zr+1);on!==Lr&&(Yr.id=on,Yr.nodes=Yr.nodes.map(function(sn){return{id:sn.id,clusterId:on}}),ar[on]=Yr,rn[Lr]=on,delete ar[Lr],Zr++)}),Ze.forEach(function(Lr){var Yr=Lr.node,on=Lr.clusterId;Yr&&(Yr.clusterId=on,Yr.clusterId&&rn[Yr.clusterId]&&(Yr.clusterId=rn[Yr.clusterId]))});var Nr=[],yn={};P.forEach(function(Lr){var Yr=Lr.source,on=Lr.target,sn=Lr[r]||1,Sn=ht[Yr].node.clusterId,Ln=ht[on].node.clusterId;if(!(!Sn||!Ln)){var ti="".concat(Sn,"---").concat(Ln);if(yn[ti])yn[ti].weight+=sn,yn[ti].count++;else{var li={source:Sn,target:Ln,weight:sn,count:1};yn[ti]=li,Nr.push(li)}}});var dn=[];return Object.keys(ar).forEach(function(Lr){dn.push(ar[Lr])}),{clusters:dn,clusterEdges:Nr}},Lt=Dt,H=function(e,t,r,n,i,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),i===void 0&&(i=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Lt(e,t,r,n,!0,i,o,s,u)},G=H,F=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,l.clone)(e),i=n.nodes,o=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,f=function(){var A=rt({nodes:o,edges:u}),P=Object.keys(A);P.sort(function($,ut){var ct,ht;return((ct=A[$])===null||ct===void 0?void 0:ct.degree)-((ht=A[ut])===null||ht===void 0?void 0:ht.degree)});var B=P[0];if(!o.length||((r=A[B])===null||r===void 0?void 0:r.degree)>=t)return"break";var V=o.findIndex(function($){return $.id===B});o.splice(V,1),u=u.filter(function($){return!($.source===B||$.target===B)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},st=F,Bt=function(e,t,r){var n=[];switch(e){case Gn.EuclideanDistance:n=t[r];break;default:n=[];break}return n},Kt=function(e,t,r,n,i,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),i===void 0&&(i=["id"]),o===void 0&&(o=Gn.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,h={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===Gn.EuclideanDistance&&!u.every(function(on){return on.hasOwnProperty(r)}))return h;var A=[],P=[];if(o===Gn.EuclideanDistance&&(A=Pe(u,r),P=zn(A,n,i)),!P.length)return h;for(var B=(0,l.uniq)(P.map(function(on){return on.join("")})),V=Math.min(t,u.length,B.length),$=0;$<u.length;$++)u[$].originIndex=$;for(var ut=[],ct=[],ht=[],$=0;$<V;$++)if($===0){var xt=Math.floor(Math.random()*u.length);switch(o){case Gn.EuclideanDistance:ut[$]=P[xt];break;default:ut[$]=[];break}ct.push(xt),ht[$]=[u[xt]],u[xt].clusterId=String($)}else{for(var Wt=-1/0,Jt=0,$t=function(Sn){if(!ct.includes(Sn)){for(var Ln=0,ti=0;ti<ut.length;ti++){var li=0;switch(o){case Gn.EuclideanDistance:li=Hn(P[u[Sn].originIndex],ut[ti],o);break;default:break}Ln+=li}var Hi=Ln/ut.length;Hi>Wt&&!ut.find(function(ki){return(0,l.isEqual)(ki,Bt(o,P,u[Sn].originIndex))})&&(Wt=Hi,Jt=Sn)}},ve=0;ve<u.length;ve++)$t(ve);ut[$]=Bt(o,P,Jt),ct.push(Jt),ht[$]=[u[Jt]],u[Jt].clusterId=String($)}for(var Oe=0;;){for(var $=0;$<u.length;$++){var xe=0,Ze=1/0;if(!(Oe===0&&ct.includes($))){for(var ar=0;ar<ut.length;ar++){var Fr=0;switch(o){case Gn.EuclideanDistance:Fr=Hn(P[$],ut[ar],o);break;default:break}Fr<Ze&&(Ze=Fr,xe=ar)}if(u[$].clusterId!==void 0)for(var rn=ht[Number(u[$].clusterId)].length-1;rn>=0;rn--)ht[Number(u[$].clusterId)][rn].id===u[$].id&&ht[Number(u[$].clusterId)].splice(rn,1);u[$].clusterId=String(xe),ht[xe].push(u[$])}}for(var Zr=!1,$=0;$<ht.length;$++){for(var Nr=ht[$],yn=new Un([]),ar=0;ar<Nr.length;ar++)yn=yn.add(new Un(P[Nr[ar].originIndex]));var dn=yn.avg(Nr.length);dn.equal(new Un(ut[$]))||(Zr=!0,ut[$]=dn.getArr())}if(Oe++,u.every(function(on){return on.clusterId!==void 0})&&Zr||Oe>=1e3)break}var Lr=[],Yr={};return c.forEach(function(on){var sn,Sn,Ln=on.source,ti=on.target,li=(sn=u.find(function(qi){return qi.id===Ln}))===null||sn===void 0?void 0:sn.clusterId,Hi=(Sn=u.find(function(qi){return qi.id===ti}))===null||Sn===void 0?void 0:Sn.clusterId,ki="".concat(li,"---").concat(Hi);if(Yr[ki])Yr[ki].count++;else{var Zi={source:li,target:Hi,count:1};Yr[ki]=Zi,Lr.push(Zi)}}),{clusters:ht,clusterEdges:Lr}},Yt=Kt,he=function(e,t){var r=new Un(t),n=r.norm2(),i=new Un(e),o=i.norm2(),s=r.dot(i),u=n*o,f=u?s/u:0;return f},ot=he,yt=function(e,t,r,n,i){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),i===void 0&&(i=[]);var o=(0,l.clone)(e.filter(function(A){return A.id!==t.id})),s=e.findIndex(function(A){return A.id===t.id}),u=Pe(e,r),f=zn(u,n,i),c=f[s],h=[];return o.forEach(function(A,P){if(A.id!==t.id){var B=f[P],V=ot(B,c);h.push(V),A.cosineSimilarity=V}}),o.sort(function(A,P){return P.cosineSimilarity-A.cosineSimilarity}),{allCosineSimilarity:h,similarNodes:o}},te=yt,Me=function(){function a(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return a.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},a.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},a.prototype.connected=function(e,t){return this.find(e)===this.find(t)},a}(),Se=Me,er=function(e,t){return e-t},sr=function(){function a(e){e===void 0&&(e=er),this.compareFn=e,this.list=[]}return a.prototype.getLeft=function(e){return 2*e+1},a.prototype.getRight=function(e){return 2*e+2},a.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},a.prototype.isEmpty=function(){return this.list.length<=0},a.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},a.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},a.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},a.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},a.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),i=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:i!==null&&i<o&&this.compareFn(this.list[r],this.list[i])>0&&(r=i),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},a}(),ye=sr,Fe=function(e,t){var r=[],n=e.nodes,i=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(i.length===0)return r;var u=i[0],f=new Set;f.add(u);var c=function($,ut){return t?$.weight-ut.weight:0},h=new ye(c);for(jt(u.id,s).forEach(function(V){h.insert(V)});!h.isEmpty();){var A=h.delMin(),P=A.source,B=A.target;f.has(P)&&f.has(B)||(r.push(A),f.has(P)||(f.add(P),jt(P,s).forEach(function(V){h.insert(V)})),f.has(B)||(f.add(B),jt(B,s).forEach(function(V){h.insert(V)})))}return r},tr=function(e,t){var r=[],n=e.nodes,i=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(i.length===0)return r;var u=s.map(function(P){return P});t&&u.sort(function(P,B){return P.weight-B.weight});for(var f=new Se(i.map(function(P){return P.id}));u.length>0;){var c=u.shift(),h=c.source,A=c.target;f.connected(h,A)||(r.push(c),f.union(h,A))}return r},Sr=function(e,t,r){var n={prim:Fe,kruskal:tr};return r?n[r](e,t):tr(e,t)},Er=Sr,me=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,i=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,h=u.length,A,P={},B={},V=0;V<h;++V){var $=u[V],ut=$.id;P[ut]=1/h,B[ut]=1/h}for(var ct=rt(e);o>0&&n>t;){i=0;for(var V=0;V<h;++V){var $=u[V],ut=$.id;if(A=0,ct[$.id].inDegree===0)P[ut]=0;else{for(var ht=Pt(ut,c,"source"),xt=0;xt<ht.length;++xt){var Wt=ht[xt],Jt=ct[Wt].outDegree;Jt>0&&(A+=B[Wt]/Jt)}P[ut]=r*A,i+=P[ut]}}i=(1-i)/h,n=0;for(var V=0;V<h;++V){var $=u[V],ut=$.id;A=P[ut]+i,n+=Math.abs(A-B[ut]),B[ut]=A}o-=1}return B},Ft=me,ne=-1,Ie=-1,Ce="-1",Ue="-1",Xe=-1,Wr="-1",$r=function(){function a(e,t,r,n){e===void 0&&(e=ne),t===void 0&&(t=Ie),r===void 0&&(r=Ie),n===void 0&&(n=Ce),this.id=e,this.from=t,this.to=r,this.label=n}return a}(),mn=function(){function a(e,t){e===void 0&&(e=Ie),t===void 0&&(t=Ue),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return a.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},a}(),Nn=function(){function a(e,t,r){e===void 0&&(e=Ie),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return a.prototype.getNodeNum=function(){return this.nodes.length},a.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new mn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},a.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var i=new $r(e,t,r,n);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(i),!this.directed){var o=new $r(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},a}(),kn=function(){function a(e,t,r,n,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Ue,edgeLabel:n||Ce,nodeLabel2:i||Ue}}return a.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},a.prototype.notEqualTo=function(e){return!this.equalTo(e)},a}(),Jn=function(){function a(){this.rmpath=[],this.dfsEdgeList=[]}return a.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},a.prototype.notEqualTo=function(e){return!this.equalTo(e)},a.prototype.pushBack=function(e,t,r,n,i){return this.dfsEdgeList.push(new kn(e,t,r,n,i)),this.dfsEdgeList},a.prototype.toGraph=function(e,t){e===void 0&&(e=Xe),t===void 0&&(t=!1);var r=new Nn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var i=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==Ue&&r.addNode(i,u),c!==Ue&&r.addNode(o,c),u!==Ue&&c!==u&&r.addEdge(void 0,i,o,f)}),r},a.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],i=n.fromNode,o=n.toNode;i<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=i)}return this.rmpath},a.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},a}(),ri=function(){function a(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return a.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},a.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},a}(),Ri=function(){function a(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,i=e.minNodeNum,o=i===void 0?1:i,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,h=e.directed,A=h===void 0?!1:h,P=e.verbose,B=P===void 0?!1:P;this.graphs=t,this.dfsCode=new Jn,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=A,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=B,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return a.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],i=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=i[o.to].label)&&n.push(o)}),n},a.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var i=e.nodeMap,o=i[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(i[t.from].label<i[r.to].label||i[t.from].label===i[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&i[t.to].label<=i[r.to].label)return c}}return null},a.prototype.findForwardPureEdges=function(e,t,r,n){for(var i=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],h=e.nodeMap[c.to];r<=h.label&&!n.hasNode(h)&&i.push(c)}return i},a.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var i=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,h=0;h<c;h++){var A=f[h],P=o[A.to].label;t.to===A.to||r>P||n.hasNode(o[A.to])||(t.label<A.label||t.label===A.label&&s<=P)&&i.push(A)}return i},a.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},a.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],i=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:i,edgeLabel:o,nodeLabel2:s};return}(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:s})}),t},a.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(Xe,r),i=n.nodeMap,o=new Jn,s={};n.nodes.forEach(function(h){var A=e.findForwardRootEdges(n,h);A.forEach(function(P){var B=i[P.to],V="".concat(h.label,"-").concat(P.label,"-").concat(B.label);s[V]||(s[V]={projected:[],nodeLabel1:h.label,edgeLabel:P.label,nodeLabel2:B.label});var $={graphId:n.id,edge:P,preNode:null};s[V].projected.push($)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new kn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function h(A){for(var P=o.buildRmpath(),B=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,V=o.dfsEdgeList[P[0]].toNode,$={},ut=!1,ct=0,ht=r?-1:0,xt=function(yn){if(ut)return"break";A.forEach(function(dn){var Lr=new ri(dn),Yr=e.findBackwardEdge(n,Lr.edges[P[yn]],Lr.edges[P[0]],Lr);Yr&&($[Yr.label]||($[Yr.label]={projected:[],edgeLabel:Yr.label}),$[Yr.label].projected.push({graphId:n.id,edge:$,preNode:dn}),ct=o.dfsEdgeList[P[yn]].fromNode,ut=!0)})},Wt=P.length-1;Wt>ht;Wt--){var Jt=xt(Wt);if(Jt==="break")break}if(ut){var $t=e.findMinLabel($);o.dfsEdgeList.push(new kn(V,ct,Ue,$t.edgeLabel,Ue));var ve=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[ve]!==o.dfsEdgeList[ve]?!1:h($[$t.edgeLabel].projected)}var Oe={};ut=!1;var xe=0;A.forEach(function(Nr){var yn=new ri(Nr),dn=e.findForwardPureEdges(n,yn.edges[P[0]],B,yn);dn.length>0&&(ut=!0,xe=V,dn.forEach(function(Lr){var Yr="".concat(Lr.label,"-").concat(i[Lr.to].label);Oe[Yr]||(Oe[Yr]={projected:[],edgeLabel:Lr.label,nodeLabel2:i[Lr.to].label}),Oe[Yr].projected.push({graphId:n.id,edge:Lr,preNode:Nr})}))});for(var Ze=P.length,ar=function(yn){if(ut)return"break";var dn=P[yn];A.forEach(function(Lr){var Yr=new ri(Lr),on=e.findForwardRmpathEdges(n,Yr.edges[dn],B,Yr);on.length>0&&(ut=!0,xe=o.dfsEdgeList[dn].fromNode,on.forEach(function(sn){var Sn="".concat(sn.label,"-").concat(i[sn.to].label);Oe[Sn]||(Oe[Sn]={projected:[],edgeLabel:sn.label,nodeLabel2:i[sn.to].label}),Oe[Sn].projected.push({graphId:n.id,edge:sn,preNode:Lr})}))})},Wt=0;Wt<Ze;Wt++){var Fr=ar(Wt);if(Fr==="break")break}if(!ut)return!0;var rn=e.findMinLabel(Oe);o.dfsEdgeList.push(new kn(xe,V+1,Ue,rn.edgeLabel,rn.nodeLabel2));var Zr=o.dfsEdgeList.length-1;return t.dfsEdgeList[Zr]!==o.dfsEdgeList[Zr]?!1:h(Oe["".concat(rn.edgeLabel,"-").concat(rn.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},a.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,l.clone)(e))}},a.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[i[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var h=t.graphs[c.graphId],A=h.nodeMap,P=new ri(c),B=i.length-1;B>=0;B--){var V=t.findBackwardEdge(h,P.edges[i[B]],P.edges[i[0]],P);if(V){var $="".concat(t.dfsCode.dfsEdgeList[i[B]].fromNode,"-").concat(V.label);f[$]||(f[$]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[i[B]].fromNode,edgeLabel:V.label}),f[$].projected.push({graphId:c.graphId,edge:V,preNode:c})}}if(!(n>=t.maxNodeNum)){var ut=t.findForwardPureEdges(h,P.edges[i[0]],s,P);ut.forEach(function(ht){var xt="".concat(o,"-").concat(ht.label,"-").concat(A[ht.to].label);u[xt]||(u[xt]={projected:[],fromNodeId:o,edgeLabel:ht.label,nodeLabel2:A[ht.to].label}),u[xt].projected.push({graphId:c.graphId,edge:ht,preNode:c})});for(var ct=function(xt){var Wt=t.findForwardRmpathEdges(h,P.edges[i[xt]],s,P);Wt.forEach(function(Jt){var $t="".concat(t.dfsCode.dfsEdgeList[i[xt]].fromNode,"-").concat(Jt.label,"-").concat(A[Jt.to].label);u[$t]||(u[$t]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[i[xt]].fromNode,edgeLabel:Jt.label,nodeLabel2:A[Jt.to].label}),u[$t].projected.push({graphId:c.graphId,edge:Jt,preNode:c})})},B=0;B<i.length;B++)ct(B)}}),Object.keys(f).forEach(function(c){var h=f[c],A=h.toNodeId,P=h.edgeLabel;t.dfsCode.dfsEdgeList.push(new kn(o,A,"-1",P,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var h=u[c],A=h.fromNodeId,P=h.edgeLabel,B=h.nodeLabel2;t.dfsCode.dfsEdgeList.push(new kn(A,o+1,Ue,P,B)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},a.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,i={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],h=c.nodeMap;c.nodes.forEach(function(A,P){var B=A.label,V="".concat(f,"-").concat(B);if(!s[V]){var $=i[B]||0;$++,i[B]=$}s[V]={graphKey:f,label:B},A.edges.forEach(function(ut){var ct=B,ht=h[ut.to].label;if(!t&&ct>ht){var xt=ht;ht=ct,ct=xt}var Wt=ut.label,Jt="".concat(f,"-").concat(ct,"-").concat(Wt,"-").concat(ht),$t="".concat(ct,"-").concat(Wt,"-").concat(ht);if(!o[$t]){var ve=o[$t]||0;ve++,o[$t]=ve}u[Jt]={graphId:f,nodeLabel1:ct,edgeLabel:Wt,nodeLabel2:ht}})})}),Object.keys(i).forEach(function(f){var c=i[f];if(!(c<r)){var h={nodes:[],edges:[]};h.nodes.push({id:"0",label:f}),n.push(h)}}),n},a.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(i){var o=t[i],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var h=s[c.to],A="".concat(u.label,"-").concat(c.label,"-").concat(h.label);n[A]||(n[A]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:h.label});var P={graphId:i,edge:c,preNode:null};n[A].projected.push(P)})})}),Object.keys(n).forEach(function(i){var o=n[i],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new kn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},a}(),di=function(e,t,r,n){var i={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new Nn(s,!0,t),c={};u.nodes.forEach(function(h,A){f.addNode(A,h[r]),c[h.id]=A}),u.edges.forEach(function(h,A){var P=c[h.source],B=c[h.target];f.addEdge(-1,P,B,h[n])}),f&&f.getNodeNum()&&(i[f.id]=f)}),i},Ki=function(e,t,r){var n=[];return e.forEach(function(i){var o={nodes:[],edges:[]};i.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),i.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},yo="cluster",Ea=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,i=e.nodeLabelProp,o=i===void 0?yo:i,s=e.edgeLabelProp,u=s===void 0?yo:s,f=di(t,n,o,u),c=e.minSupport,h=e.maxNodeNum,A=e.minNodeNum,P=e.verbose,B=e.top,V={graphs:f,minSupport:c,maxNodeNum:h,minNodeNum:A,top:B,verbose:P,directed:n},$=new Ri(V);$.run();var ut=Ki($.frequentSubgraphs,o,u);return ut},ta=Ea,mo=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var i=[],o=e.nodes;return t.forEach(function(s,u){i.push(Na(o,s,u,r,n))}),i},Na=function(e,t,r,n,i){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=i&&r!==c){o.push(c),s.push(e[c]);var h=e[c][n];u[h]?(u[h].count++,u[h].dists.push(f)):u[h]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,h){return c-h})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},To=function(e,t,r,n,i){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var h=0,A=0,P=f.nodeIdxs,B=f.neighborNum-1;h<o;){for(var V=P[1+Math.floor(Math.random()*B)],$=0;(s["".concat(c,"-").concat(V)]||s["".concat(V,"-").concat(c)])&&(V=Math.floor(Math.random()*t),$++,!($>2*t)););if($<2*t&&(s["".concat(c,"-").concat(V)]={start:c,end:V,distance:i[c][V]},h++,u++,u>=r))return s;if(A++,A>2*t)break}if(h<o){var ut=o-h;o=(o+ut)/(t-c-1)}}),s},vi=function(e,t,r,n){var i=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,h=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!h)){var A=new Set(h),P=c.filter(function(ct){return A.has(ct)});if(!(!P||!P.length)){for(var B={},V=P.length,$=0;$<V;$++){var ut=i[P[$]];n[o].nodes.push(ut),B[ut.id]=!0}r.edges.forEach(function(ct){B[ct.source]&&B[ct.target]&&n[o].edges.push(ct)})}}}}),n},xa=function(e,t,r,n){var i,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((i=t==null?void 0:t.edges)===null||i===void 0)&&i.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],h=s[f.target][r],A=t==null?void 0:t.nodes[0][r],P=t==null?void 0:t.nodes[1][r],B=t==null?void 0:t.edges[0][n];f[n]===B&&(c===A&&h===P||c===P&&h===A)&&u++}),u)},Vo=function(e,t,r){for(var n=1/0,i=0,o=function(f){var c=e[f],h=Object.keys(c).sort(function(ct,ht){return c[ct]-c[ht]}),A=10,P=[];h.forEach(function(ct,ht){P[ht%A]||(P[ht%A]={graphs:[],totalCount:0,aveCount:0}),P[ht%A].graphs.push(ct),P[ht%A].totalCount+=c[ct]});var B=0,V=[];P.forEach(function(ct){var ht=ct.totalCount/ct.graphs.length;ct.aveCount=ht,V.push(ht);var xt=0,Wt=ct.length;ct.graphs.forEach(function(Jt,$t){var ve=c[Jt];ct.graphs.forEach(function(Oe,xe){$t!==xe&&(xt+=Math.abs(ve-c[Oe]))})}),xt/=Wt*(Wt-1)/2,B+=xt}),B/=P.length;var $=0;V.forEach(function(ct,ht){V.forEach(function(xt,Wt){ht!==Wt&&($+=Math.abs(ct-xt))}),$/=V.length*(V.length-1)/2});var ut=$-B;n<ut&&(n=ut,i=f)},s=0;s<t;s++)o(s);return{structure:r[i],structureCountMap:e[i]}},zi=function(e,t){var r={},n={};return e.forEach(function(i,o){r[i.id]={idx:o,node:i,degree:0,inDegree:0,outDegree:0};var s=i[t];n[s]||(n[s]=[]),n[s].push(i)}),{nodeMap:r,nodeLabelMap:n}},ao=function(e,t,r){var n={},i={};return e.forEach(function(o,s){n["".concat(Qt)]={idx:s,edge:o};var u=o[t];i[u]||(i[u]=[]),i[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:i}},jo=function(e,t,r){var n=t.length,i={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var h=e[c].id,A=o[c];i["".concat(f,"-").concat(h)]=A,r||(i["".concat(h,"-").concat(f)]=A)}}),i},ps=function(e,t,r,n,i,o,s,u,f,c,h){var A,P="".concat(t.id,"-").concat(r.id);if(c&&c[P])return c[P];var B=h?h[P]:void 0;if(!B){var V=(A={},A[P]={start:n[t.id].idx,end:n[r.id].idx,distance:i},A);h=vi(V,o,e,h),B=h[P]}return xa(B,s,u,f)},Io=function(e,t,r,n){var i,o,s,u=(i=e[t])===null||i===void 0?void 0:i.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(h){var A=r[h.id].degree;u>A&&(u=A);var P=r[h.id].inDegree;f>P&&(f=P);var B=r[h.id].outDegree;c>B&&(c=B)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Ja=function(e,t,r,n,i,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=zr(e,r),h=zr(t,r),A=jo(e.nodes,c,r),P=jo(t.nodes,h,r),B=zi(e.nodes,o),V=B.nodeMap,$=B.nodeLabelMap,ut=zi(t.nodes,o),ct=ut.nodeMap,ht=ut.nodeLabelMap;ao(e.edges,s,V);var xt=ao(t.edges,s,ct).edgeLabelMap,Wt=[];h==null||h.forEach(function(_i){Wt=Wt.concat(_i)}),i||(i=Math.max.apply(Math,(0,U.__spreadArray)((0,U.__spreadArray)([],Wt,!1),[2],!1))),n||(n=i);var Jt=mo(e,c,o,n),$t=mo(t,h,o,n),ve=Math.min(100,f*(f-1)/2),Oe=To(n,f,ve,Jt,c),xe=vi(Oe,Jt,e),Ze=10,ar=1,Fr=1,rn=4,Zr={graphs:xe,nodeLabelProp:o,edgeLabelProp:s,minSupport:ar,minNodeNum:Fr,maxNodeNum:rn,directed:r},Nr=ta(Zr).slice(0,Ze),yn=Nr.length,dn=[];Nr.forEach(function(_i,ji){dn[ji]={},Object.keys(xe).forEach(function(mi){var Xi=xe[mi],ua=xa(Xi,_i,o,s);dn[ji][mi]=ua})});var Lr=Vo(dn,yn,Nr),Yr=Lr.structure,on=Lr.structureCountMap,sn=t.nodes[0],Sn=[],Ln=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ti=-1/0;t.nodes.forEach(function(_i){var ji=_i[o],mi=$[ji];(mi==null?void 0:mi.length)>ti&&(ti=mi.length,Sn=mi,Ln=ji,sn=_i)});var li={},Hi={},ki={},Zi={},qi={},Ca={};Object.keys(ht).forEach(function(_i,ji){qi[_i]=[],r&&(Ca[_i]=[]);var mi=-1/0,Xi=ht[_i],ua={};Xi.forEach(function(Ni){var Ui=P["".concat(sn.id,"-").concat(Ni.id)];if(Ui&&qi[_i].push(Ui),mi<Ui&&(mi=Ui),ua["".concat(sn.id,"-").concat(Ni.id)]={start:0,end:ct[Ni.id].idx,distance:Ui},r){var Ba=P["".concat(Ni.id,"-").concat(sn.id)];Ba&&Ca[_i].push(Ba)}}),qi[_i]=qi[_i].sort(function(Ni,Ui){return Ni-Ui}),r&&(Ca[_i]=Ca[_i].sort(function(Ni,Ui){return Ni-Ui})),Hi=vi(ua,$t,t,Hi);var Yn=[];if(Object.keys(ua).forEach(function(Ni){if(ki[Ni]){Yn.push(ki[Ni]);return}var Ui=Hi[Ni];ki[Ni]=xa(Ui,Yr,o,s),Yn.push(ki[Ni])}),Yn=Yn.sort(function(Ni,Ui){return Ui-Ni}),Zi["".concat(sn.id,"-").concat(_i)]=Yn,_i!==Ln)for(var Ti=(Sn==null?void 0:Sn.length)||0,Oi=function(Ui){var Ba=Sn[Ui],Uu=Jt[V[Ba.id].idx],go=Uu.nodeLabelCountMap[_i],sd=ht[_i].length;if(!go||go.count<sd)return Sn.splice(Ui,1),"continue";for(var Td=!1,Zs=0;Zs<sd;Zs++)if(go.dists[Zs]>qi[_i][Zs]){Td=!0;break}if(Td)return Sn.splice(Ui,1),"continue";var Ef={};Uu.neighbors.forEach(function(Ks){var nc=A["".concat(Ba.id,"-").concat(Ks.id)];Ef["".concat(Ba.id,"-").concat(Ks.id)]={start:V[Ba.id].idx,end:V[Ks.id].idx,distance:nc}}),xe=vi(Ef,Jt,e,xe);var jc=[];Object.keys(Ef).forEach(function(Ks){if(on[Ks]){jc.push(on[Ks]);return}var nc=xe[Ks];on[Ks]=xa(nc,Yr,o,s),jc.push(on[Ks])}),jc=jc.sort(function(Ks,nc){return nc-Ks});for(var Dh=!1,Zs=0;Zs<sd;Zs++)if(jc[Zs]<Yn[Zs]){Dh=!0;break}if(Dh)return Sn.splice(Ui,1),"continue"},fa=Ti-1;fa>=0;fa--)Oi(fa)});var pa=[];Sn==null||Sn.forEach(function(_i){for(var ji=V[_i.id].idx,mi=Na(e.nodes,c[ji],ji,o,i),Xi=mi.neighbors,ua=Xi.length,Yn=!1,Ti=ua-1;Ti>=0;Ti--){if(Xi.length+1<t.nodes.length){Yn=!0;return}var Oi=Xi[Ti],fa=Oi[o];if(!ht[fa]||!ht[fa].length){Xi.splice(Ti,1);continue}if(!qi[fa]||!qi[fa].length){Xi.splice(Ti,1);continue}var Ni="".concat(_i.id,"-").concat(Oi.id),Ui=A[Ni],Ba=qi[fa].length-1,Uu=qi[fa][Ba];if(Ui>Uu){Xi.splice(Ti,1);continue}if(r){var go="".concat(Oi.id,"-").concat(_i.id),sd=A[go];Ba=Ca[fa].length-1;var Td=Ca[fa][Ba];if(sd>Td){Xi.splice(Ti,1);continue}}var Zs=on[Ni]?on[Ni]:ps(e,_i,Oi,V,Ui,Jt,Yr,o,s,on,xe),Ef="".concat(sn.id,"-").concat(fa),jc=Zi[Ef][Zi[Ef].length-1];if(Zs<jc){Xi.splice(Ti,1);continue}var Dh=Io(li,fa,ct,ht),Ks=Dh.minPatternNodeLabelDegree,nc=Dh.minPatternNodeLabelInDegree,Fl=Dh.minPatternNodeLabelOutDegree;if(V[Oi.id].degree<Ks){Xi.splice(Ti,1);continue}}Yn||pa.push({nodes:[_i].concat(Xi)})});var mf=vr(t,sn.id,!1).length,Mo={};r?(Object.keys(mf).forEach(function(_i){var ji=ct[_i].node[o];Mo[ji]?Mo[ji].push(mf[_i]):Mo[ji]=[mf[_i]]}),Object.keys(Mo).forEach(function(_i){Mo[_i].sort(function(ji,mi){return ji-mi})})):Mo=qi;for(var bf=pa.length,Co=function(ji){var mi=pa[ji],Xi=mi.nodes[0],ua={},Yn={};mi.nodes.forEach(function(Da,zu){Yn[Da.id]={idx:zu,node:Da,degree:0,inDegree:0,outDegree:0};var Wo=Da[o];ua[Wo]?ua[Wo]++:ua[Wo]=1});var Ti=[],Oi={};e.edges.forEach(function(Da){Yn[Da.source]&&Yn[Da.target]&&(Ti.push(Da),Oi[Da[s]]?Oi[Da[s]]++:Oi[Da[s]]=1,Yn[Da.source].degree++,Yn[Da.target].degree++,Yn[Da.source].outDegree++,Yn[Da.target].inDegree++)});for(var fa=Object.keys(xt).length,Ni=!1,Ui=0;Ui<fa;Ui++){var Ba=Object.keys(xt)[Ui];if(!Oi[Ba]||Oi[Ba]<xt[Ba].length){Ni=!0;break}}if(Ni)return pa.splice(ji,1),"continue";var Uu=Ti.length;if(Uu<t.edges.length)return pa.splice(ji,1),"break";for(var go=!1,sd=function(zu){var Wo=Ti[zu],Xc=Wo[s],ud=xt[Xc];if(!ud||!ud.length)return Oi[Xc]--,ud&&Oi[Xc]<ud.length?(go=!0,"break"):(Ti.splice(zu,1),Yn[Wo.source].degree--,Yn[Wo.target].degree--,Yn[Wo.source].outDegree--,Yn[Wo.target].inDegree--,"continue");var Uy=Yn[Wo.source].node[o],zy=Yn[Wo.target].node[o],Cg=!1;if(ud.forEach(function(Wy){var Vy=ct[Wy.source].node,jy=ct[Wy.target].node;Vy[o]===Uy&&jy[o]===zy&&(Cg=!0),!r&&Vy[o]===zy&&jy[o]===Uy&&(Cg=!0)}),!Cg)return Oi[Xc]--,ud&&Oi[Xc]<ud.length?(go=!0,"break"):(Ti.splice(zu,1),Yn[Wo.source].degree--,Yn[Wo.target].degree--,Yn[Wo.source].outDegree--,Yn[Wo.target].inDegree--,"continue")},Ui=Uu-1;Ui>=0;Ui--){var Td=sd(Ui);if(Td==="break")break}if(go)return pa.splice(ji,1),"continue";mi.edges=Ti;var Zs=vr(mi,mi.nodes[0].id,!1).length;if(Object.keys(Zs).reverse().forEach(function(Da){if(!(Da===mi.nodes[0].id||go)){if(Zs[Da]===1/0){var zu=Yn[Da].node[o];if(ua[zu]--,ua[zu]<ht[zu].length){go=!0;return}var Wo=mi.nodes.indexOf(Yn[Da].node);mi.nodes.splice(Wo,1),Yn[Da]=void 0;return}var Xc=V[Da].node[o];if(!Mo[Xc]||!Mo[Xc].length||Zs[Da]>Mo[Xc][Mo[Xc].length-1]){var zu=Yn[Da].node[o];if(ua[zu]--,ua[zu]<ht[zu].length){go=!0;return}var Wo=mi.nodes.indexOf(Yn[Da].node);mi.nodes.splice(Wo,1),Yn[Da]=void 0}}}),go)return pa.splice(ji,1),"continue";for(var Ef=!0,jc=0;Ef&&!go;){Ef=!1;var Dh=r?Yn[Xi.id].degree<ct[sn.id].degree||Yn[Xi.id].inDegree<ct[sn.id].inDegree||Yn[Xi.id].outDegree<ct[sn.id].outDegree:Yn[Xi.id].degree<ct[sn.id].degree;if(Dh){go=!0;break}if(ua[Xi[o]]<ht[Xi[o]].length){go=!0;break}for(var Ks=mi.nodes.length,nc=Ks-1;nc>=0;nc--){var Fl=mi.nodes[nc],Gy=Yn[Fl.id].degree,P_=Yn[Fl.id].inDegree,O_=Yn[Fl.id].outDegree,D_=Fl[o],Mg=Io(li,D_,ct,ht),Fy=Mg.minPatternNodeLabelDegree,N_=Mg.minPatternNodeLabelInDegree,L_=Mg.minPatternNodeLabelOutDegree,k_=r?Gy<Fy||P_<N_||O_<L_:Gy<Fy;if(k_){if(ua[Fl[o]]--,ua[Fl[o]]<ht[Fl[o]].length){go=!0;break}mi.nodes.splice(nc,1),Yn[Fl.id]=void 0,Ef=!0}}if(go||!Ef&&jc!==0)break;Uu=Ti.length;for(var Tp=Uu-1;Tp>=0;Tp--){var Ul=Ti[Tp];if(!Yn[Ul.source]||!Yn[Ul.target]){Ti.splice(Tp,1);var Ip=Ul[s];if(Oi[Ip]--,Yn[Ul.source]&&(Yn[Ul.source].degree--,Yn[Ul.source].outDegree--),Yn[Ul.target]&&(Yn[Ul.target].degree--,Yn[Ul.target].inDegree--),xt[Ip]&&Oi[Ip]<xt[Ip].length){go=!0;break}Ef=!0}}jc++}if(go||go||mi.nodes.length<t.nodes.length||Ti.length<t.edges.length)return pa.splice(ji,1),"continue"},Ao=bf-1;Ao>=0;Ao--){var Fu=Co(Ao);if(Fu==="break")break}for(var vs=pa.length,Hs=function(ji){var mi=pa[ji],Xi={};mi.edges.forEach(function(Ti){var Oi="".concat(Ti.source,"-").concat(Ti.target,"-").concat(Ti.label);Xi[Oi]?Xi[Oi]++:Xi[Oi]=1});for(var ua=function(Oi){var fa=pa[Oi],Ni={};fa.edges.forEach(function(Ba){var Uu="".concat(Ba.source,"-").concat(Ba.target,"-").concat(Ba.label);Ni[Uu]?Ni[Uu]++:Ni[Uu]=1});var Ui=!0;Object.keys(Ni).length!==Object.keys(Xi).length?Ui=!1:Object.keys(Xi).forEach(function(Ba){Ni[Ba]!==Xi[Ba]&&(Ui=!1)}),Ui&&pa.splice(Oi,1)},Yn=vs-1;Yn>ji;Yn--)ua(Yn);vs=pa.length},Ao=0;Ao<=vs-1;Ao++)Hs(Ao);return pa}}},Pn=Ja,$s=function(){function a(e){e===void 0&&(e=10),this.linkedList=new De,this.maxStep=e}return Object.defineProperty(a.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),a.prototype.isEmpty=function(){return!this.linkedList.head},a.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},a.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},a.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},a.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},a.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},a.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},a}(),na=$s,oo=Le,Xa={getAdjMatrix:Vt,breadthFirstSearch:Ee,connectedComponent:wt,getDegree:rt,getInDegree:Nt,getOutDegree:ft,detectCycle:Le,detectDirectedCycle:oo,detectAllCycles:le,detectAllDirectedCycle:Ve,detectAllUndirectedCycle:qe,depthFirstSearch:Ge,dijkstra:vr,findAllPath:yr,findShortestPath:Ae,floydWarshall:zr,labelPropagation:un,louvain:Lt,iLouvain:G,kCore:st,kMeans:Yt,cosineSimilarity:ot,nodesCosineSimilarity:te,minimumSpanningTree:Er,pageRank:Ft,getNeighbors:Pt,Stack:na,GADDI:Pn},qo=S(91606),On=S(20663),bo=re,gs=function(e){return function(t,r){return t[e]-r[e]}},ts=function(e,t,r){return e>=t&&e<=r},es=function(e,t,r,n){var i=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,h=1/f,A=s.x*s.x+s.y*s.y,P=u.x*u.x+u.y*u.y;if(c>i*A*P){var B=(o.x*u.y-o.y*u.x)*h,V=(o.x*s.y-o.y*s.x)*h;return!ts(B,0,1)||!ts(V,0,1)?null:{x:e.x+B*s.x,y:e.y+B*s.y}}return null},Wn=function(e,t){var r=e.x,n=e.y,i=e.width,o=e.height,s=r+i/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+i,y:n}),f.push({x:r+i,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var h=null,A=1;A<f.length&&(h=es(f[A-1],f[A],c,t),!h);A++);return h},so=function(e,t){var r=e.x,n=e.y,i=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<i*i)return null;var c=Math.atan(f/u);return{x:r+Math.abs(i*Math.cos(c))*Math.sign(u),y:n+Math.abs(i*Math.sin(c))*Math.sign(f)}},ia=function(e,t){var r=e.rx,n=e.ry,i=e.x,o=e.y,s=t.x-i,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:i+r*Math.cos(f),y:o+n*Math.sin(f)}},Bi=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),qo.transformMat3(n,n,t),{x:n[0],y:n[1]}},rs=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=nt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,r];return qo.transformMat3(i,i,n),{x:i[0],y:i[1]}},Po=function(e,t,r){var n=e.x-t.x,i=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=i*o-n*s;return{x:-(s*u-i*f)/c,y:-(n*f-o*u)/c}},ga=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},ys=function(e,t){var r=[];return e.forEach(function(n){var i=[];n.forEach(function(o){i.push(o*t)}),r.push(i)}),r},Qs=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var i=0;i<r;i+=1)n===i?t[n][i]=0:e[n][i]===0||!e[n][i]?t[n][i]=1/0:t[n][i]=e[n][i]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var i=0;i<r;i+=1)t[n][i]>t[n][o]+t[o][i]&&(t[n][i]=t[n][o]+t[o][i]);return t},ms=function(e,t){var r=e.nodes,n=e.edges,i=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];i.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],h=o[f];i[c][h]=1,t||(i[h][c]=1)}),i},Eo=function(e,t){e.translate(t.x,t.y)},Ai=function(e,t,r,n){n===void 0&&(n={duration:500});var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*i[0],c=u*i[4],h=0,A=0,P=0,B=0;e.animate(function($){return P=f*$,B=c*$,i=bo(i,[["t",P-h,B-A]]),h=P,A=B,{matrix:i}},n)}else{var V=bo(i,[["t",s,u]]);e.setMatrix(V)}},Ya=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,l.isArray)(t)||(n=[t,t]),(0,l.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=bo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},bs=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=bo(r,[["r",t]]),e.setMatrix(r)},Ha=function(e,t,r){for(var n=[],i=0;i<e;i++)n[i]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Ns(a,e,t){return(t[0]-a[0])*(e[1]-a[1])===(e[0]-a[0])*(t[1]-a[1])&&Math.min(a[0],e[0])<=t[0]&&t[0]<=Math.max(a[0],e[0])&&Math.min(a[1],e[1])<=t[1]&&t[1]<=Math.max(a[1],e[1])}var La=function(e,t,r){var n=!1,i=e.length,o=1e-6;function s(h){return Math.abs(h)<o?0:h<0?-1:1}if(i<=2)return!1;for(var u=0;u<i;u++){var f=e[u],c=e[(u+1)%i];if(Ns(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},ya=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},Za=function(e,t){var r=!1;return(0,l.each)(e,function(n){if(es(n.from,n.to,t.from,t.to))return r=!0,!1}),r},xo=function(e,t){var r=function(A){var P=A.map(function(V){return V[0]}),B=A.map(function(V){return V[1]});return{minX:Math.min.apply(null,P),maxX:Math.max.apply(null,P),minY:Math.min.apply(null,B),maxY:Math.max.apply(null,B)}},n=function(A){for(var P=[],B=A.length,V=0;V<B-1;V++){var $=A[V],ut=A[V+1];P.push({from:{x:$[0],y:$[1]},to:{x:ut[0],y:ut[1]}})}if(P.length>1){var ct=A[0],ht=A[B-1];P.push({from:{x:ht[0],y:ht[1]},to:{x:ct[0],y:ct[1]}})}return P};if(e.length<2||t.length<2)return!1;var i=r(e),o=r(t);if(!ya(i,o))return!1;var s=!1;if((0,l.each)(t,function(h){if(La(e,h[0],h[1]))return s=!0,!1}),s||((0,l.each)(e,function(h){if(La(t,h[0],h[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,l.each)(f,function(h){if(Za(u,h))return c=!0,!1}),c},Ka=function(){function a(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return a.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),i={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return i},a}(),Ga=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Js=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){var o=r/i,s=n/i;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ka=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),i=0,o=[],s=0;s<4;s++){var u=Ga(n,r[s]),f=u[0],c=u[1],h=u[2],A=u[3];o[s]=es({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:h,y:A}),o[s]&&(i+=1)}return[o,i]},$a=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),i=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=Ga(n,r[s]),f=u[0],c=u[1],h=u[2],A=u[3],P=Js(t,new Ka(f,c,h,A));P=Math.abs(P-.5),P>=0&&P<=1&&(o+=1,i=P<i?P:i)}return o===0?-1:i},wo=function(e){var t=0,r=0;if(e.length>0){for(var n=0,i=e;n<i.length;n++){var o=i[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},qa=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},Xo=function(e,t){var r=t.x1,n=t.y1,i=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*i+u*o,c;f<=0?c=0:(s=i-s,u=o-u,f=s*i+u*o,f<=0?c=0:c=f*f/(i*i+o*o));var h=s*s+u*u-c;return h<0&&(h=0),h},fi=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},ma=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,i=e.y>t.y+t.height,o=e.y<t.y,s=r||n||i||o;if(!s)return 0;if(i&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!i&&!o)return Math.pow(t.x-e.x,2);if(n&&!i&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},to=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],s=t.x,u=t.y,f=[i-r,o-n];if(On.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];On.normalize(c,c);var h=[s-r,u-n];return Math.abs(On.dot(h,c))},ba=function(e,t,r){return e+(t-e)*r},Mi=function(e,t,r){for(var n=Math.min(e.length,t.length),i=new Array(n),o=0;o<n;o++)i[o]=ba(e[o],t[o],r);return i},ca="rgb(95, 149, 255)",Es="rgb(255, 255, 255)",aa="rgb(0, 0, 0)",uo="rgb(247, 250, 255)",eo="rgb(239, 244, 255)",fo="rgb(253, 253, 253)",qs="rgb(250, 250, 250)",Yo="rgb(224, 224, 224)",Oo="rgb(234, 234, 234)",ns="rgb(245, 245, 245)",Wu="rgb(191, 213, 255)",yu="#4572d9",xs="rgb(223, 234, 255)",Xt={mainStroke:ca,mainFill:eo,activeStroke:ca,activeFill:uo,inactiveStroke:Wu,inactiveFill:uo,selectedStroke:ca,selectedFill:Es,highlightStroke:yu,highlightFill:xs,disableStroke:Yo,disableFill:qs,edgeMainStroke:Yo,edgeActiveStroke:ca,edgeInactiveStroke:Oo,edgeSelectedStroke:ca,edgeHighlightStroke:ca,edgeDisableStroke:ns,comboMainStroke:Yo,comboMainFill:fo,comboActiveStroke:ca,comboActiveFill:uo,comboInactiveStroke:Yo,comboInactiveFill:fo,comboSelectedStroke:ca,comboSelectedFill:fo,comboHighlightStroke:yu,comboHighlightFill:fo,comboDisableStroke:Oo,comboDisableFill:qs},ue={version:"0.8.7",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Xt.mainStroke,fill:eo},size:20,color:Xt.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Xt.activeFill,stroke:Xt.activeStroke}},nodeStateStyles:{active:{fill:Xt.activeFill,stroke:Xt.activeStroke,lineWidth:2,shadowColor:Xt.mainStroke,shadowBlur:10},selected:{fill:Xt.selectedFill,stroke:Xt.selectedStroke,lineWidth:4,shadowColor:Xt.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Xt.highlightFill,stroke:Xt.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Xt.inactiveFill,stroke:Xt.inactiveStroke,lineWidth:1},disable:{fill:Xt.disableFill,stroke:Xt.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:aa,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Xt.edgeMainStroke,lineAppendWidth:2},color:Xt.edgeMainStroke},edgeStateStyles:{active:{stroke:Xt.edgeActiveStroke,lineWidth:1},selected:{stroke:Xt.edgeSelectedStroke,lineWidth:2,shadowColor:Xt.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Xt.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Xt.edgeInactiveStroke,lineWidth:1},disable:{stroke:Xt.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:aa,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Xt.comboMainFill,lineWidth:1,stroke:Xt.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Xt.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Xt.comboActiveStroke,lineWidth:1,fill:Xt.comboActiveFill},selected:{stroke:Xt.comboSelectedStroke,lineWidth:2,fill:Xt.comboSelectedFill,shadowColor:Xt.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Xt.comboHighlightStroke,lineWidth:2,fill:Xt.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Xt.comboInactiveStroke,fill:Xt.comboInactiveFill,lineWidth:1},disable:{stroke:Xt.comboDisableStroke,fill:Xt.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},nr={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},cr=Math.PI,Gr=Math.sin,cn=Math.cos,xn=Gr(cr/8),Zn=cn(cr/8),Wi=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},i={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Bi(n,o),i=Bi(i,o)}var s=n.x,u=n.y,f=i.x,c=i.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Ra=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=t.getKeyShape(),o=i.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||ue.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],h=[e.startPoint.x,e.startPoint.y],A=[e.endPoint.x,e.endPoint.y],P=o.height/2,B=o.width/2,V=P,$=P,ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,Wt=i.get("type"),Jt=Math.min(P/2,B/2),$t=Math.min(P,B),ve=s!=null&&s.pointPadding?Math.min($t,s==null?void 0:s.pointPadding):Jt;if(h[0]===A[0]&&h[1]===A[1]){switch(f){case"top":Wt==="circle"?(h=[c[0]-ut,c[1]-ct],A=[c[0]+ht,c[1]-xt]):(h=[c[0]-ve,c[1]-P],A=[c[0]+ve,c[1]-P]);break;case"top-right":V=P,$=B,Wt==="circle"?(ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]+ut,c[1]-ct],A=[c[0]+xt,c[1]-ht]):(h=[c[0]+B-ve,c[1]-P],A=[c[0]+B,c[1]-P+ve]);break;case"right":V=B,$=B,Wt==="circle"?(ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]+ct,c[1]-ut],A=[c[0]+xt,c[1]+ht]):(h=[c[0]+B,c[1]-ve],A=[c[0]+B,c[1]+ve]);break;case"bottom-right":V=B,$=P,Wt==="circle"?(ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]+ct,c[1]+ut],A=[c[0]+ht,c[1]+xt]):(h=[c[0]+B,c[1]+P-ve],A=[c[0]+B-ve,c[1]+P]);break;case"bottom":V=P,$=P,Wt==="circle"?(ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]+ut,c[1]+ct],A=[c[0]-ht,c[1]+xt]):(h=[c[0]-ve,c[1]+P],A=[c[0]+ve,c[1]+P]);break;case"bottom-left":V=P,$=B,Wt==="circle"?(ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]-ut,c[1]+ct],A=[c[0]-xt,c[1]+ht]):(h=[c[0]-B,c[1]+P-ve],A=[c[0]-B+ve,c[1]+P]);break;case"left":V=B,$=B,Wt==="circle"?(ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]-ct,c[1]+ut],A=[c[0]-xt,c[1]-ht]):(h=[c[0]-B,c[1]-ve],A=[c[0]-B,c[1]+ve]);break;case"top-left":V=B,$=P,Wt==="circle"?(ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]-ct,c[1]-ut],A=[c[0]-ht,c[1]-xt]):(h=[c[0]-B+ve,c[1]-P],A=[c[0]-B,c[1]-P+ve]);break;default:V=B,$=B,ut=V*xn,ct=V*Zn,ht=$*xn,xt=$*Zn,h=[c[0]-ut,c[1]-ct],A=[c[0]+ht,c[1]-xt]}if(s.clockwise===!1){var Oe=[h[0],h[1]];h=[A[0],A[1]],A=[Oe[0],Oe[1]]}}var xe=[h[0]-c[0],h[1]-c[1]],Ze=(V+u)/V,ar=($+u)/$;s.clockwise===!1&&(Ze=($+u)/$,ar=(V+u)/V);var Fr=On.scale([0,0],xe,Ze),rn=[c[0]+Fr[0],c[1]+Fr[1]],Zr=[A[0]-c[0],A[1]-c[1]],Nr=On.scale([0,0],Zr,ar),yn=[c[0]+Nr[0],c[1]+Nr[1]];return e.startPoint={x:h[0],y:h[1]},e.endPoint={x:A[0],y:A[1]},e.controlPoints=[{x:rn[0],y:rn[1]},{x:yn[0],y:yn[1]}],e},Fa=function(e,t,r,n,i){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=cr*2),r&&(u.x+=cn(c)*r,u.y+=Gr(c)*r),n){var h=c-cr/2;c>1/2*cr&&c<3*1/2*cr&&(h-=cr),u.x+=cn(h)*n,u.y+=Gr(h)*n}var A={x:u.x,y:u.y,angle:c};return i?(c>.5*cr&&c<1.5*cr&&(c-=cr),(0,U.__assign)({rotate:c},A)):A},Ho=function a(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var i=e.children.length-1;i>=0;i--)if(!a(e.children[i],e,i,n))return!1}return!0},xf=function a(e,t,r,n){if(e&&e.children){for(var i=e.children.length-1;i>=0;i--)if(!a(e.children[i],e,i,n))return}return n(e,t,r)!==!1},wa=function(e,t){typeof t=="function"&&Ho(e,null,-1,t)},ro=function(e,t){typeof t=="function"&&xf(e,null,-1,t)},mu=function(e,t){return t*(nr[e]||1)},ic=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(i){n.test(i)?r+=t:r+=mu(i,t)}),[r,t]},Yc=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},wf=function(e,t){var r=[],n={},i={};e.forEach(function(u){i[u.id]=u}),e.forEach(function(u,f){var c=(0,l.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!i[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var h=n[c.id];if(h){if(c.children=h.children,n[c.id]=c,h=c,!h.parentId){r.push(h);return}var A=n[h.parentId];if(A)A.children?A.children.push(c):A.children=[c];else{var P={id:h.parentId,children:[h]};n[h.parentId]=P,n[c.id]=c}return}if((0,l.isString)(u.parentId)){var B=n[u.parentId];if(B)B.children?B.children.push(c):B.children=[c],n[c.id]=c;else{var V={id:u.parentId,children:[c]};n[V.id]=V,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,wa(u,function(f){var c,h=n[f.id].itemType;h==="node"?c=n[f.comboId]:c=n[f.parentId],c&&h==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var A=o[f.id];return A&&(A.depth=f.depth),!0})}),r},_f=function(e,t,r){var n,i=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(B){if(!u){if(B.id===t){o=B,B.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}wa(B,function(V){var $;return s[V.id]={children:(V==null?void 0:V.children)||[]},i=($=s[V.parentId||V.comboId||"root"])===null||$===void 0?void 0:$.children,V&&(V.removed||t===V.id)&&i?(f=V.parentId||V.comboId||"root",o=V,V.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),i=(n=s[f])===null||n===void 0?void 0:n.children;var c=i?i.indexOf(o):-1;if(c>-1&&i.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var h=!1;if(r){var A=0;(e||[]).forEach(function(B){h||wa(B,function(V){return r===V.id?(h=!0,V.children?V.children.push(o):V.children=[o],A=V.depth,o.itemType==="node"?o.depth=A+2:o.depth=A+1,!1):!0})})}else(!r||!h)&&o.itemType!=="node"&&e.push(o);var P=o.depth;wa(o,function(B){return B.itemType==="node"?P+=2:P+=1,B.depth=P,!0})}return e},Sf=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var i=r==null?void 0:r.getModel(),o=i||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,h=o.fixCollapseSize,A=c?h:f,P=(0,l.isArray)(A)?A:[A,A],B=P[0],V=P[1],$=[B/2,V/2];return{minX:s-$[0],minY:u-$[1],maxX:s+$[0],maxY:u+$[1],x:s,y:u,width:B,height:V}}return e.forEach(function(ut){var ct=t.findById(ut.id);if(!(!ct||!ct.isVisible())){ct.set("bboxCanvasCache",void 0);var ht=ct.getCanvasBBox();ht.x&&n.minX>ht.minX&&(n.minX=ht.minX),ht.y&&n.minY>ht.minY&&(n.minY=ht.minY),ht.x&&n.maxX<ht.maxX&&(n.maxX=ht.maxX),ht.y&&n.maxY<ht.maxY&&(n.maxY=ht.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(ut){(n[ut]===1/0||n[ut]===-1/0)&&(n[ut]=void 0)}),n},tu=function(e){var t=(0,l.isNumber)(e.x)||(0,l.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,l.isNumber)(e.style.r)||(0,l.isNumber)(e.style.width)||(0,l.isNumber)(e.style.height)||(0,l.isNumber)(e.style.rx)||(0,l.isNumber)(e.style.ry)),t},bu=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,l.isObject)(n)&&!(0,l.isArray)(n)){var i={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,l.isString)(s)||(i[o]=(0,l.clone)(s))}),t[r]=i}else t[r]=(0,l.clone)(n)}),t},eu=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,l.clone)(t),t.callback){var i=t.callback;n.callback=function(){r(),i()}}else n.callback=r;return n},co=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,i=n===void 0?[]:n;if(!t&&!r){var o=!0;return wa(e,function(A){return(0,l.isString)(A.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(A){return!(0,l.isString)(A.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(A){return A.id}),f=i==null?void 0:i.map(function(A){return A.id}),c=(0,U.__spreadArray)((0,U.__spreadArray)([],u,!0),f,!0),h=(r||[]).find(function(A){return!c.includes(A.source)||!c.includes(A.target)});return h?(console.warn("G6 Warning Tips: The source %c".concat(h.source,"%c or the target %c").concat(h.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Hc=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,l.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Mf=function(){function a(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return a.prototype.formatModes=function(){var e=this.modes;(0,l.each)(e,function(t){(0,l.each)(t,function(r,n){(0,l.isString)(r)&&(t[n]={type:r})})})},a.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],i;(0,l.each)(r||[],function(o){var s=X.getBehavior(o.type||o);s&&(i=new s(o),i&&(i.bind(t),n.push(i)))}),this.currentBehaves=n},a.mergeBehaviors=function(e,t){return(0,l.each)(t,function(r){e.indexOf(r)<0&&((0,l.isString)(r)&&(r={type:r}),e.push(r))}),e},a.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var i="";(0,l.isString)(n)?i=n:i=n.type,t.indexOf(i)<0&&r.push(n)}),r},a.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,i=e,o=r[i];o&&(n.emit("beforemodechange",{mode:e}),(0,l.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(i),n.emit("aftermodechange",{mode:e}),this.mode=e)},a.prototype.getMode=function(){return this.mode},a.prototype.manipulateBehaviors=function(e,t,r){var n=this,i;if((0,l.isArray)(e)?i=e:i=[e],(0,l.isArray)(t))return(0,l.each)(t,function(s){n.modes[s]?r?n.modes[s]=a.mergeBehaviors(n.modes[s]||[],i):n.modes[s]=a.filterBehaviors(n.modes[s]||[],i):r&&(n.modes[s]=i)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=i),r?this.modes[o]=a.mergeBehaviors(this.modes[o]||[],i):this.modes[o]=a.filterBehaviors(this.modes[o]||[],i),this.formatModes(),this.setMode(this.mode),this},a.prototype.updateBehavior=function(e,t,r){(0,l.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var i=n.length,o=0;o<i;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},a.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},a}(),zl=Mf,Ls=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Wl=new RegExp("([a-z])["+Ls+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ls+"]*,?["+Ls+"]*)+)","ig"),Vl=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ls+"]*,?["+Ls+"]*","ig"),Eu=function(a){if(!a)return null;if((0,l.isArray)(a))return a;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(a).replace(Wl,function(r,n,i){var o=[],s=n.toLowerCase();if(i.replace(Vl,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return a}),t},Xn=function(a,e){for(var t=[],r=0,n=a.length;n-2*!e>r;r+=2){var i=[{x:+a[r-2],y:+a[r-1]},{x:+a[r],y:+a[r+1]},{x:+a[r+2],y:+a[r+3]},{x:+a[r+4],y:+a[r+5]}];e?r?n-4===r?i[3]={x:+a[0],y:+a[1]}:n-2===r&&(i[2]={x:+a[0],y:+a[1]},i[3]={x:+a[2],y:+a[3]}):i[0]={x:+a[n-2],y:+a[n-1]}:n-4===r?i[3]=i[2]:r||(i[0]={x:+a[r],y:+a[r+1]}),t.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return t},Cf=function(a,e,t,r,n){var i=[];if(n===null&&r===null&&(r=t),a=+a,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=a+t*Math.cos(-r*o),u=a+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);i=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else i=[["M",a,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return i},Af=function(a){if(a=Eu(a),!a||!a.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,i=0,o=0,s,u;a[0][0]==="M"&&(t=+a[0][1],r=+a[0][2],n=t,i=r,o++,e[0]=["M",t,r]);for(var f=a.length===3&&a[0][0]==="M"&&a[1][0].toUpperCase()==="R"&&a[2][0].toUpperCase()==="Z",c=void 0,h=void 0,A=o,P=a.length;A<P;A++){if(e.push(c=[]),h=a[A],s=h[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+t,c[7]=+h[7]+r;break;case"V":c[1]=+h[1]+r;break;case"H":c[1]=+h[1]+t;break;case"R":u=[t,r].concat(h.slice(1));for(var B=2,V=u.length;B<V;B++)u[B]=+u[B]+t,u[++B]=+u[B]+r;e.pop(),e=e.concat(Xn(u,f));break;case"O":e.pop(),u=Cf(t,r,h[1],h[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(Cf(t,r,h[1],h[2],h[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+h[1]+t,i=+h[2]+r;break;default:for(var B=1,V=h.length;B<V;B++)c[B]=+h[B]+(B%2?t:r)}else if(s==="R")u=[t,r].concat(h.slice(1)),e.pop(),e=e.concat(Xn(u,f)),c=["R"].concat(h.slice(-2));else if(s==="O")e.pop(),u=Cf(t,r,h[1],h[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(Cf(t,r,h[1],h[2],h[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var $=0,ut=h.length;$<ut;$++)c[$]=h[$];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+i;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],i=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Vu=function(a,e,t,r){return[a,e,t,r,t,r]},ac=function(a,e,t,r,n,i){var o=.3333333333333333,s=2/3;return[o*a+s*t,o*e+s*r,o*n+s*t,o*i+s*r,n,i]},Tf=function(a,e,t,r,n,i,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,h=Math.PI/180*(+n||0),A=[],P,B,V,$,ut,ct=function(Hi,ki,Zi){var qi=Hi*Math.cos(Zi)-ki*Math.sin(Zi),Ca=Hi*Math.sin(Zi)+ki*Math.cos(Zi);return{x:qi,y:Ca}};if(f)B=f[0],V=f[1],$=f[2],ut=f[3];else{P=ct(a,e,-h),a=P.x,e=P.y,P=ct(s,u,-h),s=P.x,u=P.y,a===s&&e===u&&(s+=1,u+=1);var ht=(a-s)/2,xt=(e-u)/2,Wt=ht*ht/(t*t)+xt*xt/(r*r);Wt>1&&(Wt=Math.sqrt(Wt),t=Wt*t,r=Wt*r);var Jt=t*t,$t=r*r,ve=(i===o?-1:1)*Math.sqrt(Math.abs((Jt*$t-Jt*xt*xt-$t*ht*ht)/(Jt*xt*xt+$t*ht*ht)));$=ve*t*xt/r+(a+s)/2,ut=ve*-r*ht/t+(e+u)/2,B=Math.asin(((e-ut)/r).toFixed(9)),V=Math.asin(((u-ut)/r).toFixed(9)),B=a<$?Math.PI-B:B,V=s<$?Math.PI-V:V,B<0&&(B=Math.PI*2+B),V<0&&(V=Math.PI*2+V),o&&B>V&&(B=B-Math.PI*2),!o&&V>B&&(V=V-Math.PI*2)}var Oe=V-B;if(Math.abs(Oe)>c){var xe=V,Ze=s,ar=u;V=B+c*(o&&V>B?1:-1),s=$+t*Math.cos(V),u=ut+r*Math.sin(V),A=Tf(s,u,t,r,n,0,o,Ze,ar,[V,xe,$,ut])}Oe=V-B;var Fr=Math.cos(B),rn=Math.sin(B),Zr=Math.cos(V),Nr=Math.sin(V),yn=Math.tan(Oe/4),dn=4/3*t*yn,Lr=4/3*r*yn,Yr=[a,e],on=[a+dn*rn,e-Lr*Fr],sn=[s+dn*Nr,u-Lr*Zr],Sn=[s,u];if(on[0]=2*Yr[0]-on[0],on[1]=2*Yr[1]-on[1],f)return[on,sn,Sn].concat(A);A=[on,sn,Sn].concat(A).join().split(",");for(var Ln=[],ti=0,li=A.length;ti<li;ti++)Ln[ti]=ti%2?ct(A[ti-1],A[ti],h).y:ct(A[ti],A[ti+1],h).x;return Ln},oc=function(a,e){var t=Af(a),r=e&&Af(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,h=function(ht,xt,Wt){var Jt,$t;if(!ht)return["C",xt.x,xt.y,xt.x,xt.y,xt.x,xt.y];switch(!(ht[0]in{T:1,Q:1})&&(xt.qx=xt.qy=null),ht[0]){case"M":xt.X=ht[1],xt.Y=ht[2];break;case"A":ht=["C"].concat(Tf.apply(0,[xt.x,xt.y].concat(ht.slice(1))));break;case"S":Wt==="C"||Wt==="S"?(Jt=xt.x*2-xt.bx,$t=xt.y*2-xt.by):(Jt=xt.x,$t=xt.y),ht=["C",Jt,$t].concat(ht.slice(1));break;case"T":Wt==="Q"||Wt==="T"?(xt.qx=xt.x*2-xt.qx,xt.qy=xt.y*2-xt.qy):(xt.qx=xt.x,xt.qy=xt.y),ht=["C"].concat(ac(xt.x,xt.y,xt.qx,xt.qy,ht[1],ht[2]));break;case"Q":xt.qx=ht[1],xt.qy=ht[2],ht=["C"].concat(ac(xt.x,xt.y,ht[1],ht[2],ht[3],ht[4]));break;case"L":ht=["C"].concat(Vu(xt.x,xt.y,ht[1],ht[2]));break;case"H":ht=["C"].concat(Vu(xt.x,xt.y,ht[1],xt.y));break;case"V":ht=["C"].concat(Vu(xt.x,xt.y,xt.x,ht[1]));break;case"Z":ht=["C"].concat(Vu(xt.x,xt.y,xt.X,xt.Y));break;default:break}return ht},A=function(ht,xt){if(ht[xt].length>7){ht[xt].shift();for(var Wt=ht[xt];Wt.length;)o[xt]="A",r&&(s[xt]="A"),ht.splice(xt++,0,["C"].concat(Wt.splice(0,6)));ht.splice(xt,1),c=Math.max(t.length,r&&r.length||0)}},P=function(ht,xt,Wt,Jt,$t){ht&&xt&&ht[$t][0]==="M"&&xt[$t][0]!=="M"&&(xt.splice($t,0,["M",Jt.x,Jt.y]),Wt.bx=0,Wt.by=0,Wt.x=ht[$t][1],Wt.y=ht[$t][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var B=0;B<c;B++){t[B]&&(u=t[B][0]),u!=="C"&&(o[B]=u,B&&(f=o[B-1])),t[B]=h(t[B],n,f),o[B]!=="A"&&u==="C"&&(o[B]="C"),A(t,B),r&&(r[B]&&(u=r[B][0]),u!=="C"&&(s[B]=u,B&&(f=s[B-1])),r[B]=h(r[B],i,f),s[B]!=="A"&&u==="C"&&(s[B]="C"),A(r,B)),P(t,r,n,i,B),P(r,t,i,n,B);var V=t[B],$=r&&r[B],ut=V.length,ct=r&&$.length;n.x=V[ut-2],n.y=V[ut-1],n.bx=parseFloat(V[ut-4])||n.x,n.by=parseFloat(V[ut-3])||n.y,i.bx=r&&(parseFloat($[ct-4])||i.x),i.by=r&&(parseFloat($[ct-3])||i.y),i.x=r&&$[ct-2],i.y=r&&$[ct-1]}return r?[t,r]:t},If=/,?([a-z]),?/gi,sc=function(a){return a.join(",").replace(If,"$1")},Zc=function(a,e,t,r,n){var i=-3*e+9*t-9*r+3*n,o=a*i+6*e-12*t+6*r;return a*o-3*e+3*t},Pf=function(a,e,t,r,n,i,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],A=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,B=0;B<c;B++){var V=f*h[B]+f,$=Zc(V,a,t,n,o),ut=Zc(V,e,r,i,s),ct=$*$+ut*ut;P+=A[B]*Math.sqrt(ct)}return f*P},Kc=function(a,e,t,r,n,i,o,s){for(var u=[],f=[[],[]],c,h,A,P,B=0;B<2;++B){if(B===0?(h=6*a-12*t+6*n,c=-3*a+9*t-9*n+3*o,A=3*t-3*a):(h=6*e-12*r+6*i,c=-3*e+9*r-9*i+3*s,A=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;P=-A/h,P>0&&P<1&&u.push(P);continue}var V=h*h-4*A*c,$=Math.sqrt(V);if(!(V<0)){var ut=(-h+$)/(2*c);ut>0&&ut<1&&u.push(ut);var ct=(-h-$)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var ht=u.length,xt=ht,Wt;ht--;)P=u[ht],Wt=1-P,f[0][ht]=Wt*Wt*Wt*a+3*Wt*Wt*P*t+3*Wt*P*P*n+P*P*P*o,f[1][ht]=Wt*Wt*Wt*e+3*Wt*Wt*P*r+3*Wt*P*P*i+P*P*P*s;return f[0][xt]=a,f[1][xt]=e,f[0][xt+1]=o,f[1][xt+1]=s,f[0].length=f[1].length=xt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},jl=function(a,e,t,r,n,i,o,s){if(!(Math.max(a,t)<Math.min(n,o)||Math.min(a,t)>Math.max(n,o)||Math.max(e,r)<Math.min(i,s)||Math.min(e,r)>Math.max(i,s))){var u=(a*r-e*t)*(n-o)-(a-t)*(n*s-i*o),f=(a*r-e*t)*(i-s)-(e-r)*(n*s-i*o),c=(a-t)*(i-s)-(e-r)*(n-o);if(c){var h=u/c,A=f/c,P=+h.toFixed(2),B=+A.toFixed(2);if(!(P<+Math.min(a,t).toFixed(2)||P>+Math.max(a,t).toFixed(2)||P<+Math.min(n,o).toFixed(2)||P>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(i,s).toFixed(2)||B>+Math.max(i,s).toFixed(2)))return{x:h,y:A}}}},ks=function(a,e,t){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},$c=function(a,e,t,r,n){if(n)return[["M",+a+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var i=[["M",a,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return i.parsePathArray=sc,i},ju=function(a,e,t,r){return a===null&&(a=e=t=r=0),e===null&&(e=a.y,t=a.width,r=a.height,a=a.x),{x:a,y:e,width:t,w:t,height:r,h:r,x2:a+t,y2:e+r,cx:a+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:$c(a,e,t,r),vb:[a,e,t,r].join(" ")}},Xu=function(a,e){return a=ju(a),e=ju(e),ks(e,a.x,a.y)||ks(e,a.x2,a.y)||ks(e,a.x,a.y2)||ks(e,a.x2,a.y2)||ks(a,e.x,e.y)||ks(a,e.x2,e.y)||ks(a,e.x,e.y2)||ks(a,e.x2,e.y2)||(a.x<e.x2&&a.x>e.x||e.x<a.x2&&e.x>a.x)&&(a.y<e.y2&&a.y>e.y||e.y<a.y2&&e.y>a.y)},Qc=function(a,e,t,r,n,i,o,s){(0,l.isArray)(a)||(a=[a,e,t,r,n,i,o,s]);var u=Kc.apply(null,a);return ju(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Yu=function(a,e,t,r,n,i,o,s,u){var f=1-u,c=Math.pow(f,3),h=Math.pow(f,2),A=u*u,P=A*u,B=c*a+h*3*u*t+f*3*u*u*n+P*o,V=c*e+h*3*u*r+f*3*u*u*i+P*s,$=a+2*u*(t-a)+A*(n-2*t+a),ut=e+2*u*(r-e)+A*(i-2*r+e),ct=t+2*u*(n-t)+A*(o-2*n+t),ht=r+2*u*(i-r)+A*(s-2*i+r),xt=f*a+u*t,Wt=f*e+u*r,Jt=f*n+u*o,$t=f*i+u*s,ve=90-Math.atan2($-ct,ut-ht)*180/Math.PI;return{x:B,y:V,m:{x:$,y:ut},n:{x:ct,y:ht},start:{x:xt,y:Wt},end:{x:Jt,y:$t},alpha:ve}},Do=function(a,e,t){var r=Qc(a),n=Qc(e);if(!Xu(r,n))return t?0:[];for(var i=Pf.apply(0,a),o=Pf.apply(0,e),s=~~(i/8),u=~~(o/8),f=[],c=[],h={},A=t?0:[],P=0;P<s+1;P++){var B=Yu.apply(0,a.concat(P/s));f.push({x:B.x,y:B.y,t:P/s})}for(var P=0;P<u+1;P++){var B=Yu.apply(0,e.concat(P/u));c.push({x:B.x,y:B.y,t:P/u})}for(var P=0;P<s;P++)for(var V=0;V<u;V++){var $=f[P],ut=f[P+1],ct=c[V],ht=c[V+1],xt=Math.abs(ut.x-$.x)<.001?"y":"x",Wt=Math.abs(ht.x-ct.x)<.001?"y":"x",Jt=jl($.x,$.y,ut.x,ut.y,ct.x,ct.y,ht.x,ht.y);if(Jt){if(h[Jt.x.toFixed(4)]===Jt.y.toFixed(4))continue;h[Jt.x.toFixed(4)]=Jt.y.toFixed(4);var $t=$.t+Math.abs((Jt[xt]-$[xt])/(ut[xt]-$[xt]))*(ut.t-$.t),ve=ct.t+Math.abs((Jt[Wt]-ct[Wt])/(ht[Wt]-ct[Wt]))*(ht.t-ct.t);$t>=0&&$t<=1&&ve>=0&&ve<=1&&(t?A+=1:A.push({x:Jt.x,y:Jt.y,t1:$t,t2:ve}))}}return A},xu=function(a,e,t){a=oc(a),e=oc(e);for(var r,n,i,o,s,u,f,c,h,A,P=t?0:[],B=0,V=a.length;B<V;B++){var $=a[B];if($[0]==="M")r=s=$[1],n=u=$[2];else{$[0]==="C"?(h=[r,n].concat($.slice(1)),r=h[6],n=h[7]):(h=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ct=e.length;ut<ct;ut++){var ht=e[ut];if(ht[0]==="M")i=f=ht[1],o=c=ht[2];else{ht[0]==="C"?(A=[i,o].concat(ht.slice(1)),i=A[6],o=A[7]):(A=[i,o,i,o,f,c,f,c],i=f,o=c);var xt=Do(h,A,t);if(t)P+=xt;else{for(var Wt=0,Jt=xt.length;Wt<Jt;Wt++)xt[Wt].segment1=B,xt[Wt].segment2=ut,xt[Wt].bez1=h,xt[Wt].bez2=A;P=P.concat(xt)}}}}}return P},Jc=function(a,e){return xu(a,e)};function Xl(a,e){var t=[],r=[];function n(i,o){if(i.length===1)t.push(i[0]),r.push(i[0]);else{for(var s=[],u=0;u<i.length-1;u++)u===0&&t.push(i[0]),u===i.length-2&&r.push(i[u+1]),s[u]=[(1-o)*i[u][0]+o*i[u+1][0],(1-o)*i[u][1]+o*i[u+1][1]];n(s,o)}}return a.length&&n(a,e),{left:t,right:r.reverse()}}function qc(a,e,t){var r=[[a[1],a[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var i=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Xl(i,u);n.push(f.left),i=f.right}n.push(i);var c=n.map(function(h){var A=[];return h.length===4&&(A.push("C"),A=A.concat(h[2])),h.length>=3&&(h.length===3&&A.push("Q"),A=A.concat(h[1])),h.length===2&&A.push("L"),A=A.concat(h[h.length-1]),A});return c}var Yl=function(a,e,t){if(t===1)return[[].concat(a)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(qc(a,e,t));else{var n=[].concat(a);n[0]==="M"&&(n[0]="L");for(var i=0;i<=t-1;i++)r.push(n)}return r},Of=function(a,e){if(a.length===1)return a;var t=a.length-1,r=e.length-1,n=t/r,i=[];if(a.length===1&&a[0][0]==="M"){for(var o=0;o<r-t;o++)a.push(a[0]);return a}for(var o=0;o<r;o++){var s=Math.floor(n*o);i[s]=(i[s]||0)+1}var u=i.reduce(function(f,c,h){return h===t?f.concat(a[t]):f.concat(Yl(a[h],a[h+1],c))},[]);return u.unshift(a[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Hl=function(a,e){if(a.length!==e.length)return!1;var t=!0;return(0,l.each)(a,function(r,n){if(r!==e[n])return t=!1,!1}),t};function tl(a,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),a<n&&(n=a,r="del"),{type:r,min:n}}var ru=function(a,e){var t=a.length,r=e.length,n,i,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=a[u-1];for(var f=1;f<=r;f++){i=e[f-1],Hl(n,i)?o=0:o=1;var c=s[u-1][f].min+1,h=s[u][f-1].min+1,A=s[u-1][f-1].min+o;s[u][f]=tl(c,h,A)}}return s},Aa=function(a,e){var t=ru(a,e),r=a.length,n=e.length,i=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&i.push({index:u-1,type:t[u][o].type})}for(var u=i.length-1;u>=0;u--)o=i[u].index,i[u].type==="add"?a.splice(o,0,[].concat(a[o])):a.splice(o,1)}r=a.length;var h=n-r;if(r<n)for(var u=0;u<h;u++)a[r-1][0]==="z"||a[r-1][0]==="Z"?a.splice(r-2,0,a[r-2]):a.push(a[r-1]),r+=1;return a};function Df(a,e,t){for(var r=[].concat(a),n,i=1/(t+1),o=nu(e)[0],s=1;s<=t;s++)i*=s,n=Math.floor(a.length*i),n===0?r.unshift([o[0]*i+a[n][0]*(1-i),o[1]*i+a[n][1]*(1-i)]):r.splice(n,0,[o[0]*i+a[n][0]*(1-i),o[1]*i+a[n][1]*(1-i)]);return r}function nu(a){var e=[];switch(a[0]){case"M":e.push([a[1],a[2]]);break;case"L":e.push([a[1],a[2]]);break;case"A":e.push([a[6],a[7]]);break;case"Q":e.push([a[3],a[4]]),e.push([a[1],a[2]]);break;case"T":e.push([a[1],a[2]]);break;case"C":e.push([a[5],a[6]]),e.push([a[1],a[2]]),e.push([a[3],a[4]]);break;case"S":e.push([a[3],a[4]]),e.push([a[1],a[2]]);break;case"H":e.push([a[1],a[1]]);break;case"V":e.push([a[1],a[1]]);break;default:}return e}var Zo=function(a,e){if(a.length<=1)return a;for(var t,r=0;r<e.length;r++)if(a[r][0]!==e[r][0])switch(t=nu(a[r]),e[r][0]){case"M":a[r]=["M"].concat(t[0]);break;case"L":a[r]=["L"].concat(t[0]);break;case"A":a[r]=[].concat(e[r]),a[r][6]=t[0][0],a[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Df(t,a[r-1],1);else{a[r]=e[r];break}a[r]=["Q"].concat(t.reduce(function(n,i){return n.concat(i)},[]));break;case"T":a[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Df(t,a[r-1],2);else{a[r]=e[r];break}a[r]=["C"].concat(t.reduce(function(n,i){return n.concat(i)},[]));break;case"S":if(t.length<2)if(r>0)t=Df(t,a[r-1],1);else{a[r]=e[r];break}a[r]=["S"].concat(t.reduce(function(n,i){return n.concat(i)},[]));break;default:a[r]=e[r]}return a},el=function(){function a(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return a.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},a.prototype.save=function(){},a.prototype.restore=function(){},a}(),rl=el;function Zl(a,e){var t=a.indexOf(e);t!==-1&&a.splice(t,1)}var Kl=typeof window!="undefined"&&typeof window.document!="undefined";function $l(a,e){if(a.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===a){r=!0;break}t=t.getParent()}return r}function nl(a){return a.cfg.visible&&a.cfg.capture}var Ko=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,l.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(J),il=Ko,al=S(44675),ol=function(a,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return a.concat(i||Array.prototype.slice.call(e))},Ql=function(){function a(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return a}(),sl=function(){function a(e){this.version=e,this.type="node",this.name="node",this.os=al.platform}return a}(),Ta=function(){function a(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return a}(),Nh=function(){function a(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return a}(),bn=function(){function a(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return a}(),Nf=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ei=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ul=3,Jl=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Nf]],Hu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ql(a){return a?th(a):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new bn:typeof navigator!="undefined"?th(navigator.userAgent):ws()}function uc(a){return a!==""&&Jl.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var i=n.exec(a);return!!i&&[r,i]},!1)}function Lh(a){var e=uc(a);return e?e[0]:null}function th(a){var e=uc(a);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Nh;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<ul&&(n=ol(ol([],n,!0),Rh(ul-n.length),!0)):n=[];var i=n.join("."),o=kh(a),s=Ei.exec(a);return s&&s[1]?new Ta(t,i,o,s[1]):new Ql(t,i,o)}function kh(a){for(var e=0,t=Hu.length;e<t;e++){var r=Hu[e],n=r[0],i=r[1],o=i.exec(a);if(o)return n}return null}function ws(){var a=typeof al!="undefined"&&al.version;return a?new sl(al.version.slice(1)):null}function Rh(a){for(var e=[],t=0;t<a;t++)e.push("0");return e}function fc(a,e){var t=[],r=a[0],n=a[1],i=a[2],o=a[3],s=a[4],u=a[5],f=a[6],c=a[7],h=a[8],A=e[0],P=e[1],B=e[2],V=e[3],$=e[4],ut=e[5],ct=e[6],ht=e[7],xt=e[8];return t[0]=A*r+P*o+B*f,t[1]=A*n+P*s+B*c,t[2]=A*i+P*u+B*h,t[3]=V*r+$*o+ut*f,t[4]=V*n+$*s+ut*c,t[5]=V*i+$*u+ut*h,t[6]=ct*r+ht*o+xt*f,t[7]=ct*n+ht*s+xt*c,t[8]=ct*i+ht*u+xt*h,t}function ea(a,e){var t=[],r=e[0],n=e[1];return t[0]=a[0]*r+a[3]*n+a[6],t[1]=a[1]*r+a[4]*n+a[7],t}function cc(a){var e=[],t=a[0],r=a[1],n=a[2],i=a[3],o=a[4],s=a[5],u=a[6],f=a[7],c=a[8],h=c*o-s*f,A=-c*i+s*u,P=f*i-o*u,B=t*h+r*A+n*P;return B?(B=1/B,e[0]=h*B,e[1]=(-c*r+n*f)*B,e[2]=(s*r-n*o)*B,e[3]=A*B,e[4]=(c*t-n*u)*B,e[5]=(-s*t+n*i)*B,e[6]=P*B,e[7]=(-f*t+r*u)*B,e[8]=(o*t-r*i)*B,e):null}var _s=re,Lf="matrix",eh=["zIndex","capture","visible","type"],Bh=["repeat"],iu=":",fl="*";function is(a){for(var e=[],t=0;t<a.length;t++)(0,l.isArray)(a[t])?e.push([].concat(a[t])):e.push(a[t]);return e}function Zu(a,e){var t={},r=e.attrs;for(var n in a)t[n]=r[n];return t}function lc(a,e){var t={},r=e.attr();return(0,l.each)(a,function(n,i){Bh.indexOf(i)===-1&&!(0,l.isEqual)(r[i],n)&&(t[i]=n)}),t}function hc(a,e){if(e.onFrame)return a;var t=e.startTime,r=e.delay,n=e.duration,i=Object.prototype.hasOwnProperty;return(0,l.each)(a,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,l.each)(e.toAttrs,function(s,u){i.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),a}var Ss=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,l.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r[0],o=r[1];if(!i)return this.attrs;if((0,l.isObject)(i)){for(var s in i)this.setAttr(s,i[s]);return this.afterAttrsChange(i),this}return r.length===2?(this.setAttr(i,o),this.afterAttrsChange((t={},t[i]=o,t)),this):this.attrs[i]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),i=r.indexOf(this);r.splice(i,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),i=r.indexOf(this);r.splice(i,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(Zl(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Lf,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Lf)},e.prototype.setMatrix=function(t){this.attr(Lf,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=fc(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=fc(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?ea(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=cc(r);if(n)return ea(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var i=this.getShapeBase(),o=(0,l.upperFirst)(t.type),s=i[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,l.each)(r,function(s,u){(0,l.isArray)(r[u])?n[u]=is(r[u]):n[u]=r[u]});var i=this.constructor,o=new i({attrs:n});return(0,l.each)(eh,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},a.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var i=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],h=c===void 0?l.noop:c,A=t[4],P=A===void 0?0:A,B,V,$,ut,ct;(0,l.isFunction)(o)?(B=o,o={}):(0,l.isObject)(o)&&o.onFrame&&(B=o.onFrame,V=o.repeat),(0,l.isObject)(s)?(ct=s,s=ct.duration,f=ct.easing||"easeLinear",P=ct.delay||0,V=ct.repeat||V||!1,h=ct.callback||l.noop,$=ct.pauseCallback||l.noop,ut=ct.resumeCallback||l.noop):((0,l.isNumber)(h)&&(P=h,h=null),(0,l.isFunction)(f)?(h=f,f="easeLinear"):f=f||"easeLinear");var ht=lc(o,this),xt={fromAttrs:Zu(ht,this),toAttrs:ht,duration:s,easing:f,repeat:V,callback:h,pauseCallback:$,resumeCallback:ut,delay:P,startTime:n.getTime(),id:(0,l.uniqueId)(),onFrame:B,pathFormatted:!1};i.length>0?i=hc(i,xt):n.addAnimator(this),i.push(xt),this.set("animations",i),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,l.each)(n,function(i){t&&(i.onFrame?r.attr(i.onFrame(1)):r.attr(i.toAttrs)),i.callback&&i.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,l.each)(r,function(i){i._paused=!0,i._pauseTime=n,i.pauseCallback&&i.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),i=this.get("_pause").pauseTime;return(0,l.each)(n,function(o){o.startTime=o.startTime+(r-i),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,i=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(A){var P=i[A],B=P.get("name");if(B){if((P.isGroup()||P.isCanvas&&P.isCanvas())&&s&&$l(P,s))return"break";(0,l.isArray)(B)?(0,l.each)(B,function(V){n.emitDelegateEvent(P,V,r)}):f.emitDelegateEvent(P,B,r)}},f=this,c=0;c<i.length;c++){var h=u(c);if(h==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var i=this.getEvents(),o=r+iu+n.type;(i[o]||i[fl])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),i=_s(n,[["t",t,r]]);return this.setMatrix(i),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,i=this.attr("y")||0;return this.translate(t-n,r-i),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),i=_s(n,[["s",t,r||t]]);return this.setMatrix(i),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=_s(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,i=r.y,o=this.getMatrix(),s=_s(o,[["t",-n,-i],["r",t],["t",n,i]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var i=this.getMatrix(),o=_s(i,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(il),as=Ss,cl={},_o="_INDEX";function dc(a,e){if(a.set("canvas",e),a.isGroup()){var t=a.get("children");t.length&&t.forEach(function(r){dc(r,e)})}}function au(a,e){if(a.set("timeline",e),a.isGroup()){var t=a.get("children");t.length&&t.forEach(function(r){au(r,e)})}}function ll(a,e){var t=a.getChildren();return t.indexOf(e)>=0}function rh(a,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),Zl(a.getChildren(),e)}function vc(a){return function(e,t){var r=a(e,t);return r===0?e[_o]-t[_o]:r}}var kf=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,i=-1/0,o=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});u.length>0?((0,l.each)(u,function(c){var h=c.getBBox();o.push(h.minX,h.maxX),s.push(h.minY,h.maxY)}),t=(0,l.min)(o),r=(0,l.max)(o),n=(0,l.min)(s),i=(0,l.max)(s)):(t=0,r=0,n=0,i=0);var f={x:t,y:n,minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n};return f},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,i=-1/0,o=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});u.length>0?((0,l.each)(u,function(c){var h=c.getCanvasBBox();o.push(h.minX,h.maxX),s.push(h.minY,h.maxY)}),t=(0,l.min)(o),r=(0,l.max)(o),n=(0,l.min)(s),i=(0,l.max)(s)):(t=0,r=0,n=0,i=0);var f={x:t,y:n,minX:t,minY:n,maxX:r,maxY:i,width:r-t,height:i-n};return f},e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(a.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();a.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,l.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=t[1];(0,l.isObject)(n)?i=n:i.type=n;var o=cl[i.type];o||(o=(0,l.upperFirst)(i.type),cl[i.type]=o);var s=this.getShapeBase(),u=new s[o](i);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=t[1],o;if((0,l.isFunction)(n))i?o=new n(i):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!nl(this))return null;var i=this.getChildren(),o;if(this.isCanvas())o=this._findShape(i,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(i,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,i){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(nl(u)&&(u.isGroup()?o=u.getShape(r,n,i):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),i=this.get("timeline"),o=t.getParent();o&&rh(o,t,!1),t.set("parent",this),r&&dc(t,r),i&&au(t,i),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,l.each)(t,function(r,n){return r[_o]=n,r}),t.sort(vc(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),a.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,l.each)(n,function(i){t(i)&&r.push(i),i.isGroup()&&(r=r.concat(i.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,l.each)(n,function(i){if(t(i)?r=i:i.isGroup()&&(r=i.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(as),Gi=kf,Rs=0,os=0,No=0,Bs=1e3,wu,Gs,Rf=0,ou=0,Ku=0,_u=typeof performance=="object"&&performance.now?performance:Date,ss=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function hl(){return ou||(ss(Fs),ou=_u.now()+Ku)}function Fs(){ou=0}function an(){this._call=this._time=this._next=null}an.prototype=Bf.prototype={constructor:an,restart:function(a,e,t){if(typeof a!="function")throw new TypeError("callback is not a function");t=(t==null?hl():+t)+(e==null?0:+e),!this._next&&Gs!==this&&(Gs?Gs._next=this:wu=this,Gs=this),this._call=a,this._time=t,pc()},stop:function(){this._call&&(this._call=null,this._time=1/0,pc())}};function Bf(a,e,t){var r=new an;return r.restart(a,e,t),r}function Gh(){hl(),++Rs;for(var a=wu,e;a;)(e=ou-a._time)>=0&&a._call.call(null,e),a=a._next;--Rs}function Gf(){ou=(Rf=_u.now())+Ku,Rs=os=0;try{Gh()}finally{Rs=0,Uh(),ou=0}}function Fh(){var a=_u.now(),e=a-Rf;e>Bs&&(Ku-=e,Rf=a)}function Uh(){for(var a,e=wu,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),a=e,e=e._next):(t=e._next,e._next=null,e=a?a._next=t:wu=t);Gs=a,pc(r)}function pc(a){if(!Rs){os&&(os=clearTimeout(os));var e=a-ou;e>24?(a<1/0&&(os=setTimeout(Gf,a-_u.now()-Ku)),No&&(No=clearInterval(No))):(No||(Rf=_u.now(),No=setInterval(Fh,Bs)),Rs=1,ss(Gf))}}function dl(a,e,t){a.prototype=e.prototype=t,t.constructor=a}function nh(a,e){var t=Object.create(a.prototype);for(var r in e)t[r]=e[r];return t}function Us(){}var Su=.7,Mu=1/Su,$u="\\s*([+-]?\\d+)\\s*",Ms="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",lo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ih=/^#([0-9a-f]{3,8})$/,Qu=new RegExp("^rgb\\("+[$u,$u,$u]+"\\)$"),ah=new RegExp("^rgb\\("+[lo,lo,lo]+"\\)$"),Ju=new RegExp("^rgba\\("+[$u,$u,$u,Ms]+"\\)$"),vl=new RegExp("^rgba\\("+[lo,lo,lo,Ms]+"\\)$"),pl=new RegExp("^hsl\\("+[Ms,lo,lo]+"\\)$"),gl=new RegExp("^hsla\\("+[Ms,lo,lo,Ms]+"\\)$"),gc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dl(Us,qu,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:yc,formatHex:yc,formatHsl:mc,formatRgb:yl,toString:yl});function yc(){return this.rgb().formatHex()}function mc(){return Ec(this).formatHsl()}function yl(){return this.rgb().formatRgb()}function qu(a){var e,t;return a=(a+"").trim().toLowerCase(),(e=ih.exec(a))?(t=e[1].length,e=parseInt(e[1],16),t===6?ml(e):t===3?new gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ff(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ff(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qu.exec(a))?new gi(e[1],e[2],e[3],1):(e=ah.exec(a))?new gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ju.exec(a))?Ff(e[1],e[2],e[3],e[4]):(e=vl.exec(a))?Ff(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pl.exec(a))?ef(e[1],e[2]/100,e[3]/100,1):(e=gl.exec(a))?ef(e[1],e[2]/100,e[3]/100,e[4]):gc.hasOwnProperty(a)?ml(gc[a]):a==="transparent"?new gi(NaN,NaN,NaN,0):null}function ml(a){return new gi(a>>16&255,a>>8&255,a&255,1)}function Ff(a,e,t,r){return r<=0&&(a=e=t=NaN),new gi(a,e,t,r)}function oh(a){return a instanceof Us||(a=qu(a)),a?(a=a.rgb(),new gi(a.r,a.g,a.b,a.opacity)):new gi}function tf(a,e,t,r){return arguments.length===1?oh(a):new gi(a,e,t,r==null?1:r)}function gi(a,e,t,r){this.r=+a,this.g=+e,this.b=+t,this.opacity=+r}dl(gi,tf,nh(Us,{brighter:function(a){return a=a==null?Mu:Math.pow(Mu,a),new gi(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=a==null?Su:Math.pow(Su,a),new gi(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sh,formatHex:sh,formatRgb:bl,toString:bl}));function sh(){return"#"+bc(this.r)+bc(this.g)+bc(this.b)}function bl(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(a===1?")":", "+a+")")}function bc(a){return a=Math.max(0,Math.min(255,Math.round(a)||0)),(a<16?"0":"")+a.toString(16)}function ef(a,e,t,r){return r<=0?a=e=t=NaN:t<=0||t>=1?a=e=NaN:e<=0&&(a=NaN),new $o(a,e,t,r)}function Ec(a){if(a instanceof $o)return new $o(a.h,a.s,a.l,a.opacity);if(a instanceof Us||(a=qu(a)),!a)return new $o;if(a instanceof $o)return a;a=a.rgb();var e=a.r/255,t=a.g/255,r=a.b/255,n=Math.min(e,t,r),i=Math.max(e,t,r),o=NaN,s=i-n,u=(i+n)/2;return s?(e===i?o=(t-r)/s+(t<r)*6:t===i?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?i+n:2-i-n,o*=60):s=u>0&&u<1?0:o,new $o(o,s,u,a.opacity)}function Ke(a,e,t,r){return arguments.length===1?Ec(a):new $o(a,e,t,r==null?1:r)}function $o(a,e,t,r){this.h=+a,this.s=+e,this.l=+t,this.opacity=+r}dl($o,Ke,nh(Us,{brighter:function(a){return a=a==null?Mu:Math.pow(Mu,a),new $o(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=a==null?Su:Math.pow(Su,a),new $o(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,n=2*t-r;return new gi(zs(a>=240?a-240:a+120,n,r),zs(a,n,r),zs(a<120?a+240:a-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return a=isNaN(a)?1:Math.max(0,Math.min(1,a)),(a===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(a===1?")":", "+a+")")}}));function zs(a,e,t){return(a<60?e+(t-e)*a/60:a<180?t:a<240?e+(t-e)*(240-a)/60:e)*255}function rf(a,e,t,r,n){var i=a*a,o=i*a;return((1-3*a+3*i-o)*e+(4-6*i+3*o)*t+(1+3*a+3*i-3*o)*r+o*n)/6}function El(a){var e=a.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=a[r],i=a[r+1],o=r>0?a[r-1]:2*n-i,s=r<e-1?a[r+2]:2*i-n;return rf((t-r/e)*e,o,n,i,s)}}function xc(a){var e=a.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=a[(r+e-1)%e],i=a[r%e],o=a[(r+1)%e],s=a[(r+2)%e];return rf((t-r/e)*e,n,i,o,s)}}function Cu(a){return function(){return a}}function wc(a,e){return function(t){return a+t*e}}function nf(a,e,t){return a=Math.pow(a,t),e=Math.pow(e,t)-a,t=1/t,function(r){return Math.pow(a+r*e,t)}}function _c(a,e){var t=e-a;return t?wc(a,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(a)?e:a)}function Sc(a){return(a=+a)==1?af:function(e,t){return t-e?nf(e,t,a):Cu(isNaN(e)?t:e)}}function af(a,e){var t=e-a;return t?wc(a,t):Cu(isNaN(a)?e:a)}var la=function a(e){var t=Sc(e);function r(n,i){var o=t((n=tf(n)).r,(i=tf(i)).r),s=t(n.g,i.g),u=t(n.b,i.b),f=af(n.opacity,i.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=a,r}(1);function su(a){return function(e){var t=e.length,r=new Array(t),n=new Array(t),i=new Array(t),o,s;for(o=0;o<t;++o)s=tf(e[o]),r[o]=s.r||0,n[o]=s.g||0,i[o]=s.b||0;return r=a(r),n=a(n),i=a(i),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=i(u),s+""}}}var xl=su(El),Uf=su(xc);function Lo(a,e){e||(e=[]);var t=a?Math.min(e.length,a.length):0,r=e.slice(),n;return function(i){for(n=0;n<t;++n)r[n]=a[n]*(1-i)+e[n]*i;return r}}function uu(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function fu(a,e){return(uu(e)?Lo:Cs)(a,e)}function Cs(a,e){var t=e?e.length:0,r=a?Math.min(t,a.length):0,n=new Array(r),i=new Array(t),o;for(o=0;o<r;++o)n[o]=us(a[o],e[o]);for(;o<t;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=n[o](s);return i}}function cu(a,e){var t=new Date;return a=+a,e=+e,function(r){return t.setTime(a*(1-r)+e*r),t}}function As(a,e){return a=+a,e=+e,function(t){return a*(1-t)+e*t}}function lu(a,e){var t={},r={},n;(a===null||typeof a!="object")&&(a={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in a?t[n]=us(a[n],e[n]):r[n]=e[n];return function(i){for(n in t)r[n]=t[n](i);return r}}var Ts=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Au=new RegExp(Ts.source,"g");function zf(a){return function(){return a}}function of(a){return function(e){return a(e)+""}}function Mc(a,e){var t=Ts.lastIndex=Au.lastIndex=0,r,n,i,o=-1,s=[],u=[];for(a=a+"",e=e+"";(r=Ts.exec(a))&&(n=Au.exec(e));)(i=n.index)>t&&(i=e.slice(t,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:As(r,n)})),t=Au.lastIndex;return t<e.length&&(i=e.slice(t),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?of(u[0].x):zf(e):(e=u.length,function(f){for(var c=0,h;c<e;++c)s[(h=u[c]).i]=h.x(f);return s.join("")})}function us(a,e){var t=typeof e,r;return e==null||t==="boolean"?Cu(e):(t==="number"?As:t==="string"?(r=qu(e))?(e=r,la):Mc:e instanceof qu?la:e instanceof Date?cu:uu(e)?Lo:Array.isArray(e)?Cs:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lu:As)(a,e)}function Tu(a){return+a}function ko(a){return a*a}function Cc(a){return a*(2-a)}function Ac(a){return((a*=2)<=1?a*a:--a*(2-a)+1)/2}function Iu(a){return a*a*a}function Tc(a){return--a*a*a+1}function Qo(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var Ic=3,Pu=function a(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=a,t}(Ic),uh=function a(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=a,t}(Ic),fs=function a(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=a,t}(Ic),sf=Math.PI,cs=sf/2;function Ro(a){return+a==1?1:1-Math.cos(a*cs)}function Wf(a){return Math.sin(a*cs)}function Is(a){return(1-Math.cos(sf*a))/2}function Bo(a){return(Math.pow(2,-10*a)-.0009765625)*1.0009775171065494}function Pc(a){return Bo(1-+a)}function ls(a){return 1-Bo(a)}function Ws(a){return((a*=2)<=1?Bo(1-a):2-Bo(a-1))/2}function Ua(a){return 1-Math.sqrt(1-a*a)}function hs(a){return Math.sqrt(1- --a*a)}function Go(a){return((a*=2)<=1?1-Math.sqrt(1-a*a):Math.sqrt(1-(a-=2)*a)+1)/2}var Ps=4/11,Oc=6/11,Vf=8/11,uf=3/4,wl=9/11,Dc=10/11,jf=15/16,ff=21/22,_l=63/64,Ou=1/Ps/Ps;function Xf(a){return 1-ds(1-a)}function ds(a){return(a=+a)<Ps?Ou*a*a:a<Vf?Ou*(a-=Oc)*a+uf:a<Dc?Ou*(a-=wl)*a+jf:Ou*(a-=ff)*a+_l}function Yf(a){return((a*=2)<=1?1-ds(1-a):ds(a-1)+1)/2}var Jo=1.70158,cf=function a(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=a,t}(Jo),Hf=function a(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=a,t}(Jo),$i=function a(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=a,t}(Jo),Du=2*Math.PI,Nu=1,Vs=.3,fh=function a(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Du);function n(i){return e*Bo(- --i)*Math.sin((r-i)/t)}return n.amplitude=function(i){return a(i,t*Du)},n.period=function(i){return a(e,i)},n}(Nu,Vs),Zf=function a(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Du);function n(i){return 1-e*Bo(i=+i)*Math.sin((i+r)/t)}return n.amplitude=function(i){return a(i,t*Du)},n.period=function(i){return a(e,i)},n}(Nu,Vs),zh=function a(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Du);function n(i){return((i=i*2-1)<0?e*Bo(-i)*Math.sin((r-i)/t):2-e*Bo(i)*Math.sin((r+i)/t))/2}return n.amplitude=function(i){return a(i,t*Du)},n.period=function(i){return a(e,i)},n}(Nu,Vs),ch={};function Wh(a){return ch[a.toLowerCase()]||N[a]}function Lu(a,e){ch[a.toLowerCase()]=e}var lh=function(a){return["fill","stroke","fillStyle","strokeStyle"].includes(a)},hh=function(a){return/^[r,R,L,l]{1}[\s]*\(/.test(a)},Sl=[1,0,0,0,1,0,0,0,1];function Vh(a,e,t){var r={},n=e.fromAttrs,i=e.toAttrs;if(!a.destroyed){var o;for(var s in i)if(!(0,l.isEqual)(n[s],i[s]))if(s==="path"){var u=i[s],f=n[s];u.length>f.length?(u=Eu(i[s]),f=Eu(n[s]),f=Aa(f,u),f=Zo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=Eu(i[s]),f=Eu(n[s]),f=Zo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var h=u[c],A=f[c],P=[],B=0;B<h.length;B++)(0,l.isNumber)(h[B])&&A&&(0,l.isNumber)(A[B])?(o=us(A[B],h[B]),P.push(o(t))):P.push(h[B]);r[s].push(P)}}else if(s==="matrix"){var V=fu(n[s]||Sl,i[s]||Sl),$=V(t);r[s]=$}else lh(s)&&hh(i[s])?r[s]=i[s]:(0,l.isFunction)(i[s])||(o=us(n[s],i[s]),r[s]=o(t));a.attr(r)}}function dh(a,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var i,o=e.duration,s=e.easing,u=Wh(s);if(t=t-r-e.delay,e.repeat)i=t%o/o,i=u(i);else if(i=t/o,i<1)i=u(i);else return e.onFrame?a.attr(e.onFrame(1)):a.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(i);a.attr(f)}else Vh(a,e,i);return!1}var jh=function(){function a(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return a.prototype.initTimer=function(){var e=this,t=!1,r,n,i;this.timer=Bf(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)i=n[u],t=dh(r,i,o),t&&(n.splice(u,1),t=!1,i.callback&&i.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},a.prototype.addAnimator=function(e){this.animators.push(e)},a.prototype.removeAnimator=function(e){this.animators.splice(e,1)},a.prototype.isAnimating=function(){return!!this.animators.length},a.prototype.stop=function(){this.timer&&this.timer.stop()},a.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},a.prototype.getTime=function(){return this.current},a}(),Qa=jh,vh=40,ku=0,hu=":",Ml=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function ph(a,e){for(var t in a)if(a.hasOwnProperty(t)&&t.indexOf(hu+e)>=0)return!0;return!1}function Kf(a,e,t){t.name=e,t.target=a,t.currentTarget=a,t.delegateTarget=a,a.emit(e,t)}function gh(a,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),a.isCanvas()&&n)return;if(r&&$l(a,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=a,t.delegateTarget=a,a.emit(e,t)}}var ho=function(){function a(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,i=n.get("el");if(i!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,i=n.get("el");if(i!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return a.prototype.init=function(){this._bindEvents()},a.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,l.each)(Ml,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},a.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,l.each)(Ml,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},a.prototype._getEventObj=function(e,t,r,n,i,o){var s=new rl(e,t);return s.fromShape=i,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},a.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},a.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},a.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),i=this["_on"+e],o=!1;if(i)i.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},a.prototype._onmousedown=function(e,t,r){r.button===ku&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},a.prototype._emitMouseoverEvents=function(e,t,r,n){var i=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(i.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},a.prototype._emitDragoverEvents=function(e,t,r,n,i){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),i||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),i&&this._emitEvent("dragover",e,t,n)},a.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},a.prototype._onmouseup=function(e,t,r){if(r.button===ku){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},a.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},a.prototype._onmousemove=function(e,t,r){var n=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,i,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,h=s.clientX-e.clientX,A=s.clientY-e.clientY,P=h*h+A*A;c>120||P>vh?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,i,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,i,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,i,t),this._emitEvent("mousemove",r,e,t)}},a.prototype._emitEvent=function(e,t,r,n,i,o){var s=this._getEventObj(e,t,r,n,i,o);if(n){s.shape=n,Kf(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||gh(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;Kf(f,e,s)}},a.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},a}(),du=ho,ii="px",no=ql(),Nc=no&&no.name==="firefox",Xh=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,l.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new du({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Qa(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");Kl&&(n.style.width=t+ii,n.style.height=r+ii)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");Kl&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(Nc&&!(0,l.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,l.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),i=n.x,o=n.y;return this.getPointByClient(i,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),i=n.getBoundingClientRect();return{x:t-i.left,y:r-i.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),i=n.getBoundingClientRect();return{x:t+i.left,y:r+i.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),a.prototype.destroy.call(this))},e}(Gi),Cl=Xh,Yh=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=a.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var i=r[n];t.add(i.clone())}return t},e}(Gi),yh=Yh,Lc=function(a){(0,U.__extends)(e,a);function e(t){return a.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){a.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,i=t.minY,o=t.maxX,s=t.maxY;if(r){var u=ea(r,[t.minX,t.minY]),f=ea(r,[t.maxX,t.minY]),c=ea(r,[t.minX,t.maxY]),h=ea(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],h[0]),o=Math.max(u[0],f[0],c[0],h[0]),i=Math.min(u[1],f[1],c[1],h[1]),s=Math.max(u[1],f[1],c[1],h[1])}var A=this.attrs;if(A.shadowColor){var P=A.shadowBlur,B=P===void 0?0:P,V=A.shadowOffsetX,$=V===void 0?0:V,ut=A.shadowOffsetY,ct=ut===void 0?0:ut,ht=n-B+$,xt=o+B+$,Wt=i-B+ct,Jt=s+B+ct;n=Math.min(n,ht),o=Math.max(o,xt),i=Math.min(i,Wt),s=Math.max(s,Jt)}return{x:n,y:i,minX:n,minY:i,maxX:o,maxY:s,width:o-n,height:s-i}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),i=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||i&&i.isHit(s,u)))},e}(as),Al=Lc,Tl=new Map;function Os(a,e){Tl.set(a,e)}function Il(a){return Tl.get(a)}function lf(a){var e=a.attr(),t=e.x,r=e.y,n=e.width,i=e.height;return{x:t,y:r,width:n,height:i}}function kc(a){var e=a.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Ru(a){return Math.min.apply(null,a)}function $f(a){return Math.max.apply(null,a)}function io(a,e,t,r){var n=a-t,i=e-r;return Math.sqrt(n*n+i*i)}function js(a,e){return Math.abs(a-e)<.001}function Xs(a,e){var t=Ru(a),r=Ru(e),n=$f(a),i=$f(e);return{x:t,y:r,width:n-t,height:i-r}}function Rc(a,e,t,r){return{minX:Ru([a,t]),maxX:$f([a,t]),minY:Ru([e,r]),maxY:$f([e,r])}}function Ct(a){return(a+Math.PI*2)%(Math.PI*2)}var ce={box:function(a,e,t,r){return Xs([a,t],[e,r])},length:function(a,e,t,r){return io(a,e,t,r)},pointAt:function(a,e,t,r,n){return{x:(1-n)*a+n*t,y:(1-n)*e+n*r}},pointDistance:function(a,e,t,r,n,i){var o=(t-a)*(n-a)+(r-e)*(i-e);if(o<0)return io(a,e,n,i);var s=(t-a)*(t-a)+(r-e)*(r-e);return o>s?io(t,r,n,i):this.pointToLine(a,e,t,r,n,i)},pointToLine:function(a,e,t,r,n,i){var o=[t-a,r-e];if(On.exactEquals(o,[0,0]))return Math.sqrt((n-a)*(n-a)+(i-e)*(i-e));var s=[-o[1],o[0]];On.normalize(s,s);var u=[n-a,i-e];return Math.abs(On.dot(u,s))},tangentAngle:function(a,e,t,r){return Math.atan2(r-e,t-a)}},ze=1e-4;function wr(a,e,t,r,n,i){var o,s=1/0,u=[t,r],f=20;i&&i>200&&(f=i/10);for(var c=1/f,h=c/10,A=0;A<=f;A++){var P=A*c,B=[n.apply(null,a.concat([P])),n.apply(null,e.concat([P]))],V=io(u[0],u[1],B[0],B[1]);V<s&&(o=P,s=V)}if(o===0)return{x:a[0],y:e[0]};if(o===1){var $=a.length;return{x:a[$-1],y:e[$-1]}}s=1/0;for(var A=0;A<32&&!(h<ze);A++){var ut=o-h,ct=o+h,B=[n.apply(null,a.concat([ut])),n.apply(null,e.concat([ut]))],V=io(u[0],u[1],B[0],B[1]);if(ut>=0&&V<s)o=ut,s=V;else{var ht=[n.apply(null,a.concat([ct])),n.apply(null,e.concat([ct]))],xt=io(u[0],u[1],ht[0],ht[1]);ct<=1&&xt<s?(o=ct,s=xt):h*=.5}}return{x:n.apply(null,a.concat([o])),y:n.apply(null,e.concat([o]))}}function Rr(a,e){for(var t=0,r=a.length,n=0;n<r;n++){var i=a[n],o=e[n],s=a[(n+1)%r],u=e[(n+1)%r];t+=io(i,o,s,u)}return t/2}function br(a,e,t,r){var n=1-r;return n*n*a+2*r*n*e+r*r*t}function Ar(a,e,t){var r=a+t-2*e;if(js(r,0))return[.5];var n=(a-e)/r;return n<=1&&n>=0?[n]:[]}function jr(a,e,t,r){return 2*(1-r)*(e-a)+2*r*(t-e)}function Hr(a,e,t,r,n,i,o){var s=br(a,t,n,o),u=br(e,r,i,o),f=ce.pointAt(a,e,t,r,o),c=ce.pointAt(t,r,n,i,o);return[[a,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,i]]}function Kr(a,e,t,r,n,i,o){if(o===0)return(io(a,e,t,r)+io(t,r,n,i)+io(a,e,n,i))/2;var s=Hr(a,e,t,r,n,i,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),Kr.apply(null,u)+Kr.apply(null,f)}var Vr={box:function(a,e,t,r,n,i){var o=Ar(a,t,n)[0],s=Ar(e,r,i)[0],u=[a,n],f=[e,i];return o!==void 0&&u.push(br(a,t,n,o)),s!==void 0&&f.push(br(e,r,i,s)),Xs(u,f)},length:function(a,e,t,r,n,i){return Kr(a,e,t,r,n,i,3)},nearestPoint:function(a,e,t,r,n,i,o,s){return wr([a,t,n],[e,r,i],o,s,br)},pointDistance:function(a,e,t,r,n,i,o,s){var u=this.nearestPoint(a,e,t,r,n,i,o,s);return io(u.x,u.y,o,s)},interpolationAt:br,pointAt:function(a,e,t,r,n,i,o){return{x:br(a,t,n,o),y:br(e,r,i,o)}},divide:function(a,e,t,r,n,i,o){return Hr(a,e,t,r,n,i,o)},tangentAngle:function(a,e,t,r,n,i,o){var s=jr(a,t,n,o),u=jr(e,r,i,o),f=Math.atan2(u,s);return Ct(f)}};function Qr(a,e,t,r,n){var i=1-n;return i*i*i*a+3*e*n*i*i+3*t*n*n*i+r*n*n*n}function d(a,e,t,r,n){var i=1-n;return 3*(i*i*(e-a)+2*i*n*(t-e)+n*n*(r-t))}function L(a,e,t,r){var n=-3*a+9*e-9*t+3*r,i=6*a-12*e+6*t,o=3*e-3*a,s=[],u,f,c;if(js(n,0))js(i,0)||(u=-o/i,u>=0&&u<=1&&s.push(u));else{var h=i*i-4*n*o;js(h,0)?s.push(-i/(2*n)):h>0&&(c=Math.sqrt(h),u=(-i+c)/(2*n),f=(-i-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function j(a,e,t,r,n,i,o,s,u){var f=Qr(a,t,n,o,u),c=Qr(e,r,i,s,u),h=ce.pointAt(a,e,t,r,u),A=ce.pointAt(t,r,n,i,u),P=ce.pointAt(n,i,o,s,u),B=ce.pointAt(h.x,h.y,A.x,A.y,u),V=ce.pointAt(A.x,A.y,P.x,P.y,u);return[[a,e,h.x,h.y,B.x,B.y,f,c],[f,c,V.x,V.y,P.x,P.y,o,s]]}function tt(a,e,t,r,n,i,o,s,u){if(u===0)return Rr([a,t,n,o],[e,r,i,s]);var f=j(a,e,t,r,n,i,o,s,.5),c=f[0],h=f[1];return c.push(u-1),h.push(u-1),tt.apply(null,c)+tt.apply(null,h)}var lt={extrema:L,box:function(a,e,t,r,n,i,o,s){for(var u=[a,o],f=[e,s],c=L(a,t,n,o),h=L(e,r,i,s),A=0;A<c.length;A++)u.push(Qr(a,t,n,o,c[A]));for(var A=0;A<h.length;A++)f.push(Qr(e,r,i,s,h[A]));return Xs(u,f)},length:function(a,e,t,r,n,i,o,s){return tt(a,e,t,r,n,i,o,s,3)},nearestPoint:function(a,e,t,r,n,i,o,s,u,f,c){return wr([a,t,n,o],[e,r,i,s],u,f,Qr,c)},pointDistance:function(a,e,t,r,n,i,o,s,u,f,c){var h=this.nearestPoint(a,e,t,r,n,i,o,s,u,f,c);return io(h.x,h.y,u,f)},interpolationAt:Qr,pointAt:function(a,e,t,r,n,i,o,s,u){return{x:Qr(a,t,n,o,u),y:Qr(e,r,i,s,u)}},divide:function(a,e,t,r,n,i,o,s,u){return j(a,e,t,r,n,i,o,s,u)},tangentAngle:function(a,e,t,r,n,i,o,s,u){var f=d(a,t,n,o,u),c=d(e,r,i,s,u);return Ct(Math.atan2(c,f))}};function pt(a,e){var t=Math.abs(a);return e>0?t:t*-1}var St={box:function(a,e,t,r){return{x:a-t,y:e-r,width:t*2,height:r*2}},length:function(a,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(a,e,t,r,n,i){var o=t,s=r;if(o===0||s===0)return{x:a,y:e};for(var u=n-a,f=i-e,c=Math.abs(u),h=Math.abs(f),A=o*o,P=s*s,B=Math.PI/4,V,$,ut=0;ut<4;ut++){V=o*Math.cos(B),$=s*Math.sin(B);var ct=(A-P)*Math.pow(Math.cos(B),3)/o,ht=(P-A)*Math.pow(Math.sin(B),3)/s,xt=V-ct,Wt=$-ht,Jt=c-ct,$t=h-ht,ve=Math.hypot(Wt,xt),Oe=Math.hypot($t,Jt),xe=ve*Math.asin((xt*$t-Wt*Jt)/(ve*Oe)),Ze=xe/Math.sqrt(A+P-V*V-$*$);B+=Ze,B=Math.min(Math.PI/2,Math.max(0,B))}return{x:a+pt(V,u),y:e+pt($,f)}},pointDistance:function(a,e,t,r,n,i){var o=this.nearestPoint(a,e,t,r,n,i);return io(o.x,o.y,n,i)},pointAt:function(a,e,t,r,n){var i=2*Math.PI*n;return{x:a+t*Math.cos(i),y:e+r*Math.sin(i)}},tangentAngle:function(a,e,t,r,n){var i=2*Math.PI*n,o=Math.atan2(r*Math.cos(i),-t*Math.sin(i));return Ct(o)}};function Ot(a,e,t,r,n,i,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function Ut(a,e,t,r,n,i,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function qt(a,e,t){return Math.atan(-e/a*Math.tan(t))}function fe(a,e,t){return Math.atan(e/(a*Math.tan(t)))}function oe(a,e,t,r,n,i){return t*Math.cos(n)*Math.cos(i)-r*Math.sin(n)*Math.sin(i)+a}function Ne(a,e,t,r,n,i){return t*Math.sin(n)*Math.cos(i)+r*Math.cos(n)*Math.sin(i)+e}function rr(a,e,t,r){var n=Math.atan2(r*a,t*e);return(n+Math.PI*2)%(Math.PI*2)}function Pr(a,e,t){return{x:a*Math.cos(t),y:e*Math.sin(t)}}function ur(a,e,t){var r=Math.cos(t),n=Math.sin(t);return[a*r-e*n,a*n+e*r]}var hr={box:function(a,e,t,r,n,i,o){for(var s=qt(t,r,n),u=1/0,f=-1/0,c=[i,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var A=s+h;i<o?i<A&&A<o&&c.push(A):o<A&&A<i&&c.push(A)}for(var h=0;h<c.length;h++){var P=oe(a,e,t,r,n,c[h]);P<u&&(u=P),P>f&&(f=P)}for(var B=fe(t,r,n),V=1/0,$=-1/0,ut=[i,o],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var ct=B+h;i<o?i<ct&&ct<o&&ut.push(ct):o<ct&&ct<i&&ut.push(ct)}for(var h=0;h<ut.length;h++){var ht=Ne(a,e,t,r,n,ut[h]);ht<V&&(V=ht),ht>$&&($=ht)}return{x:u,y:V,width:f-u,height:$-V}},length:function(a,e,t,r,n,i,o){},nearestPoint:function(a,e,t,r,n,i,o,s,u){var f=ur(s-a,u-e,-n),c=f[0],h=f[1],A=St.nearestPoint(0,0,t,r,c,h),P=rr(t,r,A.x,A.y);P<i?A=Pr(t,r,i):P>o&&(A=Pr(t,r,o));var B=ur(A.x,A.y,n);return{x:B[0]+a,y:B[1]+e}},pointDistance:function(a,e,t,r,n,i,o,s,u){var f=this.nearestPoint(a,e,t,r,s,u);return io(f.x,f.y,s,u)},pointAt:function(a,e,t,r,n,i,o,s){var u=(o-i)*s+i;return{x:oe(a,e,t,r,n,u),y:Ne(a,e,t,r,n,u)}},tangentAngle:function(a,e,t,r,n,i,o,s){var u=(o-i)*s+i,f=Ot(a,e,t,r,n,i,o,u),c=Ut(a,e,t,r,n,i,o,u);return Ct(Math.atan2(c,f))}};function fr(a){for(var e=0,t=[],r=0;r<a.length-1;r++){var n=a[r],i=a[r+1],o=io(n[0],n[1],i[0],i[1]),s={from:n,to:i,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function Xr(a){if(a.length<2)return 0;for(var e=0,t=0;t<a.length-1;t++){var r=a[t],n=a[t+1];e+=io(r[0],r[1],n[0],n[1])}return e}function fn(a,e){if(e>1||e<0||a.length<2)return null;var t=fr(a),r=t.segments,n=t.totalLength;if(n===0)return{x:a[0][0],y:a[0][1]};for(var i=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,h=u.length/n;if(e>=i&&e<=i+h){var A=(e-i)/h;o=ce.pointAt(f[0],f[1],c[0],c[1],A);break}i+=h}return o}function tn(a,e){if(e>1||e<0||a.length<2)return 0;for(var t=fr(a),r=t.segments,n=t.totalLength,i=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,h=u.length/n;if(e>=i&&e<=i+h){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}i+=h}return o}function Tn(a,e,t){for(var r=1/0,n=0;n<a.length-1;n++){var i=a[n],o=a[n+1],s=ce.pointDistance(i[0],i[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var wn={box:function(a){for(var e=[],t=[],r=0;r<a.length;r++){var n=a[r];e.push(n[0]),t.push(n[1])}return Xs(e,t)},length:function(a){return Xr(a)},pointAt:function(a,e){return fn(a,e)},pointDistance:function(a,e,t){return Tn(a,e,t)},tangentAngle:function(a,e){return tn(a,e)}};function Rn(a){var e=a.slice(0);return a.length&&e.push(a[0]),e}var Kn={box:function(a){return wn.box(a)},length:function(a){return Xr(Rn(a))},pointAt:function(a,e){return fn(Rn(a),e)},pointDistance:function(a,e,t){return Tn(Rn(a),e,t)},tangentAngle:function(a,e){return tn(Rn(a),e)}};function Fn(a,e){return!a||!e?a||e:{minX:Math.min(a.minX,e.minX),minY:Math.min(a.minY,e.minY),maxX:Math.max(a.maxX,e.maxX),maxY:Math.max(a.maxY,e.maxY)}}function Vi(a,e){var t=a.get("startArrowShape"),r=a.get("endArrowShape"),n=null,i=null;return t&&(n=t.getCanvasBBox(),e=Fn(e,n)),r&&(i=r.getCanvasBBox(),e=Fn(e,i)),e}function Qn(a){for(var e=a.attr(),t=e.points,r=[],n=[],i=0;i<t.length;i++){var o=t[i];r.push(o[0]),n.push(o[1])}var s=Xs(r,n),u=s.x,f=s.y,c=s.width,h=s.height,A={minX:u,minY:f,maxX:u+c,maxY:f+h};return A=Vi(a,A),{x:A.minX,y:A.minY,width:A.maxX-A.minX,height:A.maxY-A.minY}}function oa(a){for(var e=a.attr(),t=e.points,r=[],n=[],i=0;i<t.length;i++){var o=t[i];r.push(o[0]),n.push(o[1])}return Xs(r,n)}var Di=null;function ui(){if(!Di){var a=document.createElement("canvas");a.width=1,a.height=1,Di=a.getContext("2d")}return Di}function Qi(a,e,t){var r=1;if((0,l.isString)(a)&&(r=a.split(`
`).length),r>1){var n=sa(e,t);return e*r+n*(r-1)}return e}function sa(a,e){return e?e-a:a*.14}function _a(a,e){var t=ui(),r=0;if((0,l.isNil)(a)||a==="")return r;if(t.save(),t.font=e,(0,l.isString)(a)&&a.includes(`
`)){var n=a.split(`
`);(0,l.each)(n,function(i){var o=t.measureText(i).width;r<o&&(r=o)})}else r=t.measureText(a).width;return t.restore(),r}function za(a){var e=a.fontSize,t=a.fontFamily,r=a.fontWeight,n=a.fontStyle,i=a.fontVariant;return[n,i,r,e+"px",t].join(" ").trim()}function Sa(a){var e=a.attr(),t=e.x,r=e.y,n=e.text,i=e.fontSize,o=e.lineHeight,s=e.font;s||(s=za(e));var u=_a(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,h=e.textBaseline,A=Qi(n,i,o),P={x:t,y:r-A};c&&(c==="end"||c==="right"?P.x-=u:c==="center"&&(P.x-=u/2)),h&&(h==="top"?P.y+=A:h==="middle"&&(P.y+=A/2)),f={x:P.x,y:P.y,width:u,height:A}}return f}var ni=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Wa=/[^\s\,]+/ig;function Ii(a){var e=a||[];if((0,l.isArray)(e))return e;if((0,l.isString)(e))return e=e.match(ni),(0,l.each)(e,function(t,r){if(t=t.match(Wa),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,l.each)(t,function(i,o){isNaN(i)||(t[o]=+i)}),e[r]=t}),e}var Vn=Ii;function ci(a,e,t,r){var n=[],i=!!r,o,s,u,f,c,h,A;if(i){u=r[0],f=r[1];for(var P=0,B=a.length;P<B;P+=1){var V=a[P];u=On.min([0,0],u,V),f=On.max([0,0],f,V)}}for(var P=0,$=a.length;P<$;P+=1){var V=a[P];if(P===0&&!t)A=V;else if(P===$-1&&!t)h=V,n.push(A),n.push(h);else{var ut=[P?P-1:$-1,P-1][t?0:1];o=a[ut],s=a[t?(P+1)%$:P+1];var ct=[0,0];ct=On.sub(ct,s,o),ct=On.scale(ct,ct,e);var ht=On.distance(V,o),xt=On.distance(V,s),Wt=ht+xt;Wt!==0&&(ht/=Wt,xt/=Wt);var Jt=On.scale([0,0],ct,-ht),$t=On.scale([0,0],ct,xt);h=On.add([0,0],V,Jt),c=On.add([0,0],V,$t),c=On.min([0,0],c,On.max([0,0],s,V)),c=On.max([0,0],c,On.min([0,0],s,V)),Jt=On.sub([0,0],c,V),Jt=On.scale([0,0],Jt,-ht/xt),h=On.add([0,0],V,Jt),h=On.min([0,0],h,On.max([0,0],o,V)),h=On.max([0,0],h,On.min([0,0],o,V)),$t=On.sub([0,0],V,h),$t=On.scale([0,0],$t,xt/ht),c=On.add([0,0],V,$t),i&&(h=On.max([0,0],h,u),h=On.min([0,0],h,f),c=On.max([0,0],c,u),c=On.min([0,0],c,f)),n.push(A),n.push(h),A=c}}return t&&n.push(n.shift()),n}function yi(a,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],i=0,o=a.length;i<o;i+=2)n.push([a[i],a[i+1]]);for(var s=ci(n,.4,r,t),u=n.length,f=[],c,h,A,i=0;i<u-1;i+=1)c=s[i*2],h=s[i*2+1],A=n[i+1],f.push(["C",c[0],c[1],h[0],h[1],A[0],A[1]]);return r&&(c=s[u],h=s[u+1],A=n[0],f.push(["C",c[0],c[1],h[0],h[1],A[0],A[1]])),f}var ha=yi;function vu(a,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),a<n&&(n=a,r="del"),{type:r,min:n}}var Qf=function(a,e){var t=a.length,r=e.length,n,i,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=a[u-1];for(var f=1;f<=r;f++){i=e[f-1],isEqual(n,i)?o=0:o=1;var c=s[u-1][f].min+1,h=s[u][f-1].min+1,A=s[u-1][f-1].min+o;s[u][f]=vu(c,h,A)}}return s};function ke(a,e){var t=Qf(a,e),r=a.length,n=e.length,i=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&i.push({index:u-1,type:t[u][o].type})}for(var u=i.length-1;u>=0;u--)o=i[u].index,i[u].type==="add"?a.splice(o,0,[].concat(a[o])):a.splice(o,1)}if(r=a.length,r<n)for(var u=0;u<n-r;u++)a[r-1][0]==="z"||a[r-1][0]==="Z"?a.splice(r-2,0,a[r-2]):a.push(a[r-1]);return a}var _r=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,xr=new RegExp("([a-z])["+_r+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+_r+"]*,?["+_r+"]*)+)","ig"),En=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+_r+"]*,?["+_r+"]*","ig");function si(a){if(!a)return null;if((0,l.isArray)(a))return a;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(a).replace(xr,function(r,n,i){var o=[],s=n.toLowerCase();if(i.replace(En,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var _e=/[a-z]/;function se(a,e){return[e[0]+(e[0]-a[0]),e[1]+(e[1]-a[1])]}function $e(a){var e=si(a);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(_e.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var i=[],o=0,s=0,u=0,f=0,c=0,h,A,P=e[0];(P[0]==="M"||P[0]==="m")&&(o=+P[1],s=+P[2],u=o,f=s,c++,i[0]=["M",o,s]);for(var r=c,B=e.length;r<B;r++){var V=e[r],$=i[r-1],ut=[],n=V[0],ct=n.toUpperCase();if(n!==ct)switch(ut[0]=ct,ct){case"A":ut[1]=V[1],ut[2]=V[2],ut[3]=V[3],ut[4]=V[4],ut[5]=V[5],ut[6]=+V[6]+o,ut[7]=+V[7]+s;break;case"V":ut[1]=+V[1]+s;break;case"H":ut[1]=+V[1]+o;break;case"M":u=+V[1]+o,f=+V[2]+s,ut[1]=u,ut[2]=f;break;default:for(var ht=1,xt=V.length;ht<xt;ht++)ut[ht]=+V[ht]+(ht%2?o:s)}else ut=e[r];switch(ct){case"Z":o=+u,s=+f;break;case"H":o=ut[1],ut=["L",o,s];break;case"V":s=ut[1],ut=["L",o,s];break;case"T":o=ut[1],s=ut[2];var Wt=se([$[1],$[2]],[$[3],$[4]]);ut=["Q",Wt[0],Wt[1],o,s];break;case"S":o=ut[ut.length-2],s=ut[ut.length-1];var Jt=$.length,$t=se([$[Jt-4],$[Jt-3]],[$[Jt-2],$[Jt-1]]);ut=["C",$t[0],$t[1],ut[1],ut[2],o,s];break;case"M":u=ut[ut.length-2],f=ut[ut.length-1];break;default:o=ut[ut.length-2],s=ut[ut.length-1]}i.push(ut)}return i}var dr=Math.PI*2,gr=function(a,e,t,r,n,i,o){var s=a.x,u=a.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+i,y:c+o}},Je=function(a,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(a),n=Math.sin(a),i=Math.cos(a+e),o=Math.sin(a+e);return[{x:r-n*t,y:n+r*t},{x:i+o*t,y:o-i*t},{x:i,y:o}]},Qe=function(a,e,t,r){var n=a*r-e*t<0?-1:1,i=a*t+e*r;return i>1&&(i=1),i<-1&&(i=-1),n*Math.acos(i)},ir=function(a,e,t,r,n,i,o,s,u,f,c,h){var A=Math.pow(n,2),P=Math.pow(i,2),B=Math.pow(c,2),V=Math.pow(h,2),$=A*P-A*V-P*B;$<0&&($=0),$/=A*V+P*B,$=Math.sqrt($)*(o===s?-1:1);var ut=$*n/i*h,ct=$*-i/n*c,ht=f*ut-u*ct+(a+t)/2,xt=u*ut+f*ct+(e+r)/2,Wt=(c-ut)/n,Jt=(h-ct)/i,$t=(-c-ut)/n,ve=(-h-ct)/i,Oe=Qe(1,0,Wt,Jt),xe=Qe(Wt,Jt,$t,ve);return s===0&&xe>0&&(xe-=dr),s===1&&xe<0&&(xe+=dr),[ht,xt,Oe,xe]},we=function(a){var e=a.px,t=a.py,r=a.cx,n=a.cy,i=a.rx,o=a.ry,s=a.xAxisRotation,u=s===void 0?0:s,f=a.largeArcFlag,c=f===void 0?0:f,h=a.sweepFlag,A=h===void 0?0:h,P=[];if(i===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var B=Math.sin(u*dr/360),V=Math.cos(u*dr/360),$=V*(e-r)/2+B*(t-n)/2,ut=-B*(e-r)/2+V*(t-n)/2;if($===0&&ut===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];i=Math.abs(i),o=Math.abs(o);var ct=Math.pow($,2)/Math.pow(i,2)+Math.pow(ut,2)/Math.pow(o,2);ct>1&&(i*=Math.sqrt(ct),o*=Math.sqrt(ct));var ht=ir(e,t,r,n,i,o,c,A,B,V,$,ut),xt=ht[0],Wt=ht[1],Jt=ht[2],$t=ht[3],ve=Math.abs($t)/(dr/4);Math.abs(1-ve)<1e-7&&(ve=1);var Oe=Math.max(Math.ceil(ve),1);$t/=Oe;for(var xe=0;xe<Oe;xe++)P.push(Je(Jt,$t)),Jt+=$t;return P.map(function(Ze){var ar=gr(Ze[0],i,o,V,B,xt,Wt),Fr=ar.x,rn=ar.y,Zr=gr(Ze[1],i,o,V,B,xt,Wt),Nr=Zr.x,yn=Zr.y,dn=gr(Ze[2],i,o,V,B,xt,Wt),Lr=dn.x,Yr=dn.y;return{x1:Fr,y1:rn,x2:Nr,y2:yn,x:Lr,y:Yr}})};function He(a,e,t,r,n,i,o,s,u){var f=we({px:a,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:i,sweepFlag:o});return f.reduce(function(c,h){var A=h.x1,P=h.y1,B=h.x2,V=h.y2,$=h.x,ut=h.y;return c.push(A,P,B,V,$,ut),c},[])}function be(a,e){"TQ".indexOf(a[0])<0&&(e.qx=null,e.qy=null);var t=a.slice(1),r=t[0],n=t[1];switch(a[0]){case"M":return e.x=r,e.y=n,a;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(a.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(a.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,a[1],a[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,a[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,a[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return a}function lr(a,e){e===void 0&&(e=!1);for(var t=path2Absolute(a),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],i="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(i=t[c][0]),n[c]=i,t[c]=segmentToCubic(t[c],r),mr(t,n,c),o=t.length,i==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function mr(a,e,t){if(a[t].length>7){a[t].shift();for(var r=a[t],n=t;r.length;)e[t]="A",a.splice(n+=1,0,["C"].concat(r.splice(0,6)));a.splice(t,1)}}var kr=function(a,e,t,r,n){var i=-3*e+9*t-9*r+3*n,o=a*i+6*e-12*t+6*r;return a*o-3*e+3*t},Ur=function(a,e,t,r,n,i,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],A=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,B=0;B<c;B++){var V=f*h[B]+f,$=kr(V,a,t,n,o),ut=kr(V,e,r,i,s),ct=$*$+ut*ut;P+=A[B]*Math.sqrt(ct)}return f*P},Or=function(a,e,t,r,n,i,o,s){for(var u=[],f=[[],[]],c,h,A,P,B=0;B<2;++B){if(B===0?(h=6*a-12*t+6*n,c=-3*a+9*t-9*n+3*o,A=3*t-3*a):(h=6*e-12*r+6*i,c=-3*e+9*r-9*i+3*s,A=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;P=-A/h,P>0&&P<1&&u.push(P);continue}var V=h*h-4*A*c,$=Math.sqrt(V);if(!(V<0)){var ut=(-h+$)/(2*c);ut>0&&ut<1&&u.push(ut);var ct=(-h-$)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var ht=u.length,xt=ht,Wt;ht--;)P=u[ht],Wt=1-P,f[0][ht]=Wt*Wt*Wt*a+3*Wt*Wt*P*t+3*Wt*P*P*n+P*P*P*o,f[1][ht]=Wt*Wt*Wt*e+3*Wt*Wt*P*r+3*Wt*P*P*i+P*P*P*s;return f[0][xt]=a,f[1][xt]=e,f[0][xt+1]=o,f[1][xt+1]=s,f[0].length=f[1].length=xt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},qr=function(a,e,t,r,n,i,o,s){if(!(Math.max(a,t)<Math.min(n,o)||Math.min(a,t)>Math.max(n,o)||Math.max(e,r)<Math.min(i,s)||Math.min(e,r)>Math.max(i,s))){var u=(a*r-e*t)*(n-o)-(a-t)*(n*s-i*o),f=(a*r-e*t)*(i-s)-(e-r)*(n*s-i*o),c=(a-t)*(i-s)-(e-r)*(n-o);if(c){var h=u/c,A=f/c,P=+h.toFixed(2),B=+A.toFixed(2);if(!(P<+Math.min(a,t).toFixed(2)||P>+Math.max(a,t).toFixed(2)||P<+Math.min(n,o).toFixed(2)||P>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(i,s).toFixed(2)||B>+Math.max(i,s).toFixed(2)))return{x:h,y:A}}}},An=function(a,e,t){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},qn=function(a,e,t,r){return a===null&&(a=e=t=r=0),e===null&&(e=a.y,t=a.width,r=a.height,a=a.x),{x:a,y:e,width:t,w:t,height:r,h:r,x2:a+t,y2:e+r,cx:a+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(a,e,t,r),vb:[a,e,t,r].join(" ")}},Mn=function(a,e){return a=qn(a),e=qn(e),An(e,a.x,a.y)||An(e,a.x2,a.y)||An(e,a.x,a.y2)||An(e,a.x2,a.y2)||An(a,e.x,e.y)||An(a,e.x2,e.y)||An(a,e.x,e.y2)||An(a,e.x2,e.y2)||(a.x<e.x2&&a.x>e.x||e.x<a.x2&&e.x>a.x)&&(a.y<e.y2&&a.y>e.y||e.y<a.y2&&e.y>a.y)},jn=function(a,e,t,r,n,i,o,s){isArray(a)||(a=[a,e,t,r,n,i,o,s]);var u=Or.apply(null,a);return qn(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},$n=function(a,e,t,r,n,i,o,s,u){var f=1-u,c=Math.pow(f,3),h=Math.pow(f,2),A=u*u,P=A*u,B=c*a+h*3*u*t+f*3*u*u*n+P*o,V=c*e+h*3*u*r+f*3*u*u*i+P*s,$=a+2*u*(t-a)+A*(n-2*t+a),ut=e+2*u*(r-e)+A*(i-2*r+e),ct=t+2*u*(n-t)+A*(o-2*n+t),ht=r+2*u*(i-r)+A*(s-2*i+r),xt=f*a+u*t,Wt=f*e+u*r,Jt=f*n+u*o,$t=f*i+u*s,ve=90-Math.atan2($-ct,ut-ht)*180/Math.PI;return{x:B,y:V,m:{x:$,y:ut},n:{x:ct,y:ht},start:{x:xt,y:Wt},end:{x:Jt,y:$t},alpha:ve}},Ci=function(a,e,t){var r=jn(a),n=jn(e);if(!Mn(r,n))return t?0:[];for(var i=Ur.apply(0,a),o=Ur.apply(0,e),s=~~(i/8),u=~~(o/8),f=[],c=[],h={},A=t?0:[],P=0;P<s+1;P++){var B=$n.apply(0,a.concat(P/s));f.push({x:B.x,y:B.y,t:P/s})}for(var P=0;P<u+1;P++){var B=$n.apply(0,e.concat(P/u));c.push({x:B.x,y:B.y,t:P/u})}for(var P=0;P<s;P++)for(var V=0;V<u;V++){var $=f[P],ut=f[P+1],ct=c[V],ht=c[V+1],xt=Math.abs(ut.x-$.x)<.001?"y":"x",Wt=Math.abs(ht.x-ct.x)<.001?"y":"x",Jt=qr($.x,$.y,ut.x,ut.y,ct.x,ct.y,ht.x,ht.y);if(Jt){if(h[Jt.x.toFixed(4)]===Jt.y.toFixed(4))continue;h[Jt.x.toFixed(4)]=Jt.y.toFixed(4);var $t=$.t+Math.abs((Jt[xt]-$[xt])/(ut[xt]-$[xt]))*(ut.t-$.t),ve=ct.t+Math.abs((Jt[Wt]-ct[Wt])/(ht[Wt]-ct[Wt]))*(ht.t-ct.t);$t>=0&&$t<=1&&ve>=0&&ve<=1&&(t?A++:A.push({x:Jt.x,y:Jt.y,t1:$t,t2:ve}))}}return A},da=function(a,e,t){a=path2Curve(a),e=path2Curve(e);for(var r,n,i,o,s,u,f,c,h,A,P=t?0:[],B=0,V=a.length;B<V;B++){var $=a[B];if($[0]==="M")r=s=$[1],n=u=$[2];else{$[0]==="C"?(h=[r,n].concat($.slice(1)),r=h[6],n=h[7]):(h=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ct=e.length;ut<ct;ut++){var ht=e[ut];if(ht[0]==="M")i=f=ht[1],o=c=ht[2];else{ht[0]==="C"?(A=[i,o].concat(ht.slice(1)),i=A[6],o=A[7]):(A=[i,o,i,o,f,c,f,c],i=f,o=c);var xt=Ci(h,A,t);if(t)P+=xt;else{for(var Wt=0,Jt=xt.length;Wt<Jt;Wt++)xt[Wt].segment1=B,xt[Wt].segment2=ut,xt[Wt].bez1=h,xt[Wt].bez2=A;P=P.concat(xt)}}}}}return P};function Fo(a,e){return da(a,e)}function Jf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Uo(a,e){return Jf(a)*Jf(e)?(a[0]*e[0]+a[1]*e[1])/(Jf(a)*Jf(e)):1}function mh(a,e){return(a[0]*e[1]<a[1]*e[0]?-1:1)*Math.acos(Uo(a,e))}function vo(a,e){return a[0]===e[0]&&a[1]===e[1]}function Hh(a,e){var t=e[1],r=e[2],n=(0,l.mod)((0,l.toRadian)(e[3]),Math.PI*2),i=e[4],o=e[5],s=a[0],u=a[1],f=e[6],c=e[7],h=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,A=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,P=h*h/(t*t)+A*A/(r*r);P>1&&(t*=Math.sqrt(P),r*=Math.sqrt(P));var B=t*t*(A*A)+r*r*(h*h),V=B?Math.sqrt((t*t*(r*r)-B)/B):1;i===o&&(V*=-1),isNaN(V)&&(V=0);var $=r?V*t*A/r:0,ut=t?V*-r*h/t:0,ct=(s+f)/2+Math.cos(n)*$-Math.sin(n)*ut,ht=(u+c)/2+Math.sin(n)*$+Math.cos(n)*ut,xt=[(h-$)/t,(A-ut)/r],Wt=[(-1*h-$)/t,(-1*A-ut)/r],Jt=mh([1,0],xt),$t=mh(xt,Wt);return Uo(xt,Wt)<=-1&&($t=Math.PI),Uo(xt,Wt)>=1&&($t=0),o===0&&$t>0&&($t=$t-2*Math.PI),o===1&&$t<0&&($t=$t+2*Math.PI),{cx:ct,cy:ht,rx:vo(a,[f,c])?0:t,ry:vo(a,[f,c])?0:r,startAngle:Jt,endAngle:Jt+$t,xRotation:n,arcFlag:i,sweepFlag:o}}function Id(a,e){return[e[0]+(e[0]-a[0]),e[1]+(e[1]-a[1])]}function Pd(a){a=Vn(a);for(var e=[],t=null,r=null,n=null,i=0,o=a.length,s=0;s<o;s++){var u=a[s];r=a[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],i=s;break;case"A":var h=Hh(t,u);c.arcParams=h;break;default:break}if(f==="Z")t=n,r=a[i+1];else{var A=u.length;t=[u[A-2],u[A-1]]}r&&r[0]==="Z"&&(r=a[i],e[i]&&(e[i].prePoint=t)),c.currentPoint=t,e[i]&&vo(t,e[i].currentPoint)&&(e[i].prePoint=c.prePoint);var P=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=P;var B=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]];else if(f==="Q"){var V=[u[1],u[2]];c.startTangent=[B[0]-V[0],B[1]-V[1]],c.endTangent=[t[0]-V[0],t[1]-V[1]]}else if(f==="T"){var $=e[s-1],V=Id($.currentPoint,B);$.command==="Q"?(c.command="Q",c.startTangent=[B[0]-V[0],B[1]-V[1]],c.endTangent=[t[0]-V[0],t[1]-V[1]]):(c.command="TL",c.startTangent=[B[0]-t[0],B[1]-t[1]],c.endTangent=[t[0]-B[0],t[1]-B[1]])}else if(f==="C"){var ut=[u[1],u[2]],ct=[u[3],u[4]];c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[ut[0]-ct[0],ut[1]-ct[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[ct[0]-ut[0],ct[1]-ut[1]])}else if(f==="S"){var $=e[s-1],ut=Id($.currentPoint,B),ct=[u[1],u[2]];$.command==="C"?(c.command="C",c.startTangent=[B[0]-ut[0],B[1]-ut[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]]):(c.command="SQ",c.startTangent=[B[0]-ct[0],B[1]-ct[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]])}else if(f==="A"){var ht=.001,xt=c.arcParams||{},Wt=xt.cx,Jt=Wt===void 0?0:Wt,$t=xt.cy,ve=$t===void 0?0:$t,Oe=xt.rx,xe=Oe===void 0?0:Oe,Ze=xt.ry,ar=Ze===void 0?0:Ze,Fr=xt.sweepFlag,rn=Fr===void 0?0:Fr,Zr=xt.startAngle,Nr=Zr===void 0?0:Zr,yn=xt.endAngle,dn=yn===void 0?0:yn;rn===0&&(ht*=-1);var Lr=xe*Math.cos(Nr-ht)+Jt,Yr=ar*Math.sin(Nr-ht)+ve;c.startTangent=[Lr-n[0],Yr-n[1]];var on=xe*Math.cos(Nr+dn+ht)+Jt,sn=ar*Math.sin(Nr+dn-ht)+ve;c.endTangent=[B[0]-on,B[1]-sn]}e.push(c)}return e}function Od(a){for(var e=[],t=a.length,r=0;r<t-1;r++){var n=a[r],i=a[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:i[0],y:i[1]}})}if(e.length>1){var o=a[0],s=a[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Pp(a,e){var t=!1;return each(a,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function _v(a){var e=a.map(function(r){return r[0]}),t=a.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Op(a,e){return!(e.minX>a.maxX||e.maxX<a.minX||e.minY>a.maxY||e.maxY<a.minY)}function Ag(a,e){if(a.length<2||e.length<2)return!1;var t=_v(a),r=_v(e);if(!Op(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(a,u[0],u[1]))return n=!0,!1}),n||(each(a,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var i=Od(a),o=Od(e),s=!1;return each(o,function(u){if(Pp(i,u))return s=!0,!1}),s}function Dp(a,e){for(var t=[],r=[],n=[],i=0;i<a.length;i++){var o=a[i],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=Vr.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=lt.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var h=o.arcParams;c=hr.box(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0}),r=r.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0});var A=(0,l.min)(t),P=(0,l.min)(r),B=(0,l.max)(t),V=(0,l.max)(r);if(n.length===0)return{x:A,y:P,width:B-A,height:V-P};for(var i=0;i<n.length;i++){var o=n[i],s=o.currentPoint,$=void 0;s[0]===A?($=Pl(o,e),A=A-$.xExtra):s[0]===B&&($=Pl(o,e),B=B+$.xExtra),s[1]===P?($=Pl(o,e),P=P-$.yExtra):s[1]===V&&($=Pl(o,e),V=V+$.yExtra)}return{x:A,y:P,width:B-A,height:V-P}}function Pl(a,e){var t=a.prePoint,r=a.currentPoint,n=a.nextPoint,i=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((i+o-s)/(2*Math.sqrt(i)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,l.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var h={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return h}function Ol(a){var e=a.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,i=a.get("segments")||Pd(t),o=Dp(i,n),s=o.x,u=o.y,f=o.width,c=o.height,h={minX:s,minY:u,maxX:s+f,maxY:u+c};return h=Vi(a,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function fd(a){var e=a.attr(),t=e.x1,r=e.y1,n=e.x2,i=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,i),f=Math.max(r,i),c={minX:o,maxX:s,minY:u,maxY:f};return c=Vi(a,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function Zh(a){var e=a.attr(),t=e.x,r=e.y,n=e.rx,i=e.ry;return{x:t-n,y:r-i,width:n*2,height:i*2}}Os("rect",lf),Os("image",lf),Os("circle",kc),Os("marker",kc),Os("polyline",Qn),Os("polygon",oa),Os("text",Sa),Os("path",Ol),Os("line",fd),Os("ellipse",Zh);var Tg="0.5.11",Sv=function(a){(0,U.__extends)(e,a);function e(t,r){var n=a.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(rl),cd=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},ld=function(e){if((0,l.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,l.isNumber)(e))return[e,e,e,e];if((0,l.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},Mv=function(e){var t=new Sv(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Cv=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Bu=function(e){return Number.isNaN(Number(e))},Dd=function(e){for(var t=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,h=u.maxX,A=u.maxY;f<t&&(t=f),c<n&&(n=c),h>r&&(r=h),A>i&&(i=A)}var P=Math.floor(t),B=Math.floor(n),V=Math.ceil(r)-Math.floor(t),$=Math.ceil(i)-Math.floor(n);return{x:P,y:B,width:V,height:$,minX:t,minY:n,maxX:r,maxY:i}},Kh=function(e,t,r,n,i){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),i===void 0&&(i=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],h={},A=0;A<o;A++){var P=e[A],B=P.source,V=P.target,$="".concat(B,"-").concat(V);if(!c[A]){f[$]||(f[$]=[]),c[A]=!0,f[$].push(P);for(var ut=0;ut<o;ut++)if(A!==ut){var ct=e[ut],ht=ct.source,xt=ct.target;c[ut]||(B===xt&&V===ht?(f[$].push(ct),c[ut]=!0,h["".concat(ht,"|").concat(xt,"|").concat(f[$].length-1)]=!0):B===ht&&V===xt&&(f[$].push(ct),c[ut]=!0))}}}for(var Wt in f)for(var Jt=f[Wt],$t=Jt.length,ve=0;ve<$t;ve++){var Oe=Jt[ve];if(Oe.source===Oe.target){i&&(Oe.type=i),Oe.loopCfg={position:u[ve%8],dist:Math.floor(ve/8)*20+50};continue}if($t===1&&n&&Oe.source!==Oe.target){Oe.type=n;continue}Oe.type=r;var xe=(ve%2===0?1:-1)*(h["".concat(Oe.source,"|").concat(Oe.target,"|").concat(ve)]?-1:1);$t%2===1?Oe.curveOffset=xe*Math.ceil(ve/2)*s:Oe.curveOffset=xe*(Math.floor(ve/2)*s+t)}return e},Nd=S(89431),Av=function(){function a(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return a.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},a.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),i,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(xt){var Wt=xt.getModel(),Jt=Wt.x,$t=Wt.y;s>Jt&&(s=Jt),u>$t&&(u=$t),f<Jt&&(f=Jt),c<$t&&(c=$t)});var h=n.getMatrix()||[1,0,0,0,1,0,0,0,1],A=Bi({x:s,y:u},h),P=A.x,B=A.y,V=Bi({x:f,y:c},h),$=V.x,ut=V.y;i={minX:P,maxX:$,minY:B,maxY:ut,width:$-P,height:ut-B,x:P,y:B}}else i=n.getCanvasBBox();if(!(i.width===0||i.height===0)){var ct=this.getViewCenter(),ht={x:i.x+i.width/2,y:i.y+i.height/2};r.translate(ct.x-ht.x,ct.y-ht.y,e,t)}},a.prototype.animatedFitView=function(e,t,r,n,i,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],h=n.x+i.x-o.x-n.minX,A=n.y+i.y-o.y-n.minY;if(!(Bu(h)||Bu(A))){var P=(0,Nd.vs)(c,[["t",h,A]]);if(!u){var B=eu({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:P})}});e.animate(function(xt){return{matrix:Mi(t,P,xt)}},B);return}var V=f.get("minZoom"),$=f.get("maxZoom"),ut=s;V&&s<V?(ut=V,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):$&&s>$&&(ut=$,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var ct=(0,Nd.vs)(P,[["t",-i.x,-i.y],["s",ut,ut],["t",i.x,i.y]]),ht=eu({animateCfg:r,callback:function(){e.setMatrix(ct),f.emit("viewportchange",{action:"translate",matrix:P}),f.emit("viewportchange",{action:"zoom",matrix:ct})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(xt){return{matrix:Mi(t,ct,xt)}},ht)}},a.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),i=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var h=1/0,A=1/0,P=-1/0,B=-1/0;c.forEach(function(Jt){var $t=Jt.getModel(),ve=$t.x,Oe=$t.y;h>ve&&(h=ve),A>Oe&&(A=Oe),P<ve&&(P=ve),B<Oe&&(B=Oe)}),f={minX:h,maxX:P,minY:A,maxY:B,width:P-h,height:B-A,x:h,y:A}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var V=this.getViewCenter(),$={x:f.x+f.width/2,y:f.y+f.height/2},ut=(i-n[1]-n[3])/f.width,ct=(o-n[0]-n[2])/f.height,ht=ut;if(ut>ct&&(ht=ct),e)this.animatedFitView(s,u,t,f,V,$,ht,!0);else{var xt=V.x-$.x,Wt=V.y-$.y;if(Bu(xt)||Bu(Wt))return;r.translate(xt,Wt),r.zoom(ht,V)||console.warn("zoom failed, ratio out of range, ratio: %f",ht)}}},a.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,i=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,h=this.getFormatPadding(),A=c.get("width"),P=c.get("height"),B=c.get("group"),V=B.getMatrix()||[1,0,0,0,1,0,0,0,1];B.resetMatrix();var $,ut=c.getNodes();if(ut.length>c.get("optimizeThreshold")){var ct=1/0,ht=1/0,xt=-1/0,Wt=-1/0;ut.forEach(function(rn){var Zr=rn.getModel(),Nr=Zr.x,yn=Zr.y;ct>Nr&&(ct=Nr),ht>yn&&(ht=yn),xt<Nr&&(xt=Nr),Wt<yn&&(Wt=yn)}),$={minX:ct,maxX:xt,minY:ht,maxY:Wt,width:xt-ct,height:Wt-ht,x:ct,y:ht}}else $=B.getCanvasBBox();if(!($.width===0||$.height===0)){var Jt=this.getViewCenter(),$t={x:$.x+$.width/2,y:$.y+$.height/2},ve=(A-h[1]-h[3])/$.width,Oe=(P-h[0]-h[2])/$.height,xe;if(s==="x"?xe=ve:s==="y"?xe=Oe:xe=f==="max"?Math.max(ve,Oe):Math.min(ve,Oe),i&&(xe=xe<1?xe:1),t)this.animatedFitView(B,V,r,$,Jt,$t,xe,!0);else{var Ze=c.getZoom(),ar=Ze*xe,Fr=c.get("minZoom");ar<Fr&&(ar=Fr,console.warn("fitview failed, ratio out of range, ratio: %f",xe,"graph minzoom has been used instead")),c.translate(Jt.x-$t.x,Jt.y-$t.y),c.zoomTo(ar,Jt)}}},a.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return ld(e)},a.prototype.focusPoint=function(e,t,r){var n=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,h=0,A=0,P=0;this.graph.get("canvas").animate(function(B){A=u*B,P=f*B,n.graph.translate(A-c,P-h),c=A,h=P},(0,U.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},a.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=rs({x:e,y:t},r);return n},a.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},a.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),i=r.getClientByPoint(n.x,n.y);return{x:i.x,y:i.y}},a.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Bi({x:e,y:t},r)},a.prototype.focus=function(e,t,r){if((0,l.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,i=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,i=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],i=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],i=f[7]}this.focusPoint({x:n,y:i},t,r)}},a.prototype.focusItems=function(e,t,r,n){if(e.length){var i=this.graph,o=this.getFormatPadding(),s=i.get("width"),u=i.get("height"),f=i.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var h={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},A=0,P=e;A<P.length;A++){var B=P[A],V=B.getBBox();V.minX<h.minX&&(h.minX=V.minX),V.minY<h.minY&&(h.minY=V.minY),V.maxX>h.maxX&&(h.maxX=V.maxX),V.maxY>h.maxY&&(h.maxY=V.maxY)}if(h.x=h.minX,h.y=h.minY,h.width=h.maxX-h.minX,h.height=h.maxY-h.minY,!(h.width===0||h.height===0)){var $=this.getViewCenter(),ut={x:h.x+h.width/2,y:h.y+h.height/2},ct=(s-o[1]-o[3])/h.width,ht=(u-o[0]-o[2])/h.height,xt=ct;ct>ht&&(xt=ht),r?this.animatedFitView(f,c,n,h,$,ut,xt,t):(i.translate($.x-ut.x,$.y-ut.y),t&&!i.zoom(xt,$)&&console.warn("zoom failed, ratio out of range, ratio: %f",xt))}}},a.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,l.isNumber)(e)||!(0,l.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var i=r.get("plugins");i.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},a.prototype.destroy=function(){this.graph=null,this.destroyed=!1},a}(),Tv=Av;function hd(a){return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(a)}function Iv(a){if(typeof a!="string")return a;var e=function($t){if(typeof $t!="string")return $t;try{return JSON.parse($t.trim())}catch(ve){return $t.trim()}},t=e(a);if(typeof t!="string")return t;for(var r=function($t){return $t[$t.length-1]},n=a.trim(),i=[],o=[],s=function(){for(var $t=[],ve=0;ve<arguments.length;ve++)$t[ve]=arguments[ve];return $t.some(function(Oe){return r(o)===Oe})},u=function(){return r(i)},f=null,c=0,h="";c<n.length;){var A=n[c],P=s('"',"'");if(!P&&!A.trim()){c+=1;continue}var B=n[c-1]==="\\",V=s("}"),$=s("]"),ut=s(","),ct=u();if(P)if(r(o)===A&&!B){o.pop();var ht=e(h);ct.push(ht),f=ht,h=""}else h+=A;else if($&&A===",")h&&(ct.push(e(h)),h="");else if(V&&A===":")o.push(","),h&&(ct.push(h),h="");else if(ut&&A===",")h&&(ct.push(e(h)),h=""),o.pop();else if(A==="}"&&(V||ut)){h&&(ct.push(e(h)),h=""),ut&&o.pop();for(var xt={},Wt=1;Wt<ct.length;Wt+=2)xt[ct[Wt-1]]=ct[Wt];i.pop(),i.length&&r(i).push(xt),o.pop(),f=xt}else A==="]"&&$?(h&&(ct.push(e(h)),h=""),i.pop(),i.length&&r(i).push(ct),o.pop(),f=ct):A==="{"?(i.push([]),o.push("}")):A==="["?(i.push([]),o.push("]")):A==='"'?o.push('"'):A==="'"?o.push("'"):h+=A;c+=1}return f||h}var Np=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},Lp=function(e){return function(t){for(var r=e.length,n=[],i=0,o="";i<r;)if(e[i]==="{"&&e[i+1]==="{")n.push(o),o="",i+=2;else if(e[i]==="}"&&e[i+1]==="}"){if(n.length){var s=n.pop();o=(0,l.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}i+=2,o=""}else o+=e[i],i+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Pv(a,e){var t={},r=a.getAttributeNames&&a.getAttributeNames()||[],n=a.children&&Array.from(a.children).map(function(s){return Pv(s,e)}),i={},o=a.tagName?a.tagName.toLowerCase():"group";return o==="text"&&(t.text=a.innerText),i.type=o,o==="img"&&(i.type="image"),Array.from(r).forEach(function(s){var u=Np(s),f=a.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Iv(f);t=(0,U.__assign)((0,U.__assign)({},t),c)}else i[u]=Iv(f)}catch(h){if(u==="style")throw h;i[u]=f}}),i.attrs=t,e&&e.style&&i.name&&hd(e.style[i.name])==="object"&&(i.attrs=(0,U.__assign)((0,U.__assign)({},i.attrs),e.style[i.name])),e&&e.style&&i.keyshape&&(i.attrs=(0,U.__assign)((0,U.__assign)({},i.attrs),e.style)),n.length&&(i.children=n),i}function kp(a,e,t){var r=a.attrs,n=r===void 0?{}:r,i={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(a.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=ic(n.text,n.fontSize||12)[0],o=16,i.y+=o,i.height=o,i.width=s,a.attrs=(0,U.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(i.height=o),s>=0&&(i.width=s),n.marginTop&&(i.y+=n.marginTop),n.marginLeft&&(i.x+=n.marginLeft),i}function Ov(a,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,U.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=a.children)===null||t===void 0)&&t.length){var n=a.attrs,i=n===void 0?{}:n,o=i.marginTop,s=(0,U.__assign)({},e);o&&(s.y+=o);for(var u=0;u<a.children.length;u++){a.children[u].attrs.key="".concat(i.key||"root"," -").concat(u," ");var f=Ov(a.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return a.bbox=kp(a,e,r),a.attrs=(0,U.__assign)((0,U.__assign)({},a.attrs),a.bbox),a}function Ld(a,e){var t,r,n,i,o=(a||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&a&&(a.attrs.key=s),!a&&e)return{action:"delete",val:e,type:o,key:s};if(a&&!e)return{action:"add",val:a,type:o};if(!a&&!e)return{action:"same",type:o};var u=[];if(((t=a.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=a.children)===null||n===void 0?void 0:n.length,(i=e.children)===null||i===void 0?void 0:i.length),c=e.children||[],h=a.children||[],A=0;A<f;A+=1)u.push(Ld(h[A],c[A]));var P=Object.keys(e.attrs),B=Object.keys(a.attrs);return e.type!==a.type?{action:"restructure",nowTarget:a,formerTarget:e,key:s,children:u}:P.filter(function(V){return V!=="children"}).some(function(V){return a.attrs[V]!==e.attrs[V]||!B.includes(V)})?{action:"change",val:a,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function kd(a){var e={},t=function(n){var i=typeof a=="function"?a(n):a,o=Lp(i)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=Ov(Pv(u,n));return s.remove(),f};return{draw:function(n,i){var o=t(n),s=i,u=function f(c){var h=c.attrs,A=h===void 0?{}:h,P=c.bbox,B=c.type,V=c.children,$=(0,U.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var ut=i.addShape(c.type,(0,U.__assign)({attrs:A,origin:{bbox:P,type:B,children:V}},$));c.keyshape&&(s=ut)}c.children&&c.children.forEach(function(ct){return f(ct)})};return u(o),e[n.id]=[o],s},update:function(n,i){e[n.id]||(e[n.id]=[]);var o=i.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Ld(u,f),h=function B(V){var $;V.type!=="group"&&o.addShape(V.type,{attrs:V.attrs}),!(($=V.children)===null||$===void 0)&&$.length&&V.children.map(function(ut){return B(ut)})},A=function B(V){var $,ut=s.find(function(ct){return ct.attrs.key===V.attrs.key});ut&&o.removeChild(ut),!(($=V.children)===null||$===void 0)&&$.length&&V.children.map(function(ct){return B(ct)})},P=function B(V){var $=V.key;if(V.type!=="group"){var ut=s.find(function(ht){return ht.attrs.key===$});switch(V.action){case"change":if(ut){var ct=V.val.keyshape?i.getOriginStyle():{};ut.attr((0,U.__assign)((0,U.__assign)({},ct),V.val.attrs))}break;case"add":h(V.val);break;case"delete":A(V.val);break;case"restructure":A(V.formerTarget),h(V.nowTarget);break;default:break}}V.children&&V.children.forEach(function(ht){return B(ht)})};P(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var dd={};function Rd(a){return dd[a]||(dd[a]=(0,l.upperFirst)(a)),dd[a]}var Dv={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var i=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,i),i},baseUpdate:function(e,t,r,n){var i,o,s=this.getShape(e);s.update&&(s.mergeStyle=(i=s.getOptions)===null||i===void 0?void 0:i.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var i=this.getShape(e);i.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},vd={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},$h=function(){function a(){}return a.registerFactory=function(e,t){var r=Rd(e),n=Dv,i=(0,U.__assign)((0,U.__assign)({},n),t);return a[r]=i,i.className=r,i},a.getFactory=function(e){var t=Rd(e);return a[t]},a.registerNode=function(e,t,r){var n=a.Node,i;if(typeof t=="string"||typeof t=="function"){var o=kd(t);i=(0,U.__assign)((0,U.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=kd(s);i=(0,U.__assign)((0,U.__assign)((0,U.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):vd;i=(0,U.__assign)((0,U.__assign)({},u),t)}return i.type=e,i.itemType="node",n[e]=i,i},a.registerEdge=function(e,t,r){var n=a.Edge,i=r?n.getShape(r):vd,o=(0,U.__assign)((0,U.__assign)({},i),t);return o.type=e,o.itemType="edge",n[e]=o,o},a.registerCombo=function(e,t,r){var n=a.Combo,i=r?n.getShape(r):vd,o=(0,U.__assign)((0,U.__assign)({},i),t);return o.type=e,o.itemType="combo",n[e]=o,o},a}(),Va=$h;$h.registerFactory("node",{defaultShapeType:"circle"}),$h.registerFactory("edge",{defaultShapeType:"line"}),$h.registerFactory("combo",{defaultShapeType:"circle"});var pd="bboxCache",gd="bboxCanvasCache",Rp=null,Nv=function(){function a(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,i=this.get("type");typeof n=="undefined"?n=cd(i):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(i==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,l.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return a.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Wi(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},a.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=Wi(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},a.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var i=n.visible;if(i!==void 0&&!i&&e.changeVisibility(i),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},a.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,i=r.get("name");if(this.get("originStyle")){var P=this.get("originStyle");i&&!P[i]&&(P[i]={});for(var B=this.getCurrentStatesStyle(),V=function(ut){var ct=t[ut],ht=ct.get("name"),xt=ct.attr();if(ht&&ht!==i){var Wt=B[ht];P[ht]||(P[ht]={}),Wt?Object.keys(xt).forEach(function(ve){var Oe=xt[ve];Oe!==Wt[ve]&&(P[ht][ve]=Oe)}):P[ht]=ct.get("type")!=="image"?(0,l.clone)(xt):n.getShapeStyleByName(ht)}else{var Jt=ct.attr(),$t={};Object.keys(B).forEach(function(ve){var Oe=B[ve];(ve===i||!(0,l.isPlainObject)(Oe))&&($t[ve]=Oe)}),Object.keys(Jt).forEach(function(ve){var Oe=Jt[ve];$t[ve]!==Oe&&(i?P[i][ve]=Oe:P[ve]=Oe)})}},s=0;s<t.length;s++)V(s);delete P.path,delete P.matrix,delete P.x,delete P.y,P[i]&&(delete P[i].x,delete P[i].y,delete P[i].matrix,delete P[i].path),n.set("originStyle",P)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==i)o[c]=f!=="image"?(0,l.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var h=n.getShapeStyleByName();if(delete h.path,delete h.matrix,!i)Object.assign(o,h);else if(c)o[i]=h;else{var A=cd("shape");u.set("name",A),e.shapeMap[A]=u,o[A]=f!=="image"?(0,l.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},a.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,l.each)(n,function(i){e.setState(t,i,!0,r)})},a.prototype.init=function(){var e=Va.getFactory(this.get("type"));this.set("shapeFactory",e)},a.prototype.get=function(e){return this._cfg[e]},a.prototype.set=function(e,t){(0,l.isPlainObject)(e)?this._cfg=(0,U.__assign)((0,U.__assign)({},this._cfg),e):this._cfg[e]=t},a.prototype.getDefaultCfg=function(){return{}},a.prototype.clearCache=function(){this.set(pd,null),this.set(gd,null)},a.prototype.beforeDraw=function(){},a.prototype.afterDraw=function(){},a.prototype.afterUpdate=function(){},a.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},a.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,l.each)(r.attr(),function(i,o){(o!=="img"||(0,l.isString)(i))&&(n[o]=i)}),n}return{}},a.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,U.__assign)((0,U.__assign)({},r),e.style),n}return e},a.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},a.prototype.getOriginStyle=function(){return this.get("originStyle")},a.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,l.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},a.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),i=e,o=e;(0,l.isString)(t)&&(i="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,l.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(i)}else u>-1&&r.splice(u,1)}else if((0,l.isString)(t)){var f=r.filter(function(A){return A.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(A){return!A.includes(o)}),s.push(i),this.set("states",s)}if(n){var c=this.get("model"),h=c.type;n.setState(h,e,t,this)}},a.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),i=t.get("model"),o=i.type;e||(e=r),(0,l.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},a.prototype.setOptimize=function(e){this.optimize=e},a.prototype.getContainer=function(){return this.get("group")},a.prototype.getKeyShape=function(){return this.get("keyShape")},a.prototype.getModel=function(){return this.get("model")},a.prototype.getType=function(){return this.get("type")},a.prototype.getID=function(){return this.get("id")},a.prototype.isItem=function(){return!0},a.prototype.getStates=function(){return this.get("states")},a.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},a.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},a.prototype.getUpdateType=function(e){},a.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,i=e.visible;n!==i&&i!==void 0&&this.changeVisibility(i);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,l.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},a.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var i=this.getShapeCfg(r,e);t.baseUpdate(n,i,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},a.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,i=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=i.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(i.resetMatrix(),Eo(i,{x:r,y:n}),this.clearCache(),!0)},a.prototype.getBBox=function(){var e=this.get(pd);return e||(e=this.calculateBBox(),this.set(pd,e)),e},a.prototype.getCanvasBBox=function(){var e=this.get(gd);return e||(e=this.calculateCanvasBBox(),this.set(gd,e)),e},a.prototype.toFront=function(){var e=this.get("group");e.toFront()},a.prototype.toBack=function(){var e=this.get("group");e.toBack()},a.prototype.show=function(){this.changeVisibility(!0)},a.prototype.hide=function(){this.changeVisibility(!1)},a.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},a.prototype.isVisible=function(){return this.get("visible")},a.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},a.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},a}(),Bd=Nv,yd={source:"start",target:"end"},hf="Node",bh="Point",Bp="Anchor",Gp=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=yd[t]+bh,i=t+hf,o=this.get(i);o&&!o.destroyed&&o.removeEdge(this),(0,l.isPlainObject)(r)?(this.set(n,r),this.set(i,null)):r&&(r.addEdge(this),this.set(i,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var i=yd[t]+bh,o=t+hf,s=this.get(i);if(!s){var u=this.get(o),f=t+Bp,c=this.getPrePoint(t,n),h=r[f];(0,l.isNil)(h)||(s=u.getLinkPointByAnchor(h)),s=s||u.getLinkPoint(c),(0,l.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var i=t==="source"?"target":"source";return this.getEndPoint(i)},e.prototype.getEndPoint=function(t){var r=t+hf,n=yd[t]+bh,i=this.get(r);return i&&!i.destroyed?i.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),i=this.get("shapeFactory"),o=t.type;return i.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+hf,n=yd[t]+bh,i=this.get(r);if(i){var o=i.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){a.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,i=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:a.prototype.getShapeCfg.call(this,t);if(i)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(hf)),n=this.get("target".concat(hf));return r?delete t["source".concat(hf)]:t.source=this.get("start".concat(bh)),n?delete t["target".concat(hf)]:t.target=this.get("end".concat(bh)),!(0,l.isString)(t.source)&&!(0,l.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,l.isString)(t.target)&&!(0,l.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),i=n.visible,o=t.visible;i!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,l.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(hf)),r=this.get("target".concat(hf));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),a.prototype.destroy.call(this)},e}(Bd),Lv=Gp,Gd="anchorPointsCache",kv="bboxCache",Rv=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,i=t[0],o=ga(t[0],r),s=0;s<t.length;s++){var u=t[s],f=ga(u,r);f<o&&(i=u,o=f,n=s)}return i.anchorIndex=n,i},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var i=function(f){return f.getSource()===r};return n.filter(i).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),i=this.get("type"),o,s,u=this.getBBox();i==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=so({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=ia({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Wn(u,t)}var h=c;return f.length&&(h||(h=t),h=this.getNearestPoint(f,h)),h||(h={x:o,y:s}),h},e.prototype.getAnchorPoints=function(){var t=this.get(Gd);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),i=this.get("model"),o=this.getShapeCfg(i),s=i.type,u=r.getAnchorPoints(s,o)||[];(0,l.each)(u,function(f,c){var h={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(h)}),this.set(Gd,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(kv,null),this.set(Gd,null)},e.prototype.getUpdateType=function(t){var r,n,i,o,s;if(t){var u=!(0,l.isNil)(t.x),f=!(0,l.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,l.isNumber)(t.x)||(0,l.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((i=t==null?void 0:t.style)===null||i===void 0)&&i.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var h=c.includes("label")||c.includes("labelCfg");return h?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){a.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return a.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){a.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return a.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),i={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(i[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==i[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(Bd),md=Rv,Fd="bboxCache",Ud="bboxCanvasCache",Eh="sizeCache",zd="anchorPointsCache",Bv=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var i=t,o=(0,l.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,l.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||ue.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};i.style=(0,U.__assign)((0,U.__assign)((0,U.__assign)({},r),t.style),f);var c=t.padding||ue.defaultCombo.padding;return(0,l.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(Eh,f),i}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=Wi(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var i=this.get(Fd)||{},o=i.x,s=i.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,(n.x!==o||n.y!==s)&&this.set(zd,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Ud,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Fd,null),this.set(Ud,null),this.set(zd,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Eh,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(md),Wd=Bv,Qh="node",Jh="edge",Gv="vedge",xh="combo",Fp="default",Fv="Mapper",qf="stateStyles",Up=function(){function a(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,l.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var i=t.edgeToBeUpdateMap;if(i){var o=Object.values(i);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return a.prototype.addItem=function(e,t){var r=this.graph,n=e===Gv?Jh:e,i=r.get("".concat(n,"Group"))||r.get("group"),o=(0,l.upperFirst)(n),s=null,u=r.get(n+(0,l.upperFirst)(qf))||{},f=r.get(Fp+o);t[qf]&&(u=t[qf]),f&&(0,l.each)(f,function(Jt,$t){(0,l.isObject)(Jt)&&!(0,l.isArray)(Jt)?t[$t]=(0,l.deepMix)({},Jt,t[$t]):(0,l.isArray)(Jt)?t[$t]=t[$t]||(0,l.clone)(f[$t]):t[$t]=t[$t]||f[$t]});var c=r.get(n+Fv);if(c){var h=c(t);h[qf]&&(u=h[qf],delete h[qf]),(0,l.each)(h,function(Jt,$t){(0,l.isObject)(Jt)&&!(0,l.isArray)(Jt)?t[$t]=(0,l.deepMix)({},t[$t],Jt):t[$t]=h[$t]||t[$t]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Jh||e===Gv){var A=void 0,P=void 0;if(A=t.source,P=t.target,A&&(0,l.isString)(A)&&(A=r.findById(A)),P&&(0,l.isString)(P)&&(P=r.findById(P)),!A||!P){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}A.getType&&A.getType()==="combo"&&(t.isComboEdge=!0),P.getType&&P.getType()==="combo"&&(t.isComboEdge=!0),s=new Lv({model:t,source:A,target:P,styles:u,linkCenter:r.get("linkCenter"),group:i.addGroup()})}else if(e===Qh)s=new md({model:t,styles:u,group:i.addGroup()});else if(e===xh){var B=t.children,V=Sf(B,r),$=void 0,ut=void 0;if(isNaN(V.x)?isNaN(t.x)&&($=Math.random()*100):$=V.x,isNaN(V.y)?isNaN(t.y)&&(ut=Math.random()*100):ut=V.y,isNaN(t.x)||isNaN(t.y))t.x=$,t.y=ut;else{var ct=t.x-$,ht=t.y-ut;this.updateComboSucceeds(t.id,ct,ht,B)}var xt=i.addGroup();xt.setZIndex(t.depth),s=new Wd({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Sf([],r):V,group:xt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(V.width=Math.hypot(V.height,V.width),V.height=V.width,s.set("bbox",V),s.refresh());var Wt=s.getModel();(B||[]).forEach(function(Jt){var $t=r.findById(Jt.id);s.addChild($t),Jt.depth=Wt.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},a.prototype.updateItem=function(e,t){var r=this,n,i,o=this.graph;if((0,l.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Fv),f=e.getModel(),c=f.x,h=f.y,A=e.getUpdateType(t);if(u){var P=(0,l.deepMix)({},f,t),B=u(P),V=(0,l.deepMix)({},f,B,t);B[qf]&&(e.set("styles",V[qf]),delete V[qf]),(0,l.each)(V,function(xe,Ze){t[Ze]=xe})}else(0,l.each)(t,function(xe,Ze){f[Ze]&&(0,l.isObject)(xe)&&!(0,l.isArray)(xe)&&(t[Ze]=(0,U.__assign)((0,U.__assign)({},f[Ze]),t[Ze]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Jh){if(t.source){var $=t.source;(0,l.isString)($)&&($=o.findById($)),e.setSource($)}if(t.target){var ut=t.target;(0,l.isString)(ut)&&(ut=o.findById(ut)),e.setTarget(ut)}e.update(t)}else if(s===Qh){e.update(t,A);var ct=e.getEdges();A==="move"?(0,l.each)(ct,function(xe){r.edgeToBeUpdateMap[xe.getID()]={edge:xe,updateType:A},r.throttleRefresh()}):A!=null&&A.includes("bbox")&&(0,l.each)(ct,function(xe){xe.refresh(A)})}else if(s===xh){if(e.update(t,A),!isNaN(t.x)||!isNaN(t.y)){var ht=t.x-c||0,xt=t.y-h||0;this.updateComboSucceeds(f.id,ht,xt)}var Wt=e.getEdges(),Jt=(A==null?void 0:A.includes("bbox"))||A==="move";if(Jt&&s===xh){var $t=e.get("shapeFactory"),ve=f.type||"circle",Oe=f.animate===void 0||t.animate===void 0?(i=(n=$t[ve])===null||n===void 0?void 0:n.options)===null||i===void 0?void 0:i.animate:f.animate||t.animate;Oe?setTimeout(function(){if(!(!e||e.destroyed)){var xe=e.getKeyShape();!xe||xe.destroyed||(0,l.each)(Wt,function(Ze){Ze&&!Ze.destroyed&&Ze.refresh()})}},201):(0,l.each)(Wt,function(xe){xe.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},a.prototype.updateCombo=function(e,t,r){var n=this,i,o,s=this.graph;if((0,l.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=Sf(t,s,e),c=f.x,h=f.y;e.set("bbox",f);var A=c,P=h;r?(A=isNaN(u.x)?c:u.x,P=isNaN(u.y)?h:u.y):(A=isNaN(c)?u.x:c,P=isNaN(h)?u.y:h),e.update({x:A,y:P});var B=e.get("shapeFactory"),V=u.type||"circle",$=u.animate===void 0?(o=(i=B[V])===null||i===void 0?void 0:i.options)===null||o===void 0?void 0:o.animate:u.animate;$?setTimeout(function(){if(!(!e||e.destroyed)){var ut=e.getKeyShape();!ut||ut.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},a.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],i=0;i<n.length;i++){var o=n[i];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},a.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(i){r.hideItem(i,t)}),n.combos.forEach(function(i){r.hideItem(i,t)})},a.prototype.updateComboSucceeds=function(e,t,r,n){var i=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){wa(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var h=c.getModel();i.updateItem(f.id,{x:(h.x||0)+t,y:(h.y||0)+r})}})}},a.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),i=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return i.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return i.add(s)})}),i.forEach(function(o){return o.refresh()})},a.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,l.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,l.clone)(e.getModel()),i="";e.getType&&(i=e.getType()),r.emit("beforeremoveitem",{item:n,type:i});var o=r.get("".concat(i,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),i===Jh){var u=r.get("v".concat(i,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),h=r.get("itemMap");delete h[c];var A=r.get("comboTrees"),P=e.get("id");if(i===Qh){var B=e.getModel().comboId;if(A&&B){var V=A,$=!1;A.forEach(function(Jt){$||wa(Jt,function($t){if($t.id===P&&V){var ve=V.indexOf($t);return V.splice(ve,1),$=!0,!1}return V=$t.children,!0})})}for(var ut=e.getEdges(),ct=ut.length-1;ct>=0;ct--)r.removeItem(ut[ct],!1);B&&r.updateCombo(B)}else if(i===xh){var ht=e.getModel().parentId,xt,Wt=!1;(A||[]).forEach(function($t){Wt||wa($t,function(ve){return ve.id===P?(xt=ve,Wt=!0,!1):!0})}),xt.removed=!0,xt&&xt.children&&xt.children.forEach(function($t){t.removeItem($t.id)});for(var ut=e.getEdges(),ct=ut.length;ct>=0;ct--)r.removeItem(ut[ct],!1);ht&&r.updateCombo(ht)}e.destroy(),r.emit("afterremoveitem",{item:n,type:i})}},a.prototype.setItemState=function(e,t,r){var n=this.graph,i=t;(0,l.isString)(r)&&(i="".concat(t,":").concat(r)),!(e.hasState(i)===r&&r||(0,l.isString)(r)&&e.hasState(i))&&(n.emit("beforeitemstatechange",{item:e,state:i,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:i,enabled:r}))},a.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,l.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},a.prototype.clearItemStates=function(e,t){var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},a.prototype.refreshItem=function(e){var t=this.graph;(0,l.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},a.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){ro(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var i=n.get("comboGroup");i&&i.sort()},a.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,l.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Qh){var i=e.getEdges();(0,l.each)(i,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===xh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(h){f||!h.children||h.children.length===0||wa(h,function(A){return A.id===s?(u=A.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(h){var A=n.findById(h.id);r.changeItemVisibility(A,t)});var i=e.getEdges();(0,l.each)(i,function(h){t&&!(h.get("source").isVisible()&&h.get("target").isVisible())||r.changeItemVisibility(h,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},a.prototype.destroy=function(){this.graph=null,this.destroyed=!0},a}(),zp=Up,Uv=function(){function a(e){this.graph=e,this.destroyed=!1}return a.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),i=t;(0,l.isString)(r)&&(i="".concat(t,":").concat(r)),n[i]||(n[i]=[]),r?n[i].push(e):n[i]=n[i].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},a.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),i=(0,l.isString)(t)?[t]:t;i.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,l.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},a.prototype.destroy=function(){this.graph=null,this.destroyed=!0},a}(),zv=Uv,Wv=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var i=t[n];return i===0&&(i="0"),i||""})},Vd=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var i=n[r],o=i.x,s=i.y;t.push(o),t.push(s)}var u=ha(t);return u.unshift(["M",e[0].x,e[0].y]),u},qh=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];On.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return i.x+=s[0],i.y+=s[1],i},Vv=function(e,t){var r=e.length;if(!r)return"";for(var n="",i="",o=0;o<r;o++){var s=e[o];o===0?i="M{x} {y}":i="L{x} {y}",n+=Wv(i,s)}return t&&(n+="Z"),n},bd=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var i=1;i<r.length;i=i+2)t.push([r[i],r[i+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Ed=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],i=e[e.length-2];e.unshift(n),e.unshift(i),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,h=e[s].y,A=e[s+1].x,P=e[s+1].y,B=s!==e.length-2?e[s+2].x:A,V=s!==e.length-2?e[s+2].y:P,$=c+(A-u)/6,ut=h+(P-f)/6,ct=A-(B-c)/6,ht=P-(V-h)/6;o.push(["C",$,ut,ct,ht,A,P])}return o.unshift(["M",n.x,n.y]),o},jd=function(e,t){return On.scale([0,0],On.normalize([0,0],e),t)},Xd=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},Yd=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function xd(a,e){var t=function(h){var A=[h[0][0],h[0][1]-e],P=[h[0][0],h[0][1]+e];return"M ".concat(A," A ").concat(e,",").concat(e,",0,0,0,").concat(P," A ").concat(e,",").concat(e,",0,0,0,").concat(A)},r=function(h){var A=On.scale([0,0],Xd(h[0],h[1]),e),P=On.scale([0,0],A,-1),B=On.add([0,0],h[0],A),V=On.add([0,0],h[1],A),$=On.add([0,0],h[1],P),ut=On.add([0,0],h[0],P);return"M ".concat(B," L ").concat(V," A ").concat([e,e,"0,0,0",$].join(",")," L ").concat(ut," A ").concat([e,e,"0,0,0",B].join(","))};if(!a||a.length<1)return"";if(a.length===1)return t(a);if(a.length===2)return r(a);for(var n=new Array(a.length),i=0;i<n.length;++i){var o=i===0?a[a.length-1]:a[i-1],s=a[i],u=On.scale([0,0],Xd(o,s),e);n[i]=[On.add([0,0],o,u),On.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,h){var A="";return h===0&&(A="M ".concat(n[n.length-1][1]," ")),A+="".concat(f+c[0]," L ").concat(c[1]),A}),n.join(" ")}function Hd(a,e){var t=a.length,r=function(c){var h=[c[0][0],c[0][1]-e],A=[c[0][0],c[0][1]+e];return"M ".concat(h," A ").concat([e,e,"0,0,0",A].join(",")," A ").concat([e,e,"0,0,0",h].join(","))},n=function(c){var h=Yd(c[0],c[1]),A=jd(h,e),P=On.add([0,0],c[0],On.scale([0,0],A,-1)),B=On.add([0,0],c[1],A),V=1.2*e,$=jd(On.normalize([0,0],h),V),ut=On.scale([0,0],$,-1),ct=On.add([0,0],P,ut),ht=On.add([0,0],B,ut),xt=On.add([0,0],P,$);return"M ".concat(P," C ").concat([ct,ht,B].join(",")," S ").concat([xt,P].join(",")," Z")};if(!a||t<1)return"";if(t===1)return r(a);if(t===2)return n(a);for(var i=a.map(function(f,c){var h=a[(c+1)%t];return{p:f,v:On.normalize([0,0],Yd(f,h))}}),o=0;o<i.length;++o){var s=o>0?o-1:t-1,u=On.normalize([0,0],On.add([0,0],i[s].v,On.scale([0,0],i[o].v,-1)));i[o].p=On.add([0,0],i[o].p,On.scale([0,0],u,e))}return i.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var wd=function(e,t){for(var r=[],n=0;n<5;n++){var i=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",i,-o]):r.push(["L",i,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},Zd=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},Kd=function(e){var t=e.map(function(h){return{x:h.getModel().x,y:h.getModel().y}});t.sort(function(h,A){return h.x===A.x?h.y-A.y:h.x-A.x});for(var r={},n=t.length-1;n>=0;n--){var i=t[n],o=i.x,s=i.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&Zd(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&Zd(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},jv={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Xv(a,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},i=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,h=f,A,P,B=0;B<e.width*e.height;B++){if(A=c,P=h,a.findIndex(function($){return $.x===c&&$.y===h})>-1){if(!(a[0].x!==c||a[0].y!==h))return!0}else a.push({x:c,y:h});var V=i(c,h);switch(V){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:A===0&&(P===-1?c-=1:c+=1);break;case 1:case 13:case 5:h--;break;case 9:A===1&&(P===0?h-=1:h+=1);break;case 10:case 8:case 11:h++;break;default:return console.warn("Marching squares invalid state: ".concat(V)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&i(s,u)!==15&&(r=o(s,u));return r}}var Yv=function(e,t,r){var n=Math.ceil(e/r),i=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*i)).fill(0);return{cells:o,width:n,height:i}},Hv=function(e,t,r){var n=null,i=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=qa(s,u),c=new Ka(s.x,s.y,u.x,u.y),h=r.reduce(function(A,P){return $a(P,c)>0?A+1:A},0);f*Math.pow(h+1,2)<i&&(n=o,i=f*Math.pow(h+1,2))}),n},$d=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(i){var o=$a(i,t);o>=0&&o<r&&(n=i,r=o)}),n},Zv=function(e,t,r,n){var i=[],o=[];o.push(e);for(var s=!0,u=0,f=function(P,B){var V=!1;return B.forEach(function($){V||(fi(P,{x:$.x1,y:$.y1})||fi(P,{x:$.x2,y:$.y2}))&&(V=!0)}),V},c=function(P,B){for(var V=0,$=B;V<$.length;V++){var ut=$[V],ct=ut.getBBox(),ht=[[ct.x,ct.y],[ct.x+ct.width,ct.y],[ct.x,ct.y+ct.height],[ct.x+ct.width,ct.y+ct.height]];if(La(ht,P.x,P.y))return!0}return!1};s&&u<r;){s=!1;for(var h=function(){var P=o.pop(),B=$d(t,P);if(B){var V=ka(B,P),$=V[0],ut=V[1];if(ut===2){var ct=function(xt){for(var Wt=n,Jt=Jd(B,Wt,$,xt),$t=f(Jt,o)||f(Jt,i),ve=c(Jt,t);!$t&&ve&&Wt>=1;)Wt/=1.5,Jt=Jd(B,Wt,$,xt),$t=f(Jt,o)||f(Jt,i),ve=c(Jt,t);Jt&&!$t&&(!xt||!ve)&&(o.push(new Ka(P.x1,P.y1,Jt.x,Jt.y)),o.push(new Ka(Jt.x,Jt.y,P.x2,P.y2)),s=!0)};ct(!0),s||ct(!1)}}s||i.push(P),u+=1};!s&&o.length;)h()}for(;o.length;)i.push(o.pop());return i};function Kv(a,e,t,r,n){var i=Hv(a,t,e);if(i===null)return[];var o=function(h){for(var A=[];h.length>0;){var P=h.pop();if(h.length===0){A.push(P);break}var B=h.pop(),V=new Ka(P.x1,P.y1,B.x2,B.y2),$=$d(e,V);$?(A.push(P),h.push(B)):h.push(V)}return A},s=new Ka(a.getModel().x,a.getModel().y,i.getModel().x,i.getModel().y),u=Zv(s,e,r,n),f=o(u);return f}var $v=function(e,t,r){var n=Object.assign(jv,r),i=wo(e.map(function(ct){return{x:ct.getModel().x,y:ct.getModel().y}}));e=e.sort(function(ct,ht){return qa({x:ct.getModel().x,y:ct.getModel().y},i)-qa({x:ht.getModel().x,y:ht.getModel().y},i)});var o=[],s=[];e.forEach(function(ct){var ht=Kv(ct,t,o,n.maxRoutingIterations,n.morphBuffer);ht.forEach(function(xt){s.push(xt)}),o.push(ct)});for(var u=Qd(e,s,n.nodeR0),f=Yv(u.width,u.height,n.pixelGroupSize),c=[],h=[],A=0;A<n.maxMarchingIterations;A++)if(Qv(e,t,s,u,f,n),c=[],h=[],!!new Xv(c,f,n.threshold).march()){var P=c.map(function(ct){return{x:Math.round(ct.x*n.pixelGroupSize+u.minX),y:Math.round(ct.y*n.pixelGroupSize+u.minY)}});if(P){var B=P.length;if(n.skip>1)for(B=Math.floor(P.length/n.skip);B<3&&n.skip>1;)n.skip-=1,B=Math.floor(P.length/n.skip);for(var V=0,$=0;$<B;$+=1,V+=n.skip)h.push({x:P[V].x,y:P[V].y})}var ut=function(){for(var ht=0,xt=e;ht<xt.length;ht++){var Wt=xt[ht],Jt=h.map(function($t){return[$t.x,$t.y]});if(!La(Jt,Wt.getBBox().centerX,Wt.getBBox().centerY))return!1}return!0};if(h&&ut())return h;if(n.threshold*=.9,A<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return h};function Qd(a,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];a.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var i=0,o=n;i<o.length;i++){var s=o[i];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Qv(a,e,t,r,n,i){function o(P,B){var V=Math.floor((P-B)/i.pixelGroupSize);return V<0?0:V}function s(P,B){return P*i.pixelGroupSize+B}var u=(i.nodeR0-i.nodeR1)*(i.nodeR0-i.nodeR1),f=(i.edgeR0-i.edgeR1)*(i.edgeR0-i.edgeR1),c=function(B,V){var $=Math.min(o(B.minX,V+r.minX),n.width),ut=Math.min(o(B.minY,V+r.minY),n.height),ct=Math.min(o(B.maxX,-V+r.minX),n.width),ht=Math.min(o(B.maxY,-V+r.minY),n.height);return[$,ut,ct,ht]},h=function(B,V){for(var $=B.getBBox(),ut=c($,i.nodeR1),ct=ut[0],ht=ut[1],xt=ut[2],Wt=ut[3],Jt=ht;Jt<Wt;Jt+=1)for(var $t=ct;$t<xt;$t+=1)if(!(V<0&&n[$t+Jt*n.width]<=0)){var ve=s($t,r.minX),Oe=s(Jt,r.minY),xe=ma({x:ve,y:Oe},{x:$.minX,y:$.minY,width:$.width,height:$.height});if(xe<Math.pow(i.nodeR1,2)){var Ze=Math.sqrt(xe)-i.nodeR1;n.cells[$t+Jt*n.width]+=V*Ze*Ze}}},A=function(B,V){for(var $=B.getBBox(),ut=c($,i.edgeR1),ct=ut[0],ht=ut[1],xt=ut[2],Wt=ut[3],Jt=ht;Jt<Wt;Jt+=1)for(var $t=ct;$t<xt;$t+=1)if(!(V<0&&n.cells[$t+Jt*n.width]<=0)){var ve=s($t,r.minX),Oe=s(Jt,r.minY),xe=Xo({x:ve,y:Oe},B);if(xe<Math.pow(i.edgeR1,2)){var Ze=Math.sqrt(xe)-i.edgeR1;n.cells[$t+Jt*n.width]+=V*Ze*Ze}}};i.nodeInfluenceFactor&&a.forEach(function(P){h(P,i.nodeInfluenceFactor/u)}),i.edgeInfluenceFactor&&t.forEach(function(P){A(P,i.edgeInfluenceFactor/f)}),i.negativeNodeInfluenceFactor&&e.forEach(function(P){h(P,i.negativeNodeInfluenceFactor/u)})}function Jd(a,e,t,r){var n=a.getBBox(),i=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function h(B,V){return n.width*((B.y-n.minY+(V.y-n.minY))*.5)}if(o){if(i)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var A=h(o,u);return A<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(i)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var P=h(i,s);return P<c*.5?i.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:i.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Jv=function(){function a(e,t){this.cfg=(0,l.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,l.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,l.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return a.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},a.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},a.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},a.prototype.calcPath=function(e,t){var r,n,i;switch(this.type){case"round-convex":r=Kd(e),i=xd(r.map(function(o){return[o.x,o.y]}),this.padding),n=si(i);break;case"smooth-convex":r=Kd(e),r.length===2?(i=xd(r.map(function(o){return[o.x,o.y]}),this.padding),n=si(i)):r.length>2&&(i=Hd(r.map(function(o){return[o.x,o.y]}),this.padding),n=Ed(i));break;case"bubble":r=$v(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Ed(r);break;default:}return n},a.prototype.render=function(){this.group.addShape("path",{attrs:(0,U.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},a.prototype.addMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},a.prototype.addNonMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},a.prototype.removeMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},a.prototype.removeNonMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},a.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,l.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,l.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},a.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,U.__assign)({},e))},a.prototype.updateCfg=function(e){var t=this;this.cfg=(0,l.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,l.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,l.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},a.prototype.contain=function(e){var t=this,r;(0,l.isString)(e)?r=this.graph.findById(e):r=e;var n,i=r.getKeyShape();if(r.get("type")==="path")n=bd(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),xo(n,bd(this.path))},a.prototype.destroy=function(){this.group.remove(),this.cfg=null},a}(),qd=Jv,wh=re,qv="node",tv=function(a){(0,U.__extends)(e,a);function e(t){var r=a.call(this)||this;return r.sortCombos=(0,l.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var i=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){wa(f,function(c){return i[c.depth]?i[c.depth].push(c.id):i[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),h=o[c.source]||0,A=o[c.target]||0,P=Math.max(h,A);i[P]?i[P].push(c.id):i[P]=[c.id]}),i.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var h=r.findById(f[c]);h&&h.toFront()}})}},500,!1),r.cfg=(0,l.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new na(r.cfg.maxStep),r.redoStack=new na(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new Tv(this),r=new zl(this),n=new zp(this),i=new zv(this);this.set({viewController:t,modeController:r,itemController:n,stateController:i}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,i=n===void 0?"g6":n,o=t.addGroup({id:"".concat(i,"-root"),className:ue.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(i,"-edge"),className:ue.edgeContainerClassName}),u=o.addGroup({id:"".concat(i,"-node"),className:ue.nodeContainerClassName}),f=o.addGroup({id:"".concat(i,"-combo"),className:ue.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(i,"-delegate"),className:ue.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,l.isPlainObject)(t)?this.cfg=(0,U.__assign)((0,U.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new na(this.cfg.maxStep),this.redoStack=new na(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,l.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var i=this.get("stateController");i.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,i=this.get("".concat(t,"s"));return(0,l.each)(i,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,l.each)(this.get("".concat(t,"s")),function(i,o){r(i,o)&&n.push(i)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(i){return i.hasState(r)&&n(i)}):this.findAll(t,function(i){return i.hasState(r)})},e.prototype.translate=function(t,r,n,i){var o=this,s=this.get("group"),u=(0,l.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=eu({animateCfg:i,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Ai(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=wh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,i){var o=this.get("group");Ai(o,{x:t,y:r},n,i||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,i){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,i):o.fitView(n,i),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var i=this.get("modeController");return i.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,i){var o=this,s=this.get("group"),u=(0,l.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),h=this.getZoom()||1,A=h*t,P=t,B=!1;if(f&&A<f?(P=f/h,B=!0):c&&A>c&&(P=c/h,B=!0),r?u=wh(u,[["t",-r.x,-r.y],["s",P,P],["t",r.x,r.y]]):u=wh(u,[["s",P,P]]),n){var V=(0,l.clone)(s.getMatrix());V||(V=[1,0,0,0,1,0,0,0,1]);var $=V[0],ut=$*P,ct=eu({animateCfg:i,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(ht){if(ht===1)V=u;else{var xt=ba($,ut,ht)/V[0];r?V=wh(V,[["t",-r.x,-r.y],["s",xt,xt],["t",r.x,r.y]]):V=wh(V,[["s",xt,xt]])}return{matrix:V}},ct)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!B},e.prototype.zoomTo=function(t,r,n,i){var o=t/this.getZoom();return this.zoom(o,r,n,i)},e.prototype.focusItem=function(t,r,n){var i=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),i.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,i){var o=this.get("viewController");o.focusItems(t,r,n,i)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),i=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=i.getID(),s=i.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),i=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=i.getID(),s=i.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,l.isString)(t)&&(n=this.findById(t)),!n&&(0,l.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var i="";if(n.getType&&(i=n.getType()),r&&this.get("enabledStack")){var o=(0,U.__assign)((0,U.__assign)({},n.getModel()),{itemType:i}),s={};switch(i){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,U.__assign)((0,U.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(i==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var h=this.get("itemController");if(h.removeItem(n),i==="combo"){var A=_f(this.get("comboTrees"));this.set("comboTrees",A)}}},e.prototype.innerAddItem=function(t,r,n){if(!Hc(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var i,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(B){u||ro(B,function(V){if(r.parentId===V.id){u=!0;var $=(0,U.__assign)({id:r.id,depth:V.depth+2},r);V.children?V.children.push($):V.children=[$],r.depth=$.depth,i=n.addItem(t,r)}var ut=s[V.id];return u&&ut&&ut.getType&&ut.getType()==="combo"&&n.updateCombo(ut,V.children),!0})}),!u){var f=(0,U.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),i=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(i,!1),this.updateCombo(i))}else if(t==="node"&&(0,l.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),i=n.addItem(t,r);var h=this.get("itemMap"),A=!1,P=!1;o.forEach(function(B){P||A||ro(B,function(V){if(V.id===r.id)return P=!0,!1;if(r.comboId===V.id&&!P){A=!0;var $=(0,l.clone)(r);$.itemType="node",V.children?V.children.push($):V.children=[$],$.depth=V.depth+1}return A&&h[V.id].getType&&h[V.id].getType()==="combo"&&n.updateCombo(h[V.id],V.children),!0})})}else i=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(i)}return i},e.prototype.addItem=function(t,r,n,i){n===void 0&&(n=!0),i===void 0&&(i=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!i);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,U.__assign)((0,U.__assign)({},u.getModel()),{itemType:t}),h={};switch(t){case"node":h.nodes=[c];break;case"edge":h.edges=[c];break;case"combo":h.combos=[c];break;default:break}this.pushStack("add",{before:{},after:h})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var h={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var A=t[u].type,P=s[u];if(P&&P!==!0){var B=(0,U.__assign)((0,U.__assign)({},P.getModel()),{itemType:A});switch(A){case"node":h.nodes.push(B);break;case"edge":h.edges.push(B);break;case"combo":h.combos.push(B);break;default:break}}}this.pushStack("addItems",{before:{},after:h})}return s},e.prototype.add=function(t,r,n,i){return n===void 0&&(n=!0),i===void 0&&(i=!0),this.addItem(t,r,n,i)},e.prototype.updateItem=function(t,r,n){var i=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,l.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,l.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var h=(0,U.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,l.each)(h,function(V){return i.setItemState(s,V,!1)}),o.updateItem(s,r),c==="combo"&&(0,l.each)(h,function(V){return i.setItemState(s,V,!0)}),u){var A={nodes:[],edges:[],combos:[]},P={nodes:[],edges:[],combos:[]},B=(0,U.__assign)({id:f.id},r);switch(c){case"node":A.nodes.push(f),P.nodes.push(B);break;case"edge":A.edges.push(f),P.edges.push(B);break;case"combo":A.combos.push(f),P.combos.push(B);break;default:break}this.pushStack("update",{before:A,after:P})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,l.isString)(t)&&(t=this.findById(t));var i=this.get("itemController");i.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){co(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,i=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(i.map(function($){return{type:"node",model:$}}),!1,!1),(f==null?void 0:f.length)!==0){var c=wf(f,i);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function($){return{type:"edge",model:$}}),!1,!1);var h=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var A=t.get("layoutController");if(A){if(A.layout(P),this.destroyed)return}else P();function P(){(t.get("comboTrees")||[]).forEach(function($){ro($,function(ut){var ct=t.findById(ut.id);return ct.getType()==="combo"&&ut.collapsed&&(t.collapseCombo(ut.id,!1),t.updateCombo(ct)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",h),setTimeout(function(){var $;($=t.getCombos())===null||$===void 0||$.forEach(function(ut){ut.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var B=this.getNodes();B.forEach(function($){$.toFront()})}else{var V=this.getEdges();V.forEach(function($){$.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var i=this,o,s=this.get("itemMap");(0,l.each)(n,function(u){if(o=s[u.id],o){if(i.get("animate")&&t===qv){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}i.updateItem(o,u,!1)}else o=i.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,i;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!co(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ct){return o.clearItemStates(ct)}),this.getEdges().map(function(ct){return o.clearItemStates(ct)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),h={nodes:[],edges:[]},A=s.combos;if(A){var P=wf(A,s.nodes);this.set("comboTrees",P)}else this.set("comboTrees",[]);this.diffItems("node",h,s.nodes),(0,l.each)(c,function(ct,ht){c[ht].getModel().depth=0,!(ct.getType&&ct.getType()==="edge")&&(ct.getType&&ct.getType()==="combo"?(delete c[ht],ct.destroy()):h.nodes.indexOf(ct)<0&&(delete c[ht],o.remove(ct,!1)))});for(var B=this.getCombos(),V=B.length,$=V-1;$>=0;$--)B[$].destroyed&&B.splice($,1);A&&(o.addCombos(A),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",h,s.edges),(0,l.each)(c,function(ct,ht){ct.getType&&(ct.getType()==="node"||ct.getType()==="combo")||h.edges.indexOf(ct)<0&&(delete c[ht],o.remove(ct,!1))}),(this.get("comboTrees")||[]).forEach(function(ct){ro(ct,function(ht){var xt=n.findById(ht.id);return xt.getType()==="combo"&&ht.collapsed&&n.collapseCombo(ht.id,!1),!0})}),this.set({nodes:h.nodes,edges:h.edges});var ut=this.get("layoutController");return ut&&(ut.changeData(function(){setTimeout(function(){var ct;(ct=o.getCombos())===null||ct===void 0||ct.forEach(function(ht){ht.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(i=o.getCombos())===null||i===void 0||i.forEach(function(ct){return ct.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),i=this.get("itemController");i.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var i=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,l.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function($){var ut=i.findById($),ct=ut.getType();if(!(ct!=="node"&&ct!=="combo")){var ht=ut.getModel();c["".concat(ct,"s")].push({id:$,parentId:ct==="node"?ht.comboId:ht.parentId})}});var h=this.get("comboTrees"),A=new Set(r),P=new Map;h&&(h.forEach(function($){ro($,function(ut,ct,ht){if(A.has(ut.id)){if(ct){var xt=i.findById(ct.id),Wt=i.findById(ut.id);ct.children.splice(ht,1),xt.removeChild(Wt),o.updateCombo(xt,ct.children)}ut.itemType==="combo"&&P.set(ut.id,ut)}return!0})}),h=h.filter(function($){return!A.has($.id)}),this.set("comboTrees",h));var B={nodes:[],combos:[]},V=r.map(function($){var ut=i.findById($),ct=ut.getModel(),ht="";ut.getType&&(ht=ut.getType());var xt=P.get($)||{id:ut.getID(),itemType:ht};return ht==="combo"?(xt.parentId=s,ct.parentId=s):ht==="node"&&(xt.comboId=s,ct.comboId=s),f&&B["".concat(ht,"s")].push({id:ct.id,parentId:s}),xt});u.children=V,this.addItem("combo",u,!1),this.set("comboSorted",!1),h&&(h.forEach(function($){wa($,function(ut){return ut.id===s?(ut.itemType="combo",ut.children=V,!1):!0})}),this.sortCombos()),f&&(B.combos.push(u),this.pushStack("createCombo",{before:c,after:B}))}},e.prototype.uncombo=function(t,r){var n=this,i,o;r===void 0&&(r=!0);var s=this,u=t;if((0,l.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,h=s.get("comboTrees");h||(h=[]);var A=this.get("itemMap"),P=u.get("id"),B,V=[],$=this.get("combos"),ut=this.findById(c),ct=r&&this.get("enabledStack"),ht={};if(ct&&(ht=(0,l.clone)(f),ht.children=[]),h.forEach(function($t){B||ro($t,function(ve){var Oe;if(ve.id===P){B=ve;var xe=u.getEdges().map(function(Fr){return Fr.getID()});xe.forEach(function(Fr){n.removeItem(Fr,!1)});var Ze=$.indexOf(u);$.splice(Ze,1),delete A[P];var ar=(0,l.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:ar,type:"combo"})}if(c&&B&&ve.id===c){ut.removeCombo(u),V=ve.children;var Ze=V.indexOf(B);return Ze!==-1&&V.splice(Ze,1),(Oe=B.children)===null||Oe===void 0||Oe.forEach(function(rn){var Zr=n.findById(rn.id),Nr=Zr.getModel();Zr.getType&&Zr.getType()==="combo"?(rn.parentId=c,delete rn.comboId,Nr.parentId=c,delete Nr.comboId):Zr.getType&&Zr.getType()==="node"&&(rn.comboId=c,Nr.comboId=c),ut.addChild(Zr),V.push(rn)}),n.updateCombo(ut),!1}return!0})}),!c&&B){var xt=h.indexOf(B);h.splice(xt,1),(i=B.children)===null||i===void 0||i.forEach(function($t){$t.parentId=void 0;var ve=n.findById($t.id).getModel();delete ve.parentId,delete ve.comboId,$t.itemType!=="node"&&h.push($t)})}if(ct){var Wt={nodes:[],combos:[]},Jt={nodes:[],combos:[]};(o=B.children)===null||o===void 0||o.forEach(function($t){var ve=n.findById($t.id),Oe=ve.getType();Oe!=="node"&&Oe!=="combo"||(Wt["".concat(Oe,"s")].push({id:$t.id,parentId:P}),Jt["".concat(Oe,"s")].push({id:$t.id,parentId:c}))}),Wt.combos.push(ht),this.pushStack("uncombo",{before:Wt,after:Jt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,i=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(i||[]).forEach(function(u){ro(u,function(f){var c;if(!f)return!0;var h=s[f.id];if(((c=h==null?void 0:h.getType)===null||c===void 0?void 0:c.call(h))==="combo"){var A=(0,U.__spreadArray)([],h.getStates(),!0);(0,l.each)(A,function(P){return r.setItemState(h,P,!1)}),o.updateCombo(h,f.children,t),(0,l.each)(A,function(P){return r.setItemState(h,P,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,i=t,o;if((0,l.isString)(t)&&(i=this.findById(t)),!i||i.getType&&i.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=i.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){ro(c,function(h){if(!h)return!0;var A=f[h.id];if(o===h.id&&A&&A.getType&&A.getType()==="combo"){var P=(0,U.__spreadArray)([],A.getStates(),!0);(0,l.each)(P,function(B){A.getStateStyle(B)&&r.setItemState(A,B,!1)}),u.updateCombo(A,h.children),(0,l.each)(P,function(B){A.getStateStyle(B)&&r.setItemState(A,B,!0)}),o&&(o=h.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var i=this;this.set("comboSorted",!1);var o;(0,l.isString)(t)?o=i.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),h=!0,A;if((c||[]).forEach(function(ct){A||wa(ct,function(ht){if(!A)return ht.id===o.getID()&&(A=ht),!0})}),wa(A,function(ct){return ct.id===r?(h=!1,!1):!0}),!h){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var P={},B={};f==="combo"?(P.combos=[{id:s.id,parentId:s.parentId}],B.combos=[{id:s.id,parentId:r}]):f==="node"&&(P.nodes=[{id:s.id,parentId:s.comboId}],B.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:P,after:B})}if(s.parentId||s.comboId){var V=this.findById(s.parentId||s.comboId);V&&V.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var $=this.findById(r);$&&$.addChild(o)}if(u){var $=this.findById(u);$&&$.removeChild(o)}var ut=_f(this.get("comboTrees"),s.id,r);this.set("comboTrees",ut),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,l.each)(this.get("nodes"),function(i){t.push(i.getModel())}),(0,l.each)(this.get("edges"),function(i){r.push(i.getModel())}),(0,l.each)(this.get("combos"),function(i){n.push(i.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),i=t.get("edges");(0,l.each)(r,function(o){o.refresh()}),(0,l.each)(n,function(o){o.refresh()}),(0,l.each)(i,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,l.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),i=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,u.animate(function(f){(0,l.each)(s,function(c){var h=r.findById(c.id);if(!(!h||h.destroyed)){var A=h.get("originAttrs"),P=h.get("model"),B=h.getContainer().getMatrix();if(A==null&&(B&&(A={x:B[6],y:B[7]}),h.set("originAttrs",A||0)),i){var V=i(h,f,c,A||{x:0,y:0});h.set("model",Object.assign(P,V))}else A?(P.x=A.x+(c.x-A.x)*f,P.y=A.y+(c.y-A.y)*f):(P.x=c.x,P.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,l.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),i=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(A){(0,l.each)(A,function(P){u=P.getModel();var B=P.get("originAttrs");if(!(B&&u.x===B.x&&u.y===B.y)){var V=P.updatePosition({x:u.x,y:u.y});f[u.id]=V,u.comboId&&(f[u.comboId]=f[u.comboId]||V),u.parentId&&(f[u.parentId]=f[u.parentId]||V)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,l.each)(i,function(h){var A=h.getSource().getModel(),P=h.getTarget();if(!(0,l.isPlainObject)(P)){var B=P.getModel();(f[A.id]||f[B.id]||h.getModel().isComboEdge)&&h.refresh()}}),(0,l.each)(o,function(h){h.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){this.isAnimating()&&this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,i){var o=this;t===void 0&&(t={}),i===void 0&&(i=!0);var s=this.get("layoutController");if((0,l.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(A){var P=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*P[0]+P[6],u.y=u.y*P[0]+P[7];var B=o.getGroup().getCanvasBBox(),V=B.minX,$=B.maxX,ut=B.minY,ct=B.maxY,ht={x:(V+$)/2,y:(ut+ct)/2};r==="begin"&&(ht.x=V,ht.y=ut),o.translate(u.x-ht.x,u.y-ht.y)})}var c=(0,U.__assign)({},this.get("layout")),h={};Object.assign(h,c,t),t.pipes&&!t.type?delete h.type:!t.pipes&&h.type&&delete h.pipes,this.set("layout",h),s&&(s.isLayoutTypeSame(h)&&h.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(h):s.changeLayout(h),i&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:h}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,l.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var i=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),i.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(A){c||wa(A,function(P){if(c&&P.depth<=i.depth)return!1;if(i.id===P.id&&(c=!0),c){var B=n.findById(P.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var h={};s.forEach(function(A){var P=A.getModel(),B=P.isVEdge,V=P.size,$=V===void 0?1:V;if(!(A.isVisible()&&!B)){var ut=A.getSource(),ct=A.getTarget(),ht=null,xt;if(ut.getModel().id===i.id||u.includes(ut)&&!u.includes(ct)?(ht=ct,xt=!1):(ct.getModel().id===i.id||!u.includes(ut)&&u.includes(ct))&&(ht=ut,xt=!0),ht){if(B){n.removeItem(A,!1);return}for(var Wt=ht.getModel();!ht.isVisible();){var Jt=Wt.parentId,$t=Wt.comboId,ve=Jt||$t;if(ht=n.findById(ve),!ht||!ve)return;Wt=ht.getModel()}var Oe=Wt.id,xe=xt?{source:Oe,target:i.id,size:$,isVEdge:!0}:{source:i.id,target:Oe,size:$,isVEdge:!0},Ze="".concat(xe.source,"-").concat(xe.target);if(h[Ze]){h[Ze].size+=$;return}h[Ze]=xe}}}),this.addItems(Object.values(h).map(function(A){return{type:"vedge",model:A}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,l.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var i=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),i.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(A){c||wa(A,function(P){if(c&&P.depth<=i.depth)return!1;if(i.id===P.id&&(c=!0),c){var B=n.findById(P.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var h={};s.forEach(function(A){if(!(A.isVisible()&&!A.getModel().isVEdge)){var P=A.getSource(),B=A.getTarget(),V=P.get("id"),$=B.get("id"),ut=null,ct;if(V===i.id||u.includes(P)&&!u.includes(B)?(ut=B,ct=!1):$===i.id||!u.includes(P)&&u.includes(B)?(ut=P,ct=!0):u.includes(P)&&u.includes(B)&&P.isVisible()&&B.isVisible()&&A.show(),ut){var ht=A.getModel(),xt=ht.isVEdge,Wt=ht.size,Jt=Wt===void 0?1:Wt;if(xt){n.removeItem(A,!1);return}for(var $t=ut.getModel();!ut.isVisible();){var ve=$t.parentId,Oe=$t.comboId,xe=ve||Oe;if(ut=n.findById(xe),!ut||!xe)return;$t=ut.getModel()}for(var Ze=$t.id,ar=ct?B:P,Fr=ar.getModel();!ar.isVisible();){var rn=Fr.parentId,Zr=Fr.comboId,Nr=rn||Zr;if(ar=n.findById(Nr),!ar||!Nr)return;if(Fr.comboId===i.id||Fr.parentId===i.id)break;Fr=ar.getModel()}var yn=Fr.id;if(Ze){var dn=ct?{source:Ze,target:yn,isVEdge:!0,size:Jt}:{source:yn,target:Ze,isVEdge:!0,size:Jt},Lr="".concat(dn.source,"-").concat(dn.target);if(h[Lr]){h[Lr].size+=Jt;return}h[Lr]=dn}}}}),this.addItems(Object.values(h).map(function(A){return{type:"vedge",model:A}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,l.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),i=this.findById(n.parentId);i;){var o=i.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),i=void 0;return}i=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,l.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var i=t;(0,l.isString)(t)&&(i=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=rt(this.save()),this.set("degrees",o));var s=o[i.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var i=r?(0,l.clone)(r):{before:{},after:(0,l.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:i}):this.undoStack.push({action:t,data:i}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=Vt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),i=this.get("shortestPathMatrix");return(!n||!t)&&(n=Vt(this.save(),r),this.set("adjMatrix",n)),(!i||!t)&&(i=zr(this.save(),r),this.set("shortestPathMatrix",i)),i},e.prototype.on=function(t,r,n){return a.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,i,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(i=this.get("stateController"))===null||i===void 0||i.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var i=r.addGroup({id:"".concat(t.id,"-container")}),o=new qd(this,(0,U.__assign)((0,U.__assign)({},t),{group:i})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,l.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(J),ev=tv;function _d(a){return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(a)}var Dl=re,tp="-shape",rv="-label",M=["startArrow","endArrow"],it={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},R={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Y={edge:R,node:it,combo:it},q="-label-bg",Et={options:{labelCfg:{style:{fontFamily:ue.windowFontFamily}},descriptionCfg:{style:{fontFamily:ue.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,l.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+tp),t.shapeMap[this.itemType+tp]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+rv),t.shapeMap[this.itemType+rv]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},i=this.getLabelStyle(e,n,t),o=i.rotate;delete i.rotate;var s=t.addShape("text",{attrs:i,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(i.rotateCenter)switch(i.rotateCenter){case"center":f=Dl(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=Dl(f,[["t",-i.x,-i.y],["r",o],["t",i.x,i.y]]);break;case"leftcenter":f=Dl(f,[["t",-i.x,-i.y-u.height/2],["r",o],["t",i.x,i.y+u.height/2]]);break;default:f=Dl(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=Dl(f,[["t",-i.x,-i.y-u.height/2],["r",o],["t",i.x,i.y+u.height/2]]);s.setMatrix(f)}if(i.background){var c=this.drawLabelBg(e,t,s),h=this.itemType+q;c.set("classname",h),t.shapeMap[h]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,i=(0,l.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,i),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),i="".concat(this.itemType,"Label"),o=ue[i]?ue[i].style:null;return(0,U.__assign)((0,U.__assign)((0,U.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,i=t.getContainer(),o=t.getKeyShape(),s=(0,l.mix)({},o.attr(),e.style),u=function(h){var A,P=s[h];if((0,l.isPlainObject)(P)){var B=((n=i.shapeMap)===null||n===void 0?void 0:n[h])||i.find(function(V){return V.get("name")===h});B==null||B.attr(P)}else o.attr((A={},A[h]=P,A))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,i;if(e.label||e.label===""){var o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+rv,c=o.shapeMap[f]||o.find(function(xt){return xt.get("className")===f}),h=this.itemType+q,A=o.shapeMap[h]||o.find(function(xt){return xt.get("className")===h});if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,l.deepMix)(u,e.labelCfg));var B=this.getLabelStyleByPosition(e,u,o),V=(n=e.labelCfg)===null||n===void 0?void 0:n.style,$=(0,U.__assign)((0,U.__assign)({},B),V),ut=$.rotate;if(delete $.rotate,!isNaN(ut)&&ut!==""){var ct=[1,0,0,0,1,0,0,0,1];ct=Dl(ct,[["t",-$.x,-$.y],["r",ut],["t",$.x,$.y]]),$.matrix=ct,c.attr($)}else((i=c.getMatrix())===null||i===void 0?void 0:i[4])!==1&&c.resetMatrix(),c.attr($);if(!A)$.background&&(A=this.drawLabelBg(e,o,c),A.set("classname",h),o.shapeMap[h]=A,c.toFront());else if($.background){var ht=this.getLabelBgStyleByPosition(c,u);A.attr(ht)}else o.removeChild(A)}else{var P=this.drawLabel(e,o);P.set("className",f),o.shapeMap[f]=P}}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,i,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,l.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),h=r.getStateStyle(f);if(!(!h&&!c)){var A=(0,l.mix)({},h||c),P=r.getContainer(),B={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(B.r=1,B.width=1,B.height=1),t){var V=function(Nr){var yn,dn=A[Nr];if((0,l.isPlainObject)(dn)&&!M.includes(Nr)){var Lr=((o=P.shapeMap)===null||o===void 0?void 0:o[Nr])||P.find(function(Yr){return Yr.get("name")===Nr});Lr==null||Lr.attr(dn)}else s.attr((yn={},yn[Nr]=dn,yn))};for(var $ in A)V($)}else{var ut=bu(r.getCurrentStatesStyle()),ct=r.getModel(),ht=(0,l.mix)({},ct.style,bu(r.getOriginStyle())),xt=s.get("name"),Wt=s.attr(),Jt={};Object.keys(Wt).forEach(function(Zr){if(Zr!=="img"){var Nr=Wt[Zr];Nr&&_d(Nr)==="object"?Jt[Zr]=(0,l.clone)(Nr):Jt[Zr]=Nr}});var $t={},ve=function(Nr){var yn=A[Nr];if((0,l.isPlainObject)(yn)&&!M.includes(Nr)){var dn=P.shapeMap[Nr]||P.find(function(on){return on.get("name")===Nr});if(dn){var Lr=bu(dn.attr());(0,l.each)(yn,function(on,sn){if(Nr===xt&&Jt[sn]&&!B[sn]){delete Jt[sn];var Sn=ht[Nr][sn]||Y[u][sn];s.attr(sn,Sn)}else if(Lr[sn]||Lr[sn]===0){delete Lr[sn];var Ln=ht[Nr][sn]||Y[u][sn];dn.attr(sn,Ln)}}),$t[Nr]=Lr}}else if(Jt[Nr]&&!B[Nr]){delete Jt[Nr];var Yr=ht[Nr]||(ht[xt]?ht[xt][Nr]:void 0)||Y[u][Nr];s.attr(Nr,Yr)}};for(var Oe in A)ve(Oe);xt?$t[xt]=Jt:(0,l.mix)($t,Jt);for(var $ in ut)if(!B[$]){var xe=ut[$];(!(0,l.isPlainObject)(xe)||M.includes($))&&(xt?((0,l.mix)(ht[xt],(i={},i[$]=xe,i)),delete ht[$]):(0,l.mix)(ht,(n={},n[$]=xe,n)),delete ut[$])}var Ze={};(0,l.deepMix)(Ze,ht,$t,ut);var ar=!1,Fr=function(Nr){var yn,dn,Lr=Ze[Nr];if((0,l.isPlainObject)(Lr)&&!M.includes(Nr)){var Yr=P.shapeMap[Nr]||P.find(function(sn){return sn.get("name")===Nr});Yr&&((Yr.get("type")==="text"||Yr.get("labelRelated"))&&(delete Lr.x,delete Lr.y,delete Lr.matrix),Nr===xt&&(u==="combo"&&(delete Lr.r,delete Lr.width,delete Lr.height),ar=!0),Yr.attr(Lr))}else if(!ar){var on=Lr||Y[u][Nr];u==="combo"?xt||s.attr((yn={},yn[Nr]=on,yn)):s.attr((dn={},dn[Nr]=on,dn))}};for(var rn in Ze)Fr(rn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),i=this.getOptions(r),o=i.stateStyles,s=i.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,l.clone)(f):(0,l.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},Gt={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:ue.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||ue.defaultNode.size;return(0,l.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,l.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=Yc(n,r));var i=t.position||this.labelPosition;if(i==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,l.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(i){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var i=e.getBBox(),o=ld(n.padding),s=i.width+o[1]+o[3],u=i.height+o[0]+o[2];return(0,U.__assign)((0,U.__assign)({x:i.minX-o[3],y:i.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),i=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=i,i},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ze){return Ze.get("className")==="link-point-left"}),i=t.shapeMap["link-point-right"]||t.find(function(Ze){return Ze.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ze){return Ze.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Ze){return Ze.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),i&&!u&&(u=i.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,l.mix)({},u,e.linkPoints),c=f.fill,h=f.stroke,A=f.lineWidth,P=f.size/2;P||(P=f.r);var B=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},V=B.left,$=B.right,ut=B.top,ct=B.bottom,ht=this.getSize(e),xt=ht[0],Wt=ht[1],Jt={r:P,fill:c,stroke:h,lineWidth:A};if(n)!V&&V!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,U.__assign)((0,U.__assign)({},Jt),{x:-xt/2,y:0}));else if(V){var $t="link-point-left";t.shapeMap[$t]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Jt),{x:-xt/2,y:0}),className:$t,name:$t,isAnchorPoint:!0})}if(i)!$&&$!==void 0&&(i.remove(),delete t.shapeMap["link-point-right"]),i.attr((0,U.__assign)((0,U.__assign)({},Jt),{x:xt/2,y:0}));else if($){var ve="link-point-right";t.shapeMap[ve]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Jt),{x:xt/2,y:0}),className:ve,name:ve,isAnchorPoint:!0})}if(o)!ut&&ut!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,U.__assign)((0,U.__assign)({},Jt),{x:0,y:-Wt/2}));else if(ut){var Oe="link-point-top";t.shapeMap[Oe]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Jt),{x:0,y:-Wt/2}),className:Oe,name:Oe,isAnchorPoint:!0})}if(s)!ct&&ct!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,U.__assign)((0,U.__assign)({},Jt),{x:0,y:Wt/2}));else if(ct){var xe="link-point-bottom";t.shapeMap[xe]=t.addShape("circle",{attrs:(0,U.__assign)((0,U.__assign)({},Jt),{x:0,y:Wt/2}),className:xe,name:xe,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,i){var o=t.get("keyShape");o.attr((0,U.__assign)({},r)),this.updateLabel(e,t,i),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),i=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(ut){return ut.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,l.mix)({},f.attr(),i),h=c.width,A=h===void 0?20:h,P=c.height,B=P===void 0?20:P;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(A=0,B=0),f.attr((0,U.__assign)((0,U.__assign)({},c),{x:-A/2,y:-B/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var V="".concat(this.type,"-icon");if(u)n.shapeMap[V]=n.addShape("text",{attrs:(0,U.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:V,name:V});else{var A=i.width,B=i.height;n.shapeMap[V]=n.addShape("image",{attrs:(0,U.__assign)((0,U.__assign)({},i),{x:-A/2,y:-B/2}),className:V,name:V})}var $=n.shapeMap["node-label"]||n.find(function(ut){return ut.get("name")==="node-label"});$&&$.toFront()}}},ee=(0,U.__assign)((0,U.__assign)({},Et),Gt);Va.registerNode("single-node",ee);var pe="edge-shape";function Te(a){var e=a;return a==="start"?e="end":a==="end"&&(e="start"),e}var We={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:ue.defaultEdge.size,style:{x:0,y:0,stroke:ue.defaultEdge.style.stroke,lineAppendWidth:ue.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ue.edgeLabel.style.fill,fontSize:ue.edgeLabel.style.fontSize,fontFamily:ue.windowFontFamily}},stateStyles:(0,U.__assign)({},ue.edgeStateStyles)},getPath:function(e){var t=[];return(0,l.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,l.mix)({},t,r,e.style),i=e.size||ue.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),h=(0,l.mix)({},ue.defaultEdge.style,{stroke:ue.defaultEdge.color,lineWidth:i,path:c},n);return h},updateShapeStyle:function(e,t,r){var n,i=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||i.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),h=[u];c&&(h=h.concat(c)),h.push(f);var A=o.attr(),P=e.style||{};P.stroke===void 0&&(P.stroke=e.color);var B=e.sourceNode,V=e.targetNode,$={radius:P.radius};c||($={source:B,target:V,offset:P.offset,radius:P.radius});var ut=this.getPath(h,$),ct={};r==="move"?ct={path:ut}:(A.endArrow&&P.endArrow===!1&&(e.style.endArrow={path:""}),A.startArrow&&P.startArrow===!1&&(e.style.startArrow={path:""}),ct=(0,U.__assign)({},e.style),ct.lineWidth===void 0&&(ct.lineWdith=((0,l.isNumber)(s)?s:s==null?void 0:s[0])||A.lineWidth),ct.path===void 0&&(ct.path=ut),ct.stroke===void 0&&(ct.stroke=A.stroke||e.color)),o&&o.attr(ct)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,i={},o=r==null?void 0:r.shapeMap[pe],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return i.x=e.startPoint.x+u,i.y=e.startPoint.y+f,i.text=e.label,i;var c;(0,l.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var h=Fa(o,s,u,f,c);return i.x=h.x,i.y=h.y,i.rotate=h.rotate,i.textAlign=this._getTextAlign(n,h.angle),i.text=e.label,i},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var i=n.padding,o=r.width+i[1]+i[3],s=r.height+i[0]+i[2],u=(0,U.__assign)((0,U.__assign)({},n),{width:o,height:s,x:r.minX-i[3],y:r.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,l.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Te(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:pe,name:pe,attrs:r});return t.shapeMap[pe]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,l.deepMix)({},r,e.labelCfg),i=this.getLabelStyle(e,n,t),o=i.rotate;delete i.rotate;var s=t.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),i.background){var u=this.drawLabelBg(e,t,s,i,o),f=this.itemType+q;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,i){var o=this.options.labelCfg,s=(0,l.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},pr=(0,U.__assign)((0,U.__assign)({},Et),We);Va.registerEdge("single-edge",pr),Va.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Va.registerEdge("spline",{getPath:function(e){var t=Vd(e);return t}},"single-edge"),Va.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},i,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],i=Po(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=i.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=i.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=i.y<o.y?0:1:this.clockwise=i.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,l.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},i=Po(t,o,r)}var f=ga(t,i),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Va.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,l.isArray)(this.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,l.isArray)(this.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var i=qh(r,n,e.curvePosition,e.curveOffset);t=[i]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Va.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,i=qh(r,n,e.curvePosition[0],e.curveOffset[0]),o=qh(r,n,e.curvePosition[1],e.curveOffset[1]);t=[i,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Va.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,i=[0,0];e.curveOffset?i=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+i[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+i[1]};return[o,s]}},"cubic"),Va.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,i=[0,0];e.curveOffset?i=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+i[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+i[1],y:r.y},u=[o,s];return u}},"cubic"),Va.registerEdge("loop",{getPathPoints:function(e){return Ra(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Tr={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:ue.comboLabel.refX,refY:ue.comboLabel.refY,options:{style:{stroke:ue.defaultCombo.style.stroke,fill:ue.defaultCombo.style.fill,lineWidth:ue.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ue.comboLabel.style.fill,fontSize:ue.comboLabel.style.fontSize,fontFamily:ue.windowFontFamily}},stateStyles:(0,U.__assign)({},ue.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,l.clone)(e.size||this.options.size||ue.defaultCombo.size);return(0,l.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,l.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,i=e.padding||this.options.padding;(0,l.isArray)(i)&&(i=Math.max.apply(Math,i));var o=t.refX,s=t.refY;(0,l.isNil)(o)&&(o=this.refX),(0,l.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+i,h;switch(r){case"top":h={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":h={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":h={x:-c+o,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:e.label,textAlign:"center"};break;default:h={x:c+o,y:0,textAlign:"right"};break}return h.text=e.label,h},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),i=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return i},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,i=e.collapsedSubstituteIcon,o=i===void 0?{}:i,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,h=s.height,A=t.getContainer(),P=A.find(function(ut){return ut.get("name")==="combo-collapsed-substitute-icon"}),B=P&&!P.destroyed,V=t.get("keyShape");if(n&&u){if(B)P.show();else{var $={width:c||r.r*2||r.width,height:h||r.r*2||r.height};P=A.addShape("image",{attrs:(0,U.__assign)({img:f,x:-$.width/2,y:-$.height/2},$),name:"combo-collapsed-substitute-icon",draggable:!0})}V.hide()}else B&&(P.hide(),V.show())},updateShape:function(e,t,r){var n=this,i=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&i.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),i.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(i.attr((0,U.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Br=(0,U.__assign)((0,U.__assign)({},Et),Tr);Va.registerCombo("single-combo",Br),Va.registerCombo("circle",{options:{size:[ue.defaultCombo.size[0],ue.defaultCombo.size[0]],padding:Math.max.apply(Math,ue.defaultCombo.padding),animate:!0,style:{stroke:ue.defaultCombo.style.stroke,fill:ue.defaultCombo.style.fill,lineWidth:ue.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ue.comboLabel.style.fill,fontSize:ue.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,U.__assign)({},ue.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,l.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},i=(0,l.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,l.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,l.isNumber)(i.r)||isNaN(i.r)?s=u[0]/2||ue.defaultCombo.style.r:s=Math.max(i.r,u[0]/2)||u[0]/2}i.r=s+r;var f=(0,U.__assign)({x:0,y:0},i);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,l.isArray)(n)&&(n=Math.max.apply(Math,n));var i=(0,l.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,l.isNumber)(o)?o/2:o[0]/2:s=Math.max(i.r,r[0]/2)||r[0]/2,i.r=s+n;var u=t.get("sizeCache");u&&(u.r=i.r);var f={stroke:e.color},c=t.get("keyShape"),h=(0,l.mix)({},c.attr(),f,i);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,h,!0)}},"single-combo"),Va.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:ue.defaultCombo.style.stroke,fill:ue.defaultCombo.style.fill,lineWidth:ue.defaultCombo.style.lineWidth},labelCfg:{style:{fill:ue.comboLabel.style.fill,fontSize:ue.comboLabel.style.fontSize,fontFamily:ue.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,U.__assign)({},ue.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,i=e.padding||this.options.padding;(0,l.isNumber)(i)&&(i=[i,i,i,i]);var o=t.refX,s=t.refY;(0,l.isNil)(o)&&(o=this.refX),(0,l.isNil)(s)&&(s=this.refY);var u=-n.width/2-i[3],f=n.width/2+i[1],c=-n.height/2-i[0],h=n.height/2+i[2],A;switch(r){case"top":A={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":A={x:0,y:h+s,textBaseline:"top",textAlign:"center"};break;case"left":A={x:u+s,y:0,textAlign:"left"};break;case"center":A={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":A={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:A={x:f+o,y:0,textAlign:"right"};break}return A.text=e.label,A},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,l.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},i=(0,l.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,l.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,l.isNumber)(i.width)||isNaN(i.width)?s=o[0]||ue.defaultCombo.style.width:s=Math.max(i.width,o[0])||o[0],!(0,l.isNumber)(i.height)||isNaN(i.height)?u=o[1]||ue.defaultCombo.style.height:u=Math.max(i.height,o[1])||o[1]);var c=-s/2-r[3],h=-u/2-r[0];i.width=s+r[1]+r[3],i.height=u+r[0]+r[2];var A=(0,U.__assign)({x:c,y:h},i);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},A},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,l.isNumber)(n)&&(n=[n,n,n,n]);var i=(0,l.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,l.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(i.width,r[0])||r[0],s=Math.max(i.height,r[1])||r[1]),i.width=o+n[1]+n[3],i.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=i.width,f.height=i.height),i.x=-o/2-n[3],i.y=-s/2-n[0];var c={stroke:e.color},h=t.get("keyShape"),A=(0,l.mix)({},h.attr(),c,i);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,A,!1)}},"single-combo"),Va.registerNode("simple-circle",{options:{size:ue.defaultNode.size,style:{x:0,y:0,stroke:ue.defaultNode.style.stroke,fill:ue.defaultNode.style.fill,lineWidth:ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:ue.nodeLabel.style.fill,fontSize:ue.nodeLabel.style.fontSize,fontFamily:ue.windowFontFamily}},stateStyles:(0,U.__assign)({},ue.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),i=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=i,i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.deepMix)({},t,r),i=this.getSize(e),o=i[0]/2,s=(0,U.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),i={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,l.deepMix)({},o.attr(),i,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Va.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:ue.defaultNode.style.stroke,fill:ue.defaultNode.style.fill,lineWidth:ue.defaultNode.style.lineWidth},labelCfg:{style:{fill:ue.nodeLabel.style.fill,fontSize:ue.nodeLabel.style.fontSize,fontFamily:ue.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,U.__assign)({},ue.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=n.width||i[0],s=n.height||i[1],u=(0,U.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),i=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||i.width,o[1]=s.attr("height")||i.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,l.mix)({},i,s.attr(),u);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Va.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:ue.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var i=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,i),i},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,i=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,U.__assign)({r:u,x:i,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,h=i-f/2,A=o-c/2;t.setClip({type:"rect",attrs:(0,U.__assign)({x:h,y:A,width:f,height:c},s)})}else if(n==="ellipse"){var P=r.rx,B=r.ry;t.setClip({type:"ellipse",attrs:(0,U.__assign)({x:i,y:o,rx:P,ry:B},s)})}else if(n==="polygon"){var V=r.points;t.setClip({type:"polygon",attrs:(0,U.__assign)({points:V},s)})}else if(n==="path"){var $=r.path;t.setClip({type:"path",attrs:(0,U.__assign)({path:$},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,i=this.getSize(e),o=i[0],s=i[1];r&&(o=r.width||i[0],s=r.height||i[1]);var u=(0,U.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),i=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);i&&!i.destroyed&&i.attr(o)}},"single-node");var Ir={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return i},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return i},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return i},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,i="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return i},triangleRect:function(e,t,r,n,i,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),i===void 0&&(i=5),o===void 0&&(o=0);var s=o*2,u=s+t+i,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},Dr={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),i=r*Math.sin(Math.PI/6);return[["M",e-n,t+i],["L",e+n,t+i],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),i=r*Math.sin(Math.PI/6);return[["M",e-n,t-i],["L",e+n,t-i],["L",e,t+r],["Z"]]}},en=Va,_n=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Dn=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},gn=re,ei=(0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)((0,U.__assign)({},T),k),m),z),y),v),{transform:gn,mat3:nt}),In=ei,xi=function(){function a(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return a.prototype.initLayout=function(){},a.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},a.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},a.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(i,o){return i===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},a.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,i=n===void 0?{}:n;if(t){var o=i.animate,s=o===void 0&&(r==="force"||r==="force2"),u=Dn(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},a.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,U.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},a.prototype.changeData=function(e){this.layout(e)},a.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,i=(n=r.getType)===null||n===void 0?void 0:n.call(r);i&&t.push(i),r.destroy()}),this.layoutMethods=[],t},a.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},a.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],i=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),h=this.graph.getCombos(),A=f.length,P=0;P<A;P++){var B=f[P];if(!(!B||B.destroyed)){var V=B.getModel();if(!B.isVisible()){r.push(V);continue}t.push(V)}}for(var $=c.length,P=0;P<$;P++){var ut=c[P];if(!(!ut||ut.destroyed)){var V=ut.getModel();if(!ut.isVisible()){i.push(V);continue}V.isComboEdge?o.push(V):n.push(V)}}for(var ct=h.length,P=0;P<ct;P++){var ht=h[P];if(!ht.destroyed){var V=ht.getModel();if(!ht.isVisible()){u.push(V);continue}s.push(V)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:i,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(xt){return xt.getModel()})}},a.prototype.relayout=function(e){var t=this,r=this,n=r.graph,i=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){if(e){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(o.center,s)}n.emit("beforelayout");var u=Promise.resolve();i==null||i.forEach(function(f,c){var h=o[c]||o;u=u.then(function(){var A,P=t.execLayoutMethod(h,c);return c===i.length-1&&((A=o.onAllLayoutEnd)===null||A===void 0||A.call(o)),P})})}},a.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,i=(0,U.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,l.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,l.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,h){return c[h.id]=!0,c},{});s=function(h){return f[h.source]&&f[h.target]}}return(0,U.__assign)({nodes:u,edges:n.filter(s)},i)},a.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,l.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Dd(o);return s.size=[s.width,s.height],s}),i=Object.values((0,l.groupBy)(e,"layoutOrder"));return{groupNodes:i,layoutNodes:n}},a.prototype.layoutAnimate=function(){},a.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Bu(r[0].x))){for(var n=[0,0],i=r.length,o=0;o<i;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<i;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},a.prototype.initPositions=function(e,t){var r,n=this.graph;if(!t)return!1;var i=t.filter(function(ht){return Bu(ht.x)||Bu(ht.y)}),o=i?i.length:0;if(o){var s=(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this);if(s)return!1;var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),h=Math.ceil(o/c),A=u/(c-1),P=f/(h-1);(!isFinite(A)||!A)&&(A=0),(!isFinite(P)||!A)&&(P=0);for(var B=e[0]-u/2,V=e[1]-f/2,$=!0,ut=0;ut<o;ut++){var ct=i[ut];Bu(+ct.x)&&($=!1,ct.x=ut%c*A+B),Bu(+ct.y)&&($=!1,ct.y=Math.floor(ut/c)*P+V)}return $}},a.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},a}(),ai=xi,oi=function(){function a(e){this.graph=e,this.destroyed=!1,this.initEvents()}return a}(),va=oi,Yi=en.registerNode,Ia=en.registerEdge,ra=en.registerCombo,Pa=W.registerBehavior,Jr=ue,Ys={version:ue.version,AbstractGraph:ev,BaseGlobal:Jr,Util:In,Shape:en,Node:md,Edge:Lv,Combo:Wd,Hull:qd,registerNode:en.registerNode,registerEdge:en.registerEdge,registerCombo:en.registerCombo,registerBehavior:W.registerBehavior,Arrow:Ir,Marker:Dr,AbstractLayout:ai,AbstractEvent:va},tc=S(33101);function Bc(){return window?window.devicePixelRatio:1}function Ji(a,e,t,r){var n=a-t,i=e-r;return Math.sqrt(n*n+i*i)}function df(a,e,t,r,n,i){return n>=a&&n<=a+t&&i>=e&&i<=e+r}function Gu(a,e){return!(e.minX>a.maxX||e.maxX<a.minX||e.minY>a.maxY||e.maxY<a.minY)}function Nl(a,e){return!a||!e?a||e:{minX:Math.min(a.minX,e.minX),minY:Math.min(a.minY,e.minY),maxX:Math.max(a.maxX,e.maxX),maxY:Math.max(a.maxY,e.maxY)}}function Gc(a,e){return a[0]===e[0]&&a[1]===e[1]}var _h=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Sh=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ep=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,nv=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function iv(a,e){var t=a.match(nv);(0,l.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function Sd(a,e,t){var r=_h.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),i=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,h=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,A=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,P=a.createLinearGradient(s.x,s.y,h,A);return iv(i,P),P}function Xy(a,e,t){var r=Sh.exec(t),n=parseFloat(r[1]),i=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(nv);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,h=f.maxY-f.minY,A=Math.sqrt(c*c+h*h)/2,P=a.createRadialGradient(f.minX+c*n,f.minY+h*i,0,f.minX+c/2,f.minY+h/2,o*A);return iv(s,P),P}function Yy(a,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,i=ep.exec(t),o=i[1],s=i[2];function u(){r=a.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function Hy(a,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,l.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Sd(a,e,t);if(t[0]==="r")return Xy(a,e,t);if(t[0]==="p")return Yy(a,e,t)}return t}if(t instanceof CanvasPattern)return t}function Zy(a){var e=0,t=0,r=0,n=0;return(0,l.isArray)(a)?a.length===1?e=t=r=n=a[0]:a.length===2?(e=r=a[0],t=n=a[1]):a.length===3?(e=a[0],t=n=a[1],r=a[2]):(e=a[0],t=a[1],r=a[2],n=a[3]):e=t=r=n=a,[e,t,r,n]}function rp(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Wp(a,e){return rp(a)*rp(e)?(a[0]*e[0]+a[1]*e[1])/(rp(a)*rp(e)):1}function Ig(a,e){return(a[0]*e[1]<a[1]*e[0]?-1:1)*Math.acos(Wp(a,e))}function Pg(a,e){var t=e[1],r=e[2],n=(0,l.mod)((0,l.toRadian)(e[3]),Math.PI*2),i=e[4],o=e[5],s=a[0],u=a[1],f=e[6],c=e[7],h=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,A=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,P=h*h/(t*t)+A*A/(r*r);P>1&&(t*=Math.sqrt(P),r*=Math.sqrt(P));var B=t*t*(A*A)+r*r*(h*h),V=B?Math.sqrt((t*t*(r*r)-B)/B):1;i===o&&(V*=-1),isNaN(V)&&(V=0);var $=r?V*t*A/r:0,ut=t?V*-r*h/t:0,ct=(s+f)/2+Math.cos(n)*$-Math.sin(n)*ut,ht=(u+c)/2+Math.sin(n)*$+Math.cos(n)*ut,xt=[(h-$)/t,(A-ut)/r],Wt=[(-1*h-$)/t,(-1*A-ut)/r],Jt=Ig([1,0],xt),$t=Ig(xt,Wt);return Wp(xt,Wt)<=-1&&($t=Math.PI),Wp(xt,Wt)>=1&&($t=0),o===0&&$t>0&&($t=$t-2*Math.PI),o===1&&$t<0&&($t=$t+2*Math.PI),{cx:ct,cy:ht,rx:Gc(a,[f,c])?0:t,ry:Gc(a,[f,c])?0:r,startAngle:Jt,endAngle:Jt+$t,xRotation:n,arcFlag:i,sweepFlag:o}}var np=Math.sin,ip=Math.cos,Vp=Math.atan2,ap=Math.PI;function Og(a,e,t,r,n,i,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-i,h=Vp(c,f),A=new $p({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ip(ap/6)+","+10*np(ap/6)+" L0,0 L"+10*ip(ap/6)+",-"+10*np(ap/6),stroke:s,lineWidth:u}});A.translate(n,i),A.rotateAtPoint(n,i,h),a.set(o?"startArrowShape":"endArrowShape",A)}function Dg(a,e,t,r,n,i,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,h=o?s:u,A=h.d,P=h.fill,B=h.stroke,V=h.lineWidth,$=(0,U.__rest)(h,["d","fill","stroke","lineWidth"]),ut=t-n,ct=r-i,ht=Vp(ct,ut);A&&(n=n-ip(ht)*A,i=i-np(ht)*A);var xt=new $p({type:"path",canvas:a.get("canvas"),isArrowShape:!0,attrs:(0,U.__assign)((0,U.__assign)({},$),{stroke:B||f,lineWidth:V||c,fill:P})});xt.translate(n,i),xt.rotateAtPoint(n,i,ht),a.set(o?"startArrowShape":"endArrowShape",xt)}function td(a,e,t,r,n){var i=Vp(r-e,t-a);return{dx:ip(i)*n,dy:np(i)*n}}function jp(a,e,t,r,n,i){typeof e.startArrow=="object"?Dg(a,e,t,r,n,i,!0):e.startArrow?Og(a,e,t,r,n,i,!0):a.set("startArrowShape",null)}function Xp(a,e,t,r,n,i){typeof e.endArrow=="object"?Dg(a,e,t,r,n,i,!1):e.endArrow?Og(a,e,t,r,n,i,!1):a.set("startArrowShape",null)}var Ng={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Md(a,e){var t=e.attr();for(var r in t){var n=t[r],i=Ng[r]?Ng[r]:r;i==="matrix"&&n?a.transform(n[0],n[1],n[3],n[4],n[6],n[7]):i==="lineDash"&&a.setLineDash?(0,l.isArray)(n)&&a.setLineDash(n):(i==="strokeStyle"||i==="fillStyle"?n=Hy(a,e,n):i==="globalAlpha"&&(n=n*a.globalAlpha),a[i]=n)}}function Yp(a,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(a,t):n.skipDraw()}}function Ky(a,e,t){var r=a.get("refreshElements");(0,l.each)(r,function(n){if(n!==a)for(var i=n.cfg.parent;i&&i!==a&&!i.cfg.refresh;)i.cfg.refresh=!0,i=i.cfg.parent}),r[0]===a?Zp(e,t):Hp(e,t)}function Hp(a,e){for(var t=0;t<a.length;t++){var r=a[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Zp(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Hp(r.cfg.children,e);else{var n=$y(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Hp(r.cfg.children,e)}}}function Lg(a){for(var e=0;e<a.length;e++){var t=a[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Lg(t.cfg.children)}}function Zp(a,e){for(var t=0;t<a.length;t++){var r=a[t];r.cfg.refresh=!0,r.isGroup()&&Zp(r.get("children"),e)}}function $y(a,e){var t=a.cfg.cacheCanvasBBox,r=a.cfg.isInView&&t&&Gu(t,e);return r}function kg(a,e,t,r){var n=t.path,i=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var h=n[c],A=h[0];if(c===0&&i&&i.d){var P=a.getStartTangent();f=td(P[0][0],P[0][1],P[1][0],P[1][1],i.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var B=n[c+1];if(B[0]==="Z"){var P=a.getEndTangent();f=td(P[0][0],P[0][1],P[1][0],P[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var P=a.getEndTangent();f=td(P[0][0],P[0][1],P[1][0],P[1][1],o.d)}var V=f.dx,$=f.dy;switch(A){case"M":e.moveTo(h[1]-V,h[2]-$),u=[h[1],h[2]];break;case"L":e.lineTo(h[1]-V,h[2]-$);break;case"Q":e.quadraticCurveTo(h[1],h[2],h[3]-V,h[4]-$);break;case"C":e.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-V,h[6]-$);break;case"A":{var ut=void 0;r?(ut=r[c],ut||(ut=Pg(s,h),r[c]=ut)):ut=Pg(s,h);var ct=ut.cx,ht=ut.cy,xt=ut.rx,Wt=ut.ry,Jt=ut.startAngle,$t=ut.endAngle,ve=ut.xRotation,Oe=ut.sweepFlag;if(e.ellipse)e.ellipse(ct,ht,xt,Wt,ve,Jt,$t,1-Oe);else{var xe=xt>Wt?xt:Wt,Ze=xt>Wt?1:xt/Wt,ar=xt>Wt?Wt/xt:1;e.translate(ct,ht),e.rotate(ve),e.scale(Ze,ar),e.arc(0,0,xe,Jt,$t,1-Oe),e.scale(1/Ze,1/ar),e.rotate(-ve),e.translate(-ct,-ht)}break}case"Z":e.closePath();break;default:break}if(A==="Z")s=u;else{var Fr=h.length;s=[h[Fr-2],h[Fr-1]]}}}}function Rg(a,e){var t=a.get("canvas");t&&(e==="remove"&&(a._cacheCanvasBBox=a.get("cacheCanvasBBox")),a.get("hasChanged")||(a.set("hasChanged",!0),a.cfg.parent&&a.cfg.parent.get("hasChanged")||(t.refreshElement(a,e,t),t.get("autoDraw")&&t.draw())))}function Qy(a){var e;if(a.destroyed)e=a._cacheCanvasBBox;else{var t=a.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=a.getCanvasBBox(),i=n&&!!(n.width&&n.height);r&&i?e=Nl(t,n):r?e=t:i&&(e=n)}return e}function Jy(a){if(!a.length)return null;var e=[],t=[],r=[],n=[];return(0,l.each)(a,function(i){var o=Qy(i);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,l.min)(e),minY:(0,l.min)(t),maxX:(0,l.max)(r),maxY:(0,l.max)(n)}}function qy(a,e){return!a||!e||!Gu(a,e)?null:{minX:Math.max(a.minX,e.minX),minY:Math.max(a.minY,e.minY),maxX:Math.min(a.maxX,e.maxX),maxY:Math.min(a.maxY,e.maxY)}}var tm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Rg(this,t)},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),Md(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,l.each)(t,function(A){var P=A.cfg.cacheCanvasBBox;P&&A.cfg.isInView&&(r.push(P.minX,P.maxX),n.push(P.minY,P.maxY))});var i=null;if(r.length){var o=(0,l.min)(r),s=(0,l.max)(r),u=(0,l.min)(n),f=(0,l.max)(n);i={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var h=c.getViewRange();this.set("isInView",Gu(i,h))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",i)},e.prototype.draw=function(t,r){var n=this.cfg.children,i=r?this.cfg.refresh:!0;n.length&&i&&(t.save(),Md(t,this),this._applyClip(t,this.getClip()),Yp(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(yh),Bg=tm,em=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return Bg},e.prototype.onCanvasChange=function(t){Rg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Il(t),i=n(this),o=r/2,s=i.x-o,u=i.y-o,f=i.x+i.width+o,c=i.y+i.height+o;return{x:s,minX:s,y:u,minY:u,width:i.width+r,height:i.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),Md(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var i=this.getCanvasBBox();if(!Gu(r,i)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Md(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Gu(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,i=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,l.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=i):this.fill(t)),this.isStroke()&&n>0&&(!(0,l.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),i=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,i,o)},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Al),ec=em,rm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,h=o/2,A=Ji(u,f,t,r);return i&&n?A<=c+h:i?A<=c:n?A>=c-h&&A<=c+h:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,i=r.y,o=r.r;t.beginPath(),t.arc(n,i,o,0,Math.PI*2,!1),t.closePath()},e}(ec),nm=rm;function op(a,e,t,r){return a/(t*t)+e/(r*r)}var im=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,h=s.rx,A=s.ry,P=(t-f)*(t-f),B=(r-c)*(r-c);return i&&n?op(P,B,h+u,A+u)<=1:i?op(P,B,h,A)<=1:n?op(P,B,h-u,A-u)>=1&&op(P,B,h+u,A+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,i=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,i,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,i),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(ec),am=im;function Gg(a){return a instanceof HTMLElement&&(0,l.isString)(a.nodeName)&&a.nodeName.toUpperCase()==="CANVAS"}var om=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,l.isString)(t)){var i=new Image;i.onload=function(){if(r.destroyed)return!1;r.attr("img",i),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},i.crossOrigin="Anonymous",i.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Gg(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,i=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,h=r.sheight,A=r.img;(A instanceof Image||Gg(A))&&(!(0,l.isNil)(u)&&!(0,l.isNil)(f)&&!(0,l.isNil)(c)&&!(0,l.isNil)(h)?t.drawImage(A,u,f,c,h,n,i,o,s):t.drawImage(A,n,i,o,s))},e}(ec),sm=om;function Mh(a,e,t,r,n,i,o){var s=Math.min(a,t),u=Math.max(a,t),f=Math.min(e,r),c=Math.max(e,r),h=n/2;return i>=s-h&&i<=u+h&&o>=f-h&&o<=c+h?ce.pointToLine(a,e,t,r,i,o)<=n/2:!1}var um=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&jp(this,t,i,o,r,n),u&&Xp(this,t,r,n,i,o)},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,h=s.y2;return Mh(u,f,c,h,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,i=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},h={dx:0,dy:0};u&&u.d&&(c=td(n,i,o,s,r.startArrow.d)),f&&f.d&&(h=td(n,i,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,i+c.dy),t.lineTo(o-h.dx,s-h.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,o=t.y2;return ce.length(r,n,i,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,i=r.y1,o=r.x2,s=r.y2;return ce.pointAt(n,i,o,s,t)},e}(ec),fm=um,cm={circle:function(a,e,t){return[["M",a-t,e],["A",t,t,0,1,0,a+t,e],["A",t,t,0,1,0,a-t,e]]},square:function(a,e,t){return[["M",a-t,e-t],["L",a+t,e-t],["L",a+t,e+t],["L",a-t,e+t],["Z"]]},diamond:function(a,e,t){return[["M",a-t,e],["L",a,e-t],["L",a+t,e],["L",a,e+t],["Z"]]},triangle:function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e+r],["L",a,e-r],["L",a+t,e+r],["Z"]]},"triangle-down":function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e-r],["L",a+t,e-r],["L",a,e+r],["Z"]]}},lm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,l.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,i=t.symbol||"circle",o=this._getR(t),s,u;if((0,l.isFunction)(i))s=i,u=s(r,n,o),u=$e(u);else{if(s=e.Symbols[i],!s)return console.warn(i+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");kg(this,t,{path:r},n)},e.Symbols=cm,e}(ec),hm=lm;function Fg(a,e,t){var r=ui();return a.createPath(r),r.isPointInPath(e,t)}var dm=1e-6;function Kp(a){return Math.abs(a)<dm?0:a<0?-1:1}function vm(a,e,t){return(t[0]-a[0])*(e[1]-a[1])===(e[0]-a[0])*(t[1]-a[1])&&Math.min(a[0],e[0])<=t[0]&&t[0]<=Math.max(a[0],e[0])&&Math.min(a[1],e[1])<=t[1]&&t[1]<=Math.max(a[1],e[1])}function Ug(a,e,t){var r=!1,n=a.length;if(n<=2)return!1;for(var i=0;i<n;i++){var o=a[i],s=a[(i+1)%n];if(vm(o,s,[e,t]))return!0;Kp(o[1]-t)>0!=Kp(s[1]-t)>0&&Kp(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function av(a,e,t,r,n,i,o,s){var u=(Math.atan2(s-e,o-a)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:a+t*Math.cos(u),y:e+t*Math.sin(u)};return Ji(f.x,f.y,o,s)<=i/2}var pm=re;function gm(a){for(var e=!1,t=a.length,r=0;r<t;r++){var n=a[r],i=n[0];if(i==="C"||i==="A"||i==="Q"){e=!0;break}}return e}function ym(a,e,t,r,n){for(var i=!1,o=e/2,s=0;s<a.length;s++){var u=a[s],f=u.currentPoint,c=u.params,h=u.prePoint,A=u.box;if(!(A&&!df(A.x-o,A.y-o,A.width+e,A.height+e,t,r))){switch(u.command){case"L":case"Z":i=Mh(h[0],h[1],f[0],f[1],e,t,r);break;case"Q":var P=Vr.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],t,r);i=P<=e/2;break;case"C":var B=lt.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);i=B<=e/2;break;case"A":var V=u.arcParams,$=V.cx,ut=V.cy,ct=V.rx,ht=V.ry,xt=V.startAngle,Wt=V.endAngle,Jt=V.xRotation,$t=[t,r,1],ve=ct>ht?ct:ht,Oe=ct>ht?1:ct/ht,xe=ct>ht?ht/ct:1,Ze=pm(null,[["t",-$,-ut],["r",-Jt],["s",1/Oe,1/xe]]);qo.transformMat3($t,$t,Ze),i=av(0,0,ve,xt,Wt,e,$t[0],$t[1]);break;default:break}if(i)break}}return i}function mm(a){for(var e=a.length,t=[],r=[],n=[],i=0;i<e;i++){var o=a[i],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var sp=(0,U.__assign)({hasArc:gm,extractPolygons:mm,isPointInStroke:ym},E);function zg(a,e,t){for(var r=!1,n=0;n<a.length;n++){var i=a[n];if(r=Ug(i,e,t),r)break}return r}var bm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=$e(t);var r=sp.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Pd(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var i=this.getStartTangent();jp(this,t,i[0][0],i[0][1],i[1][0],i[1][1])}if(n){var i=this.getEndTangent();Xp(this,t,i[0][0],i[0][1],i[1][0],i[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=sp.isPointInStroke(s,o,t,r,c)}if(!f&&i)if(u)f=Fg(this,t,r);else{var h=this.attr("path"),A=sp.extractPolygons(h);f=zg(A.polygons,t,r)||zg(A.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");kg(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,l.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,i,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,l.each)(r,function(c,h){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),i=h)});var s=o[i];if((0,l.isNil)(s)||(0,l.isNil)(i))return null;var u=s.length,f=o[i+1];return lt.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",sp.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],i,o,s,u,f=this.get("curve");if(f){if((0,l.each)(f,function(c,h){s=f[h+1],u=c.length,s&&(t+=lt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,l.each)(f,function(c,h){s=f[h+1],u=c.length,s&&(i=[],i[0]=r/t,o=lt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,i[1]=r/t,n.push(i))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,i=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([i[0],i[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var i=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([i[0],i[1]]),n.push([o[0],o[1]]))}return n},e}(ec),$p=bm;function Wg(a,e,t,r,n){var i=a.length;if(i<2)return!1;for(var o=0;o<i-1;o++){var s=a[o][0],u=a[o][1],f=a[o+1][0],c=a[o+1][1];if(Mh(s,u,f,c,e,t,r))return!0}if(n){var h=a[0],A=a[i-1];if(Mh(h[0],h[1],A[0],A[1],e,t,r))return!0}return!1}var Em=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr().points,u=!1;return n&&(u=Wg(s,o,t,r,!0)),!u&&i&&(u=Ug(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var i=0;i<n.length;i++){var o=n[i];i===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(ec),xm=Em,wm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,i=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],h=n[s-1][1];i&&jp(this,t,n[1][0],n[1][1],u,f),o&&Xp(this,t,n[s-2][0],n[s-2][1],c,h)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){if(!n||!o)return!1;var s=this.attr().points;return Wg(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,i=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],h=n[s-1][1];if(i&&i.d){var A=td(u,f,n[1][0],n[1][1],i.d);u+=A.dx,f+=A.dy}if(o&&o.d){var A=td(n[s-2][0],n[s-2][1],c,h,o.d);c-=A.dx,h-=A.dy}t.beginPath(),t.moveTo(u,f);for(var P=0;P<s-1;P++){var B=n[P];t.lineTo(B[0],B[1])}t.lineTo(c,h)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,l.isNil)(r)?(this.set("totalLength",wn.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var i,o;return(0,l.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(i=(t-s[0])/(s[1]-s[0]),o=u)}),ce.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,i=[],o,s;(0,l.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=ce.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,i.push(o))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(ec),_m=wm;function Sm(a,e,t,r,n,i,o){var s=n/2;return df(a-s,e-s,t,n,i,o)||df(a+t-s,e-s,n,r,i,o)||df(a+s,e+r-s,t,n,i,o)||df(a-s,e+s,n,r,i,o)}function Mm(a,e,t,r,n,i,o,s){var u=i/2;return Mh(a+n,e,a+t-n,e,i,o,s)||Mh(a+t,e+n,a+t,e+r-n,i,o,s)||Mh(a+t-n,e+r,a+n,e+r,i,o,s)||Mh(a,e+r-n,a,e+n,i,o,s)||av(a+t-n,e+n,n,1.5*Math.PI,2*Math.PI,i,o,s)||av(a+t-n,e+r-n,n,0,.5*Math.PI,i,o,s)||av(a+n,e+r-n,n,.5*Math.PI,Math.PI,i,o,s)||av(a+n,e+n,n,Math.PI,1.5*Math.PI,i,o,s)}var Cm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,i,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,h=s.height,A=s.radius;if(A){var B=!1;return n&&(B=Mm(u,f,c,h,A,o,t,r)),!B&&i&&(B=Fg(this,t,r)),B}else{var P=o/2;if(i&&n)return df(u-P,f-P,c+P,h+P,t,r);if(i)return df(u,f,c,h,t,r);if(n)return Sm(u,f,c,h,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,i=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,i,o,s);else{var f=Zy(u),c=f[0],h=f[1],A=f[2],P=f[3];t.moveTo(n+c,i),t.lineTo(n+o-h,i),h!==0&&t.arc(n+o-h,i+h,h,-Math.PI/2,0),t.lineTo(n+o,i+s-A),A!==0&&t.arc(n+o-A,i+s-A,A,0,Math.PI/2),t.lineTo(n+P,i+s),P!==0&&t.arc(n+P,i+s-P,P,Math.PI/2,Math.PI),t.lineTo(n,i+c),c!==0&&t.arc(n+c,i+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(ec),Am=Cm,Tm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=za(t)},e.prototype._setText=function(t){var r=null;(0,l.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var i=this.attrs,o=i.textBaseline,s=i.x,u=i.y,f=i.fontSize*1,c=this._getSpaceingY(),h=Qi(i.text,i.fontSize,i.lineHeight),A;(0,l.each)(r,function(P,B){A=u+B*(c+f)-h+f,o==="middle"&&(A+=h-f-(h-f)/2),o==="top"&&(A+=h-f),(0,l.isNil)(P)||(n?t.fillText(P,s,A):t.strokeText(P,s,A))})},e.prototype._drawText=function(t,r){var n=this.attr(),i=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,l.isNil)(u)||(r?t.fillText(u,i,o):t.strokeText(u,i,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,i=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,l.isNil)(o)&&o!==1&&(t.globalAlpha=i),this.stroke(t)),this.isFill()&&(!(0,l.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=i):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(ec),Im=Tm;function Pm(a,e){if(e){var t=cc(e);return ea(t,a)}return a}function Vg(a,e,t){var r=a.getTotalMatrix();if(r){var n=Pm([e,t,1],r),i=n[0],o=n[1];return[i,o]}return[e,t]}function jg(a,e,t){if(a.isCanvas&&a.isCanvas())return!0;if(!nl(a)||a.cfg.isInView===!1)return!1;if(a.cfg.clipShape){var r=Vg(a,e,t),n=r[0],i=r[1];if(a.isClipped(n,i))return!1}var o=a.cfg.cacheCanvasBBox||a.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Xg(a,e,t){if(!jg(a,e,t))return null;for(var r=null,n=a.getChildren(),i=n.length,o=i-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Xg(s,e,t);else if(jg(s,e,t)){var u=s,f=Vg(s,e,t),c=f[0],h=f[1];u.isInShape(c,h)&&(r=s)}if(r)break}return r}var Om=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return Bg},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Bc();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){a.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*t,i.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){a.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Xg(this,t,r):n=a.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=Jy(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var i=this.get("clipView");i&&(n=qy(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,l.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),Md(t,this),Yp(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),i=this._getRefreshRegion();i?(t.clearRect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.save(),t.beginPath(),t.rect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.clip(),Md(t,this),Ky(this,n,i),Yp(t,n,i),t.restore()):r.length&&Lg(r),(0,l.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,l.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Cl),Ll=Om,R_="0.5.12",Qp={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Fi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},B_=null;function vf(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Yg(a){var e=Qp[a.type],t=a.getParent();if(!e)throw new Error("the type "+a.type+" is not supported by svg");var r=vf(e);if(a.get("id")&&(r.id=a.get("id")),a.set("el",r),a.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Hg(a,e){var t=a.get("el"),r=(0,l.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(i){n.appendChild(i)}),t.appendChild(n)}function Dm(a,e){var t=a.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],i=r.indexOf(a);if(n){if(i>e)t.insertBefore(a,n);else if(i<e){var o=r[e+1];o?t.insertBefore(a,o):t.appendChild(a)}}else t.appendChild(a)}function Nm(a,e){var t=a.cfg.el,r=a.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var i=e.find("filter",n);i||(i=e.addShadow(n)),t.setAttribute("filter","url(#"+i+")")}}function ov(a){var e=a.attr().matrix;if(e){for(var t=a.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function sv(a,e){var t=a.getClip(),r=a.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Yg(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Zg(a,e){e.forEach(function(t){t.draw(a)})}function Kg(a,e){var t=a.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=a.getParent(),i=n?n.getChildren():[t],o=a.get("el");if(e==="remove"){var s=a.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Dm(o,i.indexOf(a));else if(e==="sort"){var c=a.get("children");c&&c.length&&Hg(a,function(h,A){return c.indexOf(h)-c.indexOf(A)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?ov(a):e==="clip"?sv(a,r):e==="attr"||e==="add"&&a.draw(r)}}var Lm=function(a){(0,U.__extends)(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=vf("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Kg(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),sv(this,t),this.createPath(t),r.length&&Zg(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){Fi[s]&&i.setAttribute(Fi[s],o)}),ov(this)},e}(yh),$g=Lm,km=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){a.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return $g},e.prototype.onCanvasChange=function(t){Kg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Il(this.get("type"));n&&(r=n(this))}if(r){var i=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,h=i-c,A=o-c,P=i+s+c,B=o+u+c;return{x:h,y:A,minX:h,minY:A,maxX:P,maxY:B,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Yg(this),sv(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),i=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,h=n.lineWidth,A=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",i):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",i||o),f&&A.setAttribute(Fi.fillOpacity,f)),this.canStroke&&h>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&A.setAttribute(Fi.strokeOpacity,c),h&&A.setAttribute(Fi.lineWidth,h))},e.prototype._setColor=function(t,r,n){var i=this.get("el");if(!n){i.setAttribute(Fi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),i.setAttribute(Fi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),i.setAttribute(Fi[r],"url(#"+o+")")}else i.setAttribute(Fi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),i=r||n,o=i.shadowOffsetX,s=i.shadowOffsetY,u=i.shadowBlur,f=i.shadowColor;(o||s||u||f)&&Nm(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&ov(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),i=this.get("canvas"),o=i.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(Al),pf=km,Rm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="x"||s==="y"?i.setAttribute("c"+s,o):Fi[s]&&i.setAttribute(Fi[s],o)})},e}(pf),Bm=Rm,Gm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");if((0,l.each)(r||n,function(f,c){Fi[c]&&i.setAttribute(Fi[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=i.childNodes,u=s.length-1;u>=0;u--)i.removeChild(s[u]);i.appendChild(o)}else i.innerHTML=o}else i.innerHTML=n.html},e}(pf),Fm=Gm,Um=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="x"||s==="y"?i.setAttribute("c"+s,o):Fi[s]&&i.setAttribute(Fi[s],o)})},e}(pf),zm=Um,Wm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el");(0,l.each)(r||i,function(s,u){u==="img"?n._setImage(i.img):Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,l.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,l.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var i=document.createElement("canvas");i.setAttribute("width",""+t.width),i.setAttribute("height",""+t.height),i.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",i.toDataURL())}},e}(pf),Vm=Wm,jm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,l.isObject)(o)?t.addArrow(n,Fi[s]):t.getDefaultArrow(n,Fi[s]);i.setAttribute(Fi[s],"url(#"+u+")")}else i.removeAttribute(Fi[s]);else Fi[s]&&i.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,o=t.y2;return ce.length(r,n,i,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,i=r.y1,o=r.x2,s=r.y2;return ce.pointAt(n,i,o,s,t)},e}(pf),Xm=jm,up={circle:function(a,e,t){return[["M",a,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(a,e,t){return[["M",a-t,e-t],["L",a+t,e-t],["L",a+t,e+t],["L",a-t,e+t],["Z"]]},diamond:function(a,e,t){return[["M",a-t,e],["L",a,e-t],["L",a+t,e],["L",a,e+t],["Z"]]},triangle:function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e+r],["L",a,e-r],["L",a+t,e+r],["z"]]},triangleDown:function(a,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",a-t,e-r],["L",a+t,e-r],["L",a,e+r],["Z"]]}},Qg={get:function(a){return up[a]},register:function(a,e){up[a]=e},remove:function(a){delete up[a]},getAll:function(){return up}},Ym=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,l.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,i=t.r||t.radius,o=t.symbol||"circle",s;return(0,l.isFunction)(o)?s=o:s=Qg.get(o),s?s(r,n,i):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Qg,e}(pf),Hm=Ym,Zm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el");(0,l.each)(r||i,function(s,u){if(u==="path"&&(0,l.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,l.isObject)(s)?t.addArrow(i,Fi[u]):t.getDefaultArrow(i,Fi[u]);o.setAttribute(Fi[u],"url(#"+f+")")}else o.removeAttribute(Fi[u]);else Fi[u]&&o.setAttribute(Fi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var i=r?r.getPointAtLength(t*n):null;return i?{x:i.x,y:i.y}:null},e}(pf),Km=Zm,$m=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="points"&&(0,l.isArray)(o)&&o.length>=2?i.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&i.setAttribute(Fi[s],o)})},e}(pf),Qm=$m,Jm=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){a.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),i=this.get("el");(0,l.each)(r||n,function(o,s){s==="points"&&(0,l.isArray)(o)&&o.length>=2?i.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Fi[s]&&i.setAttribute(Fi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,l.isNil)(r)?(this.set("totalLength",wn.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var i,o;return(0,l.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(i=(t-s[0])/(s[1]-s[0]),o=u)}),ce.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],i)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,i=[],o,s;(0,l.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=ce.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,i.push(o))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(pf),qm=Jm,t1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,e1=/[^\s,]+/gi;function r1(a){var e=0,t=0,r=0,n=0;return(0,l.isArray)(a)?a.length===1?e=t=r=n=a[0]:a.length===2?(e=r=a[0],t=n=a[1]):a.length===3?(e=a[0],t=n=a[1],r=a[2]):(e=a[0],t=a[1],r=a[2],n=a[3]):e=t=r=n=a,{r1:e,r2:t,r3:r,r4:n}}function G_(a){if(a=a||[],isArray(a))return a;if(isString(a))return a=a.match(t1),each(a,function(e,t){if(e=e.match(e1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,i){isNaN(n)||(e[i]=+n)}),a[t]=e}),a}var n1=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,l.each)(r||i,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(i)),s=!0):u.indexOf(c)===-1&&Fi[c]&&o.setAttribute(Fi[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,i=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+i+",0 l 0,"+o+" l"+-i+" 0 z";var u=r1(s);(0,l.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(i-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-i)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(pf),i1=n1,Jg=.3,a1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},s1={left:"left",start:"left",center:"middle",right:"end",end:"end"},u1=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=a.prototype.getDefaultAttrs.call(this);return(0,U.__assign)((0,U.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,i=this.attr(),o=this.get("el");this._setFont(),(0,l.each)(r||i,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?ov(n):Fi[u]&&o.setAttribute(Fi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,i=r.textAlign,o=ql();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",o1[n]||"alphabetic"):t.setAttribute("alignment-baseline",a1[n]||"baseline"),t.setAttribute("text-anchor",s1[i]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),i=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,l.each)(u,function(h,A){A===0?s==="alphabetic"?c+='<tspan x="'+i+'" dy="'+-f+'em">'+h+"</tspan>":s==="top"?c+='<tspan x="'+i+'" dy="0.9em">'+h+"</tspan>":s==="middle"?c+='<tspan x="'+i+'" dy="'+-(f-1)/2+'em">'+h+"</tspan>":s==="bottom"?c+='<tspan x="'+i+'" dy="-'+(f+Jg)+'em">'+h+"</tspan>":s==="hanging"&&(c+='<tspan x="'+i+'" dy="'+(-(f-1)-Jg)+'em">'+h+"</tspan>"):c+='<tspan x="'+i+'" dy="1em">'+h+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(pf),f1=u1,c1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,l1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function qg(a){var e=a.match(h1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,l.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function d1(a,e){var t=c1.exec(a),r=(0,l.mod)((0,l.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],i,o;r>=0&&r<.5*Math.PI?(i={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(i={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(i={x:1,y:1},o={x:0,y:0}):(i={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-i.x+s*(o.y-i.y))/(u+1)+i.x,c=s*(o.x-i.x+s*(o.y-i.y))/(u+1)+i.y;e.setAttribute("x1",i.x),e.setAttribute("y1",i.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=qg(n)}function v1(a,e){var t=l1.exec(a),r=parseFloat(t[1]),n=parseFloat(t[2]),i=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",i),e.innerHTML=qg(o)}var p1=function(){function a(e){this.cfg={};var t=null,r=(0,l.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=vf("linearGradient"),d1(e,t)):(t=vf("radialGradient"),v1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return a.prototype.match=function(e,t){return this.cfg===t},a}(),g1=p1,y1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},m1={x:"-40%",y:"-40%",width:"200%",height:"200%"},b1=function(){function a(e){this.type="filter",this.cfg={},this.type="filter";var t=vf("filter");return(0,l.each)(m1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,l.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return a.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,l.each)(Object.keys(n),function(i){if(n[i]!==t[i])return r=!1,!1}),r},a.prototype.update=function(e,t){var r=this.cfg;return r[y1[e]]=t,this._parseShadow(r,this.el),this},a.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},a}(),E1=b1,x1=function(){function a(e,t){this.cfg={};var r=vf("marker"),n=(0,l.uniqueId)("marker_");r.setAttribute("id",n);var i=vf("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),r.appendChild(i),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=i,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,i):(this.cfg=o,this._setMarker(e.lineWidth,i)),this}return a.prototype.match=function(){return!1},a.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY",""+5)},a.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,i=this.cfg.d;(0,l.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),i&&r.setAttribute("refX",""+i/e)},a.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},a}(),t0=x1,w1=function(){function a(e){this.type="clip",this.cfg={};var t=vf("clipPath");this.el=t,this.id=(0,l.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return a.prototype.match=function(){return!1},a.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},a}(),_1=w1,S1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,M1=function(){function a(e){this.cfg={};var t=vf("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=vf("image");t.appendChild(r);var n=(0,l.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var i=S1.exec(e),o=i[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return a.prototype.match=function(e,t){return this.cfg===t},a}(),C1=M1,A1=function(){function a(e){var t=vf("defs"),r=(0,l.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return a.prototype.find=function(e,t){for(var r=this.children,n=null,i=0;i<r.length;i++)if(r[i].match(e,t)){n=r[i].id;break}return n},a.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},a.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},a.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new t0(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},a.prototype.addGradient=function(e){var t=new g1(e);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addArrow=function(e,t){var r=new t0(e,t);return this.el.appendChild(r.el),this.add(r),r.id},a.prototype.addShadow=function(e){var t=new E1(e);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addPattern=function(e){var t=new C1(e);return this.el.appendChild(t.el),this.add(t),t.id},a.prototype.addClip=function(e){var t=new _1(e);return this.el.appendChild(t.el),this.add(t),t.id},a}(),T1=A1,I1=function(a){(0,U.__extends)(e,a);function e(t){return a.call(this,(0,U.__assign)((0,U.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return $g},e.prototype.getShape=function(t,r,n){var i=n.target||n.srcElement;if(!Qp[i.tagName]){for(var o=i.parentNode;o&&!Qp[o.tagName];)o=o.parentNode;i=o}return this.find(function(s){return s.get("el")===i})},e.prototype.createDom=function(){var t=vf("svg"),r=new T1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var i=this.get("children");i&&i.length&&Hg(this,function(s,u){return i.indexOf(s)-i.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?ov(this):t==="clip"?sv(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();sv(this,t),r.length&&Zg(t,r)},e}(Cl),uv=I1,F_="0.5.6",P1=S(90094),fv=S.n(P1),O1=S(79590),fp=S.n(O1),cp=2,e0=.16,D1=.05,N1=.05,L1=.15,r0=5,n0=4,k1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function i0(a,e,t){var r;return Math.round(a.h)>=60&&Math.round(a.h)<=240?r=t?Math.round(a.h)-cp*e:Math.round(a.h)+cp*e:r=t?Math.round(a.h)+cp*e:Math.round(a.h)-cp*e,r<0?r+=360:r>=360&&(r-=360),r}function a0(a,e,t){if(a.h===0&&a.s===0)return a.s;var r;return t?r=a.s-e0*e:e===n0?r=a.s+e0:r=a.s+D1*e,r>1&&(r=1),t&&e===r0&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function o0(a,e,t){var r;return t?r=a.v+N1*e:r=a.v-L1*e,r>1&&(r=1),Number(r.toFixed(2))}function lp(a){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=fp()(a),n=r0;n>0;n-=1){var i=r.toHsv(),o=fp()({h:i0(i,n,!0),s:a0(i,n,!0),v:o0(i,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=n0;s+=1){var u=r.toHsv(),f=fp()({h:i0(u,s),s:a0(u,s),v:o0(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?k1.map(function(c){var h=c.index,A=c.opacity,P=fp().mix(e.backgroundColor||"#141414",t[h],A*100).toHexString();return P}):t}var Jp={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ds={},qp={};Object.keys(Jp).forEach(function(a){Ds[a]=lp(Jp[a]),Ds[a].primary=Ds[a][5],qp[a]=lp(Jp[a],{theme:"dark",backgroundColor:"#141414"}),qp[a].primary=qp[a][5]});var U_=Ds.red,z_=Ds.volcano,W_=Ds.gold,V_=Ds.orange,j_=Ds.yellow,X_=Ds.lime,Y_=Ds.green,H_=Ds.cyan,Z_=Ds.blue,K_=Ds.geekblue,$_=Ds.purple,Q_=Ds.magenta,J_=Ds.grey,zo=function(e,t,r){var n=fv()(e),i=fv()(t);return fv()([(1-r)*n.red()+r*i.red(),(1-r)*n.green()+r*i.green(),(1-r)*n.blue()+r*i.blue()]).rgb()},R1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=zo(t,e,.05).rgb().toString(),i=zo(t,e,.1).rgb().toString(),o=zo(t,e,.2).rgb().toString(),s=zo(t,e,.4).rgb().toString(),u=zo(t,r,.02).rgb().toString(),f=zo(t,r,.05).rgb().toString(),c=zo(t,r,.1).rgb().toString(),h=zo(t,r,.2).rgb().toString(),A=zo(t,r,.3).rgb().toString(),P=lp(e,{theme:"default",backgroundColor:t}),B=fv()(e).hex().toLowerCase(),V=P.indexOf(B),$=e;return V!==-1&&($=P[V+1]),{mainStroke:e,mainFill:i,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:$,highlightFill:o,disableStroke:A,disableFill:f,edgeMainStroke:A,edgeActiveStroke:e,edgeInactiveStroke:h,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:A,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:A,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:$,comboHighlightFill:u,comboDisableStroke:h,comboDisableFill:f}},B1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=zo(t,e,.2).rgb().toString(),i=zo(t,e,.3).rgb().toString(),o=zo(t,e,.6).rgb().toString(),s=zo(t,e,.8).rgb().toString(),u=zo(t,r,.2).rgb().toString(),f=zo(t,r,.25).rgb().toString(),c=zo(t,r,.3).rgb().toString(),h=zo(t,r,.4).rgb().toString(),A=zo(t,r,.5).rgb().toString(),P=lp(e,{theme:"dark",backgroundColor:t}),B=fv()(e).hex().toLowerCase(),V=P.indexOf(B),$=e;return V!==-1&&($=P[V+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:i,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:A,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:h,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:$,comboHighlightFill:f,comboDisableStroke:h,comboDisableFill:u}},tg=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?R1(e,t,"rgb(150, 150, 150)"):B1(e,t,"#777")},G1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var i=[];return e.forEach(function(o){i.push(tg(o,t,r,n))}),i},F1="rgb(95, 149, 255)",U1="rgb(255, 255, 255)",s0="rgb(0, 0, 0)",Li=tg(F1,U1),ed={version:"0.8.7",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Li.mainStroke,fill:Li.mainFill},size:20,color:Li.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Li.activeFill,stroke:Li.activeStroke}},nodeStateStyles:{active:{fill:Li.activeFill,stroke:Li.activeStroke,lineWidth:2,shadowColor:Li.mainStroke,shadowBlur:10},selected:{fill:Li.selectedFill,stroke:Li.selectedStroke,lineWidth:4,shadowColor:Li.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Li.highlightFill,stroke:Li.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Li.inactiveFill,stroke:Li.inactiveStroke,lineWidth:1},disable:{fill:Li.disableFill,stroke:Li.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:s0,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Li.edgeMainStroke,lineAppendWidth:2},color:Li.edgeMainStroke},edgeStateStyles:{active:{stroke:Li.edgeActiveStroke,lineWidth:1},selected:{stroke:Li.edgeSelectedStroke,lineWidth:2,shadowColor:Li.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Li.edgeInactiveStroke,lineWidth:1},disable:{stroke:Li.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:s0,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Li.comboMainFill,lineWidth:1,stroke:Li.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Li.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Li.comboActiveStroke,lineWidth:1,fill:Li.comboActiveFill},selected:{stroke:Li.comboSelectedStroke,lineWidth:2,fill:Li.comboSelectedFill,shadowColor:Li.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.comboHighlightStroke,lineWidth:2,fill:Li.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Li.comboInactiveStroke,fill:Li.comboInactiveFill,lineWidth:1},disable:{stroke:Li.comboDisableStroke,fill:Li.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function hp(a,e,t){if(a){if(typeof a.addEventListener=="function")return a.addEventListener(e,t,!1),{remove:function(){a.removeEventListener(e,t,!1)}};if(typeof a.attachEvent=="function")return a.attachEvent("on"+e,t),{remove:function(){a.detachEvent("on"+e,t)}}}}var z1=In.cloneEvent,W1=In.isViewportChanged,V1=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,i=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,l.wrapBehavior)(this,"onCanvasEvents"),f=(0,l.wrapBehavior)(this,"onExtendEvents"),c=(0,l.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,i.push(hp(s,"wheel",c)),typeof window!="undefined"&&(i.push(hp(window,"keydown",f)),i.push(hp(window,"keyup",f)),i.push(hp(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,l.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,i=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),W1(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===i){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var h=e.getItemRoot(o);if(!h){n.emit(s,t);return}var A=h.get("item");if(!A.destroyed){var P=A.getType();if(t.target=o,t.item=A,t.canvasX===t.x&&t.canvasY===t.y){var B=n.getCanvasByPoint(t.x,t.y);t.canvasX=B.x,t.canvasY=B.y}t.name&&!t.name.includes(":")?(n.emit("".concat(P,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,P)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,l.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,i=n.graph,o=n.preItem,s=i.get("canvas"),u=t.target===s?null:t.item;t=z1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,i=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,l.each)(i,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(va),j1=V1,Pi=S(79472),X1=S(13389),dp=S.n(X1),u0=In.traverseTree,Y1=function(e,t){var r;return e?(0,l.isNumber)(e)?r=function(i){return e}:r=e:r=function(i){return t||1},r},H1=function(e,t){var r=[],n=[],i={},o=0;for(o=0;o<e.length;o++){var s=e[o];i[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[i[u.source]].push(i[u.target]),n[i[u.target]].push(i[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,h=n[o],A=h.length;r[o*4+2]=c,r[o*4+3]=h.length,f=Math.max(f,h.length);for(var P=0;P<A;++P){var B=h[P];r.push(+B)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},Z1=function(e,t,r){var n=[],i=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),i.push([])}for(s=0;s<t.length;s++){var f=t[s];i[o[f.source]].push(o[f.target]),i[o[f.source]].push(r(f)),i[o[f.target]].push(o[f.source]),i[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var h=n.length,A=i[s],P=A.length;n[s*4+2]=h,n[s*4+3]=P/2,c=Math.max(c,P/2);for(var B=0;B<P;++B){var V=A[B];n.push(+V)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},K1=function(e,t,r,n){var i=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,i.push(f.x),i.push(f.y),i.push(0),i.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var h=0;for(u=0;u<e.length;u++){var A=i.length,P=o[u],B=P.length;i[u*4+2]=A+1048576*B/4,i[u*4+3]=0,h=Math.max(h,B/4);for(var V=0;V<B;++V){var $=P[V];i.push(+$)}}for(;i.length%4!==0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:h}},$1=function(e,t){var r=[],n=e.length,i={};return t.forEach(function(o){e.forEach(function(s,u){if(i[o[s]]===void 0&&(i[o[s]]=Object.keys(i).length),r.push(i[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}},Q1=function(e){for(var t=[],r=e.length,n=e[0].length,i=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)i(o);return new Float32Array(t)},J1=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},i={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;u0(e,function(h){return u++,h.x>i.x&&(i.x=h.x),h.x<n.x&&(n.x=h.x),h.y>i.y&&(i.y=h.y),h.y<n.y&&(n.y=h.y),!0});var f=Math.PI*2/u,c=i[s]-n[s];return c===0||u0(e,function(h){var A=(h[s]-n[s])/c*(Math.PI*2-f)+f,P=Math.abs(o==="x"?h.x-e.x:h.y-e.y);return h.x=P*Math.cos(A),h.y=P*Math.sin(A),!0}),e},f0=function a(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",i=a().getWebGLErrorMessage();i.id=n,r.appendChild(i)}}},q1=(0,b.pi)((0,b.pi)((0,b.pi)((0,b.pi)({},In),I),_),C),kl=q1,tb=kl.radialLayout,eb=function(){function a(e){this.type=e.type,this.radial=e.radial,this.config=e}return a.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=dp()[t.type](r,t.config);return tb(n),n};return}this.layoutMethod=function(r){return dp()[t.type](r,t.config)}},a.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},a.prototype.layout=function(e){return this.init(e),this.execute()},a}(),rb=eb;(0,Pi.registerLayout)("grid",Pi.GridLayout),(0,Pi.registerLayout)("random",Pi.RandomLayout),(0,Pi.registerLayout)("force",Pi.ForceLayout),(0,Pi.registerLayout)("circular",Pi.CircularLayout),(0,Pi.registerLayout)("dagre",Pi.DagreLayout),(0,Pi.registerLayout)("dagreCompound",Pi.DagreCompoundLayout),(0,Pi.registerLayout)("radial",Pi.RadialLayout),(0,Pi.registerLayout)("concentric",Pi.ConcentricLayout),(0,Pi.registerLayout)("mds",Pi.MDSLayout),(0,Pi.registerLayout)("fruchterman",Pi.FruchtermanLayout),(0,Pi.registerLayout)("fruchterman-gpu",Pi.FruchtermanGPULayout),(0,Pi.registerLayout)("gForce",Pi.GForceLayout),(0,Pi.registerLayout)("force2",Pi.Force2Layout),(0,Pi.registerLayout)("gForce-gpu",Pi.GForceGPULayout),(0,Pi.registerLayout)("comboForce",Pi.ComboForceLayout),(0,Pi.registerLayout)("comboCombined",Pi.ComboCombinedLayout),(0,Pi.registerLayout)("forceAtlas2",Pi.ForceAtlas2Layout);var nb=function(e,t){t.isCustomLayout=!0,Pi.Layouts[e]=(0,Pi.registerLayout)(e,t)},ib=function(){function a(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return a}(),ab=ib,ob=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function i(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,h=c.nodes,A=c.edges,P=c.layoutCfg,B=P===void 0?{}:P,V=B.type,$=layout.getLayoutByName(V);if(!$){this.postMessage({type:n.ERROR,message:"layout ".concat(V," not found")});break}var ut;B.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:h}),ut==null||ut.destroy()},ut=new $(B),ut.init({nodes:h,edges:A}),ut.execute();break}case n.GPURUN:{var ct=s.data,ht=ct.nodes,A=ct.edges,xt=ct.layoutCfg,B=xt===void 0?{}:xt,Wt=ct.canvas,V=B.type,$=layout.getLayoutByName(V);if(!$){this.postMessage({type:n.ERROR,message:"layout ".concat(V," not found")});break}if(V.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(V," does not support GPU")});break}var Jt=new $(B);Jt.init({nodes:ht,edges:A}),Jt.executeWithWorker(Wt,this);break}default:break}}onmessage=function(u){i(u)&&o(u)}}var r=new ab(t,e);return r},Cd={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function eg(a){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(a)}var c0=function(e){return setTimeout(e,16)},l0=function(e){return clearTimeout(e)},vp={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||c0;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||l0;return t(e)}},sb=["fruchterman","gForce"],ub=["force","grid","circular"],fb=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=ob(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(vp.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(vp.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(i,o){return(0,b.mG)(n,void 0,void 0,function(){var s,u,f,c,h,V,A,P,B,V,$;return(0,b.Jh)(this,function(ut){switch(ut.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),i()},u&&this.isGPU&&(this.hasGPUVersion(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),In.isForce(u)?(f=t.onTick,c=t.animate,h=c===void 0&&(u==="force"||u==="force2"),V=function(){f&&f(),(c||h)&&s.refreshPositions()},t.tick=V):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),A=!1;try{P=new Pi.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=P}catch(ct){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return A=P.enableTick,A&&(B=t.onTick,V=function(){B&&B(),s.refreshPositions()},P.tick=V),$=this.filterLayoutData(this.data,t),db($,r),P.init($),s.emit("beforesublayout",{type:u}),[4,P.execute()];case 1:return ut.sent(),P.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(i,o){return(0,b.mG)(n,void 0,void 0,function(){var s,u,f;return(0,b.Jh)(this,function(c){switch(c.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),i()},f=this.filterLayoutData(this.data,r),t.init(f),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return c.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,i=this.graph;if(!(!i||i.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=i.get("width"),c=i.get("height"),h={};Object.assign(h,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=h;var A=h.type,P=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Wt){var Jt;return P=!!(!((Jt=Wt.nodes)===null||Jt===void 0)&&Jt.length)||P});var B=this.destoryLayoutMethods();i.emit("beforelayout"),P&&A&&(B==null?void 0:B.length)===1&&B[0]===A?this.tweakInit():this.initPositions(h.center,s),this.initPositions(h.center,u),A&&A.split("-")[1]==="gpu"&&(A=A.split("-")[0],h.gpuEnabled=!0);var V=!1;h.gpuEnabled&&(V=!0,f0().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),V=!1)),V&&!this.hasGPUVersion(A)&&(console.warn("The '".concat(A,"' layout does not support GPU calculation for now, it will run in CPU.")),V=!1),this.isGPU=V;var $=h.onLayoutEnd,ut=h.layoutEndFormatted,ct=h.adjust;if(ut||(h.layoutEndFormatted=!0,h.onAllLayoutEnd=function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(Wt){switch(Wt.label){case 0:return $&&$(s),this.refreshLayout(),ct&&h.pipes?[4,this.adjustPipesBox(this.data,ct)]:[3,2];case 1:Wt.sent(),this.refreshLayout(),Wt.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),h.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var ht=Promise.resolve(),xt=!1;return h.type?(xt=!0,ht=ht.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(Wt){switch(Wt.label){case 0:return[4,this.execLayoutMethod(h,0)];case 1:return[2,Wt.sent()]}})})})):h.pipes&&(xt=!0,h.pipes.forEach(function(Wt,Jt){ht=ht.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function($t){switch($t.label){case 0:return[4,this.execLayoutMethod(Wt,Jt)];case 1:return[2,$t.sent()]}})})})})),xt?ht.then(function(){h.onAllLayoutEnd&&h.onAllLayoutEnd(),t&&t()}).catch(function(Wt){console.warn("graph layout failed,",Wt)}):(i.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,i=r.nodes,o=r.edges;if(i!=null&&i.length){var s={};i.forEach(function(c){var h=c.x,A=c.y;!isNaN(h)&&!isNaN(A)&&(s[c.id]={x:h,y:A},c.mass=c.mass||2)}),o.forEach(function(c){var h=c.source,A=c.target,P=s[h],B=s[A];!P&&B?s[h]={x:B.x+(Math.random()-.5)*80,y:B.y+(Math.random()-.5)*80}:!B&&P&&(s[A]={x:P.x+(Math.random()-.5)*80,y:P.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");i.forEach(function(c){var h=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=h.x,c.y=h.y})}},e.prototype.initWithPreset=function(){var t=this,r=t.layoutCfg,n=t.data,i=r.preset;if(!(i!=null&&i.type)||!Pi.Layouts[i==null?void 0:i.type])return!1;var o=new Pi.Layouts[i==null?void 0:i.type](i);return o.layout(n),delete r.preset,!0},e.prototype.layoutWithWorker=function(t,r){var n=this,i=this,o=i.layoutCfg,s=i.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),h=!1;if(o.type)h=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){h=!0;for(var A=function(ut){c=c.then(function(){return n.runWebworker(u,t,ut)})},P=0,B=o.pipes;P<B.length;P++){var V=B[P];A(V)}}return h&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function($){console.error("layout failed",$)}),!0},e.prototype.runWebworker=function(t,r,n){var i=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),h=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,A=lb(n,function(B){return typeof B!="function"});if(!h)t.postMessage({type:Cd.RUN,nodes:u,edges:f,layoutCfg:A});else{var P=c.transferControlToOffscreen();A.type="".concat(A.type,"-gpu"),t.postMessage({type:Cd.GPURUN,nodes:u,edges:f,layoutCfg:A,canvas:P},[P])}return new Promise(function(B,V){t.onmessage=function($){i.handleWorkerMessage(B,V,$,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,i,o){var s=this,u=s.graph,f=s.workerData,c=n.data,h=c.type,A=function(){o.onTick&&o.onTick()};switch(h){case Cd.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=vp.requestAnimationFrame(function(){rg(i,c),u.refreshPositions(),A(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=vp.requestAnimationFrame(function(){rg(i,f.currentTickData),u.refreshPositions(),f.requestId2=null,A(),t()})),f.requestId=null}));break;case Cd.END:f.currentTick==null&&(rg(i,c),t());break;case Cd.GPUEND:f.currentTick==null&&(hb(i,c),t());break;case Cd.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,i=n.graph,o=n.layoutMethods;if(!(!i||i.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,b._T)(t,["disableTriggerLayout"]),f=(0,l.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){i.emit("beforelayout");var c=Promise.resolve(),h=!1;(o==null?void 0:o.length)===1?(h=!0,c=c.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(A){switch(A.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,A.sent()]}})})})):o!=null&&o.length&&(h=!0,o.forEach(function(A,P){var B=f.pipes[P];c=c.then(function(){return(0,b.mG)(r,void 0,void 0,function(){return(0,b.Jh)(this,function(V){switch(V.label){case 0:return[4,this.updateLayoutMethod(A,B)];case 1:return[2,V.sent()]}})})})})),h&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(A){console.warn("layout failed",A)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(i){var o=t.nodes;o!=null&&o.length||i(),ub.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),i());var s={center:n.layoutCfg.center,nodeSize:function(B){return Math.max(B.height,B.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,h=(0,l.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(P,B){var V,$,ut,ct=P.x-((V=h[B])===null||V===void 0?void 0:V.x),ht=P.y-(($=h[B])===null||$===void 0?void 0:$.y);(ut=f[B])===null||ut===void 0||ut.forEach(function(xt){xt.x+=ct,xt.y+=ht})}),i()};var A=new Pi.Layouts[r](s);A.layout({nodes:c})})},e.prototype.hasGPUVersion=function(t){return sb.includes(t)},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(ai),cb=fb;function rg(a,e){for(var t=a.nodes,r=e.nodes,n=t.length,i=0;i<n;i++){var o=t[i];o.x=r[i].x,o.y=r[i].y}}function lb(a,e){var t={};return a&&eg(a)==="object"?(Object.keys(a).forEach(function(r){a.hasOwnProperty(r)&&e(a[r])&&(t[r]=a[r])}),t):a}function hb(a,e){for(var t=a.nodes,r=e.vertexEdgeData,n=t.length,i=0;i<n;i++){var o=t[i],s=r[4*i],u=r[4*i+1];o.x=s,o.y=u}}function db(a,e){var t;if(!((t=a==null?void 0:a.nodes)===null||t===void 0)&&t.length){var r=a.nodes;r.forEach(function(n){n.layoutOrder=e})}}var cv,ng,h0,ig;function vb(){cv=document.createElement("table"),ng=document.createElement("tr"),h0=/^\s*<(\w+|!)[^>]*>/,ig={tr:document.createElement("tbody"),tbody:cv,thead:cv,tfoot:cv,td:ng,th:ng,"*":document.createElement("div")}}function Oa(a){cv||vb();var e=h0.test(a)&&RegExp.$1;(!e||!(e in ig))&&(e="*");var t=ig[e];a=typeof a=="string"?a.replace(/(^\s*)|(\s*$)/g,""):a,t.innerHTML=""+a;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var pb=function(e){var t=e.clone();return gb(e,t),t},gb=function a(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];a(s,f)}));var n=e.get("type"),i=t.get("type");if(!(n!=="image"||i!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},d0=re,yb="svg",mb=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new cb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new j1(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,i=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===yb)u=new uv({container:t,width:i,height:o});else{var f={container:t,width:i,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new Ll(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,l.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,i){return(0,b.mG)(this,void 0,void 0,function(){var o,s,u;return(0,b.Jh)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var h=r.createPattern(u,"repeat");r.rect(0,0,n,i),r.fillStyle=h,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,i,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),h=c.getRenderer(),A=s||c.get("el"),P="";t||(t="image/png"),setTimeout(function(){return(0,b.mG)(u,void 0,void 0,function(){var B,V,$,ut,ct,ht,xt,Wt,Jt,$t;return(0,b.Jh)(this,function(ve){switch(ve.label){case 0:return h!=="svg"?[3,1]:(B=A.cloneNode(!0),V=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),$=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",V),$.replaceChild(B,$.documentElement),ut=new XMLSerializer().serializeToString($),P="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ut)),[3,4]);case 1:return ct=void 0,ht=A.getContext("2d"),xt=i||this.get("width"),Wt=o||this.get("height"),Jt=void 0,f?[4,this.downloadImageWatermark(f,ht,xt,Wt)]:[3,3];case 2:ve.sent(),ve.label=3;case 3:if(r){$t=typeof window!="undefined"?window.devicePixelRatio:1;try{ct=ht.getImageData(0,0,xt*$t,Wt*$t),Jt=ht.globalCompositeOperation,ht.globalCompositeOperation="destination-over",ht.fillStyle=r,ht.fillRect(0,0,xt,Wt)}catch(Oe){console.error("Download image failed. Out of memory at ImageData creation")}}P=A.toDataURL(t),r&&(ht.clearRect(0,0,xt,Wt),ht.putImageData(ct,0,0),ht.globalCompositeOperation=Jt),ve.label=4;case 4:return n&&n(P),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),i=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(i==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var h=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(h))}else{var A=void 0,P=o.getContext("2d"),B=Math.max(this.get("width"),500),V=Math.max(this.get("height"),500),$=void 0;if(r){var ut=typeof window!="undefined"&&window.devicePixelRatio||1;try{A=P.getImageData(0,0,B*ut,V*ut),$=P.globalCompositeOperation,P.globalCompositeOperation="destination-over",P.fillStyle=r,P.fillRect(0,0,B,V)}catch(ct){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(P.clearRect(0,0,B,V),P.putImageData(A,0,0),P.globalCompositeOperation=$)}return s},e.prototype.toFullDataURL=function(t,r,n){var i=this.get("group").getCanvasBBox(),o=i.height,s=i.width,u=this.get("renderer"),f=Oa('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,h=n?n.padding:void 0;h?(0,l.isNumber)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var A=o+h[0]+h[2],P=s+h[1]+h[3],B={container:f,height:A,width:P,quickHit:!0},V=u==="svg"?new uv(B):new Ll(B),$=this.get("group"),ut=$.clone(),ct=(0,l.clone)(ut.getMatrix());ct||(ct=[1,0,0,0,1,0,0,0,1]);var ht=(i.maxX+i.minX)/2,xt=(i.maxY+i.minY)/2;ct=d0(ct,[["t",-ht,-xt],["t",s/2+h[3],o/2+h[0]]]),ut.resetMatrix(),ut.setMatrix(ct),V.add(ut);var Wt=V.get("el"),Jt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var $t=Wt.cloneNode(!0),ve=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Oe=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",ve);Oe.replaceChild($t,Oe.documentElement);var xe=new XMLSerializer().serializeToString(Oe);Jt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(xe))}else{var Ze=void 0,ar=Wt.getContext("2d"),Fr=void 0;if(c){var rn=typeof window!="undefined"?window.devicePixelRatio:1;try{Ze=ar.getImageData(0,0,P*rn,A*rn),Fr=ar.globalCompositeOperation,ar.globalCompositeOperation="destination-over",ar.fillStyle=c,ar.fillRect(0,0,P,A)}catch(Zr){console.error("Download image failed. Out of memory at ImageData creation")}}Jt=Wt.toDataURL(r),c&&(ar.clearRect(0,0,P,A),ar.putImageData(Ze,0,0),ar.globalCompositeOperation=Fr)}t&&t(Jt)},16)},e.prototype.downloadFullImage=function(t,r,n){var i=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=Oa('<div id="virtual-image"></div>'),h=document.querySelector(".g6-graph-watermarker"),A=n?n.backgroundColor:void 0,P=n?n.padding:void 0;P?(0,l.isNumber)(P)&&(P=[P,P,P,P]):P=[0,0,0,0];var B=s+P[0]+P[2],V=u+P[1]+P[3];if(h){var $=this.get("graphWaterMarker").cfg||{},ut=$.width,ct=$.height;B=Math.ceil(B/ct)*ct,V=Math.ceil(V/ut)*ut}var ht={container:c,height:B,width:V},xt=f==="svg"?new uv(ht):new Ll(ht),Wt=this.get("group"),Jt=pb(Wt),$t=(0,l.clone)(Jt.getMatrix());$t||($t=[1,0,0,0,1,0,0,0,1]);var ve=(o.maxX+o.minX)/2,Oe=(o.maxY+o.minY)/2;$t=d0($t,[["t",-ve,-Oe],["t",u/2+P[3],s/2+P[0]]]),Jt.resetMatrix(),Jt.setMatrix($t),xt.add(Jt);var xe=xt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,A,function(Ze){var ar=document.createElement("a"),Fr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));i.dataURLToImage(Ze,f,ar,Fr);var rn=document.createEvent("MouseEvents");rn.initEvent("click",!1,!1),ar.dispatchEvent(rn)},V,B,xe)},e.prototype.downloadImage=function(t,r,n){var i=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(h){i.dataURLToImage(h,u,c,f);var A=document.createEvent("MouseEvents");A.initEvent("click",!1,!1),c.dispatchEvent(A)})},e.prototype.dataURLToImage=function(t,r,n,i){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,h=new Uint8Array(c);c--;)h[c]=f.charCodeAt(c);var A=new Blob([h],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(A,i):n.addEventListener("click",function(){n.download=i,n.href=window.URL.createObjectURL(A)})}else n.addEventListener("click",function(){n.download=i,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=ed.waterMarkerImage);var n=this.get("container");(0,l.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var i=this.get("graphWaterMarker"),o=(0,l.deepMix)({},ed.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var h=f?n:document.querySelector(".g6-graph-watermarker");h&&(h.style.cssText=void 0),i&&i.clear();return}if(i)i.clear();else{var A={container:n,width:s,height:u,capture:!1},P=this.get("pixelRatio");P&&(A.pixelRatio=P,window.devicePixelRatio=P),i=new Ll(A),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var B=i.get("context"),V=c.rotate,$=c.x,ut=c.y;B.rotate(-V*Math.PI/180);var ct=new Image;ct.crossOrigin="anonymous",ct.src=t,ct.onload=function(){if(B.drawImage(ct,$,ut,c.width,c.height),B.rotate(V*Math.PI/180),f)n.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ht=document.querySelector(".g6-graph-watermarker");ht||(ht=document.createElement("div"),ht.className="g6-graph-watermarker"),ht.className="g6-graph-watermarker",i.destroyed||(ht.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(ht))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,l.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var i=this.get("graphWaterMarker"),o=(0,l.deepMix)({},ed.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var h=f?n:document.querySelector(".g6-graph-watermarker");h&&(h.style.cssText=void 0),i&&i.clear();return}if(i)i.clear();else{var A={container:n,width:s,height:u,capture:!1},P=this.get("pixelRatio");P&&(A.pixelRatio=P,window.devicePixelRatio=P),i=new Ll(A),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var B=i.get("context"),V=c.rotate,$=c.fill,ut=c.fontFamily,ct=c.fontSize,ht=c.baseline,xt=c.x,Wt=c.y,Jt=c.lineHeight;B.rotate(-V*Math.PI/180),B.font="".concat(ct,"px ").concat(ut),B.fillStyle=$,B.textBaseline=ht;for(var $t=(0,l.isString)(t)?[t]:t,ve=$t.length-1;ve>=0;ve--)B.fillText($t[ve],xt,Wt+ve*Jt);if(B.rotate(V*Math.PI/180),f)n.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var Oe=document.querySelector(".g6-graph-watermarker");Oe||(Oe=document.createElement("div"),Oe.className="g6-graph-watermarker"),Oe.style.cssText="background-image: url(".concat(i.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(Oe)}},e.prototype.destroy=function(){var t,r,n,i;(0,l.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(i=document.querySelector(".g6-graph-watermarker"))===null||i===void 0||i.remove(),a.prototype.destroy.call(this)},e}(ev),v0=mb,bb=kl.radialLayout,Eb=kl.traverseTree,xb=function(a){(0,b.ZT)(e,a);function e(t){var r=a.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=dp()[t.type](r,t);return bb(n),n}:function(r){return dp()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,l.each)(t,function(i,o){if(r===i.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=a.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var i=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=i.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),i.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,l.each)(t.children||[],function(h){i.innerAddChild(h,s,n)}),i.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var i=this,o=i.findById(t.id);if(!o){i.innerAddChild(t,r,n);return}(0,l.each)(t.children||[],function(B){i.innerUpdateChild(B,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(i.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var h,A;o.get("originAttrs")&&(h=o.get("originAttrs").x,A=o.get("originAttrs").y);var P=o.getModel();n&&o.set("originAttrs",{x:P.x,y:P.y}),o.set("model",Object.assign(P,t.data)),(h!==t.x||A!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var i=this,o=i.findById(t);if(o)if((0,l.each)(o.get("children"),function(u){i.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),i.get("removeList").push(o)}else i.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(i){return n.clearItemStates(i)}),this.getEdges().map(function(i){return n.clearItemStates(i)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r){r===void 0&&(r=!0);var n=this;if(!t){console.warn("layout cannot be null");return}r&&this.get("enabledStack")&&this.pushStack("layout",{before:n.get("layout"),after:t}),n.set("layout",t),n.set("layoutMethod",n.getLayout()),n.layout()},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=r.get("data"),i=r.get("layoutMethod"),o=i?i(n,r.get("layout")):n,s=r.get("animate");if(r.emit("beforerefreshlayout",{data:n,layoutData:o}),r.emit("beforelayout"),r.innerUpdateChild(o,void 0,s),t){var u=r.get("viewController");u.fitView()}s?r.layoutAnimate(o):(r.refresh(),r.paint()),r.emit("afterrefreshlayout",{data:n,layoutData:o}),r.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var i=this;i.emit("beforeaddchild",{model:t,parent:r}),(0,l.isString)(r)||(r=r.get("id"));var o=i.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=i.findById(r);s.refresh(),i.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var i=this,o=i.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=i.findDataById(r);s.children=t,o.refresh(),i.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var i=this;if(!r||!i.findById(r)){i.changeData(t,n);return}var o=i.findDataById(r),s=i.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=i.findById(r);f==null||f.refresh(),i.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,i=n.findById(t),o;if(i?o=i==null?void 0:i.get("parent"):o=n.getNodes().find(function(h){var A=h.getModel().children||[];return!!A.find(function(P){return P.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var i=null;return(0,l.each)(r.children||[],function(o){if(o.id===t)return i=o,!1;if(i=n.findDataById(t,o),i)return!1}),i},e.prototype.layoutAnimate=function(t,r){var n=this,i=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Eb(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var h=r(u,o,f,t);u.set("model",Object.assign(c,h))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,l.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:i.duration,easing:i.ease,callback:function(){(0,l.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,l.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),i.callback&&i.callback(),n.emit("afteranimate",{data:t})},delay:i.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,l.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){a.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(v0),wb=xb;function wi(a,e){if(a)for(var t in e)e.hasOwnProperty(t)&&(a.style[t]=e[t]);return a}var _b=function(){function a(e){this._cfgs=(0,l.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return a.prototype.getDefaultCfgs=function(){return{}},a.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,l.each)(r,function(i,o){var s=(0,l.wrapBehavior)(t,i);n[o]=s,e.on(o,s)}),this._events=n,this.init()},a.prototype.getEvents=function(){return{}},a.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},a.prototype.set=function(e,t){this._cfgs[e]=t},a.prototype.destroy=function(){},a.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,l.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},a}(),pu=_b,Sb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),p0="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Mb=function(a){Sb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:p0,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),i=this.get("img")||p0;i.includes("url(")||(i='url("'.concat(i,'")'));var o=Oa(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Oa(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(i,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),i=t.get("height");wi(this.get("container"),{width:"".concat(n,"px"),height:"".concat(i,"px")});var o=n*80/r,s=i*80/r;wi(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var i=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(i?n[6]:"0",", ").concat(i?n[7]:"0",")");wi(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(pu),Cb=Mb,Ab=S(20956),pp=S.n(Ab),Tb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&pp()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Ib=function(a){Tb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Oa("<div class=".concat(t||"g6-component-contextmenu","></div>"));wi(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,l.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var i=this.get("shouldBegin");if(i(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,l.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var h=function(ve){c(ve.target,t.item,u)};this.set("handleMenuClickWrapper",h),o.addEventListener("click",h)}var A=u.get("width"),P=u.get("height"),B=o.getBoundingClientRect(),V=this.get("offsetX")||0,$=this.get("offsetY")||0,ut=u.getContainer().offsetTop,ct=u.getContainer().offsetLeft,ht=t.canvasX+ct+V,xt=t.canvasY+ut+$;ht+B.width>A&&(ht=t.canvasX-B.width-V+ct),xt+B.height>P&&(xt=t.canvasY-B.height-$+ut),wi(o,{top:"".concat(xt,"px"),left:"".concat(ht,"px"),visibility:"visible"});var Wt=this.get("trigger")==="click",Jt=function(ve){if(Wt){Wt=!1;return}r.onMenuHide()};document.body.addEventListener("click",Jt),this.set("handler",Jt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&wi(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(pu),Pb=Ib,Ob=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ag=function(){return ag=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},ag.apply(this,arguments)},g0=Math.max,Db=re,Nb="default",Lb="keyShape",kb="delegate",y0="svg",Rb=function(a){Ob(e,a);function e(t){var r=a.call(this,t)||this;return r.handleUpdateCanvas=(0,l.debounce)(function(n){var i=r;i.destroyed||i.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,i=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=Oa(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),h=0,A=0,P=!1,B=0,V=0,$=0,ut=0,ct=0,ht=0,xt=f||u?"mousedown":"dragstart";c.addEventListener(xt,function(ve){var Oe,xe;if(ve.dataTransfer){var Ze=new Image;Ze.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(xe=(Oe=ve.dataTransfer).setDragImage)===null||xe===void 0||xe.call(Oe,Ze,0,0);try{ve.dataTransfer.setData("text/html","view-port-minimap")}catch(Fr){ve.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,ve.target===c){var ar=c.style;B=parseInt(ar.left,10),V=parseInt(ar.top,10),$=parseInt(ar.width,10),ut=parseInt(ar.height,10),!($>n[0]||ut>n[1])&&(ht=i.getZoom(),ct=t.get("ratio"),P=!0,h=ve.clientX,A=ve.clientY)}},!1);var Wt=function(Oe){if(!(!P||(0,l.isNil)(Oe.clientX)||(0,l.isNil)(Oe.clientY))){var xe=h-Oe.clientX,Ze=A-Oe.clientY;(B-xe<0||B-xe+$>=n[0])&&(xe=0),(V-Ze<0||V-Ze+ut>=n[1])&&(Ze=0),B-=xe,V-=Ze,wi(c,{left:"".concat(B,"px"),top:"".concat(V,"px")}),i.translate(xe*ht/ct,Ze*ht/ct),h=Oe.clientX,A=Oe.clientY}};!f&&!u&&c.addEventListener("drag",Wt,!1);var Jt=function(){P=!1,r.refresh=!0},$t=f||u?"mouseup":"dragend";c.addEventListener($t,Jt,!1),s.addEventListener("mouseleave",Jt),s.addEventListener("mouseup",Jt),(f||u)&&s.addEventListener("mousemove",Wt,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),i=this.get("graph"),o=this.get("size"),s=i.get("canvas").get("el"),u=i.get("width")||s.scrollWidth||500,f=i.get("height")||s.scrollHeight||500,c=i.getPointByCanvas(0,0),h=i.getPointByCanvas(u,f),A=this.get("viewport");A||this.initViewport();var P=(h.x-c.x)*t,B=(h.y-c.y)*t,V=c.x*t+r,$=c.y*t+n,ut=V+P,ct=$+B;V<0&&(P+=V,V=0),ut>o[0]&&(P=P-(ut-o[0])),$<0&&(B+=$,$=0),ct>o[1]&&(B=B-(ct-o[1])),this.set("ratio",t);var ht="".concat(V,"px"),xt="".concat($,"px");wi(A,{left:ht,top:xt,width:"".concat(P,"px"),height:"".concat(B,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var i;this.get("hideEdge")?(i=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||i.add(s.clone())})):(i=n.clone(),i.resetMatrix(),r.add(i));var o=t.get("renderer");o===y0&&this.updateVisible(i)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(i){i.get("visible")||i.hide(),r.updateVisible(i)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),i=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,l.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,i)}),(0,l.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,i)});var o=r.getCombos();if(o&&o.length){var s=i.find(function(u){return u.get("name")==="comboGroup"})||i.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,l.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},i=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};i?f=Object.assign(u,f):(i=s,r.add(i));var c=i.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),i.attr(f),t.isVisible()?i.show():i.hide(),i.exist=!0;var h=t.getModel().depth;isNaN(h)||i.set("zIndex",h),n[t.get("id")]=i,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},i=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};i?(f=Object.assign(u,f),i.toFront()):(i=s,r.add(i));var c=i.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),i.attr(f),t.isVisible()?i.show():i.hide(),i.exist=!0;var h=t.getModel().depth;isNaN(h)||i.set("zIndex",h),n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),i=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,l.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,i)}),(0,l.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,i)});var o=r.getCombos();if(o&&o.length){var s=i.find(function(u){return u.get("name")==="comboGroup"})||i.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,l.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var i=t[r[n]],o=i.exist;i.exist=!1,o||(i.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},i=n[t.get("id")];if(i){var o=t.get("keyShape").attr("path");i.attr("path",o)}else i=t.get("keyShape").clone(),r.add(i);t.isVisible()?i.show():i.hide(),i.exist=!0,n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),i=this.get("itemMap")||{},o=i[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:ag({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,i[t.get("id")]=o,this.set("itemMap",i)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),i=t.get("className"),o=t.get("container"),s=Oa("<div class='".concat(i,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,l.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=Oa('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(h){h.preventDefault()}),u.addEventListener("dragover",function(h){h.preventDefault()});var f,c=r.get("renderer");c===y0?f=new uv({container:u,width:n[0],height:n[1]}):f=new Ll({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),i=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!i.destroyed){switch(o){case Nb:this.updateGraphShapes();break;case Lb:this.updateKeyShapes();break;case kb:this.updateDelegateShapes();break;default:break}var u=i.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),h=r.getZoom()||1,A=c.width/h,P=c.height/h;Number.isFinite(f.width)&&(A=g0(f.width,A),P=g0(f.height,P)),A+=2*s,P+=2*s;var B=Math.min(n[0]/A,n[1]/P),V=[1,0,0,0,1,0,0,0,1],$=0,ut=0;Number.isFinite(f.minX)&&($=-f.minX),Number.isFinite(f.minY)&&(ut=-f.minY);var ct=(n[0]-(A-2*s)*B)/2,ht=(n[1]-(P-2*s)*B)/2;V=Db(V,[["t",$,ut],["s",B,B],["t",ct,ht]]),u.setMatrix(V),this.set("ratio",B),this.set("totaldx",ct+$*B),this.set("totaldy",ht+ut*B),this.set("dx",ct),this.set("dy",ht),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(pu),Bb=Rb,Gb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Fc(a,e,t){var r=a.x-e.x,n=a.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Fb(a,e){return a.x*e.x+a.y*e.y}function m0(a,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(a.y-e.source.y)+a.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Ub=function(a){Gb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],i=t.nodes||[],o={},s=!1;if(i.forEach(function(xt){(xt.x===null||!xt.y===null||xt.x===void 0||!xt.y===void 0)&&(s=!0),o[xt.id]=xt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var h=r.getEdgeBundles();r.set("edgeBundles",h);for(var A=r.get("cycles"),P=r.get("iterations"),B=r.get("iterRate"),V=r.get("lambda"),$=0;$<A;$++){for(var ut=function(Wt){var Jt=[];n.forEach(function($t,ve){if($t.source!==$t.target){var Oe=o[$t.source],xe=o[$t.target];Jt[ve]=r.getEdgeForces({source:Oe,target:xe},ve,u,V);for(var Ze=0;Ze<u+1;Ze++)c[ve][Ze].x+=Jt[ve][Ze].x,c[ve][Ze].y+=Jt[ve][Ze].y}})},ct=0;ct<P;ct++)ut(ct);V=V/2,u*=f,P*=B,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(xt,Wt){xt.source!==xt.target&&(xt.type="polyline",xt.controlPoints=c[Wt].slice(1,c[Wt].length-1))});var ht=r.get("graph");ht.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var i=this.get("graph");r.set("tick",function(){t.onTick(),i.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,i=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=i[s.source],h=i[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+h.x),y:.5*(c.y+h.y)}),o[u].push({x:h.x,y:h.y});else{var A=0;!((f=o[u])===null||f===void 0)&&f.length?A=r.getEdgeLength(o[u]):A=Fc({x:c.x,y:c.y},{x:h.x,y:h.y});var P=A/(t+1),B=P,V=[{x:c.x,y:c.y}];o[u].forEach(function($,ut){if(ut!==0){for(var ct=Fc($,o[u][ut-1]);ct>B;){var ht=B/ct,xt={x:o[u][ut-1].x,y:o[u][ut-1].y};xt.x+=ht*($.x-o[u][ut-1].x),xt.y+=ht*($.y-o[u][ut-1].y),V.push(xt),ct-=B,B=P}B-=ct}}),V.push({x:h.x,y:h.y}),o[u]=V}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,i){i!==0&&(r+=Fc(n,t[i-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],i=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],h=o[u.target];n.forEach(function(A,P){if(!(P<=f)){var B=o[A.source],V=o[A.target],$=t.getBundleScore({source:c,target:h},{source:B,target:V});$>=i&&(s[f].push(P),s[P].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Fc({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Fc({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var i=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return i*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Fb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,i=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return i},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,i={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Fc(i,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),i=this.getEdgeVisibility(r,t);return n<i?n:i},e.prototype.getEdgeVisibility=function(t,r){var n=m0(r.source,t),i=m0(r.target,t),o={x:(n.x+i.x)/2,y:(n.y+i.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Fc(o,s)/Fc(n,i))},e.prototype.getEdgeForces=function(t,r,n,i){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Fc(t.source,t.target)*(n+1)),c=[{x:0,y:0}],h=1;h<n;h++){var A={x:0,y:0},P=o.getSpringForce({pre:s[r][h-1],cur:s[r][h],next:s[r][h+1]},f),B=o.getElectrostaticForce(h,r);A.x=i*(P.x+B.x),A.y=i*(P.y+B.y),c.push(A)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,i=t.pre.y+t.next.y-2*t.cur.y;return n*=r,i*=r,{x:n,y:i}},e.prototype.getElectrostaticForce=function(t,r){var n=this,i=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var h={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(h.x)>i||Math.abs(h.y)>i){var A=Fc(s[c][t],s[r][t]),P=1/A;f.x+=h.x*P,f.y+=h.y*P}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),a.prototype.destroy.call(this)},e}(pu),zb=Ub,Wb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),og=function(){return og=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},og.apply(this,arguments)},gp=.05,b0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Vb=function(a){Wb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,l.clone)(b0),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,i=n.get("delegate");(!i||i.destroyed)&&(n.magnify(t),i=n.get("delegate"),i.on("dragstart",function(o){n.set("delegateCenterDiff",{x:i.attr("x")-o.x,y:i.attr("y")-o.y})}),i.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&i.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),i,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?i=1-gp:i=1/(1-gp);var f=r.get("maxR"),c=r.get("minR"),h=r.get("r");(h>(f||n.get("height"))&&i>1||h<(c||n.get("height")*.05)&&i<1)&&(i=1),h*=i,r.set("r",h),r.set("r2",h*h);var A=r.get("d");r.set("molecularParam",(A+1)*h),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),i=r.get("graph"),o,s=i.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-gp:o=1/(1-gp);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||i.get("height"))&&o>1||c<(f||i.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var h=r.get("d");r.set("molecularParam",(h+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var i=r.get("d"),o=i+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),h=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,h)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),i=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+i,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var i=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),h=n.get("d"),A=n.get("molecularParam"),P=i.getNodes(),B=P.length,V=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(V=n.get("cacheCenter"));var $=n.get("delegateCenterDiff");$&&(V.x+=$.x,V.y+=$.y),n.updateDelegate(V,f);for(var ut=0;ut<B;ut++){var ct=P[ut].getModel(),ht=ct.x,xt=ct.y;if(!(isNaN(ht)||isNaN(xt))){var Wt=(ht-V.x)*(ht-V.x)+(xt-V.y)*(xt-V.y);if(!isNaN(Wt)&&Wt<c&&Wt!==0){var Jt=Math.sqrt(Wt),$t=A*Jt/(h*Jt+f),ve=(ht-V.x)/Jt,Oe=(xt-V.y)/Jt;if(ct.x=ve*$t+V.x,ct.y=Oe*$t+V.y,s[ct.id]||(s[ct.id]={x:ht,y:xt,texts:[]}),o.push(ct),u&&2*Jt<f)for(var xe=P[ut],Ze=xe.getContainer(),ar=Ze.getChildren(),Fr=ar.length,rn=0;rn<Fr;rn++){var Zr=ar[rn];Zr.get("type")==="text"&&(s[ct.id].texts.push({visible:Zr.get("visible"),shape:Zr}),Zr.set("visible",!0))}}}}i.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),i=r.length,o=0;o<i;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,h=0;h<c;h++){var A=f.texts[h];A.shape.set("visible",A.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,i=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,h=t.scaleDBy,A=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(i)||r.set("d",i),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var P=r.get("d"),B=r.get("r");if(r.set("molecularParam",(P+1)*B),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),h==="drag"||h==="wheel"||h==="unset"){r.set("scaleDBy",h),r.get("delegate").remove(),r.get("delegate").destroy();var V=r.get("dPercentText");V&&(V.remove(),V.destroy())}if(A==="drag"||A==="wheel"||A==="unset"){r.set("scaleRBy",A),r.get("delegate").remove(),r.get("delegate").destroy();var V=r.get("dPercentText");V&&(V.remove(),V.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,i=this,o=i.get("graph"),s=i.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=i.get("delegateStyle")||b0;s=u.addShape("circle",{attrs:og({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(B){i.scaleRByWheel(B)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(B){i.set("dragging",!0),i.set("cacheCenter",{x:B.x,y:B.y}),i.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){i.scaleRByDrag(B)}),s.on("dragend",function(B){i.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(B){n.scaleDByWheel(B)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(B){i.set("dragging",!0),i.set("cacheCenter",{x:B.x,y:B.y}),i.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){n.scaleDByDrag(B)}),s.on("dragend",function(B){i.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(i.get("showDPercent")){var c=Math.round((i.get("d")-i.get("minD"))/(i.get("maxD")-i.get("minD"))*100),h=i.get("dPercentText"),A=t.y+r/1.5+16;if(!h||h.destroyed){var P=o.get("group");h=P.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:A,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),i.set("dPercentText",h)}else h.attr({text:"".concat(c,"%"),x:t.x,y:A})}i.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(pu),jb=Vb,Xb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),E0=.05;typeof document!="undefined"&&pp()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Yb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Hb=function(a){Xb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),i=n(r),o=i;(0,l.isString)(i)&&(o=Oa(i));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,l.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(h){var A=Yb(h).filter(function(B){return B.nodeName==="LI"});if(A.length!==0){var P=A[0].getAttribute("code");P&&(f?f(P,r):t.handleDefaultOperator(P))}});var c=this.get("position");c&&wi(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),i=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!i||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),i.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,h=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),h===0?(i.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(i.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var i=n.action;t.pushStack(i,(0,l.clone)(n.data),"redo");var o=n.data.before;if(i==="add"&&(o=n.data.after),!o)return;switch(i){case"visible":{Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){var B=t.findById(P.id);P.visible?t.showItem(B,!1):t.hideItem(B,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){var B=t.findById(P.id);delete P.id,t.updateItem(B,P,!1),B.getType()==="combo"&&t.updateCombo(B)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){var B=P.itemType;delete P.itemType,t.addItem(B,P,!1)})});break}case"add":Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){t.removeItem(P.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){t.updateComboTree(P.id,P.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(h){var A=o[h];A&&A.forEach(function(P){t.updateComboTree(P.id,P.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(h){return h.id}).filter(function(h){return h!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var i=n.action,o=n.data.after;if(t.pushStack(i,(0,l.clone)(n.data)),i==="delete"&&(o=n.data.before),!o)return;switch(i){case"visible":{Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){var P=t.findById(A.id);A.visible?t.showItem(P,!1):t.hideItem(P,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){var P=t.findById(A.id);delete A.id,t.updateItem(P,A,!1),P.getType()==="combo"&&t.updateCombo(P)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){var P=A.itemType;delete A.itemType,t.addItem(P,A,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var h=o[c];h&&h.forEach(function(A){t.updateComboTree(A.id,A.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-E0*this.get("zoomSensitivity")),i=this.get("maxZoom")||t.get("maxZoom");n*r>i||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-E0*this.get("zoomSensitivity"),i=this.get("minZoom")||t.get("minZoom");n*r<i||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(pu),Zb=Hb,Kb=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&pp()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var $b=function(a){Kb(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=Oa("<div class='".concat(r,"'></div>")),i=t.get("container");i||(i=t.get("graph").get("container")),(0,l.isString)(i)&&(i=document.getElementById(i)),wi(n,{position:"absolute",visibility:"hidden",display:"none"}),i.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){wi(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,i=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),i.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,i=this.get("graph");this.currentTarget=n,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),i=this.get("getContent"),o=i(t);(0,l.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&wi(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){wi(n,{visibility:"hidden",display:"none"});return}var i=this.get("graph"),o=i.get("width"),s=i.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=i.getPointByClient(t.clientX,t.clientY),h=this.get("fixToNode"),A=t.item;if(A.getType&&A.getType()==="node"&&h&&(0,l.isArray)(h)&&h.length>=2){var P=A.getBBox();c={x:P.minX+P.width*h[0],y:P.minY+P.height*h[1]}}var B=i.getCanvasByPoint(c.x,c.y),V=B.x,$=B.y,ut=i.getContainer(),ct={x:V+ut.offsetLeft+u,y:$+ut.offsetTop+f};wi(n,{visibility:"visible",display:"unset"});var ht=n.getBoundingClientRect();V+ht.width+u>o&&(ct.x-=ht.width+u),$+ht.height+f>s&&(ct.y-=ht.height+f),wi(n,{left:"".concat(ct.x,"px"),top:"".concat(ct.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(pu),Qb=$b,x0={};function Jb(a){return x0[a]}function Uc(a,e){x0[a]=e}var qb=function(){function a(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return a.prototype.translate=function(e){return e},a.prototype.change=function(e){(0,l.assign)(this.__cfg__,e),this.init()},a.prototype.clone=function(){return this.constructor(this.__cfg__)},a.prototype.getTicks=function(){var e=this;return(0,l.map)(this.ticks,function(t,r){return(0,l.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},a.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,l.isNil)(n)||!(0,l.isFunction)(n.toString)?"":n.toString()},a.prototype.getConfig=function(e){return this.__cfg__[e]},a.prototype.init=function(){(0,l.assign)(this,this.__cfg__),this.setDomain(),(0,l.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},a.prototype.initCfg=function(){},a.prototype.setDomain=function(){},a.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,l.isString)(e)){var r=Jb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,l.isFunction)(e)&&(t=e(this));return t},a.prototype.rangeMin=function(){return this.range[0]},a.prototype.rangeMax=function(){return this.range[1]},a.prototype.calcPercent=function(e,t,r){return(0,l.isNumber)(e)?(e-t)/(r-t):NaN},a.prototype.calcValue=function(e,t,r){return t+e*(r-t)},a}(),sg=qb,tE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,l.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),i=Math.round(r*n)+this.min;return i<this.min||i>this.max?NaN:this.values[i]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=t;return(0,l.isNumber)(t)&&!this.values.includes(t)&&(i=this.values[i]),a.prototype.getText.apply(this,(0,U.__spreadArrays)([i],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,l.isNil)(this.getConfig("min"))&&(this.min=0),(0,l.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(sg),lv=tE,w0=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Ch="\\d\\d?",Ah="\\d\\d",eE="\\d{3}",rE="\\d{4}",hv="[^\\s]+",_0=/\[([^]*?)\]/gm;function S0(a,e){for(var t=[],r=0,n=a.length;r<n;r++)t.push(a[r].substr(0,e));return t}var M0=function(a){return function(e,t){var r=t[a].map(function(i){return i.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Th(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var i=n[r];for(var o in i)a[o]=i[o]}return a}var C0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A0=["January","February","March","April","May","June","July","August","September","October","November","December"],nE=S0(A0,3),iE=S0(C0,3),ug={dayNamesShort:iE,dayNames:C0,monthNamesShort:nE,monthNames:A0,amPm:["am","pm"],DoFn:function(a){return a+["th","st","nd","rd"][a%10>3?0:(a-a%10!==10?1:0)*a%10]}},yp=Th({},ug),T0=function(a){return yp=Th(yp,a)},I0=function(a){return a.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},gu=function(a,e){for(e===void 0&&(e=2),a=String(a);a.length<e;)a="0"+a;return a},aE={D:function(a){return String(a.getDate())},DD:function(a){return gu(a.getDate())},Do:function(a,e){return e.DoFn(a.getDate())},d:function(a){return String(a.getDay())},dd:function(a){return gu(a.getDay())},ddd:function(a,e){return e.dayNamesShort[a.getDay()]},dddd:function(a,e){return e.dayNames[a.getDay()]},M:function(a){return String(a.getMonth()+1)},MM:function(a){return gu(a.getMonth()+1)},MMM:function(a,e){return e.monthNamesShort[a.getMonth()]},MMMM:function(a,e){return e.monthNames[a.getMonth()]},YY:function(a){return gu(String(a.getFullYear()),4).substr(2)},YYYY:function(a){return gu(a.getFullYear(),4)},h:function(a){return String(a.getHours()%12||12)},hh:function(a){return gu(a.getHours()%12||12)},H:function(a){return String(a.getHours())},HH:function(a){return gu(a.getHours())},m:function(a){return String(a.getMinutes())},mm:function(a){return gu(a.getMinutes())},s:function(a){return String(a.getSeconds())},ss:function(a){return gu(a.getSeconds())},S:function(a){return String(Math.round(a.getMilliseconds()/100))},SS:function(a){return gu(Math.round(a.getMilliseconds()/10),2)},SSS:function(a){return gu(a.getMilliseconds(),3)},a:function(a,e){return a.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(a,e){return a.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(a){var e=a.getTimezoneOffset();return(e>0?"-":"+")+gu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(a){var e=a.getTimezoneOffset();return(e>0?"-":"+")+gu(Math.floor(Math.abs(e)/60),2)+":"+gu(Math.abs(e)%60,2)}},P0=function(a){return+a-1},O0=[null,Ch],D0=[null,hv],N0=["isPm",hv,function(a,e){var t=a.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],L0=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(a){var e=(a+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],oE={D:["day",Ch],DD:["day",Ah],Do:["day",Ch+hv,function(a){return parseInt(a,10)}],M:["month",Ch,P0],MM:["month",Ah,P0],YY:["year",Ah,function(a){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+a>68?t-1:t)+a)}],h:["hour",Ch,void 0,"isPm"],hh:["hour",Ah,void 0,"isPm"],H:["hour",Ch],HH:["hour",Ah],m:["minute",Ch],mm:["minute",Ah],s:["second",Ch],ss:["second",Ah],YYYY:["year",rE],S:["millisecond","\\d",function(a){return+a*100}],SS:["millisecond",Ah,function(a){return+a*10}],SSS:["millisecond",eE],d:O0,dd:O0,ddd:D0,dddd:D0,MMM:["month",hv,M0("monthNamesShort")],MMMM:["month",hv,M0("monthNames")],a:N0,A:N0,ZZ:L0,Z:L0},mp={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},k0=function(a){return Th(mp,a)},R0=function(a,e,t){if(e===void 0&&(e=mp.default),t===void 0&&(t={}),typeof a=="number"&&(a=new Date(a)),Object.prototype.toString.call(a)!=="[object Date]"||isNaN(a.getTime()))throw new Error("Invalid Date pass to format");e=mp[e]||e;var r=[];e=e.replace(_0,function(i,o){return r.push(o),"@@@"});var n=Th(Th({},yp),t);return e=e.replace(w0,function(i){return aE[i](a,n)}),e.replace(/@@@/g,function(){return r.shift()})};function B0(a,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=mp[e]||e,a.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],s=e.replace(_0,function(xt,Wt){return o.push(I0(Wt)),"@@@"}),u={},f={};s=I0(s).replace(w0,function(xt){var Wt=oE[xt],Jt=Wt[0],$t=Wt[1],ve=Wt[3];if(u[Jt])throw new Error("Invalid format. "+Jt+" specified twice in format");return u[Jt]=!0,ve&&(f[ve]=!0),i.push(Wt),"("+$t+")"}),Object.keys(f).forEach(function(xt){if(!u[xt])throw new Error("Invalid format. "+xt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=a.match(new RegExp(s,"i"));if(!c)return null;for(var h=Th(Th({},yp),t),A=1;A<c.length;A++){var P=i[A-1],B=P[0],V=P[2],$=V?V(c[A],h):+c[A];if($==null)return null;n[B]=$}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var ut;if(n.timezoneOffset==null){ut=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var ct=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],A=0,ht=ct.length;A<ht;A++)if(u[ct[A][0]]&&n[ct[A][0]]!==ut[ct[A][1]]())return null}else if(ut=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return ut}var sE={format:R0,parse:B0,defaultI18n:ug,setGlobalDateI18n:T0,setGlobalDateMasks:k0},G0=sE;function uE(a){return function(e,t,r,n){for(var i=(0,l.isNil)(r)?0:r,o=(0,l.isNil)(n)?e.length:n;i<o;){var s=i+o>>>1;a(e[s])>t?o=s:i=s+1}return i}}var F0="format";function U0(a,e){var t=O[F0]||G0[F0];return t(a,e)}function bp(a){return(0,l.isString)(a)&&(a.indexOf("T")>0?a=new Date(a).getTime():a=new Date(a.replace(/-/gi,"/")).getTime()),(0,l.isDate)(a)&&(a=a.getTime()),a}var rc=1e3,rd=60*rc,nd=60*rd,Rl=24*nd,dv=Rl*31,z0=Rl*365,vv=[["HH:mm:ss",rc],["HH:mm:ss",rc*10],["HH:mm:ss",rc*30],["HH:mm",rd],["HH:mm",rd*10],["HH:mm",rd*30],["HH",nd],["HH",nd*6],["HH",nd*12],["YYYY-MM-DD",Rl],["YYYY-MM-DD",Rl*4],["YYYY-WW",Rl*7],["YYYY-MM",dv],["YYYY-MM",dv*4],["YYYY-MM",dv*6],["YYYY",Rl*380]];function fE(a,e,t){var r=(e-a)/t,n=uE(function(o){return o[1]})(vv,r)-1,i=vv[n];return n<0?i=vv[0]:n>=vv.length&&(i=(0,l.last)(vv)),i}var cE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=bp(t);var r=this.values.indexOf(t);return r===-1&&((0,l.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var i=this.values[n],o=this.formatter;return i=o?o(i,r):U0(i,this.mask),i}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,l.each)(t,function(r,n){t[n]=bp(r)}),t.sort(function(r,n){return r-n}),a.prototype.setDomain.call(this)},e}(lv),lE=cE,hE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,l.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),i=this.max,o=this.min;if(i===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){a.prototype.init.call(this);var t=this.ticks,r=(0,l.head)(t),n=(0,l.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,l.isNil)(this.minLimit)||(this.min=r),(0,l.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,l.getRange)(this.values),r=t.min,n=t.max;(0,l.isNil)(this.min)&&(this.min=r),(0,l.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=a.prototype.calculateTicks.call(this);return this.nice||(r=(0,l.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(sg),Ep=hE,dE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Ep),pv=dE;function Ih(a,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/a):r=Math.pow(t,Math.log(-e)/a)*-1,r}function gf(a,e){return a===1?1:Math.log(e)/Math.log(a)}function W0(a,e,t){(0,l.isNil)(t)&&(t=Math.max.apply(null,a));var r=t;return(0,l.each)(a,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function V0(a){var e=a.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function q_(a,e){var t=V0(a),r=V0(e),n=Math.pow(10,Math.max(t,r));return(a*n+e*n)/n}var vE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=gf(r,this.max),i=this.rangeMin(),o=this.rangeMax()-i,s,u=this.positiveMin;if(u){if(t===0)return 0;s=gf(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=gf(r,this.min);var c=(t-i)/o,h=c*(n-s)+s;return Math.pow(r,h)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){a.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=W0(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var i=this.base,o=this.positiveMin;o&&(n=o*1/i);var s;return t<o?s=t/o/(gf(i,r)-gf(i,n)):s=(gf(i,t)-gf(i,n))/(gf(i,r)-gf(i,n)),s},e}(Ep),pE=vE,gE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,i=Ih(n,this.max),o=Ih(n,this.min),s=r*(i-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var i=this.exponent,o=(Ih(i,t)-Ih(i,n))/(Ih(i,r)-Ih(i,n));return o},e}(Ep),yE=gE,mE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),i=this.formatter;return i?i(n,r):U0(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,l.isString)(r)||(0,l.isDate)(r))&&(r=this.translate(r)),a.prototype.scale.call(this,r)},e.prototype.translate=function(t){return bp(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,l.isNil)(r)||!(0,l.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,l.isNil)(n)||!(0,l.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var i=[],o=1/0,s=o,u=0;(0,l.each)(t,function(f){var c=bp(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),i.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,l.isNil)(r)&&(this.min=o),(0,l.isNil)(n)&&(this.max=u)}},e}(pv),bE=mE,EE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,i=this.getInvertPercent(t),o=Math.floor(i*(n-1));if(o>=n-1)return(0,l.last)(r);if(o<0)return(0,l.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(i-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=a.prototype.calculateTicks.call(this);return this.nice||((0,l.last)(t)!==this.max&&t.push(this.max),(0,l.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,l.head)(r))return 0;if(t>(0,l.last)(r))return 1;var n=0;return(0,l.each)(r,function(i,o){if(t>=i)n=o;else return!1}),n/(r.length-1)},e}(Ep),j0=EE,xE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(j0),wE=xE,X0={};function _E(a){return X0[a]}function zc(a,e){if(_E(a))throw new Error("type '"+a+"' existed.");X0[a]=e}var SE=function(a){(0,U.__extends)(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,l.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(sg),ME=SE;function Y0(a){var e=a.values,t=a.tickInterval,r=a.tickCount,n=a.showLast;if((0,l.isNumber)(t)){var i=(0,l.filter)(e,function(B,V){return V%t===0}),o=(0,l.last)(e);return n&&(0,l.last)(i)!==o&&i.push(o),i}var s=e.length,u=a.min,f=a.max;if((0,l.isNil)(u)&&(u=0),(0,l.isNil)(f)&&(f=e.length-1),!(0,l.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),h=[],A=u,P=0;P<r&&!(A>=f);P++)A=Math.min(u+P*c,f),P===r-1&&n?h.push(e[f]):h.push(e[A]);return h}function CE(a){var e=a.min,t=a.max,r=a.nice,n=a.tickCount,i=new AE;return i.domain([e,t]),r&&i.nice(n),i.ticks(n)}var fg=5,H0=Math.sqrt(50),Z0=Math.sqrt(10),K0=Math.sqrt(2),AE=function(){function a(){this._domain=[0,1]}return a.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},a.prototype.nice=function(e){var t,r;e===void 0&&(e=fg);var n=this._domain.slice(),i=0,o=this._domain.length-1,s=this._domain[i],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,i],i=r[0],o=r[1]),f=xp(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=xp(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=xp(s,u,e)),f>0?(n[i]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[i]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},a.prototype.ticks=function(e){return e===void 0&&(e=fg),TE(this._domain[0],this._domain[this._domain.length-1],e||fg)},a}();function TE(a,e,t){var r,n=-1,i,o,s;if(e=+e,a=+a,t=+t,a===e&&t>0)return[a];if((r=e<a)&&(i=a,a=e,e=i),(s=xp(a,e,t))===0||!isFinite(s))return[];if(s>0)for(a=Math.ceil(a/s),e=Math.floor(e/s),o=new Array(i=Math.ceil(e-a+1));++n<i;)o[n]=(a+n)*s;else for(a=Math.floor(a*s),e=Math.ceil(e*s),o=new Array(i=Math.ceil(a-e+1));++n<i;)o[n]=(a-n)/s;return r&&o.reverse(),o}function xp(a,e,t){var r=(e-a)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,n);return n>=0?(i>=H0?10:i>=Z0?5:i>=K0?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(i>=H0?10:i>=Z0?5:i>=K0?2:1)}function $0(a,e,t){var r;return t==="ceil"?r=Math.ceil(a/e):t==="floor"?r=Math.floor(a/e):r=Math.round(a/e),r*e}function cg(a,e,t){var r=$0(a,t,"floor"),n=$0(e,t,"ceil");r=(0,l.fixedBase)(r,t),n=(0,l.fixedBase)(n,t);for(var i=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,l.fixedBase)(s,o);i.push(u)}return{min:r,max:n,ticks:i}}function lg(a,e,t){var r,n=a.minLimit,i=a.maxLimit,o=a.min,s=a.max,u=a.tickCount,f=u===void 0?5:u,c=(0,l.isNil)(n)?(0,l.isNil)(e)?o:e:n,h=(0,l.isNil)(i)?(0,l.isNil)(t)?s:t:i;if(c>h&&(r=[c,h],h=r[0],c=r[1]),f<=2)return[c,h];for(var A=(h-c)/(f-1),P=[],B=0;B<f;B++)P.push(c+A*B);return P}function IE(a){var e=a.min,t=a.max,r=a.tickInterval,n=a.minLimit,i=a.maxLimit,o=CE(a);return!(0,l.isNil)(n)||!(0,l.isNil)(i)?lg(a,(0,l.head)(o),(0,l.last)(o)):r?cg(e,t,r).ticks:o}function id(a){return Math.abs(a)<1e-15?a:parseFloat(a.toFixed(15))}var PE=[1,5,2,2.5,4,3],tS=null,Q0=Number.EPSILON*100;function OE(a,e){return(a%e+e)%e}function DE(a){return Math.round(a*1e12)/1e12}function NE(a,e,t,r,n,i){var o=(0,l.size)(e),s=(0,l.indexOf)(e,a),u=0,f=OE(r,i);return(f<Q0||i-f<Q0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function LE(a,e,t){var r=(0,l.size)(e),n=(0,l.indexOf)(e,a),i=1;return 1-n/(r-1)-t+i}function kE(a,e,t,r,n,i){var o=(a-1)/(i-n),s=(e-1)/(Math.max(i,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function RE(a,e){return a>=e?2-(a-1)/(e-1):1}function BE(a,e,t,r){var n=e-a;return 1-.5*(Math.pow(e-r,2)+Math.pow(a-t,2))/Math.pow(.1*n,2)}function GE(a,e,t){var r=e-a;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function FE(){return 1}function UE(a,e,t,r,n,i){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=PE),i===void 0&&(i=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(a)||Number.isNaN(e)||typeof a!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-a<1e-15||o===1)return{min:a,max:e,ticks:[a]};if(e-a>1e148){var s=t||5,u=(e-a)/s;return{min:a,max:e,ticks:Array(s).fill(null).map(function(on,sn){return id(a+u*sn)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var h=0;h<n.length;h+=1){var A=n[h],P=LE(A,n,c);if(i[0]*P+i[1]+i[2]+i[3]<f.score){c=1/0;break}for(var B=2;B<1/0;){var V=RE(B,o);if(i[0]*P+i[1]+i[2]*V+i[3]<f.score)break;for(var $=(e-a)/(B+1)/c/A,ut=Math.ceil(Math.log10($));ut<1/0;){var ct=c*A*Math.pow(10,ut),ht=GE(a,e,ct*(B-1));if(i[0]*P+i[1]*ht+i[2]*V+i[3]<f.score)break;var xt=Math.floor(e/ct)*c-(B-1)*c,Wt=Math.ceil(a/ct)*c;if(xt<=Wt)for(var s=Wt-xt,Jt=0;Jt<=s;Jt+=1){var $t=xt+Jt,ve=$t*(ct/c),Oe=ve+ct*(B-1),xe=ct,Ze=NE(A,n,c,ve,Oe,xe),ar=BE(a,e,ve,Oe),Fr=kE(B,o,a,e,ve,Oe),rn=FE(),Zr=i[0]*Ze+i[1]*ar+i[2]*Fr+i[3]*rn;Zr>f.score&&(!r||ve<=a&&Oe>=e)&&(f.lmin=ve,f.lmax=Oe,f.lstep=xe,f.score=Zr)}ut+=1}B+=1}}c+=1}var Nr=id(f.lmax),yn=id(f.lmin),dn=id(f.lstep),Lr=Math.floor(DE((Nr-yn)/dn))+1,Yr=new Array(Lr);Yr[0]=id(yn);for(var h=1;h<Lr;h++)Yr[h]=id(Yr[h-1]+dn);return{min:Math.min(a,(0,l.head)(Yr)),max:Math.max(e,(0,l.last)(Yr)),ticks:Yr}}function zE(a){var e=a.min,t=a.max,r=a.tickCount,n=a.nice,i=a.tickInterval,o=a.minLimit,s=a.maxLimit,u=UE(e,t,r,n).ticks;return!(0,l.isNil)(o)||!(0,l.isNil)(s)?lg(a,(0,l.head)(u),(0,l.last)(u)):i?cg(e,t,i).ticks:u}function WE(a){var e=a.base,t=a.tickCount,r=a.min,n=a.max,i=a.values,o,s=gf(e,n);if(r>0)o=Math.floor(gf(e,r));else{var u=W0(i,e,n);o=Math.floor(gf(e,u))}for(var f=s-o,c=Math.ceil(f/t),h=[],A=o;A<s+c;A=A+c)h.push(Math.pow(e,A));return r<=0&&h.unshift(0),h}function J0(a,e,t){if(t===void 0&&(t=5),a===e)return{max:e,min:a,ticks:[a]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:a,ticks:[]};var n=1.5,i=.5+1.5*n,o=e-a,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<i*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),h=Math.floor(a/f),A=Math.max(c*f,e),P=Math.min(h*f,a),B=Math.floor((A-P)/f)+1,V=new Array(B),$=0;$<B;$++)V[$]=id(P+$*f);return{min:P,max:A,ticks:V}}function VE(a){var e=a.exponent,t=a.tickCount,r=Math.ceil(Ih(e,a.max)),n=Math.floor(Ih(e,a.min)),i=J0(n,r,t).ticks;return i.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function jE(a,e){var t=a.length*e;return e===1?a[a.length-1]:e===0?a[0]:t%1!==0?a[Math.ceil(t)-1]:a.length%2===0?(a[t-1]+a[t])/2:a[t]}function XE(a){var e=a.tickCount,t=a.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],i=0;i<e;i++){var o=i/(e-1);n.push(jE(r,o))}return n}function YE(a){var e=a.min,t=a.max,r=a.tickCount,n=a.tickInterval,i=a.minLimit,o=a.maxLimit,s=J0(e,t,r).ticks;return!(0,l.isNil)(i)||!(0,l.isNil)(o)?lg(a,(0,l.head)(s),(0,l.last)(s)):n?cg(e,t,n).ticks:s}function HE(a){var e=a.min,t=a.max,r=a.minTickInterval,n=a.tickInterval,i=a.tickCount;if(n)i=Math.ceil((t-e)/n);else{n=fE(e,t,i)[1];var o=(t-e)/n,s=o/i;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function ZE(a){var e=Y0((0,U.__assign)({showLast:!0},a));return e}function wp(a){return new Date(a).getFullYear()}function KE(a){return new Date(a,0,1).getTime()}function hg(a){return new Date(a).getMonth()}function $E(a,e){var t=wp(a),r=wp(e),n=hg(a),i=hg(e);return(r-t)*12+(i-n)%12}function QE(a,e){return new Date(a,e,1).getTime()}function JE(a,e){return Math.ceil((e-a)/Rl)}function qE(a,e){return Math.ceil((e-a)/nd)}function tx(a,e){return Math.ceil((e-a)/(60*1e3))}function ex(a){var e=a.min,t=a.max,r=a.minTickInterval,n=a.tickCount,i=a.tickInterval,o=[];i||(i=(t-e)/n,r&&i<r&&(i=r)),i=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),i);var s=wp(e);if(i>z0)for(var u=wp(t),f=Math.ceil(i/z0),c=s;c<=u+f;c=c+f)o.push(KE(c));else if(i>dv)for(var h=Math.ceil(i/dv),A=hg(e),P=$E(e,t),c=0;c<=P+h;c=c+h)o.push(QE(s,c+A));else if(i>Rl)for(var B=new Date(e),V=B.getFullYear(),$=B.getMonth(),ut=B.getDate(),ct=Math.ceil(i/Rl),ht=JE(e,t),c=0;c<ht+ct;c=c+ct)o.push(new Date(V,$,ut+c).getTime());else if(i>nd)for(var B=new Date(e),V=B.getFullYear(),$=B.getMonth(),ct=B.getDate(),xt=B.getHours(),Wt=Math.ceil(i/nd),Jt=qE(e,t),c=0;c<=Jt+Wt;c=c+Wt)o.push(new Date(V,$,ct,xt+c).getTime());else if(i>rd)for(var $t=tx(e,t),ve=Math.ceil(i/rd),c=0;c<=$t+ve;c=c+ve)o.push(e+c*rd);else{var Oe=i;Oe<rc&&(Oe=rc);for(var xe=Math.floor(e/rc)*rc,Ze=Math.ceil((t-e)/rc),ar=Math.ceil(Oe/rc),c=0;c<Ze+ar;c=c+ar)o.push(xe+c*rc)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+i+") is too small, increase the value to solve the problem!"),o}Uc("cat",Y0),Uc("time-cat",ZE),Uc("wilkinson-extended",zE),Uc("r-pretty",YE),Uc("time",HE),Uc("time-pretty",ex),Uc("log",WE),Uc("pow",VE),Uc("quantile",XE),Uc("d3-linear",IE),zc("cat",lv),zc("category",lv),zc("identity",ME),zc("linear",pv),zc("log",pE),zc("pow",yE),zc("time",bE),zc("timeCat",lE),zc("quantize",j0),zc("quantile",wE);var rx=function(a,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return a.concat(i||Array.prototype.slice.call(e))};function nx(a){return(0,l.map)(a,function(e,t){var r=t===0?"M":"L",n=e[0],i=e[1];return[r,n,i]})}function q0(a){return nx(a)}function ix(a){if(a.length<=2)return q0(a);var e=[];(0,l.each)(a,function(o){(0,l.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=ha(e,!1),r=(0,l.head)(a),n=r[0],i=r[1];return t.unshift(["M",n,i]),t}function ax(a,e,t,r){r===void 0&&(r=!0);var n=new pv({values:a}),i=new lv({values:(0,l.map)(a,function(s,u){return u})}),o=(0,l.map)(a,function(s,u){return[i.scale(u)*e,t-n.scale(s)*t]});return r?ix(o):q0(o)}function ox(a,e,t,r){r===void 0&&(r=5);for(var n=new pv({values:a}),i=new lv({values:(0,l.map)(a,function(A,P){return P})}),o=(0,l.map)(a,function(A,P){return[i.scale(P)*e,t-n.scale(A)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},h=fx(c);s.push.apply(s,h)}return cx(s)}function sx(a,e){var t=new pv({values:a}),r=Math.max(0,t.min);return e-t.scale(r)*e}function ux(a,e,t,r){var n=rx([],a,!0),i=sx(r,t);return n.push(["L",e,i]),n.push(["L",0,i]),n.push(["Z"]),n}function fx(a){var e=a.x,t=a.y,r=a.y0,n=a.size,i,o;(0,l.isArray)(t)?(i=t[0],o=t[1]):(i=r,o=t);var s,u;(0,l.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:i},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:i}),f}function cx(a,e){e===void 0&&(e=!0);var t=[],r=a[0];t.push(["M",r.x,r.y]);for(var n=1,i=a.length;n<i;n++)t.push(["L",a[n].x,a[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var gv=function(){return gv=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},gv.apply(this,arguments)},lx={stroke:"#C5C5C5",strokeOpacity:.85},hx={fill:"#CACED4",opacity:.85},dx=function(){function a(e){var t=e.x,r=t===void 0?0:t,n=e.y,i=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,h=c===void 0?!0:c,A=e.isArea,P=A===void 0?!1:A,B=e.data,V=B===void 0?[]:B,$=e.lineStyle,ut=e.areaStyle,ct=e.group,ht=e.interval,xt=ht===void 0?null:ht;this.group=ct,this.x=r,this.y=i,this.width=s,this.height=f,this.data=V,this.smooth=h,this.isArea=P,this.lineStyle=Object.assign({},lx,$),this.areaStyle=Object.assign({},hx,ut),this.intervalConfig=xt,this.renderLine()}return a.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,i=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,h=e.areaStyle,A=this.group.addGroup({name:"trend-group"});if(s){var P=ax(s,n,i,u);if(A.addShape("path",{attrs:gv({path:P},c),name:"trend-line"}),f){var B=ux(P,n,i,s);A.addShape("path",{attrs:gv({path:B},h),name:"trend-area"})}}this.intervalConfig&&A.addShape("path",{attrs:gv({path:ox(this.intervalConfig.data,n,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),A.move(t,r)},a.prototype.destory=function(){this.group.destroy()},a}(),vx=dx,Ad=function(){return Ad=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Ad.apply(this,arguments)},px={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},gx={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},yx=function(){function a(e){var t=e.group,r=e.name,n=e.type,i=e.x,o=i===void 0?0:i,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,h=e.height,A=h===void 0?24:h,P=e.style,B=P===void 0?{}:P;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=A,n==="trend"?this.style=Ad(Ad({},px),B):n==="simple"&&(this.style=Ad(Ad({},gx),B)),this.renderHandle()}return a.prototype.setX=function(e){this.setXY(e,void 0)},a.prototype.setY=function(e){this.setXY(void 0,e)},a.prototype.setXY=function(e,t){(0,l.isNumber)(e)&&(this.x=e),(0,l.isNumber)(t)&&(this.y=t),this.updateXY()},a.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,i=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(i,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(i,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(i,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(i,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},a.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},a.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},a.prototype.show=function(){this.handleGroup.show()},a.prototype.hide=function(){this.handleGroup.hide()},a.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},a}(),ty=yx,ey="timebarstartplay",ry="timebarendplay",Wc="valuechange",ad="timebarConfigChanged",Ph="playPauseBtn",yv="nextStepBtn",mv="preStepBtn",dg=function(){return dg=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},dg.apply(this,arguments)},mx=function(){function a(e){this.config=(0,l.deepMix)({},e),this.init()}return a.prototype.update=function(e){this.config=(0,l.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},a.prototype.init=function(){this.initElement(),this.renderMarker()},a.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,i=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,h=this.config.y+f,A=t.addGroup({name:Ph});this.startMarkerGroup=A.addGroup({name:Ph}),this.circle=t.addShape("circle",{attrs:dg({x:c,y:h,r:this.config.r*i},r),name:Ph}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,h,i),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=A.addGroup({name:Ph});var P=.25*this.config.r*i,B=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*i,y:h-B/2,width:P,height:B,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*i,y:h-B/2,width:P,height:B,fill:r.stroke||"#aaa",lineWidth:0}})},a.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,i=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+i,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,h=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-h/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",h),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-h/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",h)},a.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},a.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},a}(),bx=mx,po=function(){return po=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},po.apply(this,arguments)},bv=re,Ex="#aaa",xx="green",wx={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},_x={fill:"#fff"},Sx={fill:"green"},ny={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},iy={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Mx={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:ny,timeTypeControllerStyle:iy},vg=110,Oh=50,Vc={SINGLE:"single",RANGE:"range"},Cx=function(){function a(e){this.controllerCfg=(0,l.deepMix)({},Mx,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Vc.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return a.prototype.init=function(){this.renderPlayButton()},a.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},a.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},a.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,i=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?Ex:s,f=e.stroke,c=f===void 0?xx:f,h=e.containerStyle,A=h===void 0?{}:h,P=po(po({},wx),e.playBtnStyle||{}),B=po(po({},_x),e.preBtnStyle||{}),V=po(po({},Sx),e.nextBtnStyle||{}),$=r/2-5,ut=i+10,ct=this.controllerGroup.addShape("rect",{attrs:po({x:n,y:ut,width:t,height:r,stroke:c,fill:u},A),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:ut,r:$}):this.playButton=new bx({group:this.controllerGroup,x:t/2,y:ut+$+5,r:$,isPlay:this.isPlay,style:P});var ht=B.offsetX||0,xt=B.offsetY||0,Wt=(B.scale||1)*$;this.controllerGroup.addShape("path",{attrs:po({path:this.getPreMarkerPath(t/2-5*$+ht,ut+$+5+xt,Wt*.5)},B),name:mv});var Jt=V.offsetX||0,$t=V.offsetY||0,ve=(V.scale||1)*$;this.controllerGroup.addShape("path",{attrs:po({path:this.getNextMarkerPath(t/2+5*$+Jt,ut+$+5+$t,ve*.5)},V),name:yv}),ct.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var Oe=this.controllerCfg.scale,xe=Oe===void 0?1:Oe,Ze=this.controllerGroup.getCanvasBBox(),ar=(Ze.maxX+Ze.minX)/2,Fr=(Ze.maxY+Ze.minY)/2,rn=bv([1,0,0,0,1,0,0,0,1],[["t",-ar,-Fr],["s",xe,xe],["t",ar,Fr]]);this.controllerGroup.setMatrix(rn)},a.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,i=po(po({},ny),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,s=o===void 0?{}:o,u=i.text,f=u===void 0?{}:u,c=i.pointer,h=c===void 0?{}:c,A=i.scale,P=A===void 0?1:A,B=i.offsetX,V=B===void 0?0:B,$=i.offsetY,ut=$===void 0?0:$,ct=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=ct;var ht=[],xt=5;this.speedAxisY=[19,22,26,32,39];for(var Wt=0;Wt<5;Wt++){var Jt=t+this.speedAxisY[Wt],$t=r-(n?Oh:vg);ct.addShape("line",{attrs:po({x1:$t,x2:$t+15,y1:Jt,y2:Jt},s),speed:xt,name:"speed-rect"}),this.speedAxisY[Wt]=Jt,ht.push(xt),xt=xt-1}this.speedText=ct.addShape("text",{attrs:po({x:r-(n?Oh:vg)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=ct.addShape("path",{attrs:po({path:this.getPointerPath(r-(n?Oh:vg),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},h),name:"speed-pointer"});var ve=this.speedGroup.getCanvasBBox(),Oe=(ve.maxX+ve.minX)/2,xe=(ve.maxY+ve.minY)/2,Ze=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ze=bv(Ze,[["t",-Oe,-xe],["s",P,P],["t",Oe+V*P,xe+ut*P]]),this.speedGroup.setMatrix(Ze)},a.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},a.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,i=r.defaultTimeType,o=po(po({},iy),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,h=o.offsetY,A=h===void 0?0:h,P=o.box,B=P===void 0?{}:P,V=o.check,$=V===void 0?{}:V,ut=o.text,ct=ut===void 0?{}:ut;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var ht=i===Vc.SINGLE;this.toggleGroup.addShape("rect",{attrs:po({x:n-Oh,y:this.speedAxisY[0]+3.5},B),isChecked:ht,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:po({path:[["M",n-Oh+3,this.speedAxisY[1]+6],["L",n-Oh+7,this.speedAxisY[1]+10],["L",n-Oh+12,this.speedAxisY[1]+4]]},$),capture:!1,name:"check-icon"}),ht||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:po({text:ht?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Oh+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ct),name:"checked-text"});var xt=this.toggleGroup.getCanvasBBox(),Wt=(xt.maxX+xt.minX)/2,Jt=(xt.maxY+xt.minY)/2,$t=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];$t=bv($t,[["t",-Wt,-Jt],["s",u,u],["t",Wt+c*u,Jt+A*u]]),this.toggleGroup.setMatrix($t)},a.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),i=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[i];n=bv(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(ad,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],i=e.speedAxisY.indexOf(n);if(i===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,i=f)})}t.originalEvent.deltaY>0?i=Math.max(0,i-1):i=Math.min(e.speedAxisY.length-1,i+1);var s=e.speedAxisY[i]-n;r=bv(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-i,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(ad,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,i=t.target.get("isChecked");i?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Vc.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Vc.SINGLE),t.target.set("isChecked",!i),e.group.emit(ad,{type:e.currentType,speed:e.currentSpeed})})},a.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},a}(),ay=Cx,Ma=function(){return Ma=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Ma.apply(this,arguments)},Ax=re,Tx={fill:"#416180",opacity:.05},Ix={fill:"#416180",opacity:.15,radius:5},Px={fill:"#5B8FF9",opacity:.3,cursor:"grab"},pg=2,Ox={width:pg,height:24},Dx={textBaseline:"middle",fill:"#000",opacity:.45},Nx={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Lx={lineWidth:1,stroke:"#ccc"},kx=function(){function a(e){var t=this;this.prevX=0,this.onMouseDown=function(on){return function(sn){t.currentHandler=on;var Sn=sn.originalEvent;Sn.stopPropagation(),Sn.preventDefault(),t.prevX=(0,l.get)(Sn,"touches.0.pageX",Sn.pageX);var Ln=t.canvas.get("container");Ln.addEventListener("mousemove",t.onMouseMove),Ln.addEventListener("mouseup",t.onMouseUp),Ln.addEventListener("mouseleave",t.onMouseUp),Ln.addEventListener("touchmove",t.onMouseMove),Ln.addEventListener("touchend",t.onMouseUp),Ln.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(on){on.stopPropagation(),on.preventDefault();var sn=(0,l.get)(on,"touches.0.pageX",on.pageX),Sn=sn-t.prevX,Ln=t.adjustOffsetRange(Sn/t.width);t.updateStartEnd(Ln),t.updateUI(),t.prevX=sn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var on=t.canvas.get("container");on&&(on.removeEventListener("mousemove",t.onMouseMove),on.removeEventListener("mouseup",t.onMouseUp),on.removeEventListener("mouseleave",t.onMouseUp),on.removeEventListener("touchmove",t.onMouseMove),on.removeEventListener("touchend",t.onMouseUp),on.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,h=c===void 0?10:c,A=e.trendCfg,P=e.controllerCfg,B=P===void 0?{speed:1}:P,V=e.backgroundStyle,$=V===void 0?{}:V,ut=e.foregroundStyle,ct=ut===void 0?{}:ut,ht=e.handlerStyle,xt=ht===void 0?{}:ht,Wt=e.textStyle,Jt=Wt===void 0?{}:Wt,$t=e.start,ve=$t===void 0?0:$t,Oe=e.end,xe=Oe===void 0?1:Oe,Ze=e.minText,ar=Ze===void 0?"":Ze,Fr=e.maxText,rn=Fr===void 0?"":Fr,Zr=e.group,Nr=e.graph,yn=e.canvas,dn=e.tick,Lr=dn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(sn){return sn},ticks:[]}:dn,Yr=e.type;this.graph=Nr,this.canvas=yn,this.group=Zr,this.timeBarType=Yr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=h,this.ticks=Lr.ticks,this.trendCfg=A,this.controllerCfg=B,this.currentSpeed=B.speed||1,this.tickLabelFormatter=Lr.tickLabelFormatter,Yr==="trend"?this.backgroundStyle=Ma(Ma({},Tx),$):Yr==="simple"&&(this.backgroundStyle=Ma(Ma({},Ix),$)),this.foregroundStyle=Ma(Ma({},Px),ct),this.handlerStyle=Ma(Ma({},Ox),xt),this.textStyle=Ma(Ma({},Dx),Jt),this.tickLabelStyle=Ma(Ma({},Nx),Lr.tickLabelStyle),this.tickLineStyle=Ma(Ma({},Lx),Lr.tickLineStyle),this.currentMode=B.defaultTimeType||Vc.RANGE,this.start=ve,this.end=xe,this.minText=ar,this.maxText=rn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return a.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,i=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,l.assign)(this,{x:t,y:r,width:n,height:i,minText:o,maxText:s}),this.updateUI()},a.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},a.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,i=t.timeBarType;if(i==="trend"&&(0,l.size)((0,l.get)(this.trendCfg,"data"))){var o=new vx(Ma(Ma({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Ma({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();i==="trend"?(this.minTextShape=u.addShape("text",{attrs:Ma({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Ma({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Ma({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Ma({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Ma({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(ut){ut.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(ut){ut.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,l.get)(this.handlerStyle,"width",2),c=(0,l.get)(this.handlerStyle,"height",24),h=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new ty({name:"minHandlerShape",group:h,type:i,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var A=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new ty({name:"maxHandlerShape",group:A,type:i,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var P=this.ticks,B=r/(P.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ut){ut.destroy()});var V=-1/0,$=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=P.map(function(ut,ct){e.tickPosList.push(e.x+ct*B);var ht;e.tickLabelFormatter?(ht=e.tickLabelFormatter(ut),!(0,l.isString)(ht)&&ht&&(ht=ut.date)):ht=ut.date;var xt=e.x+ct*B,Wt=e.y+n+5,Jt=e.group.addShape("text",{attrs:Ma({x:xt,y:Wt,text:ht,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,l.isNumber)($)&&ct!==P.length-1){var $t=Ax([1,0,0,0,1,0,0,0,1],[["t",-xt,-Wt],["r",$],["t",xt-5,Wt+2]]);Jt.attr({textAlign:"left",matrix:$t})}ct===0?Jt.attr({textAlign:"left"}):ct!==P.length-1&&Jt.attr({textAlign:"right"});var ve=e.group.addShape("line",{attrs:Ma({x1:e.x+ct*B,y1:e.y+n+2,x2:e.x+ct*B,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});ve.toBack();var Oe=Jt.getBBox();return Oe.minX>V?(Jt.show(),ve.show(),V=Oe.minX+Oe.width+10):(Jt.hide(),ve.hide()),Jt}),this.controllerBtnGroup=new ay(Ma({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Vc.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},a.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Ph,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(yv,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(mv,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(ad,function(n){var i=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=i,i===Vc.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):i===Vc.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},a.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},a.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},a.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},a.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,l.get)(this.handlerStyle,"width",pg);this.setText(this.minText,this.maxText);var i=this.dodgeText([t,r]),o=i[0],s=i[1];this.minHandlerShape.setX(t-n/2),(0,l.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,l.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Vc.RANGE?this.graph.emit(Wc,{value:[this.start,this.end].sort()}):this.currentMode===Vc.SINGLE&&this.graph.emit(Wc,{value:[this.end,this.end]})},a.prototype.dodgeText=function(e){var t,r,n=2,i=(0,l.get)(this.handlerStyle,"width",pg),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var h=o.getBBox(),A=s.getBBox(),P=null,B=null;return this.timeBarType==="trend"?(P=u-h.width<this.x+n?{x:u+i/2+n,textAlign:"left"}:{x:u-i/2-n,textAlign:"right"},B=f+A.width>this.x+this.width?{x:f-i/2-n,textAlign:"right"}:{x:f+i/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(P=o.attr("x")>h.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},B=s.attr("x")>this.width-A.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[B,P]:[P,B]},a.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,i=e.currentSpeed,o=n/r.length,s=o/((10-i)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},a.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(ey,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(ry,null))},a.prototype.destory=function(){this.graph.off(Wc,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Ph,":click")),e.off("".concat(yv,":click")),e.off("".concat(mv,":click")),e.off(ad),e.destroy(),this.trendComponent&&this.trendComponent.destory()},a}(),Rx=kx,eS={opacity:.5,fill:"#000"},rS={opacity:.5,fill:"#000",r:5},nS={fill:"#fff",fontSize:12},Bx=function(){function a(e){var t=e.x,r=t===void 0?0:t,n=e.y,i=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,h=c===void 0?"g6-component-timebar-tooltip":c,A=e.backgroundColor,P=A===void 0?"#000":A,B=e.textColor,V=B===void 0?"#fff":B,$=e.opacity,ut=$===void 0?.8:$,ct=e.fontSize,ht=ct===void 0?12:ct;this.container=o,this.className=h,this.backgroundColor=P,this.textColor=V,this.x=r,this.y=i,this.text=s,this.padding=f,this.opacity=ut,this.fontSize=ht,this.render()}return a.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,i=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,h=e.container,A=Oa("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,l.isString)(h)&&(h=document.getElementById(h)),h.appendChild(A),e.parentHeight=h.offsetHeight,e.parentWidth=h.offsetWidth,wi(A,{visibility:"hidden",top:0,left:0});var P=Oa(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(i,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));P.innerHTML=s,A.appendChild(P),e.backgroundDOM=P;var B=Oa("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(i,"'></div>"));A.appendChild(B),e.arrowDOM=B,e.container=A},a.prototype.show=function(e){var t=this,r=e.text,n=e.x,i=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,h=t.arrowDOM.offsetHeight;wi(t.container,{top:"".concat(-f-h,"px"),left:"".concat(n,"px"),visibility:"visible"}),wi(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),wi(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var A=n-u/2,P=n+u/2;A<0?wi(t.backgroundDOM,{marginLeft:"".concat(-u/2-A,"px")}):P>t.parentWidth&&wi(t.backgroundDOM,{marginLeft:"".concat(-u/2-P+t.parentWidth+12,"px")})},a.prototype.hide=function(){wi(this.container,{top:0,left:0,visibility:"hidden"})},a}(),Gx=Bx,Ev=function(){return Ev=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Ev.apply(this,arguments)},Fx=re,Ux={fill:"#5B8FF9"},zx={fill:"#e6e8e9"},Wx=function(){function a(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,i=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,h=e.x,A=h===void 0?0:h,P=e.y,B=P===void 0?0:P,V=e.tickLabelFormatter,$=e.selectedTickStyle,ut=$===void 0?Ux:$,ct=e.unselectedTickStyle,ht=ct===void 0?zx:ct,xt=e.tooltipBackgroundColor,Wt=e.tooltipFomatter,Jt=e.tickLabelStyle,$t=e.controllerCfg,ve=$t===void 0?{speed:1}:$t;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=i,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=V,this.tickLabelStyle=Jt||{},this.selectedTickStyle=ut,this.unselectedTickStyle=ht,this.controllerCfg=ve,this.currentSpeed=ve.speed||1,this.x=A,this.y=B,this.tooltipBackgroundColor=xt,this.tooltipFomatter=Wt,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return a.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,i=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,h=t.unselectedTickStyle,A=t.tickLabelStyle,P=r-2*i,B=10,V=4,$=3*i+V+B,ut=n-$-2*i,ct=2,ht=o.length,xt=(P-ct*(ht-1))/ht;this.tickWidth=xt;var Wt=this.sliceGroup,Jt=[],$t=[],ve=Math.round(ht*s),Oe=Math.round(ht*u);this.startTickRectId=ve,this.endTickRectId=Oe;var xe=A.rotate;delete A.rotate,o.forEach(function(ar,Fr){var rn=Fr>=ve&&Fr<=Oe,Zr=rn?c:h,Nr=Wt.addShape("rect",{attrs:Ev({x:i+Fr*(xt+ct),y:i,width:xt,height:ut},Zr),draggable:!0,name:"tick-rect-".concat(Fr)}),yn=Wt.addShape("rect",{attrs:{x:i+Fr*xt+ct*(2*Fr-1)/2,y:i,width:Fr===0||Fr===ht-1?xt+ct/2:xt+ct,height:ut,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Fr)});yn.toFront();var dn=Nr.getBBox(),Lr=(dn.minX+dn.maxX)/2;Jt.push({rect:Nr,pickRect:yn,value:ar.date,x:Lr,y:dn.minY});var Yr;if(f?(Yr=f(ar),!(0,l.isString)(Yr)&&Yr&&(Yr=ar.date)):Fr%Math.round(ht/10)===0&&(Yr=ar.date),Yr){$t.push(Yr);var on=dn.maxY+i*2;Wt.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Lr,y1:on,x2:Lr,y2:on+V},name:"tick-line"});var sn=on+V+i,Sn=Wt.addShape("text",{attrs:Ev({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Lr,y:sn,textAlign:"center",text:Yr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},A),capture:!1,name:"tick-label"}),Ln=Sn.getBBox();if(Ln.maxX>r?Sn.attr("textAlign","right"):Ln.minX<0&&Sn.attr("textAlign","left"),(0,l.isNumber)(xe)&&$t.length!==10){var ti=Fx([1,0,0,0,1,0,0,0,1],[["t",-Lr,-sn],["r",xe],["t",Lr-5,sn+2]]);Sn.attr({textAlign:"left",matrix:ti})}$t.length===1?Sn.attr({textAlign:"left"}):$t.length===10&&Sn.attr({textAlign:"right"})}}),this.tickRects=Jt;var Ze=this.group;this.currentSpeed=1,this.controllerBtnGroup=new ay(Ev({group:Ze,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},a.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var h=c.target;if(!(h.get("type")!=="rect"||!h.get("name"))){var A=parseInt(h.get("name").split("-")[2],10);if(!isNaN(A)){var P=e.tickRects,B=e.unselectedTickStyle;P.forEach(function(ct){ct.rect.attr(B)});var V=e.selectedTickStyle;P[A].rect.attr(V),e.startTickRectId=A,e.endTickRectId=A;var $=P.length,ut=A/$;e.graph.emit(Wc,{value:[ut,ut]})}}}),t.on("dragstart",function(c){var h=e.tickRects,A=e.unselectedTickStyle;h.forEach(function(ct){ct.rect.attr(A)});var P=c.target,B=parseInt(P.get("name").split("-")[2],10),V=e.selectedTickStyle;h[B].rect.attr(V),e.startTickRectId=B;var $=h.length,ut=B/$;e.graph.emit(Wc,{value:[ut,ut]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var h=parseInt(c.target.get("name").split("-")[2],10),A=e.startTickRectId,P=e.tickRects,B=e.selectedTickStyle,V=e.unselectedTickStyle,$=0;$<P.length;$++){var ut=$>=A&&$<=h?B:V;P[$].rect.attr(ut)}var ct=P.length;e.endTickRectId=h;var ht=A/ct,xt=h/ct;e.graph.emit(Wc,{value:[ht,xt]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var h=e.startTickRectId,A=parseInt(c.target.get("name").split("-")[2],10);if(!(A<h)){var P=e.selectedTickStyle,B=e.tickRects;B[A].rect.attr(P),e.endTickRectId=A;var V=B.length,$=h/V,ut=A/V;e.graph.emit(Wc,{value:[$,ut]})}}});var r=this,n=r.tooltipBackgroundColor,i=r.tooltipFomatter,o=r.canvas,s=new Gx({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var h=c.pickRect;h.on("mouseenter",function(A){var P=A.target;if(P.get("type")==="rect"){var B=parseInt(P.get("name").split("-")[2],10),V=o.getClientByPoint(u[B].x,u[B].y);s.show({x:u[B].x,y:u[B].y,clientX:V.x,clientY:V.y,text:i?i(u[B].value):u[B].value})}}),h.on("mouseleave",function(A){s.hide()})});var f=this.group;f.on("".concat(Ph,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(yv,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(mv,":click"),function(){e.updateStartEnd(-1)}),f.on(ad,function(c){var h=c.type,A=c.speed;e.currentSpeed=A})},a.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(ey,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(ry,null))},a.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},a.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(i),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(i);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Wc,{value:[f,c]})}},a.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Ph,":click")),e.off("".concat(yv,":click")),e.off("".concat(mv,":click")),e.off(ad),this.sliceGroup.destroy()},a}(),Vx=Wx,jx=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bl=function(){return Bl=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Bl.apply(this,arguments)},Xx=function(a,e){var t={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(t[r[n]]=a[r[n]]);return t},Yx=4,Hx=26,Zx=function(a){jx(e,a);function e(t){var r=a.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,l.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var i=r.get("graph");r.cacheGraphData=i.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{}}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,i=r.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),u=this.get("graph").get("container"),f;s?((0,l.isString)(s)&&(s=document.getElementById(s)),f=s):(f=Oa("<div class='".concat(o,"'></div>")),wi(f,{position:"relative"})),u.appendChild(f),this.set("timeBarContainer",f);var c,h=t.get("renderer");h==="SVG"?c=new uv({container:f,width:n,height:i}):c=new Ll({container:f,width:n,height:i}),this.get("containerCSS")&&wi(f,this.get("containerCSS")),this.set("canvas",c)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,i=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,h=r.controllerCfg,A=r.textStyle,P=r.tick,B=r.backgroundStyle,V=r.foregroundStyle,$=f.data,ut=Xx(f,["data"]),ct=n-2*s,ht=u==="trend"?Hx:Yx,xt=this.get("graph"),Wt=this.get("timeBarGroup"),Jt=this.get("canvas"),$t=null;if(u==="trend"||u==="simple"){var ve=this.get("getValue");$t=new Rx(Bl(Bl({graph:xt,canvas:Jt,group:Wt,type:u,x:i+s,y:u==="trend"?o+s:o+s+15,width:ct,height:ht,padding:s,backgroundStyle:B,foregroundStyle:V,trendCfg:Bl(Bl({},ut),{data:$.map(function(xe){return(ve==null?void 0:ve(xe))||xe.value})})},c),{tick:{ticks:$,tickLabelFormatter:P.tickLabelFormatter,tickLabelStyle:P.tickLabelStyle,tickLineStyle:P.tickLineStyle},handlerStyle:Bl(Bl({},c.handlerStyle),{height:c.height||ht}),controllerCfg:h,textStyle:A}))}else u==="tick"&&($t=new Vx(Bl({graph:xt,canvas:Jt,group:Wt,x:i+s,y:o+s,width:n,height:42,padding:2,controllerCfg:h},P)));var Oe=function xe(){var Ze=t.get("timebar");Ze.draggingHandler=!1,Ze.isPlay&&(Ze.isPlay=!1,Ze.currentHandler=Ze.maxHandlerShape,Ze.changePlayStatus()),document.removeEventListener("mouseup",xe)};Jt.on("mousedown",function(xe){(xe.target.get("name")==="maxHandlerShape-handler"||xe.target.get("name")==="minHandlerShape-handler"||xe.target===$t.foregroundShape)&&document.addEventListener("mouseup",Oe)}),this.set("timebar",$t)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var i=this._cfgs.type;!i||i==="trend"||i==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):i==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),h=Math.round(o.length*n[1]);h=h>=o.length?o.length-1:h,c=c>=o.length?o.length-1:c;var A=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,P=A?A(o[c]):o[c].date,B=A?A(o[h]):o[h].date;if(s!=="tick"){var V=this.get("timebar");V.setText(P,B)}if(u)u(f,P,B);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var $=this.get("filterItemTypes"),ut=this.get("changeData"),ct=this.get("getDate"),ht=this.get("shouldIgnore"),xt=o[c].date,Wt=o[h].date;if(ut||ut===void 0){var Jt=this.cacheGraphData.nodes,$t=this.cacheGraphData.edges,ve={},Oe={};f.getNodes().forEach(function(xe){return ve[xe.getID()]=!0}),f.getEdges().forEach(function(xe){return Oe[xe.getID()]=!0}),$.includes("node")&&(Jt.forEach(function(xe){var Ze=+((ct==null?void 0:ct(xe))||xe.date),ar=Ze>=xt&&Ze<=Wt||(ht==null?void 0:ht("node",xe,{min:xt,max:Wt})),Fr=ve[xe.id];Fr&&!ar?(f.removeItem(xe.id),ve[xe.id]=!1):!Fr&&ar&&(f.addItem("node",xe),ve[xe.id]=!0)}),$t==null||$t.forEach(function(xe){var Ze=ve[xe.source]&&ve[xe.target]||(ht==null?void 0:ht("edge",xe,{min:xt,max:Wt})),ar=!!f.findById(xe.id);ar&&!Ze?(f.removeItem(xe.id),Oe[xe.id]=!1):!ar&&Ze?(f.addItem("edge",xe),Oe[xe.id]=!0):ar||(Oe[xe.id]=!1)})),(this.get("filterEdge")||$.includes("edge"))&&($t==null||$t.filter(function(xe){var Ze=+((ct==null?void 0:ct(xe))||xe.date),ar=Ze>=xt&&Ze<=Wt||(ht==null?void 0:ht("edge",xe,{min:xt,max:Wt})),Fr=ve[xe.source]&&ve[xe.target],rn=ar&&Fr,Zr=Oe[xe.id];Zr&&!rn?(Oe[xe.id]=!1,f.removeItem(xe.id)):!Zr&&rn&&(Oe[xe.id]=!0,f.addItem("edge",xe))}))}else $.includes("node")&&f.getNodes().forEach(function(xe){var Ze=xe.getModel();if(!(ht!=null&&ht("node",Ze,{min:xt,max:Wt}))){var ar=+((ct==null?void 0:ct(Ze))||Ze.date);ar<xt||ar>Wt?f.hideItem(xe):f.showItem(xe)}}),(this.get("filterEdge")||$.includes("edge"))&&f.getEdges().forEach(function(xe){var Ze=xe.getModel();if(!(ht!=null&&ht("edge",Ze,{min:o[c].date,max:o[h].date}))){var ar=+((ct==null?void 0:ct(Ze))||Ze.date);if(ar<o[c].date||ar>o[h].date)f.hideItem(xe);else{var Fr=xe.getSource().isVisible(),rn=xe.getTarget().isVisible();Fr&&rn&&f.showItem(xe)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Wc,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Wc,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),a.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var i=this.get("container");i||(i=this.get("graph").get("container")),(0,l.isString)(i)&&(i=document.getElementById(i)),i.removeChild(n)}},e}(pu),Kx=Zx,$x=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qx=In.applyMatrix;function Jx(a,e){var t,r;if(a.naturalWidth)t=a.naturalWidth,r=a.naturalHeight;else{var n=new Image;n.src=a.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var qx=function(a){$x(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var i=this.get("container");(0,l.isString)(i)&&(i=document.getElementById(i));var o=Oa("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,h=0,A=0,P=0,B=0,V=0;i.addEventListener("mousedown",function($){if(r.refresh=!1,$.target===o){var ut=o.style;A=parseInt(ut.width,10),P=parseInt(ut.height,10);var ct=t.get("width"),ht=t.get("height");A>ct||P>ht||(V=n.getZoom(),B=t.get("ratio"),f=!0,s=$.clientX,u=$.clientY)}},!1),i.addEventListener("mousemove",function($){if(!(!f||(0,l.isNil)($.clientX)||(0,l.isNil)($.clientY))){var ut=t.get("width"),ct=t.get("height"),ht=o.style;c=parseInt(ht.left,10),h=parseInt(ht.top,10),A=parseInt(ht.width,10),P=parseInt(ht.height,10);var xt=s-$.clientX,Wt=u-$.clientY;c-xt<0?xt=c:c-xt+A>=ut&&(xt=0),h-Wt<0?Wt=h:h-Wt+P>=ct&&(Wt=0),c-=xt,h-=Wt,wi(o,{left:"".concat(c,"px"),top:"".concat(h,"px")}),n.translate(xt*V/B,Wt*V/B),s=$.clientX,u=$.clientY}},!1),i.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),i.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),i.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),i=this.get("graph"),o=i.get("width"),s=i.get("height"),u=o/s,f=i.getGroup(),c=f.getCanvasBBox(),h=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],A=[c.maxX-c.minX,c.maxY-c.minY],P={centerX:h[0],centerY:h[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(P.width=A[0],P.height=P.width/u):(P.height=A[1],P.width=P.height*u),P.minX=h[0]-P.width/2,P.minY=h[1]-P.height/2;var B=f.getMatrix();B||(B=[1,0,0,0,1,0,0,0,1]);var V=nt.invert([1,0,0,0,1,0,0,0,1],B),$=Qx({x:P.minX,y:P.minY},V),ut=i.getCanvasByPoint($.x,$.y),ct=this.get("viewport");ct||this.initViewport();var ht=o/P.width,xt=ht*r,Wt=ht*n,Jt=r*-ut.x/P.width,$t=n*-ut.y/P.height,ve=Jt+xt,Oe=$t+Wt;Jt<0&&(xt+=Jt,Jt=0),ve>r&&(xt=xt-(ve-r)),$t<0&&(Wt+=$t,$t=0),Oe>n&&(Wt=Wt-(Oe-n)),this.set("ratio",t);var xe="".concat(Jt,"px"),Ze="".concat($t,"px");wi(ct,{left:xe,top:Ze,width:"".concat(xt,"px"),height:"".concat(Wt,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),i=r.get("height"),o=i/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var h=Oa("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,l.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(h):r.get("container").appendChild(h),t.set("container",h);var A=Oa('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');h.appendChild(A);var P=Oa('<span style="display: table-cell; vertical-align: middle; "></span>');A.appendChild(P),t.set("containerDOM",A),t.set("containerSpan",P);var B=Oa('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",B),t.updateImgSize(),P.appendChild(B),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),i=t.get("height");r.onload=function(){var o=Jx(r);o[0]>o[1]?r.width=n:r.height=i}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),i=r.get("canvas").getCanvasBBox(),o=i.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var i=Oa('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",i),i.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(i),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(pu),tw=qx,ew=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gg=function(){return gg=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},gg.apply(this,arguments)},rw=In.distance,oy=.05,sy={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},nw=function(a){ew(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,l.clone)(sy),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",i=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",i);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(i){}),n.on("drag",function(i){r.filter(i)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(i){r.scaleRByWheel(i)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),i,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?i=1-oy:i=1/(1-oy);var f=r.get("maxR"),c=r.get("minR"),h=r.get("r");(h>(f||n.get("height"))&&i>1||h<(c||n.get("height")*.05)&&i<1)&&(i=1),h*=i,r.set("r",h),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),i=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),h=r.get("vShapes");h&&h.forEach(function(ut){ut.remove(),ut.destroy()}),h=[],i.forEach(function(ut){var ct=ut.getModel(),ht=ct.x,xt=ct.y;rw({x:ht,y:xt},f)<s&&(o[ct.id]=ut)});var A=n.getEdges(),P=[];A.forEach(function(ut){var ct=ut.getModel(),ht=ct.source,xt=ct.target;c(ct)&&(u==="only-source"||u==="one"?o[ht]&&!o[xt]&&P.push(ut):u==="only-target"||u==="one"?o[xt]&&!o[ht]&&P.push(ut):u==="both"&&o[ht]&&o[xt]&&P.push(ut))});var B=r.get("showNodeLabel"),V=r.get("showEdgelabel"),$=n.get("group");P.forEach(function(ut){var ct=ut.get("group").get("children");ct.forEach(function(ht){var xt=ht.get("type"),Wt=$.addShape(xt,{attrs:ht.attr()});h.push(Wt),B&&xt==="text"&&Wt.set("visible",!0)})}),Object.keys(o).forEach(function(ut){var ct=o[ut],ht=ct.get("group").clone();if($.add(ht),h.push(ht),V)for(var xt=ht.get("children"),Wt=0;Wt<xt.length;Wt++){var Jt=xt[Wt];Jt.get("type")==="text"&&Jt.set("visible",!0)}}),r.set("vShapes",h)},e.prototype.updateParams=function(t){var r=this,n=t.r,i=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(i==="mousemove"||i==="click")&&r.set("trigger",i),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var h=r.get("dPercentText");h&&(h.remove(),h.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,i=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=i.get("group"),u=n.get("delegateStyle")||sy;o=s.addShape("circle",{attrs:gg({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(i){i.remove(),i.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(pu),iw=nw,aw=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ow=In.pointLineDistance,sw={stroke:"#FA8C16",lineWidth:1},uw=function(a){aw(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:sw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,i=n.getBBox(),o=r.getModel(),s=o.x-i.x,u=o.y-i.y;this.show({x:i.minX+s,y:i.minY+u},{width:i.width,height:i.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,i=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");i===!0||i==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):i==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),i===!0||i==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):i==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,l.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var i=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},h={x:n.x+r.width/2,y:n.y+r.height/2},A={x:n.x+r.width/2,y:n.y+r.height},P={x:n.x,y:n.y+r.height/2},B={x:n.x+r.width,y:n.y+r.height/2},V=[],$=[],ut=null;if(this.clearAlignLine(),(0,l.each)(s,function(ht){ht[4].isVisible&&(V.push(i.getLineDisObject(ht,c)),V.push(i.getLineDisObject(ht,h)),V.push(i.getLineDisObject(ht,A)))}),(0,l.each)(u,function(ht){ht[4].isVisible&&($.push(i.getLineDisObject(ht,P)),$.push(i.getLineDisObject(ht,h)),$.push(i.getLineDisObject(ht,B)))}),V.sort(function(ht,xt){return ht.dis-xt.dis}),$.sort(function(ht,xt){return ht.dis-xt.dis}),V.length!==0&&V[0].dis<f){t.y=V[0].line[1]-V[0].point.y+n.y,ut={type:"item",horizontals:[V[0]]};for(var ct=1;ct<3;ct++)V[0].dis===V[ct].dis&&ut.horizontals.push(V[ct])}if($.length!==0&&$[0].dis<f){t.x=$[0].line[0]-$[0].point.x+n.x,ut?ut.verticals=[$[0]]:ut={type:"item",verticals:[$[0]]};for(var ct=1;ct<3;ct++)$[0].dis===$[ct].dis&&ut.verticals.push($[ct])}ut&&(ut.bbox=r,this.addAlignLine(ut))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,i=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),h=c.get("group");n==="item"&&(i&&(0,l.each)(i,function(A){var P=A.line,B=A.point,V=(P[0]+P[2])/2,$,ut;B.x<V?($=B.x-r.width/2,ut=Math.max(P[0],P[2])):($=B.x+r.width/2,ut=Math.min(P[0],P[2]));var ct=(0,l.mix)({x1:$,y1:P[1],x2:ut,y2:P[1]},u),ht=h.addShape("line",{attrs:ct,capture:!1});f.push(ht)}),o&&(0,l.each)(o,function(A){var P=A.line,B=A.point,V=(P[1]+P[3])/2,$,ut;B.y<V?($=B.y-r.height/2,ut=Math.max(P[1],P[3])):($=B.y+r.height/2,ut=Math.min(P[1],P[3]));var ct=(0,l.mix)({x1:P[0],y1:$,x2:P[0],y2:ut},u),ht=h.addShape("line",{attrs:ct,capture:!1});f.push(ht)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:ow(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,l.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,i=this.get("graph"),o=i.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(pu),fw=uw,cw=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ja=function(){return ja=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},ja.apply(this,arguments)},lw=["click","mouseenter"],hw=function(a){cw(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var i=this.get("position").split("-");i.includes("left")&&(n="left"),i.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=Oa(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();wi(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),i=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,h=0,A={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+h};return u.forEach(function(P){var B=s[f[P]],V=P;switch(P){case"top":B+=h;break;case"left":B+=c;break;case"bottom":B=n.getHeight()-t[1]-B+h,V="top";break;default:B=n.getWidth()-t[0]-B+c,V="left";break}A[V]=B}),A.top+=o+n.getContainer().offsetTop,A.left+=i+n.getContainer().offsetLeft,Object.keys(A).forEach(function(P){A[P]="".concat(A[P],"px")}),A},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";lw.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var i=t.get("legendCanvas");n==="mouseenter"?(i.on("node-container:mouseenter",function(o){return t.filterData(o)}),i.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(i.on("node-container:click",function(o){return t.filterData(o)}),i.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();wi(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var i=t.get("parent");i.get("active")?(i.set("active",!1),this.findLegendItemsByState("active").length&&i.set("inactive",!0)):(i.set("inactive",!1),i.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(h){h.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(h){var A=h.get("children"),P=A[0],B=A[1];P.attr(ja(ja({},P.get("oriAttrs")),s)),B.attr(ja(ja({},B.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(h){var A=h.get("children"),P=A[0],B=A[1];P.attr(ja(ja({},P.get("oriAttrs")),f)),B.attr(ja(ja({},B.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var i=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=i.find(function(u){return u.get("name")==="node-group"}),s=i.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(i){return i.get("name")==="root"}),n=[r.find(function(i){return i.get("name")==="node-group"}),r.find(function(i){return i.get("name")==="edge-group"})];n.forEach(function(i){i.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var i=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=i.find(function(ut){return ut.get("name")==="root"}),h=c.find(function(ut){return ut.get("name")==="node-group"}),A=c.find(function(ut){return ut.get("name")==="edge-group"}),P=h.get("children").filter(function(ut){return ut.get("active")}),B=A.get("children").filter(function(ut){return ut.get("active")}),V=0,$=["getNodes","getEdges"];$.forEach(function(ut){o[ut]().forEach(function(ct){var ht=!1,xt=ut==="getNodes"?P:B;xt.forEach(function(Wt){var Jt=n[Wt.get("id")];ht=ht||Jt(ct.getModel())}),ht?(o.setItemState(ct,u,!1),o.setItemState(ct,s,!0),V++):(o.setItemState(ct,s,!1),o.setItemState(ct,u,!0))})}),V||$.forEach(function(ut){o[ut]().forEach(function(ct){o.clearItemStates(ct,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",i=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,i])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,i])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new Ll({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),i=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[i,o];u.forEach(function(Nr,yn){s[Nr].forEach(function(dn){var Lr,Yr=f[yn].addGroup({id:dn.id,name:"node-container"}),on,sn=dn.type,Sn=t.getShapeSize(dn),Ln=Sn.width,ti=Sn.height,li=Sn.r,Hi=t.getStyle(Nr.substr(0,4),dn);switch(dn.type){case"circle":on={r:li,x:0,y:0};break;case"rect":on={width:Ln,height:ti,x:-Ln/2,y:-ti/2};break;case"ellipse":on={rx:Ln,ry:ti,x:0,y:0},sn="ellipse";break;case"line":on={x1:-Ln/2,y1:0,x2:Ln/2,y2:0},sn="line";break;case"quadratic":on={path:[["M",-Ln/2,0],["Q",0,Ln/2,Ln/2,0]]},sn="path";break;case"cubic":on={path:[["M",-Ln/2,0],["C",-Ln/6,Ln/2,Ln/6,-Ln/2,Ln/2,0]]},sn="path";break;case"diamond":on={path:[["M",0,-ti],["L",Ln,0],["L",0,ti],["L",-Ln,0],["Z"]]},sn="path";break;case"triangle":on={path:[["M",-Ln,ti],["L",0,-ti],["L",Ln,ti],["Z"]]},sn="path";break;case"star":on={path:In.getStarPath(li*3,li*1.2)},sn="path";break;default:on={r:li,x:0,y:0};break}var ki=Yr.addShape(sn,{attrs:ja(ja({},on),Hi),name:"".concat(dn.type,"-node-keyShape"),oriAttrs:ja({opacity:1},Hi)});if(dn.label){var Zi=ki.getBBox(),qi=((Lr=dn.labelCfg)===null||Lr===void 0?void 0:Lr.style)||{},Ca=ja({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},qi);Yr.addShape("text",{attrs:ja({x:Zi.maxX+4,y:0,text:dn.label},Ca),className:"legend-label",name:"".concat(dn.type,"-node-text"),oriAttrs:Ca})}})});var c=this.get("padding"),h,A=n.find(function(Nr){return Nr.get("name")==="title-container"}),P={height:0,maxY:0,width:0};if(this.get("title")){A||(A=n.addGroup({name:"title-container"}));var B={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},V=this.get("titleConfig")||{},$=Object.assign(B,V.style||{});h=A.addShape("text",{attrs:ja({text:this.get("title")},$)}),P=A.getCanvasBBox(),A.setMatrix([1,0,0,0,1,0,V.offsetX,V.offsetY,1])}this.layoutItems();var ut=n.getCanvasBBox(),ct=i.getCanvasBBox(),ht=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],xt=P.maxY<ct.minY?Math.abs(P.maxY-ct.minY)+c[0]:P.maxY+c[0],Wt=[1,0,0,0,1,0,ht,xt,1];i.setMatrix(Wt),ut=n.getCanvasBBox();var Jt=[ut.minX+ut.width+c[1],ut.minY+ut.height+c[2]];if(h){var V=ja({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));P=A.getCanvasBBox();var $t=A.getMatrix()||[1,0,0,0,1,0,0,0,1];V.position==="center"?$t[6]=Jt[0]/2+V.offsetX:V.position==="right"?($t[6]=Jt[0]-c[3]+V.offsetX,h.attr({textAlign:"right"})):($t[6]=c[3]+V.offsetX,h.attr({textAlign:"left"})),A.setMatrix($t),P=A.getCanvasBBox(),ht=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],xt=ct.minY<P.maxY?Math.abs(P.maxY-ct.minY)+c[0]:P.maxY+c[0],Wt=[1,0,0,0,1,0,ht,xt,1],i.setMatrix(Wt);var ve=[1,0,0,0,1,0,ht,xt,1];this.get("layout")==="vertical"?ve[6]+=ct.maxX+this.get("horiSep"):ve[7]+=ct.maxY+this.get("vertiSep"),o.setMatrix(ve)}else{ct=i.getCanvasBBox();var Oe=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?Oe[6]+=Wt[6]+ct.maxX+this.get("horiSep"):Oe[7]+=Wt[7]+ct.maxY+this.get("vertiSep"),o.setMatrix(Oe)}ut=n.getCanvasBBox(),ct=i.getCanvasBBox(),Wt=i.getMatrix()||[1,0,0,0,1,0,0,0,1];var xe=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Ze=o.getCanvasBBox();Jt=[Math.max(ct.width+Wt[6],Ze.width+xe[6])+c[1],Math.max(ct.height+Wt[7],Ze.height+xe[7])+c[2]],r.changeSize(Jt[0],Jt[1]);var ar=this.get("containerStyle"),Fr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],rn=In.invertMatrix({x:0,y:0},Fr),Zr=n.addShape("rect",{attrs:ja({x:rn.x+(ar.lineWidth||1),y:rn.y+(ar.lineWidth||1),width:Jt[0]-2*(ar.lineWidth||1),height:Jt[1]-2*(ar.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},ar),name:"legend-back-rect",capture:!1});return Zr.toBack(),Jt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),i=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(xt){return xt.get("name")==="root"}),f=u.find(function(xt){return xt.get("name")==="node-group"}),c=u.find(function(xt){return xt.get("name")==="edge-group"}),h={min:0,max:-1/0},A=-1/0;f.get("children").forEach(function(xt,Wt){Wt===0&&(h.min=s[0]);var Jt=xt.get("children")[0],$t=xt.getCanvasBBox(),ve=Jt.getBBox(),Oe=ve.width,xe=ve.height,Ze=0,ar=0,Fr=0;i==="vertical"?(ar=s[1],Fr=s[0]+Oe/2,s[0]=Fr+$t.height+n,Ze=$t.maxX+ar+Oe/2):(ar=s[0]+Oe/2,Fr=s[1],s[0]=ar+$t.width+r,Ze=$t.maxY+Fr+xe/2),s[0]>h.max&&(h.max=s[0]),Ze>A&&(A=Ze),xt.setMatrix([1,0,0,0,1,0,ar,Fr,1])});var P=h.max-h.min,B={min:0,max:-1/0},V=f.getCanvasBBox();s[0]=0,s[1]=i==="vertical"?V.maxX+r:V.maxY+n,c.get("children").forEach(function(xt,Wt){Wt===0&&(B.min=s[0]);var Jt=xt.get("children")[0],$t=xt.getCanvasBBox(),ve=Jt.getBBox(),Oe=ve.width,xe=ve.height,Ze=0,ar=0;i==="vertical"?(Ze=s[1],ar=s[0],s[0]=ar+$t.height+n,xt.setMatrix([1,0,0,0,1,0,0,ar+xe/2,1])):(Ze=s[0],ar=s[1],s[0]=Ze+$t.width+r,xt.setMatrix([1,0,0,0,1,0,Ze+Oe/2,0,1])),s[0]>B.max&&(B.max=s[0])});var $=B.max-B.min;if(o&&o!==""&&o!=="left"){var ut=P-$,ct=o==="center"?Math.abs(ut)/2:Math.abs(ut),ht=ut<0?f:c;ht.get("children").forEach(function(xt){var Wt=xt.getMatrix()||[1,0,0,0,1,0,0,0,1];i==="vertical"?Wt[7]+=ct:Wt[6]+=ct,xt.setMatrix(Wt)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,i){return n.order-i.order}),t.nodes.forEach(function(n){var i,o,s,u,f,c=n.size||[((i=n.style)===null||i===void 0?void 0:i.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],h=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,l.uniqueId)(),type:n.type||"circle",style:ja({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:ja({fontFamily:"Arial"},h)}})})),t.edges&&(t.edges.sort(function(n,i){return n.order-i.order}),t.edges.forEach(function(n){var i,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((i=n.labelCfg)===null||i===void 0?void 0:i.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,l.uniqueId)(),type:s,size:f,style:ja({lineWidth:(0,l.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:ja({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,l.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,l.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,i;return t.size&&((0,l.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],i=t.size[0]/2):(0,l.isNumber)(t.size)&&(r=t.size,n=t.size,i=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(i=t.style.r)),i||(i=5),r||(r=i),n||(n=i),{width:r,height:n,r:i}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return ja(ja({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),i=this.get("container");n.removeChild(i)},e}(pu),dw=hw,vw=function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},a(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yf=function(){return yf=Object.assign||function(a){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},yf.apply(this,arguments)},uy=function(a,e){var t={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(t[r[n]]=a[r[n]]);return t};typeof document!="undefined"&&pp()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var fy="canvas-annotation",pw=function(a){vw(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=yf(yf({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,i=t.title,o=i===void 0?"":i,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,h=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",A=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),P="<p class='g6-annotation-close'>x</p>",B=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(B,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(h,`
          `).concat(P,`
        </div>
        `).concat(A,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),i=t.get("container"),o=this.get("containerCfg");o?(i=this.createContainer(),n.appendChild(i)):i=n,this.set("container",i);var s=n.getBoundingClientRect(),u=new Ll({container:n,width:s.right-s.left,height:s.bottom-s.top});wi(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,l.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(h){var A,P=((A=h==null?void 0:h.getModel)===null||A===void 0?void 0:A.call(h))||{},B=P.label,V=P.id;return B||V||"-"}),t.get("getContent")||t.set("getContent",function(h){var A,P;if(!h)return"-";var B=((A=h.getModel)===null||A===void 0?void 0:A.call(h))||{},V=B.label,$=B.id,ut=(P=h.getType)===null||P===void 0?void 0:P.call(h),ct=ut?"".concat(ut,": "):"";return"".concat(ct).concat(V||$||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),i=n.getContainer(),o=i.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,h=c-f,A=u-s,P=r.position,B=P===void 0?"top":P,V=r.offsetX,$=V===void 0?0:V,ut=r.offsetY,ct=ut===void 0?0:ut,ht=uy(r,["position","offsetX","offsetY"]),xt=r.height,Wt=xt===void 0?"fit-content":xt,Jt=r.width,$t=Jt===void 0?n.getWidth():Jt;Wt==="100%"&&(Wt=h),$t==="100%"&&($t=A);var ve="unset",Oe="unset",xe={};switch(B){case"right":ve="".concat(h,"px"),xe={top:0,right:0},xe.right+=s+$,xe.top+=f+ct;break;case"bottom":Oe="".concat(A,"px"),xe={bottom:0,left:0},xe.left+=s+$,xe.bottom+=f+ct;break;case"top":Oe="".concat(A,"px");case"left":ve="".concat(h,"px");default:xe={top:0,left:0},xe.left+=s+$,xe.top+=f+ct;break}Object.keys(xe).forEach(function(ar){xe[ar]="".concat(xe[ar],"px")});var Ze=Oa("<div class='".concat(r.className," g6-annotation-container'></div>"));return wi(Ze,yf(yf({position:"absolute",display:B==="top"||B==="bottom"?"inline-flex":"unset",width:(0,l.isNumber)($t)?"".concat($t,"px"):$t,height:(0,l.isNumber)(Wt)?"".concat(Wt,"px"):Wt,maxHeight:ve,maxWidth:Oe,overflow:"scroll"},xe),ht)),i.appendChild(Ze),Ze.addEventListener("scroll",function(ar){t.updateLinks()}),Ze}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,i=r.bottom-r.top;t.get("canvas").changeSize(n,i),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},i=r.get("graph"),o=i.getPointByCanvas(0,0),s=i.getPointByCanvas(i.getWidth(),i.getHeight()),u=i.getClientByPoint(o.x,o.y),f=u.x,c=u.y,h=i.getClientByPoint(s.x,s.y),A=h.x,P=h.y;Object.values(n).forEach(function(B){var V=B.card;if(V){var $=V.style,ut=od($.left),ct=od($.top),ht=V.getBoundingClientRect(),xt=ht.width,Wt=ht.height,Jt=ut,$t=ct;ut+xt>A-f&&(Jt=A-f-xt),ut<0&&(Jt=0),ct+Wt>P-c&&($t=P-c-Wt),ct<0&&($t=0),wi(V,{left:"".concat(Jt,"px"),top:"".concat($t,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,i;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),h=Object.assign({},o.get("cardCfg")||{},r),A=h.minHeight,P=h.minWidth,B=h.width,V=h.height,$=h.collapsed,ut=$===void 0?!1:$,ct=h.x,ht=h.y,xt=h.title,Wt=h.content,Jt=h.maxTitleLength,$t=h.defaultBegin,ve=uy(h,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),Oe=o.get("linkGroup"),xe=this.get("rows")||[[]],Ze=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),ar=Ze?fy:t.getID(),Fr=s[ar]||{},rn=Fr.card,Zr=Fr.link,Nr=Fr.x,yn=Fr.y,dn=Fr.title,Lr=Fr.content,Yr=this.get("getTitle"),on=this.get("getContent"),sn=this.get("getContentPlaceholder")||function(){return""},Sn=this.get("getTitlePlaceHolder")||function(){return""},Ln=sn(t),ti=Sn(t),li=Oa(this.getDOMContent(yf({itemId:ar,collapsed:ut,title:((i=dn||xt||(Yr==null?void 0:Yr(t)))===null||i===void 0?void 0:i.substr(0,Jt))||ti,content:Lr||Wt||(on==null?void 0:on(t))||Ln},ve))),Hi=(0,l.isNumber)(A)?"".concat(A,"px"):A;wi(li,{minHeight:ut?"unset":Hi,minWidth:(0,l.isNumber)(P)?"".concat(P,"px"):P,height:V,width:B});var ki=!!rn;ki?(Zr==null||Zr.remove(!0),f.replaceChild(li,rn)):f.appendChild(li);var Zi;if(!c){if(Zi=f.getBoundingClientRect()||{},ct!==void 0&&ht!==void 0)Nr=ct,yn=ht;else if(!ki&&!Ze){var qi=Zi.top,Ca=$t||{},pa=Ca.left,mf=Ca.right,Mo=mf===void 0?16:mf,bf=Ca.top,Co=bf===void 0?8:bf,Ao=Ca.bottom,Fu=Mo,vs=Co;isNaN(pa)||(Fu=f.scrollWidth-pa),isNaN(Ao)||(vs=f.scrollHeight-Ao);var Hs=(0,l.isNumber)(P)?P:100;Nr=f.scrollWidth-li.scrollWidth-(xe.length-1)*Hs-Fu;var _i=xe[xe.length-1],ji=(_i[_i.length-1]||{}).bbox;yn=(ji==null?void 0:ji.bottom)-qi||vs}wi(li,{position:"absolute",left:"".concat(Nr,"px"),top:"".concat(yn,"px"),cusor:c?"unset":"move"})}this.bindListener(li,ar);var mi=li.getBoundingClientRect();if(!Ze){var Xi=yg(t,mi,u,this.get("canvas")),ua=this.get("linkStyle");Zr=Oe.addShape("path",{attrs:yf({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:Xi},ua)})}if(s[ar]=yf(yf({},s[ar]||{}),{id:ar,collapsed:ut,card:li,link:Zr,x:Nr,y:yn,cardBBox:mi,content:Lr||Wt,title:dn||xt,contentPlaceholder:Ln,titlePlaceholder:ti,isCanvas:Ze}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Yn=!isNaN(ct)&&!isNaN(ht);if(!ki&&!Ze&&!Yn){var Ti=Zi.bottom,Oi=Ti===void 0?0:Ti,qi=Zi.top;xe[xe.length-1].push({id:ar,bbox:mi}),mi.top>Oi-qi-mi.height-16&&xe.push([]),this.set("rows",xe)}}this.updateCardSize(ar);var fa=this.get("onAnnotationChange");fa==null||fa(s[ar],ki?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,i=r.getBoundingClientRect().width,o=getComputedStyle(r),s=od(o.paddingLeft)+od(o.paddingRight);i-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":wi(f,{marginLeft:i?"".concat(i-c,"px"):"0px"});break;case"top":case"bottom":wi(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var i=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!i?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!i}),n[t]=yf(yf({},n[t]),{collapsed:!i})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],i=n.card,o=n.link;wi(i,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],i=n.card,o=n.link,s=this.get("container");s.removeChild(i),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,h=c===void 0?function(){}:c;h(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,h=c===void 0?function(){}:c;h(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),h=c.findById(r);if(h){var A=n.get("itemHighlightState");c.setItemState(h,A,!0)}var P=f[r].link;if(P){var B=n.get("linkHighlightStyle")||{};P.attr(B)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),h=c.findById(r);if(h){var A=n.get("itemHighlightState");c.setItemState(h,A,!1)}var P=f[r].link;if(P){var B=n.get("linkHighlightStyle")||{};Object.keys(B).forEach(function($){P.attr($,void 0),P.attr($,void 0)});var V=n.get("linkStyle");P.attr(V)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var h=n.get("cardCfg").closeType;h==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var i=this.get("editable");i&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,h=c===void 0?20:c;if(f){var A=u.target,P=A.className;if(!(P!=="g6-annotation-title"&&P!=="g6-annotation-content")){var B=P==="g6-annotation-title"?A.getBoundingClientRect():A.parentNode.getBoundingClientRect(),V=B.width,$=B.height,ut=getComputedStyle(A),ct=P==="g6-annotation-title"?"input":"textarea",ht=Oa("<".concat(ct,' class="').concat(P,'-input" type="textarea" style="width:').concat(V,"px; height: ").concat($,'px; min-width: 16px;"/>')),xt=Oa('<div class="'.concat(P,'-input-wrapper" style="width: ').concat(V,"px; height: ").concat($,"px; min-width: 16px; margin-right: ").concat(ut.marginRight,'" />'));xt.appendChild(ht),A.parentNode.replaceChild(xt,A);var Wt=f[r],Jt=Wt.contentPlaceholder,$t=Wt.titlePlaceholder,ve=Wt.content,Oe=Wt.title,xe=ve;P==="g6-annotation-title"?(ht.name="title",ht.maxLength=h,xe=Oe):ht.name="content",xe?(ht.innerHTML=A.innerHTML,ht.value=A.innerHTML):ht.placeholder=P==="g6-annotation-title"?$t:Jt,ht.focus(),ht.addEventListener("blur",function(Ze){ht.value&&(A.innerHTML=ht.value,Wt[ht.name||"title"]=ht.value),xt.parentNode.replaceChild(A,xt),n.updateCardSize(r);var ar=n.get("onAnnotationChange");ar==null||ar(Wt,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:od(c.left),top:od(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,h=u.clientY,A=n.get("dragging");if(!(isNaN(c)||isNaN(h)||!A)){var P=A.x,B=A.y,V=A.left,$=A.top,ut=A.card,ct=c-P,ht=h-B;V+=ct,$+=ht;var xt=n.get("graph"),Wt=xt.getPointByCanvas(0,0),Jt=xt.getPointByCanvas(xt.getWidth(),xt.getHeight()),$t=xt.getClientByPoint(Wt.x,Wt.y),ve=$t.x,Oe=$t.y,xe=xt.getClientByPoint(Jt.x,Jt.y),Ze=xe.x,ar=xe.y,Fr=ut.getBoundingClientRect(),rn=Fr.right-Fr.left,Zr=Fr.bottom-Fr.top;(V>Ze-ve-rn&&ct>0||V<0&&ct<0)&&(V-=ct),($>ar-Oe-Zr&&ht>0||$<0&&ht<0)&&($-=ht),wi(ut,{left:"".concat(V,"px"),top:"".concat($,"px"),visibility:"hidden"}),P=c,B=h;var Nr=(f[r]||{}).link;if(Nr){var yn=xt.findById(r);Nr.attr("path",yg(yn,Fr,xt,n.get("canvas")))}n.set("dragging",{x:P,y:B,left:V,top:$,card:ut})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var h=n.get("dragging");if(h){var A=h.left,P=h.top,B=h.card;c[r].x=A,c[r].y=P,wi(B,{visibility:"visible"}),n.set("dragging",!1);var V=n.get("rows");V==null||V.forEach(function(ut){for(var ct=ut.length-1;ct>=0;ct--)ut[ct].id===r&&ut.splice(ct,1)});var $=n.get("onAnnotationChange");$==null||$(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,i=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=od(s.marginLeft),f=o.getBoundingClientRect().width;wi(o,{marginRight:"".concat(i-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var i=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var h=yg(r,c.getBoundingClientRect(),o,i);f.attr("path",h)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(i){var o=i.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(i){var o=i.id,s=i.card,u=i.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var i=this.get("cardInfoMap");if(i){var o=r.getID();i[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),i=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,h=u.x,A=u.y,P=u.id,B=u.collapsed,V=u.card;if(!(V&&V.style.display==="none"&&!t)){var $=n.findById(P)||n.get("canvas");s.push({id:P,x:h,y:A,collapsed:B,title:f||(i==null?void 0:i($)),content:c||(o==null?void 0:o($)),visible:V&&V.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(i){var o=i.id,s=i.x,u=i.y,f=i.title,c=i.content,h=i.collapsed,A=i.visible,P=n.findById(o);if(!P&&o===fy&&(P=n.get("canvas")),!P){var B=r.get("cardInfoMap")||{};B[o]=i,r.set("cardInfoMap",B);return}r.toggleAnnotation(P,{x:s,y:u,title:f,content:c,collapsed:h}),A||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var i=n.card,o=n.link;r.removeChild(i),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(pu),gw=pw,yw=function(e,t){var r,n,i,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(h){var A=t[h],P=c.x-A.x,B=c.y-A.y,V=P*P+B*B;o>V&&(o=V,r=c,n=A,i=[f,h])})});var s=20,u=In.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},yg=function(e,t,r,n){var i,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(i=e.getKeyShape)===null||i===void 0?void 0:i.call(e).getBBox(),f=u.minX,c=u.minY,h=u.maxX,A=u.maxY,P=e.getModel(),B=P.x,V=P.y;f+=B,c+=V,h+=B,A+=V,o={left:{x:f,y:(c+A)/2},right:{x:h,y:(c+A)/2},top:{x:(f+h)/2,y:c},bottom:{x:(f+h)/2,y:A}}}Object.keys(o).forEach(function(Oe){var xe=o[Oe],Ze=xe.x,ar=xe.y,Fr=r.getClientByPoint(Ze,ar);o[Oe]=n.getPointByClient(Fr.x,Fr.y)});var $=t.top,ut=$===void 0?0:$,ct=t.left,ht=ct===void 0?0:ct,xt=t.right,Wt=xt===void 0?0:xt,Jt=t.bottom,$t=Jt===void 0?0:Jt,ve={left:n.getPointByClient(ht,(ut+$t)/2),right:n.getPointByClient(Wt,(ut+$t)/2),top:n.getPointByClient((ht+Wt)/2,ut),bottom:n.getPointByClient((ht+Wt)/2,$t)};return yw(o,ve)},od=function(e){return Number(e.replace(/\s+|px/gi,""))||0},mw={PluginBase:pu,Menu:Pb,Grid:Cb,Minimap:Bb,Bundling:zb,ToolBar:Zb,Tooltip:Qb,Fisheye:jb,TimeBar:Kx,ImageMinimap:tw,EdgeFilterLens:iw,SnapLine:fw,Legend:dw,Annotation:gw},bw=mw,So=bw;Yi("circle",{options:{size:Jr.defaultNode.size,style:{x:0,y:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=(0,l.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:i,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,h=o.show,A=o.text;if(h){var P="".concat(this.type,"-icon");A?t.shapeMap[P]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:P,name:P,draggable:!0}):t.shapeMap[P]=t.addShape("image",{attrs:(0,b.pi)({x:-f/2,y:-c/2},o),className:P,name:P,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0]/2;if(o){var B="link-point-left";t.shapeMap[B]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P,y:0,r:f/2||c||5}),className:B,name:B,isAnchorPoint:!0})}if(s){var V="link-point-right";t.shapeMap[V]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P,y:0,r:f/2||c||5}),className:V,name:V,isAnchorPoint:!0})}if(i){var $="link-point-top";t.shapeMap[$]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-P,r:f/2||c||5}),className:$,name:$,isAnchorPoint:!0})}if(u){var ut="link-point-bottom";t.shapeMap[ut]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:P,r:f/2||c||5}),className:ut,name:ut,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.deepMix)({},t,r),i=this.getSize(e),o=i[0]/2,s=(0,b.pi)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),i=this.getSize(e),o=(0,b.pi)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(i[0])&&(o.r=i[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("rect",{options:{size:[100,30],style:{radius:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0],B=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=n.width||i[0],s=n.height||i[1],u=(0,b.pi)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||i.width,o[1]=s.attr("height")||i.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,l.mix)({},i,s.attr(),u);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0]/2,B=A[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=i[0]/2,s=i[1]/2,u=(0,b.pi)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("diamond",{options:{size:[80,80],style:{stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0],B=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],i=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getPath(e),o=(0,b.pi)({path:i},n);return o},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),Yi("triangle",{options:{size:40,direction:"up",style:{stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,i=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=i.width,h=i.height,A=i.show,P=i.offset,B=i.text;if(A)if(B)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var V=-c/2,$=-h/2;(u==="up"||u==="down")&&($+=P),(u==="left"||u==="right")&&(V+=P),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:V,y:$},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,i=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=i.top,f=i.left,c=i.right,h=i.bottom,A=i.size,P=i.r,B=(0,b._T)(i,["top","left","right","bottom","size","r"]),V=this.getSize(e),$=V[0];if(f){var ut=null,ct=$*Math.sin(1/3*Math.PI),ht=$*Math.sin(1/3*Math.PI);s==="up"?ut=[-ht,ct]:s==="down"?ut=[-ht,-ct]:s==="left"&&(ut=[-ht,ht-ct]),ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:ut[0],y:ut[1],r:A/2||P||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var xt=null,ct=$*Math.sin(1/3*Math.PI),ht=$*Math.sin(1/3*Math.PI);s==="up"?xt=[ht,ct]:s==="down"?xt=[ht,-ct]:s==="right"&&(xt=[ht,ht-ct]),xt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:xt[0],y:xt[1],r:A/2||P||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Wt=null,ct=$*Math.sin(1/3*Math.PI),ht=$*Math.sin(1/3*Math.PI);s==="up"?Wt=[ht-ct,-ct]:s==="left"?Wt=[ht,-ct]:s==="right"&&(Wt=[-ht,-ct]),Wt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:Wt[0],y:Wt[1],r:A/2||P||5}),className:"link-point-top",name:"link-point-top"}))}if(h){var Jt=null,ct=$*Math.sin(1/3*Math.PI),ht=$*Math.sin(1/3*Math.PI);s==="down"?Jt=[-ht+ct,ct]:s==="left"?Jt=[ht,ct]:s==="right"&&(Jt=[-ht,ct]),Jt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},B),{x:Jt[0],y:Jt[1],r:A/2||P||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),i=n[0],o=i*Math.sin(1/3*Math.PI),s=i*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getPath(e),o=(0,b.pi)({path:i},n);return o},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,i=r.direction,o=e.direction||i,s=t.shapeMap["link-point-left"]||t.find(function(Nr){return Nr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Nr){return Nr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(Nr){return Nr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Nr){return Nr.get("className")==="link-point-bottom"}),h=n,A=s||u||f||c;A&&(h=A.attr());var P=(0,l.mix)({},h,e.linkPoints),B=P.fill,V=P.stroke,$=P.lineWidth,ut=P.size/2;ut||(ut=P.r);var ct=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ht=ct.left,xt=ct.right,Wt=ct.top,Jt=ct.bottom,$t=this.getSize(e),ve=$t[0],Oe={r:ut,fill:B,stroke:V,lineWidth:$},xe=null,Ze=ve*Math.sin(1/3*Math.PI),ar=ve*Math.sin(1/3*Math.PI);o==="up"?xe=[-ar,Ze]:o==="down"?xe=[-ar,-Ze]:o==="left"&&(xe=[-ar,ar-Ze]),xe&&(s?!ht&&ht!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,b.pi)((0,b.pi)({},Oe),{x:xe[0],y:xe[1]})):ht&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},Oe),{x:xe[0],y:xe[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Fr=null;o==="up"?Fr=[ar,Ze]:o==="down"?Fr=[ar,-Ze]:o==="right"&&(Fr=[ar,ar-Ze]),Fr&&(u?!xt&&xt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,b.pi)((0,b.pi)({},Oe),{x:Fr[0],y:Fr[1]})):xt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},Oe),{x:Fr[0],y:Fr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var rn=null;o==="up"?rn=[ar-Ze,-Ze]:o==="left"?rn=[ar,-Ze]:o==="right"&&(rn=[-ar,-Ze]),rn&&(f?!Wt&&Wt!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,b.pi)((0,b.pi)({},Oe),{x:rn[0],y:rn[1]})):Wt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},Oe),{x:rn[0],y:rn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Zr=null;o==="down"?Zr=[-ar+Ze,Ze]:o==="left"?Zr=[ar,Ze]:o==="right"&&(Zr=[-ar,Ze]),Zr&&(c?!Jt&&Jt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,b.pi)((0,b.pi)({},Oe),{x:Zr[0],y:Zr[1]})):Jt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},Oe),{x:Zr[0],y:Zr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),Yi("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Jr.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Jr.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Jr.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,h=(0,b._T)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,b.pi)({x:-s/2,y:-u/2,height:u},h),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,i=this.getSize(e),o=i[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,h=n.offset,A=n.text,P=(0,b._T)(n,["width","height","x","y","offset","text"]);A?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},P),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,b.pi)((0,b.pi)({},P),{x:f||-o/2+s+h,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,i=this.getSize(e),o=i[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,h=n.offset,A=n.text,P=(0,b._T)(n,["width","height","x","y","offset","text"]);A?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},P),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,b.pi)((0,b.pi)({},P),{x:f||o/2-s+h,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,h=(0,b._T)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),P=A[0],B=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:-P/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:P/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:-B/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},h),{x:0,y:B/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,i=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),h=c[0],A=null,P=s.show,B=s.width,V=-h/2+i.offset;P&&(V=-h/2+B+i.offset);var $=i.style,ut=f.style,ct=f.paddingTop;return(0,l.isString)(e.description)?(A=t.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},$),{x:V,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=A,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},ut),{x:V,y:17+(ct||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(A=t.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},$),{x:V,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=A),A},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getSize(e),o=n.width||i[0],s=n.height||i[1],u=(0,b.pi)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,i=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),h=c[0],A=c[1],P=t.get("keyShape");P.attr((0,b.pi)((0,b.pi)({},i),{x:-h/2,y:-A/2,width:h,height:A}));var B=t.getContainer(),V=B.shapeMap["rect-logo-icon"]||B.find(function(li){return li.get("className")==="rect-logo-icon"}),$=V?V.attr():{},ut=(0,l.mix)({},$,e.logoIcon),ct=ut.width;ct===void 0&&(ct=this.options.logoIcon.width);var ht=e.logoIcon?e.logoIcon.show:void 0,xt=s.offset,Wt=-h/2+ct+xt;!ht&&ht!==void 0&&(Wt=-h/2+xt);var Jt=B.shapeMap["node-label"]||B.find(function(li){return li.get("className")==="node-label"}),$t=B.shapeMap["rect-description"]||B.find(function(li){return li.get("className")==="rect-description"});if(e.label)if(!Jt)B.shapeMap["node-label"]=B.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},s.style),{x:Wt,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var ve=e.labelCfg?e.labelCfg.style:{},Oe=(0,l.mix)({},Jt.attr(),ve);e.label&&(Oe.text=e.label),Oe.x=Wt,(0,l.isString)(e.description)&&(Oe.y=-5),$t&&($t.resetMatrix(),$t.attr({x:Wt})),Jt.resetMatrix(),Jt.attr(Oe)}if((0,l.isString)(e.description)){var xe=f.paddingTop;if(!$t)B.shapeMap["rect-description"]=B.addShape("text",{attrs:(0,b.pi)((0,b.pi)({},f.style),{x:Wt,y:17+(xe||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var ve=e.descriptionCfg?e.descriptionCfg.style:{},Ze=(0,l.mix)({},$t.attr(),ve);(0,l.isString)(e.description)&&(Ze.text=e.description),Ze.x=Wt,$t.resetMatrix(),$t.attr((0,b.pi)((0,b.pi)({},Ze),{y:17+(xe||0)}))}}var ar=B.shapeMap["pre-rect"]||B.find(function(li){return li.get("className")==="pre-rect"});if(ar&&!ar.destroyed){var Fr=(0,l.mix)({},ar.attr(),e.preRect);ar.attr((0,b.pi)((0,b.pi)({},Fr),{x:-h/2,y:-A/2,height:A}))}if(V&&!V.destroyed)if(!ht&&ht!==void 0)V.remove(),delete B.shapeMap["pre-rect"];else{var rn=ut.width,Zr=ut.height,Nr=ut.x,yn=ut.y,dn=ut.offset,Lr=(0,b._T)(ut,["width","height","x","y","offset"]);V.attr((0,b.pi)((0,b.pi)({},Lr),{x:Nr||-h/2+rn+dn,y:yn||-Zr/2,width:rn,height:Zr}))}else ht&&this.drawLogoIcon(e,B);var Yr=B.shapeMap["rect-state-icon"]||B.find(function(li){return li.get("className")==="rect-state-icon"}),on=Yr?Yr.attr():{},sn=(0,l.mix)({},on,e.stateIcon);if(Yr){!sn.show&&sn.show!==void 0&&(Yr.remove(),delete B.shapeMap["rect-state-icon"]);var Sn=sn.width,Zr=sn.height,Nr=sn.x,yn=sn.y,Ln=sn.offset,ti=(0,b._T)(sn,["width","height","x","y","offset"]);Yr.attr((0,b.pi)((0,b.pi)({},ti),{x:Nr||h/2-Sn+Ln,y:yn||-Zr/2,width:Sn,height:Zr}))}else sn.show&&this.drawStateIcon(e,B);this.updateLinkPoints(e,B)},getOptions:function(e,t){return t==="move"?e:(0,l.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),Yi("star",{options:{size:60,style:{stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,i=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,h=n.r,A=(0,b._T)(n,["top","left","right","leftBottom","rightBottom","size","r"]),P=this.getSize(e),B=P[0];if(s){var V=Math.cos(.1*Math.PI)*B,$=Math.sin((18+72*0)/180*Math.PI)*B;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(i){var V=Math.cos(.5*Math.PI)*B,$=Math.sin((18+72*1)/180*Math.PI)*B;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(o){var V=Math.cos(.9*Math.PI)*B,$=Math.sin((18+72*2)/180*Math.PI)*B;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(u){var V=Math.cos(1.3*Math.PI)*B,$=Math.sin((18+72*3)/180*Math.PI)*B;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var V=Math.cos(1.7*Math.PI)*B,$=Math.sin((18+72*4)/180*Math.PI)*B;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},A),{x:V,y:-$,r:c/2||h||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,i=e.innerR||n;return In.getStarPath(r,i)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),i=this.getPath(e),o=(0,b.pi)({path:i},n);return o},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},i,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ze){return Ze.get("className")==="link-point-left"}),i=t.shapeMap["link-point-right"]||t.find(function(Ze){return Ze.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ze){return Ze.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Ze){return Ze.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Ze){return Ze.get("className")==="link-point-right-bottom"}),f=r,c=n||i||o||s||u;c&&(f=c.attr());var h=(0,l.mix)({},f,e.linkPoints),A=h.fill,P=h.stroke,B=h.lineWidth,V=h.size/2;V||(V=h.r);var $=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},ut=$.left,ct=$.right,ht=$.top,xt=$.leftBottom,Wt=$.rightBottom,Jt=this.getSize(e),$t=Jt[0],ve={r:V,fill:A,stroke:P,lineWidth:B},Oe=Math.cos((18+72*0)/180*Math.PI)*$t,xe=Math.sin((18+72*0)/180*Math.PI)*$t;i?!ct&&ct!==void 0?(i.remove(),delete t.shapeMap["link-point-right"]):i.attr((0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe})):ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),Oe=Math.cos((18+72*1)/180*Math.PI)*$t,xe=Math.sin((18+72*1)/180*Math.PI)*$t,o?!ht&&ht!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe})):ht&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),Oe=Math.cos((18+72*2)/180*Math.PI)*$t,xe=Math.sin((18+72*2)/180*Math.PI)*$t,n?!ut&&ut!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),Oe=Math.cos((18+72*3)/180*Math.PI)*$t,xe=Math.sin((18+72*3)/180*Math.PI)*$t,s?!xt&&xt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe})):xt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),Oe=Math.cos((18+72*4)/180*Math.PI)*$t,xe=Math.sin((18+72*4)/180*Math.PI)*$t,u?!Wt&&Wt!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe})):Wt&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,b.pi)((0,b.pi)({},ve),{x:Oe,y:-xe}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var cy=In.defaultSubjectColors,xv="fan-shape-";Yi("donut",{options:{size:Jr.defaultNode.size,style:{x:0,y:0,stroke:Jr.defaultNode.style.stroke,fill:Jr.defaultNode.style.fill,lineWidth:Jr.defaultNode.style.lineWidth},labelCfg:{style:{fill:Jr.nodeLabel.style.fill,fontSize:Jr.nodeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Jr.defaultNode.linkPoints.size,lineWidth:Jr.defaultNode.linkPoints.lineWidth,fill:Jr.defaultNode.linkPoints.fill,stroke:Jr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,b.pi)({},Jr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,i=this.getShapeStyle(e),o=(0,l.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,h=o.text;return c&&(h?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,b.pi)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,b.pi)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Ew(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,i){var o=t.get("keyShape");o.attr((0,b.pi)({},r)),xw(e,t,o),this.updateLabel(e,t,i),n&&this.updateIcon(e,t)}},"circle");var Ew=function(e,t,r){var n=e.donutAttrs,i=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(i).length;if(i&&u>1){var f=ly(i,s),c=f.configs,h=f.totalValue;if(h){var A=hy(r),P=A.lineWidth,B=A.arcR,V=[B,0],$=0;if(u===1){mg(t,{arcR:B,arcBegin:V,beginAngle:$,config:c[0],fanIndex:0,lineWidth:P,totalValue:h,drawWhole:!0});return}for(var ut=0;ut<c.length;ut++){var ct=mg(t,{arcR:B,arcBegin:V,beginAngle:$,config:c[ut],fanIndex:ut,lineWidth:P,totalValue:h});if(ct.shouldEnd)return;V=ct.arcBegin,$=ct.beginAngle}}}},mg=function(e,t){var r=t.arcR,n=t.arcBegin,i=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,h=c===void 0?!1:c,A=t.updateShape,P=A===void 0?void 0:A,B=o.value/f;if(B<.001)return{beginAngle:i,arcBegin:n,shape:void 0,shouldEnd:!1};var V,$,ut;if(h||B>.999)V=[r,1e-4],ut=!0;else{var ct=B*Math.PI*2;$=i+ct,V=[r*Math.cos($),-r*Math.sin($)],ut=ct>Math.PI?1:0}var ht={path:[["M",n[0],n[1]],["A",r,r,0,ut,0,V[0],V[1]],["L",V[0],V[1]]],stroke:o.color||(P==null?void 0:P.attr("stroke"))||cy[s%cy.length],lineWidth:u};return P?P.attr(ht):e.shapeMap["".concat(xv).concat(s)]=e.addShape("path",{attrs:ht,name:"".concat(xv).concat(s),draggable:!0}),{beginAngle:$,arcBegin:V,shape:e.shapeMap["".concat(xv).concat(s)],shouldEnd:h||B>.999}},xw=function(e,t,r){var n=e.donutAttrs,i=e.donutColorMap,o=i===void 0?{}:i,s={},u=t.getContainer();if(n){var f=ly(n,o),c=f.configs,h=f.totalValue;if(h)for(var A=hy(r),P=A.lineWidth,B=A.arcR,V=[B,0],$=0,ut=0;ut<c.length;ut++){var ct="".concat(xv).concat(ut),ht=mg(u,{arcR:B,arcBegin:V,beginAngle:$,config:c[ut],fanIndex:ut,lineWidth:P,totalValue:h,drawWhole:c.length===1,updateShape:u.shapeMap[ct]});if(ht.shape&&(s[ct]=!0),ht.shouldEnd)break;V=ht.arcBegin,$=ht.beginAngle}}var xt=Object.keys(u.shapeMap).filter(function(Wt){return Wt.includes(xv)});xt.forEach(function(Wt){s[Wt]||(u.shapeMap[Wt].remove(!0),delete u.shapeMap[Wt])})},ly=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(i){var o=+e[i];isNaN(o)||(n.push({key:i,value:o,color:t[i]}),r+=o)}),{totalValue:r,configs:n}},hy=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,i=t-r;return{lineWidth:i,arcR:n}},_p=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},ww=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),i=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+i)/2,centerY:(o+s)/2,maxX:i,maxY:s,minX:n,minY:o,height:s-o,width:i-n}},iS=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},bg=function(e){for(var t=[],r={},n=e.length,i=n-1;i>=0;i--){var o=e[i];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},dy=function(e){return bg(e)},aS=function(e,t){return[e,{x:e.x,y:t.y},t]},Sp=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},_w=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Eg=function(e,t,r){var n=_w(t,e);if(n===0){var i=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?i=e.maxX:r.x<t.x?i=e.minX:r.x===t.x&&(o=e.maxY),{x:i,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},vy=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+i)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:i,maxY:o,height:o-n,width:i-r}},xg=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Mp=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},Sw=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},Mw=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},Cw=function(e,t){return Sw(e,t.x).concat(Mw(e,t.y))},wv=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Aw=function(e,t){var r=-2,n=0;return t.forEach(function(i){i&&(e.x===i.x&&(n+=r),e.y===i.y&&(n+=r))}),n},py=function(e,t,r,n,i){return wv(e,t)+wv(e,r)+Aw(e,[t,r,n,i])},Tw=function a(e,t,r,n,i){i===void 0&&(i=0),e.unshift(t[n]),r[n]&&r[n]!==n&&i<=100&&a(e,t,r,r[n],i+1)},oS=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Cp=function(e,t,r,n){var i=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,h=n.x-t.x,A=n.y-t.y,P=i*u-o*s,B=f*A-c*h,V=i*c-o*f,$=s*A-u*h;return P*B<=0&&V*$<=0},wg=function(e,t,r){if(r.width||r.height){var n=xg(r),i=n[0],o=n[1],s=n[2],u=n[3];return Cp(e,t,i,o)||Cp(e,t,i,u)||Cp(e,t,o,s)||Cp(e,t,s,u)}return!1},Iw=function(e,t,r,n){var i=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(wg(o,t,r)||wg(o,t,n))return;i.push(o)}}),bg(i)},Pw=function(e,t,r,n,i,o,s){var u,f=[],c=(u={},u[t.id]=t,u),h={},A={},P={};A[t.id]=0,P[t.id]=py(t,r,t);var B=new my;B.add({id:t.id,value:P[t.id]});var V={};e.forEach(function(Wt){V[Wt.id]=Wt});for(var $;Object.keys(c).length;){var ut=B.minId(!1);if(ut)$=c[ut];else break;if($===r){var ct=[];return Tw(ct,V,h,r.id),ct}delete c[$.id],B.remove($.id),f.push($);var ht=Iw(e,$,n,i),xt=function(Jt){Jt.forEach(function($t){if(f.indexOf($t)===-1){var ve=$t.id;c[ve]||(c[ve]=$t);var Oe=P[$.id]+wv($,$t);if(A[ve]&&Oe>=A[ve]){B.add({id:ve,value:P[ve]});return}h[ve]=$.id,A[ve]=Oe,P[ve]=A[ve]+py($t,r,t,o,s),B.add({id:ve,value:P[ve]})}})};xt(ht)}return[t,r]},Ow=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},Dw=function(e,t,r,n){var i=wv(e,t),o=wv(r,t);i<n&&(n=i),o<n&&(n=o);var s={x:t.x-n/i*(t.x-e.x),y:t.y-n/i*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},gy=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(i,o){var s=e[o+1],u=e[o+2];if(s&&u)if(Ow(i,s,u)){var f=Dw(i,s,u,t),c=f[0],h=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(h.x," ").concat(h.y)),r.push("L".concat(h.x," ").concat(h.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},yy=function(e,t,r,n,i){var o,s;if(!r||!r.getType())o=_p(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,h=f.y;o={x:c,y:h,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+h,maxY:u.maxY+h},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=_p(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=_p(t);else if(n.getType()==="combo"){var A=n.getKeyShape().getBBox();if(A){var P=n.getModel(),B=P.x,V=P.y;s={x:B,y:V,width:A.width,height:A.height,minX:A.minX+B,maxX:A.maxX+B,minY:A.minY+V,maxY:A.maxY+V},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=_p(t)}else s=n&&n.getBBox();var $=Sp(o,i),ut=Sp(s,i),ct=Eg($,e,t),ht=Eg(ut,t,e),xt=ww([ct,ht]),Wt=vy($,xt),Jt=vy(ut,xt),$t=[];$t=$t.concat(xg(Wt)).concat(xg(Jt));var ve={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[xt,Wt,Jt].forEach(function(xe){$t=$t.concat(Cw(xe,ve).filter(function(Ze){return Mp(Ze,$)&&Mp(Ze,ut)}))}),[{x:ct.x,y:ht.y},{x:ht.x,y:ct.y}].forEach(function(xe){Mp(xe,$)&&Mp(xe,ut)&&$t.push(xe)}),$t.unshift(ct),$t.push(ht),$t=bg($t);var Oe=Pw($t,ct,ht,o,s,e,t);return Oe.unshift(e),Oe.push(t),dy(Oe)},Nw=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],i=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?i.push(s):(i=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(i.length>2){var u=e.indexOf(i[1]);u>-1&&e.splice(u,1)}}return e},my=function(){function a(){this.arr=[],this.map={},this.arr=[],this.map={}}return a.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},a.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},a.prototype.remove=function(e){this.map[e]&&delete this.map[e]},a.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},a.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},a.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},a}(),Lw=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},kw=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Rw=function(e,t){return[e,t]},Bw=function(e,t,r,n,i){return dy(yy(e,t,r,n,i.offset))},Gw={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Lw,fallbackRoute:Bw},sS={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:kw,fallbackRoute:Rw},Gl=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},Fw=function(e,t,r){var n={};return e.forEach(function(i){if(i)for(var o=Sp(i.getBBox(),r),s=Gl(o.minX,t);s<=Gl(o.maxX,t);s+=1)for(var u=Gl(o.minY,t);u<=Gl(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},_g=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},by=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},Ey=function(e,t,r){for(var n=1/0,i=0,o=t.length;i<o;i++){var s=r(e,t[i]);s<n&&(n=s)}return n},xy=function(e,t,r,n,i){var o=[];if(!r)return[e];var s=i.directions,u=i.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,h=Sp(f,u);for(var A in h)h[A]=Gl(h[A],i.gridSize);if(c){for(var P=0,B=s;P<B.length;P++)for(var V=B[P],$=[[{x:h.minX,y:h.minY},{x:h.maxX,y:h.minY}],[{x:h.minX,y:h.minY},{x:h.minX,y:h.maxY}],[{x:h.maxX,y:h.minY},{x:h.maxX,y:h.maxY}],[{x:h.minX,y:h.maxY},{x:h.maxX,y:h.maxY}]],A=0;A<4;A++){var ut=$[A],ct=In.getLineIntersect(e,{x:e.x+V.stepX*h.width,y:e.y+V.stepY*h.height},ut[0],ut[1]);ct&&!wg(e,ct,f)&&(ct.id="".concat(ct.x,"|||").concat(ct.y),o.push(ct))}return o}var ht=Eg(h,e,n);return ht.id="".concat(ht.x,"|||").concat(ht.y),[ht]},Sg=function(e,t,r,n){var i=_g(e,t),o=r[e.id];if(!o){var s=_g(n,e);return by(s,i)}var u=_g({x:o.x,y:o.y},e);return by(u,i)},Uw=function(e,t,r,n,i,o,s){var u=[n],f=n,c=e.id,h=e.x,A=e.y,P={x:h,y:A,id:c};Sg(P,o,t,r)&&(f={x:o.x===n.x?n.x:P.x*s,y:o.y===n.y?n.y:P.y*s},u.unshift(f));for(var B=t[c];B&&B.id!==c;){var V={x:h,y:A,id:c},$={x:B.x,y:B.y,id:B.id},ut=Sg($,V,t,r);ut&&(f={x:$.x===V.x?f.x:$.x*s,y:$.y===V.y?f.y:$.y*s},u.unshift(f)),c=$.id,h=$.x,A=$.y,B=t[c]}return u[0].x=h===r.x?i.x:f.x,u[0].y=A===r.y?i.y:f.y,u.unshift(i),u},zw=function(e,t,r,n,i){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,l.deepMix)(Gw,i);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=Fw(o.obstacles.concat([r,n]),u,o.offset),c={x:Gl(e.x,u),y:Gl(e.y,u)},h={x:Gl(t.x,u),y:Gl(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(h.x,"|||").concat(h.y);var A=xy(c,e,r,h,o),P=xy(h,t,n,c,o);A.forEach(function(Lr){delete f[Lr.id]}),P.forEach(function(Lr){delete f[Lr.id]});for(var B={},V={},$={},ut={},ct={},ht=new my,xt=0;xt<A.length;xt++){var Wt=A[xt];B[Wt.id]=Wt,ut[Wt.id]=0,ct[Wt.id]=Ey(Wt,P,o.distFunc),ht.add({id:Wt.id,value:ct[Wt.id]})}var Jt=o.maximumLoops,$t,ve,Oe,xe,Ze,ar,Fr=1/0,rn={};for(P.forEach(function(Lr){rn["".concat(Lr.x,"|||").concat(Lr.y)]=!0}),Object.keys(B).forEach(function(Lr){var Yr=B[Lr].id;ct[Yr]<=Fr&&(Fr=ct[Yr],$t=B[Yr])});Object.keys(B).length>0&&Jt>0;){var Zr=ht.minId((Jt+1)%30===0);if(Zr)$t=B[Zr];else break;if(rn["".concat($t.x,"|||").concat($t.y)])return Uw($t,$,c,t,e,h,u);delete B[$t.id],ht.remove($t.id),V[$t.id]=!0;for(var xt=0;xt<o.directions.length;xt++){ve=o.directions[xt];var Nr="".concat(Math.round($t.x)+ve.stepX,"|||").concat(Math.round($t.y)+ve.stepY);if(Oe={x:$t.x+ve.stepX,y:$t.y+ve.stepY,id:Nr},!V[Nr]&&(ar=Sg($t,Oe,$,c),!(ar>o.maxAllowedDirectionChange)&&!f[Nr])){B[Nr]||(B[Nr]=Oe);var yn=s[ar];xe=o.distFunc($t,Oe)+(isNaN(yn)?u:yn),Ze=ut[$t.id]+xe;var dn=ut[Nr];dn&&Ze>=dn||($[Nr]=$t,ut[Nr]=Ze,ct[Nr]=Ze+Ey(Oe,P,o.distFunc),ht.add({id:Nr,value:ct[Nr]}))}}Jt-=1}return o.fallbackRoute(e,t,r,n,o)};Ia("polyline",{options:{color:Jr.defaultEdge.color,size:Jr.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Jr.defaultEdge.style.stroke,lineAppendWidth:Jr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Jr.edgeLabel.style.fill,fontSize:Jr.edgeLabel.style.fontSize,fontFamily:Jr.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,b.pi)({},Jr.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,l.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var i=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[i];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,h=n.radius,A=this.options.routeCfg,P=(0,l.mix)({},A,e.routeCfg);P.offset=n.offset;var B=this.getPath(u,f,c,h,P,!Boolean(s));((0,l.isArray)(B)&&B.length<=1||(0,l.isString)(B)&&B.indexOf("L")===-1)&&(B="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(B="M0 0, L0 0");var V=(0,l.mix)({},Jr.defaultEdge.style,n,{lineWidth:e.size,path:B});return V},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},i=r.shapeMap["edge-shape"]||r.find(function(xt){return xt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var h=i.attr(),A=(0,l.mix)({},n,h,e.style),P=e.sourceNode,B=e.targetNode,V=A.radius,$=this.options.routeCfg,ut=(0,l.mix)({},$,e.routeCfg);ut.offset=A.offset;var ct=this.getPath(c,P,B,V,ut,!Boolean(f));((0,l.isArray)(ct)&&ct.length<=1||(0,l.isString)(ct)&&ct.indexOf("L")===-1)&&(ct="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(ct="M0 0, L0 0"),h.endArrow&&A.endArrow===!1&&(e.style.endArrow={path:""}),h.startArrow&&A.startArrow===!1&&(e.style.startArrow={path:""});var ht=(0,l.mix)(n,i.attr(),{lineWidth:o,path:ct},e.style);i&&i.attr(ht)}},getPath:function(e,t,r,n,i,o){var s=i.offset,u=i.obstacles,f=i.simple;if(!s||e.length>2||o===!1){if(n)return gy(e,n);var c=[];return(0,l.each)(e,function(B,V){V===0?c.push(["M",B.x,B.y]):c.push(["L",B.x,B.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var h=f?yy(e[e.length-1],e[0],r,t,s):zw(e[0],e[e.length-1],t,r,i);if(!h||!h.length)return"M0 0, L0 0";if(n){var A=gy(h,n);return A}h=Nw(h);var P=In.pointsToPolygon(h);return P}},"single-edge");var wy=kl.cloneEvent,_y=kl.isNaN,Sy=Math.abs,Ww=10,Vw=["shift","ctrl","alt","control"],jw={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(_y(r)||_y(n))){var i=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(i=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,h=this.scalableRange;c<1&&c>-1&&(c=s*c,h=u*h),(f.minX<=s+c&&f.minX+i>s+c||f.maxX+c>=0&&f.maxX+c+i<0)&&(i=0),(f.minY<=u+h&&f.minY+o>u+h||f.maxY+h>=0&&f.maxY+h+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],i=r[1];n&&i||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,i=n.getEdges(),o=0,s=i.length;o<s;o++){var u=i[o].get("group").get("children");u&&u.forEach(function(ht){ht.set("ori-visibility",ht.get("ori-visibility")||ht.get("visible")),ht.hide()})}for(var f=n.getNodes(),c=0,h=f.length;c<h;c++)for(var A=f[c].getContainer(),P=A.get("children"),B=0,V=P;B<V.length;B++){var $=V[B],ut=$.get("isKeyShape");ut||($.set("ori-visibility",$.get("ori-visibility")||$.get("visible")),$.hide())}}if(typeof window!="undefined"){var ct=this;this.handleDOMContextMenu=function(ht){return ct.onMouseUp(ht)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=wy(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(Sy(this.origin.x-e.clientX)+Sy(this.origin.y-e.clientY)<Ww)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var i=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function($t){return $t.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,h=f.length;c<h;c++){var A=f[c].get("group").get("children");A&&A.forEach(function($t){var ve=$t.get("ori-visibility");$t.set("ori-visibility",void 0),ve&&$t.show()})}if(i>u)for(var P=n.getNodes(),B=0,V=P.length;B<V;B++)for(var $=P[B].getContainer(),ut=$.get("children"),ct=0,ht=ut;ct<ht.length;ct++){var xt=ht[ct],Wt=xt.get("isKeyShape");if(!Wt){var Jt=xt.get("ori-visibility");xt.set("ori-visibility",void 0),Jt&&xt.show()}}}if(!this.dragging){this.origin=null;return}e=wy(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(Vw.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,i=n&&n.isCanvas&&n.isCanvas();if((0,l.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,l.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},Xw={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,b.pi)((0,b.pi)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,b.pi)((0,b.pi)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,i=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),i){var s=i.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),h=f.filter(function(P){var B=P.get("id");return c===B});if(h.length===0?this.targets.push(n):f.length>1?f.forEach(function(P){var B=P.hasLocked();B||t.targets.push(P)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var A=[];this.targets.forEach(function(P){var B=P.getModel(),V=B.x,$=B.y,ut=B.id;A.push({x:V,y:$,id:ut})}),this.set("beforeDragNodes",A)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(P){var B=P.getEdges();B.forEach(function(V){V.isVisible()&&(t.hidenEdge[V.getID()]=!0,V.hide())})}),this.origin={x:e.x,y:e.y},this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var i=n.getModel().comboId;i&&(r[i]=t.graph.findById(i))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){i.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;i.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,l.clone)(i))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(i){var o=i.getModel();o.comboId!==n.id&&r.updateComboTree(i,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,i=r.getModel().comboId,o=i?n.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(i){var s=n.findById(i);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();i!==f.comboId&&n.updateComboTree(u,i)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,i=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,l.debounce)(function(a){var e=a.targets,t=a.graph,r=a.point,n=a.origin,i=a.evt,o=a.updateEdge,s=a.onlyChangeComboSize,u=a.updateParentCombos;e.map(function(f){var c=f.get("model"),h=f.get("id");r[h]||(r[h]={x:c.x||0,y:c.y||0});var A=i.x-n.x+r[h].x,P=i.y-n.y+r[h].y,B={x:A,y:P};o?t.updateItem(f,B,!1):f.updatePosition(B)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var A=e.x-this.origin.x+this.originPoint.minX,P=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:A,y:P})}else{var r=t.get("group"),n=(0,l.deepMix)({},ed.delegateStyle,this.delegateStyle),i=this.calculationGroupPosition(e),o=i.x,s=i.y,u=i.width,f=i.height,c=i.minX,h=i.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:h},this.delegateRect=r.addShape("rect",{attrs:(0,b.pi)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,i=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,h=f.minY,A=f.maxX,P=f.maxY;c<r&&(r=c),h<i&&(i=h),A>n&&(n=A),P>o&&(o=P)}var B=Math.floor(r),V=Math.floor(i),$=Math.ceil(n)-Math.floor(r),ut=Math.ceil(o)-Math.floor(i);return{x:B,y:V,width:$,height:ut,minX:r,minY:i}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,i={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(i[s]=r.findById(s))}),Object.values(i).forEach(function(o){o&&r.updateCombo(o)})}},Yw={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],i=r[1];if(n&&i)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,l.throttle)(function(a,e){var t=a.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(a.item,{event:a,action:"activate"},e))){for(var n=e.activeState,i=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),f=r.get("vedges"),c=o.length,h=s.length,A=u.length,P=f.length,B=e.inactiveItems||{},V=e.activeItems||{},$=0;$<c;$++){var ut=o[$],ct=ut.getID(),ht=ut.hasState("selected");e.resetSelected&&ht&&r.setItemState(ut,"selected",!1),V[ct]&&(r.setItemState(ut,n,!1),delete V[ct]),i&&!B[ct]&&(r.setItemState(ut,i,!0),B[ct]=ut)}for(var $=0;$<h;$++){var xt=s[$],Wt=xt.getID(),ht=xt.hasState("selected");e.resetSelected&&ht&&r.setItemState(xt,"selected",!1),V[Wt]&&(r.setItemState(xt,n,!1),delete V[Wt]),i&&!B[Wt]&&(r.setItemState(xt,i,!0),B[Wt]=xt)}for(var $=0;$<A;$++){var Jt=u[$],$t=Jt.getID();V[$t]&&(r.setItemState(Jt,n,!1),delete V[$t]),i&&!B[$t]&&(r.setItemState(Jt,i,!0),B[$t]=Jt)}for(var $=0;$<P;$++){var ve=f[$],Oe=ve.getID();V[Oe]&&(r.setItemState(ve,n,!1),delete V[Oe]),i&&!B[Oe]&&(r.setItemState(ve,i,!0),B[Oe]=ve)}if(t&&!t.destroyed){i&&(r.setItemState(t,i,!1),delete B[t.getID()]),V[t.getID()]||(r.setItemState(t,n,!0),V[t.getID()]=t);for(var xe=t.getEdges(),Ze=xe.length,$=0;$<Ze;$++){var Jt=xe[$],$t=Jt.getID(),ar=void 0;Jt.getSource()===t?ar=Jt.getTarget():ar=Jt.getSource();var Fr=ar.getID();i&&B[Fr]&&(r.setItemState(ar,i,!1),delete B[Fr]),V[Fr]||(r.setItemState(ar,n,!0),V[Fr]=ar),B[$t]&&(r.setItemState(Jt,i,!1),delete B[$t]),V[$t]||(r.setItemState(Jt,n,!0),V[$t]=Jt),Jt.toFront()}}e.activeItems=V,e.inactiveItems=B,r.emit("afteractivaterelations",{item:a.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,l.throttle)(function(a,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(a.item,{event:a,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,i=e.activeItems||{},o=e.inactiveItems||{};Object.values(i).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:a.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Ap=Math.min,My=Math.max,Cy=Math.abs,Ay="shift",Hw=["drag","shift","ctrl","alt","control"],Zw={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Ay,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Hw.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ay,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),i=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),i.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,i){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=i},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,i=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(i.x,i.y),h=Ap(f.x,c.x),A=My(f.x,c.x),P=Ap(f.y,c.y),B=My(f.y,c.y),V=[],$=[];n.getNodes().forEach(function(ht){if(ht.isVisible()&&s(ht,h,A,P,B)&&o(ht,"select",t)){V.push(ht);var xt=ht.getModel();$.push(xt.id),n.setItemState(ht,u,!0)}});var ut=[];this.includeEdges&&V.forEach(function(ht){var xt=ht.getOutEdges();xt.forEach(function(Wt){if(Wt.isVisible()){var Jt=Wt.getModel(),$t=Jt.source,ve=Jt.target;$.includes($t)&&$.includes(ve)&&o(Wt,"select",t)&&(ut.push(Wt),n.setItemState(Wt,t.selectedState,!0))}})});var ct=[];this.includeCombos&&n.getCombos().forEach(function(ht){if(ht.isVisible()&&s(ht,h,A,P,B)&&o(ht,"select",t)){ct.push(ht);var xt=ht.getModel();$.push(xt.id),n.setItemState(ht,u,!0)}}),this.selectedEdges=ut,this.selectedNodes=V,this.selectedCombos=ct,this.onSelect&&this.onSelect(V,ut,ct),n.emit("nodeselectchange",{selectedItems:{nodes:V,edges:ut,combos:ct},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:Cy(e.canvasX-t.x),height:Cy(e.canvasY-t.y),x:Ap(e.canvasX,t.x),y:Ap(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Ty="shift",Kw=["shift","ctrl","alt","control"],$w={getDefaultCfg:function(){return{multiple:!0,trigger:Ty,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Kw.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Ty,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),i=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=i.findAllByState("node",t.selectedState).concat(i.findAllByState("edge",t.selectedState)).concat(i.findAllByState("combo",t.selectedState));(0,l.each)(c,function(V){V!==r&&i.setItemState(V,t.selectedState,!1)})}var h=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!h){var A=i.findAllByState("node",t.selectedState),P=i.findAllByState("edge",t.selectedState),B=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:A,edges:P,combos:B},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&i.setItemState(r,t.selectedState,!1);var A=i.findAllByState("node",t.selectedState),P=i.findAllByState("edge",t.selectedState),B=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:r,selectedItems:{nodes:A,edges:P,combos:B},select:!1})}else{u(e,t)&&i.setItemState(r,t.selectedState,!0);var A=i.findAllByState("node",t.selectedState),P=i.findAllByState("edge",t.selectedState),B=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:r,selectedItems:{nodes:A,edges:P,combos:B},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,i=r.shouldBegin;if(i(e,this)){var o=n.findAllByState("node",this.selectedState);(0,l.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,l.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,l.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},Qw=re,Iy=.05,Jw={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var i=function(V,$){return Math.hypot($.x-V.x,$.y-V.y)},o=i({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),h=this.get("animateCfg"),A=this.graph.get("canvas"),P=A.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:P.x,y:P.y},c,h),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,i=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,h=f;e.wheelDelta<0?c=1-Iy*u:c=1/(1-Iy*u),h=f*c;var A=this.get("minZoom")||n.get("minZoom"),P=this.get("maxZoom")||n.get("maxZoom");h>P?h=P:h<A&&(h=A);var B=this.get("enableOptimize");if(B){var V=this.get("optimizeZoom"),$=this.get("optimized"),ut=n.getNodes(),ct=n.getEdges(),ht=ut.length,xt=ct.length;if(!$){for(var Wt=0;Wt<ht;Wt++){var Jt=ut[Wt];if(!Jt.destroyed)for(var $t=Jt.get("group").get("children"),ve=$t.length,Oe=0;Oe<ve;Oe++){var xe=$t[Oe];!xe.destoryed&&!xe.get("isKeyShape")&&(xe.set("ori-visibility",xe.get("ori-visibility")||xe.get("visible")),xe.hide())}}for(var Ze=0;Ze<xt;Ze++)for(var ar=ct[Ze],$t=ar.get("group").get("children"),ve=$t.length,Oe=0;Oe<ve;Oe++){var xe=$t[Oe];xe.set("ori-visibility",xe.get("ori-visibility")||xe.get("visible")),xe.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Fr=setTimeout(function(){var _i=n.getZoom(),ji=t.get("optimized");if(ji){t.set("optimized",!1);for(var mi=0;mi<ht;mi++){var Xi=ut[mi],ua=Xi.get("group").get("children"),Yn=ua.length;if(_i<V){var Ti=Xi.getKeyShape(),Oi=Ti.get("ori-visibility");Ti.set("ori-visibility",void 0),Oi&&Ti.show()}else for(var fa=0;fa<Yn;fa++){var Ni=ua[fa],Oi=Ni.get("ori-visibility");Ni.set("ori-visibility",void 0),!Ni.get("visible")&&Oi&&Oi&&Ni.show()}}for(var Ui=0;Ui<xt;Ui++){var Ba=ct[Ui],ua=Ba.get("group").get("children"),Yn=ua.length;if(_i<V){var Ti=Ba.getKeyShape(),Oi=Ti.get("ori-visibility");Ti.set("ori-visibility",void 0),Oi&&Ti.show()}else for(var fa=0;fa<Yn;fa++){var Ni=ua[fa];if(!Ni.get("visible")){var Oi=Ni.get("ori-visibility");Ni.set("ori-visibility",void 0),Oi&&Ni.show()}}}}},100);this.set("timeout",Fr)}if(f<=1){var rn=void 0,Zr=void 0;if(i.fixAll||i.fixLineWidth||i.fixLabel){rn=n.findAllByState("node",i.fixState),Zr=n.findAllByState("edge",i.fixState);for(var Nr=f/h,yn=rn.length,dn=0;dn<yn;dn++){var Jt=rn[dn],Lr=Jt.getContainer(),Yr=Jt.getModel(),on=Jt.getOriginStyle(),sn=Jt.getStateStyle(i.fixState),Sn=Jt.get("shapeFactory").getShape(Yr.type).getStateStyle(i.fixState,Jt)[i.fixState];if(i.fixAll){if(h<=1){var Ln=(0,l.clone)(Lr.getMatrix());Ln||(Ln=[1,0,0,0,1,0,0,0,1]);var ti=Jt.getModel(),li=ti.x,Hi=ti.y;Ln=Qw(Ln,[["t",-li,-Hi],["s",Nr,Nr],["t",li,Hi]]),Lr.setMatrix(Ln)}}else for(var $t=Lr.get("children"),ve=$t.length,Oe=0;Oe<ve;Oe++){var xe=$t[Oe],ki=void 0,Zi=void 0;if(i.fixLabel){var qi=xe.get("type");if(qi==="text"){ki=xe.attr("fontSize")||12;var Ca=sn[xe.get("name")],pa=Sn[xe.get("name")],mf=Ca?Ca.fontSize:12,Mo=pa?pa.fontSize:12,bf=mf||Mo||12;if(h<=1&&xe.attr("fontSize",bf/h),Zi)break}}if(i.fixLineWidth&&xe.get("isKeyShape")){Zi=xe.attr("lineWidth")||0;var Co=sn.lineWidth||Sn.lineWidth||on.lineWidth||0;if(h<=1&&xe.attr("lineWidth",Co/h),ki)break}}}for(var Ao=Zr.length,Fu=0;Fu<Ao;Fu++)for(var ar=Zr[Fu],Lr=ar.getContainer(),$t=Lr.get("children"),Yr=ar.getModel(),sn=ar.getStateStyle(i.fixState),Sn=ar.get("shapeFactory").getShape(Yr.type).getStateStyle(i.fixState,ar)[i.fixState],ve=$t.length,Oe=0;Oe<ve;Oe++){var xe=$t[Oe],ki=void 0,Zi=void 0;if(i.fixLabel||i.fixAll){var qi=xe.get("type");if(qi==="text"){ki=xe.attr("fontSize")||12;var Ca=sn[xe.get("name")],pa=Sn[xe.get("name")],mf=Ca?Ca.fontSize:12,Mo=pa?pa.fontSize:12,bf=mf||Mo||12;if(h<=1&&xe.attr("fontSize",bf/h),Zi)break}}if((i.fixLineWidth||i.fixAll)&&xe.get("isKeyShape")){Zi=xe.attr("lineWidth")||0;var Co=sn.lineWidth||Sn.lineWidth||1;if(h<=1&&xe.attr("lineWidth",Co/h),ki)break}}}}var vs=this.get("animate"),Hs=this.get("animateCfg");n.zoomTo(h,{x:s.x,y:s.y},vs,Hs),n.emit("wheelzoom",e)}}},Py={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,wi(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){wi(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,i=r.height,o=r.container,s=r.graph;if(!t(e,this)){wi(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,h=f.y,A=o.getBoundingClientRect();c>n/2?c-=A.width:c+=this.offset,h>i/2?h-=A.height:h+=this.offset;var P="".concat(c,"px"),B="".concat(h,"px");wi(this.container,{left:P,top:B,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=Oa('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),wi(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},qw=(0,b.pi)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Py),t_=(0,b.pi)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Py),Oy="click",e_=["click","dblclick"],r_={getDefaultCfg:function(){return{trigger:Oy,onChange:function(){}}},getEvents:function(){var e,t;return e_.includes(this.trigger)?t=this.trigger:(t=Oy,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var i=!r.collapsed;this.shouldBegin(e,i,this)&&(r.collapsed=i,t.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:e.item,collapsed:i}),this.shouldUpdate(e,i,this)&&(this.onChange(t,i,this),this.graph.layout()))}}}}},n_=kl.calculationItemsBBox,i_=function a(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,l.each)(r,function(n){a(n,t)})}},a_={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var i=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=i.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=i;var u=[];this.targets.forEach(function(f){var c=f.getModel(),h=c.x,A=c.y,P=c.id;u.push({x:h,y:A,id:P})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var h=r.findById(c.parentId);h&&r.setItemState(h,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:e.x,y:e.y},this.currentItemChildCombos=[],i_(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,i=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,h=o.filter(function(A){var P=A.getModel();return i.parentId,P.id!==i.id&&!t.currentItemChildCombos.includes(P.id)});h.map(function(A){var P=A.getBBox(),B=P.centerX,V=P.centerY,$=P.width,ut=u-B,ct=f-V,ht=2*Math.sqrt(ut*ut+ct*ct);c+$-ht>.8*c?r.setItemState(A,t.activeState,!0):r.setItemState(A,t.activeState,!1)})}(0,l.each)(this.targets,function(A){t.updateCombo(A,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,l.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,i=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==i.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,i.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,i=n.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(i){if(this.activeState){var u=r.findById(i);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):i!==f.getID()&&(s=r.findById(i),i!==f.getModel().parentId&&r.updateComboTree(f,i,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var i=n.get("delegateGroup");i.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,h=f.y,A=f.id;s.after.combos.push({x:c,y:h,id:A}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var i=e.get("combos");(0,l.each)(i,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,l.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(i,o){return i.destroyed?!1:(i.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(i){return i.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,i=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),i.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var A=e.x-this.origin.x+this.originPoint.minX,P=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:A,y:P})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=n_(this.targets):n=this.targets[0].getBBox();var i=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:i,y:o,width:s,height:u,minX:f,minY:c};var h=(0,b.pi)((0,b.pi)({},ed.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,b.pi)({width:n.width,height:n.height,x:n.x,y:n.y},h),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(i){var o=i.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(i){i&&t.updateCombo(i)})}},Dy="dblclick",o_=["click","dblclick"],s_={getDefaultCfg:function(){return{trigger:Dy,relayout:!0}},getEvents:function(){var e,t;return o_.includes(this.trigger)?t=this.trigger:(t=Dy,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,i=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),i&&n.get("layout")?n.layout():n.refreshPositions())}}},u_=kl.isPolygonsIntersect,f_=kl.pathToPoints,Ny="shift",c_=["drag","shift","ctrl","alt","control"],l_=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=f_(n.attr("path"));else{var i=n.getCanvasBBox();r=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return u_(t,r)},h_={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:Ny,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return c_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ny,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,i=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!i||i({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,i=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&l_(c,i)&&n(c,"select",e)){s.push(c);var h=c.getModel();u.push(h.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var h=c.getOutEdges();h.forEach(function(A){if(A.isVisible()){var P=A.getModel(),B=P.source,V=P.target;u.includes(B)&&u.includes(V)&&n(A,"select",e)&&(f.push(A),r.setItemState(A,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,b.pi)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Ly="click",d_=["click","drag"],ky=void 0,v_=["shift","ctrl","control","alt","meta",void 0],p_={getDefaultCfg:function(){return{trigger:Ly,key:ky,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;d_.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=Ly,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&v_.indexOf(e.key.toLowerCase())===-1&&(e.trigger=ky,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,i=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,l.isFunction)(o)?s=o({source:t.source,target:i.id},t):s=t.edgeConfig;var u=(0,b.pi)({target:i.id},s);if(t.source===i.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,b.pi)((0,b.pi)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,l.isFunction)(o)?s=o({source:i.id,target:i.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,b.pi)({source:i.id,target:i.id},s),!1),t.source=i.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var i=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&i.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},Ry="ctrl",g_=["shift","ctrl","alt","control"],y_="1",m_={getDefaultCfg:function(){return{trigger:Ry,combinedKey:y_,functionName:"fitView",functionParams:[]}},getEvents:function(){return g_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ry,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},b_=["shift","ctrl","alt","control","meta"],E_={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||b_.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var i=n.some(function(Yr){return e["".concat(Yr,"Key")]});if(i){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var h=this.graph.get("width"),A=this.graph.get("height"),P=this.graph.get("canvas").getCanvasBBox(),B=this.scalableRange,V=this.scalableRange;B<1&&B>-1&&(B=h*B,V=A*V);var $=P.minX,ut=P.maxX,ct=P.minY,ht=P.maxY;f>0?ut<-B?f=0:ut-f<-B&&(f=ut+B):f<0&&($>h+B?f=0:$-f>h+B&&(f=$-(h+B))),c>0?ht<-V?c=0:ht-c<-V&&(c=ht+V):c<0&&(ct>A+V?c=0:ct-c>A+V&&(c=ct-(A+V))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var xt=this.get("enableOptimize");if(xt){var Wt=this.get("optimizeZoom"),Jt=this.get("optimized"),$t=r.getNodes(),ve=r.getEdges(),Oe=$t.length,xe=ve.length;if(!Jt){for(var Ze=0;Ze<Oe;Ze++){var ar=$t[Ze];if(!ar.destroyed)for(var Fr=ar.get("group").get("children"),rn=Fr.length,Zr=0;Zr<rn;Zr++){var Nr=Fr[Zr];!Nr.destoryed&&!Nr.get("isKeyShape")&&(Nr.set("ori-visibility",Nr.get("ori-visibility")||Nr.get("visible")),Nr.hide())}}for(var yn=0;yn<xe;yn++)for(var dn=ve[yn],Fr=dn.get("group").get("children"),rn=Fr.length,Zr=0;Zr<rn;Zr++){var Nr=Fr[Zr];Nr.set("ori-visibility",Nr.get("ori-visibility")||Nr.get("visible")),Nr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Lr=setTimeout(function(){var Yr=r.getZoom(),on=t.get("optimized");if(on){t.set("optimized",!1);for(var sn=0;sn<Oe;sn++){var Sn=$t[sn],Ln=Sn.get("group").get("children"),ti=Ln.length;if(Yr<Wt){var li=Sn.getKeyShape(),Hi=li.get("ori-visibility");Hi&&li.show()}else for(var ki=0;ki<ti;ki++){var Zi=Ln[ki],Hi=Zi.get("ori-visibility");!Zi.get("visible")&&Hi&&Hi&&Zi.show()}}for(var qi=0;qi<xe;qi++){var Ca=ve[qi],Ln=Ca.get("group").get("children"),ti=Ln.length;if(Yr<Wt){var li=Ca.getKeyShape(),Hi=li.get("ori-visibility");Hi&&li.show()}else for(var ki=0;ki<ti;ki++){var Zi=Ln[ki];if(!Zi.get("visible")){var Hi=Zi.get("ori-visibility");Hi&&Zi.show()}}}}},100);this.set("timeout",Lr)}}},allowDrag:function(e){var t,r,n=e.target,i=n&&n.isCanvas&&n.isCanvas();if((0,l.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,l.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},x_={"drag-canvas":jw,"zoom-canvas":Jw,"drag-node":Xw,"activate-relations":Yw,"brush-select":Zw,"click-select":$w,"lasso-select":h_,tooltip:qw,"edge-tooltip":t_,"collapse-expand":r_,"drag-combo":a_,"collapse-expand-combo":s_,"create-edge":p_,"shortcuts-call":m_,"scroll-canvas":E_};(0,l.each)(x_,function(a,e){Pa(e,a)});var w_=(0,b.pi)((0,b.pi)({},x),tc),uS=So.Grid,fS=So.Minimap,cS=So.Bundling,lS=So.Menu,__=So.Fisheye,hS=So.ToolBar,dS=So.Tooltip,S_=So.TimeBar,M_=So.ImageMinimap,C_=So.EdgeFilterLens,A_=So.SnapLine,vS=So.Legend,T_=So.Annotation,By={version:ed.version,Graph:v0,TreeGraph:wb,Util:kl,Layout:Pi.Layouts,TreeLayout:rb,registerLayout:nb,Global:ed,registerBehavior:Pa,registerCombo:ra,registerEdge:Ia,registerNode:Yi,Minimap:So.Minimap,Grid:So.Grid,Bundling:So.Bundling,Menu:So.Menu,ToolBar:So.ToolBar,Tooltip:So.Tooltip,Legend:So.Legend,TimeBar:S_,SnapLine:A_,Fisheye:__,ImageMinimap:M_,EdgeFilterLens:C_,Annotation:T_,Algorithm:w_,Arrow:Ir,Marker:Dr,Shape:en};By.version="4.8.7";var I_=By,pS="4.8.7"},20156:function(ae,w,S){"use strict";S.r(w),S.d(w,{Graph:function(){return et},GraphWithEvent:function(){return Ht},algorithm:function(){return x},comparision:function(){return k},essence:function(){return z},generate:function(){return E}});var x={};S.r(x),S.d(x,{components:function(){return jt},dfs:function(){return Zt},dijkstra:function(){return ge},dijkstraAll:function(){return Re},findCycles:function(){return Le},floydWarshall:function(){return Dt},isAcyclic:function(){return Cn},postorder:function(){return bi},preorder:function(){return Hn},prim:function(){return Pt},tarjan:function(){return Ve},topsort:function(){return Bn}});var z={};S.r(z),S.d(z,{hasSelfLoop:function(){return tr},isGraph:function(){return sr},isNullGraph:function(){return Fe},isSimpleGraph:function(){return ye}});var k={};S.r(k),S.d(k,{containAllSameEdges:function(){return Kt},containAllSameNodes:function(){return Bt},containSameEdges:function(){return H},containSameNodes:function(){return Lt},getSameEdges:function(){return F},getSameNodes:function(){return G},isGraphComplement:function(){return Sr},isGraphContainsAnother:function(){return he},isGraphOptionSame:function(){return st},isGraphSame:function(){return Yt}});var E={};S.r(E),S.d(E,{getGraphComplement:function(){return Er}});var N;(function(me){me.DEFAULT_EDGE_NAME="\0",me.GRAPH_NODE="\0",me.EDGE_KEY_DELIM=""})(N||(N={}));function T(me,Ft){var ne=me.get(Ft)||0;me.set(Ft,ne+1)}function m(me,Ft){var ne=me.get(Ft);ne!==void 0&&(ne=ne-1,ne>0?me.set(Ft,ne):me.delete(Ft))}function y(me,Ft,ne,Ie){var Ce=String(Ft),Ue=String(ne);if(!me&&Ce>Ue){var Xe=Ce;Ce=Ue,Ue=Xe}return Ce+N.EDGE_KEY_DELIM+Ue+N.EDGE_KEY_DELIM+(Ie===void 0?N.DEFAULT_EDGE_NAME:Ie)}function v(me,Ft,ne,Ie){var Ce=String(Ft),Ue=String(ne),Xe={v:Ft,w:ne};if(!me&&Ce>Ue){var Wr=Xe.v;Xe.v=Xe.w,Xe.w=Wr}return Ie!==void 0&&(Xe.name=Ie),Xe}function p(me,Ft){return y(me,Ft.v,Ft.w,Ft.name)}function g(me){return typeof me=="function"}var I=function(Ft){return Ft.nodes().map(function(ne){var Ie=Ft.node(ne),Ce=Ft.parent(ne),Ue={id:ne,value:Ie,parent:Ce};return Ue.value===void 0&&delete Ue.value,Ue.parent===void 0&&delete Ue.parent,Ue})},_=function(Ft){return Ft.edges().map(function(ne){var Ie=Ft.edge(ne),Ce={v:ne.v,w:ne.w,value:Ie,name:ne.name};return Ce.name===void 0&&delete Ce.name,Ce.value===void 0&&delete Ce.value,Ce})},C=function(Ft){var ne={options:{directed:Ft.isDirected(),multigraph:Ft.isMultigraph(),compound:Ft.isCompound()},nodes:I(Ft),edges:_(Ft),value:Ft.graph()};return ne.value===void 0&&delete ne.value,ne},O=function(Ft){var ne=new et(Ft.options);return Ft.value!==void 0&&ne.setGraph(Ft.value),Ft.nodes.forEach(function(Ie){ne.setNode(Ie.id,Ie.value),Ie.parent&&ne.setParent(Ie.id,Ie.parent)}),Ft.edges.forEach(function(Ie){ne.setEdge(Ie.v,Ie.w,Ie.value,Ie.name)}),ne};function b(me,Ft){var ne=Object.keys(me);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(me);Ft&&(Ie=Ie.filter(function(Ce){return Object.getOwnPropertyDescriptor(me,Ce).enumerable})),ne.push.apply(ne,Ie)}return ne}function l(me){for(var Ft=1;Ft<arguments.length;Ft++){var ne=arguments[Ft]!=null?arguments[Ft]:{};Ft%2?b(Object(ne),!0).forEach(function(Ie){K(me,Ie,ne[Ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(me,Object.getOwnPropertyDescriptors(ne)):b(Object(ne)).forEach(function(Ie){Object.defineProperty(me,Ie,Object.getOwnPropertyDescriptor(ne,Ie))})}return me}function K(me,Ft,ne){return Ft in me?Object.defineProperty(me,Ft,{value:ne,enumerable:!0,configurable:!0,writable:!0}):me[Ft]=ne,me}function Z(me,Ft){if(!(me instanceof Ft))throw new TypeError("Cannot call a class as a function")}function X(me,Ft){for(var ne=0;ne<Ft.length;ne++){var Ie=Ft[ne];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(me,Ie.key,Ie)}}function W(me,Ft,ne){return Ft&&X(me.prototype,Ft),ne&&X(me,ne),Object.defineProperty(me,"prototype",{writable:!1}),me}var U={compound:!1,multigraph:!1,directed:!0},et=function(){function me(){var Ft=this,ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Z(this,me),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=N.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Ft.directed},this.isMultigraph=function(){return Ft.multigraph},this.isCompound=function(){return Ft.compound},this.setGraph=function(Ce){return Ft.label=Ce,Ft},this.graph=function(){return Ft.label},this.setDefaultNodeLabel=function(Ce){return g(Ce)?Ft.defaultNodeLabelFn=Ce:Ft.defaultNodeLabelFn=function(){return Ce},Ft},this.nodeCount=function(){return Ft.nodeCountNum},this.node=function(Ce){return Ft.nodesLabelMap.get(Ce)},this.nodes=function(){return Array.from(Ft.nodesLabelMap.keys())},this.sources=function(){return Ft.nodes().filter(function(Ce){var Ue;return!(!((Ue=Ft.inEdgesMap.get(Ce))===null||Ue===void 0)&&Ue.size)})},this.sinks=function(){return Ft.nodes().filter(function(Ce){var Ue;return!(!((Ue=Ft.outEdgesMap.get(Ce))===null||Ue===void 0)&&Ue.size)})},this.setNodes=function(Ce,Ue){return Ce.map(function(Xe){return Ft.setNode(Xe,Ue)}),Ft},this.hasNode=function(Ce){return Ft.nodesLabelMap.has(Ce)},this.checkCompound=function(){if(!Ft.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(Ce){if(Ft.isCompound()){var Ue,Xe=(Ue=Ft.parentMap)===null||Ue===void 0?void 0:Ue.get(Ce);if(Xe!==Ft.GRAPH_NODE)return Xe}},this.removeFromParentsChildList=function(Ce){var Ue=Ft.parentMap.get(Ce);Ft.childrenMap.get(Ue).delete(Ce)},this.setParent=function(Ce,Ue){var Xe,Wr;Ft.checkCompound();for(var $r=Ue===void 0?Ft.GRAPH_NODE:Ue,mn=Ft.parent($r);mn;){if(Ce===mn)throw new Error("Setting "+Ue+" as parent of "+Ce+" would create a cycle");mn=Ft.parent(mn)}Ue&&Ft.setNode(Ue),Ft.setNode(Ce),Ft.removeFromParentsChildList(Ce),(Xe=Ft.parentMap)===null||Xe===void 0||Xe.set(Ce,$r);var Nn=Ft.childrenMap.get($r);return Nn.set(Ce,!0),(Wr=Ft.childrenMap)===null||Wr===void 0||Wr.set($r,Nn),Ft},this.children=function(Ce){var Ue=Ce===void 0?Ft.GRAPH_NODE:Ce;if(Ft.isCompound()){var Xe,Wr=(Xe=Ft.childrenMap)===null||Xe===void 0?void 0:Xe.get(Ue);return Wr?Array.from(Wr.keys()):void 0}if(Ue===Ft.GRAPH_NODE)return Ft.nodes();if(Ce&&Ft.hasNode(Ce))return[]},this.predecessors=function(Ce){var Ue=Ft.predecessorsMap.get(Ce);return Ue?Array.from(Ue.keys()):void 0},this.successors=function(Ce){var Ue=Ft.successorsMap.get(Ce);return Ue?Array.from(Ue.keys()):void 0},this.neighbors=function(Ce){var Ue;if(Ft.hasNode(Ce))return Array.from(new Set((Ue=Ft.predecessors(Ce))===null||Ue===void 0?void 0:Ue.concat(Ft.successors(Ce))))},this.isLeaf=function(Ce){var Ue;if(Ft.isDirected()){var Xe;return!(!((Xe=Ft.successors(Ce))===null||Xe===void 0)&&Xe.length)}return!(!((Ue=Ft.neighbors(Ce))===null||Ue===void 0)&&Ue.length)},this.filterNodes=function(Ce){var Ue=Ft.directed,Xe=Ft.multigraph,Wr=Ft.compound,$r=new me({directed:Ue,multigraph:Xe,compound:Wr});if($r.setGraph(Ft.graph()),Ft.nodes().forEach(function(Nn){Ce(Nn)&&$r.setNode(Nn,Ft.node(Nn))}),Ft.edges().forEach(function(Nn){$r.hasNode(Nn.v)&&$r.hasNode(Nn.w)&&$r.setEdgeObj(Nn,Ft.edge(Nn))}),Wr){var mn=function(kn){for(var Jn=Ft.parent(kn);Jn!==void 0&&!$r.hasNode(Jn);)Jn=Ft.parent(Jn);return Jn};$r.nodes().forEach(function(Nn){$r.setParent(Nn,mn(Nn))})}return $r},this.setDefaultEdgeLabel=function(Ce){return g(Ce)?Ft.defaultEdgeLabelFn=Ce:Ft.defaultEdgeLabelFn=function(){return Ce},Ft},this.edgeCount=function(){return Ft.edgeCountNum},this.setEdgeObj=function(Ce,Ue){return Ft.setEdge(Ce.v,Ce.w,Ue,Ce.name)},this.setPath=function(Ce,Ue){return Ce.reduce(function(Xe,Wr){return Ft.setEdge(Xe,Wr,Ue),Wr}),Ft},this.edgeFromArgs=function(Ce,Ue,Xe){return Ft.edge({v:Ce,w:Ue,name:Xe})},this.edge=function(Ce){return Ft.edgesLabelsMap.get(p(Ft.isDirected(),Ce))},this.hasEdge=function(Ce,Ue,Xe){return Ft.edgesLabelsMap.has(p(Ft.isDirected(),{v:Ce,w:Ue,name:Xe}))},this.removeEdgeObj=function(Ce){var Ue=Ce.v,Xe=Ce.w,Wr=Ce.name;return Ft.removeEdge(Ue,Xe,Wr)},this.edges=function(){return Array.from(Ft.edgesMap.values())},this.inEdges=function(Ce,Ue){var Xe=Ft.inEdgesMap.get(Ce);if(Xe)return Array.from(Xe.values()).filter(function(Wr){return!Ue||Wr.v===Ue})},this.outEdges=function(Ce,Ue){var Xe=Ft.outEdgesMap.get(Ce);if(Xe)return Array.from(Xe.values()).filter(function(Wr){return!Ue||Wr.w===Ue})},this.nodeEdges=function(Ce,Ue){var Xe;if(Ft.hasNode(Ce))return(Xe=Ft.inEdges(Ce,Ue))===null||Xe===void 0?void 0:Xe.concat(Ft.outEdges(Ce,Ue))},this.toJSON=function(){return C(Ft)},this.nodeInDegree=function(Ce){var Ue=Ft.inEdgesMap.get(Ce);return Ue?Ue.size:0},this.nodeOutDegree=function(Ce){var Ue=Ft.outEdgesMap.get(Ce);return Ue?Ue.size:0},this.nodeDegree=function(Ce){return Ft.nodeInDegree(Ce)+Ft.nodeOutDegree(Ce)},this.source=function(Ce){return Ce.v},this.target=function(Ce){return Ce.w};var Ie=l(l({},U),ne);this.compound=Ie.compound,this.directed=Ie.directed,this.multigraph=Ie.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return W(me,[{key:"setNode",value:function(ne,Ie){var Ce=this.nodesLabelMap,Ue=this.defaultNodeLabelFn,Xe=this.isCompound,Wr=this.parentMap,$r=this.childrenMap,mn=this.inEdgesMap,Nn=this.outEdgesMap,kn=this.predecessorsMap,Jn=this.successorsMap;if(Ce.has(ne))return Ie!==void 0&&Ce.set(ne,Ie),this;if(Ce.set(ne,Ie||Ue(ne)),Xe()){var ri;Wr==null||Wr.set(ne,this.GRAPH_NODE),$r==null||$r.set(ne,new Map),$r!=null&&$r.has(this.GRAPH_NODE)||$r==null||$r.set(this.GRAPH_NODE,new Map),$r==null||(ri=$r.get(this.GRAPH_NODE))===null||ri===void 0||ri.set(ne,!0)}return[mn,Nn,kn,Jn].forEach(function(Ri){return Ri.set(ne,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(ne){var Ie=this;if(this.hasNode(ne)){var Ce=function(Ki){Ie.removeEdge(Ki.v,Ki.w,Ki.name)},Ue=this.inEdgesMap,Xe=this.outEdgesMap,Wr=this.predecessorsMap,$r=this.successorsMap,mn=this.nodesLabelMap;if(this.isCompound()){var Nn,kn,Jn;this.removeFromParentsChildList(ne),(Nn=this.parentMap)===null||Nn===void 0||Nn.delete(ne),(kn=this.children(ne))===null||kn===void 0||kn.forEach(function(di){return Ie.setParent(di)}),(Jn=this.childrenMap)===null||Jn===void 0||Jn.delete(ne)}var ri=Ue.get(ne),Ri=Xe.get(ne);Array.from(ri.values()).forEach(function(di){return Ce(di)}),Array.from(Ri.values()).forEach(function(di){return Ce(di)}),mn.delete(ne),Ue.delete(ne),Xe.delete(ne),Wr.delete(ne),$r.delete(ne),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(ne,Ie,Ce,Ue){var Xe,Wr,$r=v(this.isDirected(),ne,Ie,Ue),mn=p(this.isDirected(),$r),Nn=$r.v,kn=$r.w;if(this.edgesLabelsMap.has(mn))return this.edgesLabelsMap.set(mn,Ce),this;if(Ue!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(Nn),this.setNode(kn),this.edgesLabelsMap.set(mn,Ce||this.defaultEdgeLabelFn(Nn,kn,Ue)),Object.freeze($r),this.edgesMap.set(mn,$r);var Jn=this.predecessorsMap.get(kn),ri=this.successorsMap.get(Nn);return T(Jn,Nn),T(ri,kn),(Xe=this.inEdgesMap.get(kn))===null||Xe===void 0||Xe.set(mn,$r),(Wr=this.outEdgesMap.get(Nn))===null||Wr===void 0||Wr.set(mn,$r),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(ne,Ie,Ce){var Ue=y(this.isDirected(),ne,Ie,Ce),Xe=this.edgesMap.get(Ue);if(Xe){var Wr=v(this.isDirected(),ne,Ie,Ce),$r=Wr.v,mn=Wr.w;this.edgesLabelsMap.delete(Ue),this.edgesMap.delete(Ue);var Nn=this.predecessorsMap.get(mn),kn=this.successorsMap.get($r);m(Nn,$r),m(kn,mn),this.inEdgesMap.get(mn).delete(Ue),this.outEdgesMap.get($r).delete(Ue),this.edgeCountNum-=1}return this}}]),me}();et.fromJSON=O;function at(me){return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ft){return typeof Ft}:function(Ft){return Ft&&typeof Symbol=="function"&&Ft.constructor===Symbol&&Ft!==Symbol.prototype?"symbol":typeof Ft},at(me)}function J(me,Ft){if(!(me instanceof Ft))throw new TypeError("Cannot call a class as a function")}function nt(me,Ft){for(var ne=0;ne<Ft.length;ne++){var Ie=Ft[ne];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(me,Ie.key,Ie)}}function mt(me,Ft,ne){return Ft&&nt(me.prototype,Ft),ne&&nt(me,ne),Object.defineProperty(me,"prototype",{writable:!1}),me}function Mt(){return typeof Reflect!="undefined"&&Reflect.get?Mt=Reflect.get:Mt=function(Ft,ne,Ie){var Ce=vt(Ft,ne);if(Ce){var Ue=Object.getOwnPropertyDescriptor(Ce,ne);return Ue.get?Ue.get.call(arguments.length<3?Ft:Ie):Ue.value}},Mt.apply(this,arguments)}function vt(me,Ft){for(;!Object.prototype.hasOwnProperty.call(me,Ft)&&(me=Vt(me),me!==null););return me}function zt(me,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),Ft&&re(me,Ft)}function re(me,Ft){return re=Object.setPrototypeOf||function(Ie,Ce){return Ie.__proto__=Ce,Ie},re(me,Ft)}function Rt(me){var Ft=gt();return function(){var Ie=Vt(me),Ce;if(Ft){var Ue=Vt(this).constructor;Ce=Reflect.construct(Ie,arguments,Ue)}else Ce=Ie.apply(this,arguments);return At(this,Ce)}}function At(me,Ft){if(Ft&&(at(Ft)==="object"||typeof Ft=="function"))return Ft;if(Ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q(me)}function Q(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function gt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(me){return!1}}function Vt(me){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},Vt(me)}var Ht=function(me){zt(ne,me);var Ft=Rt(ne);function ne(){var Ie;J(this,ne);for(var Ce=arguments.length,Ue=new Array(Ce),Xe=0;Xe<Ce;Xe++)Ue[Xe]=arguments[Xe];return Ie=Ft.call.apply(Ft,[this].concat(Ue)),Ie.eventPool={},Ie}return mt(ne,[{key:"appendEvent",value:function(Ce,Ue){this.eventPool[Ce]||(this.eventPool[Ce]=[]),this.eventPool[Ce].push(Ue)}},{key:"removeEvent",value:function(Ce,Ue){if(this.eventPool[Ce]){var Xe=this.eventPool[Ce].indexOf(Ue);Xe>-1&&this.eventPool[Ce].splice(Xe,1)}}},{key:"emitEvent",value:function(Ce){for(var Ue=arguments.length,Xe=new Array(Ue>1?Ue-1:0),Wr=1;Wr<Ue;Wr++)Xe[Wr-1]=arguments[Wr];this.eventPool[Ce]&&this.eventPool[Ce].forEach(function($r){$r.apply(void 0,Xe)})}},{key:"setNode",value:function(Ce,Ue){return Mt(Vt(ne.prototype),"setNode",this).call(this,Ce,Ue),this.emitEvent("nodeAdd",Ce,Ue),this}},{key:"removeNode",value:function(Ce){return Mt(Vt(ne.prototype),"removeNode",this).call(this,Ce),this.emitEvent("nodeRemove",Ce),this}},{key:"setEdge",value:function(Ce,Ue,Xe,Wr){return Mt(Vt(ne.prototype),"setEdge",this).call(this,Ce,Ue,Xe,Wr),this.emitEvent("edgeAdd",Ce,Ue,Xe,Wr),this}},{key:"removeEdge",value:function(Ce,Ue,Xe){return Mt(Vt(ne.prototype),"removeEdge",this).call(this,Ce,Ue,Xe),this.emitEvent("edgeRemove",Ce,Ue,Xe),this}}]),ne}(et);function It(me,Ft){for(var ne=0;ne<Ft.length;ne++){var Ie=Ft[ne];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(me,Ie.key,Ie)}}function de(me,Ft,ne){return Ft&&It(me.prototype,Ft),ne&&It(me,ne),Object.defineProperty(me,"prototype",{writable:!1}),me}function De(me,Ft){if(!(me instanceof Ft))throw new TypeError("Cannot call a class as a function")}var Ye=de(function me(){var Ft=this;De(this,me),this.arr=[],this.keyIndice=new Map,this.size=function(){return Ft.arr.length},this.keys=function(){return Ft.arr.map(function(ne){return ne.key})},this.has=function(ne){return Ft.keyIndice.has(ne)},this.priority=function(ne){var Ie=Ft.keyIndice.get(ne);if(Ie!==void 0)return Ft.arr[Ie].priority},this.swap=function(ne,Ie){var Ce=Ft.arr,Ue=Ft.keyIndice,Xe=[Ce[ne],Ce[Ie]],Wr=Xe[0],$r=Xe[1];Ce[ne]=$r,Ce[Ie]=Wr,Ue.set(Wr.key,Ie),Ue.set($r.key,ne)},this.innerDecrease=function(ne){for(var Ie=Ft.arr,Ce=Ie[ne].priority,Ue,Xe=ne;Xe!==0;){var Wr;if(Ue=Xe>>1,((Wr=Ie[Ue])===null||Wr===void 0?void 0:Wr.priority)<Ce)break;Ft.swap(Xe,Ue),Xe=Ue}},this.heapify=function(ne){var Ie=Ft.arr,Ce=ne<<1,Ue=Ce+1,Xe=ne;Ce<Ie.length&&(Xe=Ie[Ce].priority<Ie[Xe].priority?Ce:Xe,Ue<Ie.length&&(Xe=Ie[Ue].priority<Ie[Xe].priority?Ue:Xe),Xe!==ne&&(Ft.swap(ne,Xe),Ft.heapify(Xe)))},this.min=function(){if(Ft.size()===0)throw new Error("Queue underflow");return Ft.arr[0].key},this.add=function(ne,Ie){var Ce=Ft.keyIndice,Ue=Ft.arr;if(!Ce.has(ne)){var Xe=Ue.length;return Ce.set(ne,Xe),Ue.push({key:ne,priority:Ie}),Ft.innerDecrease(Xe),!0}return!1},this.removeMin=function(){Ft.swap(0,Ft.arr.length-1);var ne=Ft.arr.pop();return Ft.keyIndice.delete(ne.key),Ft.heapify(0),ne.key},this.decrease=function(ne,Ie){if(!Ft.has(ne))throw new Error("There's no key named ".concat(ne));var Ce=Ft.keyIndice.get(ne);if(Ie>Ft.arr[Ce].priority)throw new Error("New priority is greater than current priority.Key: ".concat(ne," Old: + ").concat(Ft.arr[Ce].priority," New: ").concat(Ie));Ft.arr[Ce].priority=Ie,Ft.innerDecrease(Ce)}}),kt=function(Ft,ne){var Ie=new et,Ce=new Map,Ue=new Ye,Xe;function Wr(Nn){var kn=Nn.v===Xe?Nn.w:Nn.v,Jn=Ue.priority(kn);if(Jn!==void 0){var ri=ne(Nn);ri<Jn&&(Ce.set(kn,Xe),Ue.decrease(kn,ri))}}if(Ft.nodeCount()===0)return Ie;Ft.nodes().forEach(function(Nn){Ue.add(Nn,Number.POSITIVE_INFINITY),Ie.setNode(Nn)}),Ue.decrease(Ft.nodes()[0],0);for(var $r=!1;Ue.size()>0;){var mn;if(Xe=Ue.removeMin(),Ce.has(Xe))Ie.setEdge(Xe,Ce.get(Xe));else{if($r)throw new Error("Input graph is not connected: "+Ft.graph());$r=!0}(mn=Ft.nodeEdges(Xe))===null||mn===void 0||mn.forEach(Wr)}return Ie},Pt=kt,_t=function(Ft){var ne=new Set,Ie=[],Ce=Ft.nodes();return Ce.forEach(function(Ue){for(var Xe=[],Wr=[Ue];Wr.length>0;){var $r=Wr.pop();if(!ne.has($r)){var mn,Nn;ne.add($r),Xe.push($r),(mn=Ft.successors($r))===null||mn===void 0||mn.forEach(function(kn){return Wr.push(kn)}),(Nn=Ft.predecessors($r))===null||Nn===void 0||Nn.forEach(function(kn){return Wr.push(kn)})}}Xe.length&&Ie.push(Xe)}),Ie},jt=_t,Qt=function me(Ft,ne,Ie,Ce,Ue,Xe){Ce.includes(ne)||(Ce.push(ne),Ie||Xe.push(ne),Ue(ne).forEach(function(Wr){return me(Ft,Wr,Ie,Ce,Ue,Xe)}),Ie&&Xe.push(ne))},Tt=function(Ft,ne,Ie){var Ce=Array.isArray(ne)?ne:[ne],Ue=function(mn){return Ft.isDirected()?Ft.successors(mn):Ft.neighbors(mn)},Xe=[],Wr=[];return Ce.forEach(function($r){if(Ft.hasNode($r))Qt(Ft,$r,Ie==="post",Wr,Ue,Xe);else throw new Error("Graph does not have node: "+$r)}),Xe},Zt=Tt;function Ee(me,Ft){return rt(me)||D(me,Ft)||bt(me,Ft)||dt()}function dt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(me,Ft){if(me){if(typeof me=="string")return wt(me,Ft);var ne=Object.prototype.toString.call(me).slice(8,-1);if(ne==="Object"&&me.constructor&&(ne=me.constructor.name),ne==="Map"||ne==="Set")return Array.from(me);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return wt(me,Ft)}}function wt(me,Ft){(Ft==null||Ft>me.length)&&(Ft=me.length);for(var ne=0,Ie=new Array(Ft);ne<Ft;ne++)Ie[ne]=me[ne];return Ie}function D(me,Ft){var ne=me==null?null:typeof Symbol!="undefined"&&me[Symbol.iterator]||me["@@iterator"];if(ne!=null){var Ie=[],Ce=!0,Ue=!1,Xe,Wr;try{for(ne=ne.call(me);!(Ce=(Xe=ne.next()).done)&&(Ie.push(Xe.value),!(Ft&&Ie.length===Ft));Ce=!0);}catch($r){Ue=!0,Wr=$r}finally{try{!Ce&&ne.return!=null&&ne.return()}finally{if(Ue)throw Wr}}return Ie}}function rt(me){if(Array.isArray(me))return me}var Nt=function(){return 1},ft=function(Ft,ne,Ie,Ce){return ie(Ft,ne,Ie||Nt,Ce||function(Ue){return Ft.outEdges(Ue)})},ie=function(Ft,ne,Ie,Ce){var Ue=new Map,Xe=new Ye,Wr,$r,mn=function(Jn){var ri=Jn.v!==Wr?Jn.v:Jn.w,Ri=Ue.get(ri),di=Ie(Jn),Ki=$r.distance+di;if(di<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Jn+" Weight: "+di);Ki<Ri.distance&&(Ri.distance=Ki,Ri.predecessor=Wr,Xe.decrease(ri,Ki))};for(Ft.nodes().forEach(function(kn){var Jn=kn===ne?0:Number.POSITIVE_INFINITY;Ue.set(kn,{distance:Jn}),Xe.add(kn,Jn)});Xe.size()>0&&(Wr=Xe.removeMin(),$r=Ue.get(Wr),!($r&&$r.distance===Number.POSITIVE_INFINITY));)Ce(Wr).forEach(mn);var Nn={};return Array.from(Ue.entries()).forEach(function(kn){var Jn=Ee(kn,2),ri=Jn[0],Ri=Jn[1];return Nn[String(ri)]=Ri,Nn}),Nn},ge=ft,Ge=function(Ft,ne,Ie){var Ce={};return Ft.nodes().forEach(function(Ue){return Ce[String(Ue)]=ge(Ft,Ue,ne,Ie),Ce}),Ce},Re=Ge,qe=function(Ft){var ne=0,Ie=[],Ce=new Map,Ue=[];function Xe(Wr){var $r,mn={onStack:!0,lowlink:ne,index:ne};if(Ce.set(Wr,mn),ne+=1,Ie.push(Wr),($r=Ft.successors(Wr))===null||$r===void 0||$r.forEach(function(ri){var Ri;if(Ce.has(ri)){if(!((Ri=Ce.get(ri))===null||Ri===void 0)&&Ri.onStack){var Ki=Ce.get(ri);mn.lowlink=Math.min(mn.lowlink,Ki.index)}}else{Xe(ri);var di=Ce.get(ri);mn.lowlink=Math.min(mn.lowlink,di.lowlink)}}),mn.lowlink===mn.index){var Nn=[],kn;do{kn=Ie.pop();var Jn=Ce.get(kn);Jn.onStack=!1,Nn.push(kn)}while(Wr!==kn);Ue.push(Nn)}}return Ft.nodes().forEach(function(Wr){Ce.has(Wr)||Xe(Wr)}),Ue},Ve=qe,le=function(Ft){return Ve(Ft).filter(function(ne){return ne.length>1||ne.length===1&&Ft.hasEdge(ne[0],ne[0])})},Le=le;function je(me){return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ft){return typeof Ft}:function(Ft){return Ft&&typeof Symbol=="function"&&Ft.constructor===Symbol&&Ft!==Symbol.prototype?"symbol":typeof Ft},je(me)}function Be(me,Ft){for(var ne=0;ne<Ft.length;ne++){var Ie=Ft[ne];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(me,Ie.key,Ie)}}function vr(me,Ft,ne){return Ft&&Be(me.prototype,Ft),ne&&Be(me,ne),Object.defineProperty(me,"prototype",{writable:!1}),me}function or(me,Ft){if(!(me instanceof Ft))throw new TypeError("Cannot call a class as a function")}function Ae(me,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),Ft&&nn(me,Ft)}function yr(me){var Ft=hn();return function(){var Ie=vn(me),Ce;if(Ft){var Ue=vn(this).constructor;Ce=Reflect.construct(Ie,arguments,Ue)}else Ce=Ie.apply(this,arguments);return Cr(this,Ce)}}function Cr(me,Ft){if(Ft&&(je(Ft)==="object"||typeof Ft=="function"))return Ft;if(Ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zr(me)}function zr(me){if(me===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me}function Mr(me){var Ft=typeof Map=="function"?new Map:void 0;return Mr=function(Ie){if(Ie===null||!Un(Ie))return Ie;if(typeof Ie!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ft!="undefined"){if(Ft.has(Ie))return Ft.get(Ie);Ft.set(Ie,Ce)}function Ce(){return un(Ie,arguments,vn(this).constructor)}return Ce.prototype=Object.create(Ie.prototype,{constructor:{value:Ce,enumerable:!1,writable:!0,configurable:!0}}),nn(Ce,Ie)},Mr(me)}function un(me,Ft,ne){return hn()?un=Reflect.construct:un=function(Ce,Ue,Xe){var Wr=[null];Wr.push.apply(Wr,Ue);var $r=Function.bind.apply(Ce,Wr),mn=new $r;return Xe&&nn(mn,Xe.prototype),mn},un.apply(null,arguments)}function hn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(me){return!1}}function Un(me){return Function.toString.call(me).indexOf("[native code]")!==-1}function nn(me,Ft){return nn=Object.setPrototypeOf||function(Ie,Ce){return Ie.__proto__=Ce,Ie},nn(me,Ft)}function vn(me){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},vn(me)}var ln=function(me){Ae(ne,me);var Ft=yr(ne);function ne(){return or(this,ne),Ft.apply(this,arguments)}return vr(ne)}(Mr(Error));function pn(me){var Ft=new Set,ne=new Set,Ie=[];function Ce(Ue){if(ne.has(Ue))throw new ln;if(!Ft.has(Ue)){var Xe;ne.add(Ue),Ft.add(Ue),(Xe=me.predecessors(Ue))===null||Xe===void 0||Xe.forEach(Ce),ne.delete(Ue),Ie.push(Ue)}}if(me.sinks().forEach(Ce),Ft.size!==me.nodeCount())throw new ln;return Ie}var Bn=pn,Pe=function(Ft){try{Bn(Ft)}catch(ne){if(ne instanceof ln)return!1;throw ne}return!0},Cn=Pe,Gn=function(Ft,ne){return Zt(Ft,ne,"post")},bi=Gn,zn=function(Ft,ne){return Zt(Ft,ne,"pre")},Hn=zn,hi=function(){return 1};function Si(me,Ft,ne){return pi(me,Ft||hi,ne||function(Ie){return me.outEdges(Ie)})}function pi(me,Ft,ne){var Ie={},Ce=me.nodes();return Ce.forEach(function(Ue){var Xe=String(Ue);Ie[Xe]={},Ie[Xe][Xe]={distance:0},Ce.forEach(function(Wr){Ue!==Wr&&(Ie[Xe][String(Wr)]={distance:Number.POSITIVE_INFINITY})}),ne(Ue).forEach(function(Wr){var $r=Wr.v===Ue?Wr.w:Wr.v,mn=Ft(Wr);Ie[Xe][String($r)]={distance:mn,predecessor:Ue}})}),Ce.forEach(function(Ue){var Xe=String(Ue),Wr=Ie[Xe];Ce.forEach(function($r){var mn=String($r),Nn=Ie[mn];Ce.forEach(function(kn){var Jn=String(kn),ri=Nn[Xe],Ri=Wr[Jn],di=Nn[Jn],Ki=ri.distance+Ri.distance;Ki<di.distance&&(di.distance=Ki,di.predecessor=Ri.predecessor)})})}),Ie}var Dt=Si,Lt=function(Ft,ne){for(var Ie=Ft.nodes(),Ce=0;Ce<Ie.length;Ce++){var Ue=Ie[Ce];if(ne.hasNode(Ue))return!0}return!1},H=function(Ft,ne){for(var Ie=Ft.edges(),Ce=0;Ce<Ie.length;Ce++){var Ue=Ie[Ce];if(ne.hasEdge(Ue.v,Ue.w,Ue.name))return!0}return!1},G=function(Ft,ne){var Ie=Ft.nodes(),Ce=Ie.filter(function(Ue){return ne.hasNode(Ue)});return Ce},F=function(Ft,ne){var Ie=Ft.edges(),Ce=Ie.filter(function(Ue){return ne.hasEdge(Ue.v,Ue.w,Ue.name)});return Ce},st=function(Ft,ne){return Ft.isCompound()===ne.isCompound()&&Ft.isDirected()===ne.isDirected()&&Ft.isMultigraph()===ne.isMultigraph()},Bt=function(Ft,ne){var Ie=G(Ft,ne);return Ie.length===Ft.nodes().length},Kt=function(Ft,ne){var Ie=F(Ft,ne);return Ie.length===Ft.edges().length},Yt=function(Ft,ne){return st(Ft,ne)&&Ft.nodeCount()===ne.nodeCount()&&Bt(Ft,ne)&&Ft.edgeCount()===ne.edgeCount()&&Kt(Ft,ne)},he=function(Ft,ne){return Bt(Ft,ne)&&Kt(Ft,ne)};function ot(me,Ft){return er(me)||Se(me,Ft)||te(me,Ft)||yt()}function yt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(me,Ft){if(me){if(typeof me=="string")return Me(me,Ft);var ne=Object.prototype.toString.call(me).slice(8,-1);if(ne==="Object"&&me.constructor&&(ne=me.constructor.name),ne==="Map"||ne==="Set")return Array.from(me);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return Me(me,Ft)}}function Me(me,Ft){(Ft==null||Ft>me.length)&&(Ft=me.length);for(var ne=0,Ie=new Array(Ft);ne<Ft;ne++)Ie[ne]=me[ne];return Ie}function Se(me,Ft){var ne=me==null?null:typeof Symbol!="undefined"&&me[Symbol.iterator]||me["@@iterator"];if(ne!=null){var Ie=[],Ce=!0,Ue=!1,Xe,Wr;try{for(ne=ne.call(me);!(Ce=(Xe=ne.next()).done)&&(Ie.push(Xe.value),!(Ft&&Ie.length===Ft));Ce=!0);}catch($r){Ue=!0,Wr=$r}finally{try{!Ce&&ne.return!=null&&ne.return()}finally{if(Ue)throw Wr}}return Ie}}function er(me){if(Array.isArray(me))return me}function sr(me){return me instanceof et}function ye(me){if(me.isMultigraph())return!1;for(var Ft=me.edges(),ne=new Map,Ie=0;Ie<Ft.length;Ie++){var Ce=Ft[Ie];if(Ce.v===Ce.w)return!1;var Ue=[Ce.v,Ce.w].sort(),Xe=ot(Ue,2),Wr=Xe[0],$r=Xe[1],mn="".concat(Wr,"-").concat($r);if(ne.has(mn))return!1;ne.set(mn,!0)}return!0}function Fe(me){return me.nodes().length===0}function tr(me){for(var Ft=me.edges(),ne=0;ne<Ft.length;ne++){var Ie=Ft[ne];if(Ie.v===Ie.w)return!0}return!1}var Sr=function(Ft,ne){if(!ye(Ft)||!ye(ne)||!Bt(Ft,ne)||H(Ft,ne))return!1;var Ie=Ft.nodeCount();return Ft.edgeCount()+ne.edgeCount()===Ie*(Ie-1)/2},Er=function(Ft){if(!ye(Ft))return null;for(var ne=Ft.nodeCount(),Ie=new et({compound:Ft.isCompound(),directed:Ft.isDirected(),multigraph:Ft.isMultigraph()}),Ce=Ft.nodes(),Ue=0;Ue<ne;Ue++){var Xe=Ce[Ue];Ie.setNode(Xe,Ft.node(Xe));for(var Wr=Ue+1;Wr<ne;Wr++){var $r=Ce[Wr];Ft.hasEdge(Xe,$r)||Ie.setEdge(Xe,$r)}}return Ie}},13389:function(ae){(function(S,x){ae.exports=x()})(typeof self!="undefined"?self:this,function(){return function(w){var S={};function x(z){if(S[z])return S[z].exports;var k=S[z]={i:z,l:!1,exports:{}};return w[z].call(k.exports,k,k.exports,x),k.l=!0,k.exports}return x.m=w,x.c=S,x.d=function(z,k,E){x.o(z,k)||Object.defineProperty(z,k,{configurable:!1,enumerable:!0,get:E})},x.n=function(z){var k=z&&z.__esModule?function(){return z.default}:function(){return z};return x.d(k,"a",k),k},x.o=function(z,k){return Object.prototype.hasOwnProperty.call(z,k)},x.p="",x(x.s=36)}([function(w,S,x){"use strict";var z=x(3);S.a=function(k){return Array.isArray?Array.isArray(k):Object(z.a)(k,"Array")}},function(w,S,x){"use strict";var z=function(k){return k!==null&&typeof k!="function"&&isFinite(k.length)};S.a=z},function(w,S,x){"use strict";var z=x(3);S.a=function(k){return Object(z.a)(k,"Function")}},function(w,S,x){"use strict";var z={}.toString,k=function(E,N){return z.call(E)==="[object "+N+"]"};S.a=k},function(w,S,x){"use strict";var z=x(3);S.a=function(k){return Object(z.a)(k,"String")}},function(w,S,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Number")};S.a=k},function(w,S,x){var z=x(38),k=z.mix;function E(N,T,m,y){return y===void 0&&(y="height"),m==="center"?(N[y]+T[y])/2:N.height}w.exports={assign:k,getHeight:E}},function(w,S,x){"use strict";var z=function(k){return k==null};S.a=z},function(w,S,x){"use strict";var z=x(0),k=x(12);function E(N,T){if(N){var m;if(Object(z.a)(N))for(var y=0,v=N.length;y<v&&(m=T(N[y],y),m!==!1);y++);else if(Object(k.a)(N)){for(var p in N)if(N.hasOwnProperty(p)&&(m=T(N[p],p),m===!1))break}}}S.a=E},function(w,S,x){"use strict";var z=x(7);S.a=function(k){return Object(z.a)(k)?"":k.toString()}},function(w,S,x){"use strict";var z=x(14),k=x(3),E=function(N){if(!Object(z.a)(N)||!Object(k.a)(N,"Object"))return!1;if(Object.getPrototypeOf(N)===null)return!0;for(var T=N;Object.getPrototypeOf(T)!==null;)T=Object.getPrototypeOf(T);return Object.getPrototypeOf(N)===T};S.a=E},function(w,S,x){var z=x(18),k=function(){function E(T,m){m===void 0&&(m={});var y=this;y.options=m,y.rootNode=z(T,m)}var N=E.prototype;return N.execute=function(){throw new Error("please override this method")},E}();w.exports=k},function(w,S,x){"use strict";S.a=function(z){var k=typeof z;return z!==null&&k==="object"||k==="function"}},function(w,S,x){"use strict";var z=x(1),k=function(E,N){return Object(z.a)(E)?E.indexOf(N)>-1:!1};S.a=k},function(w,S,x){"use strict";var z=function(k){return typeof k=="object"&&k!==null};S.a=z},function(w,S,x){"use strict";var z=x(8),k=x(2),E=Object.values?function(N){return Object.values(N)}:function(N){var T=[];return Object(z.a)(N,function(m,y){Object(k.a)(N)&&y==="prototype"||T.push(m)}),T};S.a=E},function(w,S,x){"use strict";S.a=k;function z(E,N){for(var T in N)N.hasOwnProperty(T)&&T!=="constructor"&&N[T]!==void 0&&(E[T]=N[T])}function k(E,N,T,m){return N&&z(E,N),T&&z(E,T),m&&z(E,m),E}},function(w,S,x){var z=x(35),k=["LR","RL","TB","BT","H","V"],E=["LR","RL","H"],N=function(y){return E.indexOf(y)>-1},T=k[0];w.exports=function(m,y,v){var p=y.direction||T;if(y.isHorizontal=N(p),p&&k.indexOf(p)===-1)throw new TypeError("Invalid direction: "+p);if(p===k[0])v(m,y);else if(p===k[1])v(m,y),m.right2left();else if(p===k[2])v(m,y);else if(p===k[3])v(m,y),m.bottom2top();else if(p===k[4]||p===k[5]){var g=z(m,y),I=g.left,_=g.right;v(I,y),v(_,y),y.isHorizontal?I.right2left():I.bottom2top(),_.translate(I.x-_.x,I.y-_.y),m.x=I.x,m.y=_.y;var C=m.getBoundingBox();y.isHorizontal?C.top<0&&m.translate(0,-C.top):C.left<0&&m.translate(-C.left,0)}var O=y.fixedRoot;return O===void 0&&(O=!0),O&&m.translate(-(m.x+m.width/2+m.hgap),-(m.y+m.height/2+m.vgap)),m}},function(w,S,x){var z=x(6),k=18,E=k*2,N=k,T={getId:function(p){return p.id||p.name},getPreH:function(p){return p.preH||0},getPreV:function(p){return p.preV||0},getHGap:function(p){return p.hgap||N},getVGap:function(p){return p.vgap||N},getChildren:function(p){return p.children},getHeight:function(p){return p.height||E},getWidth:function(p){var g=p.label||" ";return p.width||g.split("").length*k}};function m(v,p){var g=this;if(g.vgap=g.hgap=0,v instanceof m)return v;g.data=v;var I=p.getHGap(v),_=p.getVGap(v);return g.preH=p.getPreH(v),g.preV=p.getPreV(v),g.width=p.getWidth(v),g.height=p.getHeight(v),g.width+=g.preH,g.height+=g.preV,g.id=p.getId(v),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(I,_),g}z.assign(m.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(p,g){var I=this;I.hgap+=p,I.vgap+=g,I.width+=2*p,I.height+=2*g},eachNode:function(p){for(var g=this,I=[g],_;_=I.shift();)p(_),I=_.children.concat(I)},DFTraverse:function(p){this.eachNode(p)},BFTraverse:function(p){for(var g=this,I=[g],_;_=I.shift();)p(_),I=I.concat(_.children)},getBoundingBox:function(){var p={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){p.left=Math.min(p.left,g.x),p.top=Math.min(p.top,g.y),p.width=Math.max(p.width,g.x+g.width),p.height=Math.max(p.height,g.y+g.height)}),p},translate:function(p,g){p===void 0&&(p=0),g===void 0&&(g=0),this.eachNode(function(I){I.x+=p,I.y+=g,I.x+=I.preH,I.y+=I.preV})},right2left:function(){var p=this,g=p.getBoundingBox();p.eachNode(function(I){I.x=I.x-(I.x-g.left)*2-I.width}),p.translate(g.width,0)},bottom2top:function(){var p=this,g=p.getBoundingBox();p.eachNode(function(I){I.y=I.y-(I.y-g.top)*2-I.height}),p.translate(0,g.height)}});function y(v,p,g){p===void 0&&(p={}),p=z.assign({},T,p);var I=new m(v,p),_=[I],C;if(!g&&!v.collapsed){for(;C=_.shift();)if(!C.data.collapsed){var O=p.getChildren(C.data),b=O?O.length:0;if(C.children=new Array(b),O&&b)for(var l=0;l<b;l++){var K=new m(O[l],p);C.children[l]=K,_.push(K),K.parent=C,K.depth=C.depth+1}}}return I}w.exports=y},function(w,S,x){"use strict";var z=x(1),k=function(E,N){if(!Object(z.a)(E))return E;for(var T=[],m=0;m<E.length;m++){var y=E[m];N(y,m)&&T.push(y)}return T};S.a=k},function(w,S,x){"use strict";var z=x(7),k=x(21);function E(N,T){var m=Object(k.a)(T),y=m.length;if(Object(z.a)(N))return!y;for(var v=0;v<y;v+=1){var p=m[v];if(T[p]!==N[p]||!(p in N))return!1}return!0}S.a=E},function(w,S,x){"use strict";var z=x(8),k=x(2),E=Object.keys?function(N){return Object.keys(N)}:function(N){var T=[];return Object(z.a)(N,function(m,y){Object(k.a)(N)&&y==="prototype"||T.push(y)}),T};S.a=E},function(w,S,x){"use strict";var z=x(0);S.a=function(k){if(Object(z.a)(k))return k.reduce(function(E,N){return Math.max(E,N)},k[0])}},function(w,S,x){"use strict";var z=x(0);S.a=function(k){if(Object(z.a)(k))return k.reduce(function(E,N){return Math.min(E,N)},k[0])}},function(w,S,x){"use strict";var z=x(1),k=Array.prototype.splice,E=function(T,m){if(!Object(z.a)(T))return[];for(var y=T?m.length:0,v=y-1;y--;){var p=void 0,g=m[y];(y===v||g!==p)&&(p=g,k.call(T,g,1))}return T};S.a=E},function(w,S,x){"use strict";var z=x(8),k=x(0),E=x(10),N=function(T,m,y){if(!Object(k.a)(T)&&!Object(E.a)(T))return T;var v=y;return Object(z.a)(T,function(p,g){v=m(v,p,g)}),v};S.a=N},function(w,S,x){"use strict";S.a=z;function z(k,E){E===void 0&&(E=new Map);var N=[];if(Array.isArray(k))for(var T=0,m=k.length;T<m;T++){var y=k[T];E.has(y)||(N.push(y),E.set(y,!0))}return N}},function(w,S,x){"use strict";S.a=N;var z=x(0),k=x(2),E=x(28);function N(T,m){if(!m)return{0:T};if(!Object(k.a)(m)){var y=Object(z.a)(m)?m:m.replace(/\s+/g,"").split("*");m=function(v){for(var p="_",g=0,I=y.length;g<I;g++)p+=v[y[g]]&&v[y[g]].toString();return p}}return Object(E.a)(T,m)}},function(w,S,x){"use strict";var z=x(0),k=x(2),E=Object.prototype.hasOwnProperty;function N(T,m){if(!m||!Object(z.a)(T))return{};for(var y={},v=Object(k.a)(m)?m:function(_){return _[m]},p,g=0;g<T.length;g++){var I=T[g];p=v(I),E.call(y,p)?y[p].push(I):y[p]=[I]}return y}S.a=N},function(w,S,x){"use strict";S.a=function(z,k){return z.hasOwnProperty(k)}},function(w,S,x){"use strict";var z={}.toString,k=function(E){return z.call(E).replace(/^\[object /,"").replace(/]$/,"")};S.a=k},function(w,S,x){"use strict";var z=Object.prototype,k=function(E){var N=E&&E.constructor,T=typeof N=="function"&&N.prototype||z;return E===T};S.a=k},function(w,S,x){"use strict";var z=x(2);S.a=function(k,E){if(!Object(z.a)(k))throw new TypeError("Expected a function");var N=function(){for(var T=[],m=0;m<arguments.length;m++)T[m]=arguments[m];var y=E?E.apply(this,T):T[0],v=N.cache;if(v.has(y))return v.get(y);var p=k.apply(this,T);return v.set(y,p),p};return N.cache=new Map,N}},function(w,S,x){"use strict";var z=x(14),k=x(1),E=x(4),N=function(T,m){if(T===m)return!0;if(!T||!m||Object(E.a)(T)||Object(E.a)(m))return!1;if(Object(k.a)(T)||Object(k.a)(m)){if(T.length!==m.length)return!1;for(var y=!0,v=0;v<T.length&&(y=N(T[v],m[v]),!!y);v++);return y}if(Object(z.a)(T)||Object(z.a)(m)){var p=Object.keys(T),g=Object.keys(m);if(p.length!==g.length)return!1;for(var y=!0,v=0;v<p.length&&(y=N(T[p[v]],m[p[v]]),!!y);v++);return y}return!1};S.a=N},function(w,S,x){"use strict";var z=x(116),k=x(15),E=x(32),N=x(4),T;S.a=Object(E.a)(function(m,y){y===void 0&&(y={});var v=y.fontSize,p=y.fontFamily,g=y.fontWeight,I=y.fontStyle,_=y.fontVariant;return T||(T=document.createElement("canvas").getContext("2d")),T.font=[I,_,g,v+"px",p].join(" "),T.measureText(Object(N.a)(m)?m:"").width},function(m,y){return y===void 0&&(y={}),Object(z.a)([m],Object(k.a)(y)).join("")})},function(w,S,x){var z=x(18);w.exports=function(k,E){for(var N=z(k.data,E,!0),T=z(k.data,E,!0),m=k.children.length,y=Math.round(m/2),v=E.getSide||function(_,C){return C<y?"right":"left"},p=0;p<m;p++){var g=k.children[p],I=v(g,p);I==="right"?T.children.push(g):N.children.push(g)}return N.eachNode(function(_){_.isRoot()||(_.side="left")}),T.eachNode(function(_){_.isRoot()||(_.side="right")}),{left:N,right:T}}},function(w,S,x){var z={compactBox:x(37),dendrogram:x(120),indented:x(122),mindmap:x(124)};w.exports=z},function(w,S,x){function z(g,I){g.prototype=Object.create(I.prototype),g.prototype.constructor=g,k(g,I)}function k(g,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,O){return C.__proto__=O,C},k(g,I)}var E=x(11),N=x(119),T=x(17),m=x(6),y=function(g){z(I,g);function I(){return g.apply(this,arguments)||this}var _=I.prototype;return _.execute=function(){var O=this;return T(O.rootNode,O.options,N)},I}(E),v={};function p(g,I){return I=m.assign({},v,I),new y(g,I).execute()}w.exports=p},function(w,S,x){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var z=x(13);x.d(S,"contains",function(){return z.a}),x.d(S,"includes",function(){return z.a});var k=x(39);x.d(S,"difference",function(){return k.a});var E=x(40);x.d(S,"find",function(){return E.a});var N=x(41);x.d(S,"findIndex",function(){return N.a});var T=x(42);x.d(S,"firstValue",function(){return T.a});var m=x(43);x.d(S,"flatten",function(){return m.a});var y=x(44);x.d(S,"flattenDeep",function(){return y.a});var v=x(45);x.d(S,"getRange",function(){return v.a});var p=x(46);x.d(S,"pull",function(){return p.a});var g=x(24);x.d(S,"pullAt",function(){return g.a});var I=x(25);x.d(S,"reduce",function(){return I.a});var _=x(47);x.d(S,"remove",function(){return _.a});var C=x(48);x.d(S,"sortBy",function(){return C.a});var O=x(49);x.d(S,"union",function(){return O.a});var b=x(26);x.d(S,"uniq",function(){return b.a});var l=x(50);x.d(S,"valuesOfKey",function(){return l.a});var K=x(51);x.d(S,"head",function(){return K.a});var Z=x(52);x.d(S,"last",function(){return Z.a});var X=x(53);x.d(S,"startsWith",function(){return X.a});var W=x(54);x.d(S,"endsWith",function(){return W.a});var U=x(19);x.d(S,"filter",function(){return U.a});var et=x(55);x.d(S,"every",function(){return et.a});var at=x(56);x.d(S,"some",function(){return at.a});var J=x(57);x.d(S,"group",function(){return J.a});var nt=x(28);x.d(S,"groupBy",function(){return nt.a});var mt=x(27);x.d(S,"groupToMap",function(){return mt.a});var Mt=x(58);x.d(S,"getWrapBehavior",function(){return Mt.a});var vt=x(59);x.d(S,"wrapBehavior",function(){return vt.a});var zt=x(60);x.d(S,"number2color",function(){return zt.a});var re=x(61);x.d(S,"parseRadius",function(){return re.a});var Rt=x(62);x.d(S,"clamp",function(){return Rt.a});var At=x(63);x.d(S,"fixedBase",function(){return At.a});var Q=x(64);x.d(S,"isDecimal",function(){return Q.a});var gt=x(65);x.d(S,"isEven",function(){return gt.a});var Vt=x(66);x.d(S,"isInteger",function(){return Vt.a});var Ht=x(67);x.d(S,"isNegative",function(){return Ht.a});var It=x(68);x.d(S,"isNumberEqual",function(){return It.a});var de=x(69);x.d(S,"isOdd",function(){return de.a});var De=x(70);x.d(S,"isPositive",function(){return De.a});var Ye=x(22);x.d(S,"max",function(){return Ye.a});var kt=x(71);x.d(S,"maxBy",function(){return kt.a});var Pt=x(23);x.d(S,"min",function(){return Pt.a});var _t=x(72);x.d(S,"minBy",function(){return _t.a});var jt=x(73);x.d(S,"mod",function(){return jt.a});var Qt=x(74);x.d(S,"toDegree",function(){return Qt.a});var Tt=x(75);x.d(S,"toInteger",function(){return Tt.a});var Zt=x(76);x.d(S,"toRadian",function(){return Zt.a});var Ee=x(77);x.d(S,"forIn",function(){return Ee.a});var dt=x(29);x.d(S,"has",function(){return dt.a});var bt=x(78);x.d(S,"hasKey",function(){return bt.a});var wt=x(79);x.d(S,"hasValue",function(){return wt.a});var D=x(21);x.d(S,"keys",function(){return D.a});var rt=x(20);x.d(S,"isMatch",function(){return rt.a});var Nt=x(15);x.d(S,"values",function(){return Nt.a});var ft=x(80);x.d(S,"lowerCase",function(){return ft.a});var ie=x(81);x.d(S,"lowerFirst",function(){return ie.a});var ge=x(82);x.d(S,"substitute",function(){return ge.a});var Ge=x(83);x.d(S,"upperCase",function(){return Ge.a});var Re=x(84);x.d(S,"upperFirst",function(){return Re.a});var qe=x(30);x.d(S,"getType",function(){return qe.a});var Ve=x(85);x.d(S,"isArguments",function(){return Ve.a});var le=x(0);x.d(S,"isArray",function(){return le.a});var Le=x(1);x.d(S,"isArrayLike",function(){return Le.a});var je=x(86);x.d(S,"isBoolean",function(){return je.a});var Be=x(87);x.d(S,"isDate",function(){return Be.a});var vr=x(88);x.d(S,"isError",function(){return vr.a});var or=x(2);x.d(S,"isFunction",function(){return or.a});var Ae=x(89);x.d(S,"isFinite",function(){return Ae.a});var yr=x(7);x.d(S,"isNil",function(){return yr.a});var Cr=x(90);x.d(S,"isNull",function(){return Cr.a});var zr=x(5);x.d(S,"isNumber",function(){return zr.a});var Mr=x(12);x.d(S,"isObject",function(){return Mr.a});var un=x(14);x.d(S,"isObjectLike",function(){return un.a});var hn=x(10);x.d(S,"isPlainObject",function(){return hn.a});var Un=x(31);x.d(S,"isPrototype",function(){return Un.a});var nn=x(91);x.d(S,"isRegExp",function(){return nn.a});var vn=x(4);x.d(S,"isString",function(){return vn.a});var ln=x(3);x.d(S,"isType",function(){return ln.a});var pn=x(92);x.d(S,"isUndefined",function(){return pn.a});var Bn=x(93);x.d(S,"isElement",function(){return Bn.a});var Pe=x(94);x.d(S,"requestAnimationFrame",function(){return Pe.a});var Cn=x(95);x.d(S,"clearAnimationFrame",function(){return Cn.a});var Gn=x(96);x.d(S,"augment",function(){return Gn.a});var bi=x(97);x.d(S,"clone",function(){return bi.a});var zn=x(98);x.d(S,"debounce",function(){return zn.a});var Hn=x(32);x.d(S,"memoize",function(){return Hn.a});var hi=x(99);x.d(S,"deepMix",function(){return hi.a});var Si=x(8);x.d(S,"each",function(){return Si.a});var pi=x(100);x.d(S,"extend",function(){return pi.a});var Dt=x(101);x.d(S,"indexOf",function(){return Dt.a});var Lt=x(102);x.d(S,"isEmpty",function(){return Lt.a});var H=x(33);x.d(S,"isEqual",function(){return H.a});var G=x(103);x.d(S,"isEqualWith",function(){return G.a});var F=x(104);x.d(S,"map",function(){return F.a});var st=x(105);x.d(S,"mapValues",function(){return st.a});var Bt=x(16);x.d(S,"mix",function(){return Bt.a}),x.d(S,"assign",function(){return Bt.a});var Kt=x(106);x.d(S,"get",function(){return Kt.a});var Yt=x(107);x.d(S,"set",function(){return Yt.a});var he=x(108);x.d(S,"pick",function(){return he.a});var ot=x(109);x.d(S,"omit",function(){return ot.a});var yt=x(110);x.d(S,"throttle",function(){return yt.a});var te=x(111);x.d(S,"toArray",function(){return te.a});var Me=x(9);x.d(S,"toString",function(){return Me.a});var Se=x(112);x.d(S,"uniqueId",function(){return Se.a});var er=x(113);x.d(S,"noop",function(){return er.a});var sr=x(114);x.d(S,"identity",function(){return sr.a});var ye=x(115);x.d(S,"size",function(){return ye.a});var Fe=x(34);x.d(S,"measureTextWidth",function(){return Fe.a});var tr=x(117);x.d(S,"getEllipsisText",function(){return tr.a});var Sr=x(118);x.d(S,"Cache",function(){return Sr.a})},function(w,S,x){"use strict";var z=x(19),k=x(13),E=function(N,T){return T===void 0&&(T=[]),Object(z.a)(N,function(m){return!Object(k.a)(T,m)})};S.a=E},function(w,S,x){"use strict";var z=x(2),k=x(20),E=x(0),N=x(10);function T(m,y){if(!Object(E.a)(m))return null;var v;if(Object(z.a)(y)&&(v=y),Object(N.a)(y)&&(v=function(g){return Object(k.a)(g,y)}),v){for(var p=0;p<m.length;p+=1)if(v(m[p]))return m[p]}return null}S.a=T},function(w,S,x){"use strict";function z(k,E,N){N===void 0&&(N=0);for(var T=N;T<k.length;T++)if(E(k[T],T))return T;return-1}S.a=z},function(w,S,x){"use strict";var z=x(7),k=x(0),E=function(N,T){for(var m=null,y=0;y<N.length;y++){var v=N[y],p=v[T];if(!Object(z.a)(p)){Object(k.a)(p)?m=p[0]:m=p;break}}return m};S.a=E},function(w,S,x){"use strict";var z=x(0),k=function(E){if(!Object(z.a)(E))return[];for(var N=[],T=0;T<E.length;T++)N=N.concat(E[T]);return N};S.a=k},function(w,S,x){"use strict";var z=x(0),k=function(E,N){if(N===void 0&&(N=[]),!Object(z.a)(E))N.push(E);else for(var T=0;T<E.length;T+=1)k(E[T],N);return N};S.a=k},function(w,S,x){"use strict";var z=x(0),k=x(22),E=x(23),N=function(T){var m=T.filter(function(I){return!isNaN(I)});if(!m.length)return{min:0,max:0};if(Object(z.a)(T[0])){for(var y=[],v=0;v<T.length;v++)y=y.concat(T[v]);m=y}var p=Object(k.a)(m),g=Object(E.a)(m);return{min:g,max:p}};S.a=N},function(w,S,x){"use strict";var z=Array.prototype,k=z.splice,E=z.indexOf,N=function(T){for(var m=[],y=1;y<arguments.length;y++)m[y-1]=arguments[y];for(var v=0;v<m.length;v++)for(var p=m[v],g=-1;(g=E.call(T,p))>-1;)k.call(T,g,1);return T};S.a=N},function(w,S,x){"use strict";var z=x(1),k=x(24),E=function(N,T){var m=[];if(!Object(z.a)(N))return m;for(var y=-1,v=[],p=N.length;++y<p;){var g=N[y];T(g,y,N)&&(m.push(g),v.push(y))}return Object(k.a)(N,v),m};S.a=E},function(w,S,x){"use strict";var z=x(0),k=x(4),E=x(2);function N(T,m){var y;if(Object(E.a)(m))y=function(p,g){return m(p)-m(g)};else{var v=[];Object(k.a)(m)?v.push(m):Object(z.a)(m)&&(v=m),y=function(p,g){for(var I=0;I<v.length;I+=1){var _=v[I];if(p[_]>g[_])return 1;if(p[_]<g[_])return-1}return 0}}return T.sort(y),T}S.a=N},function(w,S,x){"use strict";var z=x(26),k=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return Object(z.a)([].concat.apply([],E))};S.a=k},function(w,S,x){"use strict";var z=x(0),k=x(7);S.a=function(E,N){for(var T=[],m={},y=0;y<E.length;y++){var v=E[y],p=v[N];if(!Object(k.a)(p)){Object(z.a)(p)||(p=[p]);for(var g=0;g<p.length;g++){var I=p[g];m[I]||(T.push(I),m[I]=!0)}}}return T}},function(w,S,x){"use strict";S.a=k;var z=x(1);function k(E){if(Object(z.a)(E))return E[0]}},function(w,S,x){"use strict";S.a=k;var z=x(1);function k(E){if(Object(z.a)(E)){var N=E;return N[N.length-1]}}},function(w,S,x){"use strict";var z=x(0),k=x(4);function E(N,T){return Object(z.a)(N)||Object(k.a)(N)?N[0]===T:!1}S.a=E},function(w,S,x){"use strict";var z=x(0),k=x(4);function E(N,T){return Object(z.a)(N)||Object(k.a)(N)?N[N.length-1]===T:!1}S.a=E},function(w,S,x){"use strict";var z=function(k,E){for(var N=0;N<k.length;N++)if(!E(k[N],N))return!1;return!0};S.a=z},function(w,S,x){"use strict";var z=function(k,E){for(var N=0;N<k.length;N++)if(E(k[N],N))return!0;return!1};S.a=z},function(w,S,x){"use strict";var z=x(27);S.a=function(k,E){if(!E)return[k];var N=Object(z.a)(k,E),T=[];for(var m in N)T.push(N[m]);return T}},function(w,S,x){"use strict";function z(k,E){return k["_wrap_"+E]}S.a=z},function(w,S,x){"use strict";function z(k,E){if(k["_wrap_"+E])return k["_wrap_"+E];var N=function(T){k[E](T)};return k["_wrap_"+E]=N,N}S.a=z},function(w,S,x){"use strict";var z={};function k(E){var N=z[E];if(!N){for(var T=E.toString(16),m=T.length;m<6;m++)T="0"+T;N="#"+T,z[E]=N}return N}S.a=k},function(w,S,x){"use strict";var z=x(0);function k(E){var N=0,T=0,m=0,y=0;return Object(z.a)(E)?E.length===1?N=T=m=y=E[0]:E.length===2?(N=m=E[0],T=y=E[1]):E.length===3?(N=E[0],T=y=E[1],m=E[2]):(N=E[0],T=E[1],m=E[2],y=E[3]):N=T=m=y=E,{r1:N,r2:T,r3:m,r4:y}}S.a=k},function(w,S,x){"use strict";var z=function(k,E,N){return k<E?E:k>N?N:k};S.a=z},function(w,S,x){"use strict";var z=function(k,E){var N=E.toString(),T=N.indexOf(".");if(T===-1)return Math.round(k);var m=N.substr(T+1).length;return m>20&&(m=20),parseFloat(k.toFixed(m))};S.a=z},function(w,S,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E%1!==0};S.a=k},function(w,S,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E%2===0};S.a=k},function(w,S,x){"use strict";var z=x(5),k=Number.isInteger?Number.isInteger:function(E){return Object(z.a)(E)&&E%1===0};S.a=k},function(w,S,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E<0};S.a=k},function(w,S,x){"use strict";S.a=k;var z=1e-5;function k(E,N,T){return T===void 0&&(T=z),Math.abs(E-N)<T}},function(w,S,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E%2!==0};S.a=k},function(w,S,x){"use strict";var z=x(5),k=function(E){return Object(z.a)(E)&&E>0};S.a=k},function(w,S,x){"use strict";var z=x(0),k=x(2);S.a=function(E,N){if(Object(z.a)(E)){for(var T,m=-1/0,y=0;y<E.length;y++){var v=E[y],p=Object(k.a)(N)?N(v):v[N];p>m&&(T=v,m=p)}return T}}},function(w,S,x){"use strict";var z=x(0),k=x(2);S.a=function(E,N){if(Object(z.a)(E)){for(var T,m=1/0,y=0;y<E.length;y++){var v=E[y],p=Object(k.a)(N)?N(v):v[N];p<m&&(T=v,m=p)}return T}}},function(w,S,x){"use strict";var z=function(k,E){return(k%E+E)%E};S.a=z},function(w,S,x){"use strict";var z=180/Math.PI,k=function(E){return z*E};S.a=k},function(w,S,x){"use strict";S.a=parseInt},function(w,S,x){"use strict";var z=Math.PI/180,k=function(E){return z*E};S.a=k},function(w,S,x){"use strict";var z=x(8);S.a=z.a},function(w,S,x){"use strict";var z=x(29);S.a=z.a},function(w,S,x){"use strict";var z=x(13),k=x(15);S.a=function(E,N){return Object(z.a)(Object(k.a)(E),N)}},function(w,S,x){"use strict";var z=x(9),k=function(E){return Object(z.a)(E).toLowerCase()};S.a=k},function(w,S,x){"use strict";var z=x(9),k=function(E){var N=Object(z.a)(E);return N.charAt(0).toLowerCase()+N.substring(1)};S.a=k},function(w,S,x){"use strict";function z(k,E){return!k||!E?k:k.replace(/\\?\{([^{}]+)\}/g,function(N,T){return N.charAt(0)==="\\"?N.slice(1):E[T]===void 0?"":E[T]})}S.a=z},function(w,S,x){"use strict";var z=x(9),k=function(E){return Object(z.a)(E).toUpperCase()};S.a=k},function(w,S,x){"use strict";var z=x(9),k=function(E){var N=Object(z.a)(E);return N.charAt(0).toUpperCase()+N.substring(1)};S.a=k},function(w,S,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Arguments")};S.a=k},function(w,S,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Boolean")};S.a=k},function(w,S,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Date")};S.a=k},function(w,S,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"Error")};S.a=k},function(w,S,x){"use strict";var z=x(5);S.a=function(k){return Object(z.a)(k)&&isFinite(k)}},function(w,S,x){"use strict";var z=function(k){return k===null};S.a=z},function(w,S,x){"use strict";var z=x(3),k=function(E){return Object(z.a)(E,"RegExp")};S.a=k},function(w,S,x){"use strict";var z=function(k){return k===void 0};S.a=z},function(w,S,x){"use strict";var z=function(k){return k instanceof Element||k instanceof HTMLDocument};S.a=z},function(w,S,x){"use strict";S.a=z;function z(k){var E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(N){return setTimeout(N,16)};return E(k)}},function(w,S,x){"use strict";S.a=z;function z(k){var E=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;E(k)}},function(w,S,x){"use strict";var z=x(16),k=x(2),E=function(){for(var N=[],T=0;T<arguments.length;T++)N[T]=arguments[T];for(var m=N[0],y=1;y<N.length;y++){var v=N[y];Object(k.a)(v)&&(v=v.prototype),Object(z.a)(m.prototype,v)}};S.a=E},function(w,S,x){"use strict";var z=x(0),k=function(E){if(typeof E!="object"||E===null)return E;var N;if(Object(z.a)(E)){N=[];for(var T=0,m=E.length;T<m;T++)typeof E[T]=="object"&&E[T]!=null?N[T]=k(E[T]):N[T]=E[T]}else{N={};for(var y in E)typeof E[y]=="object"&&E[y]!=null?N[y]=k(E[y]):N[y]=E[y]}return N};S.a=k},function(w,S,x){"use strict";function z(k,E,N){var T;return function(){var m=this,y=arguments,v=function(){T=null,N||k.apply(m,y)},p=N&&!T;clearTimeout(T),T=setTimeout(v,E),p&&k.apply(m,y)}}S.a=z},function(w,S,x){"use strict";var z=x(0),k=x(10),E=5;function N(m,y,v,p){v=v||0,p=p||E;for(var g in y)if(y.hasOwnProperty(g)){var I=y[g];I!==null&&Object(k.a)(I)?(Object(k.a)(m[g])||(m[g]={}),v<p?N(m[g],I,v+1,p):m[g]=y[g]):Object(z.a)(I)?(m[g]=[],m[g]=m[g].concat(I)):I!==void 0&&(m[g]=I)}}var T=function(m){for(var y=[],v=1;v<arguments.length;v++)y[v-1]=arguments[v];for(var p=0;p<y.length;p+=1)N(m,y[p]);return m};S.a=T},function(w,S,x){"use strict";var z=x(16),k=x(2),E=function(N,T,m,y){Object(k.a)(T)||(m=T,T=N,N=function(){});var v=Object.create?function(g,I){return Object.create(g,{constructor:{value:I}})}:function(g,I){function _(){}_.prototype=g;var C=new _;return C.constructor=I,C},p=v(T.prototype,N);return N.prototype=Object(z.a)(p,N.prototype),N.superclass=v(T.prototype,T),Object(z.a)(p,m),Object(z.a)(N,y),N};S.a=E},function(w,S,x){"use strict";var z=x(1),k=function(E,N){if(!Object(z.a)(E))return-1;var T=Array.prototype.indexOf;if(T)return T.call(E,N);for(var m=-1,y=0;y<E.length;y++)if(E[y]===N){m=y;break}return m};S.a=k},function(w,S,x){"use strict";var z=x(7),k=x(1),E=x(30),N=x(31),T=Object.prototype.hasOwnProperty;function m(y){if(Object(z.a)(y))return!0;if(Object(k.a)(y))return!y.length;var v=Object(E.a)(y);if(v==="Map"||v==="Set")return!y.size;if(Object(N.a)(y))return!Object.keys(y).length;for(var p in y)if(T.call(y,p))return!1;return!0}S.a=m},function(w,S,x){"use strict";var z=x(2),k=x(33);S.a=function(E,N,T){return Object(z.a)(T)?!!T(E,N):Object(k.a)(E,N)}},function(w,S,x){"use strict";var z=x(1),k=function(E,N){if(!Object(z.a)(E))return E;for(var T=[],m=0;m<E.length;m++){var y=E[m];T.push(N(y,m))}return T};S.a=k},function(w,S,x){"use strict";var z=x(7),k=x(12),E=function(N){return N};S.a=function(N,T){T===void 0&&(T=E);var m={};return Object(k.a)(N)&&!Object(z.a)(N)&&Object.keys(N).forEach(function(y){m[y]=T(N[y],y)}),m}},function(w,S,x){"use strict";var z=x(4);S.a=function(k,E,N){for(var T=0,m=Object(z.a)(E)?E.split("."):E;k&&T<m.length;)k=k[m[T++]];return k===void 0||T<m.length?N:k}},function(w,S,x){"use strict";var z=x(12),k=x(4),E=x(5);S.a=function(N,T,m){var y=N,v=Object(k.a)(T)?T.split("."):T;return v.forEach(function(p,g){g<v.length-1?(Object(z.a)(y[p])||(y[p]=Object(E.a)(v[g+1])?[]:{}),y=y[p]):y[p]=m}),N}},function(w,S,x){"use strict";var z=x(8),k=x(10),E=Object.prototype.hasOwnProperty;S.a=function(N,T){if(N===null||!Object(k.a)(N))return{};var m={};return Object(z.a)(T,function(y){E.call(N,y)&&(m[y]=N[y])}),m}},function(w,S,x){"use strict";var z=x(25);S.a=function(k,E){return Object(z.a)(k,function(N,T,m){return E.includes(m)||(N[m]=T),N},{})}},function(w,S,x){"use strict";S.a=function(z,k,E){var N,T,m,y,v=0;E||(E={});var p=function(){v=E.leading===!1?0:Date.now(),N=null,y=z.apply(T,m),N||(T=m=null)},g=function(){var I=Date.now();!v&&E.leading===!1&&(v=I);var _=k-(I-v);return T=this,m=arguments,_<=0||_>k?(N&&(clearTimeout(N),N=null),v=I,y=z.apply(T,m),N||(T=m=null)):!N&&E.trailing!==!1&&(N=setTimeout(p,_)),y};return g.cancel=function(){clearTimeout(N),v=0,N=T=m=null},g}},function(w,S,x){"use strict";var z=x(1);S.a=function(k){return Object(z.a)(k)?Array.prototype.slice.call(k):[]}},function(w,S,x){"use strict";var z={};S.a=function(k){return k=k||"g",z[k]?z[k]+=1:z[k]=1,k+z[k]}},function(w,S,x){"use strict";S.a=function(){}},function(w,S,x){"use strict";S.a=function(z){return z}},function(w,S,x){"use strict";S.a=E;var z=x(7),k=x(1);function E(N){return Object(z.a)(N)?0:Object(k.a)(N)?N.length:Object.keys(N).length}},function(w,S,x){"use strict";S.a=X;var z=function(At,Q){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,Vt){gt.__proto__=Vt}||function(gt,Vt){for(var Ht in Vt)Object.prototype.hasOwnProperty.call(Vt,Ht)&&(gt[Ht]=Vt[Ht])},z(At,Q)};function k(At,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");z(At,Q);function gt(){this.constructor=At}At.prototype=Q===null?Object.create(Q):(gt.prototype=Q.prototype,new gt)}var E=function(){return E=Object.assign||function(Q){for(var gt,Vt=1,Ht=arguments.length;Vt<Ht;Vt++){gt=arguments[Vt];for(var It in gt)Object.prototype.hasOwnProperty.call(gt,It)&&(Q[It]=gt[It])}return Q},E.apply(this,arguments)};function N(At,Q){var gt={};for(var Vt in At)Object.prototype.hasOwnProperty.call(At,Vt)&&Q.indexOf(Vt)<0&&(gt[Vt]=At[Vt]);if(At!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ht=0,Vt=Object.getOwnPropertySymbols(At);Ht<Vt.length;Ht++)Q.indexOf(Vt[Ht])<0&&Object.prototype.propertyIsEnumerable.call(At,Vt[Ht])&&(gt[Vt[Ht]]=At[Vt[Ht]]);return gt}function T(At,Q,gt,Vt){var Ht=arguments.length,It=Ht<3?Q:Vt===null?Vt=Object.getOwnPropertyDescriptor(Q,gt):Vt,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")It=Reflect.decorate(At,Q,gt,Vt);else for(var De=At.length-1;De>=0;De--)(de=At[De])&&(It=(Ht<3?de(It):Ht>3?de(Q,gt,It):de(Q,gt))||It);return Ht>3&&It&&Object.defineProperty(Q,gt,It),It}function m(At,Q){return function(gt,Vt){Q(gt,Vt,At)}}function y(At,Q,gt,Vt,Ht,It){function de(dt){if(dt!==void 0&&typeof dt!="function")throw new TypeError("Function expected");return dt}for(var De=Vt.kind,Ye=De==="getter"?"get":De==="setter"?"set":"value",kt=!Q&&At?Vt.static?At:At.prototype:null,Pt=Q||(kt?Object.getOwnPropertyDescriptor(kt,Vt.name):{}),_t,jt=!1,Qt=gt.length-1;Qt>=0;Qt--){var Tt={};for(var Zt in Vt)Tt[Zt]=Zt==="access"?{}:Vt[Zt];for(var Zt in Vt.access)Tt.access[Zt]=Vt.access[Zt];Tt.addInitializer=function(dt){if(jt)throw new TypeError("Cannot add initializers after decoration has completed");It.push(de(dt||null))};var Ee=(0,gt[Qt])(De==="accessor"?{get:Pt.get,set:Pt.set}:Pt[Ye],Tt);if(De==="accessor"){if(Ee===void 0)continue;if(Ee===null||typeof Ee!="object")throw new TypeError("Object expected");(_t=de(Ee.get))&&(Pt.get=_t),(_t=de(Ee.set))&&(Pt.set=_t),(_t=de(Ee.init))&&Ht.push(_t)}else(_t=de(Ee))&&(De==="field"?Ht.push(_t):Pt[Ye]=_t)}kt&&Object.defineProperty(kt,Vt.name,Pt),jt=!0}function v(At,Q,gt){for(var Vt=arguments.length>2,Ht=0;Ht<Q.length;Ht++)gt=Vt?Q[Ht].call(At,gt):Q[Ht].call(At);return Vt?gt:void 0}function p(At){return typeof At=="symbol"?At:"".concat(At)}function g(At,Q,gt){return typeof Q=="symbol"&&(Q=Q.description?"[".concat(Q.description,"]"):""),Object.defineProperty(At,"name",{configurable:!0,value:gt?"".concat(gt," ",Q):Q})}function I(At,Q){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(At,Q)}function _(At,Q,gt,Vt){function Ht(It){return It instanceof gt?It:new gt(function(de){de(It)})}return new(gt||(gt=Promise))(function(It,de){function De(Pt){try{kt(Vt.next(Pt))}catch(_t){de(_t)}}function Ye(Pt){try{kt(Vt.throw(Pt))}catch(_t){de(_t)}}function kt(Pt){Pt.done?It(Pt.value):Ht(Pt.value).then(De,Ye)}kt((Vt=Vt.apply(At,Q||[])).next())})}function C(At,Q){var gt={label:0,sent:function(){if(It[0]&1)throw It[1];return It[1]},trys:[],ops:[]},Vt,Ht,It,de;return de={next:De(0),throw:De(1),return:De(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function De(kt){return function(Pt){return Ye([kt,Pt])}}function Ye(kt){if(Vt)throw new TypeError("Generator is already executing.");for(;de&&(de=0,kt[0]&&(gt=0)),gt;)try{if(Vt=1,Ht&&(It=kt[0]&2?Ht.return:kt[0]?Ht.throw||((It=Ht.return)&&It.call(Ht),0):Ht.next)&&!(It=It.call(Ht,kt[1])).done)return It;switch(Ht=0,It&&(kt=[kt[0]&2,It.value]),kt[0]){case 0:case 1:It=kt;break;case 4:return gt.label++,{value:kt[1],done:!1};case 5:gt.label++,Ht=kt[1],kt=[0];continue;case 7:kt=gt.ops.pop(),gt.trys.pop();continue;default:if(It=gt.trys,!(It=It.length>0&&It[It.length-1])&&(kt[0]===6||kt[0]===2)){gt=0;continue}if(kt[0]===3&&(!It||kt[1]>It[0]&&kt[1]<It[3])){gt.label=kt[1];break}if(kt[0]===6&&gt.label<It[1]){gt.label=It[1],It=kt;break}if(It&&gt.label<It[2]){gt.label=It[2],gt.ops.push(kt);break}It[2]&&gt.ops.pop(),gt.trys.pop();continue}kt=Q.call(At,gt)}catch(Pt){kt=[6,Pt],Ht=0}finally{Vt=It=0}if(kt[0]&5)throw kt[1];return{value:kt[0]?kt[1]:void 0,done:!0}}}var O=Object.create?function(At,Q,gt,Vt){Vt===void 0&&(Vt=gt);var Ht=Object.getOwnPropertyDescriptor(Q,gt);(!Ht||("get"in Ht?!Q.__esModule:Ht.writable||Ht.configurable))&&(Ht={enumerable:!0,get:function(){return Q[gt]}}),Object.defineProperty(At,Vt,Ht)}:function(At,Q,gt,Vt){Vt===void 0&&(Vt=gt),At[Vt]=Q[gt]};function b(At,Q){for(var gt in At)gt!=="default"&&!Object.prototype.hasOwnProperty.call(Q,gt)&&O(Q,At,gt)}function l(At){var Q=typeof Symbol=="function"&&Symbol.iterator,gt=Q&&At[Q],Vt=0;if(gt)return gt.call(At);if(At&&typeof At.length=="number")return{next:function(){return At&&Vt>=At.length&&(At=void 0),{value:At&&At[Vt++],done:!At}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(At,Q){var gt=typeof Symbol=="function"&&At[Symbol.iterator];if(!gt)return At;var Vt=gt.call(At),Ht,It=[],de;try{for(;(Q===void 0||Q-- >0)&&!(Ht=Vt.next()).done;)It.push(Ht.value)}catch(De){de={error:De}}finally{try{Ht&&!Ht.done&&(gt=Vt.return)&&gt.call(Vt)}finally{if(de)throw de.error}}return It}function Z(){for(var At=[],Q=0;Q<arguments.length;Q++)At=At.concat(K(arguments[Q]));return At}function X(){for(var At=0,Q=0,gt=arguments.length;Q<gt;Q++)At+=arguments[Q].length;for(var Vt=Array(At),Ht=0,Q=0;Q<gt;Q++)for(var It=arguments[Q],de=0,De=It.length;de<De;de++,Ht++)Vt[Ht]=It[de];return Vt}function W(At,Q,gt){if(gt||arguments.length===2)for(var Vt=0,Ht=Q.length,It;Vt<Ht;Vt++)(It||!(Vt in Q))&&(It||(It=Array.prototype.slice.call(Q,0,Vt)),It[Vt]=Q[Vt]);return At.concat(It||Array.prototype.slice.call(Q))}function U(At){return this instanceof U?(this.v=At,this):new U(At)}function et(At,Q,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Vt=gt.apply(At,Q||[]),Ht,It=[];return Ht={},de("next"),de("throw"),de("return"),Ht[Symbol.asyncIterator]=function(){return this},Ht;function de(jt){Vt[jt]&&(Ht[jt]=function(Qt){return new Promise(function(Tt,Zt){It.push([jt,Qt,Tt,Zt])>1||De(jt,Qt)})})}function De(jt,Qt){try{Ye(Vt[jt](Qt))}catch(Tt){_t(It[0][3],Tt)}}function Ye(jt){jt.value instanceof U?Promise.resolve(jt.value.v).then(kt,Pt):_t(It[0][2],jt)}function kt(jt){De("next",jt)}function Pt(jt){De("throw",jt)}function _t(jt,Qt){jt(Qt),It.shift(),It.length&&De(It[0][0],It[0][1])}}function at(At){var Q,gt;return Q={},Vt("next"),Vt("throw",function(Ht){throw Ht}),Vt("return"),Q[Symbol.iterator]=function(){return this},Q;function Vt(Ht,It){Q[Ht]=At[Ht]?function(de){return(gt=!gt)?{value:U(At[Ht](de)),done:!1}:It?It(de):de}:It}}function J(At){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=At[Symbol.asyncIterator],gt;return Q?Q.call(At):(At=typeof l=="function"?l(At):At[Symbol.iterator](),gt={},Vt("next"),Vt("throw"),Vt("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function Vt(It){gt[It]=At[It]&&function(de){return new Promise(function(De,Ye){de=At[It](de),Ht(De,Ye,de.done,de.value)})}}function Ht(It,de,De,Ye){Promise.resolve(Ye).then(function(kt){It({value:kt,done:De})},de)}}function nt(At,Q){return Object.defineProperty?Object.defineProperty(At,"raw",{value:Q}):At.raw=Q,At}var mt=Object.create?function(At,Q){Object.defineProperty(At,"default",{enumerable:!0,value:Q})}:function(At,Q){At.default=Q};function Mt(At){if(At&&At.__esModule)return At;var Q={};if(At!=null)for(var gt in At)gt!=="default"&&Object.prototype.hasOwnProperty.call(At,gt)&&O(Q,At,gt);return mt(Q,At),Q}function vt(At){return At&&At.__esModule?At:{default:At}}function zt(At,Q,gt,Vt){if(gt==="a"&&!Vt)throw new TypeError("Private accessor was defined without a getter");if(typeof Q=="function"?At!==Q||!Vt:!Q.has(At))throw new TypeError("Cannot read private member from an object whose class did not declare it");return gt==="m"?Vt:gt==="a"?Vt.call(At):Vt?Vt.value:Q.get(At)}function re(At,Q,gt,Vt,Ht){if(Vt==="m")throw new TypeError("Private method is not writable");if(Vt==="a"&&!Ht)throw new TypeError("Private accessor was defined without a setter");if(typeof Q=="function"?At!==Q||!Ht:!Q.has(At))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Vt==="a"?Ht.call(At,gt):Ht?Ht.value=gt:Q.set(At,gt),gt}function Rt(At,Q){if(Q===null||typeof Q!="object"&&typeof Q!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof At=="function"?Q===At:At.has(Q)}},function(w,S,x){"use strict";var z=x(4),k=x(9),E=x(34);S.a=function(N,T,m,y){y===void 0&&(y="...");var v=16,p=Object(E.a)(y,m),g=Object(z.a)(N)?N:Object(k.a)(N),I=T,_=[],C,O;if(Object(E.a)(N,m)<=T)return N;for(;C=g.substr(0,v),O=Object(E.a)(C,m),!(O+p>I&&O>I);)if(_.push(C),I-=O,g=g.substr(v),!g)return _.join("");for(;C=g.substr(0,1),O=Object(E.a)(C,m),!(O+p>I);)if(_.push(C),I-=O,g=g.substr(1),!g)return _.join("");return""+_.join("")+y}},function(w,S,x){"use strict";var z=function(){function k(){this.map={}}return k.prototype.has=function(E){return this.map[E]!==void 0},k.prototype.get=function(E,N){var T=this.map[E];return T===void 0?N:T},k.prototype.set=function(E,N){this.map[E]=N},k.prototype.clear=function(){this.map={}},k.prototype.delete=function(E){delete this.map[E]},k.prototype.size=function(){return Object.keys(this.map).length},k}();S.a=z},function(w,S){function x(m,y,v,p){p===void 0&&(p=[]);var g=this;g.w=m||0,g.h=y||0,g.y=v||0,g.x=0,g.c=p||[],g.cs=p.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}x.fromNode=function(m,y){if(!m)return null;var v=[];return m.children.forEach(function(p){v.push(x.fromNode(p,y))}),y?new x(m.height,m.width,m.x,v):new x(m.width,m.height,m.y,v)};function z(m,y,v){v?m.y+=y:m.x+=y,m.children.forEach(function(p){z(p,y,v)})}function k(m,y){var v=y?m.y:m.x;return m.children.forEach(function(p){v=Math.min(k(p,y),v)}),v}function E(m,y){var v=k(m,y);z(m,-v,y)}function N(m,y,v){v?y.y=m.x:y.x=m.x,m.c.forEach(function(p,g){N(p,y.children[g],v)})}function T(m,y,v){v===void 0&&(v=0),y?(m.x=v,v+=m.width):(m.y=v,v+=m.height),m.children.forEach(function(p){T(p,y,v)})}w.exports=function(m,y){y===void 0&&(y={});var v=y.isHorizontal;function p(J){if(J.cs===0){g(J);return}p(J.c[0]);for(var nt=et(b(J.c[0].el),0,null),mt=1;mt<J.cs;++mt){p(J.c[mt]);var Mt=b(J.c[mt].er);I(J,mt,nt),nt=et(Mt,mt,nt)}Z(J),g(J)}function g(J){J.cs===0?(J.el=J,J.er=J,J.msel=J.mser=0):(J.el=J.c[0].el,J.msel=J.c[0].msel,J.er=J.c[J.cs-1].er,J.mser=J.c[J.cs-1].mser)}function I(J,nt,mt){for(var Mt=J.c[nt-1],vt=Mt.mod,zt=J.c[nt],re=zt.mod;Mt!==null&&zt!==null;){b(Mt)>mt.low&&(mt=mt.nxt);var Rt=vt+Mt.prelim+Mt.w-(re+zt.prelim);Rt>0&&(re+=Rt,_(J,nt,mt.index,Rt));var At=b(Mt),Q=b(zt);At<=Q&&(Mt=O(Mt),Mt!==null&&(vt+=Mt.mod)),At>=Q&&(zt=C(zt),zt!==null&&(re+=zt.mod))}!Mt&&zt?l(J,nt,zt,re):Mt&&!zt&&K(J,nt,Mt,vt)}function _(J,nt,mt,Mt){J.c[nt].mod+=Mt,J.c[nt].msel+=Mt,J.c[nt].mser+=Mt,W(J,nt,mt,Mt)}function C(J){return J.cs===0?J.tl:J.c[0]}function O(J){return J.cs===0?J.tr:J.c[J.cs-1]}function b(J){return J.y+J.h}function l(J,nt,mt,Mt){var vt=J.c[0].el;vt.tl=mt;var zt=Mt-mt.mod-J.c[0].msel;vt.mod+=zt,vt.prelim-=zt,J.c[0].el=J.c[nt].el,J.c[0].msel=J.c[nt].msel}function K(J,nt,mt,Mt){var vt=J.c[nt].er;vt.tr=mt;var zt=Mt-mt.mod-J.c[nt].mser;vt.mod+=zt,vt.prelim-=zt,J.c[nt].er=J.c[nt-1].er,J.c[nt].mser=J.c[nt-1].mser}function Z(J){J.prelim=(J.c[0].prelim+J.c[0].mod+J.c[J.cs-1].mod+J.c[J.cs-1].prelim+J.c[J.cs-1].w)/2-J.w/2}function X(J,nt){nt+=J.mod,J.x=J.prelim+nt,U(J);for(var mt=0;mt<J.cs;mt++)X(J.c[mt],nt)}function W(J,nt,mt,Mt){if(mt!==nt-1){var vt=nt-mt;J.c[mt+1].shift+=Mt/vt,J.c[nt].shift-=Mt/vt,J.c[nt].change-=Mt-Mt/vt}}function U(J){for(var nt=0,mt=0,Mt=0;Mt<J.cs;Mt++)nt+=J.c[Mt].shift,mt+=nt+J.c[Mt].change,J.c[Mt].mod+=mt}function et(J,nt,mt){for(;mt!==null&&J>=mt.low;)mt=mt.nxt;return{low:J,index:nt,nxt:mt}}T(m,v);var at=x.fromNode(m,v);return p(at),X(at,0),N(at,m,v),E(m,v),m}},function(w,S,x){function z(g,I){g.prototype=Object.create(I.prototype),g.prototype.constructor=g,k(g,I)}function k(g,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,O){return C.__proto__=O,C},k(g,I)}var E=x(11),N=x(121),T=x(17),m=x(6),y=function(g){z(I,g);function I(){return g.apply(this,arguments)||this}var _=I.prototype;return _.execute=function(){var O=this;return O.rootNode.width=0,T(O.rootNode,O.options,N)},I}(E),v={};function p(g,I){return I=m.assign({},v,I),new y(g,I).execute()}w.exports=p},function(w,S,x){var z=x(6);function k(T,m){T===void 0&&(T=0),m===void 0&&(m=[]);var y=this;y.x=y.y=0,y.leftChild=y.rightChild=null,y.height=0,y.children=m}var E={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function N(T,m,y){y?(m.x=T.x,m.y=T.y):(m.x=T.y,m.y=T.x),T.children.forEach(function(v,p){N(v,m.children[p],y)})}w.exports=function(T,m){m===void 0&&(m={}),m=z.assign({},E,m);var y=0;function v(C){if(!C)return null;C.width=0,C.depth&&C.depth>y&&(y=C.depth);var O=C.children,b=O.length,l=new k(C.height,[]);return O.forEach(function(K,Z){var X=v(K);l.children.push(X),Z===0&&(l.leftChild=X),Z===b-1&&(l.rightChild=X)}),l.originNode=C,l.isLeaf=C.isLeaf(),l}function p(C){if(C.isLeaf||C.children.length===0)C.drawingDepth=y;else{var O=C.children.map(function(l){return p(l)}),b=Math.min.apply(null,O);C.drawingDepth=b-1}return C.drawingDepth}var g;function I(C){C.x=C.drawingDepth*m.rankSep,C.isLeaf?(C.y=0,g&&(C.y=g.y+g.height+m.nodeSep,C.originNode.parent!==g.originNode.parent&&(C.y+=m.subTreeSep)),g=C):(C.children.forEach(function(O){I(O)}),C.y=(C.leftChild.y+C.rightChild.y)/2)}var _=v(T);return p(_),I(_),N(_,T,m.isHorizontal),T}},function(w,S,x){function z(_,C){_.prototype=Object.create(C.prototype),_.prototype.constructor=_,k(_,C)}function k(_,C){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,l){return b.__proto__=l,b},k(_,C)}var E=x(11),N=x(123),T=x(35),m=x(6),y=["LR","RL","H"],v=y[0],p=function(_){z(C,_);function C(){return _.apply(this,arguments)||this}var O=C.prototype;return O.execute=function(){var l=this,K=l.options,Z=l.rootNode;K.isHorizontal=!0;var X=K.indent,W=X===void 0?20:X,U=K.dropCap,et=U===void 0?!0:U,at=K.direction,J=at===void 0?v:at,nt=K.align;if(J&&y.indexOf(J)===-1)throw new TypeError("Invalid direction: "+J);if(J===y[0])N(Z,W,et,nt);else if(J===y[1])N(Z,W,et,nt),Z.right2left();else if(J===y[2]){var mt=T(Z,K),Mt=mt.left,vt=mt.right;N(Mt,W,et,nt),Mt.right2left(),N(vt,W,et,nt);var zt=Mt.getBoundingBox();vt.translate(zt.width,0),Z.x=vt.x-Z.width/2}return Z},C}(E),g={};function I(_,C){return C=m.assign({},g,C),new p(_,C).execute()}w.exports=I},function(w,S,x){var z=x(6);function k(E,N,T,m,y){var v=typeof T=="function"?T(E):T*E.depth;if(!m)try{if(E.id===E.parent.children[0].id){E.x+=v,E.y=N?N.y:0;return}}catch(I){}if(E.x+=v,N){if(E.y=N.y+z.getHeight(N,E,y),N.parent&&E.parent.id!==N.parent.id){var p=N.parent,g=p.y+z.getHeight(p,E,y);E.y=g>E.y?g:E.y}}else E.y=0}w.exports=function(E,N,T,m){var y=null;E.eachNode(function(v){k(v,y,N,T,m),y=v})}},function(w,S,x){function z(g,I){g.prototype=Object.create(I.prototype),g.prototype.constructor=g,k(g,I)}function k(g,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,O){return C.__proto__=O,C},k(g,I)}var E=x(11),N=x(125),T=x(17),m=x(6),y=function(g){z(I,g);function I(){return g.apply(this,arguments)||this}var _=I.prototype;return _.execute=function(){var O=this;return T(O.rootNode,O.options,N)},I}(E),v={};function p(g,I){return I=m.assign({},v,I),new y(g,I).execute()}w.exports=p},function(w,S,x){var z=x(6);function k(T,m){var y=0;return T.children.length?T.children.forEach(function(v){y+=k(v,m)}):y=T.height,T._subTreeSep=m.getSubTreeSep(T.data),T.totalHeight=Math.max(T.height,y)+2*T._subTreeSep,T.totalHeight}function E(T){var m=T.children,y=m.length;if(y){m.forEach(function(C){E(C)});var v=m[0],p=m[y-1],g=p.y-v.y+p.height,I=0;if(m.forEach(function(C){I+=C.totalHeight}),g>T.height)T.y=v.y+g/2-T.height/2;else if(m.length!==1||T.height>I){var _=T.y+(T.height-g)/2-v.y;m.forEach(function(C){C.translate(0,_)})}else T.y=(v.y+v.height/2+p.y+p.height/2)/2-T.height/2}}var N={getSubTreeSep:function(){return 0}};w.exports=function(T,m){m===void 0&&(m={}),m=z.assign({},N,m),T.parent={x:0,width:0,height:0,y:0},T.BFTraverse(function(y){y.x=y.parent.x+y.parent.width}),T.parent=null,k(T,m),T.startY=0,T.y=T.totalHeight/2-T.height/2,T.eachNode(function(y){var v=y.children,p=v.length;if(p){var g=v[0];if(g.startY=y.startY+y._subTreeSep,p===1)g.y=y.y+y.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var I=1;I<p;I++){var _=v[I];_.startY=v[I-1].startY+v[I-1].totalHeight,_.y=_.startY+_.totalHeight/2-_.height/2}}}}),E(T)}}])})},79472:function(ae,w,S){"use strict";var x=this&&this.__createBinding||(Object.create?function(E,N,T,m){m===void 0&&(m=T);var y=Object.getOwnPropertyDescriptor(N,T);(!y||("get"in y?!N.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return N[T]}}),Object.defineProperty(E,m,y)}:function(E,N,T,m){m===void 0&&(m=T),E[m]=N[T]}),z=this&&this.__exportStar||function(E,N){for(var T in E)T!=="default"&&!Object.prototype.hasOwnProperty.call(N,T)&&x(N,E,T)};Object.defineProperty(w,"__esModule",{value:!0}),w.getLayoutByName=w.unRegisterLayout=w.registerLayout=void 0;var k=S(45610);Object.defineProperty(w,"registerLayout",{enumerable:!0,get:function(){return k.registerLayout}}),Object.defineProperty(w,"unRegisterLayout",{enumerable:!0,get:function(){return k.unRegisterLayout}}),Object.defineProperty(w,"getLayoutByName",{enumerable:!0,get:function(){return k.getLayoutByName}}),z(S(51709),w)},94416:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Base=void 0;var S=function(){function x(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return x.prototype.layout=function(z){return this.init(z),this.execute(!0)},x.prototype.init=function(z){this.nodes=z.nodes||[],this.edges=z.edges||[],this.combos=z.combos||[],this.comboEdges=z.comboEdges||[],this.hiddenNodes=z.hiddenNodes||[],this.hiddenEdges=z.hiddenEdges||[],this.hiddenCombos=z.hiddenCombos||[]},x.prototype.execute=function(z){},x.prototype.executeWithWorker=function(){},x.prototype.getDefaultCfg=function(){return{}},x.prototype.updateCfg=function(z){z&&Object.assign(this,z)},x.prototype.getType=function(){return"base"},x.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},x}();w.Base=S},28672:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(g[_]=I[_])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.CircularLayout=void 0;var z=S(94416),k=S(78302);function E(y,v,p,g){y.forEach(function(I,_){y[_].children=[],y[_].parent=[]}),g?v.forEach(function(I){var _=(0,k.getEdgeTerminal)(I,"source"),C=(0,k.getEdgeTerminal)(I,"target"),O=0;_&&(O=p[_]);var b=0;C&&(b=p[C]);var l=y[O].children,K=y[b].parent;l.push(y[b].id),K.push(y[O].id)}):v.forEach(function(I){var _=(0,k.getEdgeTerminal)(I,"source"),C=(0,k.getEdgeTerminal)(I,"target"),O=0;_&&(O=p[_]);var b=0;C&&(b=p[C]);var l=y[O].children,K=y[b].children;l.push(y[b].id),K.push(y[O].id)})}function N(y,v,p){for(var g=p.length,I=0;I<g;I++){var _=(0,k.getEdgeTerminal)(p[I],"source"),C=(0,k.getEdgeTerminal)(p[I],"target");if(y.id===_&&v.id===C||v.id===_&&y.id===C)return!0}return!1}function T(y,v){var p=y.degree,g=v.degree;return p<g?-1:p>g?1:0}var m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},v.prototype.execute=function(){var p,g=this,I=g.nodes,_=g.edges,C=I.length;if(C===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var O=g.center;if(C===1){I[0].x=O[0],I[0].y=O[1],g.onLayoutEnd&&g.onLayoutEnd();return}var b=g.radius,l=g.startRadius,K=g.endRadius,Z=g.divisions,X=g.startAngle,W=g.endAngle,U=g.angleRatio,et=g.ordering,at=g.clockwise,J=g.nodeSpacing,nt=g.nodeSize,mt=(W-X)/C,Mt={};I.forEach(function(De,Ye){Mt[De.id]=Ye}),g.nodeMap=Mt;var vt=(0,k.getDegree)(I.length,Mt,_);if(g.degrees=vt,J){var zt=(0,k.getFuncByUnknownType)(10,J),re=(0,k.getFuncByUnknownType)(10,nt),Rt=-1/0;I.forEach(function(De){var Ye=re(De);Rt<Ye&&(Rt=Ye)});var At=0;I.forEach(function(De,Ye){Ye===0?At+=Rt||10:At+=(zt(De)||0)+(Rt||10)}),b=At/(2*Math.PI)}else!b&&!l&&!K?b=g.height>g.width?g.width/2:g.height/2:!l&&K?l=K:l&&!K&&(K=l);var Q=mt*U,gt=[];et==="topology"?gt=g.topologyOrdering():et==="topology-directed"?gt=g.topologyOrdering(!0):et==="degree"?gt=g.degreeOrdering():gt=I;for(var Vt=Math.ceil(C/Z),Ht=0;Ht<C;++Ht){var It=b;!It&&l!==null&&K!==null&&(It=l+Ht*(K-l)/(C-1)),It||(It=10+Ht*100/(C-1));var de=X+Ht%Vt*Q+2*Math.PI/Z*Math.floor(Ht/Vt);at||(de=W-Ht%Vt*Q-2*Math.PI/Z*Math.floor(Ht/Vt)),gt[Ht].x=O[0]+Math.cos(de)*It,gt[Ht].y=O[1]+Math.sin(de)*It,gt[Ht].weight=vt[Ht].all}return(p=g.onLayoutEnd)===null||p===void 0||p.call(g),{nodes:gt,edges:this.edges}},v.prototype.topologyOrdering=function(p){p===void 0&&(p=!1);var g=this,I=g.degrees,_=g.edges,C=g.nodes,O=(0,k.clone)(C),b=g.nodeMap,l=[O[0]],K=[C[0]],Z=[],X=C.length;Z[0]=!0,E(O,_,b,p);var W=0;return O.forEach(function(U,et){if(et!==0)if((et===X-1||I[et].all!==I[et+1].all||N(l[W],U,_))&&!Z[et])l.push(U),K.push(C[b[U.id]]),Z[et]=!0,W++;else{for(var at=l[W].children,J=!1,nt=0;nt<at.length;nt++){var mt=b[at[nt]];if(I[mt].all===I[et].all&&!Z[mt]){l.push(O[mt]),K.push(C[b[O[mt].id]]),Z[mt]=!0,J=!0;break}}for(var Mt=0;!J&&(Z[Mt]||(l.push(O[Mt]),K.push(C[b[O[Mt].id]]),Z[Mt]=!0,J=!0),Mt++,Mt!==X););}}),K},v.prototype.degreeOrdering=function(){var p=this,g=p.nodes,I=[],_=p.degrees;return g.forEach(function(C,O){C.degree=_[O].all,I.push(C)}),I.sort(T),I},v.prototype.getType=function(){return"circular"},v}(z.Base);w.CircularLayout=m},50023:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(g[_]=I[_])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(y){for(var v,p=1,g=arguments.length;p<g;p++){v=arguments[p];for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(y[I]=v[I])}return y},z.apply(this,arguments)};Object.defineProperty(w,"__esModule",{value:!0}),w.ComboCombinedLayout=void 0;var k=S(17219),E=S(94416),N=S(78302),T=S(51709),m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{}},v.prototype.execute=function(){var p=this,g=p.nodes,I=p.center;if(!g||g.length===0){p.onLayoutEnd&&p.onLayoutEnd();return}if(g.length===1){g[0].x=I[0],g[0].y=I[1],p.onLayoutEnd&&p.onLayoutEnd();return}p.initVals(),p.run(),p.onLayoutEnd&&p.onLayoutEnd()},v.prototype.run=function(){var p,g=this,I=g.nodes,_=g.edges,C=g.combos,O=g.comboEdges,b=g.center,l={};I.forEach(function(Rt){l[Rt.id]=Rt});var K={};C.forEach(function(Rt){K[Rt.id]=Rt});var Z=g.getInnerGraphs(l),X=[],W=[],U={},et=!0;this.comboTrees.forEach(function(Rt){var At=Z[Rt.id],Q=z(z({},Rt),{x:At.x||K[Rt.id].x,y:At.y||K[Rt.id].y,fx:At.fx||K[Rt.id].fx,fy:At.fy||K[Rt.id].fy,mass:At.mass||K[Rt.id].mass,size:At.size});W.push(Q),!isNaN(Q.x)&&Q.x!==0&&!isNaN(Q.y)&&Q.y!==0?et=!1:(Q.x=Math.random()*100,Q.y=Math.random()*100),X.push(Rt.id),(0,N.traverseTreeUp)(Rt,function(gt){return gt.id!==Rt.id&&(U[gt.id]=Rt.id),!0})}),I.forEach(function(Rt){if(!(Rt.comboId&&K[Rt.comboId])){var At=z({},Rt);W.push(At),!isNaN(At.x)&&At.x!==0&&!isNaN(At.y)&&At.y!==0?et=!1:(At.x=Math.random()*100,At.y=Math.random()*100),X.push(Rt.id)}});var at=[];if(_.concat(O).forEach(function(Rt){var At=U[Rt.source]||Rt.source,Q=U[Rt.target]||Rt.target;At!==Q&&X.includes(At)&&X.includes(Q)&&at.push({source:At,target:Q})}),W!=null&&W.length){if(W.length===1)W[0].x=b[0],W[0].y=b[1];else{var J={nodes:W,edges:at},nt=this.outerLayout||new T.GForceLayout({gravity:1,factor:2,linkDistance:function(Rt,At,Q){var gt,Vt,Ht=((((gt=At.size)===null||gt===void 0?void 0:gt[0])||30)+(((Vt=Q.size)===null||Vt===void 0?void 0:Vt[0])||30))/2;return Math.min(Ht*1.5,700)}}),mt=(p=nt.getType)===null||p===void 0?void 0:p.call(nt);if(nt.updateCfg({center:b,kg:5,preventOverlap:!0,animate:!1}),et&&k.FORCE_LAYOUT_TYPE_MAP[mt]){var Mt=W.length<100?new T.MDSLayout:new T.GridLayout;Mt.layout(J)}nt.layout(J)}W.forEach(function(Rt){var At=Z[Rt.id];if(!At){var Q=l[Rt.id];Q&&(Q.x=Rt.x,Q.y=Rt.y);return}At.visited=!0,At.x=Rt.x,At.y=Rt.y,At.nodes.forEach(function(gt){gt.x+=Rt.x,gt.y+=Rt.y})})}for(var vt=Object.keys(Z),zt=function(Rt){var At=vt[Rt],Q=Z[At];if(!Q)return"continue";Q.nodes.forEach(function(gt){Q.visited||(gt.x+=Q.x||0,gt.y+=Q.y||0),l[gt.id]&&(l[gt.id].x=gt.x,l[gt.id].y=gt.y)}),K[At]&&(K[At].x=Q.x,K[At].y=Q.y)},re=vt.length-1;re>=0;re--)zt(re);return{nodes:I,edges:_,combos:C,comboEdges:O}},v.prototype.getInnerGraphs=function(p){var g=this,I=g.comboTrees,_=g.nodeSize,C=g.edges,O=g.comboPadding,b=g.spacing,l={},K=this.innerLayout||new T.ConcentricLayout({sortBy:"id"});return K.center=[0,0],K.preventOverlap=!0,K.nodeSpacing=b,(I||[]).forEach(function(Z){(0,N.traverseTreeUp)(Z,function(X){var W,U=(O==null?void 0:O(X))||10;if((0,N.isArray)(U)&&(U=Math.max.apply(Math,U)),!((W=X.children)===null||W===void 0)&&W.length){var at=X.children.map(function(Q){if(Q.itemType==="combo")return l[Q.id];var gt=p[Q.id]||{};return z(z({},gt),Q)}),J=at.map(function(Q){return Q.id}),nt={nodes:at,edges:C.filter(function(Q){return J.includes(Q.source)&&J.includes(Q.target)})},mt=1/0;at.forEach(function(Q){var gt;Q.size||(Q.size=((gt=l[Q.id])===null||gt===void 0?void 0:gt.size)||(_==null?void 0:_(Q))||[30,30]),(0,N.isNumber)(Q.size)&&(Q.size=[Q.size,Q.size]),mt>Q.size[0]&&(mt=Q.size[0]),mt>Q.size[1]&&(mt=Q.size[1])}),K.layout(nt);var Mt=(0,N.findMinMaxNodeXY)(at),vt=Mt.minX,zt=Mt.minY,re=Mt.maxX,Rt=Mt.maxY,At=Math.max(re-vt,Rt-zt,mt)+U*2;l[X.id]={id:X.id,nodes:at,size:[At,At]}}else if(X.itemType==="combo"){var et=U?[U*2,U*2]:[30,30];l[X.id]={id:X.id,nodes:[],size:et}}return!0})}),l},v.prototype.initVals=function(){var p=this,g=p.nodeSize,I=p.spacing,_,C;if((0,N.isNumber)(I)?C=function(){return I}:(0,N.isFunction)(I)?C=I:C=function(){return 0},this.spacing=C,!g)_=function(X){var W=C(X);if(X.size){if((0,N.isArray)(X.size)){var U=X.size[0]>X.size[1]?X.size[0]:X.size[1];return(U+W)/2}if((0,N.isObject)(X.size)){var U=X.size.width>X.size.height?X.size.width:X.size.height;return(U+W)/2}return(X.size+W)/2}return 10+W/2};else if((0,N.isFunction)(g))_=function(X){var W=g(X),U=C(X);if((0,N.isArray)(X.size)){var et=X.size[0]>X.size[1]?X.size[0]:X.size[1];return(et+U)/2}return((W||10)+U)/2};else if((0,N.isArray)(g)){var O=g[0]>g[1]?g[0]:g[1],b=O/2;_=function(X){return b+C(X)/2}}else{var l=g/2;_=function(X){return l+C(X)/2}}this.nodeSize=_;var K=p.comboPadding,Z;(0,N.isNumber)(K)?Z=function(){return K}:(0,N.isArray)(K)?Z=function(){return Math.max.apply(null,K)}:(0,N.isFunction)(K)?Z=K:Z=function(){return 0},this.comboPadding=Z},v.prototype.getType=function(){return"comboCombined"},v}(E.Base);w.ComboCombinedLayout=m},5506:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var N=function(T,m){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(y[p]=v[p])},N(T,m)};return function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");N(T,m);function y(){this.constructor=T}T.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.ComboForceLayout=void 0;var z=S(94416),k=S(78302),E=function(N){x(T,N);function T(m){var y=N.call(this)||this;return y.center=[0,0],y.maxIteration=100,y.gravity=10,y.comboGravity=10,y.linkDistance=10,y.alpha=1,y.alphaMin=.001,y.alphaDecay=1-Math.pow(y.alphaMin,1/300),y.alphaTarget=0,y.velocityDecay=.6,y.edgeStrength=.6,y.nodeStrength=30,y.preventOverlap=!1,y.preventNodeOverlap=!1,y.preventComboOverlap=!1,y.collideStrength=void 0,y.nodeCollideStrength=.5,y.comboCollideStrength=.5,y.comboSpacing=20,y.comboPadding=10,y.optimizeRangeFactor=1,y.onTick=function(){},y.onLayoutEnd=function(){},y.depthAttractiveForceScale=1,y.depthRepulsiveForceScale=2,y.nodes=[],y.edges=[],y.combos=[],y.comboTrees=[],y.width=300,y.height=300,y.bias=[],y.nodeMap={},y.oriComboMap={},y.indexMap={},y.comboMap={},y.previousLayouted=!1,y.updateCfg(m),y}return T.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},T.prototype.execute=function(){var m=this,y=m.nodes,v=m.center;if(m.comboTree={id:"comboTreeRoot",depth:-1,children:m.comboTrees},!y||y.length===0){m.onLayoutEnd&&m.onLayoutEnd();return}if(y.length===1){y[0].x=v[0],y[0].y=v[1],m.onLayoutEnd&&m.onLayoutEnd();return}m.initVals(),m.run(),m.onLayoutEnd&&m.onLayoutEnd()},T.prototype.run=function(){var m=this,y=m.nodes,v=m.previousLayouted?m.maxIteration/5:m.maxIteration;!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight);var p=m.center,g=m.velocityDecay,I=m.comboMap;m.previousLayouted||m.initPos(I);for(var _=function(l){var K=[];y.forEach(function(Z,X){K[X]={x:0,y:0}}),m.applyCalculate(K),m.applyComboCenterForce(K),y.forEach(function(Z,X){!(0,k.isNumber)(Z.x)||!(0,k.isNumber)(Z.y)||(Z.x+=K[X].x*g,Z.y+=K[X].y*g)}),m.alpha+=(m.alphaTarget-m.alpha)*m.alphaDecay,m.onTick()},C=0;C<v;C++)_(C);var O=[0,0];y.forEach(function(l){!(0,k.isNumber)(l.x)||!(0,k.isNumber)(l.y)||(O[0]+=l.x,O[1]+=l.y)}),O[0]/=y.length,O[1]/=y.length;var b=[p[0]-O[0],p[1]-O[1]];y.forEach(function(l,K){!(0,k.isNumber)(l.x)||!(0,k.isNumber)(l.y)||(l.x+=b[0],l.y+=b[1])}),m.combos.forEach(function(l){var K=I[l.id];K&&K.empty&&(l.x=K.cx||l.x,l.y=K.cy||l.y)}),m.previousLayouted=!0},T.prototype.initVals=function(){var m=this,y=m.edges,v=m.nodes,p=m.combos,g={},I={},_={};v.forEach(function(It,de){I[It.id]=It,_[It.id]=de}),m.nodeMap=I,m.indexMap=_;var C={};p.forEach(function(It){C[It.id]=It}),m.oriComboMap=C,m.comboMap=m.getComboMap();var O=m.preventOverlap;m.preventComboOverlap=m.preventComboOverlap||O,m.preventNodeOverlap=m.preventNodeOverlap||O;var b=m.collideStrength;b&&(m.comboCollideStrength=b,m.nodeCollideStrength=b),m.comboCollideStrength=m.comboCollideStrength?m.comboCollideStrength:0,m.nodeCollideStrength=m.nodeCollideStrength?m.nodeCollideStrength:0;for(var l=0;l<y.length;++l){var K=(0,k.getEdgeTerminal)(y[l],"source"),Z=(0,k.getEdgeTerminal)(y[l],"target");g[K]?g[K]++:g[K]=1,g[Z]?g[Z]++:g[Z]=1}for(var X=[],l=0;l<y.length;++l){var K=(0,k.getEdgeTerminal)(y[l],"source"),Z=(0,k.getEdgeTerminal)(y[l],"target");X[l]=g[K]/(g[K]+g[Z])}this.bias=X;var W=m.nodeSize,U=m.nodeSpacing,et,at;if((0,k.isNumber)(U)?at=function(){return U}:(0,k.isFunction)(U)?at=U:at=function(){return 0},this.nodeSpacing=at,!W)et=function(It){if(It.size){if((0,k.isArray)(It.size)){var de=It.size[0]>It.size[1]?It.size[0]:It.size[1];return de/2}if((0,k.isObject)(It.size)){var de=It.size.width>It.size.height?It.size.width:It.size.height;return de/2}return It.size/2}return 10};else if((0,k.isFunction)(W))et=function(It){return W(It)};else if((0,k.isArray)(W)){var J=W[0]>W[1]?W[0]:W[1],nt=J/2;et=function(It){return nt}}else{var mt=W/2;et=function(It){return mt}}this.nodeSize=et;var Mt=m.comboSpacing,vt;(0,k.isNumber)(Mt)?vt=function(){return Mt}:(0,k.isFunction)(Mt)?vt=Mt:vt=function(){return 0},this.comboSpacing=vt;var zt=m.comboPadding,re;(0,k.isNumber)(zt)?re=function(){return zt}:(0,k.isArray)(zt)?re=function(){return Math.max.apply(null,zt)}:(0,k.isFunction)(zt)?re=zt:re=function(){return 0},this.comboPadding=re;var Rt=this.linkDistance,At;Rt||(Rt=10),(0,k.isNumber)(Rt)?At=function(It){return Rt}:At=Rt,this.linkDistance=At;var Q=this.edgeStrength,gt;Q||(Q=1),(0,k.isNumber)(Q)?gt=function(It){return Q}:gt=Q,this.edgeStrength=gt;var Vt=this.nodeStrength,Ht;Vt||(Vt=30),(0,k.isNumber)(Vt)?Ht=function(It){return Vt}:Ht=Vt,this.nodeStrength=Ht},T.prototype.initPos=function(m){var y=this,v=y.nodes;v.forEach(function(p,g){var I=p.comboId,_=m[I];I&&_?(p.x=_.cx+100/(g+1),p.y=_.cy+100/(g+1)):(p.x=100/(g+1),p.y=100/(g+1))})},T.prototype.getComboMap=function(){var m=this,y=m.nodeMap,v=m.comboTrees,p=m.oriComboMap,g={};return(v||[]).forEach(function(I){var _=[];(0,k.traverseTreeUp)(I,function(C){if(C.itemType==="node"||!p[C.id])return!0;if(g[C.id]===void 0){var O={id:C.id,name:C.id,cx:0,cy:0,count:0,depth:m.oriComboMap[C.id].depth||0,children:[]};g[C.id]=O}var b=C.children;b&&b.forEach(function(Z){if(!g[Z.id]&&!y[Z.id])return!0;_.push(Z)});var l=g[C.id];if(l.cx=0,l.cy=0,_.length===0){l.empty=!0;var K=p[C.id];l.cx=K.x,l.cy=K.y}return _.forEach(function(Z){if(l.count++,Z.itemType!=="node"){var X=g[Z.id];(0,k.isNumber)(X.cx)&&(l.cx+=X.cx),(0,k.isNumber)(X.cy)&&(l.cy+=X.cy);return}var W=y[Z.id];W&&((0,k.isNumber)(W.x)&&(l.cx+=W.x),(0,k.isNumber)(W.y)&&(l.cy+=W.y))}),l.cx/=l.count||1,l.cy/=l.count||1,l.children=_,!0})}),g},T.prototype.applyComboCenterForce=function(m){var y=this,v=y.gravity,p=y.comboGravity||v,g=this.alpha,I=y.comboTrees,_=y.indexMap,C=y.nodeMap,O=y.comboMap;(I||[]).forEach(function(b){(0,k.traverseTreeUp)(b,function(l){if(l.itemType==="node")return!0;var K=O[l.id];if(!K)return!0;var Z=O[l.id],X=(Z.depth+1)/10*.5,W=Z.cx,U=Z.cy;return Z.cx=0,Z.cy=0,Z.children.forEach(function(et){if(et.itemType!=="node"){var at=O[et.id];at&&(0,k.isNumber)(at.cx)&&(Z.cx+=at.cx),at&&(0,k.isNumber)(at.cy)&&(Z.cy+=at.cy);return}var J=C[et.id],nt=J.x-W||.005,mt=J.y-U||.005,Mt=Math.sqrt(nt*nt+mt*mt),vt=_[J.id],zt=p*g/Mt*X;m[vt].x-=nt*zt,m[vt].y-=mt*zt,(0,k.isNumber)(J.x)&&(Z.cx+=J.x),(0,k.isNumber)(J.y)&&(Z.cy+=J.y)}),Z.cx/=Z.count||1,Z.cy/=Z.count||1,!0})})},T.prototype.applyCalculate=function(m){var y=this,v=y.comboMap,p=y.nodes,g={};p.forEach(function(_,C){p.forEach(function(O,b){if(!(C<b)){var l=_.x-O.x||.005,K=_.y-O.y||.005,Z=l*l+K*K,X=Math.sqrt(Z);Z<1&&(Z=X),g["".concat(_.id,"-").concat(O.id)]={vx:l,vy:K,vl2:Z,vl:X},g["".concat(O.id,"-").concat(_.id)]={vl2:Z,vl:X,vx:-l,vy:-K}}})}),y.updateComboSizes(v),y.calRepulsive(m,g),y.calAttractive(m,g);var I=y.preventComboOverlap;I&&y.comboNonOverlapping(m,v)},T.prototype.updateComboSizes=function(m){var y=this,v=y.comboTrees,p=y.nodeMap,g=y.nodeSize,I=y.comboSpacing,_=y.comboPadding;(v||[]).forEach(function(C){var O=[];(0,k.traverseTreeUp)(C,function(b){if(b.itemType==="node")return!0;var l=m[b.id];if(!l)return!1;var K=b.children;K&&K.forEach(function(W){!m[W.id]&&!p[W.id]||O.push(W)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,O.forEach(function(W){if(W.itemType!=="node")return!0;var U=p[W.id];if(!U)return!0;var et=g(U),at=U.x-et,J=U.y-et,nt=U.x+et,mt=U.y+et;l.minX>at&&(l.minX=at),l.minY>J&&(l.minY=J),l.maxX<nt&&(l.maxX=nt),l.maxY<mt&&(l.maxY=mt)});var Z=y.oriComboMap[b.id].size||10;(0,k.isArray)(Z)&&(Z=Z[0]);var X=Math.max(l.maxX-l.minX,l.maxY-l.minY,Z);return l.r=X/2+I(l)/2+_(l),!0})})},T.prototype.comboNonOverlapping=function(m,y){var v=this,p=v.comboTree,g=v.comboCollideStrength,I=v.indexMap,_=v.nodeMap;(0,k.traverseTreeUp)(p,function(C){if(!y[C.id]&&!_[C.id]&&C.id!=="comboTreeRoot")return!1;var O=C.children;return O&&O.length>1&&O.forEach(function(b,l){if(b.itemType==="node")return!1;var K=y[b.id];K&&O.forEach(function(Z,X){if(l<=X||Z.itemType==="node")return!1;var W=y[Z.id];if(!W)return!1;var U=K.cx-W.cx||.005,et=K.cy-W.cy||.005,at=U*U+et*et,J=K.r||1,nt=W.r||1,mt=J+nt,Mt=nt*nt,vt=J*J;if(at<mt*mt){var zt=b.children;if(!zt||zt.length===0)return!1;var re=Z.children;if(!re||re.length===0)return!1;var Rt=Math.sqrt(at),At=(mt-Rt)/Rt*g,Q=U*At,gt=et*At,Vt=Mt/(vt+Mt),Ht=1-Vt;zt.forEach(function(It){if(It.itemType!=="node")return!1;if(_[It.id]){var de=I[It.id];re.forEach(function(De){if(De.itemType!=="node"||!_[De.id])return!1;var Ye=I[De.id];m[de].x+=Q*Vt,m[de].y+=gt*Vt,m[Ye].x-=Q*Ht,m[Ye].y-=gt*Ht})}})}})}),!0})},T.prototype.calRepulsive=function(m,y){var v=this,p=v.nodes,g=v.width*v.optimizeRangeFactor,I=v.nodeStrength,_=v.alpha,C=v.nodeCollideStrength,O=v.preventNodeOverlap,b=v.nodeSize,l=v.nodeSpacing,K=v.depthRepulsiveForceScale,Z=v.center;p.forEach(function(X,W){if(!(!X.x||!X.y)){if(Z){var U=v.gravity,et=X.x-Z[0]||.005,at=X.y-Z[1]||.005,J=Math.sqrt(et*et+at*at);m[W].x-=et*U*_/J,m[W].y-=at*U*_/J}p.forEach(function(nt,mt){if(W!==mt&&!(!nt.x||!nt.y)){var Mt=y["".concat(X.id,"-").concat(nt.id)],vt=Mt.vl2,zt=Mt.vl;if(!(zt>g)){var re=y["".concat(X.id,"-").concat(nt.id)],Rt=re.vx,At=re.vy,Q=Math.log(Math.abs(nt.depth-X.depth)/10)+1||1;Q=Q<1?1:Q,nt.comboId!==X.comboId&&(Q+=1);var gt=Q?Math.pow(K,Q):1,Vt=I(nt)*_/vt*gt;if(m[W].x+=Rt*Vt,m[W].y+=At*Vt,W<mt&&O){var Ht=b(X)+l(X)||1,It=b(nt)+l(nt)||1,de=Ht+It;if(vt<de*de){var De=(de-zt)/zt*C,Ye=It*It,kt=Ye/(Ht*Ht+Ye),Pt=Rt*De,_t=At*De;m[W].x+=Pt*kt,m[W].y+=_t*kt,kt=1-kt,m[mt].x-=Pt*kt,m[mt].y-=_t*kt}}}}})}})},T.prototype.calAttractive=function(m,y){var v=this,p=v.edges,g=v.linkDistance,I=v.alpha,_=v.edgeStrength,C=v.bias,O=v.depthAttractiveForceScale;p.forEach(function(b,l){var K=(0,k.getEdgeTerminal)(b,"source"),Z=(0,k.getEdgeTerminal)(b,"target");if(!(!K||!Z||K===Z)){var X=v.indexMap[K],W=v.indexMap[Z],U=v.nodeMap[K],et=v.nodeMap[Z];if(!(!U||!et)){var at=U.depth===et.depth?0:Math.log(Math.abs(U.depth-et.depth)/10);U.comboId===et.comboId&&(at=at/2);var J=at?Math.pow(O,at):1;if(U.comboId!==et.comboId&&J===1?J=O/2:U.comboId===et.comboId&&(J=2),!(!(0,k.isNumber)(et.x)||!(0,k.isNumber)(U.x)||!(0,k.isNumber)(et.y)||!(0,k.isNumber)(U.y))){var nt=y["".concat(Z,"-").concat(K)],mt=nt.vl,Mt=nt.vx,vt=nt.vy,zt=(mt-g(b))/mt*I*_(b)*J,re=Mt*zt,Rt=vt*zt,At=C[l];m[W].x-=re*At,m[W].y-=Rt*At,m[X].x+=re*(1-At),m[X].y+=Rt*(1-At)}}}})},T.prototype.getType=function(){return"comboForce"},T}(z.Base);w.ComboForceLayout=E},90127:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var N=function(T,m){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(y[p]=v[p])},N(T,m)};return function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");N(T,m);function y(){this.constructor=T}T.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.ConcentricLayout=void 0;var z=S(78302),k=S(94416),E=function(N){x(T,N);function T(m){var y=N.call(this)||this;return y.nodeSize=30,y.minNodeSpacing=10,y.nodeSpacing=10,y.preventOverlap=!1,y.equidistant=!1,y.startAngle=3/2*Math.PI,y.clockwise=!0,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.onLayoutEnd=function(){},y.updateCfg(m),y}return T.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},T.prototype.execute=function(){var m,y,v=this,p=v.nodes,g=v.edges,I=p.length;if(I===0){(m=v.onLayoutEnd)===null||m===void 0||m.call(v);return}!v.width&&typeof window!="undefined"&&(v.width=window.innerWidth),!v.height&&typeof window!="undefined"&&(v.height=window.innerHeight),v.center||(v.center=[v.width/2,v.height/2]);var _=v.center;if(I===1){p[0].x=_[0],p[0].y=_[1],(y=v.onLayoutEnd)===null||y===void 0||y.call(v);return}var C=v.nodeSize,O=v.nodeSpacing,b=[],l,K=0;(0,z.isArray)(C)?l=Math.max(C[0],C[1]):l=C,(0,z.isArray)(O)?K=Math.max(O[0],O[1]):(0,z.isNumber)(O)&&(K=O),p.forEach(function(Q){b.push(Q);var gt=l;(0,z.isArray)(Q.size)?gt=Math.max(Q.size[0],Q.size[1]):(0,z.isNumber)(Q.size)?gt=Q.size:(0,z.isObject)(Q.size)&&(gt=Math.max(Q.size.width,Q.size.height)),l=Math.max(l,gt),(0,z.isFunction)(O)&&(K=Math.max(O(Q),K))}),v.clockwise=v.counterclockwise!==void 0?!v.counterclockwise:v.clockwise;var Z={},X={};if(b.forEach(function(Q,gt){Z[Q.id]=Q,X[Q.id]=gt}),(v.sortBy==="degree"||!(0,z.isString)(v.sortBy)||b[0][v.sortBy]===void 0)&&(v.sortBy="degree",!(0,z.isNumber)(p[0].degree))){var W=(0,z.getDegree)(p.length,X,g);b.forEach(function(Q,gt){Q.degree=W[gt].all})}b.sort(function(Q,gt){return gt[v.sortBy]-Q[v.sortBy]}),v.maxValueNode=b[0],v.maxLevelDiff=v.maxLevelDiff||v.maxValueNode[v.sortBy]/4;var U=[[]],et=U[0];b.forEach(function(Q){if(et.length>0){var gt=Math.abs(et[0][v.sortBy]-Q[v.sortBy]);v.maxLevelDiff&&gt>=v.maxLevelDiff&&(et=[],U.push(et))}et.push(Q)});var at=l+(K||v.minNodeSpacing);if(!v.preventOverlap){var J=U.length>0&&U[0].length>1,nt=Math.min(v.width,v.height)/2-at,mt=nt/(U.length+(J?1:0));at=Math.min(at,mt)}var Mt=0;if(U.forEach(function(Q){var gt=v.sweep;gt===void 0&&(gt=2*Math.PI-2*Math.PI/Q.length);var Vt=Q.dTheta=gt/Math.max(1,Q.length-1);if(Q.length>1&&v.preventOverlap){var Ht=Math.cos(Vt)-Math.cos(0),It=Math.sin(Vt)-Math.sin(0),de=Math.sqrt(at*at/(Ht*Ht+It*It));Mt=Math.max(de,Mt)}Q.r=Mt,Mt+=at}),v.equidistant){for(var vt=0,zt=0,re=0;re<U.length;re++){var Rt=U[re],At=Rt.r-zt;vt=Math.max(vt,At)}zt=0,U.forEach(function(Q,gt){gt===0&&(zt=Q.r),Q.r=zt,zt+=vt})}return U.forEach(function(Q){var gt=Q.dTheta,Vt=Q.r;Q.forEach(function(Ht,It){var de=v.startAngle+(v.clockwise?1:-1)*gt*It;Ht.x=_[0]+Vt*Math.cos(de),Ht.y=_[1]+Vt*Math.sin(de)})}),v.onLayoutEnd&&v.onLayoutEnd(),{nodes:p,edges:g}},T.prototype.getType=function(){return"concentric"},T}(k.Base);w.ConcentricLayout=E},17219:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.FORCE_LAYOUT_TYPE_MAP=w.LAYOUT_MESSAGE=void 0,w.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},w.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},98989:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(g[_]=I[_])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(w,"__esModule",{value:!0}),w.DagreLayout=void 0;var k=z(S(99585)),E=S(78302),N=S(94416),T=S(31892),m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.ranksep=50,g.controlPoints=!1,g.sortByCombo=!1,g.edgeLabelSpace=!0,g.radial=!1,g.nodes=[],g.edges=[],g.onLayoutEnd=function(){},g.layoutNode=function(I){var _=g,C=_.nodes,O=C.find(function(l){return l.id===I});if(O){var b=O.layout!==!1;return b}return!0},g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},v.prototype.execute=function(){var p=this,g,I,_=this,C=_.nodes,O=_.nodeSize,b=_.rankdir,l=_.combos,K=_.begin,Z=_.radial;if(C){var X=_.edges||[],W=new T.Graph({multigraph:!0,compound:!0}),U;O?(0,E.isArray)(O)?U=function(){return O}:U=function(){return[O,O]}:U=function(bt){return bt.size?(0,E.isArray)(bt.size)?bt.size:(0,E.isObject)(bt.size)?[bt.size.width||40,bt.size.height||40]:[bt.size,bt.size]:[40,40]};var et=(0,E.getFunc)(_.ranksep,50,_.ranksepFunc),at=(0,E.getFunc)(_.nodesep,50,_.nodesepFunc),J=at,nt=et;(b==="LR"||b==="RL")&&(J=et,nt=at),W.setDefaultEdgeLabel(function(){return{}}),W.setGraph(_);var mt={};this.sortByCombo&&l&&l.forEach(function(bt){bt.parentId&&(mt[bt.parentId]||(mt[bt.parentId]=!0,W.setNode(bt.parentId,{})),W.setParent(bt.id,bt.parentId))}),C.filter(function(bt){return bt.layout!==!1}).forEach(function(bt){var wt=U(bt),D=nt(bt),rt=J(bt),Nt=wt[0]+2*rt,ft=wt[1]+2*D,ie=bt.layer;(0,E.isNumber)(ie)?W.setNode(bt.id,{width:Nt,height:ft,layer:ie}):W.setNode(bt.id,{width:Nt,height:ft}),p.sortByCombo&&bt.comboId&&(mt[bt.comboId]||(mt[bt.comboId]=!0,W.setNode(bt.comboId,{})),W.setParent(bt.id,bt.comboId))}),X.forEach(function(bt){var wt=(0,E.getEdgeTerminal)(bt,"source"),D=(0,E.getEdgeTerminal)(bt,"target");p.layoutNode(wt)&&p.layoutNode(D)&&W.setEdge(wt,D,{weight:bt.weight||1})});var Mt=void 0;!((g=_.preset)===null||g===void 0)&&g.nodes&&(Mt=new T.Graph({multigraph:!0,compound:!0}),_.preset.nodes.forEach(function(bt){Mt==null||Mt.setNode(bt.id,bt)})),k.default.layout(W,{prevGraph:Mt,edgeLabelSpace:_.edgeLabelSpace,keepNodeOrder:Boolean(!!_.nodeOrder),nodeOrder:_.nodeOrder});var vt=[0,0];if(K){var zt=1/0,re=1/0;W.nodes().forEach(function(bt){var wt=W.node(bt);zt>wt.x&&(zt=wt.x),re>wt.y&&(re=wt.y)}),W.edges().forEach(function(bt){var wt,D=W.edge(bt);(wt=D.points)===null||wt===void 0||wt.forEach(function(rt){zt>rt.x&&(zt=rt.x),re>rt.y&&(re=rt.y)})}),vt[0]=K[0]-zt,vt[1]=K[1]-re}if(Z){var Rt=this,At=Rt.focusNode,Q=Rt.ranksep,gt=Rt.getRadialPos,Vt=(0,E.isString)(At)?At:At==null?void 0:At.id,Ht=Vt?(I=W.node(Vt))===null||I===void 0?void 0:I._rank:0,It=[],de=b==="LR"||b==="RL",De=de?"y":"x",Ye=de?"height":"width",kt=1/0,Pt=-1/0;W.nodes().forEach(function(bt){var wt=W.node(bt),D=C.findIndex(function(Ge){return Ge.id===bt});if(C[D]){var rt=at(C[D]);if(Ht===0)It[wt._rank]||(It[wt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),It[wt._rank].nodes.push(bt),It[wt._rank].totalWidth+=rt*2+wt[Ye],It[wt._rank].maxSize<Math.max(wt.width,wt.height)&&(It[wt._rank].maxSize=Math.max(wt.width,wt.height));else{var Nt=wt._rank-Ht;if(Nt===0)It[Nt]||(It[Nt]={nodes:[],totalWidth:0,maxSize:-1/0}),It[Nt].nodes.push(bt),It[Nt].totalWidth+=rt*2+wt[Ye],It[Nt].maxSize<Math.max(wt.width,wt.height)&&(It[Nt].maxSize=Math.max(wt.width,wt.height));else{var ft=Math.abs(Nt);It[ft]||(It[ft]={left:[],right:[],totalWidth:0,maxSize:-1/0}),It[ft].totalWidth+=rt*2+wt[Ye],It[ft].maxSize<Math.max(wt.width,wt.height)&&(It[ft].maxSize=Math.max(wt.width,wt.height)),Nt<0?It[ft].left.push(bt):It[ft].right.push(bt)}}var ie=wt[De]-wt[Ye]/2-rt,ge=wt[De]+wt[Ye]/2+rt;ie<kt&&(kt=ie),ge>Pt&&(Pt=ge)}});var _t=Q||50,jt={},Qt=(Pt-kt)/.9,Tt=[(kt+Pt-Qt)*.5,(kt+Pt+Qt)*.5],Zt=function(bt,wt,D,rt){D===void 0&&(D=-1/0),rt===void 0&&(rt=[0,1]);var Nt=D;return bt.forEach(function(ft){var ie=W.node(ft);jt[ft]=wt;var ge=gt(ie[De],Tt,Qt,wt,rt),Ge=ge.x,Re=ge.y,qe=C.findIndex(function(le){return le.id===ft});if(C[qe]){C[qe].x=Ge+vt[0],C[qe].y=Re+vt[1],C[qe]._order=ie._order;var Ve=et(C[qe]);Nt<Ve&&(Nt=Ve)}}),Nt},Ee=!0,dt=0;It.forEach(function(bt){var wt,D,rt,Nt,ft,ie,ge;if(!(!(!((wt=bt==null?void 0:bt.nodes)===null||wt===void 0)&&wt.length)&&!(!((D=bt==null?void 0:bt.left)===null||D===void 0)&&D.length)&&!(!((rt=bt==null?void 0:bt.right)===null||rt===void 0)&&rt.length))){if(Ee&&bt.nodes.length===1){var Ge=C.findIndex(function(Ve){return Ve.id===bt.nodes[0]});C[Ge].x=vt[0],C[Ge].y=vt[1],jt[bt.nodes[0]]=0,_t=et(C[Ge]),Ee=!1;return}_t=Math.max(_t,bt.totalWidth/(2*Math.PI));var Re=-1/0;if(Ht===0||!((Nt=bt.nodes)===null||Nt===void 0)&&Nt.length)Re=Zt(bt.nodes,_t,Re,[0,1]);else{var qe=((ft=bt.left)===null||ft===void 0?void 0:ft.length)/(((ie=bt.left)===null||ie===void 0?void 0:ie.length)+((ge=bt.right)===null||ge===void 0?void 0:ge.length));Re=Zt(bt.left,_t,Re,[0,qe]),Re=Zt(bt.right,_t,Re,[qe+.05,1])}_t+=Re,Ee=!1,dt-bt.maxSize}}),W.edges().forEach(function(bt){var wt,D,rt,Nt=W.edge(bt),ft=X.findIndex(function(Le){var je=(0,E.getEdgeTerminal)(Le,"source"),Be=(0,E.getEdgeTerminal)(Le,"target");return je===bt.v&&Be===bt.w});if(_.edgeLabelSpace&&_.controlPoints&&X[ft].type!=="loop"){var ie=De==="x"?"y":"x",ge=(wt=Nt==null?void 0:Nt.points)===null||wt===void 0?void 0:wt.slice(1,Nt.points.length-1),Ge=[],Re=(D=W.node(bt.v))===null||D===void 0?void 0:D[ie],qe=Re-((rt=W.node(bt.w))===null||rt===void 0?void 0:rt[ie]),Ve=jt[bt.v],le=Ve-jt[bt.w];ge==null||ge.forEach(function(Le){var je=(Le[ie]-Re)/qe*le+Ve,Be=gt(Le[De],Tt,Qt,je);Ge.push({x:Be.x+vt[0],y:Be.y+vt[1]})}),X[ft].controlPoints=Ge}})}else W.nodes().forEach(function(bt){var wt=W.node(bt),D=C.findIndex(function(rt){return rt.id===bt});C[D]&&(C[D].x=wt.x+vt[0],C[D].y=wt.y+vt[1],C[D]._order=wt._order)}),W.edges().forEach(function(bt){var wt,D=W.edge(bt),rt=X.findIndex(function(Nt){var ft=(0,E.getEdgeTerminal)(Nt,"source"),ie=(0,E.getEdgeTerminal)(Nt,"target");return ft===bt.v&&ie===bt.w});_.edgeLabelSpace&&_.controlPoints&&X[rt].type!=="loop"&&(X[rt].controlPoints=(wt=D==null?void 0:D.points)===null||wt===void 0?void 0:wt.slice(1,D.points.length-1),X[rt].controlPoints.forEach(function(Nt){Nt.x+=vt[0],Nt.y+=vt[1]}))});return _.onLayoutEnd&&_.onLayoutEnd(),{nodes:C,edges:X}}},v.prototype.getRadialPos=function(p,g,I,_,C){C===void 0&&(C=[0,1]);var O=(p-g[0])/I;O=O*(C[1]-C[0])+C[0];var b=O*2*Math.PI;return{x:Math.cos(b)*_,y:Math.sin(b)*_}},v.prototype.getType=function(){return"dagre"},v}(N.Base);w.DagreLayout=m},31892:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var E=function(N,T){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(m[v]=y[v])},E(N,T)};return function(N,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");E(N,T);function m(){this.constructor=N}N.prototype=T===null?Object.create(T):(m.prototype=T.prototype,new m)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.Graph=void 0;var z=S(20156),k=function(E){x(N,E);function N(){return E!==null&&E.apply(this,arguments)||this}return N}(z.Graph);w.Graph=k},99585:function(ae,w,S){"use strict";var x=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(w,"__esModule",{value:!0});var z=x(S(14354)),k=S(55998);w.default={layout:z.default,util:{time:k.time,notime:k.notime}}},9187:function(ae,w,S){"use strict";var x=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(w,"__esModule",{value:!0});var z=x(S(74668)),k=function(T){var m=function(v){return function(p){var g;return((g=v.edge(p))===null||g===void 0?void 0:g.weight)||1}},y=T.graph().acyclicer==="greedy"?(0,z.default)(T,m(T)):E(T);y==null||y.forEach(function(v){var p=T.edge(v);T.removeEdgeObj(v),p.forwardName=v.name,p.reversed=!0,T.setEdge(v.w,v.v,p,"rev-".concat(Math.random()))})},E=function(T){var m=[],y={},v={},p=function(g){var I;v[g]||(v[g]=!0,y[g]=!0,(I=T.outEdges(g))===null||I===void 0||I.forEach(function(_){y[_.w]?m.push(_):p(_.w)}),delete y[g])};return T.nodes().forEach(p),m},N=function(T){T.edges().forEach(function(m){var y=T.edge(m);if(y.reversed){T.removeEdgeObj(m);var v=y.forwardName;delete y.reversed,delete y.forwardName,T.setEdge(m.w,m.v,y,v)}})};w.default={run:k,undo:N}},41054:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(55998),z=function(E){var N,T=function(m){var y=E.children(m),v=E.node(m);if(y!=null&&y.length&&y.forEach(function(I){return T(I)}),v.hasOwnProperty("minRank")){v.borderLeft=[],v.borderRight=[];for(var p=v.minRank,g=v.maxRank+1;p<g;p+=1)k(E,"borderLeft","_bl",m,v,p),k(E,"borderRight","_br",m,v,p)}};(N=E.children())===null||N===void 0||N.forEach(function(m){return T(m)})},k=function(E,N,T,m,y,v){var p={rank:v,borderType:N,width:0,height:0},g=y[N][v-1],I=(0,x.addDummyNode)(E,"border",p,T);y[N][v]=I,E.setParent(I,m),g&&E.setEdge(g,I,{weight:1})};w.default=z},16641:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(y){var v,p=(v=y.graph().rankdir)===null||v===void 0?void 0:v.toLowerCase();(p==="lr"||p==="rl")&&z(y)},x=function(y){var v,p=(v=y.graph().rankdir)===null||v===void 0?void 0:v.toLowerCase();(p==="bt"||p==="rl")&&E(y),(p==="lr"||p==="rl")&&(T(y),z(y))},z=function(y){y.nodes().forEach(function(v){k(y.node(v))}),y.edges().forEach(function(v){k(y.edge(v))})},k=function(y){var v=y.width;y.width=y.height,y.height=v},E=function(y){y.nodes().forEach(function(v){N(y.node(v))}),y.edges().forEach(function(v){var p,g=y.edge(v);(p=g.points)===null||p===void 0||p.forEach(function(I){return N(I)}),g.hasOwnProperty("y")&&N(g)})},N=function(y){y!=null&&y.y&&(y.y=-y.y)},T=function(y){y.nodes().forEach(function(v){m(y.node(v))}),y.edges().forEach(function(v){var p,g=y.edge(v);(p=g.points)===null||p===void 0||p.forEach(function(I){return m(I)}),g.hasOwnProperty("x")&&m(g)})},m=function(y){var v=y.x;y.x=y.y,y.y=v};w.default={adjust:S,undo:x}},90679:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(k,E){if(k!=="next"&&k!=="prev")return E},x=function(k){k.prev.next=k.next,k.next.prev=k.prev,delete k.next,delete k.prev},z=function(){function k(){var E={};E.prev=E,E.next=E.prev,this.shortcut=E}return k.prototype.dequeue=function(){var E=this.shortcut,N=E.prev;if(N&&N!==E)return x(N),N},k.prototype.enqueue=function(E){var N=this.shortcut;E.prev&&E.next&&x(E),E.next=N.next,N.next.prev=E,N.next=E,E.prev=N},k.prototype.toString=function(){for(var E=[],N=this.shortcut,T=N.prev;T!==N;)E.push(JSON.stringify(T,S)),T=T==null?void 0:T.prev;return"[".concat(E.join(", "),"]")},k}();w.default=z},74668:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var _=function(C,O){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,l){b.__proto__=l}||function(b,l){for(var K in l)Object.prototype.hasOwnProperty.call(l,K)&&(b[K]=l[K])},_(C,O)};return function(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");_(C,O);function b(){this.constructor=C}C.prototype=O===null?Object.create(O):(b.prototype=O.prototype,new b)}}(),z=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(w,"__esModule",{value:!0});var k=z(S(90679)),E=S(20156),N=function(_){x(C,_);function C(){return _!==null&&_.apply(this,arguments)||this}return C}(k.default),T=function(_){x(C,_);function C(){return _!==null&&_.apply(this,arguments)||this}return C}(E.Graph),m=function(){return 1},y=function(_,C){var O;if(_.nodeCount()<=1)return[];var b=g(_,C||m),l=v(b.graph,b.buckets,b.zeroIdx);return(O=l.map(function(K){return _.outEdges(K.v,K.w)}))===null||O===void 0?void 0:O.flat()},v=function(_,C,O){for(var b=[],l=C[C.length-1],K=C[0],Z;_.nodeCount();){for(;Z=K.dequeue();)p(_,C,O,Z);for(;Z=l.dequeue();)p(_,C,O,Z);if(_.nodeCount()){for(var X=C.length-2;X>0;--X)if(Z=C[X].dequeue(),Z){b=b.concat(p(_,C,O,Z,!0));break}}}return b},p=function(_,C,O,b,l){var K,Z,X=[];return(K=_.inEdges(b.v))===null||K===void 0||K.forEach(function(W){var U=_.edge(W),et=_.node(W.v);l&&X.push({v:W.v,w:W.w,in:0,out:0}),et.out===void 0&&(et.out=0),et.out-=U,I(C,O,et)}),(Z=_.outEdges(b.v))===null||Z===void 0||Z.forEach(function(W){var U=_.edge(W),et=W.w,at=_.node(et);at.in===void 0&&(at.in=0),at.in-=U,I(C,O,at)}),_.removeNode(b.v),l?X:void 0},g=function(_,C){var O=new T,b=0,l=0;_.nodes().forEach(function(U){O.setNode(U,{v:U,in:0,out:0})}),_.edges().forEach(function(U){var et=O.edge(U)||0,at=(C==null?void 0:C(U))||1,J=et+at;O.setEdge(U.v,U.w,J),l=Math.max(l,O.node(U.v).out+=at),b=Math.max(b,O.node(U.w).in+=at)});for(var K=[],Z=l+b+3,X=0;X<Z;X++)K.push(new N);var W=b+1;return O.nodes().forEach(function(U){I(K,W,O.node(U))}),{buckets:K,zeroIdx:W,graph:O}},I=function(_,C,O){O.out?O.in?_[O.out-O.in+C].enqueue(O):_[_.length-1].enqueue(O):_[0].enqueue(O)};w.default=y},14354:function(ae,w,S){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(kt){for(var Pt,_t=1,jt=arguments.length;_t<jt;_t++){Pt=arguments[_t];for(var Qt in Pt)Object.prototype.hasOwnProperty.call(Pt,Qt)&&(kt[Qt]=Pt[Qt])}return kt},x.apply(this,arguments)},z=this&&this.__importDefault||function(kt){return kt&&kt.__esModule?kt:{default:kt}};Object.defineProperty(w,"__esModule",{value:!0});var k=z(S(9187)),E=z(S(97910)),N=z(S(68750)),T=S(55998),m=z(S(53134)),y=z(S(85059)),v=z(S(41054)),p=z(S(16641)),g=z(S(61795)),I=z(S(11977)),_=z(S(1745)),C=S(31892),O=function(kt,Pt){var _t=Pt&&Pt.debugTiming?T.time:T.notime;_t("layout",function(){Pt&&!Pt.keepNodeOrder&&Pt.prevGraph&&_t("  inheritOrder",function(){l(kt,Pt.prevGraph)});var jt=_t("  buildLayoutGraph",function(){return mt(kt)});Pt&&Pt.edgeLabelSpace===!1||_t("  makeSpaceForEdgeLabels",function(){Mt(jt)});try{_t("  runLayout",function(){b(jt,_t,Pt)})}catch(Qt){if(Qt.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,Qt);return}throw Qt}_t("  updateInputGraph",function(){K(kt,jt)})})},b=function(kt,Pt,_t){Pt("    removeSelfEdges",function(){Ht(kt)}),Pt("    acyclic",function(){k.default.run(kt)}),Pt("    nestingGraph.run",function(){y.default.run(kt)}),Pt("    rank",function(){(0,N.default)((0,T.asNonCompoundGraph)(kt))}),Pt("    injectEdgeLabelProxies",function(){vt(kt)}),Pt("    removeEmptyRanks",function(){(0,T.removeEmptyRanks)(kt)}),Pt("    nestingGraph.cleanup",function(){y.default.cleanup(kt)}),Pt("    normalizeRanks",function(){(0,T.normalizeRanks)(kt)}),Pt("    assignRankMinMax",function(){zt(kt)}),Pt("    removeEdgeLabelProxies",function(){re(kt)}),Pt("    normalize.run",function(){E.default.run(kt)}),Pt("    parentDummyChains",function(){(0,m.default)(kt)}),Pt("    addBorderSegments",function(){(0,v.default)(kt)}),_t&&_t.keepNodeOrder&&Pt("    initDataOrder",function(){(0,_.default)(kt,_t.nodeOrder)}),Pt("    order",function(){(0,g.default)(kt)}),Pt("    insertSelfEdges",function(){It(kt)}),Pt("    adjustCoordinateSystem",function(){p.default.adjust(kt)}),Pt("    position",function(){(0,I.default)(kt)}),Pt("    positionSelfEdges",function(){de(kt)}),Pt("    removeBorderNodes",function(){Vt(kt)}),Pt("    normalize.undo",function(){E.default.undo(kt)}),Pt("    fixupEdgeLabelCoords",function(){Q(kt)}),Pt("    undoCoordinateSystem",function(){p.default.undo(kt)}),Pt("    translateGraph",function(){Rt(kt)}),Pt("    assignNodeIntersects",function(){At(kt)}),Pt("    reversePoints",function(){gt(kt)}),Pt("    acyclic.undo",function(){k.default.undo(kt)})},l=function(kt,Pt){kt.nodes().forEach(function(_t){var jt=kt.node(_t),Qt=Pt.node(_t);Qt!==void 0?(jt.fixorder=Qt._order,delete Qt._order):delete jt.fixorder})},K=function(kt,Pt){kt.nodes().forEach(function(_t){var jt,Qt=kt.node(_t);if(Qt){var Tt=Pt.node(_t);Qt.x=Tt.x,Qt.y=Tt.y,Qt._order=Tt.order,Qt._rank=Tt.rank,!((jt=Pt.children(_t))===null||jt===void 0)&&jt.length&&(Qt.width=Tt.width,Qt.height=Tt.height)}}),kt.edges().forEach(function(_t){var jt=kt.edge(_t),Qt=Pt.edge(_t);jt.points=Qt.points,Qt.hasOwnProperty("x")&&(jt.x=Qt.x,jt.y=Qt.y)}),kt.graph().width=Pt.graph().width,kt.graph().height=Pt.graph().height},Z=["nodesep","edgesep","ranksep","marginx","marginy"],X={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W=["acyclicer","ranker","rankdir","align"],U=["width","height","layer","fixorder"],et={width:0,height:0},at=["minlen","weight","width","height","labeloffset"],J={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},nt=["labelpos"],mt=function(kt){var Pt=new C.Graph({multigraph:!0,compound:!0}),_t=Ye(kt.graph()),jt={};return W==null||W.forEach(function(Qt){_t[Qt]!==void 0&&(jt[Qt]=_t[Qt])}),Pt.setGraph(Object.assign({},X,De(_t,Z),jt)),kt.nodes().forEach(function(Qt){var Tt=Ye(kt.node(Qt)),Zt=x(x({},et),Tt),Ee=De(Zt,U);Pt.setNode(Qt,Ee),Pt.setParent(Qt,kt.parent(Qt))}),kt.edges().forEach(function(Qt){var Tt=Ye(kt.edge(Qt)),Zt={};nt==null||nt.forEach(function(Ee){Tt[Ee]!==void 0&&(Zt[Ee]=Tt[Ee])}),Pt.setEdgeObj(Qt,Object.assign({},J,De(Tt,at),Zt))}),Pt},Mt=function(kt){var Pt=kt.graph();Pt.ranksep||(Pt.ranksep=0),Pt.ranksep/=2,kt.nodes().forEach(function(_t){var jt=kt.node(_t);isNaN(jt.layer)||jt.layer||(jt.layer=0)}),kt.edges().forEach(function(_t){var jt,Qt=kt.edge(_t);Qt.minlen*=2,((jt=Qt.labelpos)===null||jt===void 0?void 0:jt.toLowerCase())!=="c"&&(Pt.rankdir==="TB"||Pt.rankdir==="BT"?Qt.width+=Qt.labeloffset:Qt.height+=Qt.labeloffset)})},vt=function(kt){kt.edges().forEach(function(Pt){var _t=kt.edge(Pt);if(_t.width&&_t.height){var jt=kt.node(Pt.v),Qt=kt.node(Pt.w),Tt={e:Pt,rank:(Qt.rank-jt.rank)/2+jt.rank};(0,T.addDummyNode)(kt,"edge-proxy",Tt,"_ep")}})},zt=function(kt){var Pt=0;kt.nodes().forEach(function(_t){var jt,Qt,Tt=kt.node(_t);Tt.borderTop&&(Tt.minRank=(jt=kt.node(Tt.borderTop))===null||jt===void 0?void 0:jt.rank,Tt.maxRank=(Qt=kt.node(Tt.borderBottom))===null||Qt===void 0?void 0:Qt.rank,Pt=Math.max(Pt,Tt.maxRank||-1/0))}),kt.graph().maxRank=Pt},re=function(kt){kt.nodes().forEach(function(Pt){var _t=kt.node(Pt);_t.dummy==="edge-proxy"&&(kt.edge(_t.e).labelRank=_t.rank,kt.removeNode(Pt))})},Rt=function(kt){var Pt,_t=0,jt,Qt=0,Tt=kt.graph(),Zt=Tt.marginx||0,Ee=Tt.marginy||0,dt=function(bt){if(bt){var wt=bt.x,D=bt.y,rt=bt.width,Nt=bt.height;!isNaN(wt)&&!isNaN(rt)&&(Pt===void 0&&(Pt=wt-rt/2),Pt=Math.min(Pt,wt-rt/2),_t=Math.max(_t,wt+rt/2)),!isNaN(D)&&!isNaN(Nt)&&(jt===void 0&&(jt=D-Nt/2),jt=Math.min(jt,D-Nt/2),Qt=Math.max(Qt,D+Nt/2))}};kt.nodes().forEach(function(bt){dt(kt.node(bt))}),kt.edges().forEach(function(bt){var wt=kt.edge(bt);wt!=null&&wt.hasOwnProperty("x")&&dt(wt)}),Pt-=Zt,jt-=Ee,kt.nodes().forEach(function(bt){var wt=kt.node(bt);wt&&(wt.x-=Pt,wt.y-=jt)}),kt.edges().forEach(function(bt){var wt,D=kt.edge(bt);(wt=D.points)===null||wt===void 0||wt.forEach(function(rt){rt.x-=Pt,rt.y-=jt}),D.hasOwnProperty("x")&&(D.x-=Pt),D.hasOwnProperty("y")&&(D.y-=jt)}),Tt.width=_t-Pt+Zt,Tt.height=Qt-jt+Ee},At=function(kt){kt.edges().forEach(function(Pt){var _t=kt.edge(Pt),jt=kt.node(Pt.v),Qt=kt.node(Pt.w),Tt,Zt;_t.points?(Tt=_t.points[0],Zt=_t.points[_t.points.length-1]):(_t.points=[],Tt=Qt,Zt=jt),_t.points.unshift((0,T.intersectRect)(jt,Tt)),_t.points.push((0,T.intersectRect)(Qt,Zt))})},Q=function(kt){kt.edges().forEach(function(Pt){var _t=kt.edge(Pt);if(_t!=null&&_t.hasOwnProperty("x"))switch((_t.labelpos==="l"||_t.labelpos==="r")&&(_t.width-=_t.labeloffset),_t.labelpos){case"l":_t.x-=_t.width/2+_t.labeloffset;break;case"r":_t.x+=_t.width/2+_t.labeloffset;break}})},gt=function(kt){kt.edges().forEach(function(Pt){var _t,jt=kt.edge(Pt);jt.reversed&&((_t=jt.points)===null||_t===void 0||_t.reverse())})},Vt=function(kt){kt.nodes().forEach(function(Pt){var _t,jt,Qt;if(!((_t=kt.children(Pt))===null||_t===void 0)&&_t.length){var Tt=kt.node(Pt),Zt=kt.node(Tt.borderTop),Ee=kt.node(Tt.borderBottom),dt=kt.node(Tt.borderLeft[((jt=Tt.borderLeft)===null||jt===void 0?void 0:jt.length)-1]),bt=kt.node(Tt.borderRight[((Qt=Tt.borderRight)===null||Qt===void 0?void 0:Qt.length)-1]);Tt.width=Math.abs((bt==null?void 0:bt.x)-(dt==null?void 0:dt.x))||10,Tt.height=Math.abs((Ee==null?void 0:Ee.y)-(Zt==null?void 0:Zt.y))||10,Tt.x=((dt==null?void 0:dt.x)||0)+Tt.width/2,Tt.y=((Zt==null?void 0:Zt.y)||0)+Tt.height/2}}),kt.nodes().forEach(function(Pt){var _t;((_t=kt.node(Pt))===null||_t===void 0?void 0:_t.dummy)==="border"&&kt.removeNode(Pt)})},Ht=function(kt){kt.edges().forEach(function(Pt){if(Pt.v===Pt.w){var _t=kt.node(Pt.v);_t.selfEdges||(_t.selfEdges=[]),_t.selfEdges.push({e:Pt,label:kt.edge(Pt)}),kt.removeEdgeObj(Pt)}})},It=function(kt){var Pt=(0,T.buildLayerMatrix)(kt);Pt==null||Pt.forEach(function(_t){var jt=0;_t==null||_t.forEach(function(Qt,Tt){var Zt,Ee=kt.node(Qt);Ee.order=Tt+jt,(Zt=Ee.selfEdges)===null||Zt===void 0||Zt.forEach(function(dt){(0,T.addDummyNode)(kt,"selfedge",{width:dt.label.width,height:dt.label.height,rank:Ee.rank,order:Tt+ ++jt,e:dt.e,label:dt.label},"_se")}),delete Ee.selfEdges})})},de=function(kt){kt.nodes().forEach(function(Pt){var _t=kt.node(Pt);if(_t.dummy==="selfedge"){var jt=kt.node(_t.e.v),Qt=jt.x+jt.width/2,Tt=jt.y,Zt=_t.x-Qt,Ee=jt.height/2;kt.setEdgeObj(_t.e,_t.label),kt.removeNode(Pt),_t.label.points=[{x:Qt+2*Zt/3,y:Tt-Ee},{x:Qt+5*Zt/6,y:Tt-Ee},{y:Tt,x:Qt+Zt},{x:Qt+5*Zt/6,y:Tt+Ee},{x:Qt+2*Zt/3,y:Tt+Ee}],_t.label.x=_t.x,_t.label.y=_t.y}})},De=function(kt,Pt){var _t={};return Pt==null||Pt.forEach(function(jt){kt[jt]!==void 0&&(_t[jt]=+kt[jt])}),_t},Ye=function(kt){kt===void 0&&(kt={});var Pt={};return Object.keys(kt).forEach(function(_t){Pt[_t.toLowerCase()]=kt[_t]}),Pt};w.default=O},85059:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(55998),z=function(m){var y,v=(0,x.addDummyNode)(m,"root",{},"_root"),p=E(m),g=Math.max.apply(Math,Object.values(p));Math.abs(g)===1/0&&(g=1);var I=g-1,_=2*I+1;m.graph().nestingRoot=v,m.edges().forEach(function(O){m.edge(O).minlen*=_});var C=N(m)+1;(y=m.children())===null||y===void 0||y.forEach(function(O){k(m,v,_,C,I,p,O)}),m.graph().nodeRankFactor=_},k=function(m,y,v,p,g,I,_){var C=m.children(_);if(!(C!=null&&C.length)){_!==y&&m.setEdge(y,_,{weight:0,minlen:v});return}var O=(0,x.addBorderNode)(m,"_bt"),b=(0,x.addBorderNode)(m,"_bb"),l=m.node(_);m.setParent(O,_),l.borderTop=O,m.setParent(b,_),l.borderBottom=b,C==null||C.forEach(function(K){k(m,y,v,p,g,I,K);var Z=m.node(K),X=Z.borderTop?Z.borderTop:K,W=Z.borderBottom?Z.borderBottom:K,U=Z.borderTop?p:2*p,et=X!==W?1:g-I[_]+1;m.setEdge(O,X,{minlen:et,weight:U,nestingEdge:!0}),m.setEdge(W,b,{minlen:et,weight:U,nestingEdge:!0})}),m.parent(_)||m.setEdge(y,O,{weight:0,minlen:g+I[_]})},E=function(m){var y,v={},p=function(g,I){var _=m.children(g);_==null||_.forEach(function(C){return p(C,I+1)}),v[g]=I};return(y=m.children())===null||y===void 0||y.forEach(function(g){return p(g,1)}),v},N=function(m){var y=0;return m.edges().forEach(function(v){y+=m.edge(v).weight}),y},T=function(m){var y=m.graph();y.nestingRoot&&m.removeNode(y.nestingRoot),delete y.nestingRoot,m.edges().forEach(function(v){var p=m.edge(v);p.nestingEdge&&m.removeEdgeObj(v)})};w.default={run:z,cleanup:T}},97910:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(55998),z=function(N){N.graph().dummyChains=[],N.edges().forEach(function(T){return k(N,T)})},k=function(N,T){var m=T.v,y=N.node(m).rank,v=T.w,p=N.node(v).rank,g=T.name,I=N.edge(T),_=I.labelRank;if(p!==y+1){N.removeEdgeObj(T);var C=N.graph(),O,b,l;for(l=0,++y;y<p;++l,++y)I.points=[],b={edgeLabel:I,width:0,height:0,edgeObj:T,rank:y},O=(0,x.addDummyNode)(N,"edge",b,"_d"),y===_&&(b.width=I.width,b.height=I.height,b.dummy="edge-label",b.labelpos=I.labelpos),N.setEdge(m,O,{weight:I.weight},g),l===0&&(C.dummyChains||(C.dummyChains=[]),C.dummyChains.push(O)),m=O;N.setEdge(m,v,{weight:I.weight},g)}},E=function(N){var T;(T=N.graph().dummyChains)===null||T===void 0||T.forEach(function(m){var y=N.node(m),v=y.edgeLabel,p;y.edgeObj&&N.setEdgeObj(y.edgeObj,v);for(var g=m;y.dummy;)p=N.successors(g)[0],N.removeNode(g),v.points.push({x:y.x,y:y.y}),y.dummy==="edge-label"&&(v.x=y.x,v.y=y.y,v.width=y.width,v.height=y.height),g=p,y=N.node(g)})};w.default={run:z,undo:E}},49323:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(x,z,k){var E={},N;k==null||k.forEach(function(T){for(var m=x.parent(T),y,v;m;){if(y=x.parent(m),y?(v=E[y],E[y]=m):(v=N,N=m),v&&v!==m){z.setEdge(v,m);return}m=y}})};w.default=S},36989:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(x,z){return z.map(function(k){var E=x.inEdges(k);if(!(E!=null&&E.length))return{v:k};{var N={sum:0,weight:0};return E==null||E.forEach(function(T){var m=x.edge(T),y=x.node(T.v);N.sum+=m.weight*y.order,N.weight+=m.weight}),{v:k,barycenter:N.sum/N.weight,weight:N.weight}}})};w.default=S},54564:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(31892),z=function(E,N,T){var m=k(E),y=new x.Graph({compound:!0}).setGraph({root:m}).setDefaultNodeLabel(function(v){return E.node(v)});return E.nodes().forEach(function(v){var p,g=E.node(v),I=E.parent(v);(g.rank===N||g.minRank<=N&&N<=g.maxRank)&&(y.setNode(v),y.setParent(v,I||m),(p=E[T](v))===null||p===void 0||p.forEach(function(_){var C=_.v===v?_.w:_.v,O=y.edgeFromArgs(C,v),b=O!==void 0?O.weight:0;y.setEdge(C,v,{weight:E.edge(_).weight+b})}),g.hasOwnProperty("minRank")&&y.setNode(v,{borderLeft:g.borderLeft[N],borderRight:g.borderRight[N]}))}),y},k=function(E){for(var N;E.hasNode(N="_root".concat(Math.random())););return N};w.default=z},76462:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(55998),z=function(E,N,T){for(var m=(0,x.zipObject)(T,T.map(function(C,O){return O})),y=N.map(function(C){var O,b=(O=E.outEdges(C))===null||O===void 0?void 0:O.map(function(l){return{pos:m[l.w]||0,weight:E.edge(l).weight}});return b==null?void 0:b.sort(function(l,K){return l.pos-K.pos})}),v=y.flat().filter(function(C){return C!==void 0}),p=1;p<T.length;)p<<=1;var g=2*p-1;p-=1;var I=Array(g).fill(0,0,g),_=0;return v==null||v.forEach(function(C){if(C){var O=C.pos+p;I[O]+=C.weight;for(var b=0;O>0;)O%2&&(b+=I[O+1]),O=O-1>>1,I[O]+=C.weight;_+=C.weight*b}}),_},k=function(E,N){for(var T=0,m=1;m<(N==null?void 0:N.length);m+=1)T+=z(E,N[m-1],N[m]);return T};w.default=k},61795:function(ae,w,S){"use strict";var x=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(w,"__esModule",{value:!0});var z=x(S(78762)),k=x(S(76462)),E=x(S(54564)),N=x(S(49323)),T=x(S(91481)),m=S(78302),y=S(31892),v=S(55998),p=function(C){for(var O=(0,v.maxRank)(C),b=[],l=[],K=1;K<O+1;K++)b.push(K);for(var K=O-1;K>-1;K--)l.push(K);var Z=g(C,b,"inEdges"),X=g(C,l,"outEdges"),W=(0,z.default)(C);_(C,W);for(var U=Number.POSITIVE_INFINITY,et,K=0,at=0;at<4;++K,++at){I(K%2?Z:X,K%4>=2),W=(0,v.buildLayerMatrix)(C);var J=(0,k.default)(C,W);J<U&&(at=0,et=(0,m.clone)(W),U=J)}W=(0,z.default)(C),_(C,W);for(var K=0,at=0;at<4;++K,++at){I(K%2?Z:X,K%4>=2,!0),W=(0,v.buildLayerMatrix)(C);var J=(0,k.default)(C,W);J<U&&(at=0,et=(0,m.clone)(W),U=J)}_(C,et)},g=function(C,O,b){return O.map(function(l){return(0,E.default)(C,l,b)})},I=function(C,O,b){var l=new y.Graph;C==null||C.forEach(function(K){for(var Z,X=K.graph().root,W=(0,T.default)(K,X,l,O,b),U=0;U<((Z=W.vs)===null||Z===void 0?void 0:Z.length);U++){var et=K.node(W.vs[U]);et&&(et.order=U)}(0,N.default)(K,l,W.vs)})},_=function(C,O){O==null||O.forEach(function(b){b==null||b.forEach(function(l,K){C.node(l).order=K})})};w.default=p},1745:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(x,z){var k=x.nodes().filter(function(m){var y;return!(!((y=x.children(m))===null||y===void 0)&&y.length)}),E=k.map(function(m){return x.node(m).rank}),N=Math.max.apply(Math,E),T=Array(N+1).fill([]);z==null||z.forEach(function(m){var y=x.node(m);!y||y!=null&&y.dummy||isNaN(y.rank)||(y.fixorder=T[y.rank].length,T[y.rank].push(m))})};w.default=S},78762:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(x){for(var z={},k=x.nodes().filter(function(I){var _;return!(!((_=x.children(I))===null||_===void 0)&&_.length)}),E=k.map(function(I){return x.node(I).rank}),N=Math.max.apply(Math,E),T=[],m=0;m<N+1;m++)T.push([]);var y=function(I){var _;if(!z.hasOwnProperty(I)){z[I]=!0;var C=x.node(I);isNaN(C.rank)||T[C.rank].push(I),(_=x.successors(I))===null||_===void 0||_.forEach(function(O){return y(O)})}},v=k.sort(function(I,_){return x.node(I).rank-x.node(_).rank}),p=v.filter(function(I){return x.node(I).fixorder!==void 0}),g=p.sort(function(I,_){return x.node(I).fixorder-x.node(_).fixorder});return g==null||g.forEach(function(I){isNaN(x.node(I).rank)||T[x.node(I).rank].push(I),z[I]=!0}),v==null||v.forEach(y),T};w.default=S},40593:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(k,E){var N,T,m,y={};k==null||k.forEach(function(p,g){y[p.v]={i:g,indegree:0,in:[],out:[],vs:[p.v]};var I=y[p.v];p.barycenter!==void 0&&(I.barycenter=p.barycenter,I.weight=p.weight)}),(N=E.edges())===null||N===void 0||N.forEach(function(p){var g=y[p.v],I=y[p.w];g!==void 0&&I!==void 0&&(I.indegree++,g.out.push(y[p.w]))});var v=(m=(T=Object.values(y)).filter)===null||m===void 0?void 0:m.call(T,function(p){return!p.indegree});return x(v)},x=function(k){for(var E,N,T=[],m=function(I){return function(_){_.merged||(_.barycenter===void 0||I.barycenter===void 0||_.barycenter>=I.barycenter)&&z(I,_)}},y=function(I){return function(_){_.in.push(I),--_.indegree===0&&k.push(_)}},v=function(){var I=k.pop();T.push(I),(E=I.in.reverse())===null||E===void 0||E.forEach(function(_){return m(I)(_)}),(N=I.out)===null||N===void 0||N.forEach(function(_){return y(I)(_)})};k!=null&&k.length;)v();var p=T.filter(function(I){return!I.merged}),g=["vs","i","barycenter","weight"];return p.map(function(I){var _={};return g==null||g.forEach(function(C){I[C]!==void 0&&(_[C]=I[C])}),_})},z=function(k,E){var N,T=0,m=0;k.weight&&(T+=k.barycenter*k.weight,m+=k.weight),E.weight&&(T+=E.barycenter*E.weight,m+=E.weight),k.vs=(N=E.vs)===null||N===void 0?void 0:N.concat(k.vs),k.barycenter=T/m,k.weight=m,k.i=Math.min(E.i,k.i),E.merged=!0};w.default=S},91481:function(ae,w,S){"use strict";var x=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(w,"__esModule",{value:!0});var z=x(S(36989)),k=x(S(40593)),E=x(S(73359)),N=function(y,v,p,g,I){var _,C,O,b,l=y.children(v),K=y.node(v),Z=K?K.borderLeft:void 0,X=K?K.borderRight:void 0,W={};Z&&(l=l==null?void 0:l.filter(function(mt){return mt!==Z&&mt!==X}));var U=(0,z.default)(y,l||[]);U==null||U.forEach(function(mt){var Mt;if(!((Mt=y.children(mt.v))===null||Mt===void 0)&&Mt.length){var vt=N(y,mt.v,p,g);W[mt.v]=vt,vt.hasOwnProperty("barycenter")&&m(mt,vt)}});var et=(0,k.default)(U,p);T(et,W),(_=et.filter(function(mt){return mt.vs.length>0}))===null||_===void 0||_.forEach(function(mt){var Mt=y.node(mt.vs[0]);Mt&&(mt.fixorder=Mt.fixorder,mt.order=Mt.order)});var at=(0,E.default)(et,g,I);if(Z&&(at.vs=[Z,at.vs,X].flat(),!((C=y.predecessors(Z))===null||C===void 0)&&C.length)){var J=y.node(((O=y.predecessors(Z))===null||O===void 0?void 0:O[0])||""),nt=y.node(((b=y.predecessors(X))===null||b===void 0?void 0:b[0])||"");at.hasOwnProperty("barycenter")||(at.barycenter=0,at.weight=0),at.barycenter=(at.barycenter*at.weight+J.order+nt.order)/(at.weight+2),at.weight+=2}return at},T=function(y,v){y==null||y.forEach(function(p){var g,I=(g=p.vs)===null||g===void 0?void 0:g.map(function(_){return v[_]?v[_].vs:_});p.vs=I.flat()})},m=function(y,v){y.barycenter!==void 0?(y.barycenter=(y.barycenter*y.weight+v.barycenter*v.weight)/(y.weight+v.weight),y.weight+=v.weight):(y.barycenter=v.barycenter,y.weight=v.weight)};w.default=N},73359:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(55998),z=function(N,T,m){var y=(0,x.partition)(N,function(b){return b.hasOwnProperty("fixorder")&&!isNaN(b.fixorder)||b.hasOwnProperty("barycenter")}),v=y.lhs,p=y.rhs.sort(function(b,l){return-b.i- -l.i}),g=[],I=0,_=0,C=0;v==null||v.sort(E(!!T,!!m)),C=k(g,p,C),v==null||v.forEach(function(b){var l;C+=(l=b.vs)===null||l===void 0?void 0:l.length,g.push(b.vs),I+=b.barycenter*b.weight,_+=b.weight,C=k(g,p,C)});var O={vs:g.flat()};return _&&(O.barycenter=I/_,O.weight=_),O},k=function(N,T,m){for(var y=m,v;T.length&&(v=T[T.length-1]).i<=y;)T.pop(),N==null||N.push(v.vs),y++;return y},E=function(N,T){return function(m,y){if(m.fixorder!==void 0&&y.fixorder!==void 0)return m.fixorder-y.fixorder;if(m.barycenter<y.barycenter)return-1;if(m.barycenter>y.barycenter)return 1;if(T&&m.order!==void 0&&y.order!==void 0){if(m.order<y.order)return-1;if(m.order>y.order)return 1}return N?y.i-m.i:m.i-y.i}};w.default=z},53134:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(k){var E,N={},T=0,m=function(y){var v,p=T;(v=k.children(y))===null||v===void 0||v.forEach(m),N[y]={low:p,lim:T++}};return(E=k.children())===null||E===void 0||E.forEach(m),N},x=function(k,E,N,T){var m=[],y=[],v=Math.min(E[N].low,E[T].low),p=Math.max(E[N].lim,E[T].lim),g,I;g=N;do g=k.parent(g),m.push(g);while(g&&(E[g].low>v||p>E[g].lim));for(I=g,g=T;g&&g!==I;)y.push(g),g=k.parent(g);return{lca:I,path:m.concat(y.reverse())}},z=function(k){var E,N=S(k);(E=k.graph().dummyChains)===null||E===void 0||E.forEach(function(T){var m,y,v=T,p=k.node(v),g=p.edgeObj;if(g)for(var I=x(k,N,g.v,g.w),_=I.path,C=I.lca,O=0,b=_[O],l=!0;v!==g.w;){if(p=k.node(v),l){for(;b!==C&&((m=k.node(b))===null||m===void 0?void 0:m.maxRank)<p.rank;)O++,b=_[O];b===C&&(l=!1)}if(!l){for(;O<_.length-1&&((y=k.node(_[O+1]))===null||y===void 0?void 0:y.minRank)<=p.rank;)O++;b=_[O]}k.setParent(v,b),v=k.successors(v)[0]}})};w.default=z},6088:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var Z=function(X,W){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,et){U.__proto__=et}||function(U,et){for(var at in et)Object.prototype.hasOwnProperty.call(et,at)&&(U[at]=et[at])},Z(X,W)};return function(X,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");Z(X,W);function U(){this.constructor=X}X.prototype=W===null?Object.create(W):(U.prototype=W.prototype,new U)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.width=w.sep=w.positionX=w.balance=w.alignCoordinates=w.findSmallestWidthAlignment=w.buildBlockGraph=w.horizontalCompaction=w.verticalAlignment=w.hasConflict=w.addConflict=w.findOtherInnerSegmentNode=w.findType2Conflicts=w.findType1Conflicts=void 0;var z=S(20156),k=S(55998),E=function(Z){x(X,Z);function X(){return Z!==null&&Z.apply(this,arguments)||this}return X}(z.Graph),N=function(Z,X){var W={},U=function(et,at){var J=0,nt=0,mt=et.length,Mt=at==null?void 0:at[(at==null?void 0:at.length)-1];return at==null||at.forEach(function(vt,zt){var re,Rt=(0,w.findOtherInnerSegmentNode)(Z,vt),At=Rt?Z.node(Rt).order:mt;(Rt||vt===Mt)&&((re=at.slice(nt,zt+1))===null||re===void 0||re.forEach(function(Q){var gt;(gt=Z.predecessors(Q))===null||gt===void 0||gt.forEach(function(Vt){var Ht,It=Z.node(Vt),de=It.order;(de<J||At<de)&&!(It.dummy&&(!((Ht=Z.node(Q))===null||Ht===void 0)&&Ht.dummy))&&(0,w.addConflict)(W,Vt,Q)})}),nt=zt+1,J=At)}),at};return X!=null&&X.length&&X.reduce(U),W};w.findType1Conflicts=N;var T=function(Z,X){var W={},U=function(at,J,nt,mt,Mt){for(var vt,zt=[],re=J;re<nt;re++)zt.push(re);zt.forEach(function(Rt){var At,Q;vt=at[Rt],!((At=Z.node(vt))===null||At===void 0)&&At.dummy&&((Q=Z.predecessors(vt))===null||Q===void 0||Q.forEach(function(gt){var Vt=Z.node(gt);Vt.dummy&&(Vt.order<mt||Vt.order>Mt)&&(0,w.addConflict)(W,gt,vt)}))})},et=function(at,J){var nt=-1,mt,Mt=0;return J==null||J.forEach(function(vt,zt){var re;if(((re=Z.node(vt))===null||re===void 0?void 0:re.dummy)==="border"){var Rt=Z.predecessors(vt)||[];Rt.length&&(mt=Z.node(Rt[0]).order,U(J,Mt,zt,nt,mt),Mt=zt,nt=mt)}U(J,Mt,J.length,mt,at.length)}),J};return X!=null&&X.length&&X.reduce(et),W};w.findType2Conflicts=T;var m=function(Z,X){var W,U;if(!((W=Z.node(X))===null||W===void 0)&&W.dummy)return(U=Z.predecessors(X))===null||U===void 0?void 0:U.find(function(et){return Z.node(et).dummy})};w.findOtherInnerSegmentNode=m;var y=function(Z,X,W){var U=X,et=W;if(U>et){var at=U;U=et,et=at}var J=Z[U];J||(Z[U]=J={}),J[et]=!0};w.addConflict=y;var v=function(Z,X,W){var U=X,et=W;if(U>et){var at=X;U=et,et=at}return!!Z[U]};w.hasConflict=v;var p=function(Z,X,W,U){var et={},at={},J={};return X==null||X.forEach(function(nt){nt==null||nt.forEach(function(mt,Mt){et[mt]=mt,at[mt]=mt,J[mt]=Mt})}),X==null||X.forEach(function(nt){var mt=-1;nt==null||nt.forEach(function(Mt){var vt=U(Mt);if(vt.length){vt=vt.sort(function(Q,gt){return J[Q]-J[gt]});for(var zt=(vt.length-1)/2,re=Math.floor(zt),Rt=Math.ceil(zt);re<=Rt;++re){var At=vt[re];at[Mt]===Mt&&mt<J[At]&&!(0,w.hasConflict)(W,Mt,At)&&(at[At]=Mt,at[Mt]=et[Mt]=et[At],mt=J[At])}}})}),{root:et,align:at}};w.verticalAlignment=p;var g=function(Z,X,W,U,et){var at,J={},nt=(0,w.buildBlockGraph)(Z,X,W,et),mt=et?"borderLeft":"borderRight",Mt=function(re,Rt){for(var At=nt.nodes(),Q=At.pop(),gt={};Q;)gt[Q]?re(Q):(gt[Q]=!0,At.push(Q),At=At.concat(Rt(Q))),Q=At.pop()},vt=function(re){J[re]=(nt.inEdges(re)||[]).reduce(function(Rt,At){return Math.max(Rt,(J[At.v]||0)+nt.edge(At))},0)},zt=function(re){var Rt=(nt.outEdges(re)||[]).reduce(function(Q,gt){return Math.min(Q,(J[gt.w]||0)-nt.edge(gt))},Number.POSITIVE_INFINITY),At=Z.node(re);Rt!==Number.POSITIVE_INFINITY&&At.borderType!==mt&&(J[re]=Math.max(J[re],Rt))};return Mt(vt,nt.predecessors.bind(nt)),Mt(zt,nt.successors.bind(nt)),(at=Object.values(U))===null||at===void 0||at.forEach(function(re){J[re]=J[W[re]]}),J};w.horizontalCompaction=g;var I=function(Z,X,W,U){var et=new E,at=Z.graph(),J=(0,w.sep)(at.nodesep,at.edgesep,U);return X==null||X.forEach(function(nt){var mt;nt==null||nt.forEach(function(Mt){var vt=W[Mt];if(et.setNode(vt),mt){var zt=W[mt],re=et.edgeFromArgs(zt,vt);et.setEdge(zt,vt,Math.max(J(Z,Mt,mt),re||0))}mt=Mt})}),et};w.buildBlockGraph=I;var _=function(Z,X){return(0,k.minBy)(Object.values(X),function(W){var U,et=Number.NEGATIVE_INFINITY,at=Number.POSITIVE_INFINITY;return(U=Object.keys(W))===null||U===void 0||U.forEach(function(J){var nt=W[J],mt=(0,w.width)(Z,J)/2;et=Math.max(nt+mt,et),at=Math.min(nt-mt,at)}),et-at})};w.findSmallestWidthAlignment=_;function C(Z,X){var W=Object.values(X),U=Math.min.apply(Math,W),et=Math.max.apply(Math,W);["u","d"].forEach(function(at){["l","r"].forEach(function(J){var nt=at+J,mt=Z[nt],Mt;if(mt!==X){var vt=Object.values(mt);Mt=J==="l"?U-Math.min.apply(Math,vt):et-Math.max.apply(Math,vt),Mt&&(Z[nt]={},Object.keys(mt).forEach(function(zt){Z[nt][zt]=mt[zt]+Mt}))}})})}w.alignCoordinates=C;var O=function(Z,X){var W={};return Object.keys(Z.ul).forEach(function(U){if(X)W[U]=Z[X.toLowerCase()][U];else{var et=Object.values(Z).map(function(at){return at[U]});W[U]=(et[0]+et[1])/2}}),W};w.balance=O;var b=function(Z){var X=(0,k.buildLayerMatrix)(Z),W=Object.assign((0,w.findType1Conflicts)(Z,X),(0,w.findType2Conflicts)(Z,X)),U={},et;["u","d"].forEach(function(J){et=J==="u"?X:Object.values(X).reverse(),["l","r"].forEach(function(nt){nt==="r"&&(et=et.map(function(zt){return Object.values(zt).reverse()}));var mt=(J==="u"?Z.predecessors:Z.successors).bind(Z),Mt=(0,w.verticalAlignment)(Z,et,W,mt),vt=(0,w.horizontalCompaction)(Z,et,Mt.root,Mt.align,nt==="r");nt==="r"&&Object.keys(vt).forEach(function(zt){vt[zt]=-vt[zt]}),U[J+nt]=vt})});var at=(0,w.findSmallestWidthAlignment)(Z,U);return C(U,at),(0,w.balance)(U,Z.graph().align)};w.positionX=b;var l=function(Z,X,W){return function(U,et,at){var J=U.node(et),nt=U.node(at),mt=0,Mt;if(mt+=J.width/2,J.hasOwnProperty("labelpos"))switch((J.labelpos||"").toLowerCase()){case"l":Mt=-J.width/2;break;case"r":Mt=J.width/2;break}if(Mt&&(mt+=W?Mt:-Mt),Mt=0,mt+=(J.dummy?X:Z)/2,mt+=(nt.dummy?X:Z)/2,mt+=nt.width/2,nt.labelpos)switch((nt.labelpos||"").toLowerCase()){case"l":Mt=nt.width/2;break;case"r":Mt=-nt.width/2;break}return Mt&&(mt+=W?Mt:-Mt),Mt=0,mt}};w.sep=l;var K=function(Z,X){return Z.node(X).width||0};w.width=K},11977:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(55998),z=S(6088),k=function(T){var m=(0,x.buildLayerMatrix)(T),y=T.graph().ranksep,v=0;m==null||m.forEach(function(p){var g=p.map(function(_){return T.node(_).height}),I=Math.max.apply(Math,g);p==null||p.forEach(function(_){T.node(_).y=v+I/2}),v+=I+y})},E=function(T){var m=(0,x.buildLayerMatrix)(T),y=Object.assign((0,z.findType1Conflicts)(T,m),(0,z.findType2Conflicts)(T,m)),v={},p=[];["u","d"].forEach(function(I){p=I==="u"?m:Object.values(m).reverse(),["l","r"].forEach(function(_){_==="r"&&(p=p.map(function(l){return Object.values(l).reverse()}));var C=(I==="u"?T.predecessors:T.successors).bind(T),O=(0,z.verticalAlignment)(T,p,y,C),b=(0,z.horizontalCompaction)(T,p,O.root,O.align,_==="r");_==="r"&&Object.keys(b).forEach(function(l){return b[l]=-b[l]}),v[I+_]=b})});var g=(0,z.findSmallestWidthAlignment)(T,v);return g&&(0,z.alignCoordinates)(v,g),(0,z.balance)(v,T.graph().align)},N=function(T){var m,y=(0,x.asNonCompoundGraph)(T);k(y);var v=E(y);(m=Object.keys(v))===null||m===void 0||m.forEach(function(p){y.node(p).x=v[p]})};w.default=N},1371:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.feasibleTreeWithLayer=w.feasibleTree=void 0;var x=S(51495),z=S(55998),k=S(31892),E=function(p){var g=new k.Graph({directed:!1}),I=p.nodes()[0],_=p.nodeCount();g.setNode(I,{});for(var C,O;N(g,p)<_;)C=y(g,p),O=g.hasNode(C.v)?(0,x.slack)(p,C):-(0,x.slack)(p,C),v(g,p,O);return g};w.feasibleTree=E;var N=function(p,g){var I=function(_){g.nodeEdges(_).forEach(function(C){var O=C.v,b=_===O?C.w:O;!p.hasNode(b)&&!(0,x.slack)(g,C)&&(p.setNode(b,{}),p.setEdge(_,b,{}),I(b))})};return p.nodes().forEach(I),p.nodeCount()},T=function(p){var g=new k.Graph({directed:!1}),I=p.nodes()[0],_=p.nodeCount();g.setNode(I,{});for(var C,O;m(g,p)<_;)C=y(g,p),O=g.hasNode(C.v)?(0,x.slack)(p,C):-(0,x.slack)(p,C),v(g,p,O);return g};w.feasibleTreeWithLayer=T;var m=function(p,g){var I=function(_){var C;(C=g.nodeEdges(_))===null||C===void 0||C.forEach(function(O){var b=O.v,l=_===b?O.w:b;!p.hasNode(l)&&(g.node(l).layer!==void 0||!(0,x.slack)(g,O))&&(p.setNode(l,{}),p.setEdge(_,l,{}),I(l))})};return p.nodes().forEach(I),p.nodeCount()},y=function(p,g){return(0,z.minBy)(g.edges(),function(I){return p.hasNode(I.v)!==p.hasNode(I.w)?(0,x.slack)(g,I):1/0})},v=function(p,g,I){p.nodes().forEach(function(_){g.node(_).rank||(g.node(_).rank=0),g.node(_).rank+=I})};w.default={feasibleTree:E,feasibleTreeWithLayer:T}},68750:function(ae,w,S){"use strict";var x=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(w,"__esModule",{value:!0});var z=S(51495),k=S(1371),E=x(S(40272)),N=function(v){switch(v.graph().ranker){case"network-simplex":y(v);break;case"tight-tree":m(v);break;case"longest-path":T(v);break;default:m(v)}},T=z.longestPath,m=function(v){(0,z.longestPathWithLayer)(v),(0,k.feasibleTreeWithLayer)(v)},y=function(v){(0,E.default)(v)};w.default=N},40272:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.exchangeEdges=w.enterEdge=w.leaveEdge=w.initLowLimValues=w.calcCutValue=w.initCutValues=void 0;var x=S(1371),z=S(51495),k=S(55998),E=S(20156),N=E.algorithm.preorder,T=E.algorithm.postorder,m=function(Z){var X=(0,k.simplify)(Z);(0,z.longestPath)(X);var W=(0,x.feasibleTree)(X);(0,w.initLowLimValues)(W),(0,w.initCutValues)(W,X);for(var U,et;U=(0,w.leaveEdge)(W);)et=(0,w.enterEdge)(W,X,U),(0,w.exchangeEdges)(W,X,U,et)},y=function(Z,X){var W=T(Z,Z.nodes());W=W==null?void 0:W.slice(0,(W==null?void 0:W.length)-1),W==null||W.forEach(function(U){v(Z,X,U)})};w.initCutValues=y;var v=function(Z,X,W){var U=Z.node(W),et=U.parent;Z.edgeFromArgs(W,et).cutvalue=(0,w.calcCutValue)(Z,X,W)},p=function(Z,X,W){var U,et=Z.node(W),at=et.parent,J=!0,nt=X.edgeFromArgs(W,at),mt=0;return nt||(J=!1,nt=X.edgeFromArgs(at,W)),mt=nt.weight,(U=X.nodeEdges(W))===null||U===void 0||U.forEach(function(Mt){var vt=Mt.v===W,zt=vt?Mt.w:Mt.v;if(zt!==at){var re=vt===J,Rt=X.edge(Mt).weight;if(mt+=re?Rt:-Rt,l(Z,W,zt)){var At=Z.edgeFromArgs(W,zt).cutvalue;mt+=re?-At:At}}}),mt};w.calcCutValue=p;var g=function(Z,X){X===void 0&&(X=Z.nodes()[0]),I(Z,{},1,X)};w.initLowLimValues=g;var I=function(Z,X,W,U,et){var at,J=W,nt=W,mt=Z.node(U);return X[U]=!0,(at=Z.neighbors(U))===null||at===void 0||at.forEach(function(Mt){X[Mt]||(nt=I(Z,X,nt,Mt,U))}),mt.low=J,mt.lim=nt++,et?mt.parent=et:delete mt.parent,nt},_=function(Z){return Z.edges().find(function(X){return Z.edge(X).cutvalue<0})};w.leaveEdge=_;var C=function(Z,X,W){var U=W.v,et=W.w;X.hasEdge(U,et)||(U=W.w,et=W.v);var at=Z.node(U),J=Z.node(et),nt=at,mt=!1;at.lim>J.lim&&(nt=J,mt=!0);var Mt=X.edges().filter(function(vt){return mt===K(Z,Z.node(vt.v),nt)&&mt!==K(Z,Z.node(vt.w),nt)});return(0,k.minBy)(Mt,function(vt){return(0,z.slack)(X,vt)})};w.enterEdge=C;var O=function(Z,X,W,U){var et=W.v,at=W.w;Z.removeEdge(et,at),Z.setEdge(U.v,U.w,{}),(0,w.initLowLimValues)(Z),(0,w.initCutValues)(Z,X),b(Z,X)};w.exchangeEdges=O;var b=function(Z,X){var W=Z.nodes().find(function(et){var at;return!(!((at=X.node(et))===null||at===void 0)&&at.parent)}),U=N(Z,W);U=U==null?void 0:U.slice(1),U==null||U.forEach(function(et){var at=Z.node(et).parent,J=X.edgeFromArgs(et,at),nt=!1;J||(J=X.edgeFromArgs(at,et),nt=!0),X.node(et).rank=X.node(at).rank+(nt?J.minlen:-J.minlen)})},l=function(Z,X,W){return Z.hasEdge(X,W)},K=function(Z,X,W){return W.low<=X.lim&&X.lim<=W.lim};w.default=m},51495:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.slack=w.longestPathWithLayer=w.longestPath=void 0;var S=function(k){var E,N={},T=function(m){var y,v=k.node(m);if(N[m])return v.rank;N[m]=!0;var p;return(y=k.outEdges(m))===null||y===void 0||y.forEach(function(g){var I=T(g.w),_=k.edge(g).minlen,C=I-_;C&&(p===void 0||C<p)&&(p=C)}),p||(p=0),v.rank=p,p};(E=k.sources())===null||E===void 0||E.forEach(function(m){return T(m)})};w.longestPath=S;var x=function(k){var E,N={},T,m=function(v){var p,g=k.node(v);if(N[v])return g.rank;N[v]=!0;var I;return(p=k.outEdges(v))===null||p===void 0||p.forEach(function(_){var C=m(_.w),O=k.edge(_).minlen,b=C-O;b&&(I===void 0||b<I)&&(I=b)}),I||(I=0),(T===void 0||I<T)&&(T=I),g.rank=I,I};(E=k.sources())===null||E===void 0||E.forEach(function(v){return m(v)}),T===void 0&&(T=0);var y=function(v,p){var g,I=k.node(v),_=isNaN(I.layer)?p:I.layer;(I.rank===void 0||I.rank<_)&&(I.rank=_),(g=k.outEdges(v))===null||g===void 0||g.map(function(C){y(C.w,_+k.edge(C).minlen)})};k.nodes().forEach(function(v){var p=k.node(v);isNaN(p.layer)?p.rank-=T:y(v,p.layer)})};w.longestPathWithLayer=x;var z=function(k,E){return k.node(E.w).rank-k.node(E.v).rank-k.edge(E).minlen};w.slack=z,w.default={longestPath:S,longestPathWithLayer:x,slack:z}},55998:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.minBy=w.notime=w.time=w.partition=w.maxRank=w.addBorderNode=w.removeEmptyRanks=w.normalizeRanks=w.buildLayerMatrix=w.intersectRect=w.predecessorWeights=w.successorWeights=w.zipObject=w.asNonCompoundGraph=w.simplify=w.addDummyNode=void 0;var x=S(78302),z=S(31892),k=function(X,W){return Number(X)-Number(W)},E=function(X,W,U,et){var at;do at="".concat(et).concat(Math.random());while(X.hasNode(at));return U.dummy=W,X.setNode(at,U),at};w.addDummyNode=E;var N=function(X){var W=new z.Graph().setGraph(X.graph());return X.nodes().forEach(function(U){W.setNode(U,X.node(U))}),X.edges().forEach(function(U){var et=W.edgeFromArgs(U.v,U.w)||{weight:0,minlen:1},at=X.edge(U);W.setEdge(U.v,U.w,{weight:et.weight+at.weight,minlen:Math.max(et.minlen,at.minlen)})}),W};w.simplify=N;var T=function(X){var W=new z.Graph({multigraph:X.isMultigraph()}).setGraph(X.graph());return X.nodes().forEach(function(U){var et;!((et=X.children(U))===null||et===void 0)&&et.length||W.setNode(U,X.node(U))}),X.edges().forEach(function(U){W.setEdgeObj(U,X.edge(U))}),W};w.asNonCompoundGraph=T;var m=function(X,W){return X==null?void 0:X.reduce(function(U,et,at){return U[et]=W[at],U},{})};w.zipObject=m;var y=function(X){var W={};return X.nodes().forEach(function(U){var et,at={};(et=X.outEdges(U))===null||et===void 0||et.forEach(function(J){var nt;at[J.w]=(at[J.w]||0)+(((nt=X.edge(J))===null||nt===void 0?void 0:nt.weight)||0)}),W[U]=at}),W};w.successorWeights=y;var v=function(X){var W=X.nodes(),U=W.map(function(et){var at,J={};return(at=X.inEdges(et))===null||at===void 0||at.forEach(function(nt){J[nt.v]=(J[nt.v]||0)+X.edge(nt).weight}),J});return(0,w.zipObject)(W,U)};w.predecessorWeights=v;var p=function(X,W){var U=Number(X.x),et=Number(X.y),at=Number(W.x)-U,J=Number(W.y)-et,nt=Number(X.width)/2,mt=Number(X.height)/2;if(!at&&!J)return{x:0,y:0};var Mt,vt;return Math.abs(J)*nt>Math.abs(at)*mt?(J<0&&(mt=-mt),Mt=mt*at/J,vt=mt):(at<0&&(nt=-nt),Mt=nt,vt=nt*J/at),{x:U+Mt,y:et+vt}};w.intersectRect=p;var g=function(X){for(var W=[],U=(0,w.maxRank)(X)+1,et=0;et<U;et++)W.push([]);X.nodes().forEach(function(at){var J=X.node(at),nt=J.rank;nt!==void 0&&W[nt]&&W[nt].push(at)});for(var et=0;et<U;et++)W[et]=W[et].sort(function(J,nt){var mt,Mt;return k((mt=X.node(J))===null||mt===void 0?void 0:mt.order,(Mt=X.node(nt))===null||Mt===void 0?void 0:Mt.order)});return W};w.buildLayerMatrix=g;var I=function(X){var W=X.nodes().filter(function(et){var at;return((at=X.node(et))===null||at===void 0?void 0:at.rank)!==void 0}).map(function(et){return X.node(et).rank}),U=Math.min.apply(Math,W);X.nodes().forEach(function(et){var at=X.node(et);at.hasOwnProperty("rank")&&U!==1/0&&(at.rank-=U)})};w.normalizeRanks=I;var _=function(X){var W=X.nodes(),U=W.filter(function(vt){var zt;return((zt=X.node(vt))===null||zt===void 0?void 0:zt.rank)!==void 0}).map(function(vt){return X.node(vt).rank}),et=Math.min.apply(Math,U),at=[];W.forEach(function(vt){var zt,re=(((zt=X.node(vt))===null||zt===void 0?void 0:zt.rank)||0)-et;at[re]||(at[re]=[]),at[re].push(vt)});for(var J=0,nt=X.graph().nodeRankFactor||0,mt=0;mt<at.length;mt++){var Mt=at[mt];Mt===void 0?mt%nt!==0&&(J-=1):J&&(Mt==null||Mt.forEach(function(vt){var zt=X.node(vt);zt&&(zt.rank=zt.rank||0,zt.rank+=J)}))}};w.removeEmptyRanks=_;var C=function(X,W,U,et){var at={width:0,height:0};return(0,x.isNumber)(U)&&(0,x.isNumber)(et)&&(at.rank=U,at.order=et),(0,w.addDummyNode)(X,"border",at,W)};w.addBorderNode=C;var O=function(X){var W;return X.nodes().forEach(function(U){var et,at=(et=X.node(U))===null||et===void 0?void 0:et.rank;at!==void 0&&(W===void 0||at>W)&&(W=at)}),W||(W=0),W};w.maxRank=O;var b=function(X,W){var U={lhs:[],rhs:[]};return X==null||X.forEach(function(et){W(et)?U.lhs.push(et):U.rhs.push(et)}),U};w.partition=b;var l=function(X,W){var U=Date.now();try{return W()}finally{console.log("".concat(X," time: ").concat(Date.now()-U,"ms"))}};w.time=l;var K=function(X,W){return W()};w.notime=K;var Z=function(X,W){return X.reduce(function(U,et){var at=W(U),J=W(et);return at>J?et:U})};w.minBy=Z},74222:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(g[_]=I[_])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(y){for(var v,p=1,g=arguments.length;p<g;p++){v=arguments[p];for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(y[I]=v[I])}return y},z.apply(this,arguments)},k=this&&this.__spreadArray||function(y,v,p){if(p||arguments.length===2)for(var g=0,I=v.length,_;g<I;g++)(_||!(g in v))&&(_||(_=Array.prototype.slice.call(v,0,g)),_[g]=v[g]);return y.concat(_||Array.prototype.slice.call(v))};Object.defineProperty(w,"__esModule",{value:!0}),w.DagreCompoundLayout=void 0;var E=S(94416),N=S(55281),T=S(78302),m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(p),g}return v.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},v.prototype.init=function(p){var g=p.hiddenNodes||[],I=p.hiddenEdges||[],_=p.hiddenCombos||[];this.nodes=this.getDataByOrder((p.nodes||[]).concat(g)),this.edges=this.getDataByOrder((p.edges||[]).concat(I)),this.combos=(p.combos||[]).concat(_.map(function(C){return z(z({},C),{collapsed:!0})}))},v.prototype.execute=function(){var p=this,g=p.nodes,I=p.edges;if(g){var _=p.getLayoutConfig(),C=_.graphDef,O=_.graphOption,b=_.graphSettings,l=(0,N.buildGraph)(C,O,b),K=(0,N.flatGraph)(l,!0);return this.updatePosition(K),p.onLayoutEnd&&p.onLayoutEnd(),{nodes:g,edges:I}}},v.prototype.getNodePath=function(p){var g=this,I=g.nodes,_=g.combos,C=I.find(function(b){return b.id===p}),O=function(b,l){l===void 0&&(l=[]);var K=_.find(function(Z){return Z.id===b});return K?(l.unshift(b),K.parentId?O(K.parentId,l):l):l};return C&&C.comboId?O(C.comboId,[p]):[p]},v.prototype.getLayoutConfig=function(){var p,g,I,_=this,C=_.nodes,O=_.edges,b=_.combos,l=_.nodeSize,K=_.rankdir,Z=_.align,X=_.edgesep,W=_.nodesep,U=_.ranksep,et=_.settings,at=(b||[]).reduce(function(De,Ye){var kt=C.filter(function(_t){return _t.comboId===Ye.id}).map(function(_t){return _t.id}),Pt=(b||[]).filter(function(_t){return _t.parentId===Ye.id}).map(function(_t){return _t.id});return(kt.length||Pt.length)&&(De[Ye.id]=k(k([],kt,!0),Pt,!0)),De},{}),J;l?(0,T.isArray)(l)?J=function(){return l}:J=function(){return[l,l]}:J=function(De){return De&&De.size?(0,T.isArray)(De.size)?De.size:(0,T.isObject)(De.size)?[De.size.width||40,De.size.height||40]:[De.size,De.size]:[40,40]};var nt=function(De){return De&&De.size?(0,T.isArray)(De.size)?De.size:[De.size,De.size]:[80,40]},mt=nt(b==null?void 0:b[0]),Mt=mt[0],vt=mt[1],zt=(g=(p=_.graphSettings)===null||p===void 0?void 0:p.subScene)===null||g===void 0?void 0:g.meta,re=((I=b.find(function(De){return!De.collapsed}))===null||I===void 0?void 0:I.padding)||[20,20,20,20],Rt=re[0],At=re[1],Q=re[2],gt=re[3],Vt={compound:at,nodes:k([],(C||[]).map(function(De){var Ye=J(De),kt=Ye[0],Pt=Ye[1];return z(z({},De),{width:kt,height:Pt})}),!0),edges:k([],(O||[]).map(function(De){return z(z({},De),{v:De.source,w:De.target})}),!0)},Ht={expanded:(b||[]).filter(function(De){return!De.collapsed}).map(function(De){return De.id})},It={graph:{meta:{align:Z,rankDir:K,nodeSep:W,edgeSep:X,rankSep:U}},subScene:{meta:{paddingTop:Rt||(zt==null?void 0:zt.paddingTop)||20,paddingRight:At||(zt==null?void 0:zt.paddingRight)||20,paddingBottom:Q||(zt==null?void 0:zt.paddingBottom)||20,paddingLeft:gt||(zt==null?void 0:zt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:Mt,height:vt}}},de=(0,N.mergeConfig)(et,z({},(0,N.mergeConfig)(It,N.LAYOUT_CONFIG)));return _.graphSettings=de,{graphDef:Vt,graphOption:Ht,graphSettings:de}},v.prototype.updatePosition=function(p){var g=p.nodes,I=p.edges;this.updateNodePosition(g,I),this.updateEdgePosition(g,I)},v.prototype.getBegin=function(p,g){var I=this,_=I.begin,C=[0,0];if(_){var O=1/0,b=1/0;p.forEach(function(l){O>l.x&&(O=l.x),b>l.y&&(b=l.y)}),g.forEach(function(l){l.points.forEach(function(K){O>K.x&&(O=K.x),b>K.y&&(b=K.y)})}),C[0]=_[0]-O,C[1]=_[1]-b}return C},v.prototype.updateNodePosition=function(p,g){var I=this,_=I.combos,C=I.nodes,O=I.edges,b=I.anchorPoint,l=I.graphSettings,K=this.getBegin(p,g);p.forEach(function(Z){var X,W=Z.x,U=Z.y,et=Z.id,at=Z.type,J=Z.coreBox;if(at===N.HierarchyNodeType.META&&et!==N.ROOT_NAME){var nt=_.findIndex(function(re){return re.id===et}),mt=(X=l==null?void 0:l.subScene)===null||X===void 0?void 0:X.meta;_[nt].offsetX=W+K[0],_[nt].offsetY=U+K[1],_[nt].fixSize=[J.width,J.height],_[nt].fixCollapseSize=[J.width,J.height],Z.expanded?_[nt].padding=[mt==null?void 0:mt.paddingTop,mt==null?void 0:mt.paddingRight,mt==null?void 0:mt.paddingBottom,mt==null?void 0:mt.paddingLeft]:_[nt].padding=[0,0,0,0]}else if(at===N.HierarchyNodeType.OP){var nt=C.findIndex(function(Rt){return Rt.id===et});if(C[nt].x=W+K[0],C[nt].y=U+K[1],b){var Mt=[],vt=g.filter(function(Rt){return Rt.v===et}),zt=g.filter(function(Rt){return Rt.w===et});vt.length>0&&vt.forEach(function(Rt){var At=Rt.points[0],Q=(At.x-W)/Z.width+.5,gt=(At.y-U)/Z.height+.5;Mt.push([Q,gt]),Rt.baseEdgeList.forEach(function(Vt){var Ht=O.find(function(It){return It.source===Vt.v&&It.target===Vt.w});Ht&&(Ht.sourceAnchor=Mt.length-1)})}),zt.length>0&&zt.forEach(function(Rt){var At=Rt.points[Rt.points.length-1],Q=(At.x-W)/Z.width+.5,gt=(At.y-U)/Z.height+.5;Mt.push([Q,gt]),Rt.baseEdgeList.forEach(function(Vt){var Ht=O.find(function(It){return It.source===Vt.v&&It.target===Vt.w});Ht&&(Ht.targetAnchor=Mt.length-1)})}),C[nt].anchorPoints=Mt.length>0?Mt:C[nt].anchorPoints||[]}}})},v.prototype.updateEdgePosition=function(p,g){var I=this,_=I.combos,C=I.edges,O=I.controlPoints,b=this.getBegin(p,g);O&&(_.forEach(function(l){l.inEdges=[],l.outEdges=[]}),C.forEach(function(l){var K,Z,X,W,U=p.find(function(re){return re.id===l.source}),et=p.find(function(re){return re.id===l.target}),at=[],J=[];if(U&&et)J=(0,N.getEdges)(U==null?void 0:U.id,et==null?void 0:et.id,p);else if(!U||!et){var nt=I.getNodePath(l.source),mt=I.getNodePath(l.target),Mt=nt.reverse().slice(U?0:1).find(function(re){return p.find(function(Rt){return Rt.id===re})}),vt=mt.reverse().slice(et?0:1).find(function(re){return p.find(function(Rt){return Rt.id===re})});U=p.find(function(re){return re.id===Mt}),et=p.find(function(re){return re.id===vt}),J=(0,N.getEdges)(U==null?void 0:U.id,et==null?void 0:et.id,p,{v:l.source,w:l.target})}if(at=J.reduce(function(re,Rt){return k(k([],re,!0),Rt.points.map(function(At){return z(z({},At),{x:At.x+b[0],y:At.y+b[1]})}),!0)},[]),at=at.slice(1,-1),l.controlPoints=at,(et==null?void 0:et.type)===N.NodeType.META){var zt=_.findIndex(function(re){return re.id===(et==null?void 0:et.id)});if(!_[zt]||!((K=_[zt].inEdges)===null||K===void 0)&&K.some(function(re){return re.source===U.id&&re.target===et.id}))return;(Z=_[zt].inEdges)===null||Z===void 0||Z.push({source:U.id,target:et.id,controlPoints:at})}if((U==null?void 0:U.type)===N.NodeType.META){var zt=_.findIndex(function(Rt){return Rt.id===(U==null?void 0:U.id)});if(!_[zt]||!((X=_[zt].outEdges)===null||X===void 0)&&X.some(function(Rt){return Rt.source===U.id&&Rt.target===et.id}))return;(W=_[zt].outEdges)===null||W===void 0||W.push({source:U.id,target:et.id,controlPoints:at})}}))},v.prototype.getType=function(){return"dagreCompound"},v.prototype.getDataByOrder=function(p){return p.every(function(g){return g.layoutOrder!==void 0})||p.forEach(function(g,I){g.layoutOrder=I}),p.sort(function(g,I){return g.layoutOrder-I.layoutOrder})},v}(E.Base);w.DagreCompoundLayout=m},18658:function(ae,w,S){"use strict";var x=this&&this.__assign||function(){return x=Object.assign||function(g){for(var I,_=1,C=arguments.length;_<C;_++){I=arguments[_];for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(g[O]=I[O])}return g},x.apply(this,arguments)},z=this&&this.__createBinding||(Object.create?function(g,I,_,C){C===void 0&&(C=_);var O=Object.getOwnPropertyDescriptor(I,_);(!O||("get"in O?!I.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return I[_]}}),Object.defineProperty(g,C,O)}:function(g,I,_,C){C===void 0&&(C=_),g[C]=I[_]}),k=this&&this.__setModuleDefault||(Object.create?function(g,I){Object.defineProperty(g,"default",{enumerable:!0,value:I})}:function(g,I){g.default=I}),E=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var I={};if(g!=null)for(var _ in g)_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)&&z(I,g,_);return k(I,g),I},N=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(w,"__esModule",{value:!0});var T=E(S(87599)),m=N(S(96349)),y=N(S(67009)),v=S(98989);function p(g,I){var _=g.nodes,C=g.edges,O=I.width,b=I.height;if(!(_!=null&&_.length))return Promise.resolve();var l=[];_.forEach(function(J){var nt=C.filter(function(Mt){return Mt.source===J.id||Mt.target===J.id});if(nt.length>1){var mt=x({},J);delete mt.size,l.push(mt)}});var K=[];C.forEach(function(J){var nt=l.find(function(Mt){return Mt.id===J.source}),mt=l.find(function(Mt){return Mt.id===J.target});nt&&mt&&K.push(J)});var Z=new v.DagreLayout({type:"dagre",ranksep:I.nodeMinGap,nodesep:I.nodeMinGap}),X=Z.layout({nodes:l,edges:K}).nodes;_.forEach(function(J){var nt=(X||[]).find(function(mt){return mt.id===J.id});J.x=(nt==null?void 0:nt.x)||O/2,J.y=(nt==null?void 0:nt.y)||b/2});var W=JSON.parse(JSON.stringify(_)),U=JSON.parse(JSON.stringify(C)),et=T.forceSimulation().nodes(W).force("link",T.forceLink(U).id(function(J){return J.id}).distance(function(J){var nt=K.find(function(mt){return mt.source===J.source&&mt.target===J.target});return nt?30:20})).force("charge",T.forceManyBody()).force("center",T.forceCenter(O/2,b/2)).force("x",T.forceX(O/2)).force("y",T.forceY(b/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),at=new Promise(function(J){et.on("end",function(){_.forEach(function(Rt){var At=W.find(function(Q){return Q.id===Rt.id});At&&(Rt.x=At.x,Rt.y=At.y)});var nt=Math.min.apply(Math,_.map(function(Rt){return Rt.x})),mt=Math.max.apply(Math,_.map(function(Rt){return Rt.x})),Mt=Math.min.apply(Math,_.map(function(Rt){return Rt.y})),vt=Math.max.apply(Math,_.map(function(Rt){return Rt.y})),zt=O/(mt-nt),re=b/(vt-Mt);_.forEach(function(Rt){Rt.x!==void 0&&zt<1&&(Rt.x=(Rt.x-nt)*zt),Rt.y!==void 0&&re<1&&(Rt.y=(Rt.y-Mt)*re)}),_.forEach(function(Rt){Rt.sizeTemp=Rt.size,Rt.size=[10,10]}),(0,y.default)(_,C),_.forEach(function(Rt){Rt.size=Rt.sizeTemp||[],delete Rt.sizeTemp}),(0,m.default)({nodes:_,edges:C},I),J()})});return at}w.default=p},96349:function(ae,w,S){"use strict";var x=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(w,"__esModule",{value:!0});var z=x(S(92900));function k(E,N){if(!E.nodes||E.nodes.length===0)return E;var T=N.width,m=N.height,y=N.nodeMinGap,v=1e4,p=1e4;E.nodes.forEach(function(U){var et=U.size[0]||50,at=U.size[1]||50;v=Math.min(et,v),p=Math.min(at,p)});var g=new z.default;g.init(T,m,{CELL_H:p,CELL_W:v}),E.nodes.forEach(function(U){var et=g.occupyNearest(U);et&&(et.node={id:U.id,size:U.size},U.x=et.x,U.y=et.y,U.dx=et.dx,U.dy=et.dy)});for(var I=0;I<E.nodes.length;I++){var _=E.nodes[I],C=g.findGridByNodeId(_.id);if(!C)throw new Error("can not find node cell");var O=C.column,b=C.row;if(_.size[0]+y>v){for(var l=Math.ceil((_.size[0]+y)/v)-1,K=l,Z=0;Z<l;Z++){var X=g.additionColumn.indexOf(O+Z+1)>-1;if(X&&!g.cells[O+Z+1][b].node)K--;else break}g.insertColumn(O,K)}if(_.size[1]+y>p){for(var l=Math.ceil((_.size[1]+y)/p)-1,K=l,Z=0;Z<l;Z++){var X=g.additionRow.indexOf(b+Z+1)>-1;if(X&&!g.cells[O][b+Z+1].node)K--;else break}g.insertRow(b,K)}}for(var I=0;I<g.columnNum;I++)for(var W=function(et){var at=g.cells[I][et];if(at.node){var J=E.nodes.find(function(nt){var mt;return nt.id===((mt=at==null?void 0:at.node)===null||mt===void 0?void 0:mt.id)});J&&(J.x=at.x+J.size[0]/2,J.y=at.y+J.size[1]/2)}},Z=0;Z<g.rowNum;Z++)W(Z)}w.default=k},92900:function(ae,w){"use strict";var S=this&&this.__assign||function(){return S=Object.assign||function(z){for(var k,E=1,N=arguments.length;E<N;E++){k=arguments[E];for(var T in k)Object.prototype.hasOwnProperty.call(k,T)&&(z[T]=k[T])}return z},S.apply(this,arguments)};Object.defineProperty(w,"__esModule",{value:!0});var x=function(){function z(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return z.prototype.init=function(k,E,N){this.cells=[],this.CELL_W=N.CELL_W||z.DEFAULT_CELL_W,this.CELL_H=N.CELL_H||z.DEFAULT_CELL_H,this.columnNum=Math.ceil(k/this.CELL_W),this.rowNum=Math.ceil(E/this.CELL_H),z.MIN_DIST=Math.pow(k,2)+Math.pow(E,2);for(var T=0;T<this.columnNum;T++){for(var m=[],y=0;y<this.rowNum;y++){var v={dx:T,dy:y,x:T*this.CELL_W,y:y*this.CELL_H,occupied:!1};m.push(v)}this.cells.push(m)}},z.prototype.findGridByNodeId=function(k){for(var E,N,T=0;T<this.columnNum;T++)for(var m=0;m<this.rowNum;m++)if(this.cells[T][m].node&&((N=(E=this.cells[T][m])===null||E===void 0?void 0:E.node)===null||N===void 0?void 0:N.id)===k)return{column:T,row:m};return null},z.prototype.sqdist=function(k,E){return Math.pow(k.x-E.x,2)+Math.pow(k.y-E.y,2)},z.prototype.occupyNearest=function(k){for(var E=z.MIN_DIST,N,T=null,m=0;m<this.columnNum;m++)for(var y=0;y<this.rowNum;y++)!this.cells[m][y].occupied&&(N=this.sqdist(k,this.cells[m][y]))<E&&(E=N,T=this.cells[m][y]);return T&&(T.occupied=!0),T},z.prototype.insertColumn=function(k,E){if(!(E<=0)){for(var N=0;N<E;N++){this.cells[N+this.columnNum]=[];for(var T=0;T<this.rowNum;T++)this.cells[N+this.columnNum][T]={dx:N,dy:T,x:N*this.CELL_W,y:T*this.CELL_H,occupied:!1,node:null}}for(var N=this.columnNum-1;N>k;N--)for(var T=0;T<this.rowNum;T++)this.cells[N+E][T]=S(S({},this.cells[N][T]),{x:(N+E)*this.CELL_W,y:T*this.CELL_H}),this.cells[N][T]={x:N*this.CELL_W,y:T*this.CELL_H,occupied:!0,node:null};for(var T=0;T<this.additionColumn.length;T++)this.additionColumn[T]>=k&&(this.additionColumn[T]+=E);for(var N=0;N<E;N++)this.additionColumn.push(k+N+1);this.columnNum+=E}},z.prototype.insertRow=function(k,E){if(!(E<=0)){for(var N=0;N<E;N++)for(var T=0;T<this.columnNum;T++)this.cells[T][N+this.rowNum]={dx:T,dy:N,x:T*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var T=0;T<this.columnNum;T++)for(var N=this.rowNum-1;N>k;N--)this.cells[T][N+E]=S(S({},this.cells[T][N]),{dx:T,dy:N+E,x:T*this.CELL_W,y:(N+E)*this.CELL_H}),this.cells[T][N]={dx:T,dy:N,x:T*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var N=0;N<this.additionRow.length;N++)this.additionRow[N]>=k&&(this.additionRow[N]+=E);for(var T=0;T<E;T++)this.additionRow.push(k+T+1);this.rowNum+=E}},z.prototype.getNodes=function(){for(var k=[],E=0;E<this.columnNum;E++)for(var N=0;N<this.rowNum;N++)this.cells[E][N].node&&k.push(this.cells[E][N]);return k},z.MIN_DIST=50,z.DEFAULT_CELL_W=80,z.DEFAULT_CELL_H=80,z}();w.default=x},83529:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var T=function(m,y){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},T(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");T(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}(),z=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(w,"__esModule",{value:!0}),w.ERLayout=void 0;var k=S(94416),E=z(S(18658)),N=function(T){x(m,T);function m(y){var v=T.call(this)||this;return v.width=300,v.height=300,v.nodeMinGap=50,v.onLayoutEnd=function(){},y&&v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},m.prototype.execute=function(){var y=this,v=y.nodes,p=y.edges;return v==null||v.forEach(function(g){g.size||(g.size=[50,50])}),(0,E.default)({nodes:v,edges:p},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){y.onLayoutEnd&&y.onLayoutEnd()})},m.prototype.getType=function(){return"er"},m}(k.Base);w.ERLayout=N},67009:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=1200,x=800,z=1e7,k=10,E=3.141592653589793,N=1.5707963267948966,T=E*.375,m=E*.625,y=new Map,v=10,p=10,g=.8,I=.1,_=.5;function C(W,U,et){var at=W.x-W.size[0]/2,J=W.y-W.size[1]/2,nt=W.x+W.size[0]/2,mt=W.y+W.size[1]/2,Mt=U.x-U.size[0]/2,vt=U.y-U.size[1]/2,zt=U.x+U.size[0]/2,re=U.y+U.size[1]/2,Rt=W.x,At=W.y,Q=U.x,gt=U.y,Vt=Q-Rt,Ht=Math.atan2(Vt,gt-At),It=0,de=0,De=0,Ye=0;Ht>N?(de=J-re,It=Mt-nt,De=parseFloat(de?(de/Math.cos(Ht)).toFixed(2):It.toFixed(2)),Ye=parseFloat(It?(It/Math.sin(Ht)).toFixed(2):de.toFixed(2))):0<Ht&&Ht<=N?(de=vt-mt,It=Mt-nt,de>It?De=Ye=parseFloat(de?(de/Math.cos(Ht)).toFixed(2):It.toFixed(2)):De=Ye=parseFloat(It?(It/Math.sin(Ht)).toFixed(2):de.toFixed(2))):Ht<-N?(de=J-re,It=-(zt-at),de>It?De=Ye=parseFloat(de?(de/Math.cos(Ht)).toFixed(2):It.toFixed(2)):De=Ye=parseFloat(It?(It/Math.sin(Ht)).toFixed(2):de.toFixed(2))):(de=vt-mt,Math.abs(Vt)>(nt-at)/2?It=at-zt:It=Vt,de>It?De=Ye=parseFloat(de?(de/Math.cos(Ht)).toFixed(2):It.toFixed(2)):De=Ye=parseFloat(It&&Ht!==0?(It/Math.sin(Ht)).toFixed(2):de.toFixed(2)));var kt=parseFloat(Ht.toFixed(2)),Pt=et;return et&&(Pt=T<kt&&kt<m),{distance:Math.abs(De<Ye?De:Ye),isHoriz:Pt}}function O(W,U){var et=y.get(W.id)||[],at=et.find(function(D){return D.source===U.id||D.target===U.id}),J=W.size[0]*W.size[1],nt=U.size[0]*U.size[1],mt=J>nt?U:W,Mt=J>nt?W:U,vt=mt.x-mt.size[0]/2,zt=mt.y-mt.size[1]/2,re=mt.x+mt.size[0]/2,Rt=mt.y+mt.size[1]/2,At=Mt.x-Mt.size[0]/2,Q=Mt.y-Mt.size[1]/2,gt=Mt.x+Mt.size[0]/2,Vt=Mt.y+Mt.size[1]/2,Ht=mt.x,It=mt.y,de=Mt.x,De=Mt.y,Ye=re>=At&&gt>=vt&&Rt>=Q&&Vt>=zt,kt=0,Pt=0;if(Ye){Pt=Math.sqrt(Math.pow(de-Ht,2)+Math.pow(De-It,2));var _t=vt>At?vt:At,jt=zt>Q?zt:Q,Qt=re<gt?re:gt,Tt=Rt<Vt?Rt:Vt,Zt=Qt-_t,Ee=Tt-jt,dt=Zt*Ee;Pt===0&&(Pt=1e-7),kt=k*1/Pt*100+dt,kt*=z}else{var bt=!1,wt=C(mt,Mt,bt);Pt=wt.distance,bt=wt.isHoriz,Pt<=k?Pt!==0?at?kt+=k+z*1/Pt:kt+=k+z*k/Pt:kt+=z:(kt+=Pt,at&&(kt+=Pt*Pt))}return kt}function b(W){for(var U=0,et=0;et<W.length;et++){var at=W[et];(at.x<0||at.y<0||at.x>S||at.y>x)&&(U+=1e12);for(var J=et+1;J<W.length;J++)U+=O(at,W[J])}return U}function l(W,U,et,at){var J=new Map;et.forEach(function(Ht,It){J.set(Ht.id,Ht)});var nt=at.filter(function(Ht){return Ht.source===W.id||Ht.target===W.id})||[],mt=[];nt.forEach(function(Ht){var It=Ht.source===W.id?Ht.target:Ht.source,de=J.get(It);de&&mt.push(de)});for(var Mt=!0,vt=0;vt<mt.length;vt++){var zt=mt[vt],re=Math.atan((W.y-zt.y)/(zt.x-W.y))*180,Rt=Math.atan((U.y-zt.y)/(zt.x-U.y))*180,At=re<30||re>150,Q=Rt<30||Rt>150,gt=re>70&&re<110,Vt=Rt>70&&Rt<110;if(At&&!Q||re*Rt<0){Mt=!1;break}else if(gt&&!Vt||re*Rt<0){Mt=!1;break}else if((zt.x-W.x)*(zt.x-U.x)<0){Mt=!1;break}else if((zt.y-W.y)*(zt.y-U.y)<0){Mt=!1;break}}return Mt}function K(W,U){for(var et=!1,at=1,J=v*at,nt=p*at,mt=[J,-J,0,0],Mt=[0,0,nt,-nt],vt=0;vt<W.length;++vt)for(var zt=W[vt],re=Z(zt,W),Rt=0;Rt<mt.length;Rt++){var At=l(zt,{x:zt.x+mt[Rt],y:zt.y+Mt[Rt]},W,U);if(At){zt.x+=mt[Rt],zt.y+=Mt[Rt];var Q=Z(zt,W),gt=Math.random();Q<re||gt<g&&gt>I?(re=Q,et=!0):(zt.x-=mt[Rt],zt.y-=Mt[Rt])}}return g>I&&(g*=_),et?b(W):0}function Z(W,U){var et=0;(W.x<0||W.y<0||W.x+W.size[0]+20>S||W.y+W.size[1]+20>x)&&(et+=1e12);for(var at=0;at<U.length;++at)W.id!==U[at].id&&(et+=O(W,U[at]));return et}function X(W,U){if(W.length===0)return{nodes:W,edges:U};W.forEach(function(zt){var re=U.filter(function(Rt){return Rt.source===zt.id||Rt.target===zt.id});y.set(zt,re)}),W.sort(function(zt,re){var Rt,At;return((Rt=y.get(zt.id))===null||Rt===void 0?void 0:Rt.length)-((At=y.get(re.id))===null||At===void 0?void 0:At.length)});for(var et=b(W),at=20,J=1,nt=0,mt=50,Mt=0;at>0&&(Mt++,!(Mt>=mt));){var vt=K(W,U);vt!==0&&(nt=vt),J=nt-et,et=nt,J===0?--at:at=20}return W.forEach(function(zt){zt.x=zt.x-zt.size[0]/2,zt.y=zt.y-zt.size[1]/2}),{nodes:W,edges:U}}w.default=X},20083:function(ae,w,S){"use strict";var x=this&&this.__createBinding||(Object.create?function(m,y,v,p){p===void 0&&(p=v);var g=Object.getOwnPropertyDescriptor(y,v);(!g||("get"in g?!y.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return y[v]}}),Object.defineProperty(m,p,g)}:function(m,y,v,p){p===void 0&&(p=v),m[p]=y[v]}),z=this&&this.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),k=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var v in m)v!=="default"&&Object.prototype.hasOwnProperty.call(m,v)&&x(y,m,v);return z(y,m),y};Object.defineProperty(w,"__esModule",{value:!0});var E=k(S(87599)),N=S(78302);function T(){function m(Tt){return function(){return Tt}}var y=function(Tt){return Tt.cluster},v=m(1),p=m(-1),g=m(100),I=m(.1),_=[0,0],C=[],O={},b=[],l=100,K=100,Z={none:{x:0,y:0}},X=[],W,U="force",et=!0,at=.1;function J(Tt){if(!et)return J;W.tick(),re();for(var Zt=0,Ee=C.length,dt=void 0,bt=Tt*at;Zt<Ee;++Zt)dt=C[Zt],dt.vx+=(Z[y(dt)].x-dt.x)*bt,dt.vy+=(Z[y(dt)].y-dt.y)*bt}function nt(){C&&mt()}function mt(){if(!(!C||!C.length)){if(y(C[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Tt=Mt();W=E.forceSimulation(Tt.nodes).force("x",E.forceX(l).strength(.1)).force("y",E.forceY(K).strength(.1)).force("collide",E.forceCollide(function(Zt){return Zt.r}).iterations(4)).force("charge",E.forceManyBody().strength(p)).force("links",E.forceLink(Tt.nodes.length?Tt.links:[]).distance(g).strength(I)),X=W.nodes(),re()}}function Mt(){var Tt=[],Zt=[],Ee={},dt=[],bt={},wt=[];return bt=vt(C),wt=zt(b),dt=Object.keys(bt),dt.forEach(function(D,rt){var Nt=bt[D];Tt.push({id:D,size:Nt.count,r:Math.sqrt(Nt.sumforceNodeSize/Math.PI)}),Ee[D]=rt}),wt.forEach(function(D){var rt=(0,N.getEdgeTerminal)(D,"source"),Nt=(0,N.getEdgeTerminal)(D,"target"),ft=Ee[rt],ie=Ee[Nt];ft!==void 0&&ie!==void 0&&Zt.push({source:ft,target:ie,count:D.count})}),{nodes:Tt,links:Zt}}function vt(Tt){var Zt={};return Tt.forEach(function(Ee){var dt=y(Ee);Zt[dt]||(Zt[dt]={count:0,sumforceNodeSize:0})}),Tt.forEach(function(Ee){var dt=y(Ee),bt=v(Ee),wt=Zt[dt];wt.count=wt.count+1,wt.sumforceNodeSize=wt.sumforceNodeSize+Math.PI*(bt*bt)*1.3,Zt[dt]=wt}),Zt}function zt(Tt){var Zt={},Ee=[];Tt.forEach(function(bt){var wt=Rt(bt),D=0;Zt[wt]!==void 0&&(D=Zt[wt]),D+=1,Zt[wt]=D});var dt=Object.entries(Zt);return dt.forEach(function(bt){var wt=bt[0],D=bt[1],rt=wt.split("~")[0],Nt=wt.split("~")[1];rt!==void 0&&Nt!==void 0&&Ee.push({source:rt,target:Nt,count:D})}),Ee}function re(){return Z={none:{x:0,y:0}},X.forEach(function(Tt){Z[Tt.id]={x:Tt.x-_[0],y:Tt.y-_[1]}}),Z}function Rt(Tt){var Zt=(0,N.getEdgeTerminal)(Tt,"source"),Ee=(0,N.getEdgeTerminal)(Tt,"target"),dt=y(O[Zt]),bt=y(O[Ee]);return dt<=bt?"".concat(dt,"~").concat(bt):"".concat(bt,"~").concat(dt)}function At(Tt){O={},Tt.forEach(function(Zt){O[Zt.id]=Zt})}function Q(Tt){return arguments.length?(U=Tt,nt(),J):U}function gt(Tt){return arguments.length?typeof Tt=="string"?(y=function(Zt){return Zt[Tt]},J):(y=Tt,J):y}function Vt(Tt){return arguments.length?(et=Tt,J):et}function Ht(Tt){return arguments.length?(at=Tt,J):at}function It(Tt){return arguments.length?(l=Tt,J):l}function de(Tt){return arguments.length?(K=Tt,J):K}function De(Tt){return arguments.length?(At(Tt||[]),C=Tt||[],J):C}function Ye(Tt){return arguments.length?(b=Tt||[],nt(),J):b}function kt(Tt){return arguments.length?(typeof Tt=="function"?v=Tt:v=m(+Tt),nt(),J):v}function Pt(Tt){return arguments.length?(typeof Tt=="function"?p=Tt:p=m(+Tt),nt(),J):p}function _t(Tt){return arguments.length?(typeof Tt=="function"?g=Tt:g=m(+Tt),nt(),J):g}function jt(Tt){return arguments.length?(typeof Tt=="function"?I=Tt:I=m(+Tt),nt(),J):I}function Qt(Tt){return arguments.length?(_=Tt,J):_}return J.initialize=function(Tt){C=Tt,nt()},J.template=Q,J.groupBy=gt,J.enableGrouping=Vt,J.strength=Ht,J.centerX=It,J.centerY=de,J.nodes=De,J.links=Ye,J.forceNodeSize=kt,J.nodeSize=J.forceNodeSize,J.forceCharge=Pt,J.forceLinkDistance=_t,J.forceLinkStrength=jt,J.offset=Qt,J.getFocis=re,J}w.default=T},49116:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var C=function(O,b){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,K){l.__proto__=K}||function(l,K){for(var Z in K)Object.prototype.hasOwnProperty.call(K,Z)&&(l[Z]=K[Z])},C(O,b)};return function(O,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");C(O,b);function l(){this.constructor=O}O.prototype=b===null?Object.create(b):(l.prototype=b.prototype,new l)}}(),z=this&&this.__createBinding||(Object.create?function(C,O,b,l){l===void 0&&(l=b);var K=Object.getOwnPropertyDescriptor(O,b);(!K||("get"in K?!O.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return O[b]}}),Object.defineProperty(C,l,K)}:function(C,O,b,l){l===void 0&&(l=b),C[l]=O[b]}),k=this&&this.__setModuleDefault||(Object.create?function(C,O){Object.defineProperty(C,"default",{enumerable:!0,value:O})}:function(C,O){C.default=O}),E=this&&this.__importStar||function(C){if(C&&C.__esModule)return C;var O={};if(C!=null)for(var b in C)b!=="default"&&Object.prototype.hasOwnProperty.call(C,b)&&z(O,C,b);return k(O,C),O},N=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(w,"__esModule",{value:!0}),w.ForceLayout=void 0;var T=E(S(87599)),m=N(S(20083)),y=S(78302),v=S(94416),p=S(17219),g=function(C){x(O,C);function O(b){var l=C.call(this)||this;return l.center=[0,0],l.nodeStrength=null,l.edgeStrength=null,l.preventOverlap=!1,l.clusterNodeStrength=null,l.clusterEdgeStrength=null,l.clusterEdgeDistance=null,l.clusterNodeSize=null,l.clusterFociStrength=null,l.linkDistance=50,l.alphaDecay=.028,l.alphaMin=.001,l.alpha=.3,l.collideStrength=1,l.workerEnabled=!1,l.tick=function(){},l.onLayoutEnd=function(){},l.ticking=void 0,b&&l.updateCfg(b),l}return O.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},O.prototype.init=function(b){var l=this;l.nodes=b.nodes||[];var K=b.edges||[];l.edges=K.map(function(Z){var X={},W=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Z).forEach(function(U){W.indexOf(U)>-1||(X[U]=Z[U])}),X}),l.ticking=!1},O.prototype.execute=function(b){var l=this,K=l.nodes,Z=l.edges;if(!l.ticking){var X=l.forceSimulation,W=l.alphaMin,U=l.alphaDecay,et=l.alpha;if(X){if(b){if(l.clustering&&l.clusterForce&&(l.clusterForce.nodes(K),l.clusterForce.links(Z)),X.nodes(K),Z&&l.edgeForce)l.edgeForce.links(Z);else if(Z&&!l.edgeForce){var nt=T.forceLink().id(function(zt){return zt.id}).links(Z);l.edgeStrength&&nt.strength(l.edgeStrength),l.linkDistance&&nt.distance(l.linkDistance),l.edgeForce=nt,X.force("link",nt)}}l.preventOverlap&&l.overlapProcess(X),X.alpha(et).restart(),this.ticking=!0}else try{var at=T.forceManyBody();if(l.nodeStrength&&at.strength(l.nodeStrength),X=T.forceSimulation().nodes(K),l.clustering){var J=(0,m.default)();J.centerX(l.center[0]).centerY(l.center[1]).template("force").strength(l.clusterFociStrength),Z&&J.links(Z),K&&J.nodes(K),J.forceLinkDistance(l.clusterEdgeDistance).forceLinkStrength(l.clusterEdgeStrength).forceCharge(l.clusterNodeStrength).forceNodeSize(l.clusterNodeSize),l.clusterForce=J,X.force("group",J)}if(X.force("center",T.forceCenter(l.center[0],l.center[1])).force("charge",at).alpha(et).alphaDecay(U).alphaMin(W),l.preventOverlap&&l.overlapProcess(X),Z){var nt=T.forceLink().id(function(vt){return vt.id}).links(Z);l.edgeStrength&&nt.strength(l.edgeStrength),l.linkDistance&&nt.distance(l.linkDistance),l.edgeForce=nt,X.force("link",nt)}if(l.workerEnabled&&!_()&&(l.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!l.workerEnabled)X.on("tick",function(){l.tick()}).on("end",function(){l.ticking=!1,l.onLayoutEnd&&l.onLayoutEnd()}),l.ticking=!0;else{X.stop();for(var mt=I(X),Mt=1;Mt<=mt;Mt++)X.tick(),postMessage({nodes:K,currentTick:Mt,totalTicks:mt,type:p.LAYOUT_MESSAGE.TICK},void 0);l.ticking=!1}l.forceSimulation=X,l.ticking=!0}catch(vt){l.ticking=!1,console.warn(vt)}}},O.prototype.overlapProcess=function(b){var l=this,K=l.nodeSize,Z=l.nodeSpacing,X,W,U=l.collideStrength;if((0,y.isNumber)(Z)?W=function(){return Z}:(0,y.isFunction)(Z)?W=Z:W=function(){return 0},!K)X=function(nt){if(nt.size){if((0,y.isArray)(nt.size)){var mt=nt.size[0]>nt.size[1]?nt.size[0]:nt.size[1];return mt/2+W(nt)}if((0,y.isObject)(nt.size)){var mt=nt.size.width>nt.size.height?nt.size.width:nt.size.height;return mt/2+W(nt)}return nt.size/2+W(nt)}return 10+W(nt)};else if((0,y.isFunction)(K))X=function(nt){var mt=K(nt);return mt+W(nt)};else if((0,y.isArray)(K)){var et=K[0]>K[1]?K[0]:K[1],at=et/2;X=function(nt){return at+W(nt)}}else if((0,y.isNumber)(K)){var J=K/2;X=function(nt){return J+W(nt)}}else X=function(){return 10};b.force("collisionForce",T.forceCollide(X).strength(U))},O.prototype.updateCfg=function(b){var l=this;l.ticking&&(l.forceSimulation.stop(),l.ticking=!1),l.forceSimulation=null,Object.assign(l,b)},O.prototype.destroy=function(){var b=this;b.ticking&&(b.forceSimulation.stop(),b.ticking=!1),b.nodes=null,b.edges=null,b.destroyed=!0},O}(v.Base);w.ForceLayout=g;function I(C){var O=C.alphaMin(),b=C.alphaTarget(),l=C.alpha(),K=Math.log((O-b)/(l-b))/Math.log(1-C.alphaDecay()),Z=Math.ceil(K);return Z}function _(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},12032:function(ae,w,S){"use strict";var x=this&&this.__createBinding||(Object.create?function(k,E,N,T){T===void 0&&(T=N);var m=Object.getOwnPropertyDescriptor(E,N);(!m||("get"in m?!E.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return E[N]}}),Object.defineProperty(k,T,m)}:function(k,E,N,T){T===void 0&&(T=N),k[T]=E[N]}),z=this&&this.__exportStar||function(k,E){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(E,N)&&x(E,k,N)};Object.defineProperty(w,"__esModule",{value:!0}),z(S(49116),w)},38289:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.forceNBody=void 0;var x=S(45517),z=.81,k=.1;function E(y,v,p,g,I){var _=p/g,C=y.map(function(b,l){var K=v[b.id],Z=K.data,X=K.x,W=K.y,U=K.size,et=Z.layout.force.nodeStrength;return{x:X,y:W,size:U,index:l,vx:0,vy:0,weight:_*et}}),O=(0,x.quadtree)(C,function(b){return b.x},function(b){return b.y}).visitAfter(N);return C.forEach(function(b){m(b,O)}),C.map(function(b,l){var K=v[y[l].id],Z=K.data.layout.force.mass,X=Z===void 0?1:Z;I[2*l]=b.vx/X,I[2*l+1]=b.vy/X}),I}w.forceNBody=E;function N(y){var v=0,p=0,g=0;if(y.length){for(var I=0;I<4;I++){var _=y[I];_&&_.weight&&(v+=_.weight,p+=_.x*_.weight,g+=_.y*_.weight)}y.x=p/v,y.y=g/v,y.weight=v}else{var _=y;y.x=_.data.x,y.y=_.data.y,y.weight=_.data.weight}}var T=function(y,v,p,g,I,_){var C=_.x-y.x||k,O=_.y-y.y||k,b=g-v,l=C*C+O*O,K=Math.sqrt(l)*l;if(b*b*z<l){var Z=y.weight/K;return _.vx+=C*Z,_.vy+=O*Z,!0}if(y.length)return!1;if(y.data!==_){var Z=y.data.weight/K;_.vx+=C*Z,_.vy+=O*Z}};function m(y,v){v.visit(function(p,g,I,_,C){return T(p,g,I,_,C,y)})}},36129:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(g[_]=I[_])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(y){for(var v,p=1,g=arguments.length;p<g;p++){v=arguments[p];for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(y[I]=v[I])}return y},z.apply(this,arguments)};Object.defineProperty(w,"__esModule",{value:!0}),w.Force2Layout=void 0;var k=S(94416),E=S(78302),N=S(38289),T=function(y,v){var p;return y?(0,E.isNumber)(y)?p=function(g){return y}:p=y:p=function(g){return v||1},p},m=function(y){x(v,y);function v(p){var g=y.call(this)||this;return g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=1e3,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(I){return{x:g.width/2,y:g.height/2}}},g.updateCfg(p),g}return v.prototype.getCentripetalOptions=function(){var p=this,g=p.leafCluster,I=p.clustering,_=p.nodeClusterBy,C=p.nodes,O=p.nodeMap,b=p.clusterNodeStrength,l=function(mt){return typeof b=="function"?b(mt):b},K={},Z;if(g){Z=this.getSameTypeLeafMap()||{};var X=Array.from(new Set(C==null?void 0:C.map(function(mt){return mt[_]})))||[];K={single:100,leaf:function(mt,Mt,vt){var zt=Z[mt.id]||{},re=zt.relativeLeafNodes,Rt=zt.sameTypeLeafNodes;return(Rt==null?void 0:Rt.length)===(re==null?void 0:re.length)||(X==null?void 0:X.length)===1?1:l(mt)},others:1,center:function(mt,Mt,vt){var zt,re=(((zt=mt.data)===null||zt===void 0?void 0:zt.layout)||{}).degree;if(!re)return{x:100,y:100};var Rt;if(re===1){var At=(Z[mt.id]||{}).sameTypeLeafNodes,Q=At===void 0?[]:At;Q.length===1?Rt=void 0:Q.length>1&&(Rt=(0,E.getAvgNodePosition)(Q))}else Rt=void 0;return{x:Rt==null?void 0:Rt.x,y:Rt==null?void 0:Rt.y}}}}if(I){Z||(Z=this.getSameTypeLeafMap());var W=Array.from(new Set(C.map(function(mt,Mt){return mt[_]}))).filter(function(mt){return mt!==void 0}),U={};W.forEach(function(mt){var Mt=C.filter(function(vt){return vt[_]===mt}).map(function(vt){return O[vt.id]});U[mt]=(0,E.getAvgNodePosition)(Mt)}),K={single:function(mt){return l(mt)},leaf:function(mt){return l(mt)},others:function(mt){return l(mt)},center:function(mt,Mt,vt){var zt=U[mt[_]];return{x:zt==null?void 0:zt.x,y:zt==null?void 0:zt.y}}}}this.centripetalOptions=z(z({},this.centripetalOptions),K);var et=this.centripetalOptions,at=et.leaf,J=et.single,nt=et.others;at&&typeof at!="function"&&(this.centripetalOptions.leaf=function(){return at}),J&&typeof J!="function"&&(this.centripetalOptions.single=function(){return J}),nt&&typeof nt!="function"&&(this.centripetalOptions.others=function(){return nt})},v.prototype.updateCfg=function(p){p&&Object.assign(this,p)},v.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},v.prototype.execute=function(){var p=this;p.stop();var g=p.nodes,I=p.edges,_=p.defSpringLen;if(p.judgingDistance=0,!g||g.length===0){p.onLayoutEnd([]);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var C=p.center;if(g.length===1){g[0].x=C[0],g[0].y=C[1],p.onLayoutEnd([z({},g[0])]);return}p.degreesMap=(0,E.getDegreeMap)(g,I),p.getMass||(p.getMass=function(W){var U=1;(0,E.isNumber)(W.mass)&&(U=W.mass);var et=p.degreesMap[W.id].all;return!et||et<5?U:et*5*U});var O=p.nodeSize,b;if(p.preventOverlap){var l=p.nodeSpacing,K;(0,E.isNumber)(l)?K=function(){return l}:(0,E.isFunction)(l)?K=l:K=function(){return 0},O?(0,E.isArray)(O)?b=function(W){return Math.max(O[0],O[1])+K(W)}:b=function(W){return O+K(W)}:b=function(W){return W.size?(0,E.isArray)(W.size)?Math.max(W.size[0],W.size[1])+K(W):(0,E.isObject)(W.size)?Math.max(W.size.width,W.size.height)+K(W):W.size+K(W):10+K(W)}}p.nodeSize=b,p.linkDistance=T(p.linkDistance,1),p.nodeStrength=T(p.nodeStrength,1),p.edgeStrength=T(p.edgeStrength,1);var Z={},X={};g.forEach(function(W,U){(0,E.isNumber)(W.x)||(W.x=Math.random()*p.width),(0,E.isNumber)(W.y)||(W.y=Math.random()*p.height);var et=p.degreesMap[W.id];Z[W.id]=z(z({},W),{data:z(z({},W.data),{size:p.nodeSize(W)||30,layout:{inDegree:et.in,outDegree:et.out,degree:et.all,tDegree:et.in,sDegree:et.out,force:{mass:p.getMass(W),nodeStrength:p.nodeStrength(W)}}})}),X[W.id]=U}),p.nodeMap=Z,p.nodeIdxMap=X,p.edgeInfos=[],I==null||I.forEach(function(W){var U=Z[W.source],et=Z[W.target];!U||!et?elf.edgeInfos.push({}):p.edgeInfos.push({edgeStrength:p.edgeStrength(W),linkDistance:_?_(z(z({},W),{source:U,target:et}),U,et):p.linkDistance(W,U,et)||1+(O(U)+O(U)||0)/2})}),this.getCentripetalOptions(),p.onLayoutEnd=p.onLayoutEnd||function(){},p.run()},v.prototype.run=function(){var p=this,g=p.maxIteration,I=p.nodes,_=p.workerEnabled,C=p.minMovement,O=p.animate,b=p.nodeMap;if(I){var l=[];I.forEach(function(et,at){l[2*at]=0,l[2*at+1]=0});var K=g,Z=!O;if(_||Z){for(var X=0,W=0;(p.judgingDistance>C||W<1)&&W<K;W++)X=W,p.runOneStep(W,l);p.onLayoutEnd(Object.values(b))}else{if(typeof window=="undefined")return;var U=0;this.timeInterval=window.setInterval(function(){I&&(p.runOneStep(U,l),U++,(U>=K||p.judgingDistance<C)&&(p.onLayoutEnd(Object.values(b)),window.clearInterval(p.timeInterval)))},0)}}},v.prototype.runOneStep=function(p,g){var I,_=this,C=_.nodes,O=_.edges,b=_.nodeMap,l=_.monitor,K=[];if(C!=null&&C.length){_.calRepulsive(K),O&&_.calAttractive(K),_.calGravity(K);var Z=_.interval;if(_.updateVelocity(K,g,Z),_.updatePosition(g,Z),(I=_.tick)===null||I===void 0||I.call(_),l){var X=this.calTotalEnergy(K);l({energy:X,nodes:C,edges:O,iterations:p})}}},v.prototype.calTotalEnergy=function(p){var g=this,I=g.nodes,_=g.nodeMap;if(!(I!=null&&I.length))return 0;var C=0;return I.forEach(function(O,b){var l=p[2*b],K=p[2*b+1],Z=l*l+K*K,X=_[O.id].data.layout.force.mass,W=X===void 0?1:X;C+=W*Z*.5}),C},v.prototype.calRepulsive=function(p){var g=this,I=g.nodes,_=g.nodeMap,C=g.factor,O=g.coulombDisScale,b=g.nodeSize;(0,N.forceNBody)(I,_,C,O*O,p)},v.prototype.calAttractive=function(p){var g=this,I=g.edges,_=g.nodeMap,C=g.nodeIdxMap,O=g.edgeInfos,b=g.nodeSize;I.forEach(function(l,K){var Z=(0,E.getEdgeTerminal)(l,"source"),X=(0,E.getEdgeTerminal)(l,"target"),W=_[Z],U=_[X];if(!(!W||!U)){var et=U.x-W.x,at=U.y-W.y;!et&&!at&&(et=Math.random()*.01,at=Math.random()*.01);var J=Math.sqrt(et*et+at*at),nt=et/J,mt=at/J,Mt=O[K]||{},vt=Mt.linkDistance,zt=vt===void 0?200:vt,re=Mt.edgeStrength,Rt=re===void 0?200:re,At=zt-J,Q=At*Rt,gt=W.data.layout.force.mass||1,Vt=U.data.layout.force.mass||1,Ht=1/gt,It=1/Vt,de=nt*Q,De=mt*Q,Ye=2*C[Z],kt=2*C[X];p[Ye]-=de*Ht,p[Ye+1]-=De*Ht,p[kt]+=de*It,p[kt+1]+=De*It}})},v.prototype.calGravity=function(p){var g,I=this,_=I.nodes,C=I.edges,O=C===void 0?[]:C,b=I.nodeMap,l=I.width,K=I.height,Z=I.center,X=I.gravity,W=I.degreesMap,U=I.centripetalOptions;if(_)for(var et=_.length,at=0;at<et;at++){var J=2*at,nt=b[_[at].id],mt=nt.data.layout.force.mass,Mt=mt===void 0?1:mt,vt=0,zt=0,re=X,Rt=W[nt.id],At=Rt.in,Q=Rt.out,gt=Rt.all,Vt=(g=I.getCenter)===null||g===void 0?void 0:g.call(I,nt,gt);if(Vt){var Ht=Vt[0],It=Vt[1],de=Vt[2];vt=nt.x-Ht,zt=nt.y-It,re=de}else vt=nt.x-Z[0],zt=nt.y-Z[1];if(re&&(p[J]-=re*vt/Mt,p[J+1]-=re*zt/Mt),U){var De=U.leaf,Ye=U.single,kt=U.others,Pt=U.center,_t=(Pt==null?void 0:Pt(nt,_,O,l,K))||{x:0,y:0,centerStrength:0},jt=_t.x,Qt=_t.y,Tt=_t.centerStrength;if(!(0,E.isNumber)(jt)||!(0,E.isNumber)(Qt))continue;var Zt=(nt.x-jt)/Mt,Ee=(nt.y-Qt)/Mt;if(Tt&&(p[J]-=Tt*Zt,p[J+1]-=Tt*Ee),gt===0){var dt=Ye(nt);if(!dt)continue;p[J]-=dt*Zt,p[J+1]-=dt*Ee;continue}if(At===0||Q===0){var bt=De(nt,_,O);if(!bt)continue;p[J]-=bt*Zt,p[J+1]-=bt*Ee;continue}var wt=kt(nt);if(!wt)continue;p[J]-=wt*Zt,p[J+1]-=wt*Ee}}},v.prototype.updateVelocity=function(p,g,I){var _=this,C=_.nodes,O=_.damping,b=_.maxSpeed;C!=null&&C.length&&C.forEach(function(l,K){var Z=(g[2*K]+p[2*K]*I)*O||.01,X=(g[2*K+1]+p[2*K+1]*I)*O||.01,W=Math.sqrt(Z*Z+X*X);if(W>b){var U=b/W;Z=U*Z,X=U*X}g[2*K]=Z,g[2*K+1]=X})},v.prototype.updatePosition=function(p,g){var I=this,_=I.nodes,C=I.distanceThresholdMode,O=I.nodeMap;if(!(_!=null&&_.length)){this.judgingDistance=0;return}var b=0;C==="max"?I.judgingDistance=-1/0:C==="min"&&(I.judgingDistance=1/0),_.forEach(function(l,K){var Z=O[l.id];if((0,E.isNumber)(l.fx)&&(0,E.isNumber)(l.fy)){l.x=l.fx,l.y=l.fy,Z.x=l.x,Z.y=l.y;return}var X=p[2*K]*g,W=p[2*K+1]*g;l.x+=X,l.y+=W,Z.x=l.x,Z.y=l.y;var U=Math.sqrt(X*X+W*W);switch(C){case"max":I.judgingDistance<U&&(I.judgingDistance=U);break;case"min":I.judgingDistance>U&&(I.judgingDistance=U);break;default:b=b+U;break}}),(!C||C==="mean")&&(I.judgingDistance=b/_.length)},v.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},v.prototype.destroy=function(){var p=this;p.stop(),p.tick=null,p.nodes=null,p.edges=null,p.destroyed=!0},v.prototype.getType=function(){return"force2"},v.prototype.getSameTypeLeafMap=function(){var p=this,g=p.nodeClusterBy,I=p.nodes,_=p.edges,C=p.nodeMap,O=p.degreesMap;if(I!=null&&I.length){var b={};return I.forEach(function(l,K){var Z=O[l.id].all;Z===1&&(b[l.id]=(0,E.getCoreNodeAndRelativeLeafNodes)("leaf",l,_,g,O,C))}),b}},v}(k.Base);w.Force2Layout=m},19615:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(){function x(z){this.id=z.id||0,this.rx=z.rx,this.ry=z.ry,this.fx=0,this.fy=0,this.mass=z.mass,this.degree=z.degree,this.g=z.g||0}return x.prototype.distanceTo=function(z){var k=this.rx-z.rx,E=this.ry-z.ry;return Math.hypot(k,E)},x.prototype.setPos=function(z,k){this.rx=z,this.ry=k},x.prototype.resetForce=function(){this.fx=0,this.fy=0},x.prototype.addForce=function(z){var k=z.rx-this.rx,E=z.ry-this.ry,N=Math.hypot(k,E);N=N<1e-4?1e-4:N;var T=this.g*(this.degree+1)*(z.degree+1)/N;this.fx+=T*k/N,this.fy+=T*E/N},x.prototype.in=function(z){return z.contains(this.rx,this.ry)},x.prototype.add=function(z){var k=this.mass+z.mass,E=(this.rx*this.mass+z.rx*z.mass)/k,N=(this.ry*this.mass+z.ry*z.mass)/k,T=this.degree+z.degree,m={rx:E,ry:N,mass:k,degree:T};return new x(m)},x}();w.default=S},58443:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var v=function(p,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,_){I.__proto__=_}||function(I,_){for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(I[C]=_[C])},v(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");v(p,g);function I(){this.constructor=p}p.prototype=g===null?Object.create(g):(I.prototype=g.prototype,new I)}}(),z=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(w,"__esModule",{value:!0}),w.ForceAtlas2Layout=void 0;var k=S(94416),E=S(78302),N=z(S(19615)),T=z(S(80057)),m=z(S(37809)),y=function(v){x(p,v);function p(g){var I=v.call(this)||this;return I.center=[0,0],I.width=300,I.height=300,I.nodes=[],I.edges=[],I.kr=5,I.kg=1,I.mode="normal",I.preventOverlap=!1,I.dissuadeHubs=!1,I.barnesHut=void 0,I.maxIteration=0,I.ks=.1,I.ksmax=10,I.tao=.1,I.onLayoutEnd=function(){},I.prune=void 0,I.updateCfg(g),I}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.execute=function(){var g=this,I=g.nodes,_=g.onLayoutEnd,C=g.prune,O=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var b=[],l=I.length,K=0;K<l;K+=1){var Z=I[K],X=10,W=10;(0,E.isNumber)(Z.size)&&(X=Z.size,W=Z.size),(0,E.isArray)(Z.size)?(isNaN(Z.size[0])||(X=Z.size[0]),isNaN(Z.size[1])||(W=Z.size[1])):(0,E.isObject)(Z.size)&&(X=Z.size.width,W=Z.size.height),g.getWidth&&!isNaN(g.getWidth(Z))&&(W=g.getWidth(Z)),g.getHeight&&!isNaN(g.getHeight(Z))&&(X=g.getHeight(Z));var U=Math.max(X,W);b.push(U)}g.barnesHut===void 0&&l>250&&(g.barnesHut=!0),g.prune===void 0&&l>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(O=250,l<=200&&l>100?O=1e3:l>200&&(O=1200),this.maxIteration=O):this.maxIteration===0&&C&&(O=100,l<=200&&l>100?O=500:l>200&&(O=950),this.maxIteration=O),g.kr||(g.kr=50,l>100&&l<=500?g.kr=20:l>500&&(g.kr=1)),g.kg||(g.kg=20,l>100&&l<=500?g.kg=10:l>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(b),_()},p.prototype.updateNodesByForces=function(g){for(var I=this,_=I.edges,C=I.maxIteration,O=I.nodes,b=_.filter(function(Rt){var At=(0,E.getEdgeTerminal)(Rt,"source"),Q=(0,E.getEdgeTerminal)(Rt,"target");return At!==Q}),l=O.length,K=b.length,Z=[],X={},W={},U=[],et=0;et<l;et+=1)X[O[et].id]=et,Z[et]=0,(O[et].x===void 0||isNaN(O[et].x))&&(O[et].x=Math.random()*1e3),(O[et].y===void 0||isNaN(O[et].y))&&(O[et].y=Math.random()*1e3),U.push({x:O[et].x,y:O[et].y});for(var et=0;et<K;et+=1){for(var at=void 0,J=void 0,nt=0,mt=0,Mt=0;Mt<l;Mt+=1){var vt=(0,E.getEdgeTerminal)(b[et],"source"),zt=(0,E.getEdgeTerminal)(b[et],"target");O[Mt].id===vt?(at=O[Mt],nt=Mt):O[Mt].id===zt&&(J=O[Mt],mt=Mt),W[et]={sourceIdx:nt,targetIdx:mt}}at&&(Z[X[at.id]]+=1),J&&(Z[X[J.id]]+=1)}var re=C;if(O=this.iterate(re,X,W,K,Z,g),I.prune){for(var Mt=0;Mt<K;Mt+=1)Z[W[Mt].sourceIdx]<=1?(O[W[Mt].sourceIdx].x=O[W[Mt].targetIdx].x,O[W[Mt].sourceIdx].y=O[W[Mt].targetIdx].y):Z[W[Mt].targetIdx]<=1&&(O[W[Mt].targetIdx].x=O[W[Mt].sourceIdx].x,O[W[Mt].targetIdx].y=O[W[Mt].sourceIdx].y);I.prune=!1,I.barnesHut=!1,re=100,O=this.iterate(re,X,W,K,Z,g)}return O},p.prototype.iterate=function(g,I,_,C,O,b){for(var l=this,K=l.nodes,Z=l.kr,X=l.preventOverlap,W=l.barnesHut,U=K.length,et=0,at=100,J=g,nt=50,mt=[],Mt=[],vt=[],zt=0;zt<U;zt+=1)if(mt[2*zt]=0,mt[2*zt+1]=0,W){var re={id:zt,rx:K[zt].x,ry:K[zt].y,mass:1,g:Z,degree:O[zt]};vt[zt]=new N.default(re)}for(;J>0;){for(var zt=0;zt<U;zt+=1)Mt[2*zt]=mt[2*zt],Mt[2*zt+1]=mt[2*zt+1],mt[2*zt]=0,mt[2*zt+1]=0;mt=this.getAttrForces(J,nt,C,I,_,O,b,mt),W&&(X&&J>nt||!X)?mt=this.getOptRepGraForces(mt,vt,O):mt=this.getRepGraForces(J,nt,mt,at,b,O);var Rt=this.updatePos(mt,Mt,et,O);K=Rt.nodes,et=Rt.sg,J--,l.tick&&l.tick()}return K},p.prototype.getAttrForces=function(g,I,_,C,O,b,l,K){for(var Z=this,X=Z.nodes,W=Z.preventOverlap,U=Z.dissuadeHubs,et=Z.mode,at=Z.prune,J=0;J<_;J+=1){var nt=X[O[J].sourceIdx],mt=O[J].sourceIdx,Mt=X[O[J].targetIdx],vt=O[J].targetIdx;if(!(at&&(b[mt]<=1||b[vt]<=1))){var zt=[Mt.x-nt.x,Mt.y-nt.y],re=Math.hypot(zt[0],zt[1]);re=re<1e-4?1e-4:re,zt[0]=zt[0]/re,zt[1]=zt[1]/re,W&&g<I&&(re=re-l[mt]-l[vt]);var Rt=re,At=Rt;et==="linlog"&&(Rt=Math.log(1+re),At=Rt),U&&(Rt=re/b[mt],At=re/b[vt]),W&&g<I&&re<=0?(Rt=0,At=0):W&&g<I&&re>0&&(Rt=re,At=re),K[2*C[nt.id]]+=Rt*zt[0],K[2*C[Mt.id]]-=At*zt[0],K[2*C[nt.id]+1]+=Rt*zt[1],K[2*C[Mt.id]+1]-=At*zt[1]}}return K},p.prototype.getRepGraForces=function(g,I,_,C,O,b){for(var l=this,K=l.nodes,Z=l.preventOverlap,X=l.kr,W=l.kg,U=l.center,et=l.prune,at=K.length,J=0;J<at;J+=1){for(var nt=J+1;nt<at;nt+=1)if(!(et&&(b[J]<=1||b[nt]<=1))){var mt=[K[nt].x-K[J].x,K[nt].y-K[J].y],Mt=Math.hypot(mt[0],mt[1]);Mt=Mt<1e-4?1e-4:Mt,mt[0]=mt[0]/Mt,mt[1]=mt[1]/Mt,Z&&g<I&&(Mt=Mt-O[J]-O[nt]);var vt=X*(b[J]+1)*(b[nt]+1)/Mt;Z&&g<I&&Mt<0?vt=C*(b[J]+1)*(b[nt]+1):Z&&g<I&&Mt===0?vt=0:Z&&g<I&&Mt>0&&(vt=X*(b[J]+1)*(b[nt]+1)/Mt),_[2*J]-=vt*mt[0],_[2*nt]+=vt*mt[0],_[2*J+1]-=vt*mt[1],_[2*nt+1]+=vt*mt[1]}var zt=[K[J].x-U[0],K[J].y-U[1]],re=Math.hypot(zt[0],zt[1]);zt[0]=zt[0]/re,zt[1]=zt[1]/re;var Rt=W*(b[J]+1);_[2*J]-=Rt*zt[0],_[2*J+1]-=Rt*zt[1]}return _},p.prototype.getOptRepGraForces=function(g,I,_){for(var C=this,O=C.nodes,b=C.kg,l=C.center,K=C.prune,Z=O.length,X=9e10,W=-9e10,U=9e10,et=-9e10,at=0;at<Z;at+=1)K&&_[at]<=1||(I[at].setPos(O[at].x,O[at].y),O[at].x>=W&&(W=O[at].x),O[at].x<=X&&(X=O[at].x),O[at].y>=et&&(et=O[at].y),O[at].y<=U&&(U=O[at].y));for(var J=Math.max(W-X,et-U),nt={xmid:(W+X)/2,ymid:(et+U)/2,length:J,massCenter:l,mass:Z},mt=new T.default(nt),Mt=new m.default(mt),at=0;at<Z;at+=1)K&&_[at]<=1||I[at].in(mt)&&Mt.insert(I[at]);for(var at=0;at<Z;at+=1)if(!(K&&_[at]<=1)){I[at].resetForce(),Mt.updateForce(I[at]),g[2*at]-=I[at].fx,g[2*at+1]-=I[at].fy;var vt=[O[at].x-l[0],O[at].y-l[1]],zt=Math.hypot(vt[0],vt[1]);zt=zt<1e-4?1e-4:zt,vt[0]=vt[0]/zt,vt[1]=vt[1]/zt;var re=b*(_[at]+1);g[2*at]-=re*vt[0],g[2*at+1]-=re*vt[1]}return g},p.prototype.updatePos=function(g,I,_,C){for(var O=this,b=O.nodes,l=O.ks,K=O.tao,Z=O.prune,X=O.ksmax,W=b.length,U=[],et=[],at=0,J=0,nt=0;nt<W;nt+=1)if(!(Z&&C[nt]<=1)){var mt=[g[2*nt]-I[2*nt],g[2*nt+1]-I[2*nt+1]],Mt=Math.hypot(mt[0],mt[1]),vt=[g[2*nt]+I[2*nt],g[2*nt+1]+I[2*nt+1]],zt=Math.hypot(vt[0],vt[1]);U[nt]=Mt,et[nt]=zt/2,at+=(C[nt]+1)*U[nt],J+=(C[nt]+1)*et[nt]}var re=_;_=K*J/at,re!==0&&(_=_>1.5*re?1.5*re:_);for(var nt=0;nt<W;nt+=1)if(!(Z&&C[nt]<=1)&&!((0,E.isNumber)(b[nt].fx)&&(0,E.isNumber)(b[nt].fy))){var Rt=l*_/(1+_*Math.sqrt(U[nt])),At=Math.hypot(g[2*nt],g[2*nt+1]);At=At<1e-4?1e-4:At;var Q=X/At;Rt=Rt>Q?Q:Rt;var gt=Rt*g[2*nt],Vt=Rt*g[2*nt+1];b[nt].x+=gt,b[nt].y+=Vt}return{nodes:b,sg:_}},p}(k.Base);w.ForceAtlas2Layout=y},80057:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(){function x(z){this.xmid=z.xmid,this.ymid=z.ymid,this.length=z.length,this.massCenter=z.massCenter||[0,0],this.mass=z.mass||1}return x.prototype.getLength=function(){return this.length},x.prototype.contains=function(z,k){var E=this.length/2;return z<=this.xmid+E&&z>=this.xmid-E&&k<=this.ymid+E&&k>=this.ymid-E},x.prototype.NW=function(){var z=this.xmid-this.length/4,k=this.ymid+this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},T=new x(N);return T},x.prototype.NE=function(){var z=this.xmid+this.length/4,k=this.ymid+this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},T=new x(N);return T},x.prototype.SW=function(){var z=this.xmid-this.length/4,k=this.ymid-this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},T=new x(N);return T},x.prototype.SE=function(){var z=this.xmid+this.length/4,k=this.ymid-this.length/4,E=this.length/2,N={xmid:z,ymid:k,length:E},T=new x(N);return T},x}();w.default=S},37809:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=function(){function x(z){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,z!=null&&(this.quad=z)}return x.prototype.insert=function(z){if(this.body==null){this.body=z;return}this._isExternal()?(this.quad&&(this.NW=new x(this.quad.NW()),this.NE=new x(this.quad.NE()),this.SW=new x(this.quad.SW()),this.SE=new x(this.quad.SE())),this._putBody(this.body),this._putBody(z),this.body=this.body.add(z)):(this.body=this.body.add(z),this._putBody(z))},x.prototype._putBody=function(z){this.quad&&(z.in(this.quad.NW())&&this.NW?this.NW.insert(z):z.in(this.quad.NE())&&this.NE?this.NE.insert(z):z.in(this.quad.SW())&&this.SW?this.SW.insert(z):z.in(this.quad.SE())&&this.SE&&this.SE.insert(z))},x.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},x.prototype.updateForce=function(z){if(!(this.body==null||z===this.body))if(this._isExternal())z.addForce(this.body);else{var k=this.quad?this.quad.getLength():0,E=this.body.distanceTo(z);k/E<this.theta?z.addForce(this.body):(this.NW&&this.NW.updateForce(z),this.NE&&this.NE.updateForce(z),this.SW&&this.SW.updateForce(z),this.SE&&this.SE.updateForce(z))}},x}();w.default=S},39570:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var T=function(m,y){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},T(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");T(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.FruchtermanLayout=void 0;var z=S(94416),k=S(78302),E=800,N=function(T){x(m,T);function m(y){var v=T.call(this)||this;return v.maxIteration=1e3,v.workerEnabled=!1,v.gravity=10,v.speed=5,v.clustering=!1,v.clusterGravity=10,v.nodes=[],v.edges=[],v.width=300,v.height=300,v.nodeMap={},v.nodeIdxMap={},v.onLayoutEnd=function(){},v.tick=function(){},v.animate=!0,v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},m.prototype.execute=function(){var y=this,v,p,g=this,I=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!I||I.length===0){(v=g.onLayoutEnd)===null||v===void 0||v.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var _=g.center;if(I.length===1){I[0].x=_[0],I[0].y=_[1],(p=g.onLayoutEnd)===null||p===void 0||p.call(g);return}var C={},O={};return I.forEach(function(b,l){(0,k.isNumber)(b.x)||(b.x=Math.random()*y.width),(0,k.isNumber)(b.y)||(b.y=Math.random()*y.height),C[b.id]=b,O[b.id]=l}),g.nodeMap=C,g.nodeIdxMap=O,g.run()},m.prototype.run=function(){var y,v=this,p=v.nodes;if(p){var g=v.edges,I=v.maxIteration,_=v.workerEnabled,C=v.clustering,O=v.animate,b={};if(C&&p.forEach(function(Z){b[Z.cluster]===void 0&&(b[Z.cluster]={name:Z.cluster,cx:0,cy:0,count:0})}),_||!O){for(var l=0;l<I;l++)v.runOneStep(b);(y=v.onLayoutEnd)===null||y===void 0||y.call(v)}else{if(typeof window=="undefined")return;var K=0;this.timeInterval=window.setInterval(function(){var Z;v.runOneStep(b),K++,K>=I&&((Z=v.onLayoutEnd)===null||Z===void 0||Z.call(v),window.clearInterval(v.timeInterval))},0)}return{nodes:p,edges:g}}},m.prototype.runOneStep=function(y){var v,p=this,g=p.nodes;if(g){var I=p.edges,_=p.center,C=p.gravity,O=p.speed,b=p.clustering,l=p.height*p.width,K=Math.sqrt(l)/10,Z=l/(g.length+1),X=Math.sqrt(Z),W=[];if(g.forEach(function(at,J){W[J]={x:0,y:0}}),p.applyCalculate(g,I,W,X,Z),b){for(var U in y)y[U].cx=0,y[U].cy=0,y[U].count=0;g.forEach(function(at){var J=y[at.cluster];(0,k.isNumber)(at.x)&&(J.cx+=at.x),(0,k.isNumber)(at.y)&&(J.cy+=at.y),J.count++});for(var U in y)y[U].cx/=y[U].count,y[U].cy/=y[U].count;var et=p.clusterGravity||C;g.forEach(function(at,J){if(!(!(0,k.isNumber)(at.x)||!(0,k.isNumber)(at.y))){var nt=y[at.cluster],mt=Math.sqrt((at.x-nt.cx)*(at.x-nt.cx)+(at.y-nt.cy)*(at.y-nt.cy)),Mt=X*et;W[J].x-=Mt*(at.x-nt.cx)/mt,W[J].y-=Mt*(at.y-nt.cy)/mt}})}g.forEach(function(at,J){if(!(!(0,k.isNumber)(at.x)||!(0,k.isNumber)(at.y))){var nt=.01*X*C;W[J].x-=nt*(at.x-_[0]),W[J].y-=nt*(at.y-_[1])}}),g.forEach(function(at,J){if((0,k.isNumber)(at.fx)&&(0,k.isNumber)(at.fy)){at.x=at.fx,at.y=at.fy;return}if(!(!(0,k.isNumber)(at.x)||!(0,k.isNumber)(at.y))){var nt=Math.sqrt(W[J].x*W[J].x+W[J].y*W[J].y);if(nt>0){var mt=Math.min(K*(O/E),nt);at.x+=W[J].x/nt*mt,at.y+=W[J].y/nt*mt}}}),(v=p.tick)===null||v===void 0||v.call(p)}},m.prototype.applyCalculate=function(y,v,p,g,I){var _=this;_.calRepulsive(y,p,I),v&&_.calAttractive(v,p,g)},m.prototype.calRepulsive=function(y,v,p){y.forEach(function(g,I){v[I]={x:0,y:0},y.forEach(function(_,C){if(I!==C&&!(!(0,k.isNumber)(g.x)||!(0,k.isNumber)(_.x)||!(0,k.isNumber)(g.y)||!(0,k.isNumber)(_.y))){var O=g.x-_.x,b=g.y-_.y,l=O*O+b*b;if(l===0){l=1;var K=I>C?1:-1;O=.01*K,b=.01*K}var Z=p/l;v[I].x+=O*Z,v[I].y+=b*Z}})})},m.prototype.calAttractive=function(y,v,p){var g=this;y.forEach(function(I){var _=(0,k.getEdgeTerminal)(I,"source"),C=(0,k.getEdgeTerminal)(I,"target");if(!(!_||!C)){var O=g.nodeIdxMap[_],b=g.nodeIdxMap[C];if(O!==b){var l=g.nodeMap[_],K=g.nodeMap[C];if(!(!(0,k.isNumber)(K.x)||!(0,k.isNumber)(l.x)||!(0,k.isNumber)(K.y)||!(0,k.isNumber)(l.y))){var Z=K.x-l.x,X=K.y-l.y,W=Math.sqrt(Z*Z+X*X),U=W*W/p;v[b].x-=Z/W*U,v[b].y-=X/W*U,v[O].x+=Z/W*U,v[O].y+=X/W*U}}}})},m.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},m.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},m.prototype.getType=function(){return"fruchterman"},m}(z.Base);w.FruchtermanLayout=N},2014:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var T=function(m,y){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},T(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");T(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.GForceLayout=void 0;var z=S(94416),k=S(78302),E=function(T,m){var y;return T?(0,k.isNumber)(T)?y=function(v){return T}:y=T:y=function(v){return m||1},y},N=function(T){x(m,T);function m(y){var v=T.call(this)||this;return v.maxIteration=500,v.workerEnabled=!1,v.edgeStrength=200,v.nodeStrength=1e3,v.coulombDisScale=.005,v.damping=.9,v.maxSpeed=1e3,v.minMovement=.5,v.interval=.02,v.factor=1,v.linkDistance=1,v.gravity=10,v.preventOverlap=!0,v.collideStrength=1,v.tick=function(){},v.nodes=[],v.edges=[],v.width=300,v.height=300,v.nodeMap={},v.nodeIdxMap={},v.animate=!0,v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},m.prototype.execute=function(){var y,v,p=this,g=p.nodes;if(p.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(p.timeInterval),!g||g.length===0){(y=p.onLayoutEnd)===null||y===void 0||y.call(p);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var I=p.center;if(g.length===1){g[0].x=I[0],g[0].y=I[1],(v=p.onLayoutEnd)===null||v===void 0||v.call(p);return}var _={},C={};g.forEach(function(X,W){(0,k.isNumber)(X.x)||(X.x=Math.random()*p.width),(0,k.isNumber)(X.y)||(X.y=Math.random()*p.height),_[X.id]=X,C[X.id]=W}),p.nodeMap=_,p.nodeIdxMap=C,p.linkDistance=E(p.linkDistance,1),p.nodeStrength=E(p.nodeStrength,1),p.edgeStrength=E(p.edgeStrength,1);var O=p.nodeSize,b;if(p.preventOverlap){var l=p.nodeSpacing,K;(0,k.isNumber)(l)?K=function(){return l}:(0,k.isFunction)(l)?K=l:K=function(){return 0},O?(0,k.isArray)(O)?b=function(X){return Math.max(O[0],O[1])+K(X)}:b=function(X){return O+K(X)}:b=function(X){return X.size?(0,k.isArray)(X.size)?Math.max(X.size[0],X.size[1])+K(X):(0,k.isObject)(X.size)?Math.max(X.size.width,X.size.height)+K(X):X.size+K(X):10+K(X)}}p.nodeSize=b;var Z=p.edges;p.degrees=(0,k.getDegree)(g.length,p.nodeIdxMap,Z),p.getMass||(p.getMass=function(X){var W=X.mass||p.degrees[p.nodeIdxMap[X.id]].all||1;return W}),p.run()},m.prototype.run=function(){var y,v=this,p=v.maxIteration,g=v.nodes,I=v.workerEnabled,_=v.minMovement,C=v.animate;if(g)if(I||!C){for(var O=0;O<p;O++){var b=v.runOneStep(O);if(v.reachMoveThreshold(g,b,_))break}(y=v.onLayoutEnd)===null||y===void 0||y.call(v)}else{if(typeof window=="undefined")return;var l=0;this.timeInterval=window.setInterval(function(){var K,Z;if(g){var X=v.runOneStep(l)||[];v.reachMoveThreshold(g,X,_)&&((K=v.onLayoutEnd)===null||K===void 0||K.call(v),window.clearInterval(v.timeInterval)),l++,l>=p&&((Z=v.onLayoutEnd)===null||Z===void 0||Z.call(v),window.clearInterval(v.timeInterval))}},0)}},m.prototype.reachMoveThreshold=function(y,v,p){var g=0;return y.forEach(function(I,_){var C=I.x-v[_].x,O=I.y-v[_].y;g+=Math.sqrt(C*C+O*O)}),g/=y.length,g<p},m.prototype.runOneStep=function(y){var v,p=this,g=p.nodes,I=p.edges,_=[],C=[];if(g){g.forEach(function(l,K){_[2*K]=0,_[2*K+1]=0,C[2*K]=0,C[2*K+1]=0}),p.calRepulsive(_,g),I&&p.calAttractive(_,I),p.calGravity(_,g);var O=Math.max(.02,p.interval-y*.002);p.updateVelocity(_,C,O,g);var b=[];return g.forEach(function(l){b.push({x:l.x,y:l.y})}),p.updatePosition(C,O,g),(v=p.tick)===null||v===void 0||v.call(p),b}},m.prototype.calRepulsive=function(y,v){var p=this,g=p.getMass,I=p.factor,_=p.coulombDisScale,C=p.preventOverlap,O=p.collideStrength,b=O===void 0?1:O,l=p.nodeStrength,K=p.nodeSize;v.forEach(function(Z,X){var W=g?g(Z):1;v.forEach(function(U,et){if(!(X>=et)){var at=Z.x-U.x,J=Z.y-U.y;at===0&&J===0&&(at=Math.random()*.01,J=Math.random()*.01);var nt=at*at+J*J,mt=Math.sqrt(nt),Mt=(mt+.1)*_,vt=at/mt,zt=J/mt,re=(l(Z)+l(U))*.5*I/(Mt*Mt),Rt=g?g(U):1;if(y[2*X]+=vt*re,y[2*X+1]+=zt*re,y[2*et]-=vt*re,y[2*et+1]-=zt*re,C&&(K(Z)+K(U))/2>mt){var At=b*(l(Z)+l(U))*.5/nt;y[2*X]+=vt*At/W,y[2*X+1]+=zt*At/W,y[2*et]-=vt*At/Rt,y[2*et+1]-=zt*At/Rt}}})})},m.prototype.calAttractive=function(y,v){var p=this,g=p.nodeMap,I=p.nodeIdxMap,_=p.linkDistance,C=p.edgeStrength,O=p.nodeSize,b=p.getMass;v.forEach(function(l,K){var Z=(0,k.getEdgeTerminal)(l,"source"),X=(0,k.getEdgeTerminal)(l,"target"),W=g[Z],U=g[X],et=U.x-W.x,at=U.y-W.y;et===0&&at===0&&(et=Math.random()*.01,at=Math.random()*.01);var J=Math.sqrt(et*et+at*at),nt=et/J,mt=at/J,Mt=_(l,W,U)||1+(O(W)+O(W)||0)/2,vt=Mt-J,zt=vt*C(l),re=I[Z],Rt=I[X],At=b?b(W):1,Q=b?b(U):1;y[2*re]-=nt*zt/At,y[2*re+1]-=mt*zt/At,y[2*Rt]+=nt*zt/Q,y[2*Rt+1]+=mt*zt/Q})},m.prototype.calGravity=function(y,v){for(var p=this,g=p.center,I=p.gravity,_=p.degrees,C=v.length,O=0;O<C;O++){var b=v[O],l=b.x-g[0],K=b.y-g[1],Z=I;if(p.getCenter){var X=p.getCenter(b,_[O].all);X&&(0,k.isNumber)(X[0])&&(0,k.isNumber)(X[1])&&(0,k.isNumber)(X[2])&&(l=b.x-X[0],K=b.y-X[1],Z=X[2])}Z&&(y[2*O]-=Z*l,y[2*O+1]-=Z*K)}},m.prototype.updateVelocity=function(y,v,p,g){var I=this,_=p*I.damping;g.forEach(function(C,O){var b=y[2*O]*_||.01,l=y[2*O+1]*_||.01,K=Math.sqrt(b*b+l*l);if(K>I.maxSpeed){var Z=I.maxSpeed/K;b=Z*b,l=Z*l}v[2*O]=b,v[2*O+1]=l})},m.prototype.updatePosition=function(y,v,p){p.forEach(function(g,I){if((0,k.isNumber)(g.fx)&&(0,k.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var _=y[2*I]*v,C=y[2*I+1]*v;g.x+=_,g.y+=C})},m.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},m.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},m.prototype.getType=function(){return"gForce"},m}(z.Base);w.GForceLayout=N},96396:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var g=function(I,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,O){C.__proto__=O}||function(C,O){for(var b in O)Object.prototype.hasOwnProperty.call(O,b)&&(C[b]=O[b])},g(I,_)};return function(I,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(I,_);function C(){this.constructor=I}I.prototype=_===null?Object.create(_):(C.prototype=_.prototype,new C)}}(),z=this&&this.__awaiter||function(g,I,_,C){function O(b){return b instanceof _?b:new _(function(l){l(b)})}return new(_||(_=Promise))(function(b,l){function K(W){try{X(C.next(W))}catch(U){l(U)}}function Z(W){try{X(C.throw(W))}catch(U){l(U)}}function X(W){W.done?b(W.value):O(W.value).then(K,Z)}X((C=C.apply(g,I||[])).next())})},k=this&&this.__generator||function(g,I){var _={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},C,O,b,l;return l={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function K(X){return function(W){return Z([X,W])}}function Z(X){if(C)throw new TypeError("Generator is already executing.");for(;_;)try{if(C=1,O&&(b=X[0]&2?O.return:X[0]?O.throw||((b=O.return)&&b.call(O),0):O.next)&&!(b=b.call(O,X[1])).done)return b;switch(O=0,b&&(X=[X[0]&2,b.value]),X[0]){case 0:case 1:b=X;break;case 4:return _.label++,{value:X[1],done:!1};case 5:_.label++,O=X[1],X=[0];continue;case 7:X=_.ops.pop(),_.trys.pop();continue;default:if(b=_.trys,!(b=b.length>0&&b[b.length-1])&&(X[0]===6||X[0]===2)){_=0;continue}if(X[0]===3&&(!b||X[1]>b[0]&&X[1]<b[3])){_.label=X[1];break}if(X[0]===6&&_.label<b[1]){_.label=b[1],b=X;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(X);break}b[2]&&_.ops.pop(),_.trys.pop();continue}X=I.call(g,_)}catch(W){X=[6,W],O=0}finally{C=b=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}};Object.defineProperty(w,"__esModule",{value:!0}),w.FruchtermanGPULayout=void 0;var E=S(94416),N=S(78302),T=S(82274),m=S(46063),y=S(27481),v=S(17219),p=function(g){x(I,g);function I(_){var C=g.call(this)||this;return C.maxIteration=1e3,C.gravity=10,C.speed=1,C.clustering=!1,C.clusterField="cluster",C.clusterGravity=10,C.workerEnabled=!1,C.nodes=[],C.edges=[],C.width=300,C.height=300,C.nodeMap={},C.nodeIdxMap={},C.updateCfg(_),C}return I.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},I.prototype.execute=function(){return z(this,void 0,void 0,function(){var _,C,O,b,l,K=this;return k(this,function(Z){switch(Z.label){case 0:return _=this,C=_.nodes,!C||C.length===0?(_.onLayoutEnd&&_.onLayoutEnd(),[2]):(!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]),O=_.center,C.length===1?(C[0].x=O[0],C[0].y=O[1],_.onLayoutEnd&&_.onLayoutEnd(),[2]):(b={},l={},C.forEach(function(X,W){(0,N.isNumber)(X.x)||(X.x=Math.random()*K.width),(0,N.isNumber)(X.y)||(X.y=Math.random()*K.height),b[X.id]=X,l[X.id]=W}),_.nodeMap=b,_.nodeIdxMap=l,[4,_.run()]));case 1:return Z.sent(),[2]}})})},I.prototype.executeWithWorker=function(_,C){return z(this,void 0,void 0,function(){var O,b,l,K,Z,X=this;return k(this,function(W){switch(W.label){case 0:return O=this,b=O.nodes,l=O.center,!b||b.length===0?[2]:b.length===1?(b[0].x=l[0],b[0].y=l[1],[2]):(K={},Z={},b.forEach(function(U,et){(0,N.isNumber)(U.x)||(U.x=Math.random()*X.width),(0,N.isNumber)(U.y)||(U.y=Math.random()*X.height),K[U.id]=U,Z[U.id]=et}),O.nodeMap=K,O.nodeIdxMap=Z,[4,O.run(_,C)]);case 1:return W.sent(),[2]}})})},I.prototype.run=function(_,C){return z(this,void 0,void 0,function(){var O,b,l,K,Z,X,W,U,et,at,J,nt,mt,Mt,vt,zt,re,Rt,At,Q,gt,Vt,Ht,It,de,De,Ye=this;return k(this,function(kt){switch(kt.label){case 0:for(O=this,b=O.nodes,l=O.edges,K=O.maxIteration,Z=O.center,X=O.height*O.width,W=Math.sqrt(X)/10,U=X/(b.length+1),et=Math.sqrt(U),at=O.speed,J=O.clustering,nt=(0,m.attributesToTextureData)([O.clusterField],b),mt=nt.array,Mt=nt.count,b.forEach(function(Pt,_t){var jt=0,Qt=0;(0,N.isNumber)(Pt.fx)&&(0,N.isNumber)(Pt.fy)&&(jt=Pt.fx||.001,Qt=Pt.fy||.001),mt[4*_t+1]=jt,mt[4*_t+2]=Qt}),vt=b.length,zt=(0,m.buildTextureData)(b,l),re=zt.maxEdgePerVetex,Rt=zt.array,At=O.workerEnabled,At?Q=T.World.create({canvas:_,engineOptions:{supportCompute:!0}}):Q=T.World.create({engineOptions:{supportCompute:!0}}),gt=O.onLayoutEnd,Vt=[],Ht=0;Ht<Mt;Ht++)Vt.push(0,0,0,0);return It=Q.createKernel(y.fruchtermanBundle).setDispatch([vt,1,1]).setBinding({u_Data:Rt,u_K:et,u_K2:U,u_Gravity:O.gravity,u_ClusterGravity:O.clusterGravity||O.gravity||1,u_Speed:at,u_MaxDisplace:W,u_Clustering:J?1:0,u_Center:Z,u_AttributeArray:mt,u_ClusterCenters:Vt,MAX_EDGE_PER_VERTEX:re,VERTEX_COUNT:vt}),J&&(de=Q.createKernel(y.clusterBundle).setDispatch([Mt,1,1]).setBinding({u_Data:Rt,u_NodeAttributes:mt,u_ClusterCenters:Vt,VERTEX_COUNT:vt,CLUSTER_COUNT:Mt})),De=function(){return z(Ye,void 0,void 0,function(){var Pt,_t;return k(this,function(jt){switch(jt.label){case 0:Pt=0,jt.label=1;case 1:return Pt<K?[4,It.execute()]:[3,6];case 2:return jt.sent(),J?(de.setBinding({u_Data:It}),[4,de.execute()]):[3,4];case 3:jt.sent(),It.setBinding({u_ClusterCenters:de}),jt.label=4;case 4:It.setBinding({u_MaxDisplace:W*=.99}),jt.label=5;case 5:return Pt++,[3,1];case 6:return[4,It.getOutput()];case 7:return _t=jt.sent(),_?C.postMessage({type:v.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:_t}):b.forEach(function(Qt,Tt){var Zt=_t[4*Tt],Ee=_t[4*Tt+1];Qt.x=Zt,Qt.y=Ee}),gt&&gt(),[2]}})})},[4,De()];case 1:return kt.sent(),[2]}})})},I.prototype.getType=function(){return"fruchterman-gpu"},I}(E.Base);w.FruchtermanGPULayout=p},27481:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.clusterBundle=w.clusterCode=w.fruchtermanBundle=w.fruchtermanCode=void 0,w.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,w.fruchtermanBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',w.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,w.clusterBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},47469:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var I=function(_,C){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,b){O.__proto__=b}||function(O,b){for(var l in b)Object.prototype.hasOwnProperty.call(b,l)&&(O[l]=b[l])},I(_,C)};return function(_,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");I(_,C);function O(){this.constructor=_}_.prototype=C===null?Object.create(C):(O.prototype=C.prototype,new O)}}(),z=this&&this.__awaiter||function(I,_,C,O){function b(l){return l instanceof C?l:new C(function(K){K(l)})}return new(C||(C=Promise))(function(l,K){function Z(U){try{W(O.next(U))}catch(et){K(et)}}function X(U){try{W(O.throw(U))}catch(et){K(et)}}function W(U){U.done?l(U.value):b(U.value).then(Z,X)}W((O=O.apply(I,_||[])).next())})},k=this&&this.__generator||function(I,_){var C={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},O,b,l,K;return K={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(K[Symbol.iterator]=function(){return this}),K;function Z(W){return function(U){return X([W,U])}}function X(W){if(O)throw new TypeError("Generator is already executing.");for(;C;)try{if(O=1,b&&(l=W[0]&2?b.return:W[0]?b.throw||((l=b.return)&&l.call(b),0):b.next)&&!(l=l.call(b,W[1])).done)return l;switch(b=0,l&&(W=[W[0]&2,l.value]),W[0]){case 0:case 1:l=W;break;case 4:return C.label++,{value:W[1],done:!1};case 5:C.label++,b=W[1],W=[0];continue;case 7:W=C.ops.pop(),C.trys.pop();continue;default:if(l=C.trys,!(l=l.length>0&&l[l.length-1])&&(W[0]===6||W[0]===2)){C=0;continue}if(W[0]===3&&(!l||W[1]>l[0]&&W[1]<l[3])){C.label=W[1];break}if(W[0]===6&&C.label<l[1]){C.label=l[1],l=W;break}if(l&&C.label<l[2]){C.label=l[2],C.ops.push(W);break}l[2]&&C.ops.pop(),C.trys.pop();continue}W=_.call(I,C)}catch(U){W=[6,U],b=0}finally{O=l=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(w,"__esModule",{value:!0}),w.GForceGPULayout=void 0;var E=S(94416),N=S(78302),T=S(82274),m=S(46063),y=S(87073),v=S(9382),p=S(17219),g=function(I){x(_,I);function _(C){var O=I.call(this)||this;return O.maxIteration=1e3,O.edgeStrength=200,O.nodeStrength=1e3,O.coulombDisScale=.005,O.damping=.9,O.maxSpeed=1e3,O.minMovement=.5,O.interval=.02,O.factor=1,O.linkDistance=1,O.gravity=10,O.workerEnabled=!1,O.nodes=[],O.edges=[],O.width=300,O.height=300,O.nodeMap={},O.nodeIdxMap={},O.updateCfg(C),O}return _.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},_.prototype.execute=function(){return z(this,void 0,void 0,function(){var C,O,b,l,K;return k(this,function(Z){switch(Z.label){case 0:return C=this,O=C.nodes,!O||O.length===0?(C.onLayoutEnd&&C.onLayoutEnd(),[2]):(!C.width&&typeof window!="undefined"&&(C.width=window.innerWidth),!C.height&&typeof window!="undefined"&&(C.height=window.innerHeight),C.center||(C.center=[C.width/2,C.height/2]),b=C.center,O.length===1?(O[0].x=b[0],O[0].y=b[1],C.onLayoutEnd&&C.onLayoutEnd(),[2]):(l={},K={},O.forEach(function(X,W){(0,N.isNumber)(X.x)||(X.x=Math.random()*C.width),(0,N.isNumber)(X.y)||(X.y=Math.random()*C.height),l[X.id]=X,K[X.id]=W}),C.nodeMap=l,C.nodeIdxMap=K,C.nodeStrength=(0,m.proccessToFunc)(C.nodeStrength,1),C.edgeStrength=(0,m.proccessToFunc)(C.edgeStrength,1),[4,C.run()]));case 1:return Z.sent(),[2]}})})},_.prototype.executeWithWorker=function(C,O){var b=this,l=b.nodes,K=b.center;if(!(!l||l.length===0)){if(l.length===1){l[0].x=K[0],l[0].y=K[1];return}var Z={},X={};l.forEach(function(W,U){(0,N.isNumber)(W.x)||(W.x=Math.random()*b.width),(0,N.isNumber)(W.y)||(W.y=Math.random()*b.height),Z[W.id]=W,X[W.id]=U}),b.nodeMap=Z,b.nodeIdxMap=X,b.nodeStrength=(0,m.proccessToFunc)(b.nodeStrength,1),b.edgeStrength=(0,m.proccessToFunc)(b.edgeStrength,1),b.run(C,O)}},_.prototype.run=function(C,O){return z(this,void 0,void 0,function(){var b,l,K,Z,X,W,U,et,at,J,nt,mt,Mt,vt,zt,re,Rt,At,Q,gt,Vt,Ht,It,de,De,Ye,kt,Pt=this;return k(this,function(_t){switch(_t.label){case 0:for(b=this,l=b.nodes,K=b.edges,Z=b.maxIteration,!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight),X=l.length,b.linkDistance=(0,m.proccessToFunc)(b.linkDistance),b.edgeStrength=(0,m.proccessToFunc)(b.edgeStrength),W=(0,m.buildTextureDataWithTwoEdgeAttr)(l,K,b.linkDistance,b.edgeStrength),U=W.maxEdgePerVetex,et=W.array,b.degrees=(0,y.getDegree)(l.length,b.nodeIdxMap,K).map(function(jt){return jt.all}),at=[],J=[],nt=[],mt=[],Mt=[],vt=[],zt=[],b.getMass||(b.getMass=function(jt){return b.degrees[b.nodeIdxMap[jt.id]]||1}),re=b.gravity,Rt=b.center,l.forEach(function(jt,Qt){at.push(b.getMass(jt)),J.push(b.nodeStrength(jt)),b.degrees[Qt]||(b.degrees[Qt]=0);var Tt=[Rt[0],Rt[1],re];if(b.getCenter){var Zt=b.getCenter(jt,b.degrees[Qt]);Zt&&(0,N.isNumber)(Zt[0])&&(0,N.isNumber)(Zt[1])&&(0,N.isNumber)(Zt[2])&&(Tt=Zt)}nt.push(Tt[0]),mt.push(Tt[1]),Mt.push(Tt[2]),(0,N.isNumber)(jt.fx)&&(0,N.isNumber)(jt.fy)?(vt.push(jt.fx||.001),zt.push(jt.fy||.001)):(vt.push(0),zt.push(0))}),At=(0,m.arrayToTextureData)([at,b.degrees,J,vt]),Q=(0,m.arrayToTextureData)([nt,mt,Mt,zt]),gt=b.workerEnabled,gt?Vt=T.World.create({canvas:C,engineOptions:{supportCompute:!0}}):Vt=T.World.create({engineOptions:{supportCompute:!0}}),Ht=b.onLayoutEnd,It=[],et.forEach(function(jt){It.push(jt)}),de=0;de<4;de++)It.push(0);return De=Vt.createKernel(v.gForceBundle).setDispatch([X,1,1]).setBinding({u_Data:et,u_damping:b.damping,u_maxSpeed:b.maxSpeed,u_minMovement:b.minMovement,u_coulombDisScale:b.coulombDisScale,u_factor:b.factor,u_NodeAttributeArray1:At,u_NodeAttributeArray2:Q,MAX_EDGE_PER_VERTEX:U,VERTEX_COUNT:X,u_AveMovement:It,u_interval:b.interval}),Ye=Vt.createKernel(v.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:et,VERTEX_COUNT:X,u_AveMovement:[0,0,0,0]}),kt=function(){return z(Pt,void 0,void 0,function(){var jt,Qt,Tt;return k(this,function(Zt){switch(Zt.label){case 0:jt=0,Zt.label=1;case 1:return jt<Z?[4,De.execute()]:[3,5];case 2:return Zt.sent(),Ye.setBinding({u_Data:De}),[4,Ye.execute()];case 3:Zt.sent(),Qt=Math.max(.02,b.interval-jt*.002),De.setBinding({u_interval:Qt,u_AveMovement:Ye}),Zt.label=4;case 4:return jt++,[3,1];case 5:return[4,De.getOutput()];case 6:return Tt=Zt.sent(),C?O.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Tt}):l.forEach(function(Ee,dt){var bt=Tt[4*dt],wt=Tt[4*dt+1];Ee.x=bt,Ee.y=wt}),Ht&&Ht(),[2]}})})},[4,kt()];case 1:return _t.sent(),[2]}})})},_.prototype.getType=function(){return"gForce-gpu"},_}(E.Base);w.GForceGPULayout=g},9382:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.aveMovementBundle=w.aveMovementCode=w.gForceBundle=w.gForceCode=void 0,w.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,w.gForceBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',w.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,w.aveMovementBundle='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},11998:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var N=function(T,m){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(y[p]=v[p])},N(T,m)};return function(T,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");N(T,m);function y(){this.constructor=T}T.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.GridLayout=void 0;var z=S(78302),k=S(94416),E=function(N){x(T,N);function T(m){var y=N.call(this)||this;return y.begin=[0,0],y.preventOverlap=!0,y.preventOverlapPadding=10,y.condense=!1,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.row=0,y.col=0,y.cellWidth=0,y.cellHeight=0,y.cellUsed={},y.id2manPos={},y.onLayoutEnd=function(){},y.updateCfg(m),y}return T.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},T.prototype.execute=function(){var m=this,y=m.nodes,v=m.edges,p=m.begin,g=y.length;if(g===0)return m.onLayoutEnd&&m.onLayoutEnd(),{nodes:y,edges:v};if(g===1)return y[0].x=p[0],y[0].y=p[1],m.onLayoutEnd&&m.onLayoutEnd(),{nodes:y,edges:v};var I=m.sortBy,_=m.width,C=m.height,O=m.condense,b=m.preventOverlapPadding,l=m.preventOverlap,K=m.nodeSpacing,Z=m.nodeSize,X=[];y.forEach(function(At){X.push(At)});var W={};if(X.forEach(function(At,Q){W[At.id]=Q}),(I==="degree"||!(0,z.isString)(I)||X[0][I]===void 0)&&(I="degree",(0,z.isNaN)(y[0].degree))){var U=(0,z.getDegree)(X.length,W,v);X.forEach(function(At,Q){At.degree=U[Q].all})}X.sort(function(At,Q){return Q[I]-At[I]}),!_&&typeof window!="undefined"&&(_=window.innerWidth),!C&&typeof window!="undefined"&&(C=window.innerHeight);var et=m.rows,at=m.cols!=null?m.cols:m.columns;if(m.cells=g,et!=null&&at!=null?(m.rows=et,m.cols=at):et!=null&&at==null?(m.rows=et,m.cols=Math.ceil(m.cells/m.rows)):et==null&&at!=null?(m.cols=at,m.rows=Math.ceil(m.cells/m.cols)):(m.splits=Math.sqrt(m.cells*m.height/m.width),m.rows=Math.round(m.splits),m.cols=Math.round(m.width/m.height*m.splits)),m.rows=Math.max(m.rows,1),m.cols=Math.max(m.cols,1),m.cols*m.rows>m.cells){var J=m.small(),nt=m.large();(J-1)*nt>=m.cells?m.small(J-1):(nt-1)*J>=m.cells&&m.large(nt-1)}else for(;m.cols*m.rows<m.cells;){var J=m.small(),nt=m.large();(nt+1)*J>=m.cells?m.large(nt+1):m.small(J+1)}if(m.cellWidth=_/m.cols,m.cellHeight=C/m.rows,O&&(m.cellWidth=0,m.cellHeight=0),l||K){var mt=(0,z.getFuncByUnknownType)(10,K),Mt=(0,z.getFuncByUnknownType)(30,Z,!1);X.forEach(function(At){(!At.x||!At.y)&&(At.x=0,At.y=0);var Q=Mt(At)||30,gt,Vt;(0,z.isArray)(Q)?(gt=Q[0],Vt=Q[1]):(gt=Q,Vt=Q);var Ht=mt!==void 0?mt(At):b,It=gt+Ht,de=Vt+Ht;m.cellWidth=Math.max(m.cellWidth,It),m.cellHeight=Math.max(m.cellHeight,de)})}m.cellUsed={},m.row=0,m.col=0,m.id2manPos={};for(var vt=0;vt<X.length;vt++){var zt=X[vt],re=void 0;if(m.position&&(re=m.position(zt)),re&&(re.row!==void 0||re.col!==void 0)){var Rt={row:re.row,col:re.col};if(Rt.col===void 0)for(Rt.col=0;m.used(Rt.row,Rt.col);)Rt.col++;else if(Rt.row===void 0)for(Rt.row=0;m.used(Rt.row,Rt.col);)Rt.row++;m.id2manPos[zt.id]=Rt,m.use(Rt.row,Rt.col)}m.getPos(zt)}return m.onLayoutEnd&&m.onLayoutEnd(),{edges:v,nodes:X}},T.prototype.small=function(m){var y=this,v,p=y.rows||5,g=y.cols||5;if(m==null)v=Math.min(p,g);else{var I=Math.min(p,g);I===y.rows?y.rows=m:y.cols=m}return v},T.prototype.large=function(m){var y=this,v,p=y.rows||5,g=y.cols||5;if(m==null)v=Math.max(p,g);else{var I=Math.max(p,g);I===y.rows?y.rows=m:y.cols=m}return v},T.prototype.used=function(m,y){var v=this;return v.cellUsed["c-".concat(m,"-").concat(y)]||!1},T.prototype.use=function(m,y){var v=this;v.cellUsed["c-".concat(m,"-").concat(y)]=!0},T.prototype.moveToNextCell=function(){var m=this,y=m.cols||5;m.col++,m.col>=y&&(m.col=0,m.row++)},T.prototype.getPos=function(m){var y=this,v=y.begin,p=y.cellWidth,g=y.cellHeight,I,_,C=y.id2manPos[m.id];if(C)I=C.col*p+p/2+v[0],_=C.row*g+g/2+v[1];else{for(;y.used(y.row,y.col);)y.moveToNextCell();I=y.col*p+p/2+v[0],_=y.row*g+g/2+v[1],y.use(y.row,y.col),y.moveToNextCell()}m.x=I,m.y=_},T.prototype.getType=function(){return"grid"},T}(k.Base);w.GridLayout=E},51709:function(ae,w,S){"use strict";var x=this&&this.__createBinding||(Object.create?function(U,et,at,J){J===void 0&&(J=at);var nt=Object.getOwnPropertyDescriptor(et,at);(!nt||("get"in nt?!et.__esModule:nt.writable||nt.configurable))&&(nt={enumerable:!0,get:function(){return et[at]}}),Object.defineProperty(U,J,nt)}:function(U,et,at,J){J===void 0&&(J=at),U[J]=et[at]}),z=this&&this.__exportStar||function(U,et){for(var at in U)at!=="default"&&!Object.prototype.hasOwnProperty.call(et,at)&&x(et,U,at)};Object.defineProperty(w,"__esModule",{value:!0}),w.ERLayout=w.ForceAtlas2Layout=w.ComboCombinedLayout=w.ComboForceLayout=w.GForceGPULayout=w.FruchtermanGPULayout=w.FruchtermanLayout=w.MDSLayout=w.ConcentricLayout=w.RadialLayout=w.DagreCompoundLayout=w.DagreLayout=w.CircularLayout=w.ForceLayout=w.Force2Layout=w.GForceLayout=w.RandomLayout=w.GridLayout=w.Layouts=w.Layout=void 0;var k=S(11998);Object.defineProperty(w,"GridLayout",{enumerable:!0,get:function(){return k.GridLayout}});var E=S(10136);Object.defineProperty(w,"RandomLayout",{enumerable:!0,get:function(){return E.RandomLayout}});var N=S(2014);Object.defineProperty(w,"GForceLayout",{enumerable:!0,get:function(){return N.GForceLayout}});var T=S(36129);Object.defineProperty(w,"Force2Layout",{enumerable:!0,get:function(){return T.Force2Layout}});var m=S(12032);Object.defineProperty(w,"ForceLayout",{enumerable:!0,get:function(){return m.ForceLayout}});var y=S(28672);Object.defineProperty(w,"CircularLayout",{enumerable:!0,get:function(){return y.CircularLayout}});var v=S(98989);Object.defineProperty(w,"DagreLayout",{enumerable:!0,get:function(){return v.DagreLayout}});var p=S(74222);Object.defineProperty(w,"DagreCompoundLayout",{enumerable:!0,get:function(){return p.DagreCompoundLayout}});var g=S(20179);Object.defineProperty(w,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var I=S(90127);Object.defineProperty(w,"ConcentricLayout",{enumerable:!0,get:function(){return I.ConcentricLayout}});var _=S(70623);Object.defineProperty(w,"MDSLayout",{enumerable:!0,get:function(){return _.MDSLayout}});var C=S(39570);Object.defineProperty(w,"FruchtermanLayout",{enumerable:!0,get:function(){return C.FruchtermanLayout}});var O=S(96396);Object.defineProperty(w,"FruchtermanGPULayout",{enumerable:!0,get:function(){return O.FruchtermanGPULayout}});var b=S(47469);Object.defineProperty(w,"GForceGPULayout",{enumerable:!0,get:function(){return b.GForceGPULayout}});var l=S(5506);Object.defineProperty(w,"ComboForceLayout",{enumerable:!0,get:function(){return l.ComboForceLayout}});var K=S(50023);Object.defineProperty(w,"ComboCombinedLayout",{enumerable:!0,get:function(){return K.ComboCombinedLayout}});var Z=S(58443);Object.defineProperty(w,"ForceAtlas2Layout",{enumerable:!0,get:function(){return Z.ForceAtlas2Layout}});var X=S(83529);Object.defineProperty(w,"ERLayout",{enumerable:!0,get:function(){return X.ERLayout}});var W=S(695);Object.defineProperty(w,"Layout",{enumerable:!0,get:function(){return W.Layout}}),Object.defineProperty(w,"Layouts",{enumerable:!0,get:function(){return W.Layouts}}),z(S(75864),w)},695:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Layouts=w.Layout=void 0;var x=S(45610),z=S(11998),k=S(10136),E=S(36129),N=S(2014),T=S(12032),m=S(28672),y=S(98989),v=S(20179),p=S(90127),g=S(70623),I=S(39570),_=S(96396),C=S(47469),O=S(5506),b=S(50023),l=S(58443),K=S(83529),Z=S(74222),X=function(){function W(U){var et=(0,x.getLayoutByName)(U.type);this.layoutInstance=new et(U)}return W.prototype.layout=function(U){return this.layoutInstance.layout(U)},W.prototype.updateCfg=function(U){this.layoutInstance.updateCfg(U)},W.prototype.init=function(U){this.layoutInstance.init(U)},W.prototype.execute=function(){this.layoutInstance.execute()},W.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},W.prototype.destroy=function(){return this.layoutInstance.destroy()},W}();w.Layout=X,w.Layouts={force:T.ForceLayout,fruchterman:I.FruchtermanLayout,forceAtlas2:l.ForceAtlas2Layout,gForce:N.GForceLayout,force2:E.Force2Layout,dagre:y.DagreLayout,dagreCompound:Z.DagreCompoundLayout,circular:m.CircularLayout,radial:v.RadialLayout,concentric:p.ConcentricLayout,grid:z.GridLayout,mds:g.MDSLayout,comboForce:O.ComboForceLayout,comboCombined:b.ComboCombinedLayout,random:k.RandomLayout,"gForce-gpu":C.GForceGPULayout,"fruchterman-gpu":_.FruchtermanGPULayout,er:K.ERLayout}},70623:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var T=function(m,y){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},T(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");T(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.MDSLayout=void 0;var z=S(60340),k=S(78302),E=S(94416),N=function(T){x(m,T);function m(y){var v=T.call(this)||this;return v.center=[0,0],v.linkDistance=50,v.nodes=[],v.edges=[],v.onLayoutEnd=function(){},v.updateCfg(y),v}return m.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},m.prototype.execute=function(){var y=this,v=y.nodes,p=y.edges,g=p===void 0?[]:p,I=y.center;if(!v||v.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(v.length===1){v[0].x=I[0],v[0].y=I[1],y.onLayoutEnd&&y.onLayoutEnd();return}var _=y.linkDistance,C=(0,k.getAdjMatrix)({nodes:v,edges:g},!1),O=(0,k.floydWarshall)(C);y.handleInfinity(O);var b=(0,k.scaleMatrix)(O,_);y.scaledDistances=b;var l=y.runMDS();return y.positions=l,l.forEach(function(K,Z){v[Z].x=K[0]+I[0],v[Z].y=K[1]+I[1]}),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:v,edges:g}},m.prototype.runMDS=function(){var y=this,v=2,p=y.scaledDistances,g=z.Matrix.mul(z.Matrix.pow(p,2),-.5),I=g.mean("row"),_=g.mean("column"),C=g.mean();g.add(C).subRowVector(I).subColumnVector(_);var O=new z.SingularValueDecomposition(g),b=z.Matrix.sqrt(O.diagonalMatrix).diagonal();return O.leftSingularVectors.toJSON().map(function(l){return z.Matrix.mul([l],[b]).toJSON()[0].splice(0,v)})},m.prototype.handleInfinity=function(y){var v=-999999;y.forEach(function(p){p.forEach(function(g){g!==1/0&&v<g&&(v=g)})}),y.forEach(function(p,g){p.forEach(function(I,_){I===1/0&&(y[g][_]=v)})})},m.prototype.getType=function(){return"mds"},m}(E.Base);w.MDSLayout=N},20179:function(ae,w,S){"use strict";var x=this&&this.__createBinding||(Object.create?function(k,E,N,T){T===void 0&&(T=N);var m=Object.getOwnPropertyDescriptor(E,N);(!m||("get"in m?!E.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return E[N]}}),Object.defineProperty(k,T,m)}:function(k,E,N,T){T===void 0&&(T=N),k[T]=E[N]}),z=this&&this.__exportStar||function(k,E){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(E,N)&&x(E,k,N)};Object.defineProperty(w,"__esModule",{value:!0}),z(S(34028),w)},95196:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var x=S(60340),z=function(){function k(E){this.distances=E.distances,this.dimension=E.dimension||2,this.linkDistance=E.linkDistance}return k.prototype.layout=function(){var E=this,N=E.dimension,T=E.distances,m=E.linkDistance;try{var y=x.Matrix.mul(x.Matrix.pow(T,2),-.5),v=y.mean("row"),p=y.mean("column"),g=y.mean();y.add(g).subRowVector(v).subColumnVector(p);var I=new x.SingularValueDecomposition(y),_=x.Matrix.sqrt(I.diagonalMatrix).diagonal();return I.leftSingularVectors.toJSON().map(function(K){return x.Matrix.mul([K],[_]).toJSON()[0].splice(0,N)})}catch(K){for(var C=[],O=0;O<T.length;O++){var b=Math.random()*m,l=Math.random()*m;C.push([b,l])}return C}},k}();w.default=z},34028:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var g=function(I,_){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,O){C.__proto__=O}||function(C,O){for(var b in O)Object.prototype.hasOwnProperty.call(O,b)&&(C[b]=O[b])},g(I,_)};return function(I,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");g(I,_);function C(){this.constructor=I}I.prototype=_===null?Object.create(_):(C.prototype=_.prototype,new C)}}(),z=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(w,"__esModule",{value:!0}),w.RadialLayout=void 0;var k=S(78302),E=S(94416),N=z(S(95196)),T=z(S(34506));function m(g){for(var I=g.length,_=g[0].length,C=[],O=0;O<I;O++){for(var b=[],l=0;l<_;l++)g[O][l]!==0?b.push(1/(g[O][l]*g[O][l])):b.push(0);C.push(b)}return C}function y(g,I){var _=-1;return g.forEach(function(C,O){C.id===I&&(_=O)}),_}function v(g,I){return Math.sqrt((g[0]-I[0])*(g[0]-I[0])+(g[1]-I[1])*(g[1]-I[1]))}var p=function(g){x(I,g);function I(_){var C=g.call(this)||this;return C.maxIteration=1e3,C.focusNode=null,C.unitRadius=null,C.linkDistance=50,C.preventOverlap=!1,C.strictRadial=!0,C.maxPreventOverlapIteration=200,C.sortStrength=10,C.nodes=[],C.edges=[],C.updateCfg(_),C}return I.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},I.prototype.execute=function(){var _=this,C=_.nodes,O=_.edges||[];if(!C||C.length===0){_.onLayoutEnd&&_.onLayoutEnd();return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var b=_.center;if(C.length===1){C[0].x=b[0],C[0].y=b[1],_.onLayoutEnd&&_.onLayoutEnd();return}var l=_.linkDistance,K=null;if((0,k.isString)(_.focusNode)){for(var Z=!1,X=0;X<C.length;X++)C[X].id===_.focusNode&&(K=C[X],_.focusNode=K,Z=!0,X=C.length);Z||(K=null)}else K=_.focusNode;K||(K=C[0],_.focusNode=K);var W=y(C,K.id);W<0&&(W=0),_.focusIndex=W;var U=(0,k.getAdjMatrix)({nodes:C,edges:O},!1),et=(0,k.floydWarshall)(U),at=_.maxToFocus(et,W);_.handleInfinity(et,W,at+1),_.distances=et;var J=et[W],nt=_.width||500,mt=_.height||500,Mt=nt-b[0]>b[0]?b[0]:nt-b[0],vt=mt-b[1]>b[1]?b[1]:mt-b[1];Mt===0&&(Mt=nt/2),vt===0&&(vt=mt/2);var zt=vt>Mt?Mt:vt,re=Math.max.apply(Math,J),Rt=[];J.forEach(function(jt,Qt){_.unitRadius||(_.unitRadius=zt/re),Rt[Qt]=jt*_.unitRadius}),_.radii=Rt;var At=_.eIdealDisMatrix();_.eIdealDistances=At;var Q=m(At);_.weights=Q;var gt=new N.default({linkDistance:l,distances:At}),Vt=gt.layout();Vt.forEach(function(jt){(0,k.isNaN)(jt[0])&&(jt[0]=Math.random()*l),(0,k.isNaN)(jt[1])&&(jt[1]=Math.random()*l)}),_.positions=Vt,Vt.forEach(function(jt,Qt){C[Qt].x=jt[0]+b[0],C[Qt].y=jt[1]+b[1]}),Vt.forEach(function(jt){jt[0]-=Vt[W][0],jt[1]-=Vt[W][1]}),_.run();var Ht=_.preventOverlap,It=_.nodeSize,de,De=_.strictRadial;if(Ht){var Ye=_.nodeSpacing,kt;(0,k.isNumber)(Ye)?kt=function(){return Ye}:(0,k.isFunction)(Ye)?kt=Ye:kt=function(){return 0},It?(0,k.isArray)(It)?de=function(jt){var Qt=It[0]>It[1]?It[0]:It[1];return Qt+kt(jt)}:de=function(jt){return It+kt(jt)}:de=function(jt){if(jt.size){if((0,k.isArray)(jt.size)){var Qt=jt.size[0]>jt.size[1]?jt.size[0]:jt.size[1];return Qt+kt(jt)}if((0,k.isObject)(jt.size)){var Qt=jt.size.width>jt.size.height?jt.size.width:jt.size.height;return Qt+kt(jt)}return jt.size+kt(jt)}return 10+kt(jt)};var Pt={nodes:C,nodeSizeFunc:de,adjMatrix:U,positions:Vt,radii:Rt,height:mt,width:nt,strictRadial:De,focusID:W,iterations:_.maxPreventOverlapIteration||200,k:Vt.length/4.5},_t=new T.default(Pt);Vt=_t.layout()}return Vt.forEach(function(jt,Qt){C[Qt].x=jt[0]+b[0],C[Qt].y=jt[1]+b[1]}),_.onLayoutEnd&&_.onLayoutEnd(),{nodes:C,edges:O}},I.prototype.run=function(){for(var _=this,C=_.maxIteration,O=_.positions||[],b=_.weights||[],l=_.eIdealDistances||[],K=_.radii||[],Z=0;Z<=C;Z++){var X=Z/C;_.oneIteration(X,O,K,l,b)}},I.prototype.oneIteration=function(_,C,O,b,l){var K=this,Z=1-_,X=K.focusIndex;C.forEach(function(W,U){var et=v(W,[0,0]),at=et===0?0:1/et;if(U!==X){var J=0,nt=0,mt=0;C.forEach(function(vt,zt){if(U!==zt){var re=v(W,vt),Rt=re===0?0:1/re,At=b[zt][U];mt+=l[U][zt],J+=l[U][zt]*(vt[0]+At*(W[0]-vt[0])*Rt),nt+=l[U][zt]*(vt[1]+At*(W[1]-vt[1])*Rt)}});var Mt=O[U]===0?0:1/O[U];mt*=Z,mt+=_*Mt*Mt,J*=Z,J+=_*Mt*W[0]*at,W[0]=J/mt,nt*=Z,nt+=_*Mt*W[1]*at,W[1]=nt/mt}})},I.prototype.eIdealDisMatrix=function(){var _=this,C=_.nodes;if(!C)return[];var O=_.distances,b=_.linkDistance,l=_.radii||[],K=_.unitRadius||50,Z=[];return O&&O.forEach(function(X,W){var U=[];X.forEach(function(et,at){if(W===at)U.push(0);else if(l[W]===l[at])if(_.sortBy==="data")U.push(et*(Math.abs(W-at)*_.sortStrength)/(l[W]/K));else if(_.sortBy){var J=C[W][_.sortBy]||0,nt=C[at][_.sortBy]||0;(0,k.isString)(J)&&(J=J.charCodeAt(0)),(0,k.isString)(nt)&&(nt=nt.charCodeAt(0)),U.push(et*(Math.abs(J-nt)*_.sortStrength)/(l[W]/K))}else U.push(et*b/(l[W]/K));else{var mt=(b+K)/2;U.push(et*mt)}}),Z.push(U)}),Z},I.prototype.handleInfinity=function(_,C,O){for(var b=_.length,l=0;l<b;l++)if(_[C][l]===1/0){_[C][l]=O,_[l][C]=O;for(var K=0;K<b;K++)_[l][K]!==1/0&&_[C][K]===1/0&&(_[C][K]=O+_[l][K],_[K][C]=O+_[l][K])}for(var l=0;l<b;l++)if(l!==C){for(var K=0;K<b;K++)if(_[l][K]===1/0){var Z=Math.abs(_[C][l]-_[C][K]);Z=Z===0?1:Z,_[l][K]=Z}}},I.prototype.maxToFocus=function(_,C){for(var O=0,b=0;b<_[C].length;b++)_[C][b]!==1/0&&(O=_[C][b]>O?_[C][b]:O);return O},I.prototype.getType=function(){return"radial"},I}(E.Base);w.RadialLayout=p},34506:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=800,x=function(){function z(k){this.disp=[],this.positions=k.positions,this.adjMatrix=k.adjMatrix,this.focusID=k.focusID,this.radii=k.radii,this.iterations=k.iterations||10,this.height=k.height||10,this.width=k.width||10,this.speed=k.speed||100,this.gravity=k.gravity||10,this.nodeSizeFunc=k.nodeSizeFunc,this.k=k.k||5,this.strictRadial=k.strictRadial,this.nodes=k.nodes}return z.prototype.layout=function(){var k=this,E=k.positions,N=[],T=k.iterations,m=k.width/10;k.maxDisplace=m,k.disp=N;for(var y=0;y<T;y++)E.forEach(function(v,p){N[p]={x:0,y:0}}),k.getRepulsion(),k.updatePositions();return E},z.prototype.getRepulsion=function(){var k=this,E=k.positions,N=k.nodes,T=k.disp,m=k.k,y=k.radii||[];E.forEach(function(v,p){T[p]={x:0,y:0},E.forEach(function(g,I){if(p!==I&&y[p]===y[I]){var _=v[0]-g[0],C=v[1]-g[1],O=Math.sqrt(_*_+C*C);if(O===0){O=1;var b=p>I?1:-1;_=.01*b,C=.01*b}if(O<k.nodeSizeFunc(N[p])/2+k.nodeSizeFunc(N[I])/2){var l=m*m/O;T[p].x+=_/O*l,T[p].y+=C/O*l}}})})},z.prototype.updatePositions=function(){var k=this,E=k.positions,N=k.disp,T=k.speed,m=k.strictRadial,y=k.focusID,v=k.maxDisplace||k.width/10;m&&N.forEach(function(g,I){var _=E[I][0]-E[y][0],C=E[I][1]-E[y][1],O=Math.sqrt(_*_+C*C),b=C/O,l=-_/O,K=Math.sqrt(g.x*g.x+g.y*g.y),Z=Math.acos((b*g.x+l*g.y)/K);Z>Math.PI/2&&(Z-=Math.PI/2,b*=-1,l*=-1);var X=Math.cos(Z)*K;g.x=b*X,g.y=l*X});var p=k.radii;E.forEach(function(g,I){if(I!==y){var _=Math.sqrt(N[I].x*N[I].x+N[I].y*N[I].y);if(_>0&&I!==y){var C=Math.min(v*(T/S),_);if(g[0]+=N[I].x/_*C,g[1]+=N[I].y/_*C,m){var O=g[0]-E[y][0],b=g[1]-E[y][1],l=Math.sqrt(O*O+b*b);O=O/l*p[I],b=b/l*p[I],g[0]=E[y][0]+O,g[1]=E[y][1]+b}}}})},z}();w.default=x},10136:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var E=function(N,T){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(m[v]=y[v])},E(N,T)};return function(N,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");E(N,T);function m(){this.constructor=N}N.prototype=T===null?Object.create(T):(m.prototype=T.prototype,new m)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.RandomLayout=void 0;var z=S(94416),k=function(E){x(N,E);function N(T){var m=E.call(this)||this;return m.center=[0,0],m.width=300,m.height=300,m.nodes=[],m.edges=[],m.onLayoutEnd=function(){},m.updateCfg(T),m}return N.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},N.prototype.execute=function(){var T=this,m=T.nodes,y=.9,v=T.center;return!T.width&&typeof window!="undefined"&&(T.width=window.innerWidth),!T.height&&typeof window!="undefined"&&(T.height=window.innerHeight),m&&m.forEach(function(p){p.x=(Math.random()-.5)*y*T.width+v[0],p.y=(Math.random()-.5)*y*T.height+v[1]}),T.onLayoutEnd&&T.onLayoutEnd(),{nodes:m,edges:this.edges}},N.prototype.getType=function(){return"random"},N}(z.Base);w.RandomLayout=k},75864:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0})},45610:function(ae,w,S){"use strict";var x=this&&this.__extends||function(){var y=function(v,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var _ in I)Object.prototype.hasOwnProperty.call(I,_)&&(g[_]=I[_])},y(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(w,"__esModule",{value:!0}),w.getLayoutByName=w.unRegisterLayout=w.registerLayout=void 0;var z=S(94416),k=S(78302),E=new Map,N=function(y,v){if(E.get(y)&&console.warn("The layout with the name ".concat(y," exists already, it will be overridden")),(0,k.isObject)(v)){var p=function(g){x(I,g);function I(_){var C=g.call(this)||this,O=C,b={},l=O.getDefaultCfg();return Object.assign(b,l,v,_),Object.keys(b).forEach(function(K){var Z=b[K];O[K]=Z}),C}return I}(z.Base);E.set(y,p)}else E.set(y,v);return E.get(y)};w.registerLayout=N;var T=function(y){E.has(y)&&E.delete(y)};w.unRegisterLayout=T;var m=function(y){return E.has(y)?E.get(y):null};w.getLayoutByName=m},40532:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.isArray=void 0,w.isArray=Array.isArray},91898:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.getFuncByUnknownType=w.getFunc=w.isFunction=void 0;var x=S(78302),z=S(12655),k=function(T){return typeof T=="function"};w.isFunction=k;var E=function(T,m,y){var v;return y?v=y:(0,z.isNumber)(T)?v=function(){return T}:v=function(){return m},v};w.getFunc=E;var N=function(T,m,y){return y===void 0&&(y=!0),!m&&m!==0?function(v){return v.size?(0,x.isArray)(v.size)?v.size[0]>v.size[1]?v.size[0]:v.size[1]:(0,x.isObject)(v.size)?v.size.width>v.size.height?v.size.width:v.size.height:v.size:T}:(0,w.isFunction)(m)?m:(0,z.isNumber)(m)?function(){return m}:(0,x.isArray)(m)?function(){if(y){var v=Math.max.apply(Math,m);return isNaN(v)?T:v}return m}:(0,x.isObject)(m)?function(){if(y){var v=Math.max(m.width,m.height);return isNaN(v)?T:v}return[m.width,m.height]}:function(){return T}};w.getFuncByUnknownType=N},46063:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.arrayToTextureData=w.attributesToTextureData=w.buildTextureDataWithTwoEdgeAttr=w.buildTextureData=w.proccessToFunc=void 0;var x=S(78302),z=S(87073),k=function(y,v){var p;return y?(0,x.isNumber)(y)?p=function(){return y}:p=y:p=function(){return v||1},p};w.proccessToFunc=k;var E=function(y,v){var p=[],g=[],I={},_=0;for(_=0;_<y.length;_++){var C=y[_];I[C.id]=_,p.push(C.x),p.push(C.y),p.push(0),p.push(0),g.push([])}for(_=0;_<v.length;_++){var O=v[_],b=(0,z.getEdgeTerminal)(O,"source"),l=(0,z.getEdgeTerminal)(O,"target");!isNaN(I[b])&&!isNaN(I[l])&&(g[I[b]].push(I[l]),g[I[l]].push(I[b]))}var K=0;for(_=0;_<y.length;_++){var Z=p.length,X=g[_],W=X.length;console.log("dests",X,W),p[_*4+2]=Z,p[_*4+3]=W,K=Math.max(K,W);for(var U=0;U<W;++U){var et=X[U];p.push(+et)}}for(;p.length%4!==0;)p.push(0);return{maxEdgePerVetex:K,array:new Float32Array(p)}};w.buildTextureData=E;var N=function(y,v,p,g){var I=[],_=[],C={},O=0;for(O=0;O<y.length;O++){var b=y[O];C[b.id]=O,I.push(b.x),I.push(b.y),I.push(0),I.push(0),_.push([])}for(O=0;O<v.length;O++){var l=v[O],K=(0,z.getEdgeTerminal)(l,"source"),Z=(0,z.getEdgeTerminal)(l,"target");_[C[K]].push(C[Z]),_[C[K]].push(p(l)),_[C[K]].push(g(l)),_[C[K]].push(0),_[C[Z]].push(C[K]),_[C[Z]].push(p(l)),_[C[Z]].push(g(l)),_[C[Z]].push(0)}var X=0;for(O=0;O<y.length;O++){var W=I.length,U=_[O],et=U.length;I[O*4+2]=W+1048576*et/4,I[O*4+3]=0,X=Math.max(X,et/4);for(var at=0;at<et;++at){var J=U[at];I.push(+J)}}for(;I.length%4!==0;)I.push(0);return{maxEdgePerVetex:X,array:new Float32Array(I)}};w.buildTextureDataWithTwoEdgeAttr=N;var T=function(y,v){var p=[],g=y.length,I={};return v.forEach(function(_){y.forEach(function(C,O){if(I[_[C]]===void 0&&(I[_[C]]=Object.keys(I).length),p.push(I[_[C]]),O===g-1)for(;p.length%4!==0;)p.push(0)})}),{array:new Float32Array(p),count:Object.keys(I).length}};w.attributesToTextureData=T;var m=function(y){for(var v=[],p=y.length,g=y[0].length,I=function(C){y.forEach(function(O,b){if(v.push(O[C]),b===p-1)for(;v.length%4!==0;)v.push(0)})},_=0;_<g;_++)I(_);return new Float32Array(v)};w.arrayToTextureData=m},78302:function(ae,w,S){"use strict";var x=this&&this.__createBinding||(Object.create?function(k,E,N,T){T===void 0&&(T=N);var m=Object.getOwnPropertyDescriptor(E,N);(!m||("get"in m?!E.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return E[N]}}),Object.defineProperty(k,T,m)}:function(k,E,N,T){T===void 0&&(T=N),k[T]=E[N]}),z=this&&this.__exportStar||function(k,E){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(E,N)&&x(E,k,N)};Object.defineProperty(w,"__esModule",{value:!0}),z(S(18031),w),z(S(40532),w),z(S(12655),w),z(S(87073),w),z(S(28178),w),z(S(91898),w)},87073:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.getCoreNodeAndRelativeLeafNodes=w.getAvgNodePosition=w.findMinMaxNodeXY=w.traverseTreeUp=w.scaleMatrix=w.getAdjMatrix=w.floydWarshall=w.getDegreeMap=w.getDegree=w.getEdgeTerminal=void 0;var x=S(28178),z=function(b,l){var K=b[l];return(0,x.isObject)(K)?K.cell:K};w.getEdgeTerminal=z;var k=function(b,l,K){for(var Z=[],X=0;X<b;X++)Z[X]={in:0,out:0,all:0};return K&&K.forEach(function(W){var U=(0,w.getEdgeTerminal)(W,"source"),et=(0,w.getEdgeTerminal)(W,"target");U&&Z[l[U]]&&(Z[l[U]].out+=1,Z[l[U]].all+=1),et&&Z[l[et]]&&(Z[l[et]].in+=1,Z[l[et]].all+=1)}),Z};w.getDegree=k;var E=function(b,l){var K={};return b.forEach(function(Z){K[Z.id]={in:0,out:0,all:0}}),l&&l.forEach(function(Z){var X=(0,w.getEdgeTerminal)(Z,"source"),W=(0,w.getEdgeTerminal)(Z,"target");X&&(K[X].out+=1,K[X].all+=1),W&&(K[W].in+=1,K[W].all+=1)}),K};w.getDegreeMap=E;var N=function(b){for(var l=[],K=b.length,Z=0;Z<K;Z+=1){l[Z]=[];for(var X=0;X<K;X+=1)Z===X?l[Z][X]=0:b[Z][X]===0||!b[Z][X]?l[Z][X]=1/0:l[Z][X]=b[Z][X]}for(var W=0;W<K;W+=1)for(var Z=0;Z<K;Z+=1)for(var X=0;X<K;X+=1)l[Z][X]>l[Z][W]+l[W][X]&&(l[Z][X]=l[Z][W]+l[W][X]);return l};w.floydWarshall=N;var T=function(b,l){var K=b.nodes,Z=b.edges,X=[],W={};if(!K)throw new Error("invalid nodes data!");return K&&K.forEach(function(U,et){W[U.id]=et;var at=[];X.push(at)}),Z&&Z.forEach(function(U){var et=(0,w.getEdgeTerminal)(U,"source"),at=(0,w.getEdgeTerminal)(U,"target"),J=W[et],nt=W[at];X[J][nt]=1,l||(X[nt][J]=1)}),X};w.getAdjMatrix=T;var m=function(b,l){var K=[];return b.forEach(function(Z){var X=[];Z.forEach(function(W){X.push(W*l)}),K.push(X)}),K};w.scaleMatrix=m;var y=function(b,l){if(b&&b.children){for(var K=b.children.length-1;K>=0;K--)if(!y(b.children[K],l))return}return!!l(b)},v=function(b,l){typeof l=="function"&&y(b,l)};w.traverseTreeUp=v;var p=function(b){var l=1/0,K=1/0,Z=-1/0,X=-1/0;return b.forEach(function(W){l>W.x&&(l=W.x),K>W.y&&(K=W.y),Z<W.x&&(Z=W.x),X<W.y&&(X=W.y)}),{minX:l,minY:K,maxX:Z,maxY:X}};w.findMinMaxNodeXY=p;var g=function(b){var l={x:0,y:0};b.forEach(function(Z){l.x+=Z.x||0,l.y+=Z.y||0});var K=b.length||1;return{x:l.x/K,y:l.y/K}};w.getAvgNodePosition=g;var I=function(b,l,K){var Z,X;return b==="source"?((Z=K==null?void 0:K.find(function(W){return W.target===l.id}))===null||Z===void 0?void 0:Z.source)||{}:((X=K==null?void 0:K.find(function(W){return W.source===l.id}))===null||X===void 0?void 0:X.target)||{}},_=function(b,l,K){var Z=[];switch(b){case"source":Z=K==null?void 0:K.filter(function(W){return W.source===l.id}).map(function(W){return W.target});break;case"target":Z=K==null?void 0:K.filter(function(W){return W.target===l.id}).map(function(W){return W.source});break;case"both":Z=K==null?void 0:K.filter(function(W){return W.source===l.id}).map(function(W){return W.target}).concat(K==null?void 0:K.filter(function(W){return W.target===l.id}).map(function(W){return W.source}));break;default:break}var X=new Set(Z);return Array.from(X)},C=function(b,l,K,Z,X){var W=K[l]||"",U=(Z==null?void 0:Z.filter(function(et){return et[l]===W}))||[];return b==="leaf"&&(U=U.filter(function(et){var at,J;return((at=X[et.id])===null||at===void 0?void 0:at.in)===0||((J=X[et.id])===null||J===void 0?void 0:J.out)===0})),U},O=function(b,l,K,Z,X,W){var U=X[l.id],et=U.in,at=U.out,J=l,nt=[];et===0?(J=I("source",l,K),nt=_("both",J,K).map(function(Mt){return W[Mt]})):at===0&&(J=I("target",l,K),nt=_("both",J,K).map(function(Mt){return W[Mt]})),nt=nt.filter(function(Mt){return X[Mt.id]&&(X[Mt.id].in===0||X[Mt.id].out===0)});var mt=C(b,Z,l,nt,X);return{coreNode:J,relativeLeafNodes:nt,sameTypeLeafNodes:mt}};w.getCoreNodeAndRelativeLeafNodes=O},12655:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.toNumber=w.isNaN=w.isNumber=void 0;var S=function(k){return typeof k=="number"};w.isNumber=S;var x=function(k){return Number.isNaN(Number(k))};w.isNaN=x;var z=function(k){var E=parseFloat(k);return(0,w.isNaN)(E)?k:E};w.toNumber=z},28178:function(ae,w){"use strict";var S=this&&this.__assign||function(){return S=Object.assign||function(k){for(var E,N=1,T=arguments.length;N<T;N++){E=arguments[N];for(var m in E)Object.prototype.hasOwnProperty.call(E,m)&&(k[m]=E[m])}return k},S.apply(this,arguments)};Object.defineProperty(w,"__esModule",{value:!0}),w.clone=w.isObject=void 0;var x=function(k){return k!==null&&typeof k=="object"};w.isObject=x;var z=function(k){if(k===null)return k;if(k instanceof Date)return new Date(k.getTime());if(k instanceof Array){var E=[];return k.forEach(function(T){E.push(T)}),E.map(function(T){return(0,w.clone)(T)})}if(typeof k=="object"&&k!=={}){var N=S({},k);return Object.keys(N).forEach(function(T){N[T]=(0,w.clone)(N[T])}),N}return k};w.clone=z},18031:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.camelize=w.isString=void 0;var S=function(k){return typeof k=="string"};w.isString=S;var x=function(k){var E=Object.create(null);return function(N){var T=E[N];return T||(E[N]=k(N))}},z=/-(\w)/g;w.camelize=x(function(k){return k.replace(z,function(E,N){return N?N.toUpperCase():""})})},89431:function(ae,w,S){"use strict";var x;x={value:!0};var z=S(21574);function k(g,I,_){var C=[0,0,0,0,0,0,0,0,0];return z.mat3.fromTranslation(C,_),z.mat3.multiply(g,C,I)}x=k;function E(g,I,_){var C=[0,0,0,0,0,0,0,0,0];return z.mat3.fromRotation(C,_),z.mat3.multiply(g,C,I)}x=E;function N(g,I,_){var C=[0,0,0,0,0,0,0,0,0];return z.mat3.fromScaling(C,_),z.mat3.multiply(g,C,I)}x=N;function T(g,I,_){return z.mat3.multiply(g,_,I)}function m(g,I){for(var _=g?[].concat(g):[1,0,0,0,1,0,0,0,1],C=0,O=I.length;C<O;C++){var b=I[C];switch(b[0]){case"t":k(_,_,[b[1],b[2]]);break;case"s":N(_,_,[b[1],b[2]]);break;case"r":E(_,_,b[1]);break;case"m":T(_,_,b[1]);break;default:break}}return _}w.vs=m;function y(g,I){return g[0]*I[1]-I[0]*g[1]}x=y;function v(g,I,_){var C=z.vec2.angle(g,I),O=y(g,I)>=0;return _?O?Math.PI*2-C:C:O?C:Math.PI*2-C}x=v;function p(g,I,_){return _?(g[0]=I[1],g[1]=-1*I[0]):(g[0]=-1*I[1],g[1]=I[0]),g}x=p},76405:function(ae,w,S){"use strict";S.r(w),S.d(w,{Cache:function(){return xs},assign:function(){return ia},augment:function(){return rs},clamp:function(){return bi},clearAnimationFrame:function(){return Wn},clone:function(){return ga},contains:function(){return E},debounce:function(){return Qs},deepMix:function(){return bs},difference:function(){return y},each:function(){return K},endsWith:function(){return je},every:function(){return vr},extend:function(){return Ns},filter:function(){return T},find:function(){return Mt},findIndex:function(){return zt},firstValue:function(){return Rt},fixedBase:function(){return Hn},flatten:function(){return Q},flattenDeep:function(){return Vt},forIn:function(){return ne},get:function(){return fi},getEllipsisText:function(){return Wu},getRange:function(){return De},getType:function(){return Na},getWrapBehavior:function(){return Un},group:function(){return un},groupBy:function(){return zr},groupToMap:function(){return Mr},has:function(){return Ie},hasKey:function(){return Ce},hasValue:function(){return Wr},head:function(){return Re},identity:function(){return fo},includes:function(){return E},indexOf:function(){return ya},isArguments:function(){return vi},isArray:function(){return O},isArrayLike:function(){return z},isBoolean:function(){return Vo},isDate:function(){return ao},isDecimal:function(){return Dt},isElement:function(){return ts},isEmpty:function(){return Ka},isEqual:function(){return Js},isEqualWith:function(){return ka},isError:function(){return ps},isEven:function(){return H},isFinite:function(){return Io},isFunction:function(){return I},isInteger:function(){return F},isMatch:function(){return U},isNegative:function(){return Bt},isNil:function(){return C},isNull:function(){return Pn},isNumber:function(){return Si},isNumberEqual:function(){return Yt},isObject:function(){return b},isObjectLike:function(){return at},isOdd:function(){return ot},isPlainObject:function(){return nt},isPositive:function(){return te},isPrototype:function(){return oo},isRegExp:function(){return qo},isString:function(){return D},isType:function(){return g},isUndefined:function(){return bo},keys:function(){return X},last:function(){return qe},lowerCase:function(){return Nn},lowerFirst:function(){return Jn},map:function(){return wo},mapValues:function(){return Xo},max:function(){return Ht},maxBy:function(){return Me},measureTextWidth:function(){return ns},memoize:function(){return ms},min:function(){return It},minBy:function(){return Se},mix:function(){return ia},mod:function(){return sr},noop:function(){return eo},number2color:function(){return Bn},omit:function(){return Mi},parseRadius:function(){return Cn},pick:function(){return ba},pull:function(){return jt},pullAt:function(){return Zt},reduce:function(){return dt},remove:function(){return wt},requestAnimationFrame:function(){return es},set:function(){return ma},size:function(){return qs},some:function(){return Ae},sortBy:function(){return Nt},startsWith:function(){return le},substitute:function(){return Ri},throttle:function(){return ca},toArray:function(){return Es},toDegree:function(){return tr},toInteger:function(){return Sr},toRadian:function(){return Ft},toString:function(){return $r},union:function(){return ge},uniq:function(){return ft},uniqueId:function(){return uo},upperCase:function(){return Ki},upperFirst:function(){return Ea},values:function(){return Xe},valuesOfKey:function(){return Ge},wrapBehavior:function(){return vn}});var x=function(Xt){return Xt!==null&&typeof Xt!="function"&&isFinite(Xt.length)},z=x,k=function(Xt,ue){return z(Xt)?Xt.indexOf(ue)>-1:!1},E=k,N=function(Xt,ue){if(!z(Xt))return Xt;for(var nr=[],cr=0;cr<Xt.length;cr++){var Gr=Xt[cr];ue(Gr,cr)&&nr.push(Gr)}return nr},T=N,m=function(Xt,ue){return ue===void 0&&(ue=[]),T(Xt,function(nr){return!E(ue,nr)})},y=m,v={}.toString,p=function(Xt,ue){return v.call(Xt)==="[object "+ue+"]"},g=p,I=function(Xt){return g(Xt,"Function")},_=function(Xt){return Xt==null},C=_,O=function(Xt){return Array.isArray?Array.isArray(Xt):g(Xt,"Array")},b=function(Xt){var ue=typeof Xt;return Xt!==null&&ue==="object"||ue==="function"};function l(Xt,ue){if(Xt){var nr;if(O(Xt))for(var cr=0,Gr=Xt.length;cr<Gr&&(nr=ue(Xt[cr],cr),nr!==!1);cr++);else if(b(Xt)){for(var cn in Xt)if(Xt.hasOwnProperty(cn)&&(nr=ue(Xt[cn],cn),nr===!1))break}}}var K=l,Z=Object.keys?function(Xt){return Object.keys(Xt)}:function(Xt){var ue=[];return K(Xt,function(nr,cr){I(Xt)&&cr==="prototype"||ue.push(cr)}),ue},X=Z;function W(Xt,ue){var nr=X(ue),cr=nr.length;if(C(Xt))return!cr;for(var Gr=0;Gr<cr;Gr+=1){var cn=nr[Gr];if(ue[cn]!==Xt[cn]||!(cn in Xt))return!1}return!0}var U=W,et=function(Xt){return typeof Xt=="object"&&Xt!==null},at=et,J=function(Xt){if(!at(Xt)||!g(Xt,"Object"))return!1;if(Object.getPrototypeOf(Xt)===null)return!0;for(var ue=Xt;Object.getPrototypeOf(ue)!==null;)ue=Object.getPrototypeOf(ue);return Object.getPrototypeOf(Xt)===ue},nt=J;function mt(Xt,ue){if(!O(Xt))return null;var nr;if(I(ue)&&(nr=ue),nt(ue)&&(nr=function(Gr){return U(Gr,ue)}),nr){for(var cr=0;cr<Xt.length;cr+=1)if(nr(Xt[cr]))return Xt[cr]}return null}var Mt=mt;function vt(Xt,ue,nr){nr===void 0&&(nr=0);for(var cr=nr;cr<Xt.length;cr++)if(ue(Xt[cr],cr))return cr;return-1}var zt=vt,re=function(Xt,ue){for(var nr=null,cr=0;cr<Xt.length;cr++){var Gr=Xt[cr],cn=Gr[ue];if(!C(cn)){O(cn)?nr=cn[0]:nr=cn;break}}return nr},Rt=re,At=function(Xt){if(!O(Xt))return[];for(var ue=[],nr=0;nr<Xt.length;nr++)ue=ue.concat(Xt[nr]);return ue},Q=At,gt=function(Xt,ue){if(ue===void 0&&(ue=[]),!O(Xt))ue.push(Xt);else for(var nr=0;nr<Xt.length;nr+=1)gt(Xt[nr],ue);return ue},Vt=gt,Ht=function(Xt){if(O(Xt))return Xt.reduce(function(ue,nr){return Math.max(ue,nr)},Xt[0])},It=function(Xt){if(O(Xt))return Xt.reduce(function(ue,nr){return Math.min(ue,nr)},Xt[0])},de=function(Xt){var ue=Xt.filter(function(xn){return!isNaN(xn)});if(!ue.length)return{min:0,max:0};if(O(Xt[0])){for(var nr=[],cr=0;cr<Xt.length;cr++)nr=nr.concat(Xt[cr]);ue=nr}var Gr=Ht(ue),cn=It(ue);return{min:cn,max:Gr}},De=de,Ye=Array.prototype,kt=Ye.splice,Pt=Ye.indexOf,_t=function(Xt){for(var ue=[],nr=1;nr<arguments.length;nr++)ue[nr-1]=arguments[nr];for(var cr=0;cr<ue.length;cr++)for(var Gr=ue[cr],cn=-1;(cn=Pt.call(Xt,Gr))>-1;)kt.call(Xt,cn,1);return Xt},jt=_t,Qt=Array.prototype.splice,Tt=function(ue,nr){if(!z(ue))return[];for(var cr=ue?nr.length:0,Gr=cr-1;cr--;){var cn=void 0,xn=nr[cr];(cr===Gr||xn!==cn)&&(cn=xn,Qt.call(ue,xn,1))}return ue},Zt=Tt,Ee=function(Xt,ue,nr){if(!O(Xt)&&!nt(Xt))return Xt;var cr=nr;return K(Xt,function(Gr,cn){cr=ue(cr,Gr,cn)}),cr},dt=Ee,bt=function(Xt,ue){var nr=[];if(!z(Xt))return nr;for(var cr=-1,Gr=[],cn=Xt.length;++cr<cn;){var xn=Xt[cr];ue(xn,cr,Xt)&&(nr.push(xn),Gr.push(cr))}return Zt(Xt,Gr),nr},wt=bt,D=function(Xt){return g(Xt,"String")};function rt(Xt,ue){var nr;if(I(ue))nr=function(Gr,cn){return ue(Gr)-ue(cn)};else{var cr=[];D(ue)?cr.push(ue):O(ue)&&(cr=ue),nr=function(Gr,cn){for(var xn=0;xn<cr.length;xn+=1){var Zn=cr[xn];if(Gr[Zn]>cn[Zn])return 1;if(Gr[Zn]<cn[Zn])return-1}return 0}}return Xt.sort(nr),Xt}var Nt=rt;function ft(Xt,ue){ue===void 0&&(ue=new Map);var nr=[];if(Array.isArray(Xt))for(var cr=0,Gr=Xt.length;cr<Gr;cr++){var cn=Xt[cr];ue.has(cn)||(nr.push(cn),ue.set(cn,!0))}return nr}var ie=function(){for(var Xt=[],ue=0;ue<arguments.length;ue++)Xt[ue]=arguments[ue];return ft([].concat.apply([],Xt))},ge=ie,Ge=function(Xt,ue){for(var nr=[],cr={},Gr=0;Gr<Xt.length;Gr++){var cn=Xt[Gr],xn=cn[ue];if(!C(xn)){O(xn)||(xn=[xn]);for(var Zn=0;Zn<xn.length;Zn++){var Wi=xn[Zn];cr[Wi]||(nr.push(Wi),cr[Wi]=!0)}}}return nr};function Re(Xt){if(z(Xt))return Xt[0]}function qe(Xt){if(z(Xt)){var ue=Xt;return ue[ue.length-1]}}function Ve(Xt,ue){return O(Xt)||D(Xt)?Xt[0]===ue:!1}var le=Ve;function Le(Xt,ue){return O(Xt)||D(Xt)?Xt[Xt.length-1]===ue:!1}var je=Le,Be=function(Xt,ue){for(var nr=0;nr<Xt.length;nr++)if(!ue(Xt[nr],nr))return!1;return!0},vr=Be,or=function(Xt,ue){for(var nr=0;nr<Xt.length;nr++)if(ue(Xt[nr],nr))return!0;return!1},Ae=or,yr=Object.prototype.hasOwnProperty;function Cr(Xt,ue){if(!ue||!O(Xt))return{};for(var nr={},cr=I(ue)?ue:function(Zn){return Zn[ue]},Gr,cn=0;cn<Xt.length;cn++){var xn=Xt[cn];Gr=cr(xn),yr.call(nr,Gr)?nr[Gr].push(xn):nr[Gr]=[xn]}return nr}var zr=Cr;function Mr(Xt,ue){if(!ue)return{0:Xt};if(!I(ue)){var nr=O(ue)?ue:ue.replace(/\s+/g,"").split("*");ue=function(cr){for(var Gr="_",cn=0,xn=nr.length;cn<xn;cn++)Gr+=cr[nr[cn]]&&cr[nr[cn]].toString();return Gr}}return zr(Xt,ue)}var un=function(Xt,ue){if(!ue)return[Xt];var nr=Mr(Xt,ue),cr=[];for(var Gr in nr)cr.push(nr[Gr]);return cr};function hn(Xt,ue){return Xt["_wrap_"+ue]}var Un=hn;function nn(Xt,ue){if(Xt["_wrap_"+ue])return Xt["_wrap_"+ue];var nr=function(cr){Xt[ue](cr)};return Xt["_wrap_"+ue]=nr,nr}var vn=nn,ln={};function pn(Xt){var ue=ln[Xt];if(!ue){for(var nr=Xt.toString(16),cr=nr.length;cr<6;cr++)nr="0"+nr;ue="#"+nr,ln[Xt]=ue}return ue}var Bn=pn;function Pe(Xt){var ue=0,nr=0,cr=0,Gr=0;return O(Xt)?Xt.length===1?ue=nr=cr=Gr=Xt[0]:Xt.length===2?(ue=cr=Xt[0],nr=Gr=Xt[1]):Xt.length===3?(ue=Xt[0],nr=Gr=Xt[1],cr=Xt[2]):(ue=Xt[0],nr=Xt[1],cr=Xt[2],Gr=Xt[3]):ue=nr=cr=Gr=Xt,{r1:ue,r2:nr,r3:cr,r4:Gr}}var Cn=Pe,Gn=function(Xt,ue,nr){return Xt<ue?ue:Xt>nr?nr:Xt},bi=Gn,zn=function(Xt,ue){var nr=ue.toString(),cr=nr.indexOf(".");if(cr===-1)return Math.round(Xt);var Gr=nr.substr(cr+1).length;return Gr>20&&(Gr=20),parseFloat(Xt.toFixed(Gr))},Hn=zn,hi=function(Xt){return g(Xt,"Number")},Si=hi,pi=function(Xt){return Si(Xt)&&Xt%1!==0},Dt=pi,Lt=function(Xt){return Si(Xt)&&Xt%2===0},H=Lt,G=Number.isInteger?Number.isInteger:function(Xt){return Si(Xt)&&Xt%1===0},F=G,st=function(Xt){return Si(Xt)&&Xt<0},Bt=st,Kt=1e-5;function Yt(Xt,ue,nr){return nr===void 0&&(nr=Kt),Math.abs(Xt-ue)<nr}var he=function(Xt){return Si(Xt)&&Xt%2!==0},ot=he,yt=function(Xt){return Si(Xt)&&Xt>0},te=yt,Me=function(Xt,ue){if(O(Xt)){for(var nr,cr=-1/0,Gr=0;Gr<Xt.length;Gr++){var cn=Xt[Gr],xn=I(ue)?ue(cn):cn[ue];xn>cr&&(nr=cn,cr=xn)}return nr}},Se=function(Xt,ue){if(O(Xt)){for(var nr,cr=1/0,Gr=0;Gr<Xt.length;Gr++){var cn=Xt[Gr],xn=I(ue)?ue(cn):cn[ue];xn<cr&&(nr=cn,cr=xn)}return nr}},er=function(Xt,ue){return(Xt%ue+ue)%ue},sr=er,ye=180/Math.PI,Fe=function(Xt){return ye*Xt},tr=Fe,Sr=parseInt,Er=Math.PI/180,me=function(Xt){return Er*Xt},Ft=me,ne=K,Ie=function(Xt,ue){return Xt.hasOwnProperty(ue)},Ce=Ie,Ue=Object.values?function(Xt){return Object.values(Xt)}:function(Xt){var ue=[];return K(Xt,function(nr,cr){I(Xt)&&cr==="prototype"||ue.push(nr)}),ue},Xe=Ue,Wr=function(Xt,ue){return E(Xe(Xt),ue)},$r=function(Xt){return C(Xt)?"":Xt.toString()},mn=function(Xt){return $r(Xt).toLowerCase()},Nn=mn,kn=function(Xt){var ue=$r(Xt);return ue.charAt(0).toLowerCase()+ue.substring(1)},Jn=kn;function ri(Xt,ue){return!Xt||!ue?Xt:Xt.replace(/\\?\{([^{}]+)\}/g,function(nr,cr){return nr.charAt(0)==="\\"?nr.slice(1):ue[cr]===void 0?"":ue[cr]})}var Ri=ri,di=function(Xt){return $r(Xt).toUpperCase()},Ki=di,yo=function(Xt){var ue=$r(Xt);return ue.charAt(0).toUpperCase()+ue.substring(1)},Ea=yo,ta={}.toString,mo=function(Xt){return ta.call(Xt).replace(/^\[object /,"").replace(/]$/,"")},Na=mo,To=function(Xt){return g(Xt,"Arguments")},vi=To,xa=function(Xt){return g(Xt,"Boolean")},Vo=xa,zi=function(Xt){return g(Xt,"Date")},ao=zi,jo=function(Xt){return g(Xt,"Error")},ps=jo;function Io(Xt){return Si(Xt)&&isFinite(Xt)}var Ja=function(Xt){return Xt===null},Pn=Ja,$s=Object.prototype,na=function(Xt){var ue=Xt&&Xt.constructor,nr=typeof ue=="function"&&ue.prototype||$s;return Xt===nr},oo=na,Xa=function(Xt){return g(Xt,"RegExp")},qo=Xa,On=function(Xt){return Xt===void 0},bo=On,gs=function(Xt){return Xt instanceof Element||Xt instanceof HTMLDocument},ts=gs;function es(Xt){var ue=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(nr){return setTimeout(nr,16)};return ue(Xt)}function Wn(Xt){var ue=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;ue(Xt)}function so(Xt,ue){for(var nr in ue)ue.hasOwnProperty(nr)&&nr!=="constructor"&&ue[nr]!==void 0&&(Xt[nr]=ue[nr])}function ia(Xt,ue,nr,cr){return ue&&so(Xt,ue),nr&&so(Xt,nr),cr&&so(Xt,cr),Xt}var Bi=function(){for(var Xt=[],ue=0;ue<arguments.length;ue++)Xt[ue]=arguments[ue];for(var nr=Xt[0],cr=1;cr<Xt.length;cr++){var Gr=Xt[cr];I(Gr)&&(Gr=Gr.prototype),ia(nr.prototype,Gr)}},rs=Bi,Po=function(Xt){if(typeof Xt!="object"||Xt===null)return Xt;var ue;if(O(Xt)){ue=[];for(var nr=0,cr=Xt.length;nr<cr;nr++)typeof Xt[nr]=="object"&&Xt[nr]!=null?ue[nr]=Po(Xt[nr]):ue[nr]=Xt[nr]}else{ue={};for(var Gr in Xt)typeof Xt[Gr]=="object"&&Xt[Gr]!=null?ue[Gr]=Po(Xt[Gr]):ue[Gr]=Xt[Gr]}return ue},ga=Po;function ys(Xt,ue,nr){var cr;return function(){var Gr=this,cn=arguments,xn=function(){cr=null,nr||Xt.apply(Gr,cn)},Zn=nr&&!cr;clearTimeout(cr),cr=setTimeout(xn,ue),Zn&&Xt.apply(Gr,cn)}}var Qs=ys,ms=function(Xt,ue){if(!I(Xt))throw new TypeError("Expected a function");var nr=function(){for(var cr=[],Gr=0;Gr<arguments.length;Gr++)cr[Gr]=arguments[Gr];var cn=ue?ue.apply(this,cr):cr[0],xn=nr.cache;if(xn.has(cn))return xn.get(cn);var Zn=Xt.apply(this,cr);return xn.set(cn,Zn),Zn};return nr.cache=new Map,nr},Eo=5;function Ai(Xt,ue,nr,cr){nr=nr||0,cr=cr||Eo;for(var Gr in ue)if(ue.hasOwnProperty(Gr)){var cn=ue[Gr];cn!==null&&nt(cn)?(nt(Xt[Gr])||(Xt[Gr]={}),nr<cr?Ai(Xt[Gr],cn,nr+1,cr):Xt[Gr]=ue[Gr]):O(cn)?(Xt[Gr]=[],Xt[Gr]=Xt[Gr].concat(cn)):cn!==void 0&&(Xt[Gr]=cn)}}var Ya=function(Xt){for(var ue=[],nr=1;nr<arguments.length;nr++)ue[nr-1]=arguments[nr];for(var cr=0;cr<ue.length;cr+=1)Ai(Xt,ue[cr]);return Xt},bs=Ya,Ha=function(Xt,ue,nr,cr){I(ue)||(nr=ue,ue=Xt,Xt=function(){});var Gr=Object.create?function(xn,Zn){return Object.create(xn,{constructor:{value:Zn}})}:function(xn,Zn){function Wi(){}Wi.prototype=xn;var Ra=new Wi;return Ra.constructor=Zn,Ra},cn=Gr(ue.prototype,Xt);return Xt.prototype=ia(cn,Xt.prototype),Xt.superclass=Gr(ue.prototype,ue),ia(cn,nr),ia(Xt,cr),Xt},Ns=Ha,La=function(Xt,ue){if(!z(Xt))return-1;var nr=Array.prototype.indexOf;if(nr)return nr.call(Xt,ue);for(var cr=-1,Gr=0;Gr<Xt.length;Gr++)if(Xt[Gr]===ue){cr=Gr;break}return cr},ya=La,Za=Object.prototype.hasOwnProperty;function xo(Xt){if(C(Xt))return!0;if(z(Xt))return!Xt.length;var ue=Na(Xt);if(ue==="Map"||ue==="Set")return!Xt.size;if(oo(Xt))return!Object.keys(Xt).length;for(var nr in Xt)if(Za.call(Xt,nr))return!1;return!0}var Ka=xo,Ga=function(Xt,ue){if(Xt===ue)return!0;if(!Xt||!ue||D(Xt)||D(ue))return!1;if(z(Xt)||z(ue)){if(Xt.length!==ue.length)return!1;for(var nr=!0,cr=0;cr<Xt.length&&(nr=Ga(Xt[cr],ue[cr]),!!nr);cr++);return nr}if(at(Xt)||at(ue)){var Gr=Object.keys(Xt),cn=Object.keys(ue);if(Gr.length!==cn.length)return!1;for(var nr=!0,cr=0;cr<Gr.length&&(nr=Ga(Xt[Gr[cr]],ue[Gr[cr]]),!!nr);cr++);return nr}return!1},Js=Ga,ka=function(Xt,ue,nr){return I(nr)?!!nr(Xt,ue):Js(Xt,ue)},$a=function(Xt,ue){if(!z(Xt))return Xt;for(var nr=[],cr=0;cr<Xt.length;cr++){var Gr=Xt[cr];nr.push(ue(Gr,cr))}return nr},wo=$a,qa=function(Xt){return Xt},Xo=function(Xt,ue){ue===void 0&&(ue=qa);var nr={};return b(Xt)&&!C(Xt)&&Object.keys(Xt).forEach(function(cr){nr[cr]=ue(Xt[cr],cr)}),nr},fi=function(Xt,ue,nr){for(var cr=0,Gr=D(ue)?ue.split("."):ue;Xt&&cr<Gr.length;)Xt=Xt[Gr[cr++]];return Xt===void 0||cr<Gr.length?nr:Xt},ma=function(Xt,ue,nr){var cr=Xt,Gr=D(ue)?ue.split("."):ue;return Gr.forEach(function(cn,xn){xn<Gr.length-1?(b(cr[cn])||(cr[cn]=Si(Gr[xn+1])?[]:{}),cr=cr[cn]):cr[cn]=nr}),Xt},to=Object.prototype.hasOwnProperty,ba=function(Xt,ue){if(Xt===null||!nt(Xt))return{};var nr={};return K(ue,function(cr){to.call(Xt,cr)&&(nr[cr]=Xt[cr])}),nr},Mi=function(Xt,ue){return dt(Xt,function(nr,cr,Gr){return ue.includes(Gr)||(nr[Gr]=cr),nr},{})},ca=function(Xt,ue,nr){var cr,Gr,cn,xn,Zn=0;nr||(nr={});var Wi=function(){Zn=nr.leading===!1?0:Date.now(),cr=null,xn=Xt.apply(Gr,cn),cr||(Gr=cn=null)},Ra=function(){var Fa=Date.now();!Zn&&nr.leading===!1&&(Zn=Fa);var Ho=ue-(Fa-Zn);return Gr=this,cn=arguments,Ho<=0||Ho>ue?(cr&&(clearTimeout(cr),cr=null),Zn=Fa,xn=Xt.apply(Gr,cn),cr||(Gr=cn=null)):!cr&&nr.trailing!==!1&&(cr=setTimeout(Wi,Ho)),xn};return Ra.cancel=function(){clearTimeout(cr),Zn=0,cr=Gr=cn=null},Ra},Es=function(Xt){return z(Xt)?Array.prototype.slice.call(Xt):[]},aa={},uo=function(Xt){return Xt=Xt||"g",aa[Xt]?aa[Xt]+=1:aa[Xt]=1,Xt+aa[Xt]},eo=function(){},fo=function(Xt){return Xt};function qs(Xt){return C(Xt)?0:z(Xt)?Xt.length:Object.keys(Xt).length}var Yo=S(98725),Oo,ns=ms(function(Xt,ue){ue===void 0&&(ue={});var nr=ue.fontSize,cr=ue.fontFamily,Gr=ue.fontWeight,cn=ue.fontStyle,xn=ue.fontVariant;return Oo||(Oo=document.createElement("canvas").getContext("2d")),Oo.font=[cn,xn,Gr,nr+"px",cr].join(" "),Oo.measureText(D(Xt)?Xt:"").width},function(Xt,ue){return ue===void 0&&(ue={}),(0,Yo.pr)([Xt],Xe(ue)).join("")}),Wu=function(Xt,ue,nr,cr){cr===void 0&&(cr="...");var Gr=16,cn=ns(cr,nr),xn=D(Xt)?Xt:$r(Xt),Zn=ue,Wi=[],Ra,Fa;if(ns(Xt,nr)<=ue)return Xt;for(;Ra=xn.substr(0,Gr),Fa=ns(Ra,nr),!(Fa+cn>Zn&&Fa>Zn);)if(Wi.push(Ra),Zn-=Fa,xn=xn.substr(Gr),!xn)return Wi.join("");for(;Ra=xn.substr(0,1),Fa=ns(Ra,nr),!(Fa+cn>Zn);)if(Wi.push(Ra),Zn-=Fa,xn=xn.substr(1),!xn)return Wi.join("");return""+Wi.join("")+cr},yu=function(){function Xt(){this.map={}}return Xt.prototype.has=function(ue){return this.map[ue]!==void 0},Xt.prototype.get=function(ue,nr){var cr=this.map[ue];return cr===void 0?nr:cr},Xt.prototype.set=function(ue,nr){this.map[ue]=nr},Xt.prototype.clear=function(){this.map={}},Xt.prototype.delete=function(ue){delete this.map[ue]},Xt.prototype.size=function(){return Object.keys(this.map).length},Xt}(),xs=yu},75946:function(ae,w){"use strict";var S;S={value:!0};var x;(function(vt){vt.TextureCompressionBC="texture-compression-bc"})(x=w.UX||(w.UX={}));var z;(function(vt){vt.ClampToEdge="clamp-to-edge",vt.Repeat="repeat",vt.MirrorRepeat="mirror-repeat"})(z=w.OB||(w.OB={}));var k;(function(vt){vt.UniformBuffer="uniform-buffer",vt.StorageBuffer="storage-buffer",vt.ReadonlyStorageBuffer="readonly-storage-buffer",vt.Sampler="sampler",vt.ComparisonSampler="comparison-sampler",vt.SampledTexture="sampled-texture",vt.ReadonlyStorageTexture="readonly-storage-texture",vt.WriteonlyStorageTexture="writeonly-storage-texture"})(k=w.$l||(w.$l={}));var E;(function(vt){vt.Zero="zero",vt.One="one",vt.SrcColor="src-color",vt.OneMinusSrcColor="one-minus-src-color",vt.SrcAlpha="src-alpha",vt.OneMinusSrcAlpha="one-minus-src-alpha",vt.DstColor="dst-color",vt.OneMinusDstColor="one-minus-dst-color",vt.DstAlpha="dst-alpha",vt.OneMinusDstAlpha="one-minus-dst-alpha",vt.SrcAlphaSaturated="src-alpha-saturated",vt.BlendColor="blend-color",vt.OneMinusBlendColor="one-minus-blend-color"})(E=w.zi||(w.zi={}));var N;(function(vt){vt.Add="add",vt.Subtract="subtract",vt.ReverseSubtract="reverse-subtract",vt.Min="min",vt.Max="max"})(N=w.db||(w.db={}));var T;(function(vt){vt.Never="never",vt.Less="less",vt.Equal="equal",vt.LessEqual="less-equal",vt.Greater="greater",vt.NotEqual="not-equal",vt.GreaterEqual="greater-equal",vt.Always="always"})(T=w.wb||(w.wb={}));var m;(function(vt){vt.None="none",vt.Front="front",vt.Back="back"})(m=w.Wf||(w.Wf={}));var y;(function(vt){vt.Nearest="nearest",vt.Linear="linear"})(y=w.X9||(w.X9={}));var v;(function(vt){vt.CCW="ccw",vt.CW="cw"})(v=w.zX||(w.zX={}));var p;(function(vt){vt.Uint16="uint16",vt.Uint32="uint32"})(p=w.iD||(w.iD={}));var g;(function(vt){vt.Vertex="vertex",vt.Instance="instance"})(g=w.V||(w.V={}));var I;(function(vt){vt.Load="load"})(I=w.Ws||(w.Ws={}));var _;(function(vt){vt.PointList="point-list",vt.LineList="line-list",vt.LineStrip="line-strip",vt.TriangleList="triangle-list",vt.TriangleStrip="triangle-strip"})(_=w.YV||(w.YV={}));var C;(function(vt){vt.Keep="keep",vt.Zero="zero",vt.Replace="replace",vt.Invert="invert",vt.IncrementClamp="increment-clamp",vt.DecrementClamp="decrement-clamp",vt.IncrementWrap="increment-wrap",vt.DecrementWrap="decrement-wrap"})(C=w.xS||(w.xS={}));var O;(function(vt){vt.Store="store",vt.Clear="clear"})(O=w.EG||(w.EG={}));var b;(function(vt){vt.E1d="1d",vt.E2d="2d",vt.E3d="3d"})(b=w.kd||(w.kd={}));var l;(function(vt){vt.R8Unorm="r8unorm",vt.R8Snorm="r8snorm",vt.R8Uint="r8uint",vt.R8Sint="r8sint",vt.R16Uint="r16uint",vt.R16Sint="r16sint",vt.R16Float="r16float",vt.RG8Unorm="rg8unorm",vt.RG8Snorm="rg8snorm",vt.RG8Uint="rg8uint",vt.RG8Sint="rg8sint",vt.R32Uint="r32uint",vt.R32Sint="r32sint",vt.R32Float="r32float",vt.RG16Uint="rg16uint",vt.RG16Sint="rg16sint",vt.RG16Float="rg16float",vt.RGBA8Unorm="rgba8unorm",vt.RGBA8UnormSRGB="rgba8unorm-srgb",vt.RGBA8Snorm="rgba8snorm",vt.RGBA8Uint="rgba8uint",vt.RGBA8Sint="rgba8sint",vt.BGRA8Unorm="bgra8unorm",vt.BGRA8UnormSRGB="bgra8unorm-srgb",vt.RGB10A2Unorm="rgb10a2unorm",vt.RG11B10Float="rg11b10float",vt.RG32Uint="rg32uint",vt.RG32Sint="rg32sint",vt.RG32Float="rg32float",vt.RGBA16Uint="rgba16uint",vt.RGBA16Sint="rgba16sint",vt.RGBA16Float="rgba16float",vt.RGBA32Uint="rgba32uint",vt.RGBA32Sint="rgba32sint",vt.RGBA32Float="rgba32float",vt.Depth32Float="depth32float",vt.Depth24Plus="depth24plus",vt.Depth24PlusStencil8="depth24plus-stencil8"})(l=w.EV||(w.EV={}));var K;(function(vt){vt.Float="float",vt.Sint="sint",vt.Uint="uint"})(K=w.Ek||(w.Ek={}));var Z;(function(vt){vt.E1d="1d",vt.E2d="2d",vt.E2dArray="2d-array",vt.Cube="cube",vt.CubeArray="cube-array",vt.E3d="3d"})(Z=w.p_||(w.p_={}));var X;(function(vt){vt.Uchar2="uchar2",vt.Uchar4="uchar4",vt.Char2="char2",vt.Char4="char4",vt.Uchar2Norm="uchar2norm",vt.Uchar4Norm="uchar4norm",vt.Char2Norm="char2norm",vt.Char4Norm="char4norm",vt.Ushort2="ushort2",vt.Ushort4="ushort4",vt.Short2="short2",vt.Short4="short4",vt.Ushort2Norm="ushort2norm",vt.Ushort4Norm="ushort4norm",vt.Short2Norm="short2norm",vt.Short4Norm="short4norm",vt.Half2="half2",vt.Half4="half4",vt.Float="float",vt.Float2="float2",vt.Float3="float3",vt.Float4="float4",vt.Uint="uint",vt.Uint2="uint2",vt.Uint3="uint3",vt.Uint4="uint4",vt.Int="int",vt.Int2="int2",vt.Int3="int3",vt.Int4="int4"})(X=w.gB||(w.gB={}));var W;(function(vt){vt.All="all",vt.StencilOnly="stencil-only",vt.DepthOnly="depth-only"})(W=w.H7||(w.H7={}));var U;(function(vt){vt.Error="error",vt.Warning="warning",vt.Info="info"})(U=w.mj||(w.mj={}));var et;(function(vt){vt.Occlusion="occlusion"})(et=w.xL||(w.xL={}));var at;(function(vt){vt[vt.MapRead=1]="MapRead",vt[vt.MapWrite=2]="MapWrite",vt[vt.CopySrc=4]="CopySrc",vt[vt.CopyDst=8]="CopyDst",vt[vt.Index=16]="Index",vt[vt.Vertex=32]="Vertex",vt[vt.Uniform=64]="Uniform",vt[vt.Storage=128]="Storage",vt[vt.Indirect=256]="Indirect",vt[vt.QueryResolve=512]="QueryResolve"})(at=w.FB||(w.FB={}));var J;(function(vt){vt[vt.Red=1]="Red",vt[vt.Green=2]="Green",vt[vt.Blue=4]="Blue",vt[vt.Alpha=8]="Alpha",vt[vt.All=15]="All"})(J=w.Yw||(w.Yw={}));var nt;(function(vt){vt[vt.Vertex=1]="Vertex",vt[vt.Fragment=2]="Fragment",vt[vt.Compute=4]="Compute"})(nt=w.$X||(w.$X={}));var mt;(function(vt){vt[vt.CopySrc=1]="CopySrc",vt[vt.CopyDst=2]="CopyDst",vt[vt.Sampled=4]="Sampled",vt[vt.Storage=8]="Storage",vt[vt.OutputAttachment=16]="OutputAttachment"})(mt=w.v2||(w.v2={}));var Mt;(function(vt){vt[vt.Read=1]="Read",vt[vt.Write=2]="Write"})(Mt=w.gc||(w.gc={}))},53616:function(ae,w,S){var x=S(96585),z={};for(var k in x)x.hasOwnProperty(k)&&(z[x[k]]=k);var E=ae.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var N in E)if(E.hasOwnProperty(N)){if(!("channels"in E[N]))throw new Error("missing channels property: "+N);if(!("labels"in E[N]))throw new Error("missing channel labels property: "+N);if(E[N].labels.length!==E[N].channels)throw new Error("channel and label counts mismatch: "+N);var T=E[N].channels,m=E[N].labels;delete E[N].channels,delete E[N].labels,Object.defineProperty(E[N],"channels",{value:T}),Object.defineProperty(E[N],"labels",{value:m})}E.rgb.hsl=function(v){var p=v[0]/255,g=v[1]/255,I=v[2]/255,_=Math.min(p,g,I),C=Math.max(p,g,I),O=C-_,b,l,K;return C===_?b=0:p===C?b=(g-I)/O:g===C?b=2+(I-p)/O:I===C&&(b=4+(p-g)/O),b=Math.min(b*60,360),b<0&&(b+=360),K=(_+C)/2,C===_?l=0:K<=.5?l=O/(C+_):l=O/(2-C-_),[b,l*100,K*100]},E.rgb.hsv=function(v){var p,g,I,_,C,O=v[0]/255,b=v[1]/255,l=v[2]/255,K=Math.max(O,b,l),Z=K-Math.min(O,b,l),X=function(W){return(K-W)/6/Z+1/2};return Z===0?_=C=0:(C=Z/K,p=X(O),g=X(b),I=X(l),O===K?_=I-g:b===K?_=1/3+p-I:l===K&&(_=2/3+g-p),_<0?_+=1:_>1&&(_-=1)),[_*360,C*100,K*100]},E.rgb.hwb=function(v){var p=v[0],g=v[1],I=v[2],_=E.rgb.hsl(v)[0],C=1/255*Math.min(p,Math.min(g,I));return I=1-1/255*Math.max(p,Math.max(g,I)),[_,C*100,I*100]},E.rgb.cmyk=function(v){var p=v[0]/255,g=v[1]/255,I=v[2]/255,_,C,O,b;return b=Math.min(1-p,1-g,1-I),_=(1-p-b)/(1-b)||0,C=(1-g-b)/(1-b)||0,O=(1-I-b)/(1-b)||0,[_*100,C*100,O*100,b*100]};function y(v,p){return Math.pow(v[0]-p[0],2)+Math.pow(v[1]-p[1],2)+Math.pow(v[2]-p[2],2)}E.rgb.keyword=function(v){var p=z[v];if(p)return p;var g=1/0,I;for(var _ in x)if(x.hasOwnProperty(_)){var C=x[_],O=y(v,C);O<g&&(g=O,I=_)}return I},E.keyword.rgb=function(v){return x[v]},E.rgb.xyz=function(v){var p=v[0]/255,g=v[1]/255,I=v[2]/255;p=p>.04045?Math.pow((p+.055)/1.055,2.4):p/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,I=I>.04045?Math.pow((I+.055)/1.055,2.4):I/12.92;var _=p*.4124+g*.3576+I*.1805,C=p*.2126+g*.7152+I*.0722,O=p*.0193+g*.1192+I*.9505;return[_*100,C*100,O*100]},E.rgb.lab=function(v){var p=E.rgb.xyz(v),g=p[0],I=p[1],_=p[2],C,O,b;return g/=95.047,I/=100,_/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,I=I>.008856?Math.pow(I,1/3):7.787*I+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,C=116*I-16,O=500*(g-I),b=200*(I-_),[C,O,b]},E.hsl.rgb=function(v){var p=v[0]/360,g=v[1]/100,I=v[2]/100,_,C,O,b,l;if(g===0)return l=I*255,[l,l,l];I<.5?C=I*(1+g):C=I+g-I*g,_=2*I-C,b=[0,0,0];for(var K=0;K<3;K++)O=p+1/3*-(K-1),O<0&&O++,O>1&&O--,6*O<1?l=_+(C-_)*6*O:2*O<1?l=C:3*O<2?l=_+(C-_)*(2/3-O)*6:l=_,b[K]=l*255;return b},E.hsl.hsv=function(v){var p=v[0],g=v[1]/100,I=v[2]/100,_=g,C=Math.max(I,.01),O,b;return I*=2,g*=I<=1?I:2-I,_*=C<=1?C:2-C,b=(I+g)/2,O=I===0?2*_/(C+_):2*g/(I+g),[p,O*100,b*100]},E.hsv.rgb=function(v){var p=v[0]/60,g=v[1]/100,I=v[2]/100,_=Math.floor(p)%6,C=p-Math.floor(p),O=255*I*(1-g),b=255*I*(1-g*C),l=255*I*(1-g*(1-C));switch(I*=255,_){case 0:return[I,l,O];case 1:return[b,I,O];case 2:return[O,I,l];case 3:return[O,b,I];case 4:return[l,O,I];case 5:return[I,O,b]}},E.hsv.hsl=function(v){var p=v[0],g=v[1]/100,I=v[2]/100,_=Math.max(I,.01),C,O,b;return b=(2-g)*I,C=(2-g)*_,O=g*_,O/=C<=1?C:2-C,O=O||0,b/=2,[p,O*100,b*100]},E.hwb.rgb=function(v){var p=v[0]/360,g=v[1]/100,I=v[2]/100,_=g+I,C,O,b,l;_>1&&(g/=_,I/=_),C=Math.floor(6*p),O=1-I,b=6*p-C,C&1&&(b=1-b),l=g+b*(O-g);var K,Z,X;switch(C){default:case 6:case 0:K=O,Z=l,X=g;break;case 1:K=l,Z=O,X=g;break;case 2:K=g,Z=O,X=l;break;case 3:K=g,Z=l,X=O;break;case 4:K=l,Z=g,X=O;break;case 5:K=O,Z=g,X=l;break}return[K*255,Z*255,X*255]},E.cmyk.rgb=function(v){var p=v[0]/100,g=v[1]/100,I=v[2]/100,_=v[3]/100,C,O,b;return C=1-Math.min(1,p*(1-_)+_),O=1-Math.min(1,g*(1-_)+_),b=1-Math.min(1,I*(1-_)+_),[C*255,O*255,b*255]},E.xyz.rgb=function(v){var p=v[0]/100,g=v[1]/100,I=v[2]/100,_,C,O;return _=p*3.2406+g*-1.5372+I*-.4986,C=p*-.9689+g*1.8758+I*.0415,O=p*.0557+g*-.204+I*1.057,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_*12.92,C=C>.0031308?1.055*Math.pow(C,1/2.4)-.055:C*12.92,O=O>.0031308?1.055*Math.pow(O,1/2.4)-.055:O*12.92,_=Math.min(Math.max(0,_),1),C=Math.min(Math.max(0,C),1),O=Math.min(Math.max(0,O),1),[_*255,C*255,O*255]},E.xyz.lab=function(v){var p=v[0],g=v[1],I=v[2],_,C,O;return p/=95.047,g/=100,I/=108.883,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,I=I>.008856?Math.pow(I,1/3):7.787*I+16/116,_=116*g-16,C=500*(p-g),O=200*(g-I),[_,C,O]},E.lab.xyz=function(v){var p=v[0],g=v[1],I=v[2],_,C,O;C=(p+16)/116,_=g/500+C,O=C-I/200;var b=Math.pow(C,3),l=Math.pow(_,3),K=Math.pow(O,3);return C=b>.008856?b:(C-16/116)/7.787,_=l>.008856?l:(_-16/116)/7.787,O=K>.008856?K:(O-16/116)/7.787,_*=95.047,C*=100,O*=108.883,[_,C,O]},E.lab.lch=function(v){var p=v[0],g=v[1],I=v[2],_,C,O;return _=Math.atan2(I,g),C=_*360/2/Math.PI,C<0&&(C+=360),O=Math.sqrt(g*g+I*I),[p,O,C]},E.lch.lab=function(v){var p=v[0],g=v[1],I=v[2],_,C,O;return O=I/360*2*Math.PI,_=g*Math.cos(O),C=g*Math.sin(O),[p,_,C]},E.rgb.ansi16=function(v){var p=v[0],g=v[1],I=v[2],_=1 in arguments?arguments[1]:E.rgb.hsv(v)[2];if(_=Math.round(_/50),_===0)return 30;var C=30+(Math.round(I/255)<<2|Math.round(g/255)<<1|Math.round(p/255));return _===2&&(C+=60),C},E.hsv.ansi16=function(v){return E.rgb.ansi16(E.hsv.rgb(v),v[2])},E.rgb.ansi256=function(v){var p=v[0],g=v[1],I=v[2];if(p===g&&g===I)return p<8?16:p>248?231:Math.round((p-8)/247*24)+232;var _=16+36*Math.round(p/255*5)+6*Math.round(g/255*5)+Math.round(I/255*5);return _},E.ansi16.rgb=function(v){var p=v%10;if(p===0||p===7)return v>50&&(p+=3.5),p=p/10.5*255,[p,p,p];var g=(~~(v>50)+1)*.5,I=(p&1)*g*255,_=(p>>1&1)*g*255,C=(p>>2&1)*g*255;return[I,_,C]},E.ansi256.rgb=function(v){if(v>=232){var p=(v-232)*10+8;return[p,p,p]}v-=16;var g,I=Math.floor(v/36)/5*255,_=Math.floor((g=v%36)/6)/5*255,C=g%6/5*255;return[I,_,C]},E.rgb.hex=function(v){var p=((Math.round(v[0])&255)<<16)+((Math.round(v[1])&255)<<8)+(Math.round(v[2])&255),g=p.toString(16).toUpperCase();return"000000".substring(g.length)+g},E.hex.rgb=function(v){var p=v.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!p)return[0,0,0];var g=p[0];p[0].length===3&&(g=g.split("").map(function(b){return b+b}).join(""));var I=parseInt(g,16),_=I>>16&255,C=I>>8&255,O=I&255;return[_,C,O]},E.rgb.hcg=function(v){var p=v[0]/255,g=v[1]/255,I=v[2]/255,_=Math.max(Math.max(p,g),I),C=Math.min(Math.min(p,g),I),O=_-C,b,l;return O<1?b=C/(1-O):b=0,O<=0?l=0:_===p?l=(g-I)/O%6:_===g?l=2+(I-p)/O:l=4+(p-g)/O+4,l/=6,l%=1,[l*360,O*100,b*100]},E.hsl.hcg=function(v){var p=v[1]/100,g=v[2]/100,I=1,_=0;return g<.5?I=2*p*g:I=2*p*(1-g),I<1&&(_=(g-.5*I)/(1-I)),[v[0],I*100,_*100]},E.hsv.hcg=function(v){var p=v[1]/100,g=v[2]/100,I=p*g,_=0;return I<1&&(_=(g-I)/(1-I)),[v[0],I*100,_*100]},E.hcg.rgb=function(v){var p=v[0]/360,g=v[1]/100,I=v[2]/100;if(g===0)return[I*255,I*255,I*255];var _=[0,0,0],C=p%1*6,O=C%1,b=1-O,l=0;switch(Math.floor(C)){case 0:_[0]=1,_[1]=O,_[2]=0;break;case 1:_[0]=b,_[1]=1,_[2]=0;break;case 2:_[0]=0,_[1]=1,_[2]=O;break;case 3:_[0]=0,_[1]=b,_[2]=1;break;case 4:_[0]=O,_[1]=0,_[2]=1;break;default:_[0]=1,_[1]=0,_[2]=b}return l=(1-g)*I,[(g*_[0]+l)*255,(g*_[1]+l)*255,(g*_[2]+l)*255]},E.hcg.hsv=function(v){var p=v[1]/100,g=v[2]/100,I=p+g*(1-p),_=0;return I>0&&(_=p/I),[v[0],_*100,I*100]},E.hcg.hsl=function(v){var p=v[1]/100,g=v[2]/100,I=g*(1-p)+.5*p,_=0;return I>0&&I<.5?_=p/(2*I):I>=.5&&I<1&&(_=p/(2*(1-I))),[v[0],_*100,I*100]},E.hcg.hwb=function(v){var p=v[1]/100,g=v[2]/100,I=p+g*(1-p);return[v[0],(I-p)*100,(1-I)*100]},E.hwb.hcg=function(v){var p=v[1]/100,g=v[2]/100,I=1-g,_=I-p,C=0;return _<1&&(C=(I-_)/(1-_)),[v[0],_*100,C*100]},E.apple.rgb=function(v){return[v[0]/65535*255,v[1]/65535*255,v[2]/65535*255]},E.rgb.apple=function(v){return[v[0]/255*65535,v[1]/255*65535,v[2]/255*65535]},E.gray.rgb=function(v){return[v[0]/100*255,v[0]/100*255,v[0]/100*255]},E.gray.hsl=E.gray.hsv=function(v){return[0,0,v[0]]},E.gray.hwb=function(v){return[0,100,v[0]]},E.gray.cmyk=function(v){return[0,0,0,v[0]]},E.gray.lab=function(v){return[v[0],0,0]},E.gray.hex=function(v){var p=Math.round(v[0]/100*255)&255,g=(p<<16)+(p<<8)+p,I=g.toString(16).toUpperCase();return"000000".substring(I.length)+I},E.rgb.gray=function(v){var p=(v[0]+v[1]+v[2])/3;return[p/255*100]}},14170:function(ae,w,S){var x=S(53616),z=S(64774),k={},E=Object.keys(x);function N(m){var y=function(v){return v==null?v:(arguments.length>1&&(v=Array.prototype.slice.call(arguments)),m(v))};return"conversion"in m&&(y.conversion=m.conversion),y}function T(m){var y=function(v){if(v==null)return v;arguments.length>1&&(v=Array.prototype.slice.call(arguments));var p=m(v);if(typeof p=="object")for(var g=p.length,I=0;I<g;I++)p[I]=Math.round(p[I]);return p};return"conversion"in m&&(y.conversion=m.conversion),y}E.forEach(function(m){k[m]={},Object.defineProperty(k[m],"channels",{value:x[m].channels}),Object.defineProperty(k[m],"labels",{value:x[m].labels});var y=z(m),v=Object.keys(y);v.forEach(function(p){var g=y[p];k[m][p]=T(g),k[m][p].raw=N(g)})}),ae.exports=k},64774:function(ae,w,S){var x=S(53616);function z(){for(var T={},m=Object.keys(x),y=m.length,v=0;v<y;v++)T[m[v]]={distance:-1,parent:null};return T}function k(T){var m=z(),y=[T];for(m[T].distance=0;y.length;)for(var v=y.pop(),p=Object.keys(x[v]),g=p.length,I=0;I<g;I++){var _=p[I],C=m[_];C.distance===-1&&(C.distance=m[v].distance+1,C.parent=v,y.unshift(_))}return m}function E(T,m){return function(y){return m(T(y))}}function N(T,m){for(var y=[m[T].parent,T],v=x[m[T].parent][T],p=m[T].parent;m[p].parent;)y.unshift(m[p].parent),v=E(x[m[p].parent][p],v),p=m[p].parent;return v.conversion=y,v}ae.exports=function(T){for(var m=k(T),y={},v=Object.keys(m),p=v.length,g=0;g<p;g++){var I=v[g],_=m[I];_.parent!==null&&(y[I]=N(I,m))}return y}},96585:function(ae){"use strict";ae.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},33608:function(ae){"use strict";ae.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},64510:function(ae,w,S){var x=S(33608),z=S(5458),k=Object.hasOwnProperty,E=Object.create(null);for(var N in x)k.call(x,N)&&(E[x[N]]=N);var T=ae.exports={to:{},get:{}};T.get=function(v){var p=v.substring(0,3).toLowerCase(),g,I;switch(p){case"hsl":g=T.get.hsl(v),I="hsl";break;case"hwb":g=T.get.hwb(v),I="hwb";break;default:g=T.get.rgb(v),I="rgb";break}return g?{model:I,value:g}:null},T.get.rgb=function(v){if(!v)return null;var p=/^#([a-f0-9]{3,4})$/i,g=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,I=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,_=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,C=/^(\w+)$/,O=[0,0,0,1],b,l,K;if(b=v.match(g)){for(K=b[2],b=b[1],l=0;l<3;l++){var Z=l*2;O[l]=parseInt(b.slice(Z,Z+2),16)}K&&(O[3]=parseInt(K,16)/255)}else if(b=v.match(p)){for(b=b[1],K=b[3],l=0;l<3;l++)O[l]=parseInt(b[l]+b[l],16);K&&(O[3]=parseInt(K+K,16)/255)}else if(b=v.match(I)){for(l=0;l<3;l++)O[l]=parseInt(b[l+1],0);b[4]&&(b[5]?O[3]=parseFloat(b[4])*.01:O[3]=parseFloat(b[4]))}else if(b=v.match(_)){for(l=0;l<3;l++)O[l]=Math.round(parseFloat(b[l+1])*2.55);b[4]&&(b[5]?O[3]=parseFloat(b[4])*.01:O[3]=parseFloat(b[4]))}else return(b=v.match(C))?b[1]==="transparent"?[0,0,0,0]:k.call(x,b[1])?(O=x[b[1]],O[3]=1,O):null:null;for(l=0;l<3;l++)O[l]=m(O[l],0,255);return O[3]=m(O[3],0,1),O},T.get.hsl=function(v){if(!v)return null;var p=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=v.match(p);if(g){var I=parseFloat(g[4]),_=(parseFloat(g[1])%360+360)%360,C=m(parseFloat(g[2]),0,100),O=m(parseFloat(g[3]),0,100),b=m(isNaN(I)?1:I,0,1);return[_,C,O,b]}return null},T.get.hwb=function(v){if(!v)return null;var p=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=v.match(p);if(g){var I=parseFloat(g[4]),_=(parseFloat(g[1])%360+360)%360,C=m(parseFloat(g[2]),0,100),O=m(parseFloat(g[3]),0,100),b=m(isNaN(I)?1:I,0,1);return[_,C,O,b]}return null},T.to.hex=function(){var v=z(arguments);return"#"+y(v[0])+y(v[1])+y(v[2])+(v[3]<1?y(Math.round(v[3]*255)):"")},T.to.rgb=function(){var v=z(arguments);return v.length<4||v[3]===1?"rgb("+Math.round(v[0])+", "+Math.round(v[1])+", "+Math.round(v[2])+")":"rgba("+Math.round(v[0])+", "+Math.round(v[1])+", "+Math.round(v[2])+", "+v[3]+")"},T.to.rgb.percent=function(){var v=z(arguments),p=Math.round(v[0]/255*100),g=Math.round(v[1]/255*100),I=Math.round(v[2]/255*100);return v.length<4||v[3]===1?"rgb("+p+"%, "+g+"%, "+I+"%)":"rgba("+p+"%, "+g+"%, "+I+"%, "+v[3]+")"},T.to.hsl=function(){var v=z(arguments);return v.length<4||v[3]===1?"hsl("+v[0]+", "+v[1]+"%, "+v[2]+"%)":"hsla("+v[0]+", "+v[1]+"%, "+v[2]+"%, "+v[3]+")"},T.to.hwb=function(){var v=z(arguments),p="";return v.length>=4&&v[3]!==1&&(p=", "+v[3]),"hwb("+v[0]+", "+v[1]+"%, "+v[2]+"%"+p+")"},T.to.keyword=function(v){return E[v.slice(0,3)]};function m(v,p,g){return Math.min(Math.max(p,v),g)}function y(v){var p=Math.round(v).toString(16).toUpperCase();return p.length<2?"0"+p:p}},90094:function(ae,w,S){"use strict";var x=S(64510),z=S(14170),k=[].slice,E=["keyword","gray","hex"],N={};Object.keys(z).forEach(function(C){N[k.call(z[C].labels).sort().join("")]=C});var T={};function m(C,O){if(!(this instanceof m))return new m(C,O);if(O&&O in E&&(O=null),O&&!(O in z))throw new Error("Unknown model: "+O);var b,l;if(C==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(C instanceof m)this.model=C.model,this.color=C.color.slice(),this.valpha=C.valpha;else if(typeof C=="string"){var K=x.get(C);if(K===null)throw new Error("Unable to parse color from string: "+C);this.model=K.model,l=z[this.model].channels,this.color=K.value.slice(0,l),this.valpha=typeof K.value[l]=="number"?K.value[l]:1}else if(C.length){this.model=O||"rgb",l=z[this.model].channels;var Z=k.call(C,0,l);this.color=_(Z,l),this.valpha=typeof C[l]=="number"?C[l]:1}else if(typeof C=="number")C&=16777215,this.model="rgb",this.color=[C>>16&255,C>>8&255,C&255],this.valpha=1;else{this.valpha=1;var X=Object.keys(C);"alpha"in C&&(X.splice(X.indexOf("alpha"),1),this.valpha=typeof C.alpha=="number"?C.alpha:0);var W=X.sort().join("");if(!(W in N))throw new Error("Unable to parse color from object: "+JSON.stringify(C));this.model=N[W];var U=z[this.model].labels,et=[];for(b=0;b<U.length;b++)et.push(C[U[b]]);this.color=_(et)}if(T[this.model])for(l=z[this.model].channels,b=0;b<l;b++){var at=T[this.model][b];at&&(this.color[b]=at(this.color[b]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}m.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(C){var O=this.model in x.to?this:this.rgb();O=O.round(typeof C=="number"?C:1);var b=O.valpha===1?O.color:O.color.concat(this.valpha);return x.to[O.model](b)},percentString:function(C){var O=this.rgb().round(typeof C=="number"?C:1),b=O.valpha===1?O.color:O.color.concat(this.valpha);return x.to.rgb.percent(b)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var C={},O=z[this.model].channels,b=z[this.model].labels,l=0;l<O;l++)C[b[l]]=this.color[l];return this.valpha!==1&&(C.alpha=this.valpha),C},unitArray:function(){var C=this.rgb().color;return C[0]/=255,C[1]/=255,C[2]/=255,this.valpha!==1&&C.push(this.valpha),C},unitObject:function(){var C=this.rgb().object();return C.r/=255,C.g/=255,C.b/=255,this.valpha!==1&&(C.alpha=this.valpha),C},round:function(C){return C=Math.max(C||0,0),new m(this.color.map(v(C)).concat(this.valpha),this.model)},alpha:function(C){return arguments.length?new m(this.color.concat(Math.max(0,Math.min(1,C))),this.model):this.valpha},red:p("rgb",0,g(255)),green:p("rgb",1,g(255)),blue:p("rgb",2,g(255)),hue:p(["hsl","hsv","hsl","hwb","hcg"],0,function(C){return(C%360+360)%360}),saturationl:p("hsl",1,g(100)),lightness:p("hsl",2,g(100)),saturationv:p("hsv",1,g(100)),value:p("hsv",2,g(100)),chroma:p("hcg",1,g(100)),gray:p("hcg",2,g(100)),white:p("hwb",1,g(100)),wblack:p("hwb",2,g(100)),cyan:p("cmyk",0,g(100)),magenta:p("cmyk",1,g(100)),yellow:p("cmyk",2,g(100)),black:p("cmyk",3,g(100)),x:p("xyz",0,g(100)),y:p("xyz",1,g(100)),z:p("xyz",2,g(100)),l:p("lab",0,g(100)),a:p("lab",1),b:p("lab",2),keyword:function(C){return arguments.length?new m(C):z[this.model].keyword(this.color)},hex:function(C){return arguments.length?new m(C):x.to.hex(this.rgb().round().color)},rgbNumber:function(){var C=this.rgb().color;return(C[0]&255)<<16|(C[1]&255)<<8|C[2]&255},luminosity:function(){for(var C=this.rgb().color,O=[],b=0;b<C.length;b++){var l=C[b]/255;O[b]=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)}return .2126*O[0]+.7152*O[1]+.0722*O[2]},contrast:function(C){var O=this.luminosity(),b=C.luminosity();return O>b?(O+.05)/(b+.05):(b+.05)/(O+.05)},level:function(C){var O=this.contrast(C);return O>=7.1?"AAA":O>=4.5?"AA":""},isDark:function(){var C=this.rgb().color,O=(C[0]*299+C[1]*587+C[2]*114)/1e3;return O<128},isLight:function(){return!this.isDark()},negate:function(){for(var C=this.rgb(),O=0;O<3;O++)C.color[O]=255-C.color[O];return C},lighten:function(C){var O=this.hsl();return O.color[2]+=O.color[2]*C,O},darken:function(C){var O=this.hsl();return O.color[2]-=O.color[2]*C,O},saturate:function(C){var O=this.hsl();return O.color[1]+=O.color[1]*C,O},desaturate:function(C){var O=this.hsl();return O.color[1]-=O.color[1]*C,O},whiten:function(C){var O=this.hwb();return O.color[1]+=O.color[1]*C,O},blacken:function(C){var O=this.hwb();return O.color[2]+=O.color[2]*C,O},grayscale:function(){var C=this.rgb().color,O=C[0]*.3+C[1]*.59+C[2]*.11;return m.rgb(O,O,O)},fade:function(C){return this.alpha(this.valpha-this.valpha*C)},opaquer:function(C){return this.alpha(this.valpha+this.valpha*C)},rotate:function(C){var O=this.hsl(),b=O.color[0];return b=(b+C)%360,b=b<0?360+b:b,O.color[0]=b,O},mix:function(C,O){if(!C||!C.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof C);var b=C.rgb(),l=this.rgb(),K=O===void 0?.5:O,Z=2*K-1,X=b.alpha()-l.alpha(),W=((Z*X===-1?Z:(Z+X)/(1+Z*X))+1)/2,U=1-W;return m.rgb(W*b.red()+U*l.red(),W*b.green()+U*l.green(),W*b.blue()+U*l.blue(),b.alpha()*K+l.alpha()*(1-K))}},Object.keys(z).forEach(function(C){if(E.indexOf(C)===-1){var O=z[C].channels;m.prototype[C]=function(){if(this.model===C)return new m(this);if(arguments.length)return new m(arguments,C);var b=typeof arguments[O]=="number"?O:this.valpha;return new m(I(z[this.model][C].raw(this.color)).concat(b),C)},m[C]=function(b){return typeof b=="number"&&(b=_(k.call(arguments),O)),new m(b,C)}}});function y(C,O){return Number(C.toFixed(O))}function v(C){return function(O){return y(O,C)}}function p(C,O,b){return C=Array.isArray(C)?C:[C],C.forEach(function(l){(T[l]||(T[l]=[]))[O]=b}),C=C[0],function(l){var K;return arguments.length?(b&&(l=b(l)),K=this[C](),K.color[O]=l,K):(K=this[C]().color[O],b&&(K=b(K)),K)}}function g(C){return function(O){return Math.max(0,Math.min(C,O))}}function I(C){return Array.isArray(C)?C:[C]}function _(C,O){for(var b=0;b<O;b++)typeof C[b]!="number"&&(C[b]=0);return C}ae.exports=m},45517:function(ae,w,S){"use strict";S.r(w),S.d(w,{quadtree:function(){return x.Z}});var x=S(90696)},90696:function(ae,w,S){"use strict";S.d(w,{Z:function(){return Z}});function x(et){const at=+this._x.call(null,et),J=+this._y.call(null,et);return z(this.cover(at,J),at,J,et)}function z(et,at,J,nt){if(isNaN(at)||isNaN(J))return et;var mt,Mt=et._root,vt={data:nt},zt=et._x0,re=et._y0,Rt=et._x1,At=et._y1,Q,gt,Vt,Ht,It,de,De,Ye;if(!Mt)return et._root=vt,et;for(;Mt.length;)if((It=at>=(Q=(zt+Rt)/2))?zt=Q:Rt=Q,(de=J>=(gt=(re+At)/2))?re=gt:At=gt,mt=Mt,!(Mt=Mt[De=de<<1|It]))return mt[De]=vt,et;if(Vt=+et._x.call(null,Mt.data),Ht=+et._y.call(null,Mt.data),at===Vt&&J===Ht)return vt.next=Mt,mt?mt[De]=vt:et._root=vt,et;do mt=mt?mt[De]=new Array(4):et._root=new Array(4),(It=at>=(Q=(zt+Rt)/2))?zt=Q:Rt=Q,(de=J>=(gt=(re+At)/2))?re=gt:At=gt;while((De=de<<1|It)===(Ye=(Ht>=gt)<<1|Vt>=Q));return mt[Ye]=Mt,mt[De]=vt,et}function k(et){var at,J,nt=et.length,mt,Mt,vt=new Array(nt),zt=new Array(nt),re=1/0,Rt=1/0,At=-1/0,Q=-1/0;for(J=0;J<nt;++J)isNaN(mt=+this._x.call(null,at=et[J]))||isNaN(Mt=+this._y.call(null,at))||(vt[J]=mt,zt[J]=Mt,mt<re&&(re=mt),mt>At&&(At=mt),Mt<Rt&&(Rt=Mt),Mt>Q&&(Q=Mt));if(re>At||Rt>Q)return this;for(this.cover(re,Rt).cover(At,Q),J=0;J<nt;++J)z(this,vt[J],zt[J],et[J]);return this}function E(et,at){if(isNaN(et=+et)||isNaN(at=+at))return this;var J=this._x0,nt=this._y0,mt=this._x1,Mt=this._y1;if(isNaN(J))mt=(J=Math.floor(et))+1,Mt=(nt=Math.floor(at))+1;else{for(var vt=mt-J||1,zt=this._root,re,Rt;J>et||et>=mt||nt>at||at>=Mt;)switch(Rt=(at<nt)<<1|et<J,re=new Array(4),re[Rt]=zt,zt=re,vt*=2,Rt){case 0:mt=J+vt,Mt=nt+vt;break;case 1:J=mt-vt,Mt=nt+vt;break;case 2:mt=J+vt,nt=Mt-vt;break;case 3:J=mt-vt,nt=Mt-vt;break}this._root&&this._root.length&&(this._root=zt)}return this._x0=J,this._y0=nt,this._x1=mt,this._y1=Mt,this}function N(){var et=[];return this.visit(function(at){if(!at.length)do et.push(at.data);while(at=at.next)}),et}function T(et){return arguments.length?this.cover(+et[0][0],+et[0][1]).cover(+et[1][0],+et[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function m(et,at,J,nt,mt){this.node=et,this.x0=at,this.y0=J,this.x1=nt,this.y1=mt}function y(et,at,J){var nt,mt=this._x0,Mt=this._y0,vt,zt,re,Rt,At=this._x1,Q=this._y1,gt=[],Vt=this._root,Ht,It;for(Vt&&gt.push(new m(Vt,mt,Mt,At,Q)),J==null?J=1/0:(mt=et-J,Mt=at-J,At=et+J,Q=at+J,J*=J);Ht=gt.pop();)if(!(!(Vt=Ht.node)||(vt=Ht.x0)>At||(zt=Ht.y0)>Q||(re=Ht.x1)<mt||(Rt=Ht.y1)<Mt))if(Vt.length){var de=(vt+re)/2,De=(zt+Rt)/2;gt.push(new m(Vt[3],de,De,re,Rt),new m(Vt[2],vt,De,de,Rt),new m(Vt[1],de,zt,re,De),new m(Vt[0],vt,zt,de,De)),(It=(at>=De)<<1|et>=de)&&(Ht=gt[gt.length-1],gt[gt.length-1]=gt[gt.length-1-It],gt[gt.length-1-It]=Ht)}else{var Ye=et-+this._x.call(null,Vt.data),kt=at-+this._y.call(null,Vt.data),Pt=Ye*Ye+kt*kt;if(Pt<J){var _t=Math.sqrt(J=Pt);mt=et-_t,Mt=at-_t,At=et+_t,Q=at+_t,nt=Vt.data}}return nt}function v(et){if(isNaN(At=+this._x.call(null,et))||isNaN(Q=+this._y.call(null,et)))return this;var at,J=this._root,nt,mt,Mt,vt=this._x0,zt=this._y0,re=this._x1,Rt=this._y1,At,Q,gt,Vt,Ht,It,de,De;if(!J)return this;if(J.length)for(;;){if((Ht=At>=(gt=(vt+re)/2))?vt=gt:re=gt,(It=Q>=(Vt=(zt+Rt)/2))?zt=Vt:Rt=Vt,at=J,!(J=J[de=It<<1|Ht]))return this;if(!J.length)break;(at[de+1&3]||at[de+2&3]||at[de+3&3])&&(nt=at,De=de)}for(;J.data!==et;)if(mt=J,!(J=J.next))return this;return(Mt=J.next)&&delete J.next,mt?(Mt?mt.next=Mt:delete mt.next,this):at?(Mt?at[de]=Mt:delete at[de],(J=at[0]||at[1]||at[2]||at[3])&&J===(at[3]||at[2]||at[1]||at[0])&&!J.length&&(nt?nt[De]=J:this._root=J),this):(this._root=Mt,this)}function p(et){for(var at=0,J=et.length;at<J;++at)this.remove(et[at]);return this}function g(){return this._root}function I(){var et=0;return this.visit(function(at){if(!at.length)do++et;while(at=at.next)}),et}function _(et){var at=[],J,nt=this._root,mt,Mt,vt,zt,re;for(nt&&at.push(new m(nt,this._x0,this._y0,this._x1,this._y1));J=at.pop();)if(!et(nt=J.node,Mt=J.x0,vt=J.y0,zt=J.x1,re=J.y1)&&nt.length){var Rt=(Mt+zt)/2,At=(vt+re)/2;(mt=nt[3])&&at.push(new m(mt,Rt,At,zt,re)),(mt=nt[2])&&at.push(new m(mt,Mt,At,Rt,re)),(mt=nt[1])&&at.push(new m(mt,Rt,vt,zt,At)),(mt=nt[0])&&at.push(new m(mt,Mt,vt,Rt,At))}return this}function C(et){var at=[],J=[],nt;for(this._root&&at.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));nt=at.pop();){var mt=nt.node;if(mt.length){var Mt,vt=nt.x0,zt=nt.y0,re=nt.x1,Rt=nt.y1,At=(vt+re)/2,Q=(zt+Rt)/2;(Mt=mt[0])&&at.push(new m(Mt,vt,zt,At,Q)),(Mt=mt[1])&&at.push(new m(Mt,At,zt,re,Q)),(Mt=mt[2])&&at.push(new m(Mt,vt,Q,At,Rt)),(Mt=mt[3])&&at.push(new m(Mt,At,Q,re,Rt))}J.push(nt)}for(;nt=J.pop();)et(nt.node,nt.x0,nt.y0,nt.x1,nt.y1);return this}function O(et){return et[0]}function b(et){return arguments.length?(this._x=et,this):this._x}function l(et){return et[1]}function K(et){return arguments.length?(this._y=et,this):this._y}function Z(et,at,J){var nt=new X(at==null?O:at,J==null?l:J,NaN,NaN,NaN,NaN);return et==null?nt:nt.addAll(et)}function X(et,at,J,nt,mt,Mt){this._x=et,this._y=at,this._x0=J,this._y0=nt,this._x1=mt,this._y1=Mt,this._root=void 0}function W(et){for(var at={data:et.data},J=at;et=et.next;)J=J.next={data:et.data};return at}var U=Z.prototype=X.prototype;U.copy=function(){var et=new X(this._x,this._y,this._x0,this._y0,this._x1,this._y1),at=this._root,J,nt;if(!at)return et;if(!at.length)return et._root=W(at),et;for(J=[{source:at,target:et._root=new Array(4)}];at=J.pop();)for(var mt=0;mt<4;++mt)(nt=at.source[mt])&&(nt.length?J.push({source:nt,target:at.target[mt]=new Array(4)}):at.target[mt]=W(nt));return et},U.add=x,U.addAll=k,U.cover=E,U.data=N,U.extent=T,U.find=y,U.remove=v,U.removeAll=p,U.root=g,U.size=I,U.visit=_,U.visitAfter=C,U.x=b,U.y=K},55281:function(ae,w,S){"use strict";S.r(w),S.d(w,{BRIDGE_GRAPH_NAME:function(){return N},GraphType:function(){return y},HierarchyNodeType:function(){return v},InclusionType:function(){return m},LAYOUT_CONFIG:function(){return x},NodeType:function(){return T},ROOT_NAME:function(){return E},buildGraph:function(){return Ar},flatGraph:function(){return jr},getEdges:function(){return Hr},mergeConfig:function(){return z}});const x={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function z(d={},L=x){var j,tt,lt,pt;const St=JSON.parse(JSON.stringify(L)),Ot=((j=d==null?void 0:d.graph)===null||j===void 0?void 0:j.meta)||{},Ut=((tt=d==null?void 0:d.subScene)===null||tt===void 0?void 0:tt.meta)||{},qt=((lt=d==null?void 0:d.nodeSize)===null||lt===void 0?void 0:lt.meta)||{},fe=((pt=d==null?void 0:d.nodeSize)===null||pt===void 0?void 0:pt.node)||{},oe=St.nodeSize.bridge;return{graph:{meta:Object.assign(St.graph.meta,Ot)},subScene:{meta:Object.assign(St.subScene.meta,Ut)},nodeSize:{meta:Object.assign(St.nodeSize.meta,qt),node:Object.assign(St.nodeSize.node,fe),bridge:oe}}}function k(d){return`\u25EC${d}\u25EC`}const E=k("ROOT"),N=k("BRIDGE_GRAPH");var T,m,y,v;(function(d){d[d.META=0]="META",d[d.NODE=1]="NODE",d[d.BRIDGE=2]="BRIDGE"})(T||(T={})),function(d){d[d.INCLUDE=0]="INCLUDE",d[d.EXCLUDE=1]="EXCLUDE",d[d.UNSPECIFIED=2]="UNSPECIFIED"}(m||(m={})),function(d){d[d.META=0]="META",d[d.CORE=1]="CORE",d[d.BRIDGE=2]="BRIDGE"}(y||(y={})),function(d){d[d.META=0]="META",d[d.OP=1]="OP",d[d.SERIES=2]="SERIES"}(v||(v={}));var p=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof S.g!="undefined"?S.g:typeof self!="undefined"?self:{};function g(d,L){return d(L={exports:{}},L.exports),L.exports}var I=function(){this.__data__=[],this.size=0},_=function(d,L){return d===L||d!=d&&L!=L},C=function(d,L){for(var j=d.length;j--;)if(_(d[j][0],L))return j;return-1},O=Array.prototype.splice,b=function(d){var L=this.__data__,j=C(L,d);return!(j<0)&&(j==L.length-1?L.pop():O.call(L,j,1),--this.size,!0)},l=function(d){var L=this.__data__,j=C(L,d);return j<0?void 0:L[j][1]},K=function(d){return C(this.__data__,d)>-1},Z=function(d,L){var j=this.__data__,tt=C(j,d);return tt<0?(++this.size,j.push([d,L])):j[tt][1]=L,this};function X(d){var L=-1,j=d==null?0:d.length;for(this.clear();++L<j;){var tt=d[L];this.set(tt[0],tt[1])}}X.prototype.clear=I,X.prototype.delete=b,X.prototype.get=l,X.prototype.has=K,X.prototype.set=Z;var W=X,U=function(){this.__data__=new W,this.size=0},et=function(d){var L=this.__data__,j=L.delete(d);return this.size=L.size,j},at=function(d){return this.__data__.get(d)},J=function(d){return this.__data__.has(d)},nt=typeof p=="object"&&p&&p.Object===Object&&p,mt=typeof self=="object"&&self&&self.Object===Object&&self,Mt=nt||mt||Function("return this")(),vt=Mt.Symbol,zt=Object.prototype,re=zt.hasOwnProperty,Rt=zt.toString,At=vt?vt.toStringTag:void 0,Q=function(d){var L=re.call(d,At),j=d[At];try{d[At]=void 0;var tt=!0}catch(pt){}var lt=Rt.call(d);return tt&&(L?d[At]=j:delete d[At]),lt},gt=Object.prototype.toString,Vt=function(d){return gt.call(d)},Ht=vt?vt.toStringTag:void 0,It=function(d){return d==null?d===void 0?"[object Undefined]":"[object Null]":Ht&&Ht in Object(d)?Q(d):Vt(d)},de=function(d){var L=typeof d;return d!=null&&(L=="object"||L=="function")},De,Ye=function(d){if(!de(d))return!1;var L=It(d);return L=="[object Function]"||L=="[object GeneratorFunction]"||L=="[object AsyncFunction]"||L=="[object Proxy]"},kt=Mt["__core-js_shared__"],Pt=(De=/[^.]+$/.exec(kt&&kt.keys&&kt.keys.IE_PROTO||""))?"Symbol(src)_1."+De:"",_t=function(d){return!!Pt&&Pt in d},jt=Function.prototype.toString,Qt=function(d){if(d!=null){try{return jt.call(d)}catch(L){}try{return d+""}catch(L){}}return""},Tt=/^\[object .+?Constructor\]$/,Zt=Function.prototype,Ee=Object.prototype,dt=Zt.toString,bt=Ee.hasOwnProperty,wt=RegExp("^"+dt.call(bt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=function(d){return!(!de(d)||_t(d))&&(Ye(d)?wt:Tt).test(Qt(d))},rt=function(d,L){return d==null?void 0:d[L]},Nt=function(d,L){var j=rt(d,L);return D(j)?j:void 0},ft=Nt(Mt,"Map"),ie=Nt(Object,"create"),ge=function(){this.__data__=ie?ie(null):{},this.size=0},Ge=function(d){var L=this.has(d)&&delete this.__data__[d];return this.size-=L?1:0,L},Re=Object.prototype.hasOwnProperty,qe=function(d){var L=this.__data__;if(ie){var j=L[d];return j==="__lodash_hash_undefined__"?void 0:j}return Re.call(L,d)?L[d]:void 0},Ve=Object.prototype.hasOwnProperty,le=function(d){var L=this.__data__;return ie?L[d]!==void 0:Ve.call(L,d)},Le=function(d,L){var j=this.__data__;return this.size+=this.has(d)?0:1,j[d]=ie&&L===void 0?"__lodash_hash_undefined__":L,this};function je(d){var L=-1,j=d==null?0:d.length;for(this.clear();++L<j;){var tt=d[L];this.set(tt[0],tt[1])}}je.prototype.clear=ge,je.prototype.delete=Ge,je.prototype.get=qe,je.prototype.has=le,je.prototype.set=Le;var Be=je,vr=function(){this.size=0,this.__data__={hash:new Be,map:new(ft||W),string:new Be}},or=function(d){var L=typeof d;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?d!=="__proto__":d===null},Ae=function(d,L){var j=d.__data__;return or(L)?j[typeof L=="string"?"string":"hash"]:j.map},yr=function(d){var L=Ae(this,d).delete(d);return this.size-=L?1:0,L},Cr=function(d){return Ae(this,d).get(d)},zr=function(d){return Ae(this,d).has(d)},Mr=function(d,L){var j=Ae(this,d),tt=j.size;return j.set(d,L),this.size+=j.size==tt?0:1,this};function un(d){var L=-1,j=d==null?0:d.length;for(this.clear();++L<j;){var tt=d[L];this.set(tt[0],tt[1])}}un.prototype.clear=vr,un.prototype.delete=yr,un.prototype.get=Cr,un.prototype.has=zr,un.prototype.set=Mr;var hn=un,Un=function(d,L){var j=this.__data__;if(j instanceof W){var tt=j.__data__;if(!ft||tt.length<199)return tt.push([d,L]),this.size=++j.size,this;j=this.__data__=new hn(tt)}return j.set(d,L),this.size=j.size,this};function nn(d){var L=this.__data__=new W(d);this.size=L.size}nn.prototype.clear=U,nn.prototype.delete=et,nn.prototype.get=at,nn.prototype.has=J,nn.prototype.set=Un;var vn=nn,ln=function(d,L){for(var j=-1,tt=d==null?0:d.length;++j<tt&&L(d[j],j,d)!==!1;);return d},pn=function(){try{var d=Nt(Object,"defineProperty");return d({},"",{}),d}catch(L){}}(),Bn=function(d,L,j){L=="__proto__"&&pn?pn(d,L,{configurable:!0,enumerable:!0,value:j,writable:!0}):d[L]=j},Pe=Object.prototype.hasOwnProperty,Cn=function(d,L,j){var tt=d[L];Pe.call(d,L)&&_(tt,j)&&(j!==void 0||L in d)||Bn(d,L,j)},Gn=function(d,L,j,tt){var lt=!j;j||(j={});for(var pt=-1,St=L.length;++pt<St;){var Ot=L[pt],Ut=tt?tt(j[Ot],d[Ot],Ot,j,d):void 0;Ut===void 0&&(Ut=d[Ot]),lt?Bn(j,Ot,Ut):Cn(j,Ot,Ut)}return j},bi=function(d,L){for(var j=-1,tt=Array(d);++j<d;)tt[j]=L(j);return tt},zn=function(d){return d!=null&&typeof d=="object"},Hn=function(d){return zn(d)&&It(d)=="[object Arguments]"},hi=Object.prototype,Si=hi.hasOwnProperty,pi=hi.propertyIsEnumerable,Dt=Hn(function(){return arguments}())?Hn:function(d){return zn(d)&&Si.call(d,"callee")&&!pi.call(d,"callee")},Lt=Array.isArray,H=function(){return!1},G=g(function(d,L){var j=L&&!L.nodeType&&L,tt=j&&d&&!d.nodeType&&d,lt=tt&&tt.exports===j?Mt.Buffer:void 0,pt=(lt?lt.isBuffer:void 0)||H;d.exports=pt}),F=/^(?:0|[1-9]\d*)$/,st=function(d,L){var j=typeof d;return!!(L=L==null?9007199254740991:L)&&(j=="number"||j!="symbol"&&F.test(d))&&d>-1&&d%1==0&&d<L},Bt=function(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=9007199254740991},Kt={};Kt["[object Float32Array]"]=Kt["[object Float64Array]"]=Kt["[object Int8Array]"]=Kt["[object Int16Array]"]=Kt["[object Int32Array]"]=Kt["[object Uint8Array]"]=Kt["[object Uint8ClampedArray]"]=Kt["[object Uint16Array]"]=Kt["[object Uint32Array]"]=!0,Kt["[object Arguments]"]=Kt["[object Array]"]=Kt["[object ArrayBuffer]"]=Kt["[object Boolean]"]=Kt["[object DataView]"]=Kt["[object Date]"]=Kt["[object Error]"]=Kt["[object Function]"]=Kt["[object Map]"]=Kt["[object Number]"]=Kt["[object Object]"]=Kt["[object RegExp]"]=Kt["[object Set]"]=Kt["[object String]"]=Kt["[object WeakMap]"]=!1;var Yt=function(d){return zn(d)&&Bt(d.length)&&!!Kt[It(d)]},he=function(d){return function(L){return d(L)}},ot=g(function(d,L){var j=L&&!L.nodeType&&L,tt=j&&d&&!d.nodeType&&d,lt=tt&&tt.exports===j&&nt.process,pt=function(){try{var St=tt&&tt.require&&tt.require("util").types;return St||lt&&lt.binding&&lt.binding("util")}catch(Ot){}}();d.exports=pt}),yt=ot&&ot.isTypedArray,te=yt?he(yt):Yt,Me=Object.prototype.hasOwnProperty,Se=function(d,L){var j=Lt(d),tt=!j&&Dt(d),lt=!j&&!tt&&G(d),pt=!j&&!tt&&!lt&&te(d),St=j||tt||lt||pt,Ot=St?bi(d.length,String):[],Ut=Ot.length;for(var qt in d)!L&&!Me.call(d,qt)||St&&(qt=="length"||lt&&(qt=="offset"||qt=="parent")||pt&&(qt=="buffer"||qt=="byteLength"||qt=="byteOffset")||st(qt,Ut))||Ot.push(qt);return Ot},er=Object.prototype,sr=function(d){var L=d&&d.constructor;return d===(typeof L=="function"&&L.prototype||er)},ye=function(d,L){return function(j){return d(L(j))}},Fe=ye(Object.keys,Object),tr=Object.prototype.hasOwnProperty,Sr=function(d){if(!sr(d))return Fe(d);var L=[];for(var j in Object(d))tr.call(d,j)&&j!="constructor"&&L.push(j);return L},Er=function(d){return d!=null&&Bt(d.length)&&!Ye(d)},me=function(d){return Er(d)?Se(d):Sr(d)},Ft=function(d,L){return d&&Gn(L,me(L),d)},ne=function(d){var L=[];if(d!=null)for(var j in Object(d))L.push(j);return L},Ie=Object.prototype.hasOwnProperty,Ce=function(d){if(!de(d))return ne(d);var L=sr(d),j=[];for(var tt in d)(tt!="constructor"||!L&&Ie.call(d,tt))&&j.push(tt);return j},Ue=function(d){return Er(d)?Se(d,!0):Ce(d)},Xe=function(d,L){return d&&Gn(L,Ue(L),d)},Wr=g(function(d,L){var j=L&&!L.nodeType&&L,tt=j&&d&&!d.nodeType&&d,lt=tt&&tt.exports===j?Mt.Buffer:void 0,pt=lt?lt.allocUnsafe:void 0;d.exports=function(St,Ot){if(Ot)return St.slice();var Ut=St.length,qt=pt?pt(Ut):new St.constructor(Ut);return St.copy(qt),qt}}),$r=function(d,L){var j=-1,tt=d.length;for(L||(L=Array(tt));++j<tt;)L[j]=d[j];return L},mn=function(d,L){for(var j=-1,tt=d==null?0:d.length,lt=0,pt=[];++j<tt;){var St=d[j];L(St,j,d)&&(pt[lt++]=St)}return pt},Nn=function(){return[]},kn=Object.prototype.propertyIsEnumerable,Jn=Object.getOwnPropertySymbols,ri=Jn?function(d){return d==null?[]:(d=Object(d),mn(Jn(d),function(L){return kn.call(d,L)}))}:Nn,Ri=function(d,L){return Gn(d,ri(d),L)},di=function(d,L){for(var j=-1,tt=L.length,lt=d.length;++j<tt;)d[lt+j]=L[j];return d},Ki=ye(Object.getPrototypeOf,Object),yo=Object.getOwnPropertySymbols?function(d){for(var L=[];d;)di(L,ri(d)),d=Ki(d);return L}:Nn,Ea=function(d,L){return Gn(d,yo(d),L)},ta=function(d,L,j){var tt=L(d);return Lt(d)?tt:di(tt,j(d))},mo=function(d){return ta(d,me,ri)},Na=function(d){return ta(d,Ue,yo)},To=Nt(Mt,"DataView"),vi=Nt(Mt,"Promise"),xa=Nt(Mt,"Set"),Vo=Nt(Mt,"WeakMap"),zi=Qt(To),ao=Qt(ft),jo=Qt(vi),ps=Qt(xa),Io=Qt(Vo),Ja=It;(To&&Ja(new To(new ArrayBuffer(1)))!="[object DataView]"||ft&&Ja(new ft)!="[object Map]"||vi&&Ja(vi.resolve())!="[object Promise]"||xa&&Ja(new xa)!="[object Set]"||Vo&&Ja(new Vo)!="[object WeakMap]")&&(Ja=function(d){var L=It(d),j=L=="[object Object]"?d.constructor:void 0,tt=j?Qt(j):"";if(tt)switch(tt){case zi:return"[object DataView]";case ao:return"[object Map]";case jo:return"[object Promise]";case ps:return"[object Set]";case Io:return"[object WeakMap]"}return L});var Pn=Ja,$s=Object.prototype.hasOwnProperty,na=function(d){var L=d.length,j=new d.constructor(L);return L&&typeof d[0]=="string"&&$s.call(d,"index")&&(j.index=d.index,j.input=d.input),j},oo=Mt.Uint8Array,Xa=function(d){var L=new d.constructor(d.byteLength);return new oo(L).set(new oo(d)),L},qo=function(d,L){var j=L?Xa(d.buffer):d.buffer;return new d.constructor(j,d.byteOffset,d.byteLength)},On=/\w*$/,bo=function(d){var L=new d.constructor(d.source,On.exec(d));return L.lastIndex=d.lastIndex,L},gs=vt?vt.prototype:void 0,ts=gs?gs.valueOf:void 0,es=function(d){return ts?Object(ts.call(d)):{}},Wn=function(d,L){var j=L?Xa(d.buffer):d.buffer;return new d.constructor(j,d.byteOffset,d.length)},so=function(d,L,j){var tt=d.constructor;switch(L){case"[object ArrayBuffer]":return Xa(d);case"[object Boolean]":case"[object Date]":return new tt(+d);case"[object DataView]":return qo(d,j);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wn(d,j);case"[object Map]":return new tt;case"[object Number]":case"[object String]":return new tt(d);case"[object RegExp]":return bo(d);case"[object Set]":return new tt;case"[object Symbol]":return es(d)}},ia=Object.create,Bi=function(){function d(){}return function(L){if(!de(L))return{};if(ia)return ia(L);d.prototype=L;var j=new d;return d.prototype=void 0,j}}(),rs=function(d){return typeof d.constructor!="function"||sr(d)?{}:Bi(Ki(d))},Po=function(d){return zn(d)&&Pn(d)=="[object Map]"},ga=ot&&ot.isMap,ys=ga?he(ga):Po,Qs=function(d){return zn(d)&&Pn(d)=="[object Set]"},ms=ot&&ot.isSet,Eo=ms?he(ms):Qs,Ai={};Ai["[object Arguments]"]=Ai["[object Array]"]=Ai["[object ArrayBuffer]"]=Ai["[object DataView]"]=Ai["[object Boolean]"]=Ai["[object Date]"]=Ai["[object Float32Array]"]=Ai["[object Float64Array]"]=Ai["[object Int8Array]"]=Ai["[object Int16Array]"]=Ai["[object Int32Array]"]=Ai["[object Map]"]=Ai["[object Number]"]=Ai["[object Object]"]=Ai["[object RegExp]"]=Ai["[object Set]"]=Ai["[object String]"]=Ai["[object Symbol]"]=Ai["[object Uint8Array]"]=Ai["[object Uint8ClampedArray]"]=Ai["[object Uint16Array]"]=Ai["[object Uint32Array]"]=!0,Ai["[object Error]"]=Ai["[object Function]"]=Ai["[object WeakMap]"]=!1;var Ya=function d(L,j,tt,lt,pt,St){var Ot,Ut=1&j,qt=2&j,fe=4&j;if(tt&&(Ot=pt?tt(L,lt,pt,St):tt(L)),Ot!==void 0)return Ot;if(!de(L))return L;var oe=Lt(L);if(oe){if(Ot=na(L),!Ut)return $r(L,Ot)}else{var Ne=Pn(L),rr=Ne=="[object Function]"||Ne=="[object GeneratorFunction]";if(G(L))return Wr(L,Ut);if(Ne=="[object Object]"||Ne=="[object Arguments]"||rr&&!pt){if(Ot=qt||rr?{}:rs(L),!Ut)return qt?Ea(L,Xe(Ot,L)):Ri(L,Ft(Ot,L))}else{if(!Ai[Ne])return pt?L:{};Ot=so(L,Ne,Ut)}}St||(St=new vn);var Pr=St.get(L);if(Pr)return Pr;St.set(L,Ot),Eo(L)?L.forEach(function(hr){Ot.add(d(hr,j,tt,hr,L,St))}):ys(L)&&L.forEach(function(hr,fr){Ot.set(fr,d(hr,j,tt,fr,L,St))});var ur=oe?void 0:(fe?qt?Na:mo:qt?Ue:me)(L);return ln(ur||L,function(hr,fr){ur&&(hr=L[fr=hr]),Cn(Ot,fr,d(hr,j,tt,fr,L,St))}),Ot},bs=function(d){return Ya(d,4)},Ha=function(d){return function(){return d}},Ns=function(d){return function(L,j,tt){for(var lt=-1,pt=Object(L),St=tt(L),Ot=St.length;Ot--;){var Ut=St[d?Ot:++lt];if(j(pt[Ut],Ut,pt)===!1)break}return L}}(),La=function(d,L){return d&&Ns(d,L,me)},ya=function(d,L){return function(j,tt){if(j==null)return j;if(!Er(j))return d(j,tt);for(var lt=j.length,pt=L?lt:-1,St=Object(j);(L?pt--:++pt<lt)&&tt(St[pt],pt,St)!==!1;);return j}}(La),Za=function(d){return d},xo=function(d){return typeof d=="function"?d:Za},Ka=function(d,L){return(Lt(d)?ln:ya)(d,xo(L))},Ga=Ka,Js=function(d,L){var j=[];return ya(d,function(tt,lt,pt){L(tt,lt,pt)&&j.push(tt)}),j},ka=function(d){return this.__data__.set(d,"__lodash_hash_undefined__"),this},$a=function(d){return this.__data__.has(d)};function wo(d){var L=-1,j=d==null?0:d.length;for(this.__data__=new hn;++L<j;)this.add(d[L])}wo.prototype.add=wo.prototype.push=ka,wo.prototype.has=$a;var qa=wo,Xo=function(d,L){for(var j=-1,tt=d==null?0:d.length;++j<tt;)if(L(d[j],j,d))return!0;return!1},fi=function(d,L){return d.has(L)},ma=function(d,L,j,tt,lt,pt){var St=1&j,Ot=d.length,Ut=L.length;if(Ot!=Ut&&!(St&&Ut>Ot))return!1;var qt=pt.get(d),fe=pt.get(L);if(qt&&fe)return qt==L&&fe==d;var oe=-1,Ne=!0,rr=2&j?new qa:void 0;for(pt.set(d,L),pt.set(L,d);++oe<Ot;){var Pr=d[oe],ur=L[oe];if(tt)var hr=St?tt(ur,Pr,oe,L,d,pt):tt(Pr,ur,oe,d,L,pt);if(hr!==void 0){if(hr)continue;Ne=!1;break}if(rr){if(!Xo(L,function(fr,Xr){if(!fi(rr,Xr)&&(Pr===fr||lt(Pr,fr,j,tt,pt)))return rr.push(Xr)})){Ne=!1;break}}else if(Pr!==ur&&!lt(Pr,ur,j,tt,pt)){Ne=!1;break}}return pt.delete(d),pt.delete(L),Ne},to=function(d){var L=-1,j=Array(d.size);return d.forEach(function(tt,lt){j[++L]=[lt,tt]}),j},ba=function(d){var L=-1,j=Array(d.size);return d.forEach(function(tt){j[++L]=tt}),j},Mi=vt?vt.prototype:void 0,ca=Mi?Mi.valueOf:void 0,Es=function(d,L,j,tt,lt,pt,St){switch(j){case"[object DataView]":if(d.byteLength!=L.byteLength||d.byteOffset!=L.byteOffset)return!1;d=d.buffer,L=L.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=L.byteLength||!pt(new oo(d),new oo(L)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+d,+L);case"[object Error]":return d.name==L.name&&d.message==L.message;case"[object RegExp]":case"[object String]":return d==L+"";case"[object Map]":var Ot=to;case"[object Set]":var Ut=1&tt;if(Ot||(Ot=ba),d.size!=L.size&&!Ut)return!1;var qt=St.get(d);if(qt)return qt==L;tt|=2,St.set(d,L);var fe=ma(Ot(d),Ot(L),tt,lt,pt,St);return St.delete(d),fe;case"[object Symbol]":if(ca)return ca.call(d)==ca.call(L)}return!1},aa=Object.prototype.hasOwnProperty,uo=function(d,L,j,tt,lt,pt){var St=1&j,Ot=mo(d),Ut=Ot.length;if(Ut!=mo(L).length&&!St)return!1;for(var qt=Ut;qt--;){var fe=Ot[qt];if(!(St?fe in L:aa.call(L,fe)))return!1}var oe=pt.get(d),Ne=pt.get(L);if(oe&&Ne)return oe==L&&Ne==d;var rr=!0;pt.set(d,L),pt.set(L,d);for(var Pr=St;++qt<Ut;){var ur=d[fe=Ot[qt]],hr=L[fe];if(tt)var fr=St?tt(hr,ur,fe,L,d,pt):tt(ur,hr,fe,d,L,pt);if(!(fr===void 0?ur===hr||lt(ur,hr,j,tt,pt):fr)){rr=!1;break}Pr||(Pr=fe=="constructor")}if(rr&&!Pr){var Xr=d.constructor,fn=L.constructor;Xr==fn||!("constructor"in d)||!("constructor"in L)||typeof Xr=="function"&&Xr instanceof Xr&&typeof fn=="function"&&fn instanceof fn||(rr=!1)}return pt.delete(d),pt.delete(L),rr},eo=Object.prototype.hasOwnProperty,fo=function(d,L,j,tt,lt,pt){var St=Lt(d),Ot=Lt(L),Ut=St?"[object Array]":Pn(d),qt=Ot?"[object Array]":Pn(L),fe=(Ut=Ut=="[object Arguments]"?"[object Object]":Ut)=="[object Object]",oe=(qt=qt=="[object Arguments]"?"[object Object]":qt)=="[object Object]",Ne=Ut==qt;if(Ne&&G(d)){if(!G(L))return!1;St=!0,fe=!1}if(Ne&&!fe)return pt||(pt=new vn),St||te(d)?ma(d,L,j,tt,lt,pt):Es(d,L,Ut,j,tt,lt,pt);if(!(1&j)){var rr=fe&&eo.call(d,"__wrapped__"),Pr=oe&&eo.call(L,"__wrapped__");if(rr||Pr){var ur=rr?d.value():d,hr=Pr?L.value():L;return pt||(pt=new vn),lt(ur,hr,j,tt,pt)}}return!!Ne&&(pt||(pt=new vn),uo(d,L,j,tt,lt,pt))},qs=function d(L,j,tt,lt,pt){return L===j||(L==null||j==null||!zn(L)&&!zn(j)?L!=L&&j!=j:fo(L,j,tt,lt,d,pt))},Yo=function(d,L,j,tt){var lt=j.length,pt=lt,St=!tt;if(d==null)return!pt;for(d=Object(d);lt--;){var Ot=j[lt];if(St&&Ot[2]?Ot[1]!==d[Ot[0]]:!(Ot[0]in d))return!1}for(;++lt<pt;){var Ut=(Ot=j[lt])[0],qt=d[Ut],fe=Ot[1];if(St&&Ot[2]){if(qt===void 0&&!(Ut in d))return!1}else{var oe=new vn;if(tt)var Ne=tt(qt,fe,Ut,d,L,oe);if(!(Ne===void 0?qs(fe,qt,3,tt,oe):Ne))return!1}}return!0},Oo=function(d){return d==d&&!de(d)},ns=function(d){for(var L=me(d),j=L.length;j--;){var tt=L[j],lt=d[tt];L[j]=[tt,lt,Oo(lt)]}return L},Wu=function(d,L){return function(j){return j!=null&&j[d]===L&&(L!==void 0||d in Object(j))}},yu=function(d){var L=ns(d);return L.length==1&&L[0][2]?Wu(L[0][0],L[0][1]):function(j){return j===d||Yo(j,d,L)}},xs=function(d){return typeof d=="symbol"||zn(d)&&It(d)=="[object Symbol]"},Xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ue=/^\w*$/,nr=function(d,L){if(Lt(d))return!1;var j=typeof d;return!(j!="number"&&j!="symbol"&&j!="boolean"&&d!=null&&!xs(d))||ue.test(d)||!Xt.test(d)||L!=null&&d in Object(L)};function cr(d,L){if(typeof d!="function"||L!=null&&typeof L!="function")throw new TypeError("Expected a function");var j=function(){var tt=arguments,lt=L?L.apply(this,tt):tt[0],pt=j.cache;if(pt.has(lt))return pt.get(lt);var St=d.apply(this,tt);return j.cache=pt.set(lt,St)||pt,St};return j.cache=new(cr.Cache||hn),j}cr.Cache=hn;var Gr=cr,cn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xn=/\\(\\)?/g,Zn=function(d){var L=Gr(d,function(tt){return j.size===500&&j.clear(),tt}),j=L.cache;return L}(function(d){var L=[];return d.charCodeAt(0)===46&&L.push(""),d.replace(cn,function(j,tt,lt,pt){L.push(lt?pt.replace(xn,"$1"):tt||j)}),L}),Wi=function(d,L){for(var j=-1,tt=d==null?0:d.length,lt=Array(tt);++j<tt;)lt[j]=L(d[j],j,d);return lt},Ra=vt?vt.prototype:void 0,Fa=Ra?Ra.toString:void 0,Ho=function d(L){if(typeof L=="string")return L;if(Lt(L))return Wi(L,d)+"";if(xs(L))return Fa?Fa.call(L):"";var j=L+"";return j=="0"&&1/L==-1/0?"-0":j},xf=function(d){return d==null?"":Ho(d)},wa=function(d,L){return Lt(d)?d:nr(d,L)?[d]:Zn(xf(d))},ro=function(d){if(typeof d=="string"||xs(d))return d;var L=d+"";return L=="0"&&1/d==-1/0?"-0":L},mu=function(d,L){for(var j=0,tt=(L=wa(L,d)).length;d!=null&&j<tt;)d=d[ro(L[j++])];return j&&j==tt?d:void 0},ic=function(d,L,j){var tt=d==null?void 0:mu(d,L);return tt===void 0?j:tt},Yc=function(d,L){return d!=null&&L in Object(d)},wf=function(d,L,j){for(var tt=-1,lt=(L=wa(L,d)).length,pt=!1;++tt<lt;){var St=ro(L[tt]);if(!(pt=d!=null&&j(d,St)))break;d=d[St]}return pt||++tt!=lt?pt:!!(lt=d==null?0:d.length)&&Bt(lt)&&st(St,lt)&&(Lt(d)||Dt(d))},_f=function(d,L){return d!=null&&wf(d,L,Yc)},Sf=function(d,L){return nr(d)&&Oo(L)?Wu(ro(d),L):function(j){var tt=ic(j,d);return tt===void 0&&tt===L?_f(j,d):qs(L,tt,3)}},tu=function(d){return function(L){return L==null?void 0:L[d]}},bu=function(d){return function(L){return mu(L,d)}},eu=function(d){return nr(d)?tu(ro(d)):bu(d)},co=function(d){return typeof d=="function"?d:d==null?Za:typeof d=="object"?Lt(d)?Sf(d[0],d[1]):yu(d):eu(d)},Hc=function(d,L){return(Lt(d)?mn:Js)(d,co(L))},Mf=Object.prototype.hasOwnProperty,zl=function(d,L){return d!=null&&Mf.call(d,L)},Ls=function(d,L){return d!=null&&wf(d,L,zl)},Wl=Object.prototype.hasOwnProperty,Vl=function(d){if(d==null)return!0;if(Er(d)&&(Lt(d)||typeof d=="string"||typeof d.splice=="function"||G(d)||te(d)||Dt(d)))return!d.length;var L=Pn(d);if(L=="[object Map]"||L=="[object Set]")return!d.size;if(sr(d))return!Sr(d).length;for(var j in d)if(Wl.call(d,j))return!1;return!0},Eu=function(d){return d===void 0},Xn=function(d,L){var j=-1,tt=Er(d)?Array(d.length):[];return ya(d,function(lt,pt,St){tt[++j]=L(lt,pt,St)}),tt},Cf=function(d,L){return(Lt(d)?Wi:Xn)(d,co(L))},Af=function(d,L,j,tt){var lt=-1,pt=d==null?0:d.length;for(tt&&pt&&(j=d[++lt]);++lt<pt;)j=L(j,d[lt],lt,d);return j},Vu=function(d,L,j,tt,lt){return lt(d,function(pt,St,Ot){j=tt?(tt=!1,pt):L(j,pt,St,Ot)}),j},ac=function(d,L,j){var tt=Lt(d)?Af:Vu,lt=arguments.length<3;return tt(d,co(L),j,lt,ya)},Tf=function(d){return typeof d=="string"||!Lt(d)&&zn(d)&&It(d)=="[object String]"},oc=tu("length"),If=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),sc=function(d){return If.test(d)},Zc="[\\ud800-\\udfff]",Pf="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Kc="\\ud83c[\\udffb-\\udfff]",jl="[^\\ud800-\\udfff]",ks="(?:\\ud83c[\\udde6-\\uddff]){2}",$c="[\\ud800-\\udbff][\\udc00-\\udfff]",ju="(?:"+Pf+"|"+Kc+")?",Xu="[\\ufe0e\\ufe0f]?"+ju+("(?:\\u200d(?:"+[jl,ks,$c].join("|")+")[\\ufe0e\\ufe0f]?"+ju+")*"),Qc="(?:"+[jl+Pf+"?",Pf,ks,$c,Zc].join("|")+")",Yu=RegExp(Kc+"(?="+Kc+")|"+Qc+Xu,"g"),Do=function(d){for(var L=Yu.lastIndex=0;Yu.test(d);)++L;return L},xu=function(d){return sc(d)?Do(d):oc(d)},Jc=function(d){if(d==null)return 0;if(Er(d))return Tf(d)?xu(d):d.length;var L=Pn(d);return L=="[object Map]"||L=="[object Set]"?d.size:Sr(d).length},Xl=function(d,L,j){var tt=Lt(d),lt=tt||G(d)||te(d);if(L=co(L),j==null){var pt=d&&d.constructor;j=lt?tt?new pt:[]:de(d)&&Ye(pt)?Bi(Ki(d)):{}}return(lt?ln:La)(d,function(St,Ot,Ut){return L(j,St,Ot,Ut)}),j},qc=vt?vt.isConcatSpreadable:void 0,Yl=function(d){return Lt(d)||Dt(d)||!!(qc&&d&&d[qc])},Of=function d(L,j,tt,lt,pt){var St=-1,Ot=L.length;for(tt||(tt=Yl),pt||(pt=[]);++St<Ot;){var Ut=L[St];j>0&&tt(Ut)?j>1?d(Ut,j-1,tt,lt,pt):di(pt,Ut):lt||(pt[pt.length]=Ut)}return pt},Hl=function(d,L,j){switch(j.length){case 0:return d.call(L);case 1:return d.call(L,j[0]);case 2:return d.call(L,j[0],j[1]);case 3:return d.call(L,j[0],j[1],j[2])}return d.apply(L,j)},tl=Math.max,ru=function(d,L,j){return L=tl(L===void 0?d.length-1:L,0),function(){for(var tt=arguments,lt=-1,pt=tl(tt.length-L,0),St=Array(pt);++lt<pt;)St[lt]=tt[L+lt];lt=-1;for(var Ot=Array(L+1);++lt<L;)Ot[lt]=tt[lt];return Ot[L]=j(St),Hl(d,this,Ot)}},Aa=pn?function(d,L){return pn(d,"toString",{configurable:!0,enumerable:!1,value:Ha(L),writable:!0})}:Za,Df=Date.now,nu=function(d){var L=0,j=0;return function(){var tt=Df(),lt=16-(tt-j);if(j=tt,lt>0){if(++L>=800)return arguments[0]}else L=0;return d.apply(void 0,arguments)}}(Aa),Zo=function(d,L){return nu(ru(d,L,Za),d+"")},el=function(d,L,j,tt){for(var lt=d.length,pt=j+(tt?1:-1);tt?pt--:++pt<lt;)if(L(d[pt],pt,d))return pt;return-1},rl=function(d){return d!=d},Zl=function(d,L,j){for(var tt=j-1,lt=d.length;++tt<lt;)if(d[tt]===L)return tt;return-1},Kl=function(d,L,j){return L==L?Zl(d,L,j):el(d,rl,j)},$l=function(d,L){return!!(d!=null&&d.length)&&Kl(d,L,0)>-1},nl=function(d,L,j){for(var tt=-1,lt=d==null?0:d.length;++tt<lt;)if(j(L,d[tt]))return!0;return!1},Ko=function(){},il=xa&&1/ba(new xa([,-0]))[1]==1/0?function(d){return new xa(d)}:Ko,al=function(d,L,j){var tt=-1,lt=$l,pt=d.length,St=!0,Ot=[],Ut=Ot;if(j)St=!1,lt=nl;else if(pt>=200){var qt=L?null:il(d);if(qt)return ba(qt);St=!1,lt=fi,Ut=new qa}else Ut=L?[]:Ot;t:for(;++tt<pt;){var fe=d[tt],oe=L?L(fe):fe;if(fe=j||fe!==0?fe:0,St&&oe==oe){for(var Ne=Ut.length;Ne--;)if(Ut[Ne]===oe)continue t;L&&Ut.push(oe),Ot.push(fe)}else lt(Ut,oe,j)||(Ut!==Ot&&Ut.push(oe),Ot.push(fe))}return Ot},ol=function(d){return zn(d)&&Er(d)},Ql=Zo(function(d){return al(Of(d,1,ol,!0))}),sl=function(d,L){return Wi(L,function(j){return d[j]})},Ta,Nh=function(d){return d==null?[]:sl(d,me(d))};try{Ta={clone:bs,constant:Ha,each:Ga,filter:Hc,has:Ls,isArray:Lt,isEmpty:Vl,isFunction:Ye,isUndefined:Eu,keys:me,map:Cf,reduce:ac,size:Jc,transform:Xl,union:Ql,values:Nh}}catch(d){}Ta||(Ta=window._);var bn=Ta,Nf=Ei;function Ei(d){this._isDirected=!bn.has(d,"directed")||d.directed,this._isMultigraph=!!bn.has(d,"multigraph")&&d.multigraph,this._isCompound=!!bn.has(d,"compound")&&d.compound,this._label=void 0,this._defaultNodeLabelFn=bn.constant(void 0),this._defaultEdgeLabelFn=bn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function ul(d,L){d[L]?d[L]++:d[L]=1}function Jl(d,L){--d[L]||delete d[L]}function Hu(d,L,j,tt){var lt=""+L,pt=""+j;if(!d&&lt>pt){var St=lt;lt=pt,pt=St}return lt+""+pt+""+(bn.isUndefined(tt)?"\0":tt)}function ql(d,L,j,tt){var lt=""+L,pt=""+j;if(!d&&lt>pt){var St=lt;lt=pt,pt=St}var Ot={v:lt,w:pt};return tt&&(Ot.name=tt),Ot}function uc(d,L){return Hu(d,L.v,L.w,L.name)}Ei.prototype._nodeCount=0,Ei.prototype._edgeCount=0,Ei.prototype.isDirected=function(){return this._isDirected},Ei.prototype.isMultigraph=function(){return this._isMultigraph},Ei.prototype.isCompound=function(){return this._isCompound},Ei.prototype.setGraph=function(d){return this._label=d,this},Ei.prototype.graph=function(){return this._label},Ei.prototype.setDefaultNodeLabel=function(d){return bn.isFunction(d)||(d=bn.constant(d)),this._defaultNodeLabelFn=d,this},Ei.prototype.nodeCount=function(){return this._nodeCount},Ei.prototype.nodes=function(){return bn.keys(this._nodes)},Ei.prototype.sources=function(){var d=this;return bn.filter(this.nodes(),function(L){return bn.isEmpty(d._in[L])})},Ei.prototype.sinks=function(){var d=this;return bn.filter(this.nodes(),function(L){return bn.isEmpty(d._out[L])})},Ei.prototype.setNodes=function(d,L){var j=arguments,tt=this;return bn.each(d,function(lt){j.length>1?tt.setNode(lt,L):tt.setNode(lt)}),this},Ei.prototype.setNode=function(d,L){return bn.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=L),this):(this._nodes[d]=arguments.length>1?L:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]="\0",this._children[d]={},this._children["\0"][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},Ei.prototype.node=function(d){return this._nodes[d]},Ei.prototype.hasNode=function(d){return bn.has(this._nodes,d)},Ei.prototype.removeNode=function(d){var L=this;if(bn.has(this._nodes,d)){var j=function(tt){L.removeEdge(L._edgeObjs[tt])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],bn.each(this.children(d),function(tt){L.setParent(tt)}),delete this._children[d]),bn.each(bn.keys(this._in[d]),j),delete this._in[d],delete this._preds[d],bn.each(bn.keys(this._out[d]),j),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},Ei.prototype.setParent=function(d,L){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(bn.isUndefined(L))L="\0";else{for(var j=L+="";!bn.isUndefined(j);j=this.parent(j))if(j===d)throw new Error("Setting "+L+" as parent of "+d+" would create a cycle");this.setNode(L)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=L,this._children[L][d]=!0,this},Ei.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},Ei.prototype.parent=function(d){if(this._isCompound){var L=this._parent[d];if(L!=="\0")return L}},Ei.prototype.children=function(d){if(bn.isUndefined(d)&&(d="\0"),this._isCompound){var L=this._children[d];if(L)return bn.keys(L)}else{if(d==="\0")return this.nodes();if(this.hasNode(d))return[]}},Ei.prototype.predecessors=function(d){var L=this._preds[d];if(L)return bn.keys(L)},Ei.prototype.successors=function(d){var L=this._sucs[d];if(L)return bn.keys(L)},Ei.prototype.neighbors=function(d){var L=this.predecessors(d);if(L)return bn.union(L,this.successors(d))},Ei.prototype.isLeaf=function(d){return(this.isDirected()?this.successors(d):this.neighbors(d)).length===0},Ei.prototype.filterNodes=function(d){var L=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});L.setGraph(this.graph());var j=this;bn.each(this._nodes,function(pt,St){d(St)&&L.setNode(St,pt)}),bn.each(this._edgeObjs,function(pt){L.hasNode(pt.v)&&L.hasNode(pt.w)&&L.setEdge(pt,j.edge(pt))});var tt={};function lt(pt){var St=j.parent(pt);return St===void 0||L.hasNode(St)?(tt[pt]=St,St):St in tt?tt[St]:lt(St)}return this._isCompound&&bn.each(L.nodes(),function(pt){L.setParent(pt,lt(pt))}),L},Ei.prototype.setDefaultEdgeLabel=function(d){return bn.isFunction(d)||(d=bn.constant(d)),this._defaultEdgeLabelFn=d,this},Ei.prototype.edgeCount=function(){return this._edgeCount},Ei.prototype.edges=function(){return bn.values(this._edgeObjs)},Ei.prototype.setPath=function(d,L){var j=this,tt=arguments;return bn.reduce(d,function(lt,pt){return tt.length>1?j.setEdge(lt,pt,L):j.setEdge(lt,pt),pt}),this},Ei.prototype.setEdge=function(){var d,L,j,tt,lt=!1,pt=arguments[0];typeof pt=="object"&&pt!==null&&"v"in pt?(d=pt.v,L=pt.w,j=pt.name,arguments.length===2&&(tt=arguments[1],lt=!0)):(d=pt,L=arguments[1],j=arguments[3],arguments.length>2&&(tt=arguments[2],lt=!0)),d=""+d,L=""+L,bn.isUndefined(j)||(j=""+j);var St=Hu(this._isDirected,d,L,j);if(bn.has(this._edgeLabels,St))return lt&&(this._edgeLabels[St]=tt),this;if(!bn.isUndefined(j)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(L),this._edgeLabels[St]=lt?tt:this._defaultEdgeLabelFn(d,L,j);var Ot=ql(this._isDirected,d,L,j);return d=Ot.v,L=Ot.w,Object.freeze(Ot),this._edgeObjs[St]=Ot,ul(this._preds[L],d),ul(this._sucs[d],L),this._in[L][St]=Ot,this._out[d][St]=Ot,this._edgeCount++,this},Ei.prototype.edge=function(d,L,j){var tt=arguments.length===1?uc(this._isDirected,arguments[0]):Hu(this._isDirected,d,L,j);return this._edgeLabels[tt]},Ei.prototype.hasEdge=function(d,L,j){var tt=arguments.length===1?uc(this._isDirected,arguments[0]):Hu(this._isDirected,d,L,j);return bn.has(this._edgeLabels,tt)},Ei.prototype.removeEdge=function(d,L,j){var tt=arguments.length===1?uc(this._isDirected,arguments[0]):Hu(this._isDirected,d,L,j),lt=this._edgeObjs[tt];return lt&&(d=lt.v,L=lt.w,delete this._edgeLabels[tt],delete this._edgeObjs[tt],Jl(this._preds[L],d),Jl(this._sucs[d],L),delete this._in[L][tt],delete this._out[d][tt],this._edgeCount--),this},Ei.prototype.inEdges=function(d,L){var j=this._in[d];if(j){var tt=bn.values(j);return L?bn.filter(tt,function(lt){return lt.v===L}):tt}},Ei.prototype.outEdges=function(d,L){var j=this._out[d];if(j){var tt=bn.values(j);return L?bn.filter(tt,function(lt){return lt.w===L}):tt}},Ei.prototype.nodeEdges=function(d,L){var j=this.inEdges(d,L);if(j)return j.concat(this.outEdges(d,L))};var Lh={Graph:Nf,version:"2.1.8"},th={write:function(d){var L={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:kh(d),edges:ws(d)};return bn.isUndefined(d.graph())||(L.value=bn.clone(d.graph())),L},read:function(d){var L=new Nf(d.options).setGraph(d.value);return bn.each(d.nodes,function(j){L.setNode(j.v,j.value),j.parent&&L.setParent(j.v,j.parent)}),bn.each(d.edges,function(j){L.setEdge({v:j.v,w:j.w,name:j.name},j.value)}),L}};function kh(d){return bn.map(d.nodes(),function(L){var j=d.node(L),tt=d.parent(L),lt={v:L};return bn.isUndefined(j)||(lt.value=j),bn.isUndefined(tt)||(lt.parent=tt),lt})}function ws(d){return bn.map(d.edges(),function(L){var j=d.edge(L),tt={v:L.v,w:L.w};return bn.isUndefined(L.name)||(tt.name=L.name),bn.isUndefined(j)||(tt.value=j),tt})}var Rh=function(d){var L,j={},tt=[];function lt(pt){bn.has(j,pt)||(j[pt]=!0,L.push(pt),bn.each(d.successors(pt),lt),bn.each(d.predecessors(pt),lt))}return bn.each(d.nodes(),function(pt){L=[],lt(pt),L.length&&tt.push(L)}),tt},fc=ea;function ea(){this._arr=[],this._keyIndices={}}ea.prototype.size=function(){return this._arr.length},ea.prototype.keys=function(){return this._arr.map(function(d){return d.key})},ea.prototype.has=function(d){return bn.has(this._keyIndices,d)},ea.prototype.priority=function(d){var L=this._keyIndices[d];if(L!==void 0)return this._arr[L].priority},ea.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ea.prototype.add=function(d,L){var j=this._keyIndices;if(d=String(d),!bn.has(j,d)){var tt=this._arr,lt=tt.length;return j[d]=lt,tt.push({key:d,priority:L}),this._decrease(lt),!0}return!1},ea.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var d=this._arr.pop();return delete this._keyIndices[d.key],this._heapify(0),d.key},ea.prototype.decrease=function(d,L){var j=this._keyIndices[d];if(L>this._arr[j].priority)throw new Error("New priority is greater than current priority. Key: "+d+" Old: "+this._arr[j].priority+" New: "+L);this._arr[j].priority=L,this._decrease(j)},ea.prototype._heapify=function(d){var L=this._arr,j=2*d,tt=j+1,lt=d;j<L.length&&(lt=L[j].priority<L[lt].priority?j:lt,tt<L.length&&(lt=L[tt].priority<L[lt].priority?tt:lt),lt!==d&&(this._swap(d,lt),this._heapify(lt)))},ea.prototype._decrease=function(d){for(var L,j=this._arr,tt=j[d].priority;d!==0&&!(j[L=d>>1].priority<tt);)this._swap(d,L),d=L},ea.prototype._swap=function(d,L){var j=this._arr,tt=this._keyIndices,lt=j[d],pt=j[L];j[d]=pt,j[L]=lt,tt[pt.key]=d,tt[lt.key]=L};var cc=function(d,L,j,tt){return function(lt,pt,St,Ot){var Ut,qt,fe={},oe=new fc,Ne=function(rr){var Pr=rr.v!==Ut?rr.v:rr.w,ur=fe[Pr],hr=St(rr),fr=qt.distance+hr;if(hr<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+rr+" Weight: "+hr);fr<ur.distance&&(ur.distance=fr,ur.predecessor=Ut,oe.decrease(Pr,fr))};for(lt.nodes().forEach(function(rr){var Pr=rr===pt?0:Number.POSITIVE_INFINITY;fe[rr]={distance:Pr},oe.add(rr,Pr)});oe.size()>0&&(Ut=oe.removeMin(),(qt=fe[Ut]).distance!==Number.POSITIVE_INFINITY);)Ot(Ut).forEach(Ne);return fe}(d,String(L),j||_s,tt||function(lt){return d.outEdges(lt)})},_s=bn.constant(1),Lf=function(d,L,j){return bn.transform(d.nodes(),function(tt,lt){tt[lt]=cc(d,lt,L,j)},{})},eh=function(d){var L=0,j=[],tt={},lt=[];function pt(St){var Ot=tt[St]={onStack:!0,lowlink:L,index:L++};if(j.push(St),d.successors(St).forEach(function(fe){bn.has(tt,fe)?tt[fe].onStack&&(Ot.lowlink=Math.min(Ot.lowlink,tt[fe].index)):(pt(fe),Ot.lowlink=Math.min(Ot.lowlink,tt[fe].lowlink))}),Ot.lowlink===Ot.index){var Ut,qt=[];do Ut=j.pop(),tt[Ut].onStack=!1,qt.push(Ut);while(St!==Ut);lt.push(qt)}}return d.nodes().forEach(function(St){bn.has(tt,St)||pt(St)}),lt},Bh=function(d){return bn.filter(eh(d),function(L){return L.length>1||L.length===1&&d.hasEdge(L[0],L[0])})},iu=function(d,L,j){return function(tt,lt,pt){var St={},Ot=tt.nodes();return Ot.forEach(function(Ut){St[Ut]={},St[Ut][Ut]={distance:0},Ot.forEach(function(qt){Ut!==qt&&(St[Ut][qt]={distance:Number.POSITIVE_INFINITY})}),pt(Ut).forEach(function(qt){var fe=qt.v===Ut?qt.w:qt.v,oe=lt(qt);St[Ut][fe]={distance:oe,predecessor:Ut}})}),Ot.forEach(function(Ut){var qt=St[Ut];Ot.forEach(function(fe){var oe=St[fe];Ot.forEach(function(Ne){var rr=oe[Ut],Pr=qt[Ne],ur=oe[Ne],hr=rr.distance+Pr.distance;hr<ur.distance&&(ur.distance=hr,ur.predecessor=Pr.predecessor)})})}),St}(d,L||fl,j||function(tt){return d.outEdges(tt)})},fl=bn.constant(1),is=Zu;function Zu(d){var L={},j={},tt=[];if(bn.each(d.sinks(),function lt(pt){if(bn.has(j,pt))throw new lc;bn.has(L,pt)||(j[pt]=!0,L[pt]=!0,bn.each(d.predecessors(pt),lt),delete j[pt],tt.push(pt))}),bn.size(L)!==d.nodeCount())throw new lc;return tt}function lc(){}Zu.CycleException=lc,lc.prototype=new Error;var hc=function(d,L,j){bn.isArray(L)||(L=[L]);var tt=(d.isDirected()?d.successors:d.neighbors).bind(d),lt=[],pt={};return bn.each(L,function(St){if(!d.hasNode(St))throw new Error("Graph does not have node: "+St);Ss(d,St,j==="post",pt,tt,lt)}),lt};function Ss(d,L,j,tt,lt,pt){bn.has(tt,L)||(tt[L]=!0,j||pt.push(L),bn.each(lt(L),function(St){Ss(d,St,j,tt,lt,pt)}),j&&pt.push(L))}var as,cl={Graph:Lh.Graph,json:th,alg:{components:Rh,dijkstra:cc,dijkstraAll:Lf,findCycles:Bh,floydWarshall:iu,isAcyclic:function(d){try{is(d)}catch(L){if(L instanceof is.CycleException)return!1;throw L}return!0},postorder:function(d,L){return hc(d,L,"post")},preorder:function(d,L){return hc(d,L,"pre")},prim:function(d,L){var j,tt=new Nf,lt={},pt=new fc;function St(Ut){var qt=Ut.v===j?Ut.w:Ut.v,fe=pt.priority(qt);if(fe!==void 0){var oe=L(Ut);oe<fe&&(lt[qt]=j,pt.decrease(qt,oe))}}if(d.nodeCount()===0)return tt;bn.each(d.nodes(),function(Ut){pt.add(Ut,Number.POSITIVE_INFINITY),tt.setNode(Ut)}),pt.decrease(d.nodes()[0],0);for(var Ot=!1;pt.size()>0;){if(j=pt.removeMin(),bn.has(lt,j))tt.setEdge(j,lt[j]);else{if(Ot)throw new Error("Input graph is not connected: "+d);Ot=!0}d.nodeEdges(j).forEach(St)}return tt},tarjan:eh,topsort:is},version:Lh.version};try{as=cl}catch(d){}as||(as=window.graphlib);var _o=as,dc=function(d){return Ya(d,5)},au=function(d,L,j){if(!de(j))return!1;var tt=typeof L;return!!(tt=="number"?Er(j)&&st(L,j.length):tt=="string"&&L in j)&&_(j[L],d)},ll=Object.prototype,rh=ll.hasOwnProperty,vc=Zo(function(d,L){d=Object(d);var j=-1,tt=L.length,lt=tt>2?L[2]:void 0;for(lt&&au(L[0],L[1],lt)&&(tt=1);++j<tt;)for(var pt=L[j],St=Ue(pt),Ot=-1,Ut=St.length;++Ot<Ut;){var qt=St[Ot],fe=d[qt];(fe===void 0||_(fe,ll[qt])&&!rh.call(d,qt))&&(d[qt]=pt[qt])}return d}),kf=function(d){return function(L,j,tt){var lt=Object(L);if(!Er(L)){var pt=co(j);L=me(L),j=function(Ot){return pt(lt[Ot],Ot,lt)}}var St=d(L,j,tt);return St>-1?lt[pt?L[St]:St]:void 0}},Gi=/^\s+|\s+$/g,Rs=/^[-+]0x[0-9a-f]+$/i,os=/^0b[01]+$/i,No=/^0o[0-7]+$/i,Bs=parseInt,wu=function(d){if(typeof d=="number")return d;if(xs(d))return NaN;if(de(d)){var L=typeof d.valueOf=="function"?d.valueOf():d;d=de(L)?L+"":L}if(typeof d!="string")return d===0?d:+d;d=d.replace(Gi,"");var j=os.test(d);return j||No.test(d)?Bs(d.slice(2),j?2:8):Rs.test(d)?NaN:+d},Gs=function(d){return d?(d=wu(d))===1/0||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0},Rf=function(d){var L=Gs(d),j=L%1;return L==L?j?L-j:L:0},ou=Math.max,Ku=kf(function(d,L,j){var tt=d==null?0:d.length;if(!tt)return-1;var lt=j==null?0:Rf(j);return lt<0&&(lt=ou(tt+lt,0)),el(d,co(L),lt)}),_u=function(d){return d!=null&&d.length?Of(d,1):[]},ss=function(d,L){return d==null?d:Ns(d,xo(L),Ue)},hl=function(d){var L=d==null?0:d.length;return L?d[L-1]:void 0},Fs=function(d,L){var j={};return L=co(L),La(d,function(tt,lt,pt){Bn(j,lt,L(tt,lt,pt))}),j},an=function(d,L,j){for(var tt=-1,lt=d.length;++tt<lt;){var pt=d[tt],St=L(pt);if(St!=null&&(Ot===void 0?St==St&&!xs(St):j(St,Ot)))var Ot=St,Ut=pt}return Ut},Bf=function(d,L){return d>L},Gh=function(d){return d&&d.length?an(d,Za,Bf):void 0},Gf=function(d,L,j){(j!==void 0&&!_(d[L],j)||j===void 0&&!(L in d))&&Bn(d,L,j)},Fh=Function.prototype,Uh=Object.prototype,pc=Fh.toString,dl=Uh.hasOwnProperty,nh=pc.call(Object),Us=function(d){if(!zn(d)||It(d)!="[object Object]")return!1;var L=Ki(d);if(L===null)return!0;var j=dl.call(L,"constructor")&&L.constructor;return typeof j=="function"&&j instanceof j&&pc.call(j)==nh},Su=function(d,L){if((L!=="constructor"||typeof d[L]!="function")&&L!="__proto__")return d[L]},Mu=function(d){return Gn(d,Ue(d))},$u=function(d,L,j,tt,lt,pt,St){var Ot=Su(d,j),Ut=Su(L,j),qt=St.get(Ut);if(qt)Gf(d,j,qt);else{var fe=pt?pt(Ot,Ut,j+"",d,L,St):void 0,oe=fe===void 0;if(oe){var Ne=Lt(Ut),rr=!Ne&&G(Ut),Pr=!Ne&&!rr&&te(Ut);fe=Ut,Ne||rr||Pr?Lt(Ot)?fe=Ot:ol(Ot)?fe=$r(Ot):rr?(oe=!1,fe=Wr(Ut,!0)):Pr?(oe=!1,fe=Wn(Ut,!0)):fe=[]:Us(Ut)||Dt(Ut)?(fe=Ot,Dt(Ot)?fe=Mu(Ot):de(Ot)&&!Ye(Ot)||(fe=rs(Ut))):oe=!1}oe&&(St.set(Ut,fe),lt(fe,Ut,tt,pt,St),St.delete(Ut)),Gf(d,j,fe)}},Ms=function d(L,j,tt,lt,pt){L!==j&&Ns(j,function(St,Ot){if(pt||(pt=new vn),de(St))$u(L,j,Ot,tt,d,lt,pt);else{var Ut=lt?lt(Su(L,Ot),St,Ot+"",L,j,pt):void 0;Ut===void 0&&(Ut=St),Gf(L,Ot,Ut)}},Ue)},lo=function(d){return Zo(function(L,j){var tt=-1,lt=j.length,pt=lt>1?j[lt-1]:void 0,St=lt>2?j[2]:void 0;for(pt=d.length>3&&typeof pt=="function"?(lt--,pt):void 0,St&&au(j[0],j[1],St)&&(pt=lt<3?void 0:pt,lt=1),L=Object(L);++tt<lt;){var Ot=j[tt];Ot&&d(L,Ot,tt,pt)}return L})}(function(d,L,j){Ms(d,L,j)}),ih=function(d,L){return d<L},Qu=function(d){return d&&d.length?an(d,Za,ih):void 0},ah=function(d,L){return d&&d.length?an(d,co(L),ih):void 0},Ju=function(){return Mt.Date.now()},vl=function(d,L,j,tt){if(!de(d))return d;for(var lt=-1,pt=(L=wa(L,d)).length,St=pt-1,Ot=d;Ot!=null&&++lt<pt;){var Ut=ro(L[lt]),qt=j;if(Ut==="__proto__"||Ut==="constructor"||Ut==="prototype")return d;if(lt!=St){var fe=Ot[Ut];(qt=tt?tt(fe,Ut,Ot):void 0)===void 0&&(qt=de(fe)?fe:st(L[lt+1])?[]:{})}Cn(Ot,Ut,qt),Ot=Ot[Ut]}return d},pl=function(d,L,j){for(var tt=-1,lt=L.length,pt={};++tt<lt;){var St=L[tt],Ot=mu(d,St);j(Ot,St)&&vl(pt,wa(St,d),Ot)}return pt},gl=function(d,L){return pl(d,L,function(j,tt){return _f(d,tt)})},gc=function(d){return nu(ru(d,void 0,_u),d+"")}(function(d,L){return d==null?{}:gl(d,L)}),yc=Math.ceil,mc=Math.max,yl=function(d,L,j,tt){for(var lt=-1,pt=mc(yc((L-d)/(j||1)),0),St=Array(pt);pt--;)St[tt?pt:++lt]=d,d+=j;return St},qu=function(d){return function(L,j,tt){return tt&&typeof tt!="number"&&au(L,j,tt)&&(j=tt=void 0),L=Gs(L),j===void 0?(j=L,L=0):j=Gs(j),tt=tt===void 0?L<j?1:-1:Gs(tt),yl(L,j,tt,d)}}(),ml=function(d,L){var j=d.length;for(d.sort(L);j--;)d[j]=d[j].value;return d},Ff=function(d,L){if(d!==L){var j=d!==void 0,tt=d===null,lt=d==d,pt=xs(d),St=L!==void 0,Ot=L===null,Ut=L==L,qt=xs(L);if(!Ot&&!qt&&!pt&&d>L||pt&&St&&Ut&&!Ot&&!qt||tt&&St&&Ut||!j&&Ut||!lt)return 1;if(!tt&&!pt&&!qt&&d<L||qt&&j&&lt&&!tt&&!pt||Ot&&j&&lt||!St&&lt||!Ut)return-1}return 0},oh=function(d,L,j){for(var tt=-1,lt=d.criteria,pt=L.criteria,St=lt.length,Ot=j.length;++tt<St;){var Ut=Ff(lt[tt],pt[tt]);if(Ut)return tt>=Ot?Ut:Ut*(j[tt]=="desc"?-1:1)}return d.index-L.index},tf=function(d,L,j){L=L.length?Wi(L,function(pt){return Lt(pt)?function(St){return mu(St,pt.length===1?pt[0]:pt)}:pt}):[Za];var tt=-1;L=Wi(L,he(co));var lt=Xn(d,function(pt,St,Ot){return{criteria:Wi(L,function(Ut){return Ut(pt)}),index:++tt,value:pt}});return ml(lt,function(pt,St){return oh(pt,St,j)})},gi=Zo(function(d,L){if(d==null)return[];var j=L.length;return j>1&&au(d,L[0],L[1])?L=[]:j>2&&au(L[0],L[1],L[2])&&(L=[L[0]]),tf(d,Of(L,1),[])}),sh=0,bl=function(d){var L=++sh;return xf(d)+L},bc=function(d,L,j){for(var tt=-1,lt=d.length,pt=L.length,St={};++tt<lt;){var Ot=tt<pt?L[tt]:void 0;j(St,d[tt],Ot)}return St},ef,Ec=function(d,L){return bc(d||[],L||[],Cn)};try{ef={cloneDeep:dc,constant:Ha,defaults:vc,each:Ga,filter:Hc,find:Ku,flatten:_u,forEach:Ka,forIn:ss,has:Ls,isUndefined:Eu,last:hl,map:Cf,mapValues:Fs,max:Gh,merge:lo,min:Qu,minBy:ah,now:Ju,pick:gc,range:qu,reduce:ac,sortBy:gi,uniqueId:bl,values:Nh,zipObject:Ec}}catch(d){}ef||(ef=window._);var Ke=ef,$o=zs;function zs(){var d={};d._next=d._prev=d,this._sentinel=d}function rf(d){d._prev._next=d._next,d._next._prev=d._prev,delete d._next,delete d._prev}function El(d,L){if(d!=="_next"&&d!=="_prev")return L}zs.prototype.dequeue=function(){var d=this._sentinel,L=d._prev;if(L!==d)return rf(L),L},zs.prototype.enqueue=function(d){var L=this._sentinel;d._prev&&d._next&&rf(d),d._next=L._next,L._next._prev=d,L._next=d,d._prev=L},zs.prototype.toString=function(){for(var d=[],L=this._sentinel,j=L._prev;j!==L;)d.push(JSON.stringify(j,El)),j=j._prev;return"["+d.join(", ")+"]"};var xc=_o.Graph,Cu=function(d,L){if(d.nodeCount()<=1)return[];var j=function(lt,pt){var St=new xc,Ot=0,Ut=0;Ke.forEach(lt.nodes(),function(oe){St.setNode(oe,{v:oe,in:0,out:0})}),Ke.forEach(lt.edges(),function(oe){var Ne=St.edge(oe.v,oe.w)||0,rr=pt(oe),Pr=Ne+rr;St.setEdge(oe.v,oe.w,Pr),Ut=Math.max(Ut,St.node(oe.v).out+=rr),Ot=Math.max(Ot,St.node(oe.w).in+=rr)});var qt=Ke.range(Ut+Ot+3).map(function(){return new $o}),fe=Ot+1;return Ke.forEach(St.nodes(),function(oe){_c(qt,fe,St.node(oe))}),{graph:St,buckets:qt,zeroIdx:fe}}(d,L||wc),tt=function(lt,pt,St){for(var Ot,Ut=[],qt=pt[pt.length-1],fe=pt[0];lt.nodeCount();){for(;Ot=fe.dequeue();)nf(lt,pt,St,Ot);for(;Ot=qt.dequeue();)nf(lt,pt,St,Ot);if(lt.nodeCount()){for(var oe=pt.length-2;oe>0;--oe)if(Ot=pt[oe].dequeue()){Ut=Ut.concat(nf(lt,pt,St,Ot,!0));break}}}return Ut}(j.graph,j.buckets,j.zeroIdx);return Ke.flatten(Ke.map(tt,function(lt){return d.outEdges(lt.v,lt.w)}),!0)},wc=Ke.constant(1);function nf(d,L,j,tt,lt){var pt=lt?[]:void 0;return Ke.forEach(d.inEdges(tt.v),function(St){var Ot=d.edge(St),Ut=d.node(St.v);lt&&pt.push({v:St.v,w:St.w}),Ut.out-=Ot,_c(L,j,Ut)}),Ke.forEach(d.outEdges(tt.v),function(St){var Ot=d.edge(St),Ut=St.w,qt=d.node(Ut);qt.in-=Ot,_c(L,j,qt)}),d.removeNode(tt.v),pt}function _c(d,L,j){j.out?j.in?d[j.out-j.in+L].enqueue(j):d[d.length-1].enqueue(j):d[0].enqueue(j)}var Sc={run:function(d){var L=d.graph().acyclicer==="greedy"?Cu(d,function(j){return function(tt){return j.edge(tt).weight}}(d)):function(j){var tt=[],lt={},pt={};function St(Ot){Ke.has(pt,Ot)||(pt[Ot]=!0,lt[Ot]=!0,Ke.forEach(j.outEdges(Ot),function(Ut){Ke.has(lt,Ut.w)?tt.push(Ut):St(Ut.w)}),delete lt[Ot])}return Ke.forEach(j.nodes(),St),tt}(d);Ke.forEach(L,function(j){var tt=d.edge(j);d.removeEdge(j),tt.forwardName=j.name,tt.reversed=!0,d.setEdge(j.w,j.v,tt,Ke.uniqueId("rev"))})},undo:function(d){Ke.forEach(d.edges(),function(L){var j=d.edge(L);if(j.reversed){d.removeEdge(L);var tt=j.forwardName;delete j.reversed,delete j.forwardName,d.setEdge(L.w,L.v,j,tt)}})}},af=_o.Graph,la={addDummyNode:su,simplify:function(d){var L=new af().setGraph(d.graph());return Ke.forEach(d.nodes(),function(j){L.setNode(j,d.node(j))}),Ke.forEach(d.edges(),function(j){var tt=L.edge(j.v,j.w)||{weight:0,minlen:1},lt=d.edge(j);L.setEdge(j.v,j.w,{weight:tt.weight+lt.weight,minlen:Math.max(tt.minlen,lt.minlen)})}),L},asNonCompoundGraph:function(d){var L=new af({multigraph:d.isMultigraph()}).setGraph(d.graph());return Ke.forEach(d.nodes(),function(j){d.children(j).length||L.setNode(j,d.node(j))}),Ke.forEach(d.edges(),function(j){L.setEdge(j,d.edge(j))}),L},successorWeights:function(d){var L=Ke.map(d.nodes(),function(j){var tt={};return Ke.forEach(d.outEdges(j),function(lt){tt[lt.w]=(tt[lt.w]||0)+d.edge(lt).weight}),tt});return Ke.zipObject(d.nodes(),L)},predecessorWeights:function(d){var L=Ke.map(d.nodes(),function(j){var tt={};return Ke.forEach(d.inEdges(j),function(lt){tt[lt.v]=(tt[lt.v]||0)+d.edge(lt).weight}),tt});return Ke.zipObject(d.nodes(),L)},intersectRect:function(d,L){var j,tt,lt=d.x,pt=d.y,St=L.x-lt,Ot=L.y-pt,Ut=d.width/2,qt=d.height/2;if(!St&&!Ot)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Ot)*Ut>Math.abs(St)*qt?(Ot<0&&(qt=-qt),j=qt*St/Ot,tt=qt):(St<0&&(Ut=-Ut),j=Ut,tt=Ut*Ot/St),{x:lt+j,y:pt+tt}},buildLayerMatrix:function(d){var L=Ke.map(Ke.range(xl(d)+1),function(){return[]});return Ke.forEach(d.nodes(),function(j){var tt=d.node(j),lt=tt.rank;Ke.isUndefined(lt)||(L[lt][tt.order]=j)}),L},normalizeRanks:function(d){var L=Ke.min(Ke.map(d.nodes(),function(j){return d.node(j).rank}));Ke.forEach(d.nodes(),function(j){var tt=d.node(j);Ke.has(tt,"rank")&&(tt.rank-=L)})},removeEmptyRanks:function(d){var L=Ke.min(Ke.map(d.nodes(),function(pt){return d.node(pt).rank})),j=[];Ke.forEach(d.nodes(),function(pt){var St=d.node(pt).rank-L;j[St]||(j[St]=[]),j[St].push(pt)});var tt=0,lt=d.graph().nodeRankFactor;Ke.forEach(j,function(pt,St){Ke.isUndefined(pt)&&St%lt!=0?--tt:tt&&Ke.forEach(pt,function(Ot){d.node(Ot).rank+=tt})})},addBorderNode:function(d,L,j,tt){var lt={width:0,height:0};return arguments.length>=4&&(lt.rank=j,lt.order=tt),su(d,"border",lt,L)},maxRank:xl,partition:function(d,L){var j={lhs:[],rhs:[]};return Ke.forEach(d,function(tt){L(tt)?j.lhs.push(tt):j.rhs.push(tt)}),j},time:function(d,L){var j=Ke.now();try{return L()}finally{console.log(d+" time: "+(Ke.now()-j)+"ms")}},notime:function(d,L){return L()}};function su(d,L,j,tt){var lt;do lt=Ke.uniqueId(tt);while(d.hasNode(lt));return j.dummy=L,d.setNode(lt,j),lt}function xl(d){return Ke.max(Ke.map(d.nodes(),function(L){var j=d.node(L).rank;if(!Ke.isUndefined(j))return j}))}var Uf={run:function(d){d.graph().dummyChains=[],Ke.forEach(d.edges(),function(L){(function(j,tt){var lt,pt,St,Ot=tt.v,Ut=j.node(Ot).rank,qt=tt.w,fe=j.node(qt).rank,oe=tt.name,Ne=j.edge(tt),rr=Ne.labelRank;if(fe!==Ut+1){for(j.removeEdge(tt),St=0,++Ut;Ut<fe;++St,++Ut)Ne.points=[],pt={width:0,height:0,edgeLabel:Ne,edgeObj:tt,rank:Ut},lt=la.addDummyNode(j,"edge",pt,"_d"),Ut===rr&&(pt.width=Ne.width,pt.height=Ne.height,pt.dummy="edge-label",pt.labelpos=Ne.labelpos),j.setEdge(Ot,lt,{weight:Ne.weight},oe),St===0&&j.graph().dummyChains.push(lt),Ot=lt;j.setEdge(Ot,qt,{weight:Ne.weight},oe)}})(d,L)})},undo:function(d){Ke.forEach(d.graph().dummyChains,function(L){var j,tt=d.node(L),lt=tt.edgeLabel;for(d.setEdge(tt.edgeObj,lt);tt.dummy;)j=d.successors(L)[0],d.removeNode(L),lt.points.push({x:tt.x,y:tt.y}),tt.dummy==="edge-label"&&(lt.x=tt.x,lt.y=tt.y,lt.width=tt.width,lt.height=tt.height),L=j,tt=d.node(L)})}},Lo=function(d){var L={};Ke.forEach(d.sources(),function j(tt){var lt=d.node(tt);if(Ke.has(L,tt))return lt.rank;L[tt]=!0;var pt=Ke.min(Ke.map(d.outEdges(tt),function(St){return j(St.w)-d.edge(St).minlen}));return pt!==Number.POSITIVE_INFINITY&&pt!=null||(pt=0),lt.rank=pt})},uu=function(d,L){return d.node(L.w).rank-d.node(L.v).rank-d.edge(L).minlen},fu=_o.Graph,Cs=uu,cu=function(d){var L,j,tt=new fu({directed:!1}),lt=d.nodes()[0],pt=d.nodeCount();for(tt.setNode(lt,{});As(tt,d)<pt;)L=lu(tt,d),j=tt.hasNode(L.v)?Cs(d,L):-Cs(d,L),Ts(tt,d,j);return tt};function As(d,L){return Ke.forEach(d.nodes(),function j(tt){Ke.forEach(L.nodeEdges(tt),function(lt){var pt=lt.v,St=tt===pt?lt.w:pt;d.hasNode(St)||Cs(L,lt)||(d.setNode(St,{}),d.setEdge(tt,St,{}),j(St))})}),d.nodeCount()}function lu(d,L){return Ke.minBy(L.edges(),function(j){if(d.hasNode(j.v)!==d.hasNode(j.w))return Cs(L,j)})}function Ts(d,L,j){Ke.forEach(d.nodes(),function(tt){L.node(tt).rank+=j})}var Au=uu,zf=Lo,of=_o.alg.preorder,Mc=_o.alg.postorder,us=la.simplify,Tu=ko;function ko(d){d=us(d),zf(d);var L,j=cu(d);for(Iu(j),Cc(j,d);L=Qo(j);)Pu(j,d,L,Ic(j,d,L))}function Cc(d,L){var j=Mc(d,d.nodes());j=j.slice(0,j.length-1),Ke.forEach(j,function(tt){(function(lt,pt,St){var Ot=lt.node(St).parent;lt.edge(St,Ot).cutvalue=Ac(lt,pt,St)})(d,L,tt)})}function Ac(d,L,j){var tt=d.node(j).parent,lt=!0,pt=L.edge(j,tt),St=0;return pt||(lt=!1,pt=L.edge(tt,j)),St=pt.weight,Ke.forEach(L.nodeEdges(j),function(Ot){var Ut,qt,fe=Ot.v===j,oe=fe?Ot.w:Ot.v;if(oe!==tt){var Ne=fe===lt,rr=L.edge(Ot).weight;if(St+=Ne?rr:-rr,Ut=j,qt=oe,d.hasEdge(Ut,qt)){var Pr=d.edge(j,oe).cutvalue;St+=Ne?-Pr:Pr}}}),St}function Iu(d,L){arguments.length<2&&(L=d.nodes()[0]),Tc(d,{},1,L)}function Tc(d,L,j,tt,lt){var pt=j,St=d.node(tt);return L[tt]=!0,Ke.forEach(d.neighbors(tt),function(Ot){Ke.has(L,Ot)||(j=Tc(d,L,j,Ot,tt))}),St.low=pt,St.lim=j++,lt?St.parent=lt:delete St.parent,j}function Qo(d){return Ke.find(d.edges(),function(L){return d.edge(L).cutvalue<0})}function Ic(d,L,j){var tt=j.v,lt=j.w;L.hasEdge(tt,lt)||(tt=j.w,lt=j.v);var pt=d.node(tt),St=d.node(lt),Ot=pt,Ut=!1;pt.lim>St.lim&&(Ot=St,Ut=!0);var qt=Ke.filter(L.edges(),function(fe){return Ut===uh(d,d.node(fe.v),Ot)&&Ut!==uh(d,d.node(fe.w),Ot)});return Ke.minBy(qt,function(fe){return Au(L,fe)})}function Pu(d,L,j,tt){var lt=j.v,pt=j.w;d.removeEdge(lt,pt),d.setEdge(tt.v,tt.w,{}),Iu(d),Cc(d,L),function(St,Ot){var Ut=Ke.find(St.nodes(),function(fe){return!Ot.node(fe).parent}),qt=of(St,Ut);qt=qt.slice(1),Ke.forEach(qt,function(fe){var oe=St.node(fe).parent,Ne=Ot.edge(fe,oe),rr=!1;Ne||(Ne=Ot.edge(oe,fe),rr=!0),Ot.node(fe).rank=Ot.node(oe).rank+(rr?Ne.minlen:-Ne.minlen)})}(d,L)}function uh(d,L,j){return j.low<=L.lim&&L.lim<=j.lim}ko.initLowLimValues=Iu,ko.initCutValues=Cc,ko.calcCutValue=Ac,ko.leaveEdge=Qo,ko.enterEdge=Ic,ko.exchangeEdges=Pu;var fs=Lo,sf=function(d){switch(d.graph().ranker){case"network-simplex":Ro(d);break;case"tight-tree":(function(L){fs(L),cu(L)})(d);break;case"longest-path":cs(d);break;default:Ro(d)}},cs=fs;function Ro(d){Tu(d)}var Wf=function(d){var L=function(j){var tt={},lt=0;function pt(St){var Ot=lt;Ke.forEach(j.children(St),pt),tt[St]={low:Ot,lim:lt++}}return Ke.forEach(j.children(),pt),tt}(d);Ke.forEach(d.graph().dummyChains,function(j){for(var tt=d.node(j),lt=tt.edgeObj,pt=function(oe,Ne,rr,Pr){var ur,hr,fr=[],Xr=[],fn=Math.min(Ne[rr].low,Ne[Pr].low),tn=Math.max(Ne[rr].lim,Ne[Pr].lim);ur=rr;do ur=oe.parent(ur),fr.push(ur);while(ur&&(Ne[ur].low>fn||tn>Ne[ur].lim));for(hr=ur,ur=Pr;(ur=oe.parent(ur))!==hr;)Xr.push(ur);return{path:fr.concat(Xr.reverse()),lca:hr}}(d,L,lt.v,lt.w),St=pt.path,Ot=pt.lca,Ut=0,qt=St[Ut],fe=!0;j!==lt.w;){if(tt=d.node(j),fe){for(;(qt=St[Ut])!==Ot&&d.node(qt).maxRank<tt.rank;)Ut++;qt===Ot&&(fe=!1)}if(!fe){for(;Ut<St.length-1&&d.node(qt=St[Ut+1]).minRank<=tt.rank;)Ut++;qt=St[Ut]}d.setParent(j,qt),j=d.successors(j)[0]}})},Is={run:function(d){var L=la.addDummyNode(d,"root",{},"_root"),j=function(St){var Ot={};function Ut(qt,fe){var oe=St.children(qt);oe&&oe.length&&Ke.forEach(oe,function(Ne){Ut(Ne,fe+1)}),Ot[qt]=fe}return Ke.forEach(St.children(),function(qt){Ut(qt,1)}),Ot}(d),tt=Ke.max(Ke.values(j))-1,lt=2*tt+1;d.graph().nestingRoot=L,Ke.forEach(d.edges(),function(St){d.edge(St).minlen*=lt});var pt=function(St){return Ke.reduce(St.edges(),function(Ot,Ut){return Ot+St.edge(Ut).weight},0)}(d)+1;Ke.forEach(d.children(),function(St){Bo(d,L,lt,pt,tt,j,St)}),d.graph().nodeRankFactor=lt},cleanup:function(d){var L=d.graph();d.removeNode(L.nestingRoot),delete L.nestingRoot,Ke.forEach(d.edges(),function(j){d.edge(j).nestingEdge&&d.removeEdge(j)})}};function Bo(d,L,j,tt,lt,pt,St){var Ot=d.children(St);if(Ot.length){var Ut=la.addBorderNode(d,"_bt"),qt=la.addBorderNode(d,"_bb"),fe=d.node(St);d.setParent(Ut,St),fe.borderTop=Ut,d.setParent(qt,St),fe.borderBottom=qt,Ke.forEach(Ot,function(oe){Bo(d,L,j,tt,lt,pt,oe);var Ne=d.node(oe),rr=Ne.borderTop?Ne.borderTop:oe,Pr=Ne.borderBottom?Ne.borderBottom:oe,ur=Ne.borderTop?tt:2*tt,hr=rr!==Pr?1:lt-pt[St]+1;d.setEdge(Ut,rr,{weight:ur,minlen:hr,nestingEdge:!0}),d.setEdge(Pr,qt,{weight:ur,minlen:hr,nestingEdge:!0})}),d.parent(St)||d.setEdge(L,Ut,{weight:0,minlen:lt+pt[St]})}else St!==L&&d.setEdge(L,St,{weight:0,minlen:j})}var Pc=function(d){Ke.forEach(d.children(),function L(j){var tt=d.children(j),lt=d.node(j);if(tt.length&&Ke.forEach(tt,L),Ke.has(lt,"minRank")){lt.borderLeft=[],lt.borderRight=[];for(var pt=lt.minRank,St=lt.maxRank+1;pt<St;++pt)ls(d,"borderLeft","_bl",j,lt,pt),ls(d,"borderRight","_br",j,lt,pt)}})};function ls(d,L,j,tt,lt,pt){var St={width:0,height:0,rank:pt,borderType:L},Ot=lt[L][pt-1],Ut=la.addDummyNode(d,"border",St,j);lt[L][pt]=Ut,d.setParent(Ut,tt),Ot&&d.setEdge(Ot,Ut,{weight:1})}var Ws={adjust:function(d){var L=d.graph().rankdir.toLowerCase();L!=="lr"&&L!=="rl"||Ua(d)},undo:function(d){var L=d.graph().rankdir.toLowerCase();L!=="bt"&&L!=="rl"||function(j){Ke.forEach(j.nodes(),function(tt){Go(j.node(tt))}),Ke.forEach(j.edges(),function(tt){var lt=j.edge(tt);Ke.forEach(lt.points,Go),Ke.has(lt,"y")&&Go(lt)})}(d),L!=="lr"&&L!=="rl"||(function(j){Ke.forEach(j.nodes(),function(tt){Ps(j.node(tt))}),Ke.forEach(j.edges(),function(tt){var lt=j.edge(tt);Ke.forEach(lt.points,Ps),Ke.has(lt,"x")&&Ps(lt)})}(d),Ua(d))}};function Ua(d){Ke.forEach(d.nodes(),function(L){hs(d.node(L))}),Ke.forEach(d.edges(),function(L){hs(d.edge(L))})}function hs(d){var L=d.width;d.width=d.height,d.height=L}function Go(d){d.y=-d.y}function Ps(d){var L=d.x;d.x=d.y,d.y=L}var Oc=function(d){var L={},j=Ke.filter(d.nodes(),function(Ot){return!d.children(Ot).length}),tt=Ke.max(Ke.map(j,function(Ot){return d.node(Ot).rank})),lt=Ke.map(Ke.range(tt+1),function(){return[]});function pt(Ot){if(!Ke.has(L,Ot)){L[Ot]=!0;var Ut=d.node(Ot);lt[Ut.rank].push(Ot),Ke.forEach(d.successors(Ot),pt)}}var St=Ke.sortBy(j,function(Ot){return d.node(Ot).rank});return Ke.forEach(St,pt),lt},Vf=function(d,L){for(var j=0,tt=1;tt<L.length;++tt)j+=uf(d,L[tt-1],L[tt]);return j};function uf(d,L,j){for(var tt=Ke.zipObject(j,Ke.map(j,function(qt,fe){return fe})),lt=Ke.flatten(Ke.map(L,function(qt){return Ke.sortBy(Ke.map(d.outEdges(qt),function(fe){return{pos:tt[fe.w],weight:d.edge(fe).weight}}),"pos")}),!0),pt=1;pt<j.length;)pt<<=1;var St=2*pt-1;pt-=1;var Ot=Ke.map(new Array(St),function(){return 0}),Ut=0;return Ke.forEach(lt.forEach(function(qt){var fe=qt.pos+pt;Ot[fe]+=qt.weight;for(var oe=0;fe>0;)fe%2&&(oe+=Ot[fe+1]),Ot[fe=fe-1>>1]+=qt.weight;Ut+=qt.weight*oe})),Ut}var wl=function(d,L){return Ke.map(L,function(j){var tt=d.inEdges(j);if(tt.length){var lt=Ke.reduce(tt,function(pt,St){var Ot=d.edge(St),Ut=d.node(St.v);return{sum:pt.sum+Ot.weight*Ut.order,weight:pt.weight+Ot.weight}},{sum:0,weight:0});return{v:j,barycenter:lt.sum/lt.weight,weight:lt.weight}}return{v:j}})},Dc=function(d,L){var j={};return Ke.forEach(d,function(tt,lt){var pt=j[tt.v]={indegree:0,in:[],out:[],vs:[tt.v],i:lt};Ke.isUndefined(tt.barycenter)||(pt.barycenter=tt.barycenter,pt.weight=tt.weight)}),Ke.forEach(L.edges(),function(tt){var lt=j[tt.v],pt=j[tt.w];Ke.isUndefined(lt)||Ke.isUndefined(pt)||(pt.indegree++,lt.out.push(j[tt.w]))}),function(tt){var lt=[];function pt(Ut){return function(qt){qt.merged||(Ke.isUndefined(qt.barycenter)||Ke.isUndefined(Ut.barycenter)||qt.barycenter>=Ut.barycenter)&&function(fe,oe){var Ne=0,rr=0;fe.weight&&(Ne+=fe.barycenter*fe.weight,rr+=fe.weight),oe.weight&&(Ne+=oe.barycenter*oe.weight,rr+=oe.weight),fe.vs=oe.vs.concat(fe.vs),fe.barycenter=Ne/rr,fe.weight=rr,fe.i=Math.min(oe.i,fe.i),oe.merged=!0}(Ut,qt)}}function St(Ut){return function(qt){qt.in.push(Ut),--qt.indegree==0&&tt.push(qt)}}for(;tt.length;){var Ot=tt.pop();lt.push(Ot),Ke.forEach(Ot.in.reverse(),pt(Ot)),Ke.forEach(Ot.out,St(Ot))}return Ke.map(Ke.filter(lt,function(Ut){return!Ut.merged}),function(Ut){return Ke.pick(Ut,["vs","i","barycenter","weight"])})}(Ke.filter(j,function(tt){return!tt.indegree}))},jf=function(d,L){var j=la.partition(d,function(oe){return Ke.has(oe,"barycenter")}),tt=j.lhs,lt=Ke.sortBy(j.rhs,function(oe){return-oe.i}),pt=[],St=0,Ot=0,Ut=0;tt.sort((qt=!!L,function(oe,Ne){return oe.barycenter<Ne.barycenter?-1:oe.barycenter>Ne.barycenter?1:qt?Ne.i-oe.i:oe.i-Ne.i})),Ut=ff(pt,lt,Ut),Ke.forEach(tt,function(oe){Ut+=oe.vs.length,pt.push(oe.vs),St+=oe.barycenter*oe.weight,Ot+=oe.weight,Ut=ff(pt,lt,Ut)});var qt,fe={vs:Ke.flatten(pt,!0)};return Ot&&(fe.barycenter=St/Ot,fe.weight=Ot),fe};function ff(d,L,j){for(var tt;L.length&&(tt=Ke.last(L)).i<=j;)L.pop(),d.push(tt.vs),j++;return j}var _l=function d(L,j,tt,lt){var pt=L.children(j),St=L.node(j),Ot=St?St.borderLeft:void 0,Ut=St?St.borderRight:void 0,qt={};Ot&&(pt=Ke.filter(pt,function(ur){return ur!==Ot&&ur!==Ut}));var fe=wl(L,pt);Ke.forEach(fe,function(ur){if(L.children(ur.v).length){var hr=d(L,ur.v,tt,lt);qt[ur.v]=hr,Ke.has(hr,"barycenter")&&(fr=ur,Xr=hr,Ke.isUndefined(fr.barycenter)?(fr.barycenter=Xr.barycenter,fr.weight=Xr.weight):(fr.barycenter=(fr.barycenter*fr.weight+Xr.barycenter*Xr.weight)/(fr.weight+Xr.weight),fr.weight+=Xr.weight))}var fr,Xr});var oe=Dc(fe,tt);(function(ur,hr){Ke.forEach(ur,function(fr){fr.vs=Ke.flatten(fr.vs.map(function(Xr){return hr[Xr]?hr[Xr].vs:Xr}),!0)})})(oe,qt);var Ne=jf(oe,lt);if(Ot&&(Ne.vs=Ke.flatten([Ot,Ne.vs,Ut],!0),L.predecessors(Ot).length)){var rr=L.node(L.predecessors(Ot)[0]),Pr=L.node(L.predecessors(Ut)[0]);Ke.has(Ne,"barycenter")||(Ne.barycenter=0,Ne.weight=0),Ne.barycenter=(Ne.barycenter*Ne.weight+rr.order+Pr.order)/(Ne.weight+2),Ne.weight+=2}return Ne},Ou=_o.Graph,Xf=function(d,L,j){var tt=function(pt){for(var St;pt.hasNode(St=Ke.uniqueId("_root")););return St}(d),lt=new Ou({compound:!0}).setGraph({root:tt}).setDefaultNodeLabel(function(pt){return d.node(pt)});return Ke.forEach(d.nodes(),function(pt){var St=d.node(pt),Ot=d.parent(pt);(St.rank===L||St.minRank<=L&&L<=St.maxRank)&&(lt.setNode(pt),lt.setParent(pt,Ot||tt),Ke.forEach(d[j](pt),function(Ut){var qt=Ut.v===pt?Ut.w:Ut.v,fe=lt.edge(qt,pt),oe=Ke.isUndefined(fe)?0:fe.weight;lt.setEdge(qt,pt,{weight:d.edge(Ut).weight+oe})}),Ke.has(St,"minRank")&&lt.setNode(pt,{borderLeft:St.borderLeft[L],borderRight:St.borderRight[L]}))}),lt},ds=function(d,L,j){var tt,lt={};Ke.forEach(j,function(pt){for(var St,Ot,Ut=d.parent(pt);Ut;){if((St=d.parent(Ut))?(Ot=lt[St],lt[St]=Ut):(Ot=tt,tt=Ut),Ot&&Ot!==Ut)return void L.setEdge(Ot,Ut);Ut=St}})},Yf=_o.Graph,Jo=function(d){var L=la.maxRank(d),j=cf(d,Ke.range(1,L+1),"inEdges"),tt=cf(d,Ke.range(L-1,-1,-1),"outEdges"),lt=Oc(d);$i(d,lt);for(var pt,St=Number.POSITIVE_INFINITY,Ot=0,Ut=0;Ut<4;++Ot,++Ut){Hf(Ot%2?j:tt,Ot%4>=2),lt=la.buildLayerMatrix(d);var qt=Vf(d,lt);qt<St&&(Ut=0,pt=Ke.cloneDeep(lt),St=qt)}$i(d,pt)};function cf(d,L,j){return Ke.map(L,function(tt){return Xf(d,tt,j)})}function Hf(d,L){var j=new Yf;Ke.forEach(d,function(tt){var lt=tt.graph().root,pt=_l(tt,lt,j,L);Ke.forEach(pt.vs,function(St,Ot){tt.node(St).order=Ot}),ds(tt,j,pt.vs)})}function $i(d,L){Ke.forEach(L,function(j){Ke.forEach(j,function(tt,lt){d.node(tt).order=lt})})}var Du=_o.Graph,Nu=function(d){var L,j=la.buildLayerMatrix(d),tt=Ke.merge(Vs(d,j),fh(d,j)),lt={};Ke.forEach(["u","d"],function(St){L=St==="u"?j:Ke.values(j).reverse(),Ke.forEach(["l","r"],function(Ot){Ot==="r"&&(L=Ke.map(L,function(oe){return Ke.values(oe).reverse()}));var Ut=(St==="u"?d.predecessors:d.successors).bind(d),qt=ch(d,L,tt,Ut),fe=Wh(d,L,qt.root,qt.align,Ot==="r");Ot==="r"&&(fe=Ke.mapValues(fe,function(oe){return-oe})),lt[St+Ot]=fe})});var pt=Lu(d,lt);return lh(lt,pt),hh(lt,d.graph().align)};function Vs(d,L){var j={};return Ke.reduce(L,function(tt,lt){var pt=0,St=0,Ot=tt.length,Ut=Ke.last(lt);return Ke.forEach(lt,function(qt,fe){var oe=function(rr,Pr){if(rr.node(Pr).dummy)return Ke.find(rr.predecessors(Pr),function(ur){return rr.node(ur).dummy})}(d,qt),Ne=oe?d.node(oe).order:Ot;(oe||qt===Ut)&&(Ke.forEach(lt.slice(St,fe+1),function(rr){Ke.forEach(d.predecessors(rr),function(Pr){var ur=d.node(Pr),hr=ur.order;!(hr<pt||Ne<hr)||ur.dummy&&d.node(rr).dummy||Zf(j,Pr,rr)})}),St=fe+1,pt=Ne)}),lt}),j}function fh(d,L){var j={};function tt(lt,pt,St,Ot,Ut){var qt;Ke.forEach(Ke.range(pt,St),function(fe){qt=lt[fe],d.node(qt).dummy&&Ke.forEach(d.predecessors(qt),function(oe){var Ne=d.node(oe);Ne.dummy&&(Ne.order<Ot||Ne.order>Ut)&&Zf(j,oe,qt)})})}return Ke.reduce(L,function(lt,pt){var St,Ot=-1,Ut=0;return Ke.forEach(pt,function(qt,fe){if(d.node(qt).dummy==="border"){var oe=d.predecessors(qt);oe.length&&(St=d.node(oe[0]).order,tt(pt,Ut,fe,Ot,St),Ut=fe,Ot=St)}tt(pt,Ut,pt.length,St,lt.length)}),pt}),j}function Zf(d,L,j){if(L>j){var tt=L;L=j,j=tt}var lt=d[L];lt||(d[L]=lt={}),lt[j]=!0}function zh(d,L,j){if(L>j){var tt=L;L=j,j=tt}return Ke.has(d[L],j)}function ch(d,L,j,tt){var lt={},pt={},St={};return Ke.forEach(L,function(Ot){Ke.forEach(Ot,function(Ut,qt){lt[Ut]=Ut,pt[Ut]=Ut,St[Ut]=qt})}),Ke.forEach(L,function(Ot){var Ut=-1;Ke.forEach(Ot,function(qt){var fe=tt(qt);if(fe.length)for(var oe=((fe=Ke.sortBy(fe,function(ur){return St[ur]})).length-1)/2,Ne=Math.floor(oe),rr=Math.ceil(oe);Ne<=rr;++Ne){var Pr=fe[Ne];pt[qt]===qt&&Ut<St[Pr]&&!zh(j,qt,Pr)&&(pt[Pr]=qt,pt[qt]=lt[qt]=lt[Pr],Ut=St[Pr])}})}),{root:lt,align:pt}}function Wh(d,L,j,tt,lt){var pt={},St=function(qt,fe,oe,Ne){var rr=new Du,Pr=qt.graph(),ur=function(hr,fr,Xr){return function(fn,tn,Tn){var wn,Rn=fn.node(tn),Kn=fn.node(Tn),Fn=0;if(Fn+=Rn.width/2,Ke.has(Rn,"labelpos"))switch(Rn.labelpos.toLowerCase()){case"l":wn=-Rn.width/2;break;case"r":wn=Rn.width/2}if(wn&&(Fn+=Xr?wn:-wn),wn=0,Fn+=(Rn.dummy?fr:hr)/2,Fn+=(Kn.dummy?fr:hr)/2,Fn+=Kn.width/2,Ke.has(Kn,"labelpos"))switch(Kn.labelpos.toLowerCase()){case"l":wn=Kn.width/2;break;case"r":wn=-Kn.width/2}return wn&&(Fn+=Xr?wn:-wn),wn=0,Fn}}(Pr.nodesep,Pr.edgesep,Ne);return Ke.forEach(fe,function(hr){var fr;Ke.forEach(hr,function(Xr){var fn=oe[Xr];if(rr.setNode(fn),fr){var tn=oe[fr],Tn=rr.edge(tn,fn);rr.setEdge(tn,fn,Math.max(ur(qt,Xr,fr),Tn||0))}fr=Xr})}),rr}(d,L,j,lt),Ot=lt?"borderLeft":"borderRight";function Ut(qt,fe){for(var oe=St.nodes(),Ne=oe.pop(),rr={};Ne;)rr[Ne]?qt(Ne):(rr[Ne]=!0,oe.push(Ne),oe=oe.concat(fe(Ne))),Ne=oe.pop()}return Ut(function(qt){pt[qt]=St.inEdges(qt).reduce(function(fe,oe){return Math.max(fe,pt[oe.v]+St.edge(oe))},0)},St.predecessors.bind(St)),Ut(function(qt){var fe=St.outEdges(qt).reduce(function(Ne,rr){return Math.min(Ne,pt[rr.w]-St.edge(rr))},Number.POSITIVE_INFINITY),oe=d.node(qt);fe!==Number.POSITIVE_INFINITY&&oe.borderType!==Ot&&(pt[qt]=Math.max(pt[qt],fe))},St.successors.bind(St)),Ke.forEach(tt,function(qt){pt[qt]=pt[j[qt]]}),pt}function Lu(d,L){return Ke.minBy(Ke.values(L),function(j){var tt=Number.NEGATIVE_INFINITY,lt=Number.POSITIVE_INFINITY;return Ke.forIn(j,function(pt,St){var Ot=function(Ut,qt){return Ut.node(qt).width}(d,St)/2;tt=Math.max(pt+Ot,tt),lt=Math.min(pt-Ot,lt)}),tt-lt})}function lh(d,L){var j=Ke.values(L),tt=Ke.min(j),lt=Ke.max(j);Ke.forEach(["u","d"],function(pt){Ke.forEach(["l","r"],function(St){var Ot,Ut=pt+St,qt=d[Ut];if(qt!==L){var fe=Ke.values(qt);(Ot=St==="l"?tt-Ke.min(fe):lt-Ke.max(fe))&&(d[Ut]=Ke.mapValues(qt,function(oe){return oe+Ot}))}})})}function hh(d,L){return Ke.mapValues(d.ul,function(j,tt){if(L)return d[L.toLowerCase()][tt];var lt=Ke.sortBy(Ke.map(d,tt));return(lt[1]+lt[2])/2})}var Sl=Nu,Vh=function(d){(function(L){var j=la.buildLayerMatrix(L),tt=L.graph().ranksep,lt=0;Ke.forEach(j,function(pt){var St=Ke.max(Ke.map(pt,function(Ot){return L.node(Ot).height}));Ke.forEach(pt,function(Ot){L.node(Ot).y=lt+St/2}),lt+=St+tt})})(d=la.asNonCompoundGraph(d)),Ke.forEach(Sl(d),function(L,j){d.node(j).x=L})},dh=la.normalizeRanks,jh=la.removeEmptyRanks,Qa=la,vh=_o.Graph,ku=function(d,L){var j=L&&L.debugTiming?Qa.time:Qa.notime;j("layout",function(){var tt=j("  buildLayoutGraph",function(){return function(lt){var pt=new vh({multigraph:!0,compound:!0}),St=Nc(lt.graph());return pt.setGraph(Ke.merge({},Ml,no(St,hu),Ke.pick(St,ph))),Ke.forEach(lt.nodes(),function(Ot){var Ut=Nc(lt.node(Ot));pt.setNode(Ot,Ke.defaults(no(Ut,Kf),gh)),pt.setParent(Ot,lt.parent(Ot))}),Ke.forEach(lt.edges(),function(Ot){var Ut=Nc(lt.edge(Ot));pt.setEdge(Ot,Ke.merge({},du,no(Ut,ho),Ke.pick(Ut,ii)))}),pt}(d)});j("  runLayout",function(){(function(lt,pt){pt("    makeSpaceForEdgeLabels",function(){(function(St){var Ot=St.graph();Ot.ranksep/=2,Ke.forEach(St.edges(),function(Ut){var qt=St.edge(Ut);qt.minlen*=2,qt.labelpos.toLowerCase()!=="c"&&(Ot.rankdir==="TB"||Ot.rankdir==="BT"?qt.width+=qt.labeloffset:qt.height+=qt.labeloffset)})})(lt)}),pt("    removeSelfEdges",function(){(function(St){Ke.forEach(St.edges(),function(Ot){if(Ot.v===Ot.w){var Ut=St.node(Ot.v);Ut.selfEdges||(Ut.selfEdges=[]),Ut.selfEdges.push({e:Ot,label:St.edge(Ot)}),St.removeEdge(Ot)}})})(lt)}),pt("    acyclic",function(){Sc.run(lt)}),pt("    nestingGraph.run",function(){Is.run(lt)}),pt("    rank",function(){sf(Qa.asNonCompoundGraph(lt))}),pt("    injectEdgeLabelProxies",function(){(function(St){Ke.forEach(St.edges(),function(Ot){var Ut=St.edge(Ot);if(Ut.width&&Ut.height){var qt=St.node(Ot.v),fe={rank:(St.node(Ot.w).rank-qt.rank)/2+qt.rank,e:Ot};Qa.addDummyNode(St,"edge-proxy",fe,"_ep")}})})(lt)}),pt("    removeEmptyRanks",function(){jh(lt)}),pt("    nestingGraph.cleanup",function(){Is.cleanup(lt)}),pt("    normalizeRanks",function(){dh(lt)}),pt("    assignRankMinMax",function(){(function(St){var Ot=0;Ke.forEach(St.nodes(),function(Ut){var qt=St.node(Ut);qt.borderTop&&(qt.minRank=St.node(qt.borderTop).rank,qt.maxRank=St.node(qt.borderBottom).rank,Ot=Ke.max(Ot,qt.maxRank))}),St.graph().maxRank=Ot})(lt)}),pt("    removeEdgeLabelProxies",function(){(function(St){Ke.forEach(St.nodes(),function(Ot){var Ut=St.node(Ot);Ut.dummy==="edge-proxy"&&(St.edge(Ut.e).labelRank=Ut.rank,St.removeNode(Ot))})})(lt)}),pt("    normalize.run",function(){Uf.run(lt)}),pt("    parentDummyChains",function(){Wf(lt)}),pt("    addBorderSegments",function(){Pc(lt)}),pt("    order",function(){Jo(lt)}),pt("    insertSelfEdges",function(){(function(St){var Ot=Qa.buildLayerMatrix(St);Ke.forEach(Ot,function(Ut){var qt=0;Ke.forEach(Ut,function(fe,oe){var Ne=St.node(fe);Ne.order=oe+qt,Ke.forEach(Ne.selfEdges,function(rr){Qa.addDummyNode(St,"selfedge",{width:rr.label.width,height:rr.label.height,rank:Ne.rank,order:oe+ ++qt,e:rr.e,label:rr.label},"_se")}),delete Ne.selfEdges})})})(lt)}),pt("    adjustCoordinateSystem",function(){Ws.adjust(lt)}),pt("    position",function(){Vh(lt)}),pt("    positionSelfEdges",function(){(function(St){Ke.forEach(St.nodes(),function(Ot){var Ut=St.node(Ot);if(Ut.dummy==="selfedge"){var qt=St.node(Ut.e.v),fe=qt.x+qt.width/2,oe=qt.y,Ne=Ut.x-fe,rr=qt.height/2;St.setEdge(Ut.e,Ut.label),St.removeNode(Ot),Ut.label.points=[{x:fe+2*Ne/3,y:oe-rr},{x:fe+5*Ne/6,y:oe-rr},{x:fe+Ne,y:oe},{x:fe+5*Ne/6,y:oe+rr},{x:fe+2*Ne/3,y:oe+rr}],Ut.label.x=Ut.x,Ut.label.y=Ut.y}})})(lt)}),pt("    removeBorderNodes",function(){(function(St){Ke.forEach(St.nodes(),function(Ot){if(St.children(Ot).length){var Ut=St.node(Ot),qt=St.node(Ut.borderTop),fe=St.node(Ut.borderBottom),oe=St.node(Ke.last(Ut.borderLeft)),Ne=St.node(Ke.last(Ut.borderRight));Ut.width=Math.abs(Ne.x-oe.x),Ut.height=Math.abs(fe.y-qt.y),Ut.x=oe.x+Ut.width/2,Ut.y=qt.y+Ut.height/2}}),Ke.forEach(St.nodes(),function(Ot){St.node(Ot).dummy==="border"&&St.removeNode(Ot)})})(lt)}),pt("    normalize.undo",function(){Uf.undo(lt)}),pt("    fixupEdgeLabelCoords",function(){(function(St){Ke.forEach(St.edges(),function(Ot){var Ut=St.edge(Ot);if(Ke.has(Ut,"x"))switch(Ut.labelpos!=="l"&&Ut.labelpos!=="r"||(Ut.width-=Ut.labeloffset),Ut.labelpos){case"l":Ut.x-=Ut.width/2+Ut.labeloffset;break;case"r":Ut.x+=Ut.width/2+Ut.labeloffset}})})(lt)}),pt("    undoCoordinateSystem",function(){Ws.undo(lt)}),pt("    translateGraph",function(){(function(St){var Ot=Number.POSITIVE_INFINITY,Ut=0,qt=Number.POSITIVE_INFINITY,fe=0,oe=St.graph(),Ne=oe.marginx||0,rr=oe.marginy||0;function Pr(ur){var hr=ur.x,fr=ur.y,Xr=ur.width,fn=ur.height;Ot=Math.min(Ot,hr-Xr/2),Ut=Math.max(Ut,hr+Xr/2),qt=Math.min(qt,fr-fn/2),fe=Math.max(fe,fr+fn/2)}Ke.forEach(St.nodes(),function(ur){Pr(St.node(ur))}),Ke.forEach(St.edges(),function(ur){var hr=St.edge(ur);Ke.has(hr,"x")&&Pr(hr)}),Ot-=Ne,qt-=rr,Ke.forEach(St.nodes(),function(ur){var hr=St.node(ur);hr.x-=Ot,hr.y-=qt}),Ke.forEach(St.edges(),function(ur){var hr=St.edge(ur);Ke.forEach(hr.points,function(fr){fr.x-=Ot,fr.y-=qt}),Ke.has(hr,"x")&&(hr.x-=Ot),Ke.has(hr,"y")&&(hr.y-=qt)}),oe.width=Ut-Ot+Ne,oe.height=fe-qt+rr})(lt)}),pt("    assignNodeIntersects",function(){(function(St){Ke.forEach(St.edges(),function(Ot){var Ut,qt,fe=St.edge(Ot),oe=St.node(Ot.v),Ne=St.node(Ot.w);fe.points?(Ut=fe.points[0],qt=fe.points[fe.points.length-1]):(fe.points=[],Ut=Ne,qt=oe),fe.points.unshift(Qa.intersectRect(oe,Ut)),fe.points.push(Qa.intersectRect(Ne,qt))})})(lt)}),pt("    reversePoints",function(){(function(St){Ke.forEach(St.edges(),function(Ot){var Ut=St.edge(Ot);Ut.reversed&&Ut.points.reverse()})})(lt)}),pt("    acyclic.undo",function(){Sc.undo(lt)})})(tt,j)}),j("  updateInputGraph",function(){(function(lt,pt){Ke.forEach(lt.nodes(),function(St){var Ot=lt.node(St),Ut=pt.node(St);Ot&&(Ot.x=Ut.x,Ot.y=Ut.y,pt.children(St).length&&(Ot.width=Ut.width,Ot.height=Ut.height))}),Ke.forEach(lt.edges(),function(St){var Ot=lt.edge(St),Ut=pt.edge(St);Ot.points=Ut.points,Ke.has(Ut,"x")&&(Ot.x=Ut.x,Ot.y=Ut.y)}),lt.graph().width=pt.graph().width,lt.graph().height=pt.graph().height})(d,tt)})})},hu=["nodesep","edgesep","ranksep","marginx","marginy"],Ml={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ph=["acyclicer","ranker","rankdir","align"],Kf=["width","height"],gh={width:0,height:0},ho=["minlen","weight","width","height","labeloffset"],du={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ii=["labelpos"];function no(d,L){return Ke.mapValues(Ke.pick(d,L),Number)}function Nc(d){var L={};return Ke.forEach(d,function(j,tt){L[tt.toLowerCase()]=j}),L}var Xh=_o.Graph,Cl={graphlib:_o,layout:ku,debug:{debugOrdering:function(d){var L=la.buildLayerMatrix(d),j=new Xh({compound:!0,multigraph:!0}).setGraph({});return Ke.forEach(d.nodes(),function(tt){j.setNode(tt,{label:tt}),j.setParent(tt,"layer"+d.node(tt).rank)}),Ke.forEach(d.edges(),function(tt){j.setEdge(tt.v,tt.w,{},tt.name)}),Ke.forEach(L,function(tt,lt){var pt="layer"+lt;j.setNode(pt,{rank:"same"}),Ke.reduce(tt,function(St,Ot){return j.setEdge(St,Ot,{style:"invis"}),Ot})}),j}},util:{time:la.time,notime:la.notime},version:"0.8.5"},Yh=Cl.graphlib,yh=Cl.layout;class Lc{constructor(L){this.cardinality=1,this.include=m.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=T.NODE,this.name=L.name,this.attr=L.attr||{},this.inputs=L.inputs,this.path=L.path||[],this.width=L.width,this.height=L.height}}class Al{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Tl(d){const L=new Al;return d.nodes.map(j=>new Lc(j)).forEach(j=>{L.nodes[j.name]=j,j.inputs.forEach(tt=>{(function(lt,pt,St){St.name!==pt.name&&lt.edges.push(Object.assign(Object.assign({},St.attr),{v:St.name,w:pt.name}))})(L,j,tt)})}),L}class Os{constructor(L,j={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=m.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=T.META,this.path=[],this.name=L,this.metaGraph=Ru(L,y.META,j)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(L=>this.metaGraph.node(L))}leaves(){let L,j=[],tt=[this];for(;tt.length;){let lt=tt.shift();lt.isGroupNode?(L=lt.metaGraph,L.nodes().forEach(pt=>tt.push(L.node(pt)))):j.push(lt.name)}return j}}class Il{constructor(L,j){this.v=L,this.w=j,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(L,j){this.baseEdgeList.push(L)}}function lf(d,L={}){return new Os(d,L)}function kc(d,L){return new Il(d,L)}function Ru(d,L,j){const tt=j||{},lt=new Yh.Graph(tt);return lt.setGraph({name:d,rankdir:tt.rankdir,type:L,align:tt.align}),lt}class $f{constructor(L={}){this.graphOptions=L,this.index={},this.graphOptions.compound=!0,this.root=lf(E,this.graphOptions),this.index[E]=this.root}getNodeMap(){return this.index}node(L){return this.index[L]}setNode(L,j){this.index[L]=j}getBridgeGraph(L){const j=this.index[L];if(!j)throw Error("Could not find node in hierarchy: "+L);if(!("metaGraph"in j))return null;const tt=j;if(tt.bridgeGraph)return tt.bridgeGraph;const lt=Ru(N,y.BRIDGE,this.graphOptions);if(tt.bridgeGraph=lt,!j.parentNode||!("metaGraph"in j.parentNode))return lt;const pt=j.parentNode;return[pt.metaGraph,this.getBridgeGraph(pt.name)].forEach(St=>{St.edges().filter(Ot=>Ot.v===L||Ot.w===L).forEach(Ot=>{const Ut=Ot.w===L;St.edge(Ot).baseEdgeList.forEach(qt=>{const[fe,oe]=Ut?[qt.w,Ot.v]:[qt.v,Ot.w],Ne=this.getChildName(L,fe),rr={v:Ut?oe:Ne,w:Ut?Ne:oe};let Pr=lt.edge(rr);Pr||(Pr=kc(rr.v,rr.w),Pr.inbound=Ut,lt.setEdge(rr.v,rr.w,Pr)),Pr.addBaseEdge(qt,this)})})}),lt}getChildName(L,j){let tt=this.index[j];for(;tt;){if(tt.parentNode&&tt.parentNode.name===L)return tt.name;tt=tt.parentNode}throw Error("Could not find immediate child for descendant: "+j)}getPredecessors(L){const j=this.index[L];if(!j)throw Error("Could not find node with name: "+L);return this.getOneWayEdges(j,!0)}getSuccessors(L){const j=this.index[L];if(!j)throw Error("Could not find node with name: "+L);return this.getOneWayEdges(j,!1)}getOneWayEdges(L,j){const tt=[];if(!L.parentNode||!L.parentNode.isGroupNode)return tt;const lt=L.parentNode,pt=lt.metaGraph,St=this.getBridgeGraph(lt.name);return js(pt,L,j,tt),js(St,L,j,tt),tt}}function io(d,L){const{rankDirection:j,align:tt}=L,lt=new $f({rankdir:j,align:tt});return function(pt,St){Object.keys(St.nodes).forEach(Ot=>{const Ut=St.nodes[Ot],qt=Ut.path;let fe=pt.root;fe.depth=Math.max(qt.length,fe.depth);for(let oe=0;oe<qt.length&&(fe.depth=Math.max(fe.depth,qt.length-oe),fe.cardinality+=Ut.cardinality,oe!==qt.length-1);oe++){const Ne=qt[oe];let rr=pt.node(Ne);rr||(rr=lf(Ne,pt.graphOptions),rr.path=Ut.path.slice(0,oe+1),rr.parentNode=fe,pt.setNode(Ne,rr),fe.metaGraph.setNode(Ne,rr)),fe=rr}pt.setNode(Ut.name,Ut),Ut.parentNode=fe,fe.metaGraph.setNode(Ut.name,Ut)})}(lt,d),function(pt,St){const Ot=pt.getNodeMap();let Ut=[],qt=[];const fe=(oe,Ne)=>{let rr=0;for(;oe;)Ne[rr++]=oe.name,oe=oe.parentNode;return rr-1};St.edges.forEach(oe=>{Ut=[],qt=[];let Ne=fe(St.nodes[oe.v],Ut),rr=fe(St.nodes[oe.w],qt);for(;Ut[Ne]===qt[rr];)if(Ne--,rr--,Ne<0||rr<0)throw Error("No difference found between ancestor paths.");const Pr=Ot[Ut[Ne+1]],ur=Ut[Ne],hr=qt[rr];let fr=Pr.metaGraph.edge(ur,hr);fr||(fr=kc(ur,hr),Pr.metaGraph.setEdge(ur,hr,fr)),fr.addBaseEdge(oe,pt)})}(lt,d),lt}function js(d,L,j,tt){(j?d.inEdges(L.name):d.outEdges(L.name)).forEach(lt=>{const pt=d.edge(lt);tt.push(pt)})}class Xs{constructor(L){this.hierarchy=L,this.index={},this.hasSubHierarchy={},this.root=new ce(this.hierarchy.root,this.hierarchy.graphOptions),this.index[L.root.name]=this.root,this.buildSubHierarchy(L.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(L){if(L in this.hasSubHierarchy)return;this.hasSubHierarchy[L]=!0;const j=this.index[L];if(j.node.type!==T.META)return;const tt=j,lt=tt.node.metaGraph,pt=tt.coreGraph;lt.nodes().forEach(fe=>{const oe=this.getOrCreateRenderNodeByName(fe);pt.setNode(fe,oe)}),lt.edges().forEach(fe=>{const oe=lt.edge(fe),Ne=new Ct(oe);pt.setEdge(fe.v,fe.w,Ne)});const St=tt.node.parentNode;if(!St)return;const Ot=this.getRenderNodeByName(St.name),Ut=(fe,...oe)=>oe.concat([fe?"IN":"OUT"]).join("~~"),qt=this.hierarchy.getBridgeGraph(L);qt.edges().forEach(fe=>{const oe=qt.edge(fe),Ne=!!lt.node(fe.w),[rr,Pr]=Ne?[fe.w,fe.v]:[fe.v,fe.w],ur=Tn=>{const wn=Ne?{v:Tn,w:L}:{v:L,w:Tn};return Ot.coreGraph.edge(wn)};let hr=ur(Pr);hr||(hr=ur(Ut(Ne,Pr,St.name)));const fr=Ut(Ne,L),Xr=Ut(Ne,Pr,L);let fn=pt.node(Xr);if(!fn){let Tn=pt.node(fr);if(!Tn){const Rn={name:fr,type:T.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:m.UNSPECIFIED,inbound:Ne,attr:{}};Tn=new Rc(Rn),this.index[fr]=Tn,pt.setNode(fr,Tn)}const wn={name:Xr,type:T.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:m.UNSPECIFIED,inbound:Ne,attr:{}};fn=new Rc(wn),this.index[Xr]=fn,pt.setNode(Xr,fn),pt.setParent(Xr,fr),Tn.node.cardinality++}const tn=new Ct(oe);tn.adjoiningMetaEdge=hr,Ne?pt.setEdge(Xr,rr,tn):pt.setEdge(rr,Xr,tn)})}getOrCreateRenderNodeByName(L){if(!L)return null;if(L in this.index)return this.index[L];const j=this.getNodeByName(L);return j?(this.index[L]=j.isGroupNode?new ce(j,this.hierarchy.graphOptions):new Rc(j),this.index[L]):null}getRenderNodeByName(L){return this.index[L]}getNodeByName(L){return this.hierarchy.node(L)}}class Rc{constructor(L){this.node=L,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=L.width||0,this.height=L.height||0,this.displayName=L.name,this.attr=L.attr}}class Ct{constructor(L){this.metaEdge=L,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ce extends Rc{constructor(L,j){super(L);const tt=L.metaGraph.graph();j.compound=!0,this.coreGraph=Ru(tt.name,y.CORE,j)}}function ze(d,L){d.node.isGroupNode&&function(j,tt){const lt=z(tt);j.coreGraph.nodes().map(pt=>j.coreGraph.node(pt)).forEach(pt=>{var St,Ot,Ut,qt,fe,oe;const{height:Ne,width:rr}=pt;switch(pt.node.type){case T.NODE:Object.assign(pt,lt.nodeSize.node),pt.height=Ne||lt.nodeSize.node.height,pt.width=rr||lt.nodeSize.node.width;break;case T.BRIDGE:Object.assign(pt,lt.nodeSize.bridge);break;case T.META:pt.expanded?ze(pt,tt):(Object.assign(pt,lt.nodeSize.meta),pt.height=lt.nodeSize.meta.height,pt.width=lt.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+pt.node.type)}if(!pt.expanded){const Pr=pt.attr;(function(ur,hr=!1){if(ur.coreBox.width=ur.width,ur.coreBox.height=ur.height,!hr){const fr=`${ur.displayName}`.length,Xr=3;ur.width=Math.max(ur.coreBox.width,fr*Xr)}})(pt,tt&&(pt.node.type===0&&!!(!((Ot=(St=tt==null?void 0:tt.nodeSize)===null||St===void 0?void 0:St.meta)===null||Ot===void 0)&&Ot.width)||pt.node.type===1&&(!!(!((qt=(Ut=tt==null?void 0:tt.nodeSize)===null||Ut===void 0?void 0:Ut.node)===null||qt===void 0)&&qt.width)||!!Pr.width)||pt.node.type===2&&!!(!((oe=(fe=tt==null?void 0:tt.nodeSize)===null||fe===void 0?void 0:fe.bridge)===null||oe===void 0)&&oe.width)))}})}(d,L),d.node.type===T.META&&function(j,tt){const lt=z(tt),pt=lt.subScene.meta;Object.assign(j,pt);const{nodeSep:St,rankSep:Ot,edgeSep:Ut,align:qt}=lt.graph.meta,fe={nodesep:St,ranksep:Ot,edgesep:Ut,align:qt};Object.assign(j.coreBox,function(rr,Pr){const{ranksep:ur,nodesep:hr,edgesep:fr,align:Xr}=Pr;Object.assign(rr.graph(),{ranksep:ur,nodesep:hr,edgesep:fr,align:Xr});const fn=[];if(rr.nodes().forEach(Kn=>{rr.node(Kn).node.type!==T.BRIDGE&&fn.push(Kn)}),!fn.length)return{width:0,height:0};yh(rr);let tn=1/0,Tn=1/0,wn=-1/0,Rn=-1/0;return fn.forEach(Kn=>{const Fn=rr.node(Kn),Vi=.5*Fn.width,Qn=Fn.x-Vi,oa=Fn.x+Vi;tn=Qn<tn?Qn:tn,wn=oa>wn?oa:wn;const Di=.5*Fn.height,ui=Fn.y-Di,Qi=Fn.y+Di;Tn=ui<Tn?ui:Tn,Rn=Qi>Rn?Qi:Rn}),rr.edges().forEach(Kn=>{const Fn=rr.edge(Kn),Vi=rr.node(Fn.metaEdge.v),Qn=rr.node(Fn.metaEdge.w);if(Fn.points.length===3&&function(ui){let Qi=wr(ui[0],ui[1]);for(let sa=1;sa<ui.length-1;sa++){const _a=wr(ui[sa],ui[sa+1]);if(Math.abs(_a-Qi)>1)return!1;Qi=_a}return!0}(Fn.points)){if(Vi!=null){const ui=Vi.expanded?Vi.x:Rr(Vi);Fn.points[0].x=ui}if(Qn!=null){const ui=Qn.expanded?Qn.x:Rr(Qn);Fn.points[2].x=ui}Fn.points=[Fn.points[0],Fn.points[1]]}const oa=Fn.points[Fn.points.length-2];Qn!=null&&(Fn.points[Fn.points.length-1]=br(oa,Qn));const Di=Fn.points[1];Vi!=null&&(Fn.points[0]=br(Di,Vi)),Fn.points.forEach(ui=>{tn=ui.x<tn?ui.x:tn,wn=ui.x>wn?ui.x:wn,Tn=ui.y<Tn?ui.y:Tn,Rn=ui.y>Rn?ui.y:Rn})}),rr.nodes().forEach(Kn=>{const Fn=rr.node(Kn);Fn.x-=tn,Fn.y-=Tn}),rr.edges().forEach(Kn=>{rr.edge(Kn).points.forEach(Fn=>{Fn.x-=tn,Fn.y-=Tn})}),{width:wn-tn,height:Rn-Tn}}(j.coreGraph,fe));let oe=0;j.coreGraph.nodeCount()>0&&oe++;const Ne=oe<=1?0:oe;j.coreBox.width+=Ne+Ne,j.coreBox.height=pt.labelHeight+j.coreBox.height,j.width=j.coreBox.width+pt.paddingLeft+pt.paddingRight,j.height=j.paddingTop+j.coreBox.height+j.paddingBottom}(d,L)}function wr(d,L){const j=L.x-d.x,tt=L.y-d.y;return 180*Math.atan(tt/j)/Math.PI}function Rr(d){return d.expanded?d.x:d.x-d.width/2+0+d.coreBox.width/2}function br(d,L){const j=L.expanded?L.x:Rr(L),tt=L.y,lt=d.x-j,pt=d.y-tt;let St,Ot,Ut=L.expanded?L.width:L.coreBox.width,qt=L.expanded?L.height:L.coreBox.height;return Math.abs(pt)*Ut/2>Math.abs(lt)*qt/2?(pt<0&&(qt=-qt),St=pt===0?0:qt/2*lt/pt,Ot=qt/2):(lt<0&&(Ut=-Ut),St=Ut/2,Ot=lt===0?0:Ut/2*pt/lt),{x:j+St,y:tt+Ot}}function Ar(d,L,j){var tt,lt,pt,St;const Ot=d.nodes.filter((oe,Ne,rr)=>rr.findIndex(Pr=>Pr.id===oe.id)!==Ne).map(oe=>oe.id);if(Ot.length)throw new Error(`Duplicated ids found: ${Ot.join(", ")}`);const Ut=function(oe){const Ne={nodes:[]},rr=oe.compound,Pr=Object.keys(rr||{}),ur=new Map,hr=(Xr,fn=[])=>{if(ur.has(Xr))return ur.get(Xr);for(let tn=0;tn<Pr.length;tn++){let Tn=Pr[tn];if(rr&&rr[Tn].indexOf(Xr)!==-1)return fn.unshift(Tn),hr(Tn,fn)}return fn.length===0&&ur.set(Xr,fn),fn},fr=Xr=>oe.edges.filter(fn=>fn.w===Xr).map(fn=>({name:fn.v}));return oe.nodes.forEach(Xr=>{const fn=Xr.id,tn=[...hr(fn),fn];let Tn=fr(fn);Ne.nodes.push({name:fn,path:tn,inputs:Tn,width:Xr.width,height:Xr.height,attr:Object.assign({},Xr)})}),Ne}(d),qt=function(oe,Ne){const rr=(ur,hr)=>{for(let fr of hr.values())if(fr.includes(ur))return!0;return!1},Pr=(ur,hr=[])=>{if(Object.keys(ur).length===0)return[...new Set(hr)];const fr=new Map(Object.keys(ur).map(fn=>[fn,ur[fn]])),Xr={};for(let[fn,tn]of fr)rr(fn,fr)?Xr[fn]=tn:hr=hr.concat(fn,tn);return Pr(Xr,hr)};return Pr(oe).filter(ur=>Ne.includes(ur))}(d.compound||{},(L==null?void 0:L.expanded)||[]),fe=function(oe,Ne){return function(rr){return new Xs(rr)}(io(Tl(oe),Ne))}(Ut,{rankDirection:((lt=(tt=j==null?void 0:j.graph)===null||tt===void 0?void 0:tt.meta)===null||lt===void 0?void 0:lt.rankDir)||(L==null?void 0:L.rankDirection)||x.graph.meta.rankDir,align:((St=(pt=j==null?void 0:j.graph)===null||pt===void 0?void 0:pt.meta)===null||St===void 0?void 0:St.align)||x.graph.meta.align});return function(oe,Ne){Ne.forEach(rr=>{const Pr=oe.getRenderInfoNodes().find(fr=>fr.displayName===rr);let ur=Pr&&Pr.node&&Pr.node.name||"";const hr=oe.getRenderNodeByName(ur);if(!hr)throw new Error(`No nodes found: ${ur}`);hr.expanded=!0,oe.buildSubHierarchy(ur)})}(fe,qt),ze(fe.root,j),Kr(fe.root)}function jr(d,L=!1){const j=JSON.parse(JSON.stringify(d)),tt={nodes:[j],edges:[...j.edges]};return j.nodes.forEach(function lt(pt){(pt.type===0||pt.type===1)&&tt.nodes.push(pt),pt.type===0&&(tt.edges=tt.edges.concat(pt.edges)),Array.isArray(pt.nodes)&&pt.nodes.forEach(lt)}),L&&tt.nodes.forEach(lt=>{const pt=tt.nodes.find(St=>St.id===lt.parentNodeName);if(pt){const St=pt.x-pt.width/2+pt.paddingLeft,Ot=pt.y-pt.height/2+pt.labelHeight+pt.paddingTop;pt.id!==E&&(lt.x+=St,lt.y+=Ot),lt.type===0&&lt.edges.forEach(Ut=>{Ut.points.forEach(qt=>{qt.x+=lt.x-lt.width/2+lt.paddingLeft,qt.y+=lt.y-lt.height/2+lt.labelHeight+lt.paddingTop})})}}),tt}function Hr(d,L,j,tt){var lt,pt;let St=[];const Ot=((lt=j.find(oe=>oe.id===d))===null||lt===void 0?void 0:lt.path)||[],Ut=((pt=j.find(oe=>oe.id===L))===null||pt===void 0?void 0:pt.path)||[],qt=[E,...Ot].slice(0,Ot.length).reverse(),fe=[E,...Ut].slice(0,Ut.length);return qt.forEach(oe=>{const Ne=j.find(rr=>rr.id===oe);St=St.concat(Ne.edges.filter(rr=>rr.baseEdgeList.some(Pr=>Pr.v===((tt==null?void 0:tt.v)||d)&&Pr.w===((tt==null?void 0:tt.w)||L))))}),fe.filter(oe=>!qt.includes(oe)).forEach(oe=>{const Ne=j.find(rr=>rr.id===oe);St=St.concat(Ne.edges.filter(rr=>rr.baseEdgeList.some(Pr=>Pr.v===((tt==null?void 0:tt.v)||d)&&Pr.w===((tt==null?void 0:tt.w)||L))))}),St}function Kr(d){const L=d.coreGraph.nodes().map(tt=>d.coreGraph.node(tt));return Object.assign(Object.assign({},Vr(d)),{expanded:d.expanded,nodes:d.expanded?(j=L,j.map(tt=>tt.node.type===T.META?Kr(tt):Vr(tt))):[],edges:d.expanded?Qr(d):[]});var j}function Vr(d){return{id:d.node.name,name:d.node.name,type:d.node.type,cardinality:d.node.cardinality,attr:d.attr,parentNodeName:d.node.parentNode?d.node.parentNode.name:null,coreBox:Object.assign({},d.coreBox),x:d.x,y:d.y,width:d.width,height:d.height,radius:d.radius,labelHeight:d.labelHeight,labelOffset:d.labelOffset,outboxWidth:d.outboxWidth,paddingLeft:d.paddingLeft,paddingTop:d.paddingTop,paddingRight:d.paddingRight,paddingBottom:d.paddingBottom,path:d.node.path}}function Qr(d){return d.coreGraph.edges().map(L=>({renderInfoEdge:d.coreGraph.edge(L),edge:L})).filter(({renderInfoEdge:L})=>L.metaEdge).map(({edge:L,renderInfoEdge:j})=>{const tt=function(lt,pt){const St=pt.points.map(Ot=>Object.assign({},Ot));if(pt.adjoiningMetaEdge){const Ot=pt.adjoiningMetaEdge.points,Ut=pt.metaEdge.inbound,qt=Ut?Ot[Ot.length-1]:Ot[0],fe=St[Ut?0:St.length-1],oe=lt.x-lt.width/2,Ne=lt.y-lt.height/2,rr=qt.x-oe,Pr=qt.y-Ne,ur=-lt.paddingLeft,hr=-(lt.paddingTop+lt.labelHeight);fe.x=rr+ur,fe.y=Pr+hr}return St}(d,j);return{adjoiningEdge:j.adjoiningMetaEdge?{w:j.adjoiningMetaEdge.metaEdge.w,v:j.adjoiningMetaEdge.metaEdge.v}:null,inbound:j.metaEdge.inbound,w:L.w,v:L.v,points:tt,weight:j.weight,baseEdgeList:j.metaEdge.baseEdgeList,parentNodeName:d.node.name}})}},47897:function(ae,w,S){"use strict";S.r(w),S.d(w,{ARRAY_TYPE:function(){return z},EPSILON:function(){return x},RANDOM:function(){return k},equals:function(){return m},setMatrixArrayType:function(){return E},toRadian:function(){return T}});var x=1e-6,z=typeof Float32Array!="undefined"?Float32Array:Array,k=Math.random;function E(y){z=y}var N=Math.PI/180;function T(y){return y*N}function m(y,v){return Math.abs(y-v)<=x*Math.max(1,Math.abs(y),Math.abs(v))}Math.hypot||(Math.hypot=function(){for(var y=0,v=arguments.length;v--;)y+=arguments[v]*arguments[v];return Math.sqrt(y)})},21574:function(ae,w,S){"use strict";S.r(w),S.d(w,{glMatrix:function(){return E},mat2:function(){return x},mat2d:function(){return z},mat3:function(){return ft},mat4:function(){return ie},quat:function(){return ge},quat2:function(){return k},vec2:function(){return Kt},vec3:function(){return Yt},vec4:function(){return he}});var x={};S.r(x),S.d(x,{LDU:function(){return U},add:function(){return et},adjoint:function(){return _},clone:function(){return T},copy:function(){return m},create:function(){return N},determinant:function(){return C},equals:function(){return nt},exactEquals:function(){return J},frob:function(){return W},fromRotation:function(){return K},fromScaling:function(){return Z},fromValues:function(){return v},identity:function(){return y},invert:function(){return I},mul:function(){return vt},multiply:function(){return O},multiplyScalar:function(){return mt},multiplyScalarAndAdd:function(){return Mt},rotate:function(){return b},scale:function(){return l},set:function(){return p},str:function(){return X},sub:function(){return zt},subtract:function(){return at},transpose:function(){return g}});var z={};S.r(z),S.d(z,{add:function(){return Zt},clone:function(){return Rt},copy:function(){return At},create:function(){return re},determinant:function(){return It},equals:function(){return D},exactEquals:function(){return wt},frob:function(){return Tt},fromRotation:function(){return Pt},fromScaling:function(){return _t},fromTranslation:function(){return jt},fromValues:function(){return gt},identity:function(){return Q},invert:function(){return Ht},mul:function(){return rt},multiply:function(){return de},multiplyScalar:function(){return dt},multiplyScalarAndAdd:function(){return bt},rotate:function(){return De},scale:function(){return Ye},set:function(){return Vt},str:function(){return Qt},sub:function(){return Nt},subtract:function(){return Ee},translate:function(){return kt}});var k={};S.r(k),S.d(k,{add:function(){return Pe},clone:function(){return Re},conjugate:function(){return Si},copy:function(){return vr},create:function(){return Ge},dot:function(){return zn},equals:function(){return Bt},exactEquals:function(){return st},fromMat4:function(){return Be},fromRotation:function(){return je},fromRotationTranslation:function(){return le},fromRotationTranslationValues:function(){return Ve},fromTranslation:function(){return Le},fromValues:function(){return qe},getDual:function(){return Cr},getReal:function(){return yr},getTranslation:function(){return un},identity:function(){return or},invert:function(){return hi},len:function(){return Dt},length:function(){return pi},lerp:function(){return Hn},mul:function(){return Gn},multiply:function(){return Cn},normalize:function(){return G},rotateAroundAxis:function(){return Bn},rotateByQuatAppend:function(){return ln},rotateByQuatPrepend:function(){return pn},rotateX:function(){return Un},rotateY:function(){return nn},rotateZ:function(){return vn},scale:function(){return bi},set:function(){return Ae},setDual:function(){return Mr},setReal:function(){return zr},sqrLen:function(){return H},squaredLength:function(){return Lt},str:function(){return F},translate:function(){return hn}});var E=S(47897);function N(){var ot=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(ot[1]=0,ot[2]=0),ot[0]=1,ot[3]=1,ot}function T(ot){var yt=new E.ARRAY_TYPE(4);return yt[0]=ot[0],yt[1]=ot[1],yt[2]=ot[2],yt[3]=ot[3],yt}function m(ot,yt){return ot[0]=yt[0],ot[1]=yt[1],ot[2]=yt[2],ot[3]=yt[3],ot}function y(ot){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=1,ot}function v(ot,yt,te,Me){var Se=new E.ARRAY_TYPE(4);return Se[0]=ot,Se[1]=yt,Se[2]=te,Se[3]=Me,Se}function p(ot,yt,te,Me,Se){return ot[0]=yt,ot[1]=te,ot[2]=Me,ot[3]=Se,ot}function g(ot,yt){if(ot===yt){var te=yt[1];ot[1]=yt[2],ot[2]=te}else ot[0]=yt[0],ot[1]=yt[2],ot[2]=yt[1],ot[3]=yt[3];return ot}function I(ot,yt){var te=yt[0],Me=yt[1],Se=yt[2],er=yt[3],sr=te*er-Se*Me;return sr?(sr=1/sr,ot[0]=er*sr,ot[1]=-Me*sr,ot[2]=-Se*sr,ot[3]=te*sr,ot):null}function _(ot,yt){var te=yt[0];return ot[0]=yt[3],ot[1]=-yt[1],ot[2]=-yt[2],ot[3]=te,ot}function C(ot){return ot[0]*ot[3]-ot[2]*ot[1]}function O(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=te[0],Fe=te[1],tr=te[2],Sr=te[3];return ot[0]=Me*ye+er*Fe,ot[1]=Se*ye+sr*Fe,ot[2]=Me*tr+er*Sr,ot[3]=Se*tr+sr*Sr,ot}function b(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=Math.sin(te),Fe=Math.cos(te);return ot[0]=Me*Fe+er*ye,ot[1]=Se*Fe+sr*ye,ot[2]=Me*-ye+er*Fe,ot[3]=Se*-ye+sr*Fe,ot}function l(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=te[0],Fe=te[1];return ot[0]=Me*ye,ot[1]=Se*ye,ot[2]=er*Fe,ot[3]=sr*Fe,ot}function K(ot,yt){var te=Math.sin(yt),Me=Math.cos(yt);return ot[0]=Me,ot[1]=te,ot[2]=-te,ot[3]=Me,ot}function Z(ot,yt){return ot[0]=yt[0],ot[1]=0,ot[2]=0,ot[3]=yt[1],ot}function X(ot){return"mat2("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+")"}function W(ot){return Math.hypot(ot[0],ot[1],ot[2],ot[3])}function U(ot,yt,te,Me){return ot[2]=Me[2]/Me[0],te[0]=Me[0],te[1]=Me[1],te[3]=Me[3]-ot[2]*te[1],[ot,yt,te]}function et(ot,yt,te){return ot[0]=yt[0]+te[0],ot[1]=yt[1]+te[1],ot[2]=yt[2]+te[2],ot[3]=yt[3]+te[3],ot}function at(ot,yt,te){return ot[0]=yt[0]-te[0],ot[1]=yt[1]-te[1],ot[2]=yt[2]-te[2],ot[3]=yt[3]-te[3],ot}function J(ot,yt){return ot[0]===yt[0]&&ot[1]===yt[1]&&ot[2]===yt[2]&&ot[3]===yt[3]}function nt(ot,yt){var te=ot[0],Me=ot[1],Se=ot[2],er=ot[3],sr=yt[0],ye=yt[1],Fe=yt[2],tr=yt[3];return Math.abs(te-sr)<=E.EPSILON*Math.max(1,Math.abs(te),Math.abs(sr))&&Math.abs(Me-ye)<=E.EPSILON*Math.max(1,Math.abs(Me),Math.abs(ye))&&Math.abs(Se-Fe)<=E.EPSILON*Math.max(1,Math.abs(Se),Math.abs(Fe))&&Math.abs(er-tr)<=E.EPSILON*Math.max(1,Math.abs(er),Math.abs(tr))}function mt(ot,yt,te){return ot[0]=yt[0]*te,ot[1]=yt[1]*te,ot[2]=yt[2]*te,ot[3]=yt[3]*te,ot}function Mt(ot,yt,te,Me){return ot[0]=yt[0]+te[0]*Me,ot[1]=yt[1]+te[1]*Me,ot[2]=yt[2]+te[2]*Me,ot[3]=yt[3]+te[3]*Me,ot}var vt=O,zt=at;function re(){var ot=new E.ARRAY_TYPE(6);return E.ARRAY_TYPE!=Float32Array&&(ot[1]=0,ot[2]=0,ot[4]=0,ot[5]=0),ot[0]=1,ot[3]=1,ot}function Rt(ot){var yt=new E.ARRAY_TYPE(6);return yt[0]=ot[0],yt[1]=ot[1],yt[2]=ot[2],yt[3]=ot[3],yt[4]=ot[4],yt[5]=ot[5],yt}function At(ot,yt){return ot[0]=yt[0],ot[1]=yt[1],ot[2]=yt[2],ot[3]=yt[3],ot[4]=yt[4],ot[5]=yt[5],ot}function Q(ot){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=0,ot[5]=0,ot}function gt(ot,yt,te,Me,Se,er){var sr=new E.ARRAY_TYPE(6);return sr[0]=ot,sr[1]=yt,sr[2]=te,sr[3]=Me,sr[4]=Se,sr[5]=er,sr}function Vt(ot,yt,te,Me,Se,er,sr){return ot[0]=yt,ot[1]=te,ot[2]=Me,ot[3]=Se,ot[4]=er,ot[5]=sr,ot}function Ht(ot,yt){var te=yt[0],Me=yt[1],Se=yt[2],er=yt[3],sr=yt[4],ye=yt[5],Fe=te*er-Me*Se;return Fe?(Fe=1/Fe,ot[0]=er*Fe,ot[1]=-Me*Fe,ot[2]=-Se*Fe,ot[3]=te*Fe,ot[4]=(Se*ye-er*sr)*Fe,ot[5]=(Me*sr-te*ye)*Fe,ot):null}function It(ot){return ot[0]*ot[3]-ot[1]*ot[2]}function de(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=yt[4],Fe=yt[5],tr=te[0],Sr=te[1],Er=te[2],me=te[3],Ft=te[4],ne=te[5];return ot[0]=Me*tr+er*Sr,ot[1]=Se*tr+sr*Sr,ot[2]=Me*Er+er*me,ot[3]=Se*Er+sr*me,ot[4]=Me*Ft+er*ne+ye,ot[5]=Se*Ft+sr*ne+Fe,ot}function De(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=yt[4],Fe=yt[5],tr=Math.sin(te),Sr=Math.cos(te);return ot[0]=Me*Sr+er*tr,ot[1]=Se*Sr+sr*tr,ot[2]=Me*-tr+er*Sr,ot[3]=Se*-tr+sr*Sr,ot[4]=ye,ot[5]=Fe,ot}function Ye(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=yt[4],Fe=yt[5],tr=te[0],Sr=te[1];return ot[0]=Me*tr,ot[1]=Se*tr,ot[2]=er*Sr,ot[3]=sr*Sr,ot[4]=ye,ot[5]=Fe,ot}function kt(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=yt[4],Fe=yt[5],tr=te[0],Sr=te[1];return ot[0]=Me,ot[1]=Se,ot[2]=er,ot[3]=sr,ot[4]=Me*tr+er*Sr+ye,ot[5]=Se*tr+sr*Sr+Fe,ot}function Pt(ot,yt){var te=Math.sin(yt),Me=Math.cos(yt);return ot[0]=Me,ot[1]=te,ot[2]=-te,ot[3]=Me,ot[4]=0,ot[5]=0,ot}function _t(ot,yt){return ot[0]=yt[0],ot[1]=0,ot[2]=0,ot[3]=yt[1],ot[4]=0,ot[5]=0,ot}function jt(ot,yt){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=yt[0],ot[5]=yt[1],ot}function Qt(ot){return"mat2d("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+", "+ot[4]+", "+ot[5]+")"}function Tt(ot){return Math.hypot(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5],1)}function Zt(ot,yt,te){return ot[0]=yt[0]+te[0],ot[1]=yt[1]+te[1],ot[2]=yt[2]+te[2],ot[3]=yt[3]+te[3],ot[4]=yt[4]+te[4],ot[5]=yt[5]+te[5],ot}function Ee(ot,yt,te){return ot[0]=yt[0]-te[0],ot[1]=yt[1]-te[1],ot[2]=yt[2]-te[2],ot[3]=yt[3]-te[3],ot[4]=yt[4]-te[4],ot[5]=yt[5]-te[5],ot}function dt(ot,yt,te){return ot[0]=yt[0]*te,ot[1]=yt[1]*te,ot[2]=yt[2]*te,ot[3]=yt[3]*te,ot[4]=yt[4]*te,ot[5]=yt[5]*te,ot}function bt(ot,yt,te,Me){return ot[0]=yt[0]+te[0]*Me,ot[1]=yt[1]+te[1]*Me,ot[2]=yt[2]+te[2]*Me,ot[3]=yt[3]+te[3]*Me,ot[4]=yt[4]+te[4]*Me,ot[5]=yt[5]+te[5]*Me,ot}function wt(ot,yt){return ot[0]===yt[0]&&ot[1]===yt[1]&&ot[2]===yt[2]&&ot[3]===yt[3]&&ot[4]===yt[4]&&ot[5]===yt[5]}function D(ot,yt){var te=ot[0],Me=ot[1],Se=ot[2],er=ot[3],sr=ot[4],ye=ot[5],Fe=yt[0],tr=yt[1],Sr=yt[2],Er=yt[3],me=yt[4],Ft=yt[5];return Math.abs(te-Fe)<=E.EPSILON*Math.max(1,Math.abs(te),Math.abs(Fe))&&Math.abs(Me-tr)<=E.EPSILON*Math.max(1,Math.abs(Me),Math.abs(tr))&&Math.abs(Se-Sr)<=E.EPSILON*Math.max(1,Math.abs(Se),Math.abs(Sr))&&Math.abs(er-Er)<=E.EPSILON*Math.max(1,Math.abs(er),Math.abs(Er))&&Math.abs(sr-me)<=E.EPSILON*Math.max(1,Math.abs(sr),Math.abs(me))&&Math.abs(ye-Ft)<=E.EPSILON*Math.max(1,Math.abs(ye),Math.abs(Ft))}var rt=de,Nt=Ee,ft=S(65316),ie=S(96518),ge=S(14717);function Ge(){var ot=new E.ARRAY_TYPE(8);return E.ARRAY_TYPE!=Float32Array&&(ot[0]=0,ot[1]=0,ot[2]=0,ot[4]=0,ot[5]=0,ot[6]=0,ot[7]=0),ot[3]=1,ot}function Re(ot){var yt=new E.ARRAY_TYPE(8);return yt[0]=ot[0],yt[1]=ot[1],yt[2]=ot[2],yt[3]=ot[3],yt[4]=ot[4],yt[5]=ot[5],yt[6]=ot[6],yt[7]=ot[7],yt}function qe(ot,yt,te,Me,Se,er,sr,ye){var Fe=new E.ARRAY_TYPE(8);return Fe[0]=ot,Fe[1]=yt,Fe[2]=te,Fe[3]=Me,Fe[4]=Se,Fe[5]=er,Fe[6]=sr,Fe[7]=ye,Fe}function Ve(ot,yt,te,Me,Se,er,sr){var ye=new E.ARRAY_TYPE(8);ye[0]=ot,ye[1]=yt,ye[2]=te,ye[3]=Me;var Fe=Se*.5,tr=er*.5,Sr=sr*.5;return ye[4]=Fe*Me+tr*te-Sr*yt,ye[5]=tr*Me+Sr*ot-Fe*te,ye[6]=Sr*Me+Fe*yt-tr*ot,ye[7]=-Fe*ot-tr*yt-Sr*te,ye}function le(ot,yt,te){var Me=te[0]*.5,Se=te[1]*.5,er=te[2]*.5,sr=yt[0],ye=yt[1],Fe=yt[2],tr=yt[3];return ot[0]=sr,ot[1]=ye,ot[2]=Fe,ot[3]=tr,ot[4]=Me*tr+Se*Fe-er*ye,ot[5]=Se*tr+er*sr-Me*Fe,ot[6]=er*tr+Me*ye-Se*sr,ot[7]=-Me*sr-Se*ye-er*Fe,ot}function Le(ot,yt){return ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=yt[0]*.5,ot[5]=yt[1]*.5,ot[6]=yt[2]*.5,ot[7]=0,ot}function je(ot,yt){return ot[0]=yt[0],ot[1]=yt[1],ot[2]=yt[2],ot[3]=yt[3],ot[4]=0,ot[5]=0,ot[6]=0,ot[7]=0,ot}function Be(ot,yt){var te=ge.create();ie.getRotation(te,yt);var Me=new E.ARRAY_TYPE(3);return ie.getTranslation(Me,yt),le(ot,te,Me),ot}function vr(ot,yt){return ot[0]=yt[0],ot[1]=yt[1],ot[2]=yt[2],ot[3]=yt[3],ot[4]=yt[4],ot[5]=yt[5],ot[6]=yt[6],ot[7]=yt[7],ot}function or(ot){return ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=0,ot[5]=0,ot[6]=0,ot[7]=0,ot}function Ae(ot,yt,te,Me,Se,er,sr,ye,Fe){return ot[0]=yt,ot[1]=te,ot[2]=Me,ot[3]=Se,ot[4]=er,ot[5]=sr,ot[6]=ye,ot[7]=Fe,ot}var yr=ge.copy;function Cr(ot,yt){return ot[0]=yt[4],ot[1]=yt[5],ot[2]=yt[6],ot[3]=yt[7],ot}var zr=ge.copy;function Mr(ot,yt){return ot[4]=yt[0],ot[5]=yt[1],ot[6]=yt[2],ot[7]=yt[3],ot}function un(ot,yt){var te=yt[4],Me=yt[5],Se=yt[6],er=yt[7],sr=-yt[0],ye=-yt[1],Fe=-yt[2],tr=yt[3];return ot[0]=(te*tr+er*sr+Me*Fe-Se*ye)*2,ot[1]=(Me*tr+er*ye+Se*sr-te*Fe)*2,ot[2]=(Se*tr+er*Fe+te*ye-Me*sr)*2,ot}function hn(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=te[0]*.5,Fe=te[1]*.5,tr=te[2]*.5,Sr=yt[4],Er=yt[5],me=yt[6],Ft=yt[7];return ot[0]=Me,ot[1]=Se,ot[2]=er,ot[3]=sr,ot[4]=sr*ye+Se*tr-er*Fe+Sr,ot[5]=sr*Fe+er*ye-Me*tr+Er,ot[6]=sr*tr+Me*Fe-Se*ye+me,ot[7]=-Me*ye-Se*Fe-er*tr+Ft,ot}function Un(ot,yt,te){var Me=-yt[0],Se=-yt[1],er=-yt[2],sr=yt[3],ye=yt[4],Fe=yt[5],tr=yt[6],Sr=yt[7],Er=ye*sr+Sr*Me+Fe*er-tr*Se,me=Fe*sr+Sr*Se+tr*Me-ye*er,Ft=tr*sr+Sr*er+ye*Se-Fe*Me,ne=Sr*sr-ye*Me-Fe*Se-tr*er;return ge.rotateX(ot,yt,te),Me=ot[0],Se=ot[1],er=ot[2],sr=ot[3],ot[4]=Er*sr+ne*Me+me*er-Ft*Se,ot[5]=me*sr+ne*Se+Ft*Me-Er*er,ot[6]=Ft*sr+ne*er+Er*Se-me*Me,ot[7]=ne*sr-Er*Me-me*Se-Ft*er,ot}function nn(ot,yt,te){var Me=-yt[0],Se=-yt[1],er=-yt[2],sr=yt[3],ye=yt[4],Fe=yt[5],tr=yt[6],Sr=yt[7],Er=ye*sr+Sr*Me+Fe*er-tr*Se,me=Fe*sr+Sr*Se+tr*Me-ye*er,Ft=tr*sr+Sr*er+ye*Se-Fe*Me,ne=Sr*sr-ye*Me-Fe*Se-tr*er;return ge.rotateY(ot,yt,te),Me=ot[0],Se=ot[1],er=ot[2],sr=ot[3],ot[4]=Er*sr+ne*Me+me*er-Ft*Se,ot[5]=me*sr+ne*Se+Ft*Me-Er*er,ot[6]=Ft*sr+ne*er+Er*Se-me*Me,ot[7]=ne*sr-Er*Me-me*Se-Ft*er,ot}function vn(ot,yt,te){var Me=-yt[0],Se=-yt[1],er=-yt[2],sr=yt[3],ye=yt[4],Fe=yt[5],tr=yt[6],Sr=yt[7],Er=ye*sr+Sr*Me+Fe*er-tr*Se,me=Fe*sr+Sr*Se+tr*Me-ye*er,Ft=tr*sr+Sr*er+ye*Se-Fe*Me,ne=Sr*sr-ye*Me-Fe*Se-tr*er;return ge.rotateZ(ot,yt,te),Me=ot[0],Se=ot[1],er=ot[2],sr=ot[3],ot[4]=Er*sr+ne*Me+me*er-Ft*Se,ot[5]=me*sr+ne*Se+Ft*Me-Er*er,ot[6]=Ft*sr+ne*er+Er*Se-me*Me,ot[7]=ne*sr-Er*Me-me*Se-Ft*er,ot}function ln(ot,yt,te){var Me=te[0],Se=te[1],er=te[2],sr=te[3],ye=yt[0],Fe=yt[1],tr=yt[2],Sr=yt[3];return ot[0]=ye*sr+Sr*Me+Fe*er-tr*Se,ot[1]=Fe*sr+Sr*Se+tr*Me-ye*er,ot[2]=tr*sr+Sr*er+ye*Se-Fe*Me,ot[3]=Sr*sr-ye*Me-Fe*Se-tr*er,ye=yt[4],Fe=yt[5],tr=yt[6],Sr=yt[7],ot[4]=ye*sr+Sr*Me+Fe*er-tr*Se,ot[5]=Fe*sr+Sr*Se+tr*Me-ye*er,ot[6]=tr*sr+Sr*er+ye*Se-Fe*Me,ot[7]=Sr*sr-ye*Me-Fe*Se-tr*er,ot}function pn(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=te[0],Fe=te[1],tr=te[2],Sr=te[3];return ot[0]=Me*Sr+sr*ye+Se*tr-er*Fe,ot[1]=Se*Sr+sr*Fe+er*ye-Me*tr,ot[2]=er*Sr+sr*tr+Me*Fe-Se*ye,ot[3]=sr*Sr-Me*ye-Se*Fe-er*tr,ye=te[4],Fe=te[5],tr=te[6],Sr=te[7],ot[4]=Me*Sr+sr*ye+Se*tr-er*Fe,ot[5]=Se*Sr+sr*Fe+er*ye-Me*tr,ot[6]=er*Sr+sr*tr+Me*Fe-Se*ye,ot[7]=sr*Sr-Me*ye-Se*Fe-er*tr,ot}function Bn(ot,yt,te,Me){if(Math.abs(Me)<E.EPSILON)return vr(ot,yt);var Se=Math.hypot(te[0],te[1],te[2]);Me=Me*.5;var er=Math.sin(Me),sr=er*te[0]/Se,ye=er*te[1]/Se,Fe=er*te[2]/Se,tr=Math.cos(Me),Sr=yt[0],Er=yt[1],me=yt[2],Ft=yt[3];ot[0]=Sr*tr+Ft*sr+Er*Fe-me*ye,ot[1]=Er*tr+Ft*ye+me*sr-Sr*Fe,ot[2]=me*tr+Ft*Fe+Sr*ye-Er*sr,ot[3]=Ft*tr-Sr*sr-Er*ye-me*Fe;var ne=yt[4],Ie=yt[5],Ce=yt[6],Ue=yt[7];return ot[4]=ne*tr+Ue*sr+Ie*Fe-Ce*ye,ot[5]=Ie*tr+Ue*ye+Ce*sr-ne*Fe,ot[6]=Ce*tr+Ue*Fe+ne*ye-Ie*sr,ot[7]=Ue*tr-ne*sr-Ie*ye-Ce*Fe,ot}function Pe(ot,yt,te){return ot[0]=yt[0]+te[0],ot[1]=yt[1]+te[1],ot[2]=yt[2]+te[2],ot[3]=yt[3]+te[3],ot[4]=yt[4]+te[4],ot[5]=yt[5]+te[5],ot[6]=yt[6]+te[6],ot[7]=yt[7]+te[7],ot}function Cn(ot,yt,te){var Me=yt[0],Se=yt[1],er=yt[2],sr=yt[3],ye=te[4],Fe=te[5],tr=te[6],Sr=te[7],Er=yt[4],me=yt[5],Ft=yt[6],ne=yt[7],Ie=te[0],Ce=te[1],Ue=te[2],Xe=te[3];return ot[0]=Me*Xe+sr*Ie+Se*Ue-er*Ce,ot[1]=Se*Xe+sr*Ce+er*Ie-Me*Ue,ot[2]=er*Xe+sr*Ue+Me*Ce-Se*Ie,ot[3]=sr*Xe-Me*Ie-Se*Ce-er*Ue,ot[4]=Me*Sr+sr*ye+Se*tr-er*Fe+Er*Xe+ne*Ie+me*Ue-Ft*Ce,ot[5]=Se*Sr+sr*Fe+er*ye-Me*tr+me*Xe+ne*Ce+Ft*Ie-Er*Ue,ot[6]=er*Sr+sr*tr+Me*Fe-Se*ye+Ft*Xe+ne*Ue+Er*Ce-me*Ie,ot[7]=sr*Sr-Me*ye-Se*Fe-er*tr+ne*Xe-Er*Ie-me*Ce-Ft*Ue,ot}var Gn=Cn;function bi(ot,yt,te){return ot[0]=yt[0]*te,ot[1]=yt[1]*te,ot[2]=yt[2]*te,ot[3]=yt[3]*te,ot[4]=yt[4]*te,ot[5]=yt[5]*te,ot[6]=yt[6]*te,ot[7]=yt[7]*te,ot}var zn=ge.dot;function Hn(ot,yt,te,Me){var Se=1-Me;return zn(yt,te)<0&&(Me=-Me),ot[0]=yt[0]*Se+te[0]*Me,ot[1]=yt[1]*Se+te[1]*Me,ot[2]=yt[2]*Se+te[2]*Me,ot[3]=yt[3]*Se+te[3]*Me,ot[4]=yt[4]*Se+te[4]*Me,ot[5]=yt[5]*Se+te[5]*Me,ot[6]=yt[6]*Se+te[6]*Me,ot[7]=yt[7]*Se+te[7]*Me,ot}function hi(ot,yt){var te=Lt(yt);return ot[0]=-yt[0]/te,ot[1]=-yt[1]/te,ot[2]=-yt[2]/te,ot[3]=yt[3]/te,ot[4]=-yt[4]/te,ot[5]=-yt[5]/te,ot[6]=-yt[6]/te,ot[7]=yt[7]/te,ot}function Si(ot,yt){return ot[0]=-yt[0],ot[1]=-yt[1],ot[2]=-yt[2],ot[3]=yt[3],ot[4]=-yt[4],ot[5]=-yt[5],ot[6]=-yt[6],ot[7]=yt[7],ot}var pi=ge.length,Dt=pi,Lt=ge.squaredLength,H=Lt;function G(ot,yt){var te=Lt(yt);if(te>0){te=Math.sqrt(te);var Me=yt[0]/te,Se=yt[1]/te,er=yt[2]/te,sr=yt[3]/te,ye=yt[4],Fe=yt[5],tr=yt[6],Sr=yt[7],Er=Me*ye+Se*Fe+er*tr+sr*Sr;ot[0]=Me,ot[1]=Se,ot[2]=er,ot[3]=sr,ot[4]=(ye-Me*Er)/te,ot[5]=(Fe-Se*Er)/te,ot[6]=(tr-er*Er)/te,ot[7]=(Sr-sr*Er)/te}return ot}function F(ot){return"quat2("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+", "+ot[4]+", "+ot[5]+", "+ot[6]+", "+ot[7]+")"}function st(ot,yt){return ot[0]===yt[0]&&ot[1]===yt[1]&&ot[2]===yt[2]&&ot[3]===yt[3]&&ot[4]===yt[4]&&ot[5]===yt[5]&&ot[6]===yt[6]&&ot[7]===yt[7]}function Bt(ot,yt){var te=ot[0],Me=ot[1],Se=ot[2],er=ot[3],sr=ot[4],ye=ot[5],Fe=ot[6],tr=ot[7],Sr=yt[0],Er=yt[1],me=yt[2],Ft=yt[3],ne=yt[4],Ie=yt[5],Ce=yt[6],Ue=yt[7];return Math.abs(te-Sr)<=E.EPSILON*Math.max(1,Math.abs(te),Math.abs(Sr))&&Math.abs(Me-Er)<=E.EPSILON*Math.max(1,Math.abs(Me),Math.abs(Er))&&Math.abs(Se-me)<=E.EPSILON*Math.max(1,Math.abs(Se),Math.abs(me))&&Math.abs(er-Ft)<=E.EPSILON*Math.max(1,Math.abs(er),Math.abs(Ft))&&Math.abs(sr-ne)<=E.EPSILON*Math.max(1,Math.abs(sr),Math.abs(ne))&&Math.abs(ye-Ie)<=E.EPSILON*Math.max(1,Math.abs(ye),Math.abs(Ie))&&Math.abs(Fe-Ce)<=E.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(Ce))&&Math.abs(tr-Ue)<=E.EPSILON*Math.max(1,Math.abs(tr),Math.abs(Ue))}var Kt=S(20663),Yt=S(91606),he=S(59196)},65316:function(ae,w,S){"use strict";S.r(w),S.d(w,{add:function(){return nt},adjoint:function(){return g},clone:function(){return E},copy:function(){return N},create:function(){return z},determinant:function(){return I},equals:function(){return re},exactEquals:function(){return zt},frob:function(){return J},fromMat2d:function(){return X},fromMat4:function(){return k},fromQuat:function(){return W},fromRotation:function(){return K},fromScaling:function(){return Z},fromTranslation:function(){return l},fromValues:function(){return T},identity:function(){return y},invert:function(){return p},mul:function(){return Rt},multiply:function(){return _},multiplyScalar:function(){return Mt},multiplyScalarAndAdd:function(){return vt},normalFromMat4:function(){return U},projection:function(){return et},rotate:function(){return O},scale:function(){return b},set:function(){return m},str:function(){return at},sub:function(){return At},subtract:function(){return mt},translate:function(){return C},transpose:function(){return v}});var x=S(47897);function z(){var Q=new x.ARRAY_TYPE(9);return x.ARRAY_TYPE!=Float32Array&&(Q[1]=0,Q[2]=0,Q[3]=0,Q[5]=0,Q[6]=0,Q[7]=0),Q[0]=1,Q[4]=1,Q[8]=1,Q}function k(Q,gt){return Q[0]=gt[0],Q[1]=gt[1],Q[2]=gt[2],Q[3]=gt[4],Q[4]=gt[5],Q[5]=gt[6],Q[6]=gt[8],Q[7]=gt[9],Q[8]=gt[10],Q}function E(Q){var gt=new x.ARRAY_TYPE(9);return gt[0]=Q[0],gt[1]=Q[1],gt[2]=Q[2],gt[3]=Q[3],gt[4]=Q[4],gt[5]=Q[5],gt[6]=Q[6],gt[7]=Q[7],gt[8]=Q[8],gt}function N(Q,gt){return Q[0]=gt[0],Q[1]=gt[1],Q[2]=gt[2],Q[3]=gt[3],Q[4]=gt[4],Q[5]=gt[5],Q[6]=gt[6],Q[7]=gt[7],Q[8]=gt[8],Q}function T(Q,gt,Vt,Ht,It,de,De,Ye,kt){var Pt=new x.ARRAY_TYPE(9);return Pt[0]=Q,Pt[1]=gt,Pt[2]=Vt,Pt[3]=Ht,Pt[4]=It,Pt[5]=de,Pt[6]=De,Pt[7]=Ye,Pt[8]=kt,Pt}function m(Q,gt,Vt,Ht,It,de,De,Ye,kt,Pt){return Q[0]=gt,Q[1]=Vt,Q[2]=Ht,Q[3]=It,Q[4]=de,Q[5]=De,Q[6]=Ye,Q[7]=kt,Q[8]=Pt,Q}function y(Q){return Q[0]=1,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=1,Q[5]=0,Q[6]=0,Q[7]=0,Q[8]=1,Q}function v(Q,gt){if(Q===gt){var Vt=gt[1],Ht=gt[2],It=gt[5];Q[1]=gt[3],Q[2]=gt[6],Q[3]=Vt,Q[5]=gt[7],Q[6]=Ht,Q[7]=It}else Q[0]=gt[0],Q[1]=gt[3],Q[2]=gt[6],Q[3]=gt[1],Q[4]=gt[4],Q[5]=gt[7],Q[6]=gt[2],Q[7]=gt[5],Q[8]=gt[8];return Q}function p(Q,gt){var Vt=gt[0],Ht=gt[1],It=gt[2],de=gt[3],De=gt[4],Ye=gt[5],kt=gt[6],Pt=gt[7],_t=gt[8],jt=_t*De-Ye*Pt,Qt=-_t*de+Ye*kt,Tt=Pt*de-De*kt,Zt=Vt*jt+Ht*Qt+It*Tt;return Zt?(Zt=1/Zt,Q[0]=jt*Zt,Q[1]=(-_t*Ht+It*Pt)*Zt,Q[2]=(Ye*Ht-It*De)*Zt,Q[3]=Qt*Zt,Q[4]=(_t*Vt-It*kt)*Zt,Q[5]=(-Ye*Vt+It*de)*Zt,Q[6]=Tt*Zt,Q[7]=(-Pt*Vt+Ht*kt)*Zt,Q[8]=(De*Vt-Ht*de)*Zt,Q):null}function g(Q,gt){var Vt=gt[0],Ht=gt[1],It=gt[2],de=gt[3],De=gt[4],Ye=gt[5],kt=gt[6],Pt=gt[7],_t=gt[8];return Q[0]=De*_t-Ye*Pt,Q[1]=It*Pt-Ht*_t,Q[2]=Ht*Ye-It*De,Q[3]=Ye*kt-de*_t,Q[4]=Vt*_t-It*kt,Q[5]=It*de-Vt*Ye,Q[6]=de*Pt-De*kt,Q[7]=Ht*kt-Vt*Pt,Q[8]=Vt*De-Ht*de,Q}function I(Q){var gt=Q[0],Vt=Q[1],Ht=Q[2],It=Q[3],de=Q[4],De=Q[5],Ye=Q[6],kt=Q[7],Pt=Q[8];return gt*(Pt*de-De*kt)+Vt*(-Pt*It+De*Ye)+Ht*(kt*It-de*Ye)}function _(Q,gt,Vt){var Ht=gt[0],It=gt[1],de=gt[2],De=gt[3],Ye=gt[4],kt=gt[5],Pt=gt[6],_t=gt[7],jt=gt[8],Qt=Vt[0],Tt=Vt[1],Zt=Vt[2],Ee=Vt[3],dt=Vt[4],bt=Vt[5],wt=Vt[6],D=Vt[7],rt=Vt[8];return Q[0]=Qt*Ht+Tt*De+Zt*Pt,Q[1]=Qt*It+Tt*Ye+Zt*_t,Q[2]=Qt*de+Tt*kt+Zt*jt,Q[3]=Ee*Ht+dt*De+bt*Pt,Q[4]=Ee*It+dt*Ye+bt*_t,Q[5]=Ee*de+dt*kt+bt*jt,Q[6]=wt*Ht+D*De+rt*Pt,Q[7]=wt*It+D*Ye+rt*_t,Q[8]=wt*de+D*kt+rt*jt,Q}function C(Q,gt,Vt){var Ht=gt[0],It=gt[1],de=gt[2],De=gt[3],Ye=gt[4],kt=gt[5],Pt=gt[6],_t=gt[7],jt=gt[8],Qt=Vt[0],Tt=Vt[1];return Q[0]=Ht,Q[1]=It,Q[2]=de,Q[3]=De,Q[4]=Ye,Q[5]=kt,Q[6]=Qt*Ht+Tt*De+Pt,Q[7]=Qt*It+Tt*Ye+_t,Q[8]=Qt*de+Tt*kt+jt,Q}function O(Q,gt,Vt){var Ht=gt[0],It=gt[1],de=gt[2],De=gt[3],Ye=gt[4],kt=gt[5],Pt=gt[6],_t=gt[7],jt=gt[8],Qt=Math.sin(Vt),Tt=Math.cos(Vt);return Q[0]=Tt*Ht+Qt*De,Q[1]=Tt*It+Qt*Ye,Q[2]=Tt*de+Qt*kt,Q[3]=Tt*De-Qt*Ht,Q[4]=Tt*Ye-Qt*It,Q[5]=Tt*kt-Qt*de,Q[6]=Pt,Q[7]=_t,Q[8]=jt,Q}function b(Q,gt,Vt){var Ht=Vt[0],It=Vt[1];return Q[0]=Ht*gt[0],Q[1]=Ht*gt[1],Q[2]=Ht*gt[2],Q[3]=It*gt[3],Q[4]=It*gt[4],Q[5]=It*gt[5],Q[6]=gt[6],Q[7]=gt[7],Q[8]=gt[8],Q}function l(Q,gt){return Q[0]=1,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=1,Q[5]=0,Q[6]=gt[0],Q[7]=gt[1],Q[8]=1,Q}function K(Q,gt){var Vt=Math.sin(gt),Ht=Math.cos(gt);return Q[0]=Ht,Q[1]=Vt,Q[2]=0,Q[3]=-Vt,Q[4]=Ht,Q[5]=0,Q[6]=0,Q[7]=0,Q[8]=1,Q}function Z(Q,gt){return Q[0]=gt[0],Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=gt[1],Q[5]=0,Q[6]=0,Q[7]=0,Q[8]=1,Q}function X(Q,gt){return Q[0]=gt[0],Q[1]=gt[1],Q[2]=0,Q[3]=gt[2],Q[4]=gt[3],Q[5]=0,Q[6]=gt[4],Q[7]=gt[5],Q[8]=1,Q}function W(Q,gt){var Vt=gt[0],Ht=gt[1],It=gt[2],de=gt[3],De=Vt+Vt,Ye=Ht+Ht,kt=It+It,Pt=Vt*De,_t=Ht*De,jt=Ht*Ye,Qt=It*De,Tt=It*Ye,Zt=It*kt,Ee=de*De,dt=de*Ye,bt=de*kt;return Q[0]=1-jt-Zt,Q[3]=_t-bt,Q[6]=Qt+dt,Q[1]=_t+bt,Q[4]=1-Pt-Zt,Q[7]=Tt-Ee,Q[2]=Qt-dt,Q[5]=Tt+Ee,Q[8]=1-Pt-jt,Q}function U(Q,gt){var Vt=gt[0],Ht=gt[1],It=gt[2],de=gt[3],De=gt[4],Ye=gt[5],kt=gt[6],Pt=gt[7],_t=gt[8],jt=gt[9],Qt=gt[10],Tt=gt[11],Zt=gt[12],Ee=gt[13],dt=gt[14],bt=gt[15],wt=Vt*Ye-Ht*De,D=Vt*kt-It*De,rt=Vt*Pt-de*De,Nt=Ht*kt-It*Ye,ft=Ht*Pt-de*Ye,ie=It*Pt-de*kt,ge=_t*Ee-jt*Zt,Ge=_t*dt-Qt*Zt,Re=_t*bt-Tt*Zt,qe=jt*dt-Qt*Ee,Ve=jt*bt-Tt*Ee,le=Qt*bt-Tt*dt,Le=wt*le-D*Ve+rt*qe+Nt*Re-ft*Ge+ie*ge;return Le?(Le=1/Le,Q[0]=(Ye*le-kt*Ve+Pt*qe)*Le,Q[1]=(kt*Re-De*le-Pt*Ge)*Le,Q[2]=(De*Ve-Ye*Re+Pt*ge)*Le,Q[3]=(It*Ve-Ht*le-de*qe)*Le,Q[4]=(Vt*le-It*Re+de*Ge)*Le,Q[5]=(Ht*Re-Vt*Ve-de*ge)*Le,Q[6]=(Ee*ie-dt*ft+bt*Nt)*Le,Q[7]=(dt*rt-Zt*ie-bt*D)*Le,Q[8]=(Zt*ft-Ee*rt+bt*wt)*Le,Q):null}function et(Q,gt,Vt){return Q[0]=2/gt,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=-2/Vt,Q[5]=0,Q[6]=-1,Q[7]=1,Q[8]=1,Q}function at(Q){return"mat3("+Q[0]+", "+Q[1]+", "+Q[2]+", "+Q[3]+", "+Q[4]+", "+Q[5]+", "+Q[6]+", "+Q[7]+", "+Q[8]+")"}function J(Q){return Math.hypot(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],Q[8])}function nt(Q,gt,Vt){return Q[0]=gt[0]+Vt[0],Q[1]=gt[1]+Vt[1],Q[2]=gt[2]+Vt[2],Q[3]=gt[3]+Vt[3],Q[4]=gt[4]+Vt[4],Q[5]=gt[5]+Vt[5],Q[6]=gt[6]+Vt[6],Q[7]=gt[7]+Vt[7],Q[8]=gt[8]+Vt[8],Q}function mt(Q,gt,Vt){return Q[0]=gt[0]-Vt[0],Q[1]=gt[1]-Vt[1],Q[2]=gt[2]-Vt[2],Q[3]=gt[3]-Vt[3],Q[4]=gt[4]-Vt[4],Q[5]=gt[5]-Vt[5],Q[6]=gt[6]-Vt[6],Q[7]=gt[7]-Vt[7],Q[8]=gt[8]-Vt[8],Q}function Mt(Q,gt,Vt){return Q[0]=gt[0]*Vt,Q[1]=gt[1]*Vt,Q[2]=gt[2]*Vt,Q[3]=gt[3]*Vt,Q[4]=gt[4]*Vt,Q[5]=gt[5]*Vt,Q[6]=gt[6]*Vt,Q[7]=gt[7]*Vt,Q[8]=gt[8]*Vt,Q}function vt(Q,gt,Vt,Ht){return Q[0]=gt[0]+Vt[0]*Ht,Q[1]=gt[1]+Vt[1]*Ht,Q[2]=gt[2]+Vt[2]*Ht,Q[3]=gt[3]+Vt[3]*Ht,Q[4]=gt[4]+Vt[4]*Ht,Q[5]=gt[5]+Vt[5]*Ht,Q[6]=gt[6]+Vt[6]*Ht,Q[7]=gt[7]+Vt[7]*Ht,Q[8]=gt[8]+Vt[8]*Ht,Q}function zt(Q,gt){return Q[0]===gt[0]&&Q[1]===gt[1]&&Q[2]===gt[2]&&Q[3]===gt[3]&&Q[4]===gt[4]&&Q[5]===gt[5]&&Q[6]===gt[6]&&Q[7]===gt[7]&&Q[8]===gt[8]}function re(Q,gt){var Vt=Q[0],Ht=Q[1],It=Q[2],de=Q[3],De=Q[4],Ye=Q[5],kt=Q[6],Pt=Q[7],_t=Q[8],jt=gt[0],Qt=gt[1],Tt=gt[2],Zt=gt[3],Ee=gt[4],dt=gt[5],bt=gt[6],wt=gt[7],D=gt[8];return Math.abs(Vt-jt)<=x.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(jt))&&Math.abs(Ht-Qt)<=x.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(Qt))&&Math.abs(It-Tt)<=x.EPSILON*Math.max(1,Math.abs(It),Math.abs(Tt))&&Math.abs(de-Zt)<=x.EPSILON*Math.max(1,Math.abs(de),Math.abs(Zt))&&Math.abs(De-Ee)<=x.EPSILON*Math.max(1,Math.abs(De),Math.abs(Ee))&&Math.abs(Ye-dt)<=x.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(dt))&&Math.abs(kt-bt)<=x.EPSILON*Math.max(1,Math.abs(kt),Math.abs(bt))&&Math.abs(Pt-wt)<=x.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(wt))&&Math.abs(_t-D)<=x.EPSILON*Math.max(1,Math.abs(_t),Math.abs(D))}var Rt=_,At=mt},96518:function(ae,w,S){"use strict";S.r(w),S.d(w,{add:function(){return jt},adjoint:function(){return p},clone:function(){return k},copy:function(){return E},create:function(){return z},determinant:function(){return g},equals:function(){return dt},exactEquals:function(){return Ee},frob:function(){return _t},fromQuat:function(){return Rt},fromQuat2:function(){return nt},fromRotation:function(){return W},fromRotationTranslation:function(){return J},fromRotationTranslationScale:function(){return zt},fromRotationTranslationScaleOrigin:function(){return re},fromScaling:function(){return X},fromTranslation:function(){return Z},fromValues:function(){return N},fromXRotation:function(){return U},fromYRotation:function(){return et},fromZRotation:function(){return at},frustum:function(){return At},getRotation:function(){return vt},getScaling:function(){return Mt},getTranslation:function(){return mt},identity:function(){return m},invert:function(){return v},lookAt:function(){return Ye},mul:function(){return bt},multiply:function(){return I},multiplyScalar:function(){return Tt},multiplyScalarAndAdd:function(){return Zt},ortho:function(){return de},orthoNO:function(){return It},orthoZO:function(){return De},perspective:function(){return gt},perspectiveFromFieldOfView:function(){return Ht},perspectiveNO:function(){return Q},perspectiveZO:function(){return Vt},rotate:function(){return O},rotateX:function(){return b},rotateY:function(){return l},rotateZ:function(){return K},scale:function(){return C},set:function(){return T},str:function(){return Pt},sub:function(){return wt},subtract:function(){return Qt},targetTo:function(){return kt},translate:function(){return _},transpose:function(){return y}});var x=S(47897);function z(){var D=new x.ARRAY_TYPE(16);return x.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=0,D[12]=0,D[13]=0,D[14]=0),D[0]=1,D[5]=1,D[10]=1,D[15]=1,D}function k(D){var rt=new x.ARRAY_TYPE(16);return rt[0]=D[0],rt[1]=D[1],rt[2]=D[2],rt[3]=D[3],rt[4]=D[4],rt[5]=D[5],rt[6]=D[6],rt[7]=D[7],rt[8]=D[8],rt[9]=D[9],rt[10]=D[10],rt[11]=D[11],rt[12]=D[12],rt[13]=D[13],rt[14]=D[14],rt[15]=D[15],rt}function E(D,rt){return D[0]=rt[0],D[1]=rt[1],D[2]=rt[2],D[3]=rt[3],D[4]=rt[4],D[5]=rt[5],D[6]=rt[6],D[7]=rt[7],D[8]=rt[8],D[9]=rt[9],D[10]=rt[10],D[11]=rt[11],D[12]=rt[12],D[13]=rt[13],D[14]=rt[14],D[15]=rt[15],D}function N(D,rt,Nt,ft,ie,ge,Ge,Re,qe,Ve,le,Le,je,Be,vr,or){var Ae=new x.ARRAY_TYPE(16);return Ae[0]=D,Ae[1]=rt,Ae[2]=Nt,Ae[3]=ft,Ae[4]=ie,Ae[5]=ge,Ae[6]=Ge,Ae[7]=Re,Ae[8]=qe,Ae[9]=Ve,Ae[10]=le,Ae[11]=Le,Ae[12]=je,Ae[13]=Be,Ae[14]=vr,Ae[15]=or,Ae}function T(D,rt,Nt,ft,ie,ge,Ge,Re,qe,Ve,le,Le,je,Be,vr,or,Ae){return D[0]=rt,D[1]=Nt,D[2]=ft,D[3]=ie,D[4]=ge,D[5]=Ge,D[6]=Re,D[7]=qe,D[8]=Ve,D[9]=le,D[10]=Le,D[11]=je,D[12]=Be,D[13]=vr,D[14]=or,D[15]=Ae,D}function m(D){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function y(D,rt){if(D===rt){var Nt=rt[1],ft=rt[2],ie=rt[3],ge=rt[6],Ge=rt[7],Re=rt[11];D[1]=rt[4],D[2]=rt[8],D[3]=rt[12],D[4]=Nt,D[6]=rt[9],D[7]=rt[13],D[8]=ft,D[9]=ge,D[11]=rt[14],D[12]=ie,D[13]=Ge,D[14]=Re}else D[0]=rt[0],D[1]=rt[4],D[2]=rt[8],D[3]=rt[12],D[4]=rt[1],D[5]=rt[5],D[6]=rt[9],D[7]=rt[13],D[8]=rt[2],D[9]=rt[6],D[10]=rt[10],D[11]=rt[14],D[12]=rt[3],D[13]=rt[7],D[14]=rt[11],D[15]=rt[15];return D}function v(D,rt){var Nt=rt[0],ft=rt[1],ie=rt[2],ge=rt[3],Ge=rt[4],Re=rt[5],qe=rt[6],Ve=rt[7],le=rt[8],Le=rt[9],je=rt[10],Be=rt[11],vr=rt[12],or=rt[13],Ae=rt[14],yr=rt[15],Cr=Nt*Re-ft*Ge,zr=Nt*qe-ie*Ge,Mr=Nt*Ve-ge*Ge,un=ft*qe-ie*Re,hn=ft*Ve-ge*Re,Un=ie*Ve-ge*qe,nn=le*or-Le*vr,vn=le*Ae-je*vr,ln=le*yr-Be*vr,pn=Le*Ae-je*or,Bn=Le*yr-Be*or,Pe=je*yr-Be*Ae,Cn=Cr*Pe-zr*Bn+Mr*pn+un*ln-hn*vn+Un*nn;return Cn?(Cn=1/Cn,D[0]=(Re*Pe-qe*Bn+Ve*pn)*Cn,D[1]=(ie*Bn-ft*Pe-ge*pn)*Cn,D[2]=(or*Un-Ae*hn+yr*un)*Cn,D[3]=(je*hn-Le*Un-Be*un)*Cn,D[4]=(qe*ln-Ge*Pe-Ve*vn)*Cn,D[5]=(Nt*Pe-ie*ln+ge*vn)*Cn,D[6]=(Ae*Mr-vr*Un-yr*zr)*Cn,D[7]=(le*Un-je*Mr+Be*zr)*Cn,D[8]=(Ge*Bn-Re*ln+Ve*nn)*Cn,D[9]=(ft*ln-Nt*Bn-ge*nn)*Cn,D[10]=(vr*hn-or*Mr+yr*Cr)*Cn,D[11]=(Le*Mr-le*hn-Be*Cr)*Cn,D[12]=(Re*vn-Ge*pn-qe*nn)*Cn,D[13]=(Nt*pn-ft*vn+ie*nn)*Cn,D[14]=(or*zr-vr*un-Ae*Cr)*Cn,D[15]=(le*un-Le*zr+je*Cr)*Cn,D):null}function p(D,rt){var Nt=rt[0],ft=rt[1],ie=rt[2],ge=rt[3],Ge=rt[4],Re=rt[5],qe=rt[6],Ve=rt[7],le=rt[8],Le=rt[9],je=rt[10],Be=rt[11],vr=rt[12],or=rt[13],Ae=rt[14],yr=rt[15];return D[0]=Re*(je*yr-Be*Ae)-Le*(qe*yr-Ve*Ae)+or*(qe*Be-Ve*je),D[1]=-(ft*(je*yr-Be*Ae)-Le*(ie*yr-ge*Ae)+or*(ie*Be-ge*je)),D[2]=ft*(qe*yr-Ve*Ae)-Re*(ie*yr-ge*Ae)+or*(ie*Ve-ge*qe),D[3]=-(ft*(qe*Be-Ve*je)-Re*(ie*Be-ge*je)+Le*(ie*Ve-ge*qe)),D[4]=-(Ge*(je*yr-Be*Ae)-le*(qe*yr-Ve*Ae)+vr*(qe*Be-Ve*je)),D[5]=Nt*(je*yr-Be*Ae)-le*(ie*yr-ge*Ae)+vr*(ie*Be-ge*je),D[6]=-(Nt*(qe*yr-Ve*Ae)-Ge*(ie*yr-ge*Ae)+vr*(ie*Ve-ge*qe)),D[7]=Nt*(qe*Be-Ve*je)-Ge*(ie*Be-ge*je)+le*(ie*Ve-ge*qe),D[8]=Ge*(Le*yr-Be*or)-le*(Re*yr-Ve*or)+vr*(Re*Be-Ve*Le),D[9]=-(Nt*(Le*yr-Be*or)-le*(ft*yr-ge*or)+vr*(ft*Be-ge*Le)),D[10]=Nt*(Re*yr-Ve*or)-Ge*(ft*yr-ge*or)+vr*(ft*Ve-ge*Re),D[11]=-(Nt*(Re*Be-Ve*Le)-Ge*(ft*Be-ge*Le)+le*(ft*Ve-ge*Re)),D[12]=-(Ge*(Le*Ae-je*or)-le*(Re*Ae-qe*or)+vr*(Re*je-qe*Le)),D[13]=Nt*(Le*Ae-je*or)-le*(ft*Ae-ie*or)+vr*(ft*je-ie*Le),D[14]=-(Nt*(Re*Ae-qe*or)-Ge*(ft*Ae-ie*or)+vr*(ft*qe-ie*Re)),D[15]=Nt*(Re*je-qe*Le)-Ge*(ft*je-ie*Le)+le*(ft*qe-ie*Re),D}function g(D){var rt=D[0],Nt=D[1],ft=D[2],ie=D[3],ge=D[4],Ge=D[5],Re=D[6],qe=D[7],Ve=D[8],le=D[9],Le=D[10],je=D[11],Be=D[12],vr=D[13],or=D[14],Ae=D[15],yr=rt*Ge-Nt*ge,Cr=rt*Re-ft*ge,zr=rt*qe-ie*ge,Mr=Nt*Re-ft*Ge,un=Nt*qe-ie*Ge,hn=ft*qe-ie*Re,Un=Ve*vr-le*Be,nn=Ve*or-Le*Be,vn=Ve*Ae-je*Be,ln=le*or-Le*vr,pn=le*Ae-je*vr,Bn=Le*Ae-je*or;return yr*Bn-Cr*pn+zr*ln+Mr*vn-un*nn+hn*Un}function I(D,rt,Nt){var ft=rt[0],ie=rt[1],ge=rt[2],Ge=rt[3],Re=rt[4],qe=rt[5],Ve=rt[6],le=rt[7],Le=rt[8],je=rt[9],Be=rt[10],vr=rt[11],or=rt[12],Ae=rt[13],yr=rt[14],Cr=rt[15],zr=Nt[0],Mr=Nt[1],un=Nt[2],hn=Nt[3];return D[0]=zr*ft+Mr*Re+un*Le+hn*or,D[1]=zr*ie+Mr*qe+un*je+hn*Ae,D[2]=zr*ge+Mr*Ve+un*Be+hn*yr,D[3]=zr*Ge+Mr*le+un*vr+hn*Cr,zr=Nt[4],Mr=Nt[5],un=Nt[6],hn=Nt[7],D[4]=zr*ft+Mr*Re+un*Le+hn*or,D[5]=zr*ie+Mr*qe+un*je+hn*Ae,D[6]=zr*ge+Mr*Ve+un*Be+hn*yr,D[7]=zr*Ge+Mr*le+un*vr+hn*Cr,zr=Nt[8],Mr=Nt[9],un=Nt[10],hn=Nt[11],D[8]=zr*ft+Mr*Re+un*Le+hn*or,D[9]=zr*ie+Mr*qe+un*je+hn*Ae,D[10]=zr*ge+Mr*Ve+un*Be+hn*yr,D[11]=zr*Ge+Mr*le+un*vr+hn*Cr,zr=Nt[12],Mr=Nt[13],un=Nt[14],hn=Nt[15],D[12]=zr*ft+Mr*Re+un*Le+hn*or,D[13]=zr*ie+Mr*qe+un*je+hn*Ae,D[14]=zr*ge+Mr*Ve+un*Be+hn*yr,D[15]=zr*Ge+Mr*le+un*vr+hn*Cr,D}function _(D,rt,Nt){var ft=Nt[0],ie=Nt[1],ge=Nt[2],Ge,Re,qe,Ve,le,Le,je,Be,vr,or,Ae,yr;return rt===D?(D[12]=rt[0]*ft+rt[4]*ie+rt[8]*ge+rt[12],D[13]=rt[1]*ft+rt[5]*ie+rt[9]*ge+rt[13],D[14]=rt[2]*ft+rt[6]*ie+rt[10]*ge+rt[14],D[15]=rt[3]*ft+rt[7]*ie+rt[11]*ge+rt[15]):(Ge=rt[0],Re=rt[1],qe=rt[2],Ve=rt[3],le=rt[4],Le=rt[5],je=rt[6],Be=rt[7],vr=rt[8],or=rt[9],Ae=rt[10],yr=rt[11],D[0]=Ge,D[1]=Re,D[2]=qe,D[3]=Ve,D[4]=le,D[5]=Le,D[6]=je,D[7]=Be,D[8]=vr,D[9]=or,D[10]=Ae,D[11]=yr,D[12]=Ge*ft+le*ie+vr*ge+rt[12],D[13]=Re*ft+Le*ie+or*ge+rt[13],D[14]=qe*ft+je*ie+Ae*ge+rt[14],D[15]=Ve*ft+Be*ie+yr*ge+rt[15]),D}function C(D,rt,Nt){var ft=Nt[0],ie=Nt[1],ge=Nt[2];return D[0]=rt[0]*ft,D[1]=rt[1]*ft,D[2]=rt[2]*ft,D[3]=rt[3]*ft,D[4]=rt[4]*ie,D[5]=rt[5]*ie,D[6]=rt[6]*ie,D[7]=rt[7]*ie,D[8]=rt[8]*ge,D[9]=rt[9]*ge,D[10]=rt[10]*ge,D[11]=rt[11]*ge,D[12]=rt[12],D[13]=rt[13],D[14]=rt[14],D[15]=rt[15],D}function O(D,rt,Nt,ft){var ie=ft[0],ge=ft[1],Ge=ft[2],Re=Math.hypot(ie,ge,Ge),qe,Ve,le,Le,je,Be,vr,or,Ae,yr,Cr,zr,Mr,un,hn,Un,nn,vn,ln,pn,Bn,Pe,Cn,Gn;return Re<x.EPSILON?null:(Re=1/Re,ie*=Re,ge*=Re,Ge*=Re,qe=Math.sin(Nt),Ve=Math.cos(Nt),le=1-Ve,Le=rt[0],je=rt[1],Be=rt[2],vr=rt[3],or=rt[4],Ae=rt[5],yr=rt[6],Cr=rt[7],zr=rt[8],Mr=rt[9],un=rt[10],hn=rt[11],Un=ie*ie*le+Ve,nn=ge*ie*le+Ge*qe,vn=Ge*ie*le-ge*qe,ln=ie*ge*le-Ge*qe,pn=ge*ge*le+Ve,Bn=Ge*ge*le+ie*qe,Pe=ie*Ge*le+ge*qe,Cn=ge*Ge*le-ie*qe,Gn=Ge*Ge*le+Ve,D[0]=Le*Un+or*nn+zr*vn,D[1]=je*Un+Ae*nn+Mr*vn,D[2]=Be*Un+yr*nn+un*vn,D[3]=vr*Un+Cr*nn+hn*vn,D[4]=Le*ln+or*pn+zr*Bn,D[5]=je*ln+Ae*pn+Mr*Bn,D[6]=Be*ln+yr*pn+un*Bn,D[7]=vr*ln+Cr*pn+hn*Bn,D[8]=Le*Pe+or*Cn+zr*Gn,D[9]=je*Pe+Ae*Cn+Mr*Gn,D[10]=Be*Pe+yr*Cn+un*Gn,D[11]=vr*Pe+Cr*Cn+hn*Gn,rt!==D&&(D[12]=rt[12],D[13]=rt[13],D[14]=rt[14],D[15]=rt[15]),D)}function b(D,rt,Nt){var ft=Math.sin(Nt),ie=Math.cos(Nt),ge=rt[4],Ge=rt[5],Re=rt[6],qe=rt[7],Ve=rt[8],le=rt[9],Le=rt[10],je=rt[11];return rt!==D&&(D[0]=rt[0],D[1]=rt[1],D[2]=rt[2],D[3]=rt[3],D[12]=rt[12],D[13]=rt[13],D[14]=rt[14],D[15]=rt[15]),D[4]=ge*ie+Ve*ft,D[5]=Ge*ie+le*ft,D[6]=Re*ie+Le*ft,D[7]=qe*ie+je*ft,D[8]=Ve*ie-ge*ft,D[9]=le*ie-Ge*ft,D[10]=Le*ie-Re*ft,D[11]=je*ie-qe*ft,D}function l(D,rt,Nt){var ft=Math.sin(Nt),ie=Math.cos(Nt),ge=rt[0],Ge=rt[1],Re=rt[2],qe=rt[3],Ve=rt[8],le=rt[9],Le=rt[10],je=rt[11];return rt!==D&&(D[4]=rt[4],D[5]=rt[5],D[6]=rt[6],D[7]=rt[7],D[12]=rt[12],D[13]=rt[13],D[14]=rt[14],D[15]=rt[15]),D[0]=ge*ie-Ve*ft,D[1]=Ge*ie-le*ft,D[2]=Re*ie-Le*ft,D[3]=qe*ie-je*ft,D[8]=ge*ft+Ve*ie,D[9]=Ge*ft+le*ie,D[10]=Re*ft+Le*ie,D[11]=qe*ft+je*ie,D}function K(D,rt,Nt){var ft=Math.sin(Nt),ie=Math.cos(Nt),ge=rt[0],Ge=rt[1],Re=rt[2],qe=rt[3],Ve=rt[4],le=rt[5],Le=rt[6],je=rt[7];return rt!==D&&(D[8]=rt[8],D[9]=rt[9],D[10]=rt[10],D[11]=rt[11],D[12]=rt[12],D[13]=rt[13],D[14]=rt[14],D[15]=rt[15]),D[0]=ge*ie+Ve*ft,D[1]=Ge*ie+le*ft,D[2]=Re*ie+Le*ft,D[3]=qe*ie+je*ft,D[4]=Ve*ie-ge*ft,D[5]=le*ie-Ge*ft,D[6]=Le*ie-Re*ft,D[7]=je*ie-qe*ft,D}function Z(D,rt){return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=rt[0],D[13]=rt[1],D[14]=rt[2],D[15]=1,D}function X(D,rt){return D[0]=rt[0],D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=rt[1],D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=rt[2],D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function W(D,rt,Nt){var ft=Nt[0],ie=Nt[1],ge=Nt[2],Ge=Math.hypot(ft,ie,ge),Re,qe,Ve;return Ge<x.EPSILON?null:(Ge=1/Ge,ft*=Ge,ie*=Ge,ge*=Ge,Re=Math.sin(rt),qe=Math.cos(rt),Ve=1-qe,D[0]=ft*ft*Ve+qe,D[1]=ie*ft*Ve+ge*Re,D[2]=ge*ft*Ve-ie*Re,D[3]=0,D[4]=ft*ie*Ve-ge*Re,D[5]=ie*ie*Ve+qe,D[6]=ge*ie*Ve+ft*Re,D[7]=0,D[8]=ft*ge*Ve+ie*Re,D[9]=ie*ge*Ve-ft*Re,D[10]=ge*ge*Ve+qe,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D)}function U(D,rt){var Nt=Math.sin(rt),ft=Math.cos(rt);return D[0]=1,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=ft,D[6]=Nt,D[7]=0,D[8]=0,D[9]=-Nt,D[10]=ft,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function et(D,rt){var Nt=Math.sin(rt),ft=Math.cos(rt);return D[0]=ft,D[1]=0,D[2]=-Nt,D[3]=0,D[4]=0,D[5]=1,D[6]=0,D[7]=0,D[8]=Nt,D[9]=0,D[10]=ft,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function at(D,rt){var Nt=Math.sin(rt),ft=Math.cos(rt);return D[0]=ft,D[1]=Nt,D[2]=0,D[3]=0,D[4]=-Nt,D[5]=ft,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=1,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function J(D,rt,Nt){var ft=rt[0],ie=rt[1],ge=rt[2],Ge=rt[3],Re=ft+ft,qe=ie+ie,Ve=ge+ge,le=ft*Re,Le=ft*qe,je=ft*Ve,Be=ie*qe,vr=ie*Ve,or=ge*Ve,Ae=Ge*Re,yr=Ge*qe,Cr=Ge*Ve;return D[0]=1-(Be+or),D[1]=Le+Cr,D[2]=je-yr,D[3]=0,D[4]=Le-Cr,D[5]=1-(le+or),D[6]=vr+Ae,D[7]=0,D[8]=je+yr,D[9]=vr-Ae,D[10]=1-(le+Be),D[11]=0,D[12]=Nt[0],D[13]=Nt[1],D[14]=Nt[2],D[15]=1,D}function nt(D,rt){var Nt=new x.ARRAY_TYPE(3),ft=-rt[0],ie=-rt[1],ge=-rt[2],Ge=rt[3],Re=rt[4],qe=rt[5],Ve=rt[6],le=rt[7],Le=ft*ft+ie*ie+ge*ge+Ge*Ge;return Le>0?(Nt[0]=(Re*Ge+le*ft+qe*ge-Ve*ie)*2/Le,Nt[1]=(qe*Ge+le*ie+Ve*ft-Re*ge)*2/Le,Nt[2]=(Ve*Ge+le*ge+Re*ie-qe*ft)*2/Le):(Nt[0]=(Re*Ge+le*ft+qe*ge-Ve*ie)*2,Nt[1]=(qe*Ge+le*ie+Ve*ft-Re*ge)*2,Nt[2]=(Ve*Ge+le*ge+Re*ie-qe*ft)*2),J(D,rt,Nt),D}function mt(D,rt){return D[0]=rt[12],D[1]=rt[13],D[2]=rt[14],D}function Mt(D,rt){var Nt=rt[0],ft=rt[1],ie=rt[2],ge=rt[4],Ge=rt[5],Re=rt[6],qe=rt[8],Ve=rt[9],le=rt[10];return D[0]=Math.hypot(Nt,ft,ie),D[1]=Math.hypot(ge,Ge,Re),D[2]=Math.hypot(qe,Ve,le),D}function vt(D,rt){var Nt=new x.ARRAY_TYPE(3);Mt(Nt,rt);var ft=1/Nt[0],ie=1/Nt[1],ge=1/Nt[2],Ge=rt[0]*ft,Re=rt[1]*ie,qe=rt[2]*ge,Ve=rt[4]*ft,le=rt[5]*ie,Le=rt[6]*ge,je=rt[8]*ft,Be=rt[9]*ie,vr=rt[10]*ge,or=Ge+le+vr,Ae=0;return or>0?(Ae=Math.sqrt(or+1)*2,D[3]=.25*Ae,D[0]=(Le-Be)/Ae,D[1]=(je-qe)/Ae,D[2]=(Re-Ve)/Ae):Ge>le&&Ge>vr?(Ae=Math.sqrt(1+Ge-le-vr)*2,D[3]=(Le-Be)/Ae,D[0]=.25*Ae,D[1]=(Re+Ve)/Ae,D[2]=(je+qe)/Ae):le>vr?(Ae=Math.sqrt(1+le-Ge-vr)*2,D[3]=(je-qe)/Ae,D[0]=(Re+Ve)/Ae,D[1]=.25*Ae,D[2]=(Le+Be)/Ae):(Ae=Math.sqrt(1+vr-Ge-le)*2,D[3]=(Re-Ve)/Ae,D[0]=(je+qe)/Ae,D[1]=(Le+Be)/Ae,D[2]=.25*Ae),D}function zt(D,rt,Nt,ft){var ie=rt[0],ge=rt[1],Ge=rt[2],Re=rt[3],qe=ie+ie,Ve=ge+ge,le=Ge+Ge,Le=ie*qe,je=ie*Ve,Be=ie*le,vr=ge*Ve,or=ge*le,Ae=Ge*le,yr=Re*qe,Cr=Re*Ve,zr=Re*le,Mr=ft[0],un=ft[1],hn=ft[2];return D[0]=(1-(vr+Ae))*Mr,D[1]=(je+zr)*Mr,D[2]=(Be-Cr)*Mr,D[3]=0,D[4]=(je-zr)*un,D[5]=(1-(Le+Ae))*un,D[6]=(or+yr)*un,D[7]=0,D[8]=(Be+Cr)*hn,D[9]=(or-yr)*hn,D[10]=(1-(Le+vr))*hn,D[11]=0,D[12]=Nt[0],D[13]=Nt[1],D[14]=Nt[2],D[15]=1,D}function re(D,rt,Nt,ft,ie){var ge=rt[0],Ge=rt[1],Re=rt[2],qe=rt[3],Ve=ge+ge,le=Ge+Ge,Le=Re+Re,je=ge*Ve,Be=ge*le,vr=ge*Le,or=Ge*le,Ae=Ge*Le,yr=Re*Le,Cr=qe*Ve,zr=qe*le,Mr=qe*Le,un=ft[0],hn=ft[1],Un=ft[2],nn=ie[0],vn=ie[1],ln=ie[2],pn=(1-(or+yr))*un,Bn=(Be+Mr)*un,Pe=(vr-zr)*un,Cn=(Be-Mr)*hn,Gn=(1-(je+yr))*hn,bi=(Ae+Cr)*hn,zn=(vr+zr)*Un,Hn=(Ae-Cr)*Un,hi=(1-(je+or))*Un;return D[0]=pn,D[1]=Bn,D[2]=Pe,D[3]=0,D[4]=Cn,D[5]=Gn,D[6]=bi,D[7]=0,D[8]=zn,D[9]=Hn,D[10]=hi,D[11]=0,D[12]=Nt[0]+nn-(pn*nn+Cn*vn+zn*ln),D[13]=Nt[1]+vn-(Bn*nn+Gn*vn+Hn*ln),D[14]=Nt[2]+ln-(Pe*nn+bi*vn+hi*ln),D[15]=1,D}function Rt(D,rt){var Nt=rt[0],ft=rt[1],ie=rt[2],ge=rt[3],Ge=Nt+Nt,Re=ft+ft,qe=ie+ie,Ve=Nt*Ge,le=ft*Ge,Le=ft*Re,je=ie*Ge,Be=ie*Re,vr=ie*qe,or=ge*Ge,Ae=ge*Re,yr=ge*qe;return D[0]=1-Le-vr,D[1]=le+yr,D[2]=je-Ae,D[3]=0,D[4]=le-yr,D[5]=1-Ve-vr,D[6]=Be+or,D[7]=0,D[8]=je+Ae,D[9]=Be-or,D[10]=1-Ve-Le,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,D}function At(D,rt,Nt,ft,ie,ge,Ge){var Re=1/(Nt-rt),qe=1/(ie-ft),Ve=1/(ge-Ge);return D[0]=ge*2*Re,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=ge*2*qe,D[6]=0,D[7]=0,D[8]=(Nt+rt)*Re,D[9]=(ie+ft)*qe,D[10]=(Ge+ge)*Ve,D[11]=-1,D[12]=0,D[13]=0,D[14]=Ge*ge*2*Ve,D[15]=0,D}function Q(D,rt,Nt,ft,ie){var ge=1/Math.tan(rt/2),Ge;return D[0]=ge/Nt,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=ge,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,ie!=null&&ie!==1/0?(Ge=1/(ft-ie),D[10]=(ie+ft)*Ge,D[14]=2*ie*ft*Ge):(D[10]=-1,D[14]=-2*ft),D}var gt=Q;function Vt(D,rt,Nt,ft,ie){var ge=1/Math.tan(rt/2),Ge;return D[0]=ge/Nt,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=ge,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[11]=-1,D[12]=0,D[13]=0,D[15]=0,ie!=null&&ie!==1/0?(Ge=1/(ft-ie),D[10]=ie*Ge,D[14]=ie*ft*Ge):(D[10]=-1,D[14]=-ft),D}function Ht(D,rt,Nt,ft){var ie=Math.tan(rt.upDegrees*Math.PI/180),ge=Math.tan(rt.downDegrees*Math.PI/180),Ge=Math.tan(rt.leftDegrees*Math.PI/180),Re=Math.tan(rt.rightDegrees*Math.PI/180),qe=2/(Ge+Re),Ve=2/(ie+ge);return D[0]=qe,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=Ve,D[6]=0,D[7]=0,D[8]=-((Ge-Re)*qe*.5),D[9]=(ie-ge)*Ve*.5,D[10]=ft/(Nt-ft),D[11]=-1,D[12]=0,D[13]=0,D[14]=ft*Nt/(Nt-ft),D[15]=0,D}function It(D,rt,Nt,ft,ie,ge,Ge){var Re=1/(rt-Nt),qe=1/(ft-ie),Ve=1/(ge-Ge);return D[0]=-2*Re,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*qe,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=2*Ve,D[11]=0,D[12]=(rt+Nt)*Re,D[13]=(ie+ft)*qe,D[14]=(Ge+ge)*Ve,D[15]=1,D}var de=It;function De(D,rt,Nt,ft,ie,ge,Ge){var Re=1/(rt-Nt),qe=1/(ft-ie),Ve=1/(ge-Ge);return D[0]=-2*Re,D[1]=0,D[2]=0,D[3]=0,D[4]=0,D[5]=-2*qe,D[6]=0,D[7]=0,D[8]=0,D[9]=0,D[10]=Ve,D[11]=0,D[12]=(rt+Nt)*Re,D[13]=(ie+ft)*qe,D[14]=ge*Ve,D[15]=1,D}function Ye(D,rt,Nt,ft){var ie,ge,Ge,Re,qe,Ve,le,Le,je,Be,vr=rt[0],or=rt[1],Ae=rt[2],yr=ft[0],Cr=ft[1],zr=ft[2],Mr=Nt[0],un=Nt[1],hn=Nt[2];return Math.abs(vr-Mr)<x.EPSILON&&Math.abs(or-un)<x.EPSILON&&Math.abs(Ae-hn)<x.EPSILON?m(D):(le=vr-Mr,Le=or-un,je=Ae-hn,Be=1/Math.hypot(le,Le,je),le*=Be,Le*=Be,je*=Be,ie=Cr*je-zr*Le,ge=zr*le-yr*je,Ge=yr*Le-Cr*le,Be=Math.hypot(ie,ge,Ge),Be?(Be=1/Be,ie*=Be,ge*=Be,Ge*=Be):(ie=0,ge=0,Ge=0),Re=Le*Ge-je*ge,qe=je*ie-le*Ge,Ve=le*ge-Le*ie,Be=Math.hypot(Re,qe,Ve),Be?(Be=1/Be,Re*=Be,qe*=Be,Ve*=Be):(Re=0,qe=0,Ve=0),D[0]=ie,D[1]=Re,D[2]=le,D[3]=0,D[4]=ge,D[5]=qe,D[6]=Le,D[7]=0,D[8]=Ge,D[9]=Ve,D[10]=je,D[11]=0,D[12]=-(ie*vr+ge*or+Ge*Ae),D[13]=-(Re*vr+qe*or+Ve*Ae),D[14]=-(le*vr+Le*or+je*Ae),D[15]=1,D)}function kt(D,rt,Nt,ft){var ie=rt[0],ge=rt[1],Ge=rt[2],Re=ft[0],qe=ft[1],Ve=ft[2],le=ie-Nt[0],Le=ge-Nt[1],je=Ge-Nt[2],Be=le*le+Le*Le+je*je;Be>0&&(Be=1/Math.sqrt(Be),le*=Be,Le*=Be,je*=Be);var vr=qe*je-Ve*Le,or=Ve*le-Re*je,Ae=Re*Le-qe*le;return Be=vr*vr+or*or+Ae*Ae,Be>0&&(Be=1/Math.sqrt(Be),vr*=Be,or*=Be,Ae*=Be),D[0]=vr,D[1]=or,D[2]=Ae,D[3]=0,D[4]=Le*Ae-je*or,D[5]=je*vr-le*Ae,D[6]=le*or-Le*vr,D[7]=0,D[8]=le,D[9]=Le,D[10]=je,D[11]=0,D[12]=ie,D[13]=ge,D[14]=Ge,D[15]=1,D}function Pt(D){return"mat4("+D[0]+", "+D[1]+", "+D[2]+", "+D[3]+", "+D[4]+", "+D[5]+", "+D[6]+", "+D[7]+", "+D[8]+", "+D[9]+", "+D[10]+", "+D[11]+", "+D[12]+", "+D[13]+", "+D[14]+", "+D[15]+")"}function _t(D){return Math.hypot(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15])}function jt(D,rt,Nt){return D[0]=rt[0]+Nt[0],D[1]=rt[1]+Nt[1],D[2]=rt[2]+Nt[2],D[3]=rt[3]+Nt[3],D[4]=rt[4]+Nt[4],D[5]=rt[5]+Nt[5],D[6]=rt[6]+Nt[6],D[7]=rt[7]+Nt[7],D[8]=rt[8]+Nt[8],D[9]=rt[9]+Nt[9],D[10]=rt[10]+Nt[10],D[11]=rt[11]+Nt[11],D[12]=rt[12]+Nt[12],D[13]=rt[13]+Nt[13],D[14]=rt[14]+Nt[14],D[15]=rt[15]+Nt[15],D}function Qt(D,rt,Nt){return D[0]=rt[0]-Nt[0],D[1]=rt[1]-Nt[1],D[2]=rt[2]-Nt[2],D[3]=rt[3]-Nt[3],D[4]=rt[4]-Nt[4],D[5]=rt[5]-Nt[5],D[6]=rt[6]-Nt[6],D[7]=rt[7]-Nt[7],D[8]=rt[8]-Nt[8],D[9]=rt[9]-Nt[9],D[10]=rt[10]-Nt[10],D[11]=rt[11]-Nt[11],D[12]=rt[12]-Nt[12],D[13]=rt[13]-Nt[13],D[14]=rt[14]-Nt[14],D[15]=rt[15]-Nt[15],D}function Tt(D,rt,Nt){return D[0]=rt[0]*Nt,D[1]=rt[1]*Nt,D[2]=rt[2]*Nt,D[3]=rt[3]*Nt,D[4]=rt[4]*Nt,D[5]=rt[5]*Nt,D[6]=rt[6]*Nt,D[7]=rt[7]*Nt,D[8]=rt[8]*Nt,D[9]=rt[9]*Nt,D[10]=rt[10]*Nt,D[11]=rt[11]*Nt,D[12]=rt[12]*Nt,D[13]=rt[13]*Nt,D[14]=rt[14]*Nt,D[15]=rt[15]*Nt,D}function Zt(D,rt,Nt,ft){return D[0]=rt[0]+Nt[0]*ft,D[1]=rt[1]+Nt[1]*ft,D[2]=rt[2]+Nt[2]*ft,D[3]=rt[3]+Nt[3]*ft,D[4]=rt[4]+Nt[4]*ft,D[5]=rt[5]+Nt[5]*ft,D[6]=rt[6]+Nt[6]*ft,D[7]=rt[7]+Nt[7]*ft,D[8]=rt[8]+Nt[8]*ft,D[9]=rt[9]+Nt[9]*ft,D[10]=rt[10]+Nt[10]*ft,D[11]=rt[11]+Nt[11]*ft,D[12]=rt[12]+Nt[12]*ft,D[13]=rt[13]+Nt[13]*ft,D[14]=rt[14]+Nt[14]*ft,D[15]=rt[15]+Nt[15]*ft,D}function Ee(D,rt){return D[0]===rt[0]&&D[1]===rt[1]&&D[2]===rt[2]&&D[3]===rt[3]&&D[4]===rt[4]&&D[5]===rt[5]&&D[6]===rt[6]&&D[7]===rt[7]&&D[8]===rt[8]&&D[9]===rt[9]&&D[10]===rt[10]&&D[11]===rt[11]&&D[12]===rt[12]&&D[13]===rt[13]&&D[14]===rt[14]&&D[15]===rt[15]}function dt(D,rt){var Nt=D[0],ft=D[1],ie=D[2],ge=D[3],Ge=D[4],Re=D[5],qe=D[6],Ve=D[7],le=D[8],Le=D[9],je=D[10],Be=D[11],vr=D[12],or=D[13],Ae=D[14],yr=D[15],Cr=rt[0],zr=rt[1],Mr=rt[2],un=rt[3],hn=rt[4],Un=rt[5],nn=rt[6],vn=rt[7],ln=rt[8],pn=rt[9],Bn=rt[10],Pe=rt[11],Cn=rt[12],Gn=rt[13],bi=rt[14],zn=rt[15];return Math.abs(Nt-Cr)<=x.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(Cr))&&Math.abs(ft-zr)<=x.EPSILON*Math.max(1,Math.abs(ft),Math.abs(zr))&&Math.abs(ie-Mr)<=x.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Mr))&&Math.abs(ge-un)<=x.EPSILON*Math.max(1,Math.abs(ge),Math.abs(un))&&Math.abs(Ge-hn)<=x.EPSILON*Math.max(1,Math.abs(Ge),Math.abs(hn))&&Math.abs(Re-Un)<=x.EPSILON*Math.max(1,Math.abs(Re),Math.abs(Un))&&Math.abs(qe-nn)<=x.EPSILON*Math.max(1,Math.abs(qe),Math.abs(nn))&&Math.abs(Ve-vn)<=x.EPSILON*Math.max(1,Math.abs(Ve),Math.abs(vn))&&Math.abs(le-ln)<=x.EPSILON*Math.max(1,Math.abs(le),Math.abs(ln))&&Math.abs(Le-pn)<=x.EPSILON*Math.max(1,Math.abs(Le),Math.abs(pn))&&Math.abs(je-Bn)<=x.EPSILON*Math.max(1,Math.abs(je),Math.abs(Bn))&&Math.abs(Be-Pe)<=x.EPSILON*Math.max(1,Math.abs(Be),Math.abs(Pe))&&Math.abs(vr-Cn)<=x.EPSILON*Math.max(1,Math.abs(vr),Math.abs(Cn))&&Math.abs(or-Gn)<=x.EPSILON*Math.max(1,Math.abs(or),Math.abs(Gn))&&Math.abs(Ae-bi)<=x.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(bi))&&Math.abs(yr-zn)<=x.EPSILON*Math.max(1,Math.abs(yr),Math.abs(zn))}var bt=I,wt=Qt},14717:function(ae,w,S){"use strict";S.r(w),S.d(w,{add:function(){return vt},calculateW:function(){return C},clone:function(){return J},conjugate:function(){return W},copy:function(){return mt},create:function(){return N},dot:function(){return Rt},equals:function(){return De},exactEquals:function(){return de},exp:function(){return O},fromEuler:function(){return et},fromMat3:function(){return U},fromValues:function(){return nt},getAngle:function(){return v},getAxisAngle:function(){return y},identity:function(){return T},invert:function(){return X},len:function(){return gt},length:function(){return Q},lerp:function(){return At},ln:function(){return b},mul:function(){return zt},multiply:function(){return p},normalize:function(){return It},pow:function(){return l},random:function(){return Z},rotateX:function(){return g},rotateY:function(){return I},rotateZ:function(){return _},rotationTo:function(){return Ye},scale:function(){return re},set:function(){return Mt},setAxes:function(){return Pt},setAxisAngle:function(){return m},slerp:function(){return K},sqlerp:function(){return kt},sqrLen:function(){return Ht},squaredLength:function(){return Vt},str:function(){return at}});var x=S(47897),z=S(65316),k=S(91606),E=S(59196);function N(){var _t=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(_t[0]=0,_t[1]=0,_t[2]=0),_t[3]=1,_t}function T(_t){return _t[0]=0,_t[1]=0,_t[2]=0,_t[3]=1,_t}function m(_t,jt,Qt){Qt=Qt*.5;var Tt=Math.sin(Qt);return _t[0]=Tt*jt[0],_t[1]=Tt*jt[1],_t[2]=Tt*jt[2],_t[3]=Math.cos(Qt),_t}function y(_t,jt){var Qt=Math.acos(jt[3])*2,Tt=Math.sin(Qt/2);return Tt>x.EPSILON?(_t[0]=jt[0]/Tt,_t[1]=jt[1]/Tt,_t[2]=jt[2]/Tt):(_t[0]=1,_t[1]=0,_t[2]=0),Qt}function v(_t,jt){var Qt=Rt(_t,jt);return Math.acos(2*Qt*Qt-1)}function p(_t,jt,Qt){var Tt=jt[0],Zt=jt[1],Ee=jt[2],dt=jt[3],bt=Qt[0],wt=Qt[1],D=Qt[2],rt=Qt[3];return _t[0]=Tt*rt+dt*bt+Zt*D-Ee*wt,_t[1]=Zt*rt+dt*wt+Ee*bt-Tt*D,_t[2]=Ee*rt+dt*D+Tt*wt-Zt*bt,_t[3]=dt*rt-Tt*bt-Zt*wt-Ee*D,_t}function g(_t,jt,Qt){Qt*=.5;var Tt=jt[0],Zt=jt[1],Ee=jt[2],dt=jt[3],bt=Math.sin(Qt),wt=Math.cos(Qt);return _t[0]=Tt*wt+dt*bt,_t[1]=Zt*wt+Ee*bt,_t[2]=Ee*wt-Zt*bt,_t[3]=dt*wt-Tt*bt,_t}function I(_t,jt,Qt){Qt*=.5;var Tt=jt[0],Zt=jt[1],Ee=jt[2],dt=jt[3],bt=Math.sin(Qt),wt=Math.cos(Qt);return _t[0]=Tt*wt-Ee*bt,_t[1]=Zt*wt+dt*bt,_t[2]=Ee*wt+Tt*bt,_t[3]=dt*wt-Zt*bt,_t}function _(_t,jt,Qt){Qt*=.5;var Tt=jt[0],Zt=jt[1],Ee=jt[2],dt=jt[3],bt=Math.sin(Qt),wt=Math.cos(Qt);return _t[0]=Tt*wt+Zt*bt,_t[1]=Zt*wt-Tt*bt,_t[2]=Ee*wt+dt*bt,_t[3]=dt*wt-Ee*bt,_t}function C(_t,jt){var Qt=jt[0],Tt=jt[1],Zt=jt[2];return _t[0]=Qt,_t[1]=Tt,_t[2]=Zt,_t[3]=Math.sqrt(Math.abs(1-Qt*Qt-Tt*Tt-Zt*Zt)),_t}function O(_t,jt){var Qt=jt[0],Tt=jt[1],Zt=jt[2],Ee=jt[3],dt=Math.sqrt(Qt*Qt+Tt*Tt+Zt*Zt),bt=Math.exp(Ee),wt=dt>0?bt*Math.sin(dt)/dt:0;return _t[0]=Qt*wt,_t[1]=Tt*wt,_t[2]=Zt*wt,_t[3]=bt*Math.cos(dt),_t}function b(_t,jt){var Qt=jt[0],Tt=jt[1],Zt=jt[2],Ee=jt[3],dt=Math.sqrt(Qt*Qt+Tt*Tt+Zt*Zt),bt=dt>0?Math.atan2(dt,Ee)/dt:0;return _t[0]=Qt*bt,_t[1]=Tt*bt,_t[2]=Zt*bt,_t[3]=.5*Math.log(Qt*Qt+Tt*Tt+Zt*Zt+Ee*Ee),_t}function l(_t,jt,Qt){return b(_t,jt),re(_t,_t,Qt),O(_t,_t),_t}function K(_t,jt,Qt,Tt){var Zt=jt[0],Ee=jt[1],dt=jt[2],bt=jt[3],wt=Qt[0],D=Qt[1],rt=Qt[2],Nt=Qt[3],ft,ie,ge,Ge,Re;return ie=Zt*wt+Ee*D+dt*rt+bt*Nt,ie<0&&(ie=-ie,wt=-wt,D=-D,rt=-rt,Nt=-Nt),1-ie>x.EPSILON?(ft=Math.acos(ie),ge=Math.sin(ft),Ge=Math.sin((1-Tt)*ft)/ge,Re=Math.sin(Tt*ft)/ge):(Ge=1-Tt,Re=Tt),_t[0]=Ge*Zt+Re*wt,_t[1]=Ge*Ee+Re*D,_t[2]=Ge*dt+Re*rt,_t[3]=Ge*bt+Re*Nt,_t}function Z(_t){var jt=x.RANDOM(),Qt=x.RANDOM(),Tt=x.RANDOM(),Zt=Math.sqrt(1-jt),Ee=Math.sqrt(jt);return _t[0]=Zt*Math.sin(2*Math.PI*Qt),_t[1]=Zt*Math.cos(2*Math.PI*Qt),_t[2]=Ee*Math.sin(2*Math.PI*Tt),_t[3]=Ee*Math.cos(2*Math.PI*Tt),_t}function X(_t,jt){var Qt=jt[0],Tt=jt[1],Zt=jt[2],Ee=jt[3],dt=Qt*Qt+Tt*Tt+Zt*Zt+Ee*Ee,bt=dt?1/dt:0;return _t[0]=-Qt*bt,_t[1]=-Tt*bt,_t[2]=-Zt*bt,_t[3]=Ee*bt,_t}function W(_t,jt){return _t[0]=-jt[0],_t[1]=-jt[1],_t[2]=-jt[2],_t[3]=jt[3],_t}function U(_t,jt){var Qt=jt[0]+jt[4]+jt[8],Tt;if(Qt>0)Tt=Math.sqrt(Qt+1),_t[3]=.5*Tt,Tt=.5/Tt,_t[0]=(jt[5]-jt[7])*Tt,_t[1]=(jt[6]-jt[2])*Tt,_t[2]=(jt[1]-jt[3])*Tt;else{var Zt=0;jt[4]>jt[0]&&(Zt=1),jt[8]>jt[Zt*3+Zt]&&(Zt=2);var Ee=(Zt+1)%3,dt=(Zt+2)%3;Tt=Math.sqrt(jt[Zt*3+Zt]-jt[Ee*3+Ee]-jt[dt*3+dt]+1),_t[Zt]=.5*Tt,Tt=.5/Tt,_t[3]=(jt[Ee*3+dt]-jt[dt*3+Ee])*Tt,_t[Ee]=(jt[Ee*3+Zt]+jt[Zt*3+Ee])*Tt,_t[dt]=(jt[dt*3+Zt]+jt[Zt*3+dt])*Tt}return _t}function et(_t,jt,Qt,Tt){var Zt=.5*Math.PI/180;jt*=Zt,Qt*=Zt,Tt*=Zt;var Ee=Math.sin(jt),dt=Math.cos(jt),bt=Math.sin(Qt),wt=Math.cos(Qt),D=Math.sin(Tt),rt=Math.cos(Tt);return _t[0]=Ee*wt*rt-dt*bt*D,_t[1]=dt*bt*rt+Ee*wt*D,_t[2]=dt*wt*D-Ee*bt*rt,_t[3]=dt*wt*rt+Ee*bt*D,_t}function at(_t){return"quat("+_t[0]+", "+_t[1]+", "+_t[2]+", "+_t[3]+")"}var J=E.clone,nt=E.fromValues,mt=E.copy,Mt=E.set,vt=E.add,zt=p,re=E.scale,Rt=E.dot,At=E.lerp,Q=E.length,gt=Q,Vt=E.squaredLength,Ht=Vt,It=E.normalize,de=E.exactEquals,De=E.equals,Ye=function(){var _t=k.create(),jt=k.fromValues(1,0,0),Qt=k.fromValues(0,1,0);return function(Tt,Zt,Ee){var dt=k.dot(Zt,Ee);return dt<-.999999?(k.cross(_t,jt,Zt),k.len(_t)<1e-6&&k.cross(_t,Qt,Zt),k.normalize(_t,_t),m(Tt,_t,Math.PI),Tt):dt>.999999?(Tt[0]=0,Tt[1]=0,Tt[2]=0,Tt[3]=1,Tt):(k.cross(_t,Zt,Ee),Tt[0]=_t[0],Tt[1]=_t[1],Tt[2]=_t[2],Tt[3]=1+dt,It(Tt,Tt))}}(),kt=function(){var _t=N(),jt=N();return function(Qt,Tt,Zt,Ee,dt,bt){return K(_t,Tt,dt,bt),K(jt,Zt,Ee,bt),K(Qt,_t,jt,2*bt*(1-bt)),Qt}}(),Pt=function(){var _t=z.create();return function(jt,Qt,Tt,Zt){return _t[0]=Tt[0],_t[3]=Tt[1],_t[6]=Tt[2],_t[1]=Zt[0],_t[4]=Zt[1],_t[7]=Zt[2],_t[2]=-Qt[0],_t[5]=-Qt[1],_t[8]=-Qt[2],It(jt,U(jt,_t))}}()},20663:function(ae,w,S){"use strict";S.r(w),S.d(w,{add:function(){return m},angle:function(){return Q},ceil:function(){return g},clone:function(){return k},copy:function(){return N},create:function(){return z},cross:function(){return nt},dist:function(){return Pt},distance:function(){return K},div:function(){return kt},divide:function(){return p},dot:function(){return J},equals:function(){return It},exactEquals:function(){return Ht},floor:function(){return I},forEach:function(){return Qt},fromValues:function(){return E},inverse:function(){return et},len:function(){return de},length:function(){return X},lerp:function(){return mt},max:function(){return C},min:function(){return _},mul:function(){return Ye},multiply:function(){return v},negate:function(){return U},normalize:function(){return at},random:function(){return Mt},rotate:function(){return At},round:function(){return O},scale:function(){return b},scaleAndAdd:function(){return l},set:function(){return T},sqrDist:function(){return _t},sqrLen:function(){return jt},squaredDistance:function(){return Z},squaredLength:function(){return W},str:function(){return Vt},sub:function(){return De},subtract:function(){return y},transformMat2:function(){return vt},transformMat2d:function(){return zt},transformMat3:function(){return re},transformMat4:function(){return Rt},zero:function(){return gt}});var x=S(47897);function z(){var Tt=new x.ARRAY_TYPE(2);return x.ARRAY_TYPE!=Float32Array&&(Tt[0]=0,Tt[1]=0),Tt}function k(Tt){var Zt=new x.ARRAY_TYPE(2);return Zt[0]=Tt[0],Zt[1]=Tt[1],Zt}function E(Tt,Zt){var Ee=new x.ARRAY_TYPE(2);return Ee[0]=Tt,Ee[1]=Zt,Ee}function N(Tt,Zt){return Tt[0]=Zt[0],Tt[1]=Zt[1],Tt}function T(Tt,Zt,Ee){return Tt[0]=Zt,Tt[1]=Ee,Tt}function m(Tt,Zt,Ee){return Tt[0]=Zt[0]+Ee[0],Tt[1]=Zt[1]+Ee[1],Tt}function y(Tt,Zt,Ee){return Tt[0]=Zt[0]-Ee[0],Tt[1]=Zt[1]-Ee[1],Tt}function v(Tt,Zt,Ee){return Tt[0]=Zt[0]*Ee[0],Tt[1]=Zt[1]*Ee[1],Tt}function p(Tt,Zt,Ee){return Tt[0]=Zt[0]/Ee[0],Tt[1]=Zt[1]/Ee[1],Tt}function g(Tt,Zt){return Tt[0]=Math.ceil(Zt[0]),Tt[1]=Math.ceil(Zt[1]),Tt}function I(Tt,Zt){return Tt[0]=Math.floor(Zt[0]),Tt[1]=Math.floor(Zt[1]),Tt}function _(Tt,Zt,Ee){return Tt[0]=Math.min(Zt[0],Ee[0]),Tt[1]=Math.min(Zt[1],Ee[1]),Tt}function C(Tt,Zt,Ee){return Tt[0]=Math.max(Zt[0],Ee[0]),Tt[1]=Math.max(Zt[1],Ee[1]),Tt}function O(Tt,Zt){return Tt[0]=Math.round(Zt[0]),Tt[1]=Math.round(Zt[1]),Tt}function b(Tt,Zt,Ee){return Tt[0]=Zt[0]*Ee,Tt[1]=Zt[1]*Ee,Tt}function l(Tt,Zt,Ee,dt){return Tt[0]=Zt[0]+Ee[0]*dt,Tt[1]=Zt[1]+Ee[1]*dt,Tt}function K(Tt,Zt){var Ee=Zt[0]-Tt[0],dt=Zt[1]-Tt[1];return Math.hypot(Ee,dt)}function Z(Tt,Zt){var Ee=Zt[0]-Tt[0],dt=Zt[1]-Tt[1];return Ee*Ee+dt*dt}function X(Tt){var Zt=Tt[0],Ee=Tt[1];return Math.hypot(Zt,Ee)}function W(Tt){var Zt=Tt[0],Ee=Tt[1];return Zt*Zt+Ee*Ee}function U(Tt,Zt){return Tt[0]=-Zt[0],Tt[1]=-Zt[1],Tt}function et(Tt,Zt){return Tt[0]=1/Zt[0],Tt[1]=1/Zt[1],Tt}function at(Tt,Zt){var Ee=Zt[0],dt=Zt[1],bt=Ee*Ee+dt*dt;return bt>0&&(bt=1/Math.sqrt(bt)),Tt[0]=Zt[0]*bt,Tt[1]=Zt[1]*bt,Tt}function J(Tt,Zt){return Tt[0]*Zt[0]+Tt[1]*Zt[1]}function nt(Tt,Zt,Ee){var dt=Zt[0]*Ee[1]-Zt[1]*Ee[0];return Tt[0]=Tt[1]=0,Tt[2]=dt,Tt}function mt(Tt,Zt,Ee,dt){var bt=Zt[0],wt=Zt[1];return Tt[0]=bt+dt*(Ee[0]-bt),Tt[1]=wt+dt*(Ee[1]-wt),Tt}function Mt(Tt,Zt){Zt=Zt||1;var Ee=x.RANDOM()*2*Math.PI;return Tt[0]=Math.cos(Ee)*Zt,Tt[1]=Math.sin(Ee)*Zt,Tt}function vt(Tt,Zt,Ee){var dt=Zt[0],bt=Zt[1];return Tt[0]=Ee[0]*dt+Ee[2]*bt,Tt[1]=Ee[1]*dt+Ee[3]*bt,Tt}function zt(Tt,Zt,Ee){var dt=Zt[0],bt=Zt[1];return Tt[0]=Ee[0]*dt+Ee[2]*bt+Ee[4],Tt[1]=Ee[1]*dt+Ee[3]*bt+Ee[5],Tt}function re(Tt,Zt,Ee){var dt=Zt[0],bt=Zt[1];return Tt[0]=Ee[0]*dt+Ee[3]*bt+Ee[6],Tt[1]=Ee[1]*dt+Ee[4]*bt+Ee[7],Tt}function Rt(Tt,Zt,Ee){var dt=Zt[0],bt=Zt[1];return Tt[0]=Ee[0]*dt+Ee[4]*bt+Ee[12],Tt[1]=Ee[1]*dt+Ee[5]*bt+Ee[13],Tt}function At(Tt,Zt,Ee,dt){var bt=Zt[0]-Ee[0],wt=Zt[1]-Ee[1],D=Math.sin(dt),rt=Math.cos(dt);return Tt[0]=bt*rt-wt*D+Ee[0],Tt[1]=bt*D+wt*rt+Ee[1],Tt}function Q(Tt,Zt){var Ee=Tt[0],dt=Tt[1],bt=Zt[0],wt=Zt[1],D=Math.sqrt(Ee*Ee+dt*dt)*Math.sqrt(bt*bt+wt*wt),rt=D&&(Ee*bt+dt*wt)/D;return Math.acos(Math.min(Math.max(rt,-1),1))}function gt(Tt){return Tt[0]=0,Tt[1]=0,Tt}function Vt(Tt){return"vec2("+Tt[0]+", "+Tt[1]+")"}function Ht(Tt,Zt){return Tt[0]===Zt[0]&&Tt[1]===Zt[1]}function It(Tt,Zt){var Ee=Tt[0],dt=Tt[1],bt=Zt[0],wt=Zt[1];return Math.abs(Ee-bt)<=x.EPSILON*Math.max(1,Math.abs(Ee),Math.abs(bt))&&Math.abs(dt-wt)<=x.EPSILON*Math.max(1,Math.abs(dt),Math.abs(wt))}var de=X,De=y,Ye=v,kt=p,Pt=K,_t=Z,jt=W,Qt=function(){var Tt=z();return function(Zt,Ee,dt,bt,wt,D){var rt,Nt;for(Ee||(Ee=2),dt||(dt=0),bt?Nt=Math.min(bt*Ee+dt,Zt.length):Nt=Zt.length,rt=dt;rt<Nt;rt+=Ee)Tt[0]=Zt[rt],Tt[1]=Zt[rt+1],wt(Tt,Tt,D),Zt[rt]=Tt[0],Zt[rt+1]=Tt[1];return Zt}}()},91606:function(ae,w,S){"use strict";S.r(w),S.d(w,{add:function(){return y},angle:function(){return Ht},bezier:function(){return vt},ceil:function(){return I},clone:function(){return k},copy:function(){return T},create:function(){return z},cross:function(){return nt},dist:function(){return jt},distance:function(){return Z},div:function(){return _t},divide:function(){return g},dot:function(){return J},equals:function(){return Ye},exactEquals:function(){return De},floor:function(){return _},forEach:function(){return Ee},fromValues:function(){return N},hermite:function(){return Mt},inverse:function(){return et},len:function(){return Tt},length:function(){return E},lerp:function(){return mt},max:function(){return O},min:function(){return C},mul:function(){return Pt},multiply:function(){return p},negate:function(){return U},normalize:function(){return at},random:function(){return zt},rotateX:function(){return Q},rotateY:function(){return gt},rotateZ:function(){return Vt},round:function(){return b},scale:function(){return l},scaleAndAdd:function(){return K},set:function(){return m},sqrDist:function(){return Qt},sqrLen:function(){return Zt},squaredDistance:function(){return X},squaredLength:function(){return W},str:function(){return de},sub:function(){return kt},subtract:function(){return v},transformMat3:function(){return Rt},transformMat4:function(){return re},transformQuat:function(){return At},zero:function(){return It}});var x=S(47897);function z(){var dt=new x.ARRAY_TYPE(3);return x.ARRAY_TYPE!=Float32Array&&(dt[0]=0,dt[1]=0,dt[2]=0),dt}function k(dt){var bt=new x.ARRAY_TYPE(3);return bt[0]=dt[0],bt[1]=dt[1],bt[2]=dt[2],bt}function E(dt){var bt=dt[0],wt=dt[1],D=dt[2];return Math.hypot(bt,wt,D)}function N(dt,bt,wt){var D=new x.ARRAY_TYPE(3);return D[0]=dt,D[1]=bt,D[2]=wt,D}function T(dt,bt){return dt[0]=bt[0],dt[1]=bt[1],dt[2]=bt[2],dt}function m(dt,bt,wt,D){return dt[0]=bt,dt[1]=wt,dt[2]=D,dt}function y(dt,bt,wt){return dt[0]=bt[0]+wt[0],dt[1]=bt[1]+wt[1],dt[2]=bt[2]+wt[2],dt}function v(dt,bt,wt){return dt[0]=bt[0]-wt[0],dt[1]=bt[1]-wt[1],dt[2]=bt[2]-wt[2],dt}function p(dt,bt,wt){return dt[0]=bt[0]*wt[0],dt[1]=bt[1]*wt[1],dt[2]=bt[2]*wt[2],dt}function g(dt,bt,wt){return dt[0]=bt[0]/wt[0],dt[1]=bt[1]/wt[1],dt[2]=bt[2]/wt[2],dt}function I(dt,bt){return dt[0]=Math.ceil(bt[0]),dt[1]=Math.ceil(bt[1]),dt[2]=Math.ceil(bt[2]),dt}function _(dt,bt){return dt[0]=Math.floor(bt[0]),dt[1]=Math.floor(bt[1]),dt[2]=Math.floor(bt[2]),dt}function C(dt,bt,wt){return dt[0]=Math.min(bt[0],wt[0]),dt[1]=Math.min(bt[1],wt[1]),dt[2]=Math.min(bt[2],wt[2]),dt}function O(dt,bt,wt){return dt[0]=Math.max(bt[0],wt[0]),dt[1]=Math.max(bt[1],wt[1]),dt[2]=Math.max(bt[2],wt[2]),dt}function b(dt,bt){return dt[0]=Math.round(bt[0]),dt[1]=Math.round(bt[1]),dt[2]=Math.round(bt[2]),dt}function l(dt,bt,wt){return dt[0]=bt[0]*wt,dt[1]=bt[1]*wt,dt[2]=bt[2]*wt,dt}function K(dt,bt,wt,D){return dt[0]=bt[0]+wt[0]*D,dt[1]=bt[1]+wt[1]*D,dt[2]=bt[2]+wt[2]*D,dt}function Z(dt,bt){var wt=bt[0]-dt[0],D=bt[1]-dt[1],rt=bt[2]-dt[2];return Math.hypot(wt,D,rt)}function X(dt,bt){var wt=bt[0]-dt[0],D=bt[1]-dt[1],rt=bt[2]-dt[2];return wt*wt+D*D+rt*rt}function W(dt){var bt=dt[0],wt=dt[1],D=dt[2];return bt*bt+wt*wt+D*D}function U(dt,bt){return dt[0]=-bt[0],dt[1]=-bt[1],dt[2]=-bt[2],dt}function et(dt,bt){return dt[0]=1/bt[0],dt[1]=1/bt[1],dt[2]=1/bt[2],dt}function at(dt,bt){var wt=bt[0],D=bt[1],rt=bt[2],Nt=wt*wt+D*D+rt*rt;return Nt>0&&(Nt=1/Math.sqrt(Nt)),dt[0]=bt[0]*Nt,dt[1]=bt[1]*Nt,dt[2]=bt[2]*Nt,dt}function J(dt,bt){return dt[0]*bt[0]+dt[1]*bt[1]+dt[2]*bt[2]}function nt(dt,bt,wt){var D=bt[0],rt=bt[1],Nt=bt[2],ft=wt[0],ie=wt[1],ge=wt[2];return dt[0]=rt*ge-Nt*ie,dt[1]=Nt*ft-D*ge,dt[2]=D*ie-rt*ft,dt}function mt(dt,bt,wt,D){var rt=bt[0],Nt=bt[1],ft=bt[2];return dt[0]=rt+D*(wt[0]-rt),dt[1]=Nt+D*(wt[1]-Nt),dt[2]=ft+D*(wt[2]-ft),dt}function Mt(dt,bt,wt,D,rt,Nt){var ft=Nt*Nt,ie=ft*(2*Nt-3)+1,ge=ft*(Nt-2)+Nt,Ge=ft*(Nt-1),Re=ft*(3-2*Nt);return dt[0]=bt[0]*ie+wt[0]*ge+D[0]*Ge+rt[0]*Re,dt[1]=bt[1]*ie+wt[1]*ge+D[1]*Ge+rt[1]*Re,dt[2]=bt[2]*ie+wt[2]*ge+D[2]*Ge+rt[2]*Re,dt}function vt(dt,bt,wt,D,rt,Nt){var ft=1-Nt,ie=ft*ft,ge=Nt*Nt,Ge=ie*ft,Re=3*Nt*ie,qe=3*ge*ft,Ve=ge*Nt;return dt[0]=bt[0]*Ge+wt[0]*Re+D[0]*qe+rt[0]*Ve,dt[1]=bt[1]*Ge+wt[1]*Re+D[1]*qe+rt[1]*Ve,dt[2]=bt[2]*Ge+wt[2]*Re+D[2]*qe+rt[2]*Ve,dt}function zt(dt,bt){bt=bt||1;var wt=x.RANDOM()*2*Math.PI,D=x.RANDOM()*2-1,rt=Math.sqrt(1-D*D)*bt;return dt[0]=Math.cos(wt)*rt,dt[1]=Math.sin(wt)*rt,dt[2]=D*bt,dt}function re(dt,bt,wt){var D=bt[0],rt=bt[1],Nt=bt[2],ft=wt[3]*D+wt[7]*rt+wt[11]*Nt+wt[15];return ft=ft||1,dt[0]=(wt[0]*D+wt[4]*rt+wt[8]*Nt+wt[12])/ft,dt[1]=(wt[1]*D+wt[5]*rt+wt[9]*Nt+wt[13])/ft,dt[2]=(wt[2]*D+wt[6]*rt+wt[10]*Nt+wt[14])/ft,dt}function Rt(dt,bt,wt){var D=bt[0],rt=bt[1],Nt=bt[2];return dt[0]=D*wt[0]+rt*wt[3]+Nt*wt[6],dt[1]=D*wt[1]+rt*wt[4]+Nt*wt[7],dt[2]=D*wt[2]+rt*wt[5]+Nt*wt[8],dt}function At(dt,bt,wt){var D=wt[0],rt=wt[1],Nt=wt[2],ft=wt[3],ie=bt[0],ge=bt[1],Ge=bt[2],Re=rt*Ge-Nt*ge,qe=Nt*ie-D*Ge,Ve=D*ge-rt*ie,le=rt*Ve-Nt*qe,Le=Nt*Re-D*Ve,je=D*qe-rt*Re,Be=ft*2;return Re*=Be,qe*=Be,Ve*=Be,le*=2,Le*=2,je*=2,dt[0]=ie+Re+le,dt[1]=ge+qe+Le,dt[2]=Ge+Ve+je,dt}function Q(dt,bt,wt,D){var rt=[],Nt=[];return rt[0]=bt[0]-wt[0],rt[1]=bt[1]-wt[1],rt[2]=bt[2]-wt[2],Nt[0]=rt[0],Nt[1]=rt[1]*Math.cos(D)-rt[2]*Math.sin(D),Nt[2]=rt[1]*Math.sin(D)+rt[2]*Math.cos(D),dt[0]=Nt[0]+wt[0],dt[1]=Nt[1]+wt[1],dt[2]=Nt[2]+wt[2],dt}function gt(dt,bt,wt,D){var rt=[],Nt=[];return rt[0]=bt[0]-wt[0],rt[1]=bt[1]-wt[1],rt[2]=bt[2]-wt[2],Nt[0]=rt[2]*Math.sin(D)+rt[0]*Math.cos(D),Nt[1]=rt[1],Nt[2]=rt[2]*Math.cos(D)-rt[0]*Math.sin(D),dt[0]=Nt[0]+wt[0],dt[1]=Nt[1]+wt[1],dt[2]=Nt[2]+wt[2],dt}function Vt(dt,bt,wt,D){var rt=[],Nt=[];return rt[0]=bt[0]-wt[0],rt[1]=bt[1]-wt[1],rt[2]=bt[2]-wt[2],Nt[0]=rt[0]*Math.cos(D)-rt[1]*Math.sin(D),Nt[1]=rt[0]*Math.sin(D)+rt[1]*Math.cos(D),Nt[2]=rt[2],dt[0]=Nt[0]+wt[0],dt[1]=Nt[1]+wt[1],dt[2]=Nt[2]+wt[2],dt}function Ht(dt,bt){var wt=dt[0],D=dt[1],rt=dt[2],Nt=bt[0],ft=bt[1],ie=bt[2],ge=Math.sqrt(wt*wt+D*D+rt*rt),Ge=Math.sqrt(Nt*Nt+ft*ft+ie*ie),Re=ge*Ge,qe=Re&&J(dt,bt)/Re;return Math.acos(Math.min(Math.max(qe,-1),1))}function It(dt){return dt[0]=0,dt[1]=0,dt[2]=0,dt}function de(dt){return"vec3("+dt[0]+", "+dt[1]+", "+dt[2]+")"}function De(dt,bt){return dt[0]===bt[0]&&dt[1]===bt[1]&&dt[2]===bt[2]}function Ye(dt,bt){var wt=dt[0],D=dt[1],rt=dt[2],Nt=bt[0],ft=bt[1],ie=bt[2];return Math.abs(wt-Nt)<=x.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Nt))&&Math.abs(D-ft)<=x.EPSILON*Math.max(1,Math.abs(D),Math.abs(ft))&&Math.abs(rt-ie)<=x.EPSILON*Math.max(1,Math.abs(rt),Math.abs(ie))}var kt=v,Pt=p,_t=g,jt=Z,Qt=X,Tt=E,Zt=W,Ee=function(){var dt=z();return function(bt,wt,D,rt,Nt,ft){var ie,ge;for(wt||(wt=3),D||(D=0),rt?ge=Math.min(rt*wt+D,bt.length):ge=bt.length,ie=D;ie<ge;ie+=wt)dt[0]=bt[ie],dt[1]=bt[ie+1],dt[2]=bt[ie+2],Nt(dt,dt,ft),bt[ie]=dt[0],bt[ie+1]=dt[1],bt[ie+2]=dt[2];return bt}}()},59196:function(ae,w,S){"use strict";S.r(w),S.d(w,{add:function(){return m},ceil:function(){return g},clone:function(){return k},copy:function(){return N},create:function(){return z},cross:function(){return nt},dist:function(){return It},distance:function(){return K},div:function(){return Ht},divide:function(){return p},dot:function(){return J},equals:function(){return Q},exactEquals:function(){return At},floor:function(){return I},forEach:function(){return kt},fromValues:function(){return E},inverse:function(){return et},len:function(){return De},length:function(){return X},lerp:function(){return mt},max:function(){return C},min:function(){return _},mul:function(){return Vt},multiply:function(){return v},negate:function(){return U},normalize:function(){return at},random:function(){return Mt},round:function(){return O},scale:function(){return b},scaleAndAdd:function(){return l},set:function(){return T},sqrDist:function(){return de},sqrLen:function(){return Ye},squaredDistance:function(){return Z},squaredLength:function(){return W},str:function(){return Rt},sub:function(){return gt},subtract:function(){return y},transformMat4:function(){return vt},transformQuat:function(){return zt},zero:function(){return re}});var x=S(47897);function z(){var Pt=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(Pt[0]=0,Pt[1]=0,Pt[2]=0,Pt[3]=0),Pt}function k(Pt){var _t=new x.ARRAY_TYPE(4);return _t[0]=Pt[0],_t[1]=Pt[1],_t[2]=Pt[2],_t[3]=Pt[3],_t}function E(Pt,_t,jt,Qt){var Tt=new x.ARRAY_TYPE(4);return Tt[0]=Pt,Tt[1]=_t,Tt[2]=jt,Tt[3]=Qt,Tt}function N(Pt,_t){return Pt[0]=_t[0],Pt[1]=_t[1],Pt[2]=_t[2],Pt[3]=_t[3],Pt}function T(Pt,_t,jt,Qt,Tt){return Pt[0]=_t,Pt[1]=jt,Pt[2]=Qt,Pt[3]=Tt,Pt}function m(Pt,_t,jt){return Pt[0]=_t[0]+jt[0],Pt[1]=_t[1]+jt[1],Pt[2]=_t[2]+jt[2],Pt[3]=_t[3]+jt[3],Pt}function y(Pt,_t,jt){return Pt[0]=_t[0]-jt[0],Pt[1]=_t[1]-jt[1],Pt[2]=_t[2]-jt[2],Pt[3]=_t[3]-jt[3],Pt}function v(Pt,_t,jt){return Pt[0]=_t[0]*jt[0],Pt[1]=_t[1]*jt[1],Pt[2]=_t[2]*jt[2],Pt[3]=_t[3]*jt[3],Pt}function p(Pt,_t,jt){return Pt[0]=_t[0]/jt[0],Pt[1]=_t[1]/jt[1],Pt[2]=_t[2]/jt[2],Pt[3]=_t[3]/jt[3],Pt}function g(Pt,_t){return Pt[0]=Math.ceil(_t[0]),Pt[1]=Math.ceil(_t[1]),Pt[2]=Math.ceil(_t[2]),Pt[3]=Math.ceil(_t[3]),Pt}function I(Pt,_t){return Pt[0]=Math.floor(_t[0]),Pt[1]=Math.floor(_t[1]),Pt[2]=Math.floor(_t[2]),Pt[3]=Math.floor(_t[3]),Pt}function _(Pt,_t,jt){return Pt[0]=Math.min(_t[0],jt[0]),Pt[1]=Math.min(_t[1],jt[1]),Pt[2]=Math.min(_t[2],jt[2]),Pt[3]=Math.min(_t[3],jt[3]),Pt}function C(Pt,_t,jt){return Pt[0]=Math.max(_t[0],jt[0]),Pt[1]=Math.max(_t[1],jt[1]),Pt[2]=Math.max(_t[2],jt[2]),Pt[3]=Math.max(_t[3],jt[3]),Pt}function O(Pt,_t){return Pt[0]=Math.round(_t[0]),Pt[1]=Math.round(_t[1]),Pt[2]=Math.round(_t[2]),Pt[3]=Math.round(_t[3]),Pt}function b(Pt,_t,jt){return Pt[0]=_t[0]*jt,Pt[1]=_t[1]*jt,Pt[2]=_t[2]*jt,Pt[3]=_t[3]*jt,Pt}function l(Pt,_t,jt,Qt){return Pt[0]=_t[0]+jt[0]*Qt,Pt[1]=_t[1]+jt[1]*Qt,Pt[2]=_t[2]+jt[2]*Qt,Pt[3]=_t[3]+jt[3]*Qt,Pt}function K(Pt,_t){var jt=_t[0]-Pt[0],Qt=_t[1]-Pt[1],Tt=_t[2]-Pt[2],Zt=_t[3]-Pt[3];return Math.hypot(jt,Qt,Tt,Zt)}function Z(Pt,_t){var jt=_t[0]-Pt[0],Qt=_t[1]-Pt[1],Tt=_t[2]-Pt[2],Zt=_t[3]-Pt[3];return jt*jt+Qt*Qt+Tt*Tt+Zt*Zt}function X(Pt){var _t=Pt[0],jt=Pt[1],Qt=Pt[2],Tt=Pt[3];return Math.hypot(_t,jt,Qt,Tt)}function W(Pt){var _t=Pt[0],jt=Pt[1],Qt=Pt[2],Tt=Pt[3];return _t*_t+jt*jt+Qt*Qt+Tt*Tt}function U(Pt,_t){return Pt[0]=-_t[0],Pt[1]=-_t[1],Pt[2]=-_t[2],Pt[3]=-_t[3],Pt}function et(Pt,_t){return Pt[0]=1/_t[0],Pt[1]=1/_t[1],Pt[2]=1/_t[2],Pt[3]=1/_t[3],Pt}function at(Pt,_t){var jt=_t[0],Qt=_t[1],Tt=_t[2],Zt=_t[3],Ee=jt*jt+Qt*Qt+Tt*Tt+Zt*Zt;return Ee>0&&(Ee=1/Math.sqrt(Ee)),Pt[0]=jt*Ee,Pt[1]=Qt*Ee,Pt[2]=Tt*Ee,Pt[3]=Zt*Ee,Pt}function J(Pt,_t){return Pt[0]*_t[0]+Pt[1]*_t[1]+Pt[2]*_t[2]+Pt[3]*_t[3]}function nt(Pt,_t,jt,Qt){var Tt=jt[0]*Qt[1]-jt[1]*Qt[0],Zt=jt[0]*Qt[2]-jt[2]*Qt[0],Ee=jt[0]*Qt[3]-jt[3]*Qt[0],dt=jt[1]*Qt[2]-jt[2]*Qt[1],bt=jt[1]*Qt[3]-jt[3]*Qt[1],wt=jt[2]*Qt[3]-jt[3]*Qt[2],D=_t[0],rt=_t[1],Nt=_t[2],ft=_t[3];return Pt[0]=rt*wt-Nt*bt+ft*dt,Pt[1]=-(D*wt)+Nt*Ee-ft*Zt,Pt[2]=D*bt-rt*Ee+ft*Tt,Pt[3]=-(D*dt)+rt*Zt-Nt*Tt,Pt}function mt(Pt,_t,jt,Qt){var Tt=_t[0],Zt=_t[1],Ee=_t[2],dt=_t[3];return Pt[0]=Tt+Qt*(jt[0]-Tt),Pt[1]=Zt+Qt*(jt[1]-Zt),Pt[2]=Ee+Qt*(jt[2]-Ee),Pt[3]=dt+Qt*(jt[3]-dt),Pt}function Mt(Pt,_t){_t=_t||1;var jt,Qt,Tt,Zt,Ee,dt;do jt=x.RANDOM()*2-1,Qt=x.RANDOM()*2-1,Ee=jt*jt+Qt*Qt;while(Ee>=1);do Tt=x.RANDOM()*2-1,Zt=x.RANDOM()*2-1,dt=Tt*Tt+Zt*Zt;while(dt>=1);var bt=Math.sqrt((1-Ee)/dt);return Pt[0]=_t*jt,Pt[1]=_t*Qt,Pt[2]=_t*Tt*bt,Pt[3]=_t*Zt*bt,Pt}function vt(Pt,_t,jt){var Qt=_t[0],Tt=_t[1],Zt=_t[2],Ee=_t[3];return Pt[0]=jt[0]*Qt+jt[4]*Tt+jt[8]*Zt+jt[12]*Ee,Pt[1]=jt[1]*Qt+jt[5]*Tt+jt[9]*Zt+jt[13]*Ee,Pt[2]=jt[2]*Qt+jt[6]*Tt+jt[10]*Zt+jt[14]*Ee,Pt[3]=jt[3]*Qt+jt[7]*Tt+jt[11]*Zt+jt[15]*Ee,Pt}function zt(Pt,_t,jt){var Qt=_t[0],Tt=_t[1],Zt=_t[2],Ee=jt[0],dt=jt[1],bt=jt[2],wt=jt[3],D=wt*Qt+dt*Zt-bt*Tt,rt=wt*Tt+bt*Qt-Ee*Zt,Nt=wt*Zt+Ee*Tt-dt*Qt,ft=-Ee*Qt-dt*Tt-bt*Zt;return Pt[0]=D*wt+ft*-Ee+rt*-bt-Nt*-dt,Pt[1]=rt*wt+ft*-dt+Nt*-Ee-D*-bt,Pt[2]=Nt*wt+ft*-bt+D*-dt-rt*-Ee,Pt[3]=_t[3],Pt}function re(Pt){return Pt[0]=0,Pt[1]=0,Pt[2]=0,Pt[3]=0,Pt}function Rt(Pt){return"vec4("+Pt[0]+", "+Pt[1]+", "+Pt[2]+", "+Pt[3]+")"}function At(Pt,_t){return Pt[0]===_t[0]&&Pt[1]===_t[1]&&Pt[2]===_t[2]&&Pt[3]===_t[3]}function Q(Pt,_t){var jt=Pt[0],Qt=Pt[1],Tt=Pt[2],Zt=Pt[3],Ee=_t[0],dt=_t[1],bt=_t[2],wt=_t[3];return Math.abs(jt-Ee)<=x.EPSILON*Math.max(1,Math.abs(jt),Math.abs(Ee))&&Math.abs(Qt-dt)<=x.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(dt))&&Math.abs(Tt-bt)<=x.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(bt))&&Math.abs(Zt-wt)<=x.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(wt))}var gt=y,Vt=v,Ht=p,It=K,de=Z,De=X,Ye=W,kt=function(){var Pt=z();return function(_t,jt,Qt,Tt,Zt,Ee){var dt,bt;for(jt||(jt=4),Qt||(Qt=0),Tt?bt=Math.min(Tt*jt+Qt,_t.length):bt=_t.length,dt=Qt;dt<bt;dt+=jt)Pt[0]=_t[dt],Pt[1]=_t[dt+1],Pt[2]=_t[dt+2],Pt[3]=_t[dt+3],Zt(Pt,Pt,Ee),_t[dt]=Pt[0],_t[dt+1]=Pt[1],_t[dt+2]=Pt[2],_t[dt+3]=Pt[3];return _t}}()},60330:function(ae){ae.exports=w;function w(S,x,z){return S[0]=x[0]+z[0],S[1]=x[1]+z[1],S}},56895:function(ae){ae.exports=w;function w(S,x){return S[0]=Math.ceil(x[0]),S[1]=Math.ceil(x[1]),S}},24577:function(ae){ae.exports=w;function w(S){var x=new Float32Array(2);return x[0]=S[0],x[1]=S[1],x}},79927:function(ae){ae.exports=w;function w(S,x){return S[0]=x[0],S[1]=x[1],S}},82850:function(ae){ae.exports=w;function w(){var S=new Float32Array(2);return S[0]=0,S[1]=0,S}},89004:function(ae){ae.exports=w;function w(S,x,z){var k=x[0]*z[1]-x[1]*z[0];return S[0]=S[1]=0,S[2]=k,S}},80451:function(ae,w,S){ae.exports=S(4962)},4962:function(ae){ae.exports=w;function w(S,x){var z=x[0]-S[0],k=x[1]-S[1];return Math.sqrt(z*z+k*k)}},31754:function(ae,w,S){ae.exports=S(52318)},52318:function(ae){ae.exports=w;function w(S,x,z){return S[0]=x[0]/z[0],S[1]=x[1]/z[1],S}},44927:function(ae){ae.exports=w;function w(S,x){return S[0]*x[0]+S[1]*x[1]}},242:function(ae){ae.exports=1e-6},57657:function(ae,w,S){ae.exports=z;var x=S(242);function z(k,E){var N=k[0],T=k[1],m=E[0],y=E[1];return Math.abs(N-m)<=x*Math.max(1,Math.abs(N),Math.abs(m))&&Math.abs(T-y)<=x*Math.max(1,Math.abs(T),Math.abs(y))}},22236:function(ae){ae.exports=w;function w(S,x){return S[0]===x[0]&&S[1]===x[1]}},76438:function(ae){ae.exports=w;function w(S,x){return S[0]=Math.floor(x[0]),S[1]=Math.floor(x[1]),S}},23861:function(ae,w,S){ae.exports=z;var x=S(82850)();function z(k,E,N,T,m,y){var v,p;for(E||(E=2),N||(N=0),T?p=Math.min(T*E+N,k.length):p=k.length,v=N;v<p;v+=E)x[0]=k[v],x[1]=k[v+1],m(x,x,y),k[v]=x[0],k[v+1]=x[1];return k}},34238:function(ae){ae.exports=w;function w(S,x){var z=new Float32Array(2);return z[0]=S,z[1]=x,z}},42850:function(ae,w,S){ae.exports={EPSILON:S(242),create:S(82850),clone:S(24577),fromValues:S(34238),copy:S(79927),set:S(19204),equals:S(57657),exactEquals:S(22236),add:S(60330),subtract:S(41596),sub:S(75394),multiply:S(79365),mul:S(29108),divide:S(52318),div:S(31754),inverse:S(28123),min:S(19986),max:S(73567),rotate:S(99516),floor:S(76438),ceil:S(56895),round:S(95241),scale:S(9608),scaleAndAdd:S(92893),distance:S(4962),dist:S(80451),squaredDistance:S(80096),sqrDist:S(12549),length:S(92876),len:S(88798),squaredLength:S(71986),sqrLen:S(41887),negate:S(28316),normalize:S(42105),dot:S(44927),cross:S(89004),lerp:S(87220),random:S(88566),transformMat2:S(68402),transformMat2d:S(8230),transformMat3:S(92058),transformMat4:S(12360),forEach:S(23861),limit:S(80840)}},28123:function(ae){ae.exports=w;function w(S,x){return S[0]=1/x[0],S[1]=1/x[1],S}},88798:function(ae,w,S){ae.exports=S(92876)},92876:function(ae){ae.exports=w;function w(S){var x=S[0],z=S[1];return Math.sqrt(x*x+z*z)}},87220:function(ae){ae.exports=w;function w(S,x,z,k){var E=x[0],N=x[1];return S[0]=E+k*(z[0]-E),S[1]=N+k*(z[1]-N),S}},80840:function(ae){ae.exports=w;function w(S,x,z){var k=x[0]*x[0]+x[1]*x[1];if(k>z*z){var E=Math.sqrt(k);S[0]=x[0]/E*z,S[1]=x[1]/E*z}else S[0]=x[0],S[1]=x[1];return S}},73567:function(ae){ae.exports=w;function w(S,x,z){return S[0]=Math.max(x[0],z[0]),S[1]=Math.max(x[1],z[1]),S}},19986:function(ae){ae.exports=w;function w(S,x,z){return S[0]=Math.min(x[0],z[0]),S[1]=Math.min(x[1],z[1]),S}},29108:function(ae,w,S){ae.exports=S(79365)},79365:function(ae){ae.exports=w;function w(S,x,z){return S[0]=x[0]*z[0],S[1]=x[1]*z[1],S}},28316:function(ae){ae.exports=w;function w(S,x){return S[0]=-x[0],S[1]=-x[1],S}},42105:function(ae){ae.exports=w;function w(S,x){var z=x[0],k=x[1],E=z*z+k*k;return E>0&&(E=1/Math.sqrt(E),S[0]=x[0]*E,S[1]=x[1]*E),S}},88566:function(ae){ae.exports=w;function w(S,x){x=x||1;var z=Math.random()*2*Math.PI;return S[0]=Math.cos(z)*x,S[1]=Math.sin(z)*x,S}},99516:function(ae){ae.exports=w;function w(S,x,z){var k=Math.cos(z),E=Math.sin(z),N=x[0],T=x[1];return S[0]=N*k-T*E,S[1]=N*E+T*k,S}},95241:function(ae){ae.exports=w;function w(S,x){return S[0]=Math.round(x[0]),S[1]=Math.round(x[1]),S}},9608:function(ae){ae.exports=w;function w(S,x,z){return S[0]=x[0]*z,S[1]=x[1]*z,S}},92893:function(ae){ae.exports=w;function w(S,x,z,k){return S[0]=x[0]+z[0]*k,S[1]=x[1]+z[1]*k,S}},19204:function(ae){ae.exports=w;function w(S,x,z){return S[0]=x,S[1]=z,S}},12549:function(ae,w,S){ae.exports=S(80096)},41887:function(ae,w,S){ae.exports=S(71986)},80096:function(ae){ae.exports=w;function w(S,x){var z=x[0]-S[0],k=x[1]-S[1];return z*z+k*k}},71986:function(ae){ae.exports=w;function w(S){var x=S[0],z=S[1];return x*x+z*z}},75394:function(ae,w,S){ae.exports=S(41596)},41596:function(ae){ae.exports=w;function w(S,x,z){return S[0]=x[0]-z[0],S[1]=x[1]-z[1],S}},68402:function(ae){ae.exports=w;function w(S,x,z){var k=x[0],E=x[1];return S[0]=z[0]*k+z[2]*E,S[1]=z[1]*k+z[3]*E,S}},8230:function(ae){ae.exports=w;function w(S,x,z){var k=x[0],E=x[1];return S[0]=z[0]*k+z[2]*E+z[4],S[1]=z[1]*k+z[3]*E+z[5],S}},92058:function(ae){ae.exports=w;function w(S,x,z){var k=x[0],E=x[1];return S[0]=z[0]*k+z[3]*E+z[6],S[1]=z[1]*k+z[4]*E+z[7],S}},12360:function(ae){ae.exports=w;function w(S,x,z){var k=x[0],E=x[1];return S[0]=z[0]*k+z[4]*E+z[12],S[1]=z[1]*k+z[5]*E+z[13],S}},20956:function(ae){var w=[],S=[],x="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function z(E,N){if(N=N||{},E===void 0)throw new Error(x);var T=N.prepend===!0?"prepend":"append",m=N.container!==void 0?N.container:document.querySelector("head"),y=w.indexOf(m);y===-1&&(y=w.push(m)-1,S[y]={});var v;return S[y]!==void 0&&S[y][T]!==void 0?v=S[y][T]:(v=S[y][T]=k(),T==="prepend"?m.insertBefore(v,m.childNodes[0]):m.appendChild(v)),E.charCodeAt(0)===65279&&(E=E.substr(1,E.length)),v.styleSheet?v.styleSheet.cssText+=E:v.textContent+=E,v}function k(){var E=document.createElement("style");return E.setAttribute("type","text/css"),E}ae.exports=z,ae.exports.insertCss=z},15909:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0});var S=Symbol.for("INJECTION");function x(T,m,y,v){function p(){return v&&!Reflect.hasMetadata(S,this,m)&&Reflect.defineMetadata(S,y(),this,m),Reflect.hasMetadata(S,this,m)?Reflect.getMetadata(S,this,m):y()}function g(I){Reflect.defineMetadata(S,I,this,m)}Object.defineProperty(T,m,{configurable:!0,enumerable:!0,get:p,set:g})}function z(T,m){return function(y){return function(v,p){var g=function(){return T.get(y)};x(v,p,g,m)}}}w.makePropertyInjectDecorator=z;function k(T,m){return function(y,v){return function(p,g){var I=function(){return T.getNamed(y,v)};x(p,g,I,m)}}}w.makePropertyInjectNamedDecorator=k;function E(T,m){return function(y,v,p){return function(g,I){var _=function(){return T.getTagged(y,v,p)};x(g,I,_,m)}}}w.makePropertyInjectTaggedDecorator=E;function N(T,m){return function(y){return function(v,p){var g=function(){return T.getAll(y)};x(v,p,g,m)}}}w.makePropertyMultiInjectDecorator=N},79309:function(ae,w,S){"use strict";var x;x={value:!0};var z=S(15909);function k(E,N){N===void 0&&(N=!0);var T=z.makePropertyInjectDecorator(E,N),m=z.makePropertyInjectNamedDecorator(E,N),y=z.makePropertyInjectTaggedDecorator(E,N),v=z.makePropertyMultiInjectDecorator(E,N);return{lazyInject:T,lazyInjectNamed:m,lazyInjectTagged:y,lazyMultiInject:v}}w.Z=k},26459:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.tagProperty=w.tagParameter=w.decorate=void 0;var x=S(40055),z=S(62220);function k(v,p,g,I){var _=z.TAGGED;N(_,v,p,I,g)}w.tagParameter=k;function E(v,p,g){var I=z.TAGGED_PROP;N(I,v.constructor,p,g)}w.tagProperty=E;function N(v,p,g,I,_){var C={},O=typeof _=="number",b=_!==void 0&&O?_.toString():g;if(O&&g!==void 0)throw new Error(x.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(v,p)&&(C=Reflect.getMetadata(v,p));var l=C[b];if(!Array.isArray(l))l=[];else for(var K=0,Z=l;K<Z.length;K++){var X=Z[K];if(X.key===I.key)throw new Error(x.DUPLICATED_METADATA+" "+X.key.toString())}l.push(I),C[b]=l,Reflect.defineMetadata(v,C,p)}function T(v,p){Reflect.decorate(v,p)}function m(v,p){return function(g,I){p(g,I,v)}}function y(v,p,g){typeof g=="number"?T([m(g,v)],p):typeof g=="string"?Reflect.decorate([v],p,g):T([v],p)}w.decorate=y},13012:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.inject=w.LazyServiceIdentifer=void 0;var x=S(40055),z=S(62220),k=S(37397),E=S(26459),N=function(){function m(y){this._cb=y}return m.prototype.unwrap=function(){return this._cb()},m}();w.LazyServiceIdentifer=N;function T(m){return function(y,v,p){if(m===void 0)throw new Error(x.UNDEFINED_INJECT_ANNOTATION(y.name));var g=new k.Metadata(z.INJECT_TAG,m);typeof p=="number"?E.tagParameter(y,v,p,g):E.tagProperty(y,v,g)}}w.inject=T},52890:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.injectable=void 0;var x=S(40055),z=S(62220);function k(){return function(E){if(Reflect.hasOwnMetadata(z.PARAM_TYPES,E))throw new Error(x.DUPLICATED_INJECTABLE_DECORATOR);var N=Reflect.getMetadata(z.DESIGN_PARAM_TYPES,E)||[];return Reflect.defineMetadata(z.PARAM_TYPES,N,E),E}}w.injectable=k},34341:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.multiInject=void 0;var x=S(62220),z=S(37397),k=S(26459);function E(N){return function(T,m,y){var v=new z.Metadata(x.MULTI_INJECT_TAG,N);typeof y=="number"?k.tagParameter(T,m,y,v):k.tagProperty(T,m,v)}}w.multiInject=E},95650:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.named=void 0;var x=S(62220),z=S(37397),k=S(26459);function E(N){return function(T,m,y){var v=new z.Metadata(x.NAMED_TAG,N);typeof y=="number"?k.tagParameter(T,m,y,v):k.tagProperty(T,m,v)}}w.named=E},85635:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.optional=void 0;var x=S(62220),z=S(37397),k=S(26459);function E(){return function(N,T,m){var y=new z.Metadata(x.OPTIONAL_TAG,!0);typeof m=="number"?k.tagParameter(N,T,m,y):k.tagProperty(N,T,y)}}w.optional=E},62568:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.postConstruct=void 0;var x=S(40055),z=S(62220),k=S(37397);function E(){return function(N,T,m){var y=new k.Metadata(z.POST_CONSTRUCT,T);if(Reflect.hasOwnMetadata(z.POST_CONSTRUCT,N.constructor))throw new Error(x.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(z.POST_CONSTRUCT,y,N.constructor)}}w.postConstruct=E},37678:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.tagged=void 0;var x=S(37397),z=S(26459);function k(E,N){return function(T,m,y){var v=new x.Metadata(E,N);typeof y=="number"?z.tagParameter(T,m,y,v):z.tagProperty(T,m,v)}}w.tagged=k},51238:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.targetName=void 0;var x=S(62220),z=S(37397),k=S(26459);function E(N){return function(T,m,y){var v=new z.Metadata(x.NAME_TAG,N);k.tagParameter(T,m,y,v)}}w.targetName=E},6022:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.unmanaged=void 0;var x=S(62220),z=S(37397),k=S(26459);function E(){return function(N,T,m){var y=new z.Metadata(x.UNMANAGED_TAG,!0);k.tagParameter(N,T,m,y)}}w.unmanaged=E},25241:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Binding=void 0;var x=S(84624),z=S(54906),k=function(){function E(N,T){this.id=z.id(),this.activated=!1,this.serviceIdentifier=N,this.scope=T,this.type=x.BindingTypeEnum.Invalid,this.constraint=function(m){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return E.prototype.clone=function(){var N=new E(this.serviceIdentifier,this.scope);return N.activated=N.scope===x.BindingScopeEnum.Singleton?this.activated:!1,N.implementationType=this.implementationType,N.dynamicValue=this.dynamicValue,N.scope=this.scope,N.type=this.type,N.factory=this.factory,N.provider=this.provider,N.constraint=this.constraint,N.onActivation=this.onActivation,N.cache=this.cache,N},E}();w.Binding=k},74451:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.BindingCount=void 0;var S={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};w.BindingCount=S},40055:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.STACK_OVERFLOW=w.CIRCULAR_DEPENDENCY_IN_FACTORY=w.POST_CONSTRUCT_ERROR=w.MULTIPLE_POST_CONSTRUCT_METHODS=w.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=w.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=w.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=w.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=w.ARGUMENTS_LENGTH_MISMATCH=w.INVALID_DECORATOR_OPERATION=w.INVALID_TO_SELF_VALUE=w.INVALID_FUNCTION_BINDING=w.INVALID_MIDDLEWARE_RETURN=w.NO_MORE_SNAPSHOTS_AVAILABLE=w.INVALID_BINDING_TYPE=w.NOT_IMPLEMENTED=w.CIRCULAR_DEPENDENCY=w.UNDEFINED_INJECT_ANNOTATION=w.MISSING_INJECT_ANNOTATION=w.MISSING_INJECTABLE_ANNOTATION=w.NOT_REGISTERED=w.CANNOT_UNBIND=w.AMBIGUOUS_MATCH=w.KEY_NOT_FOUND=w.NULL_ARGUMENT=w.DUPLICATED_METADATA=w.DUPLICATED_INJECTABLE_DECORATOR=void 0,w.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",w.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",w.NULL_ARGUMENT="NULL argument",w.KEY_NOT_FOUND="Key Not Found",w.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",w.CANNOT_UNBIND="Could not unbind serviceIdentifier:",w.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",w.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",w.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var S=function(E){return"@inject called with undefined this could mean that the class "+E+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};w.UNDEFINED_INJECT_ANNOTATION=S,w.CIRCULAR_DEPENDENCY="Circular dependency found:",w.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",w.INVALID_BINDING_TYPE="Invalid binding type:",w.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",w.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",w.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",w.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",w.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var x=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return"The number of constructor arguments in the derived class "+(E[0]+" must be >= than the number of constructor arguments of its base class.")};w.ARGUMENTS_LENGTH_MISMATCH=x,w.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",w.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",w.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",w.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",w.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var z=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return"@postConstruct error in class "+E[0]+": "+E[1]};w.POST_CONSTRUCT_ERROR=z;var k=function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];return"It looks like there is a circular dependency "+("in one of the '"+E[0]+"' bindings. Please investigate bindings with")+("service identifier '"+E[1]+"'.")};w.CIRCULAR_DEPENDENCY_IN_FACTORY=k,w.STACK_OVERFLOW="Maximum call stack size exceeded"},84624:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.TargetTypeEnum=w.BindingTypeEnum=w.BindingScopeEnum=void 0;var S={Request:"Request",Singleton:"Singleton",Transient:"Transient"};w.BindingScopeEnum=S;var x={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};w.BindingTypeEnum=x;var z={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};w.TargetTypeEnum=z},62220:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.NON_CUSTOM_TAG_KEYS=w.POST_CONSTRUCT=w.DESIGN_PARAM_TYPES=w.PARAM_TYPES=w.TAGGED_PROP=w.TAGGED=w.MULTI_INJECT_TAG=w.INJECT_TAG=w.OPTIONAL_TAG=w.UNMANAGED_TAG=w.NAME_TAG=w.NAMED_TAG=void 0,w.NAMED_TAG="named",w.NAME_TAG="name",w.UNMANAGED_TAG="unmanaged",w.OPTIONAL_TAG="optional",w.INJECT_TAG="inject",w.MULTI_INJECT_TAG="multi_inject",w.TAGGED="inversify:tagged",w.TAGGED_PROP="inversify:tagged_props",w.PARAM_TYPES="inversify:paramtypes",w.DESIGN_PARAM_TYPES="design:paramtypes",w.POST_CONSTRUCT="post_construct";function S(){return[w.INJECT_TAG,w.MULTI_INJECT_TAG,w.NAME_TAG,w.UNMANAGED_TAG,w.NAMED_TAG,w.OPTIONAL_TAG]}w.NON_CUSTOM_TAG_KEYS=S()},59819:function(ae,w,S){"use strict";var x=this&&this.__awaiter||function(l,K,Z,X){function W(U){return U instanceof Z?U:new Z(function(et){et(U)})}return new(Z||(Z=Promise))(function(U,et){function at(mt){try{nt(X.next(mt))}catch(Mt){et(Mt)}}function J(mt){try{nt(X.throw(mt))}catch(Mt){et(Mt)}}function nt(mt){mt.done?U(mt.value):W(mt.value).then(at,J)}nt((X=X.apply(l,K||[])).next())})},z=this&&this.__generator||function(l,K){var Z={label:0,sent:function(){if(U[0]&1)throw U[1];return U[1]},trys:[],ops:[]},X,W,U,et;return et={next:at(0),throw:at(1),return:at(2)},typeof Symbol=="function"&&(et[Symbol.iterator]=function(){return this}),et;function at(nt){return function(mt){return J([nt,mt])}}function J(nt){if(X)throw new TypeError("Generator is already executing.");for(;Z;)try{if(X=1,W&&(U=nt[0]&2?W.return:nt[0]?W.throw||((U=W.return)&&U.call(W),0):W.next)&&!(U=U.call(W,nt[1])).done)return U;switch(W=0,U&&(nt=[nt[0]&2,U.value]),nt[0]){case 0:case 1:U=nt;break;case 4:return Z.label++,{value:nt[1],done:!1};case 5:Z.label++,W=nt[1],nt=[0];continue;case 7:nt=Z.ops.pop(),Z.trys.pop();continue;default:if(U=Z.trys,!(U=U.length>0&&U[U.length-1])&&(nt[0]===6||nt[0]===2)){Z=0;continue}if(nt[0]===3&&(!U||nt[1]>U[0]&&nt[1]<U[3])){Z.label=nt[1];break}if(nt[0]===6&&Z.label<U[1]){Z.label=U[1],U=nt;break}if(U&&Z.label<U[2]){Z.label=U[2],Z.ops.push(nt);break}U[2]&&Z.ops.pop(),Z.trys.pop();continue}nt=K.call(l,Z)}catch(mt){nt=[6,mt],W=0}finally{X=U=0}if(nt[0]&5)throw nt[1];return{value:nt[0]?nt[1]:void 0,done:!0}}},k=this&&this.__spreadArray||function(l,K){for(var Z=0,X=K.length,W=l.length;Z<X;Z++,W++)l[W]=K[Z];return l};Object.defineProperty(w,"__esModule",{value:!0}),w.Container=void 0;var E=S(25241),N=S(40055),T=S(84624),m=S(62220),y=S(51188),v=S(48296),p=S(93337),g=S(50832),I=S(54906),_=S(88229),C=S(22968),O=S(60513),b=function(){function l(K){this._appliedMiddleware=[];var Z=K||{};if(typeof Z!="object")throw new Error(""+N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Z.defaultScope===void 0)Z.defaultScope=T.BindingScopeEnum.Transient;else if(Z.defaultScope!==T.BindingScopeEnum.Singleton&&Z.defaultScope!==T.BindingScopeEnum.Transient&&Z.defaultScope!==T.BindingScopeEnum.Request)throw new Error(""+N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Z.autoBindInjectable===void 0)Z.autoBindInjectable=!1;else if(typeof Z.autoBindInjectable!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Z.skipBaseClassChecks===void 0)Z.skipBaseClassChecks=!1;else if(typeof Z.skipBaseClassChecks!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Z.autoBindInjectable,defaultScope:Z.defaultScope,skipBaseClassChecks:Z.skipBaseClassChecks},this.id=I.id(),this._bindingDictionary=new O.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new y.MetadataReader}return l.merge=function(K,Z){for(var X=[],W=2;W<arguments.length;W++)X[W-2]=arguments[W];var U=new l,et=k([K,Z],X).map(function(nt){return v.getBindingDictionary(nt)}),at=v.getBindingDictionary(U);function J(nt,mt){nt.traverse(function(Mt,vt){vt.forEach(function(zt){mt.add(zt.serviceIdentifier,zt.clone())})})}return et.forEach(function(nt){J(nt,at)}),U},l.prototype.load=function(){for(var K=[],Z=0;Z<arguments.length;Z++)K[Z]=arguments[Z];for(var X=this._getContainerModuleHelpersFactory(),W=0,U=K;W<U.length;W++){var et=U[W],at=X(et.id);et.registry(at.bindFunction,at.unbindFunction,at.isboundFunction,at.rebindFunction)}},l.prototype.loadAsync=function(){for(var K=[],Z=0;Z<arguments.length;Z++)K[Z]=arguments[Z];return x(this,void 0,void 0,function(){var X,W,U,et,at;return z(this,function(J){switch(J.label){case 0:X=this._getContainerModuleHelpersFactory(),W=0,U=K,J.label=1;case 1:return W<U.length?(et=U[W],at=X(et.id),[4,et.registry(at.bindFunction,at.unbindFunction,at.isboundFunction,at.rebindFunction)]):[3,4];case 2:J.sent(),J.label=3;case 3:return W++,[3,1];case 4:return[2]}})})},l.prototype.unload=function(){for(var K=this,Z=[],X=0;X<arguments.length;X++)Z[X]=arguments[X];var W=function(U){return function(et){return et.moduleId===U}};Z.forEach(function(U){var et=W(U.id);K._bindingDictionary.removeByCondition(et)})},l.prototype.bind=function(K){var Z=this.options.defaultScope||T.BindingScopeEnum.Transient,X=new E.Binding(K,Z);return this._bindingDictionary.add(K,X),new g.BindingToSyntax(X)},l.prototype.rebind=function(K){return this.unbind(K),this.bind(K)},l.prototype.unbind=function(K){try{this._bindingDictionary.remove(K)}catch(Z){throw new Error(N.CANNOT_UNBIND+" "+_.getServiceIdentifierAsString(K))}},l.prototype.unbindAll=function(){this._bindingDictionary=new O.Lookup},l.prototype.isBound=function(K){var Z=this._bindingDictionary.hasKey(K);return!Z&&this.parent&&(Z=this.parent.isBound(K)),Z},l.prototype.isBoundNamed=function(K,Z){return this.isBoundTagged(K,m.NAMED_TAG,Z)},l.prototype.isBoundTagged=function(K,Z,X){var W=!1;if(this._bindingDictionary.hasKey(K)){var U=this._bindingDictionary.get(K),et=v.createMockRequest(this,K,Z,X);W=U.some(function(at){return at.constraint(et)})}return!W&&this.parent&&(W=this.parent.isBoundTagged(K,Z,X)),W},l.prototype.snapshot=function(){this._snapshots.push(C.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},l.prototype.restore=function(){var K=this._snapshots.pop();if(K===void 0)throw new Error(N.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=K.bindings,this._middleware=K.middleware},l.prototype.createChild=function(K){var Z=new l(K||this.options);return Z.parent=this,Z},l.prototype.applyMiddleware=function(){for(var K=[],Z=0;Z<arguments.length;Z++)K[Z]=arguments[Z];this._appliedMiddleware=this._appliedMiddleware.concat(K);var X=this._middleware?this._middleware:this._planAndResolve();this._middleware=K.reduce(function(W,U){return U(W)},X)},l.prototype.applyCustomMetadataReader=function(K){this._metadataReader=K},l.prototype.get=function(K){return this._get(!1,!1,T.TargetTypeEnum.Variable,K)},l.prototype.getTagged=function(K,Z,X){return this._get(!1,!1,T.TargetTypeEnum.Variable,K,Z,X)},l.prototype.getNamed=function(K,Z){return this.getTagged(K,m.NAMED_TAG,Z)},l.prototype.getAll=function(K){return this._get(!0,!0,T.TargetTypeEnum.Variable,K)},l.prototype.getAllTagged=function(K,Z,X){return this._get(!1,!0,T.TargetTypeEnum.Variable,K,Z,X)},l.prototype.getAllNamed=function(K,Z){return this.getAllTagged(K,m.NAMED_TAG,Z)},l.prototype.resolve=function(K){var Z=this.createChild();return Z.bind(K).toSelf(),this._appliedMiddleware.forEach(function(X){Z.applyMiddleware(X)}),Z.get(K)},l.prototype._getContainerModuleHelpersFactory=function(){var K=this,Z=function(at,J){at._binding.moduleId=J},X=function(at){return function(J){var nt=K.bind.bind(K),mt=nt(J);return Z(mt,at),mt}},W=function(at){return function(J){var nt=K.unbind.bind(K);nt(J)}},U=function(at){return function(J){var nt=K.isBound.bind(K);return nt(J)}},et=function(at){return function(J){var nt=K.rebind.bind(K),mt=nt(J);return Z(mt,at),mt}};return function(at){return{bindFunction:X(at),isboundFunction:U(at),rebindFunction:et(at),unbindFunction:W(at)}}},l.prototype._get=function(K,Z,X,W,U,et){var at=null,J={avoidConstraints:K,contextInterceptor:function(nt){return nt},isMultiInject:Z,key:U,serviceIdentifier:W,targetType:X,value:et};if(this._middleware){if(at=this._middleware(J),at==null)throw new Error(N.INVALID_MIDDLEWARE_RETURN)}else at=this._planAndResolve()(J);return at},l.prototype._planAndResolve=function(){var K=this;return function(Z){var X=v.plan(K._metadataReader,K,Z.isMultiInject,Z.targetType,Z.serviceIdentifier,Z.key,Z.value,Z.avoidConstraints);X=Z.contextInterceptor(X);var W=p.resolve(X);return W}},l}();w.Container=b},51637:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.AsyncContainerModule=w.ContainerModule=void 0;var x=S(54906),z=function(){function E(N){this.id=x.id(),this.registry=N}return E}();w.ContainerModule=z;var k=function(){function E(N){this.id=x.id(),this.registry=N}return E}();w.AsyncContainerModule=k},22968:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.ContainerSnapshot=void 0;var S=function(){function x(){}return x.of=function(z,k){var E=new x;return E.bindings=z,E.middleware=k,E},x}();w.ContainerSnapshot=S},60513:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Lookup=void 0;var x=S(40055),z=function(){function k(){this._map=new Map}return k.prototype.getMap=function(){return this._map},k.prototype.add=function(E,N){if(E==null)throw new Error(x.NULL_ARGUMENT);if(N==null)throw new Error(x.NULL_ARGUMENT);var T=this._map.get(E);T!==void 0?(T.push(N),this._map.set(E,T)):this._map.set(E,[N])},k.prototype.get=function(E){if(E==null)throw new Error(x.NULL_ARGUMENT);var N=this._map.get(E);if(N!==void 0)return N;throw new Error(x.KEY_NOT_FOUND)},k.prototype.remove=function(E){if(E==null)throw new Error(x.NULL_ARGUMENT);if(!this._map.delete(E))throw new Error(x.KEY_NOT_FOUND)},k.prototype.removeByCondition=function(E){var N=this;this._map.forEach(function(T,m){var y=T.filter(function(v){return!E(v)});y.length>0?N._map.set(m,y):N._map.delete(m)})},k.prototype.hasKey=function(E){if(E==null)throw new Error(x.NULL_ARGUMENT);return this._map.has(E)},k.prototype.clone=function(){var E=new k;return this._map.forEach(function(N,T){N.forEach(function(m){return E.add(T,m.clone())})}),E},k.prototype.traverse=function(E){this._map.forEach(function(N,T){E(T,N)})},k}();w.Lookup=z},45540:function(ae,w,S){"use strict";var x;x={value:!0},x=x=x=x=x=x=x=x=x=x=x=x=x=x=x=w.f3=w.t6=x=w.b2=x=x=x=x=x=w.W2=x=void 0;var z=S(62220);x=z;var k=S(59819);Object.defineProperty(w,"W2",{enumerable:!0,get:function(){return k.Container}});var E=S(84624);x={enumerable:!0,get:function(){return E.BindingScopeEnum}},x={enumerable:!0,get:function(){return E.BindingTypeEnum}},x={enumerable:!0,get:function(){return E.TargetTypeEnum}};var N=S(51637);x={enumerable:!0,get:function(){return N.AsyncContainerModule}},x={enumerable:!0,get:function(){return N.ContainerModule}};var T=S(52890);Object.defineProperty(w,"b2",{enumerable:!0,get:function(){return T.injectable}});var m=S(37678);x={enumerable:!0,get:function(){return m.tagged}};var y=S(95650);Object.defineProperty(w,"t6",{enumerable:!0,get:function(){return y.named}});var v=S(13012);Object.defineProperty(w,"f3",{enumerable:!0,get:function(){return v.inject}}),x={enumerable:!0,get:function(){return v.LazyServiceIdentifer}};var p=S(85635);x={enumerable:!0,get:function(){return p.optional}};var g=S(6022);x={enumerable:!0,get:function(){return g.unmanaged}};var I=S(34341);x={enumerable:!0,get:function(){return I.multiInject}};var _=S(51238);x={enumerable:!0,get:function(){return _.targetName}};var C=S(62568);x={enumerable:!0,get:function(){return C.postConstruct}};var O=S(51188);x={enumerable:!0,get:function(){return O.MetadataReader}};var b=S(54906);x={enumerable:!0,get:function(){return b.id}};var l=S(26459);x={enumerable:!0,get:function(){return l.decorate}};var K=S(4106);x={enumerable:!0,get:function(){return K.traverseAncerstors}},x={enumerable:!0,get:function(){return K.taggedConstraint}},x={enumerable:!0,get:function(){return K.namedConstraint}},x={enumerable:!0,get:function(){return K.typeConstraint}};var Z=S(88229);x={enumerable:!0,get:function(){return Z.getServiceIdentifierAsString}};var X=S(65049);x={enumerable:!0,get:function(){return X.multiBindToService}}},20508:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Context=void 0;var x=S(54906),z=function(){function k(E){this.id=x.id(),this.container=E}return k.prototype.addPlan=function(E){this.plan=E},k.prototype.setCurrentRequest=function(E){this.currentRequest=E},k}();w.Context=z},37397:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Metadata=void 0;var x=S(62220),z=function(){function k(E,N){this.key=E,this.value=N}return k.prototype.toString=function(){return this.key===x.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},k}();w.Metadata=z},51188:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.MetadataReader=void 0;var x=S(62220),z=function(){function k(){}return k.prototype.getConstructorMetadata=function(E){var N=Reflect.getMetadata(x.PARAM_TYPES,E),T=Reflect.getMetadata(x.TAGGED,E);return{compilerGeneratedMetadata:N,userGeneratedMetadata:T||{}}},k.prototype.getPropertiesMetadata=function(E){var N=Reflect.getMetadata(x.TAGGED_PROP,E)||[];return N},k}();w.MetadataReader=z},80955:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Plan=void 0;var S=function(){function x(z,k){this.parentContext=z,this.rootRequest=k}return x}();w.Plan=S},48296:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.getBindingDictionary=w.createMockRequest=w.plan=void 0;var x=S(74451),z=S(40055),k=S(84624),E=S(62220),N=S(16555),T=S(88229),m=S(20508),y=S(37397),v=S(80955),p=S(34819),g=S(21047),I=S(89544);function _(W){return W._bindingDictionary}w.getBindingDictionary=_;function C(W,U,et,at,J,nt){var mt=W?E.MULTI_INJECT_TAG:E.INJECT_TAG,Mt=new y.Metadata(mt,et),vt=new I.Target(U,at,et,Mt);if(J!==void 0){var zt=new y.Metadata(J,nt);vt.metadata.push(zt)}return vt}function O(W,U,et,at,J){var nt=K(et.container,J.serviceIdentifier),mt=[];return nt.length===x.BindingCount.NoBindingsAvailable&&et.container.options.autoBindInjectable&&typeof J.serviceIdentifier=="function"&&W.getConstructorMetadata(J.serviceIdentifier).compilerGeneratedMetadata&&(et.container.bind(J.serviceIdentifier).toSelf(),nt=K(et.container,J.serviceIdentifier)),U?mt=nt:mt=nt.filter(function(Mt){var vt=new g.Request(Mt.serviceIdentifier,et,at,Mt,J);return Mt.constraint(vt)}),b(J.serviceIdentifier,mt,J,et.container),mt}function b(W,U,et,at){switch(U.length){case x.BindingCount.NoBindingsAvailable:if(et.isOptional())return U;var J=T.getServiceIdentifierAsString(W),nt=z.NOT_REGISTERED;throw nt+=T.listMetadataForTarget(J,et),nt+=T.listRegisteredBindingsForServiceIdentifier(at,J,K),new Error(nt);case x.BindingCount.OnlyOneBindingAvailable:if(!et.isArray())return U;case x.BindingCount.MultipleBindingsAvailable:default:if(et.isArray())return U;var J=T.getServiceIdentifierAsString(W),nt=z.AMBIGUOUS_MATCH+" "+J;throw nt+=T.listRegisteredBindingsForServiceIdentifier(at,J,K),new Error(nt)}}function l(W,U,et,at,J,nt){var mt,Mt;if(J===null){mt=O(W,U,at,null,nt),Mt=new g.Request(et,at,null,mt,nt);var vt=new v.Plan(at,Mt);at.addPlan(vt)}else mt=O(W,U,at,J,nt),Mt=J.addChildRequest(nt.serviceIdentifier,mt,nt);mt.forEach(function(zt){var re=null;if(nt.isArray())re=Mt.addChildRequest(zt.serviceIdentifier,zt,nt);else{if(zt.cache)return;re=Mt}if(zt.type===k.BindingTypeEnum.Instance&&zt.implementationType!==null){var Rt=p.getDependencies(W,zt.implementationType);if(!at.container.options.skipBaseClassChecks){var At=p.getBaseClassDependencyCount(W,zt.implementationType);if(Rt.length<At){var Q=z.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(zt.implementationType));throw new Error(Q)}}Rt.forEach(function(gt){l(W,!1,gt.serviceIdentifier,at,re,gt)})}})}function K(W,U){var et=[],at=_(W);return at.hasKey(U)?et=at.get(U):W.parent!==null&&(et=K(W.parent,U)),et}function Z(W,U,et,at,J,nt,mt,Mt){Mt===void 0&&(Mt=!1);var vt=new m.Context(U),zt=C(et,at,J,"",nt,mt);try{return l(W,Mt,J,vt,null,zt),vt}catch(re){throw N.isStackOverflowExeption(re)&&vt.plan&&T.circularDependencyToException(vt.plan.rootRequest),re}}w.plan=Z;function X(W,U,et,at){var J=new I.Target(k.TargetTypeEnum.Variable,"",U,new y.Metadata(et,at)),nt=new m.Context(W),mt=new g.Request(U,nt,null,[],J);return mt}w.createMockRequest=X},99692:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.QueryableString=void 0;var S=function(){function x(z){this.str=z}return x.prototype.startsWith=function(z){return this.str.indexOf(z)===0},x.prototype.endsWith=function(z){var k="",E=z.split("").reverse().join("");return k=this.str.split("").reverse().join(""),this.startsWith.call({str:k},E)},x.prototype.contains=function(z){return this.str.indexOf(z)!==-1},x.prototype.equals=function(z){return this.str===z},x.prototype.value=function(){return this.str},x}();w.QueryableString=S},34819:function(ae,w,S){"use strict";var x=this&&this.__spreadArray||function(O,b){for(var l=0,K=b.length,Z=O.length;l<K;l++,Z++)O[Z]=b[l];return O};Object.defineProperty(w,"__esModule",{value:!0}),w.getFunctionName=w.getBaseClassDependencyCount=w.getDependencies=void 0;var z=S(13012),k=S(40055),E=S(84624),N=S(62220),T=S(88229);Object.defineProperty(w,"getFunctionName",{enumerable:!0,get:function(){return T.getFunctionName}});var m=S(89544);function y(O,b){var l=T.getFunctionName(b),K=v(O,l,b,!1);return K}w.getDependencies=y;function v(O,b,l,K){var Z=O.getConstructorMetadata(l),X=Z.compilerGeneratedMetadata;if(X===void 0){var W=k.MISSING_INJECTABLE_ANNOTATION+" "+b+".";throw new Error(W)}var U=Z.userGeneratedMetadata,et=Object.keys(U),at=l.length===0&&et.length>0,J=et.length>l.length,nt=at||J?et.length:l.length,mt=g(K,b,X,U,nt),Mt=I(O,l),vt=x(x([],mt),Mt);return vt}function p(O,b,l,K,Z){var X=Z[O.toString()]||[],W=C(X),U=W.unmanaged!==!0,et=K[O],at=W.inject||W.multiInject;if(et=at||et,et instanceof z.LazyServiceIdentifer&&(et=et.unwrap()),U){var J=et===Object,nt=et===Function,mt=et===void 0,Mt=J||nt||mt;if(!b&&Mt){var vt=k.MISSING_INJECT_ANNOTATION+" argument "+O+" in class "+l+".";throw new Error(vt)}var zt=new m.Target(E.TargetTypeEnum.ConstructorArgument,W.targetName,et);return zt.metadata=X,zt}return null}function g(O,b,l,K,Z){for(var X=[],W=0;W<Z;W++){var U=W,et=p(U,O,b,l,K);et!==null&&X.push(et)}return X}function I(O,b){for(var l=O.getPropertiesMetadata(b),K=[],Z=Object.keys(l),X=0,W=Z;X<W.length;X++){var U=W[X],et=l[U],at=C(l[U]),J=at.targetName||U,nt=at.inject||at.multiInject,mt=new m.Target(E.TargetTypeEnum.ClassProperty,J,nt);mt.metadata=et,K.push(mt)}var Mt=Object.getPrototypeOf(b.prototype).constructor;if(Mt!==Object){var vt=I(O,Mt);K=x(x([],K),vt)}return K}function _(O,b){var l=Object.getPrototypeOf(b.prototype).constructor;if(l!==Object){var K=T.getFunctionName(l),Z=v(O,K,l,!0),X=Z.map(function(et){return et.metadata.filter(function(at){return at.key===N.UNMANAGED_TAG})}),W=[].concat.apply([],X).length,U=Z.length-W;return U>0?U:_(O,l)}else return 0}w.getBaseClassDependencyCount=_;function C(O){var b={};return O.forEach(function(l){b[l.key.toString()]=l.value}),{inject:b[N.INJECT_TAG],multiInject:b[N.MULTI_INJECT_TAG],targetName:b[N.NAME_TAG],unmanaged:b[N.UNMANAGED_TAG]}}},21047:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Request=void 0;var x=S(54906),z=function(){function k(E,N,T,m,y){this.id=x.id(),this.serviceIdentifier=E,this.parentContext=N,this.parentRequest=T,this.target=y,this.childRequests=[],this.bindings=Array.isArray(m)?m:[m],this.requestScope=T===null?new Map:null}return k.prototype.addChildRequest=function(E,N,T){var m=new k(E,this.parentContext,this,N,T);return this.childRequests.push(m),m},k}();w.Request=z},89544:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.Target=void 0;var x=S(62220),z=S(54906),k=S(37397),E=S(99692),N=function(){function T(m,y,v,p){this.id=z.id(),this.type=m,this.serviceIdentifier=v,this.name=new E.QueryableString(y||""),this.metadata=new Array;var g=null;typeof p=="string"?g=new k.Metadata(x.NAMED_TAG,p):p instanceof k.Metadata&&(g=p),g!==null&&this.metadata.push(g)}return T.prototype.hasTag=function(m){for(var y=0,v=this.metadata;y<v.length;y++){var p=v[y];if(p.key===m)return!0}return!1},T.prototype.isArray=function(){return this.hasTag(x.MULTI_INJECT_TAG)},T.prototype.matchesArray=function(m){return this.matchesTag(x.MULTI_INJECT_TAG)(m)},T.prototype.isNamed=function(){return this.hasTag(x.NAMED_TAG)},T.prototype.isTagged=function(){return this.metadata.some(function(m){return x.NON_CUSTOM_TAG_KEYS.every(function(y){return m.key!==y})})},T.prototype.isOptional=function(){return this.matchesTag(x.OPTIONAL_TAG)(!0)},T.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(m){return m.key===x.NAMED_TAG})[0]:null},T.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(m){return x.NON_CUSTOM_TAG_KEYS.every(function(y){return m.key!==y})}):null},T.prototype.matchesNamedTag=function(m){return this.matchesTag(x.NAMED_TAG)(m)},T.prototype.matchesTag=function(m){var y=this;return function(v){for(var p=0,g=y.metadata;p<g.length;p++){var I=g[p];if(I.key===m&&I.value===v)return!0}return!1}},T}();w.Target=N},36913:function(ae,w,S){"use strict";var x=this&&this.__spreadArray||function(v,p){for(var g=0,I=p.length,_=v.length;g<I;g++,_++)v[_]=p[g];return v};Object.defineProperty(w,"__esModule",{value:!0}),w.resolveInstance=void 0;var z=S(40055),k=S(84624),E=S(62220);function N(v,p,g){var I=p.filter(function(C){return C.target!==null&&C.target.type===k.TargetTypeEnum.ClassProperty}),_=I.map(g);return I.forEach(function(C,O){var b="";b=C.target.name.value();var l=_[O];v[b]=l}),v}function T(v,p){return new(v.bind.apply(v,x([void 0],p)))}function m(v,p){if(Reflect.hasMetadata(E.POST_CONSTRUCT,v)){var g=Reflect.getMetadata(E.POST_CONSTRUCT,v);try{p[g.value]()}catch(I){throw new Error(z.POST_CONSTRUCT_ERROR(v.name,I.message))}}}function y(v,p,g){var I=null;if(p.length>0){var _=p.filter(function(O){return O.target!==null&&O.target.type===k.TargetTypeEnum.ConstructorArgument}),C=_.map(g);I=T(v,C),I=N(I,p,g)}else I=new v;return m(v,I),I}w.resolveInstance=y},93337:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.resolve=void 0;var x=S(40055),z=S(84624),k=S(16555),E=S(88229),N=S(36913),T=function(v,p,g){try{return g()}catch(I){throw k.isStackOverflowExeption(I)?new Error(x.CIRCULAR_DEPENDENCY_IN_FACTORY(v,p.toString())):I}},m=function(v){return function(p){p.parentContext.setCurrentRequest(p);var g=p.bindings,I=p.childRequests,_=p.target&&p.target.isArray(),C=!p.parentRequest||!p.parentRequest.target||!p.target||!p.parentRequest.target.matchesArray(p.target.serviceIdentifier);if(_&&C)return I.map(function(X){var W=m(v);return W(X)});var O=null;if(p.target.isOptional()&&g.length===0)return;var b=g[0],l=b.scope===z.BindingScopeEnum.Singleton,K=b.scope===z.BindingScopeEnum.Request;if(l&&b.activated)return b.cache;if(K&&v!==null&&v.has(b.id))return v.get(b.id);if(b.type===z.BindingTypeEnum.ConstantValue)O=b.cache,b.activated=!0;else if(b.type===z.BindingTypeEnum.Function)O=b.cache,b.activated=!0;else if(b.type===z.BindingTypeEnum.Constructor)O=b.implementationType;else if(b.type===z.BindingTypeEnum.DynamicValue&&b.dynamicValue!==null)O=T("toDynamicValue",b.serviceIdentifier,function(){return b.dynamicValue(p.parentContext)});else if(b.type===z.BindingTypeEnum.Factory&&b.factory!==null)O=T("toFactory",b.serviceIdentifier,function(){return b.factory(p.parentContext)});else if(b.type===z.BindingTypeEnum.Provider&&b.provider!==null)O=T("toProvider",b.serviceIdentifier,function(){return b.provider(p.parentContext)});else if(b.type===z.BindingTypeEnum.Instance&&b.implementationType!==null)O=N.resolveInstance(b.implementationType,I,m(v));else{var Z=E.getServiceIdentifierAsString(p.serviceIdentifier);throw new Error(x.INVALID_BINDING_TYPE+" "+Z)}return typeof b.onActivation=="function"&&(O=b.onActivation(p.parentContext,O)),l&&(b.cache=O,b.activated=!0),K&&v!==null&&!v.has(b.id)&&v.set(b.id,O),O}};function y(v){var p=m(v.plan.rootRequest.requestScope);return p(v.plan.rootRequest)}w.resolve=y},45980:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.BindingInSyntax=void 0;var x=S(84624),z=S(29215),k=function(){function E(N){this._binding=N}return E.prototype.inRequestScope=function(){return this._binding.scope=x.BindingScopeEnum.Request,new z.BindingWhenOnSyntax(this._binding)},E.prototype.inSingletonScope=function(){return this._binding.scope=x.BindingScopeEnum.Singleton,new z.BindingWhenOnSyntax(this._binding)},E.prototype.inTransientScope=function(){return this._binding.scope=x.BindingScopeEnum.Transient,new z.BindingWhenOnSyntax(this._binding)},E}();w.BindingInSyntax=k},24847:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.BindingInWhenOnSyntax=void 0;var x=S(45980),z=S(50783),k=S(34647),E=function(){function N(T){this._binding=T,this._bindingWhenSyntax=new k.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new z.BindingOnSyntax(this._binding),this._bindingInSyntax=new x.BindingInSyntax(T)}return N.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},N.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},N.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},N.prototype.when=function(T){return this._bindingWhenSyntax.when(T)},N.prototype.whenTargetNamed=function(T){return this._bindingWhenSyntax.whenTargetNamed(T)},N.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},N.prototype.whenTargetTagged=function(T,m){return this._bindingWhenSyntax.whenTargetTagged(T,m)},N.prototype.whenInjectedInto=function(T){return this._bindingWhenSyntax.whenInjectedInto(T)},N.prototype.whenParentNamed=function(T){return this._bindingWhenSyntax.whenParentNamed(T)},N.prototype.whenParentTagged=function(T,m){return this._bindingWhenSyntax.whenParentTagged(T,m)},N.prototype.whenAnyAncestorIs=function(T){return this._bindingWhenSyntax.whenAnyAncestorIs(T)},N.prototype.whenNoAncestorIs=function(T){return this._bindingWhenSyntax.whenNoAncestorIs(T)},N.prototype.whenAnyAncestorNamed=function(T){return this._bindingWhenSyntax.whenAnyAncestorNamed(T)},N.prototype.whenAnyAncestorTagged=function(T,m){return this._bindingWhenSyntax.whenAnyAncestorTagged(T,m)},N.prototype.whenNoAncestorNamed=function(T){return this._bindingWhenSyntax.whenNoAncestorNamed(T)},N.prototype.whenNoAncestorTagged=function(T,m){return this._bindingWhenSyntax.whenNoAncestorTagged(T,m)},N.prototype.whenAnyAncestorMatches=function(T){return this._bindingWhenSyntax.whenAnyAncestorMatches(T)},N.prototype.whenNoAncestorMatches=function(T){return this._bindingWhenSyntax.whenNoAncestorMatches(T)},N.prototype.onActivation=function(T){return this._bindingOnSyntax.onActivation(T)},N}();w.BindingInWhenOnSyntax=E},50783:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.BindingOnSyntax=void 0;var x=S(34647),z=function(){function k(E){this._binding=E}return k.prototype.onActivation=function(E){return this._binding.onActivation=E,new x.BindingWhenSyntax(this._binding)},k}();w.BindingOnSyntax=z},50832:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.BindingToSyntax=void 0;var x=S(40055),z=S(84624),k=S(24847),E=S(29215),N=function(){function T(m){this._binding=m}return T.prototype.to=function(m){return this._binding.type=z.BindingTypeEnum.Instance,this._binding.implementationType=m,new k.BindingInWhenOnSyntax(this._binding)},T.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+x.INVALID_TO_SELF_VALUE);var m=this._binding.serviceIdentifier;return this.to(m)},T.prototype.toConstantValue=function(m){return this._binding.type=z.BindingTypeEnum.ConstantValue,this._binding.cache=m,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},T.prototype.toDynamicValue=function(m){return this._binding.type=z.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=m,this._binding.implementationType=null,new k.BindingInWhenOnSyntax(this._binding)},T.prototype.toConstructor=function(m){return this._binding.type=z.BindingTypeEnum.Constructor,this._binding.implementationType=m,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},T.prototype.toFactory=function(m){return this._binding.type=z.BindingTypeEnum.Factory,this._binding.factory=m,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},T.prototype.toFunction=function(m){if(typeof m!="function")throw new Error(x.INVALID_FUNCTION_BINDING);var y=this.toConstantValue(m);return this._binding.type=z.BindingTypeEnum.Function,this._binding.scope=z.BindingScopeEnum.Singleton,y},T.prototype.toAutoFactory=function(m){return this._binding.type=z.BindingTypeEnum.Factory,this._binding.factory=function(y){var v=function(){return y.container.get(m)};return v},this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},T.prototype.toProvider=function(m){return this._binding.type=z.BindingTypeEnum.Provider,this._binding.provider=m,this._binding.scope=z.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},T.prototype.toService=function(m){this.toDynamicValue(function(y){return y.container.get(m)})},T}();w.BindingToSyntax=N},29215:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.BindingWhenOnSyntax=void 0;var x=S(50783),z=S(34647),k=function(){function E(N){this._binding=N,this._bindingWhenSyntax=new z.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new x.BindingOnSyntax(this._binding)}return E.prototype.when=function(N){return this._bindingWhenSyntax.when(N)},E.prototype.whenTargetNamed=function(N){return this._bindingWhenSyntax.whenTargetNamed(N)},E.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},E.prototype.whenTargetTagged=function(N,T){return this._bindingWhenSyntax.whenTargetTagged(N,T)},E.prototype.whenInjectedInto=function(N){return this._bindingWhenSyntax.whenInjectedInto(N)},E.prototype.whenParentNamed=function(N){return this._bindingWhenSyntax.whenParentNamed(N)},E.prototype.whenParentTagged=function(N,T){return this._bindingWhenSyntax.whenParentTagged(N,T)},E.prototype.whenAnyAncestorIs=function(N){return this._bindingWhenSyntax.whenAnyAncestorIs(N)},E.prototype.whenNoAncestorIs=function(N){return this._bindingWhenSyntax.whenNoAncestorIs(N)},E.prototype.whenAnyAncestorNamed=function(N){return this._bindingWhenSyntax.whenAnyAncestorNamed(N)},E.prototype.whenAnyAncestorTagged=function(N,T){return this._bindingWhenSyntax.whenAnyAncestorTagged(N,T)},E.prototype.whenNoAncestorNamed=function(N){return this._bindingWhenSyntax.whenNoAncestorNamed(N)},E.prototype.whenNoAncestorTagged=function(N,T){return this._bindingWhenSyntax.whenNoAncestorTagged(N,T)},E.prototype.whenAnyAncestorMatches=function(N){return this._bindingWhenSyntax.whenAnyAncestorMatches(N)},E.prototype.whenNoAncestorMatches=function(N){return this._bindingWhenSyntax.whenNoAncestorMatches(N)},E.prototype.onActivation=function(N){return this._bindingOnSyntax.onActivation(N)},E}();w.BindingWhenOnSyntax=k},34647:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.BindingWhenSyntax=void 0;var x=S(50783),z=S(4106),k=function(){function E(N){this._binding=N}return E.prototype.when=function(N){return this._binding.constraint=N,new x.BindingOnSyntax(this._binding)},E.prototype.whenTargetNamed=function(N){return this._binding.constraint=z.namedConstraint(N),new x.BindingOnSyntax(this._binding)},E.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(N){var T=N.target!==null&&!N.target.isNamed()&&!N.target.isTagged();return T},new x.BindingOnSyntax(this._binding)},E.prototype.whenTargetTagged=function(N,T){return this._binding.constraint=z.taggedConstraint(N)(T),new x.BindingOnSyntax(this._binding)},E.prototype.whenInjectedInto=function(N){return this._binding.constraint=function(T){return z.typeConstraint(N)(T.parentRequest)},new x.BindingOnSyntax(this._binding)},E.prototype.whenParentNamed=function(N){return this._binding.constraint=function(T){return z.namedConstraint(N)(T.parentRequest)},new x.BindingOnSyntax(this._binding)},E.prototype.whenParentTagged=function(N,T){return this._binding.constraint=function(m){return z.taggedConstraint(N)(T)(m.parentRequest)},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorIs=function(N){return this._binding.constraint=function(T){return z.traverseAncerstors(T,z.typeConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorIs=function(N){return this._binding.constraint=function(T){return!z.traverseAncerstors(T,z.typeConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorNamed=function(N){return this._binding.constraint=function(T){return z.traverseAncerstors(T,z.namedConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorNamed=function(N){return this._binding.constraint=function(T){return!z.traverseAncerstors(T,z.namedConstraint(N))},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorTagged=function(N,T){return this._binding.constraint=function(m){return z.traverseAncerstors(m,z.taggedConstraint(N)(T))},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorTagged=function(N,T){return this._binding.constraint=function(m){return!z.traverseAncerstors(m,z.taggedConstraint(N)(T))},new x.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorMatches=function(N){return this._binding.constraint=function(T){return z.traverseAncerstors(T,N)},new x.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorMatches=function(N){return this._binding.constraint=function(T){return!z.traverseAncerstors(T,N)},new x.BindingOnSyntax(this._binding)},E}();w.BindingWhenSyntax=k},4106:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.typeConstraint=w.namedConstraint=w.taggedConstraint=w.traverseAncerstors=void 0;var x=S(62220),z=S(37397),k=function(m,y){var v=m.parentRequest;return v!==null?y(v)?!0:k(v,y):!1};w.traverseAncerstors=k;var E=function(m){return function(y){var v=function(p){return p!==null&&p.target!==null&&p.target.matchesTag(m)(y)};return v.metaData=new z.Metadata(m,y),v}};w.taggedConstraint=E;var N=E(x.NAMED_TAG);w.namedConstraint=N;var T=function(m){return function(y){var v=null;if(y!==null)if(v=y.bindings[0],typeof m=="string"){var p=v.serviceIdentifier;return p===m}else{var g=y.bindings[0].implementationType;return m===g}return!1}};w.typeConstraint=T},65049:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.multiBindToService=void 0;var S=function(x){return function(z){return function(){for(var k=[],E=0;E<arguments.length;E++)k[E]=arguments[E];return k.forEach(function(N){return x.bind(N).toService(z)})}}};w.multiBindToService=S},16555:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.isStackOverflowExeption=void 0;var x=S(40055);function z(k){return k instanceof RangeError||k.message===x.STACK_OVERFLOW}w.isStackOverflowExeption=z},54906:function(ae,w){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.id=void 0;var S=0;function x(){return S++}w.id=x},88229:function(ae,w,S){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.circularDependencyToException=w.listMetadataForTarget=w.listRegisteredBindingsForServiceIdentifier=w.getServiceIdentifierAsString=w.getFunctionName=void 0;var x=S(40055);function z(v){if(typeof v=="function"){var p=v;return p.name}else{if(typeof v=="symbol")return v.toString();var p=v;return p}}w.getServiceIdentifierAsString=z;function k(v,p,g){var I="",_=g(v,p);return _.length!==0&&(I=`
Registered bindings:`,_.forEach(function(C){var O="Object";C.implementationType!==null&&(O=y(C.implementationType)),I=I+`
 `+O,C.constraint.metaData&&(I=I+" - "+C.constraint.metaData)})),I}w.listRegisteredBindingsForServiceIdentifier=k;function E(v,p){return v.parentRequest===null?!1:v.parentRequest.serviceIdentifier===p?!0:E(v.parentRequest,p)}function N(v){function p(I,_){_===void 0&&(_=[]);var C=z(I.serviceIdentifier);return _.push(C),I.parentRequest!==null?p(I.parentRequest,_):_}var g=p(v);return g.reverse().join(" --> ")}function T(v){v.childRequests.forEach(function(p){if(E(p,p.serviceIdentifier)){var g=N(p);throw new Error(x.CIRCULAR_DEPENDENCY+" "+g)}else T(p)})}w.circularDependencyToException=T;function m(v,p){if(p.isTagged()||p.isNamed()){var g="",I=p.getNamedTag(),_=p.getCustomTags();return I!==null&&(g+=I.toString()+`
`),_!==null&&_.forEach(function(C){g+=C.toString()+`
`})," "+v+`
 `+v+" - "+g}else return" "+v}w.listMetadataForTarget=m;function y(v){if(v.name)return v.name;var p=v.toString(),g=p.match(/^function\s*([^\s(]+)/);return g?g[1]:"Anonymous function: "+p}w.getFunctionName=y},89161:function(ae){ae.exports=function(S){return!S||typeof S=="string"?!1:S instanceof Array||Array.isArray(S)||S.length>=0&&(S.splice instanceof Function||Object.getOwnPropertyDescriptor(S,S.length-1)&&S.constructor.name!=="String")}},8639:function(ae,w,S){var x=S(60330),z=S(19204),k=S(42105),E=S(41596),N=S(44927),T=[0,0];ae.exports.x7=function(y,v,p,g,I){return x(y,p,g),k(y,y),z(v,-y[1],y[0]),z(T,-p[1],p[0]),I/N(v,T)},ae.exports.mJ=function(y,v){return z(y,-v[1],v[0]),y},ae.exports.o7=function(y,v,p){return E(y,v,p),k(y,y),y}},91010:function(ae,w,S){var x=S(44675);var z;(function(k){(function(E){var N=typeof S.g=="object"?S.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),T=m(k);typeof N.Reflect=="undefined"?N.Reflect=k:T=m(N.Reflect,T),E(T);function m(y,v){return function(p,g){typeof y[p]!="function"&&Object.defineProperty(y,p,{configurable:!0,writable:!0,value:g}),v&&v(p,g)}}})(function(E){var N=Object.prototype.hasOwnProperty,T=typeof Symbol=="function",m=T&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",y=T&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",v=typeof Object.create=="function",p={__proto__:[]}instanceof Array,g=!v&&!p,I={create:v?function(){return Ve(Object.create(null))}:p?function(){return Ve({__proto__:null})}:function(){return Ve({})},has:g?function(le,Le){return N.call(le,Le)}:function(le,Le){return Le in le},get:g?function(le,Le){return N.call(le,Le)?le[Le]:void 0}:function(le,Le){return le[Le]}},_=Object.getPrototypeOf(Function),C=typeof x=="object"&&{NODE_ENV:"production",PUBLIC_PATH:"/__umi_ui/entry/"}&&{NODE_ENV:"production",PUBLIC_PATH:"/__umi_ui/entry/"}.REFLECT_METADATA_USE_MAP_POLYFILL==="true",O=!C&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ge(),b=!C&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Re(),l=!C&&typeof WeakMap=="function"?WeakMap:qe(),K=new l;function Z(le,Le,je,Be){if(De(je)){if(!Ee(le))throw new TypeError;if(!bt(Le))throw new TypeError;return vt(le,Le)}else{if(!Ee(le))throw new TypeError;if(!Pt(Le))throw new TypeError;if(!Pt(Be)&&!De(Be)&&!Ye(Be))throw new TypeError;return Ye(Be)&&(Be=void 0),je=Zt(je),zt(le,Le,je,Be)}}E("decorate",Z);function X(le,Le){function je(Be,vr){if(!Pt(Be))throw new TypeError;if(!De(vr)&&!wt(vr))throw new TypeError;Vt(le,Le,Be,vr)}return je}E("metadata",X);function W(le,Le,je,Be){if(!Pt(je))throw new TypeError;return De(Be)||(Be=Zt(Be)),Vt(le,Le,je,Be)}E("defineMetadata",W);function U(le,Le,je){if(!Pt(Le))throw new TypeError;return De(je)||(je=Zt(je)),Rt(le,Le,je)}E("hasMetadata",U);function et(le,Le,je){if(!Pt(Le))throw new TypeError;return De(je)||(je=Zt(je)),At(le,Le,je)}E("hasOwnMetadata",et);function at(le,Le,je){if(!Pt(Le))throw new TypeError;return De(je)||(je=Zt(je)),Q(le,Le,je)}E("getMetadata",at);function J(le,Le,je){if(!Pt(Le))throw new TypeError;return De(je)||(je=Zt(je)),gt(le,Le,je)}E("getOwnMetadata",J);function nt(le,Le){if(!Pt(le))throw new TypeError;return De(Le)||(Le=Zt(Le)),Ht(le,Le)}E("getMetadataKeys",nt);function mt(le,Le){if(!Pt(le))throw new TypeError;return De(Le)||(Le=Zt(Le)),It(le,Le)}E("getOwnMetadataKeys",mt);function Mt(le,Le,je){if(!Pt(Le))throw new TypeError;De(je)||(je=Zt(je));var Be=re(Le,je,!1);if(De(Be)||!Be.delete(le))return!1;if(Be.size>0)return!0;var vr=K.get(Le);return vr.delete(je),vr.size>0||K.delete(Le),!0}E("deleteMetadata",Mt);function vt(le,Le){for(var je=le.length-1;je>=0;--je){var Be=le[je],vr=Be(Le);if(!De(vr)&&!Ye(vr)){if(!bt(vr))throw new TypeError;Le=vr}}return Le}function zt(le,Le,je,Be){for(var vr=le.length-1;vr>=0;--vr){var or=le[vr],Ae=or(Le,je,Be);if(!De(Ae)&&!Ye(Ae)){if(!Pt(Ae))throw new TypeError;Be=Ae}}return Be}function re(le,Le,je){var Be=K.get(le);if(De(Be)){if(!je)return;Be=new O,K.set(le,Be)}var vr=Be.get(Le);if(De(vr)){if(!je)return;vr=new O,Be.set(Le,vr)}return vr}function Rt(le,Le,je){var Be=At(le,Le,je);if(Be)return!0;var vr=ge(Le);return Ye(vr)?!1:Rt(le,vr,je)}function At(le,Le,je){var Be=re(Le,je,!1);return De(Be)?!1:Qt(Be.has(le))}function Q(le,Le,je){var Be=At(le,Le,je);if(Be)return gt(le,Le,je);var vr=ge(Le);if(!Ye(vr))return Q(le,vr,je)}function gt(le,Le,je){var Be=re(Le,je,!1);if(!De(Be))return Be.get(le)}function Vt(le,Le,je,Be){var vr=re(je,Be,!0);vr.set(le,Le)}function Ht(le,Le){var je=It(le,Le),Be=ge(le);if(Be===null)return je;var vr=Ht(Be,Le);if(vr.length<=0)return je;if(je.length<=0)return vr;for(var or=new b,Ae=[],yr=0,Cr=je;yr<Cr.length;yr++){var zr=Cr[yr],Mr=or.has(zr);Mr||(or.add(zr),Ae.push(zr))}for(var un=0,hn=vr;un<hn.length;un++){var zr=hn[un],Mr=or.has(zr);Mr||(or.add(zr),Ae.push(zr))}return Ae}function It(le,Le){var je=[],Be=re(le,Le,!1);if(De(Be))return je;for(var vr=Be.keys(),or=rt(vr),Ae=0;;){var yr=ft(or);if(!yr)return je.length=Ae,je;var Cr=Nt(yr);try{je[Ae]=Cr}catch(zr){try{ie(or)}finally{throw zr}}Ae++}}function de(le){if(le===null)return 1;switch(typeof le){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return le===null?1:6;default:return 6}}function De(le){return le===void 0}function Ye(le){return le===null}function kt(le){return typeof le=="symbol"}function Pt(le){return typeof le=="object"?le!==null:typeof le=="function"}function _t(le,Le){switch(de(le)){case 0:return le;case 1:return le;case 2:return le;case 3:return le;case 4:return le;case 5:return le}var je=Le===3?"string":Le===5?"number":"default",Be=D(le,m);if(Be!==void 0){var vr=Be.call(le,je);if(Pt(vr))throw new TypeError;return vr}return jt(le,je==="default"?"number":je)}function jt(le,Le){if(Le==="string"){var je=le.toString;if(dt(je)){var Be=je.call(le);if(!Pt(Be))return Be}var vr=le.valueOf;if(dt(vr)){var Be=vr.call(le);if(!Pt(Be))return Be}}else{var vr=le.valueOf;if(dt(vr)){var Be=vr.call(le);if(!Pt(Be))return Be}var or=le.toString;if(dt(or)){var Be=or.call(le);if(!Pt(Be))return Be}}throw new TypeError}function Qt(le){return!!le}function Tt(le){return""+le}function Zt(le){var Le=_t(le,3);return kt(Le)?Le:Tt(Le)}function Ee(le){return Array.isArray?Array.isArray(le):le instanceof Object?le instanceof Array:Object.prototype.toString.call(le)==="[object Array]"}function dt(le){return typeof le=="function"}function bt(le){return typeof le=="function"}function wt(le){switch(de(le)){case 3:return!0;case 4:return!0;default:return!1}}function D(le,Le){var je=le[Le];if(je!=null){if(!dt(je))throw new TypeError;return je}}function rt(le){var Le=D(le,y);if(!dt(Le))throw new TypeError;var je=Le.call(le);if(!Pt(je))throw new TypeError;return je}function Nt(le){return le.value}function ft(le){var Le=le.next();return Le.done?!1:Le}function ie(le){var Le=le.return;Le&&Le.call(le)}function ge(le){var Le=Object.getPrototypeOf(le);if(typeof le!="function"||le===_||Le!==_)return Le;var je=le.prototype,Be=je&&Object.getPrototypeOf(je);if(Be==null||Be===Object.prototype)return Le;var vr=Be.constructor;return typeof vr!="function"||vr===le?Le:vr}function Ge(){var le={},Le=[],je=function(){function Ae(yr,Cr,zr){this._index=0,this._keys=yr,this._values=Cr,this._selector=zr}return Ae.prototype["@@iterator"]=function(){return this},Ae.prototype[y]=function(){return this},Ae.prototype.next=function(){var yr=this._index;if(yr>=0&&yr<this._keys.length){var Cr=this._selector(this._keys[yr],this._values[yr]);return yr+1>=this._keys.length?(this._index=-1,this._keys=Le,this._values=Le):this._index++,{value:Cr,done:!1}}return{value:void 0,done:!0}},Ae.prototype.throw=function(yr){throw this._index>=0&&(this._index=-1,this._keys=Le,this._values=Le),yr},Ae.prototype.return=function(yr){return this._index>=0&&(this._index=-1,this._keys=Le,this._values=Le),{value:yr,done:!0}},Ae}();return function(){function Ae(){this._keys=[],this._values=[],this._cacheKey=le,this._cacheIndex=-2}return Object.defineProperty(Ae.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ae.prototype.has=function(yr){return this._find(yr,!1)>=0},Ae.prototype.get=function(yr){var Cr=this._find(yr,!1);return Cr>=0?this._values[Cr]:void 0},Ae.prototype.set=function(yr,Cr){var zr=this._find(yr,!0);return this._values[zr]=Cr,this},Ae.prototype.delete=function(yr){var Cr=this._find(yr,!1);if(Cr>=0){for(var zr=this._keys.length,Mr=Cr+1;Mr<zr;Mr++)this._keys[Mr-1]=this._keys[Mr],this._values[Mr-1]=this._values[Mr];return this._keys.length--,this._values.length--,yr===this._cacheKey&&(this._cacheKey=le,this._cacheIndex=-2),!0}return!1},Ae.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=le,this._cacheIndex=-2},Ae.prototype.keys=function(){return new je(this._keys,this._values,Be)},Ae.prototype.values=function(){return new je(this._keys,this._values,vr)},Ae.prototype.entries=function(){return new je(this._keys,this._values,or)},Ae.prototype["@@iterator"]=function(){return this.entries()},Ae.prototype[y]=function(){return this.entries()},Ae.prototype._find=function(yr,Cr){return this._cacheKey!==yr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=yr)),this._cacheIndex<0&&Cr&&(this._cacheIndex=this._keys.length,this._keys.push(yr),this._values.push(void 0)),this._cacheIndex},Ae}();function Be(Ae,yr){return Ae}function vr(Ae,yr){return yr}function or(Ae,yr){return[Ae,yr]}}function Re(){return function(){function le(){this._map=new O}return Object.defineProperty(le.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),le.prototype.has=function(Le){return this._map.has(Le)},le.prototype.add=function(Le){return this._map.set(Le,Le),this},le.prototype.delete=function(Le){return this._map.delete(Le)},le.prototype.clear=function(){this._map.clear()},le.prototype.keys=function(){return this._map.keys()},le.prototype.values=function(){return this._map.values()},le.prototype.entries=function(){return this._map.entries()},le.prototype["@@iterator"]=function(){return this.keys()},le.prototype[y]=function(){return this.keys()},le}()}function qe(){var le=16,Le=I.create(),je=Be();return function(){function Cr(){this._key=Be()}return Cr.prototype.has=function(zr){var Mr=vr(zr,!1);return Mr!==void 0?I.has(Mr,this._key):!1},Cr.prototype.get=function(zr){var Mr=vr(zr,!1);return Mr!==void 0?I.get(Mr,this._key):void 0},Cr.prototype.set=function(zr,Mr){var un=vr(zr,!0);return un[this._key]=Mr,this},Cr.prototype.delete=function(zr){var Mr=vr(zr,!1);return Mr!==void 0?delete Mr[this._key]:!1},Cr.prototype.clear=function(){this._key=Be()},Cr}();function Be(){var Cr;do Cr="@@WeakMap@@"+yr();while(I.has(Le,Cr));return Le[Cr]=!0,Cr}function vr(Cr,zr){if(!N.call(Cr,je)){if(!zr)return;Object.defineProperty(Cr,je,{value:I.create()})}return Cr[je]}function or(Cr,zr){for(var Mr=0;Mr<zr;++Mr)Cr[Mr]=Math.random()*255|0;return Cr}function Ae(Cr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Cr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Cr)):or(new Uint8Array(Cr),Cr):or(new Array(Cr),Cr)}function yr(){var Cr=Ae(le);Cr[6]=Cr[6]&79|64,Cr[8]=Cr[8]&191|128;for(var zr="",Mr=0;Mr<le;++Mr){var un=Cr[Mr];(Mr===4||Mr===6||Mr===8)&&(zr+="-"),un<16&&(zr+="0"),zr+=un.toString(16).toLowerCase()}return zr}}function Ve(le){return le.__=void 0,delete le.__,le}})})(z||(z={}))},4085:function(ae){(function(w,S){ae.exports=S()})(this,function(){"use strict";var w=function(Ct){return Ct instanceof Uint8Array||Ct instanceof Uint16Array||Ct instanceof Uint32Array||Ct instanceof Int8Array||Ct instanceof Int16Array||Ct instanceof Int32Array||Ct instanceof Float32Array||Ct instanceof Float64Array||Ct instanceof Uint8ClampedArray},S=function(Ct,ce){for(var ze=Object.keys(ce),wr=0;wr<ze.length;++wr)Ct[ze[wr]]=ce[ze[wr]];return Ct},x=`
`;function z(Ct){return typeof atob!="undefined"?atob(Ct):"base64:"+Ct}function k(Ct){var ce=new Error("(regl) "+Ct);throw console.error(ce),ce}function E(Ct,ce){Ct||k(ce)}function N(Ct){return Ct?": "+Ct:""}function T(Ct,ce,ze){Ct in ce||k("unknown parameter ("+Ct+")"+N(ze)+". possible values: "+Object.keys(ce).join())}function m(Ct,ce){w(Ct)||k("invalid parameter type"+N(ce)+". must be a typed array")}function y(Ct,ce){switch(ce){case"number":return typeof Ct=="number";case"object":return typeof Ct=="object";case"string":return typeof Ct=="string";case"boolean":return typeof Ct=="boolean";case"function":return typeof Ct=="function";case"undefined":return typeof Ct=="undefined";case"symbol":return typeof Ct=="symbol"}}function v(Ct,ce,ze){y(Ct,ce)||k("invalid parameter type"+N(ze)+". expected "+ce+", got "+typeof Ct)}function p(Ct,ce){Ct>=0&&(Ct|0)===Ct||k("invalid parameter type, ("+Ct+")"+N(ce)+". must be a nonnegative integer")}function g(Ct,ce,ze){ce.indexOf(Ct)<0&&k("invalid value"+N(ze)+". must be one of: "+ce)}var I=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function _(Ct){Object.keys(Ct).forEach(function(ce){I.indexOf(ce)<0&&k('invalid regl constructor argument "'+ce+'". must be one of '+I)})}function C(Ct,ce){for(Ct=Ct+"";Ct.length<ce;)Ct=" "+Ct;return Ct}function O(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(Ct,ce){this.number=Ct,this.line=ce,this.errors=[]}function l(Ct,ce,ze){this.file=Ct,this.line=ce,this.message=ze}function K(){var Ct=new Error,ce=(Ct.stack||Ct).toString(),ze=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ce);if(ze)return ze[1];var wr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ce);return wr?wr[1]:"unknown"}function Z(){var Ct=new Error,ce=(Ct.stack||Ct).toString(),ze=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ce);if(ze)return ze[1];var wr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ce);return wr?wr[1]:"unknown"}function X(Ct,ce){var ze=Ct.split(`
`),wr=1,Rr=0,br={unknown:new O,0:new O};br.unknown.name=br[0].name=ce||K(),br.unknown.lines.push(new b(0,""));for(var Ar=0;Ar<ze.length;++Ar){var jr=ze[Ar],Hr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(jr);if(Hr)switch(Hr[1]){case"line":var Kr=/(\d+)(\s+\d+)?/.exec(Hr[2]);Kr&&(wr=Kr[1]|0,Kr[2]&&(Rr=Kr[2]|0,Rr in br||(br[Rr]=new O)));break;case"define":var Vr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Hr[2]);Vr&&(br[Rr].name=Vr[1]?z(Vr[2]):Vr[2]);break}br[Rr].lines.push(new b(wr++,jr))}return Object.keys(br).forEach(function(Qr){var d=br[Qr];d.lines.forEach(function(L){d.index[L.number]=L})}),br}function W(Ct){var ce=[];return Ct.split(`
`).forEach(function(ze){if(!(ze.length<5)){var wr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ze);wr?ce.push(new l(wr[1]|0,wr[2]|0,wr[3].trim())):ze.length>0&&ce.push(new l("unknown",0,ze))}}),ce}function U(Ct,ce){ce.forEach(function(ze){var wr=Ct[ze.file];if(wr){var Rr=wr.index[ze.line];if(Rr){Rr.errors.push(ze),wr.hasErrors=!0;return}}Ct.unknown.hasErrors=!0,Ct.unknown.lines[0].errors.push(ze)})}function et(Ct,ce,ze,wr,Rr){if(!Ct.getShaderParameter(ce,Ct.COMPILE_STATUS)){var br=Ct.getShaderInfoLog(ce),Ar=wr===Ct.FRAGMENT_SHADER?"fragment":"vertex";zt(ze,"string",Ar+" shader source must be a string",Rr);var jr=X(ze,Rr),Hr=W(br);U(jr,Hr),Object.keys(jr).forEach(function(Kr){var Vr=jr[Kr];if(!Vr.hasErrors)return;var Qr=[""],d=[""];function L(j,tt){Qr.push(j),d.push(tt||"")}L("file number "+Kr+": "+Vr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Vr.lines.forEach(function(j){if(j.errors.length>0){L(C(j.number,4)+"|  ","background-color:yellow; font-weight:bold"),L(j.line+x,"color:red; background-color:yellow; font-weight:bold");var tt=0;j.errors.forEach(function(lt){var pt=lt.message,St=/^\s*'(.*)'\s*:\s*(.*)$/.exec(pt);if(St){var Ot=St[1];switch(pt=St[2],Ot){case"assign":Ot="=";break}tt=Math.max(j.line.indexOf(Ot,tt),0)}else tt=0;L(C("| ",6)),L(C("^^^",tt+3)+x,"font-weight:bold"),L(C("| ",6)),L(pt+x,"font-weight:bold")}),L(C("| ",6)+x)}else L(C(j.number,4)+"|  "),L(j.line+x,"color:red")}),typeof document!="undefined"&&!window.chrome?(d[0]=Qr.join("%c"),console.log.apply(console,d)):console.log(Qr.join(""))}),E.raise("Error compiling "+Ar+" shader, "+jr[0].name)}}function at(Ct,ce,ze,wr,Rr){if(!Ct.getProgramParameter(ce,Ct.LINK_STATUS)){var br=Ct.getProgramInfoLog(ce),Ar=X(ze,Rr),jr=X(wr,Rr),Hr='Error linking program with vertex shader, "'+jr[0].name+'", and fragment shader "'+Ar[0].name+'"';typeof document!="undefined"?console.log("%c"+Hr+x+"%c"+br,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Hr+x+br),E.raise(Hr)}}function J(Ct){Ct._commandRef=K()}function nt(Ct,ce,ze,wr){J(Ct);function Rr(Hr){return Hr?wr.id(Hr):0}Ct._fragId=Rr(Ct.static.frag),Ct._vertId=Rr(Ct.static.vert);function br(Hr,Kr){Object.keys(Kr).forEach(function(Vr){Hr[wr.id(Vr)]=!0})}var Ar=Ct._uniformSet={};br(Ar,ce.static),br(Ar,ce.dynamic);var jr=Ct._attributeSet={};br(jr,ze.static),br(jr,ze.dynamic),Ct._hasCount="count"in Ct.static||"count"in Ct.dynamic||"elements"in Ct.static||"elements"in Ct.dynamic}function mt(Ct,ce){var ze=Z();k(Ct+" in command "+(ce||K())+(ze==="unknown"?"":" called from "+ze))}function Mt(Ct,ce,ze){Ct||mt(ce,ze||K())}function vt(Ct,ce,ze,wr){Ct in ce||mt("unknown parameter ("+Ct+")"+N(ze)+". possible values: "+Object.keys(ce).join(),wr||K())}function zt(Ct,ce,ze,wr){y(Ct,ce)||mt("invalid parameter type"+N(ze)+". expected "+ce+", got "+typeof Ct,wr||K())}function re(Ct){Ct()}function Rt(Ct,ce,ze){Ct.texture?g(Ct.texture._texture.internalformat,ce,"unsupported texture format for attachment"):g(Ct.renderbuffer._renderbuffer.format,ze,"unsupported renderbuffer format for attachment")}var At=33071,Q=9728,gt=9984,Vt=9985,Ht=9986,It=9987,de=5120,De=5121,Ye=5122,kt=5123,Pt=5124,_t=5125,jt=5126,Qt=32819,Tt=32820,Zt=33635,Ee=34042,dt=36193,bt={};bt[de]=bt[De]=1,bt[Ye]=bt[kt]=bt[dt]=bt[Zt]=bt[Qt]=bt[Tt]=2,bt[Pt]=bt[_t]=bt[jt]=bt[Ee]=4;function wt(Ct,ce){return Ct===Tt||Ct===Qt||Ct===Zt?2:Ct===Ee?4:bt[Ct]*ce}function D(Ct){return!(Ct&Ct-1)&&!!Ct}function rt(Ct,ce,ze){var wr,Rr=ce.width,br=ce.height,Ar=ce.channels;E(Rr>0&&Rr<=ze.maxTextureSize&&br>0&&br<=ze.maxTextureSize,"invalid texture shape"),(Ct.wrapS!==At||Ct.wrapT!==At)&&E(D(Rr)&&D(br),"incompatible wrap mode for texture, both width and height must be power of 2"),ce.mipmask===1?Rr!==1&&br!==1&&E(Ct.minFilter!==gt&&Ct.minFilter!==Ht&&Ct.minFilter!==Vt&&Ct.minFilter!==It,"min filter requires mipmap"):(E(D(Rr)&&D(br),"texture must be a square power of 2 to support mipmapping"),E(ce.mipmask===(Rr<<1)-1,"missing or incomplete mipmap data")),ce.type===jt&&(ze.extensions.indexOf("oes_texture_float_linear")<0&&E(Ct.minFilter===Q&&Ct.magFilter===Q,"filter not supported, must enable oes_texture_float_linear"),E(!Ct.genMipmaps,"mipmap generation not supported with float textures"));var jr=ce.images;for(wr=0;wr<16;++wr)if(jr[wr]){var Hr=Rr>>wr,Kr=br>>wr;E(ce.mipmask&1<<wr,"missing mipmap data");var Vr=jr[wr];if(E(Vr.width===Hr&&Vr.height===Kr,"invalid shape for mip images"),E(Vr.format===ce.format&&Vr.internalformat===ce.internalformat&&Vr.type===ce.type,"incompatible type for mip image"),!Vr.compressed)if(Vr.data){var Qr=Math.ceil(wt(Vr.type,Ar)*Hr/Vr.unpackAlignment)*Vr.unpackAlignment;E(Vr.data.byteLength===Qr*Kr,"invalid data for image, buffer size is inconsistent with image format")}else Vr.element||Vr.copy}else Ct.genMipmaps||E((ce.mipmask&1<<wr)===0,"extra mipmap data");ce.compressed&&E(!Ct.genMipmaps,"mipmap generation for compressed images not supported")}function Nt(Ct,ce,ze,wr){var Rr=Ct.width,br=Ct.height,Ar=Ct.channels;E(Rr>0&&Rr<=wr.maxTextureSize&&br>0&&br<=wr.maxTextureSize,"invalid texture shape"),E(Rr===br,"cube map must be square"),E(ce.wrapS===At&&ce.wrapT===At,"wrap mode not supported by cube map");for(var jr=0;jr<ze.length;++jr){var Hr=ze[jr];E(Hr.width===Rr&&Hr.height===br,"inconsistent cube map face shape"),ce.genMipmaps&&(E(!Hr.compressed,"can not generate mipmap for compressed textures"),E(Hr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Kr=Hr.images,Vr=0;Vr<16;++Vr){var Qr=Kr[Vr];if(Qr){var d=Rr>>Vr,L=br>>Vr;E(Hr.mipmask&1<<Vr,"missing mipmap data"),E(Qr.width===d&&Qr.height===L,"invalid shape for mip images"),E(Qr.format===Ct.format&&Qr.internalformat===Ct.internalformat&&Qr.type===Ct.type,"incompatible type for mip image"),Qr.compressed||(Qr.data?E(Qr.data.byteLength===d*L*Math.max(wt(Qr.type,Ar),Qr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Qr.element||Qr.copy)}}}}var ft=S(E,{optional:re,raise:k,commandRaise:mt,command:Mt,parameter:T,commandParameter:vt,constructor:_,type:v,commandType:zt,isTypedArray:m,nni:p,oneOf:g,shaderError:et,linkError:at,callSite:Z,saveCommandRef:J,saveDrawInfo:nt,framebufferFormat:Rt,guessCommand:K,texture2D:rt,textureCube:Nt}),ie=0,ge=0,Ge=5,Re=6;function qe(Ct,ce){this.id=ie++,this.type=Ct,this.data=ce}function Ve(Ct){return Ct.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function le(Ct){if(Ct.length===0)return[];var ce=Ct.charAt(0),ze=Ct.charAt(Ct.length-1);if(Ct.length>1&&ce===ze&&(ce==='"'||ce==="'"))return['"'+Ve(Ct.substr(1,Ct.length-2))+'"'];var wr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ct);if(wr)return le(Ct.substr(0,wr.index)).concat(le(wr[1])).concat(le(Ct.substr(wr.index+wr[0].length)));var Rr=Ct.split(".");if(Rr.length===1)return['"'+Ve(Ct)+'"'];for(var br=[],Ar=0;Ar<Rr.length;++Ar)br=br.concat(le(Rr[Ar]));return br}function Le(Ct){return"["+le(Ct).join("][")+"]"}function je(Ct,ce){return new qe(Ct,Le(ce+""))}function Be(Ct){return typeof Ct=="function"&&!Ct._reglType||Ct instanceof qe}function vr(Ct,ce){if(typeof Ct=="function")return new qe(ge,Ct);if(typeof Ct=="number"||typeof Ct=="boolean")return new qe(Ge,Ct);if(Array.isArray(Ct))return new qe(Re,Ct.map((ze,wr)=>vr(ze,ce+"["+wr+"]")));if(Ct instanceof qe)return Ct;ft(!1,"invalid option type in uniform "+ce)}var or={DynamicVariable:qe,define:je,isDynamic:Be,unbox:vr,accessor:Le},Ae={next:typeof requestAnimationFrame=="function"?function(Ct){return requestAnimationFrame(Ct)}:function(Ct){return setTimeout(Ct,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ct){return cancelAnimationFrame(Ct)}:clearTimeout},yr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Cr(){var Ct={"":0},ce=[""];return{id:function(ze){var wr=Ct[ze];return wr||(wr=Ct[ze]=ce.length,ce.push(ze),wr)},str:function(ze){return ce[ze]}}}function zr(Ct,ce,ze){var wr=document.createElement("canvas");S(wr.style,{border:0,margin:0,padding:0,top:0,left:0}),Ct.appendChild(wr),Ct===document.body&&(wr.style.position="absolute",S(Ct.style,{margin:0,padding:0}));function Rr(){var jr=window.innerWidth,Hr=window.innerHeight;if(Ct!==document.body){var Kr=Ct.getBoundingClientRect();jr=Kr.right-Kr.left,Hr=Kr.bottom-Kr.top}wr.width=ze*jr,wr.height=ze*Hr,S(wr.style,{width:jr+"px",height:Hr+"px"})}var br;Ct!==document.body&&typeof ResizeObserver=="function"?(br=new ResizeObserver(function(){setTimeout(Rr)}),br.observe(Ct)):window.addEventListener("resize",Rr,!1);function Ar(){br?br.disconnect():window.removeEventListener("resize",Rr),Ct.removeChild(wr)}return Rr(),{canvas:wr,onDestroy:Ar}}function Mr(Ct,ce){function ze(wr){try{return Ct.getContext(wr,ce)}catch(Rr){return null}}return ze("webgl")||ze("experimental-webgl")||ze("webgl-experimental")}function un(Ct){return typeof Ct.nodeName=="string"&&typeof Ct.appendChild=="function"&&typeof Ct.getBoundingClientRect=="function"}function hn(Ct){return typeof Ct.drawArrays=="function"||typeof Ct.drawElements=="function"}function Un(Ct){return typeof Ct=="string"?Ct.split():(ft(Array.isArray(Ct),"invalid extension array"),Ct)}function nn(Ct){return typeof Ct=="string"?(ft(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Ct)):Ct}function vn(Ct){var ce=Ct||{},ze,wr,Rr,br,Ar={},jr=[],Hr=[],Kr=typeof window=="undefined"?1:window.devicePixelRatio,Vr=!1,Qr=function(j){j&&ft.raise(j)},d=function(){};if(typeof ce=="string"?(ft(typeof document!="undefined","selector queries only supported in DOM enviroments"),ze=document.querySelector(ce),ft(ze,"invalid query string for element")):typeof ce=="object"?un(ce)?ze=ce:hn(ce)?(br=ce,Rr=br.canvas):(ft.constructor(ce),"gl"in ce?br=ce.gl:"canvas"in ce?Rr=nn(ce.canvas):"container"in ce&&(wr=nn(ce.container)),"attributes"in ce&&(Ar=ce.attributes,ft.type(Ar,"object","invalid context attributes")),"extensions"in ce&&(jr=Un(ce.extensions)),"optionalExtensions"in ce&&(Hr=Un(ce.optionalExtensions)),"onDone"in ce&&(ft.type(ce.onDone,"function","invalid or missing onDone callback"),Qr=ce.onDone),"profile"in ce&&(Vr=!!ce.profile),"pixelRatio"in ce&&(Kr=+ce.pixelRatio,ft(Kr>0,"invalid pixel ratio"))):ft.raise("invalid arguments to regl"),ze&&(ze.nodeName.toLowerCase()==="canvas"?Rr=ze:wr=ze),!br){if(!Rr){ft(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var L=zr(wr||document.body,Qr,Kr);if(!L)return null;Rr=L.canvas,d=L.onDestroy}Ar.premultipliedAlpha===void 0&&(Ar.premultipliedAlpha=!0),br=Mr(Rr,Ar)}return br?{gl:br,canvas:Rr,container:wr,extensions:jr,optionalExtensions:Hr,pixelRatio:Kr,profile:Vr,onDone:Qr,onDestroy:d}:(d(),Qr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ln(Ct,ce){var ze={};function wr(Ar){ft.type(Ar,"string","extension name must be string");var jr=Ar.toLowerCase(),Hr;try{Hr=ze[jr]=Ct.getExtension(jr)}catch(Kr){}return!!Hr}for(var Rr=0;Rr<ce.extensions.length;++Rr){var br=ce.extensions[Rr];if(!wr(br))return ce.onDestroy(),ce.onDone('"'+br+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ce.optionalExtensions.forEach(wr),{extensions:ze,restore:function(){Object.keys(ze).forEach(function(Ar){if(ze[Ar]&&!wr(Ar))throw new Error("(regl): error restoring extension "+Ar)})}}}function pn(Ct,ce){for(var ze=Array(Ct),wr=0;wr<Ct;++wr)ze[wr]=ce(wr);return ze}var Bn=5120,Pe=5121,Cn=5122,Gn=5123,bi=5124,zn=5125,Hn=5126;function hi(Ct){for(var ce=16;ce<=1<<28;ce*=16)if(Ct<=ce)return ce;return 0}function Si(Ct){var ce,ze;return ce=(Ct>65535)<<4,Ct>>>=ce,ze=(Ct>255)<<3,Ct>>>=ze,ce|=ze,ze=(Ct>15)<<2,Ct>>>=ze,ce|=ze,ze=(Ct>3)<<1,Ct>>>=ze,ce|=ze,ce|Ct>>1}function pi(){var Ct=pn(8,function(){return[]});function ce(br){var Ar=hi(br),jr=Ct[Si(Ar)>>2];return jr.length>0?jr.pop():new ArrayBuffer(Ar)}function ze(br){Ct[Si(br.byteLength)>>2].push(br)}function wr(br,Ar){var jr=null;switch(br){case Bn:jr=new Int8Array(ce(Ar),0,Ar);break;case Pe:jr=new Uint8Array(ce(Ar),0,Ar);break;case Cn:jr=new Int16Array(ce(2*Ar),0,Ar);break;case Gn:jr=new Uint16Array(ce(2*Ar),0,Ar);break;case bi:jr=new Int32Array(ce(4*Ar),0,Ar);break;case zn:jr=new Uint32Array(ce(4*Ar),0,Ar);break;case Hn:jr=new Float32Array(ce(4*Ar),0,Ar);break;default:return null}return jr.length!==Ar?jr.subarray(0,Ar):jr}function Rr(br){ze(br.buffer)}return{alloc:ce,free:ze,allocType:wr,freeType:Rr}}var Dt=pi();Dt.zero=pi();var Lt=3408,H=3410,G=3411,F=3412,st=3413,Bt=3414,Kt=3415,Yt=33901,he=33902,ot=3379,yt=3386,te=34921,Me=36347,Se=36348,er=35661,sr=35660,ye=34930,Fe=36349,tr=34076,Sr=34024,Er=7936,me=7937,Ft=7938,ne=35724,Ie=34047,Ce=36063,Ue=34852,Xe=3553,Wr=34067,$r=34069,mn=33984,Nn=6408,kn=5126,Jn=5121,ri=36160,Ri=36053,di=36064,Ki=16384,yo=function(Ct,ce){var ze=1;ce.ext_texture_filter_anisotropic&&(ze=Ct.getParameter(Ie));var wr=1,Rr=1;ce.webgl_draw_buffers&&(wr=Ct.getParameter(Ue),Rr=Ct.getParameter(Ce));var br=!!ce.oes_texture_float;if(br){var Ar=Ct.createTexture();Ct.bindTexture(Xe,Ar),Ct.texImage2D(Xe,0,Nn,1,1,0,Nn,kn,null);var jr=Ct.createFramebuffer();if(Ct.bindFramebuffer(ri,jr),Ct.framebufferTexture2D(ri,di,Xe,Ar,0),Ct.bindTexture(Xe,null),Ct.checkFramebufferStatus(ri)!==Ri)br=!1;else{Ct.viewport(0,0,1,1),Ct.clearColor(1,0,0,1),Ct.clear(Ki);var Hr=Dt.allocType(kn,4);Ct.readPixels(0,0,1,1,Nn,kn,Hr),Ct.getError()?br=!1:(Ct.deleteFramebuffer(jr),Ct.deleteTexture(Ar),br=Hr[0]===1),Dt.freeType(Hr)}}var Kr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Vr=!0;if(!Kr){var Qr=Ct.createTexture(),d=Dt.allocType(Jn,36);Ct.activeTexture(mn),Ct.bindTexture(Wr,Qr),Ct.texImage2D($r,0,Nn,3,3,0,Nn,Jn,d),Dt.freeType(d),Ct.bindTexture(Wr,null),Ct.deleteTexture(Qr),Vr=!Ct.getError()}return{colorBits:[Ct.getParameter(H),Ct.getParameter(G),Ct.getParameter(F),Ct.getParameter(st)],depthBits:Ct.getParameter(Bt),stencilBits:Ct.getParameter(Kt),subpixelBits:Ct.getParameter(Lt),extensions:Object.keys(ce).filter(function(L){return!!ce[L]}),maxAnisotropic:ze,maxDrawbuffers:wr,maxColorAttachments:Rr,pointSizeDims:Ct.getParameter(Yt),lineWidthDims:Ct.getParameter(he),maxViewportDims:Ct.getParameter(yt),maxCombinedTextureUnits:Ct.getParameter(er),maxCubeMapSize:Ct.getParameter(tr),maxRenderbufferSize:Ct.getParameter(Sr),maxTextureUnits:Ct.getParameter(ye),maxTextureSize:Ct.getParameter(ot),maxAttributes:Ct.getParameter(te),maxVertexUniforms:Ct.getParameter(Me),maxVertexTextureUnits:Ct.getParameter(sr),maxVaryingVectors:Ct.getParameter(Se),maxFragmentUniforms:Ct.getParameter(Fe),glsl:Ct.getParameter(ne),renderer:Ct.getParameter(me),vendor:Ct.getParameter(Er),version:Ct.getParameter(Ft),readFloat:br,npotTextureCube:Vr}};function Ea(Ct){return!!Ct&&typeof Ct=="object"&&Array.isArray(Ct.shape)&&Array.isArray(Ct.stride)&&typeof Ct.offset=="number"&&Ct.shape.length===Ct.stride.length&&(Array.isArray(Ct.data)||w(Ct.data))}var ta=function(Ct){return Object.keys(Ct).map(function(ce){return Ct[ce]})},mo={shape:zi,flatten:Vo};function Na(Ct,ce,ze){for(var wr=0;wr<ce;++wr)ze[wr]=Ct[wr]}function To(Ct,ce,ze,wr){for(var Rr=0,br=0;br<ce;++br)for(var Ar=Ct[br],jr=0;jr<ze;++jr)wr[Rr++]=Ar[jr]}function vi(Ct,ce,ze,wr,Rr,br){for(var Ar=br,jr=0;jr<ce;++jr)for(var Hr=Ct[jr],Kr=0;Kr<ze;++Kr)for(var Vr=Hr[Kr],Qr=0;Qr<wr;++Qr)Rr[Ar++]=Vr[Qr]}function xa(Ct,ce,ze,wr,Rr){for(var br=1,Ar=ze+1;Ar<ce.length;++Ar)br*=ce[Ar];var jr=ce[ze];if(ce.length-ze===4){var Hr=ce[ze+1],Kr=ce[ze+2],Vr=ce[ze+3];for(Ar=0;Ar<jr;++Ar)vi(Ct[Ar],Hr,Kr,Vr,wr,Rr),Rr+=br}else for(Ar=0;Ar<jr;++Ar)xa(Ct[Ar],ce,ze+1,wr,Rr),Rr+=br}function Vo(Ct,ce,ze,wr){var Rr=1;if(ce.length)for(var br=0;br<ce.length;++br)Rr*=ce[br];else Rr=0;var Ar=wr||Dt.allocType(ze,Rr);switch(ce.length){case 0:break;case 1:Na(Ct,ce[0],Ar);break;case 2:To(Ct,ce[0],ce[1],Ar);break;case 3:vi(Ct,ce[0],ce[1],ce[2],Ar,0);break;default:xa(Ct,ce,0,Ar,0)}return Ar}function zi(Ct){for(var ce=[],ze=Ct;ze.length;ze=ze[0])ce.push(ze.length);return ce}var ao={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},jo=5120,ps=5122,Io=5124,Ja=5121,Pn=5123,$s=5125,na=5126,oo=5126,Xa={int8:jo,int16:ps,int32:Io,uint8:Ja,uint16:Pn,uint32:$s,float:na,float32:oo},qo=35048,On=35040,bo={dynamic:qo,stream:On,static:35044},gs=mo.flatten,ts=mo.shape,es=35044,Wn=35040,so=5121,ia=5126,Bi=[];Bi[5120]=1,Bi[5122]=2,Bi[5124]=4,Bi[5121]=1,Bi[5123]=2,Bi[5125]=4,Bi[5126]=4;function rs(Ct){return ao[Object.prototype.toString.call(Ct)]|0}function Po(Ct,ce){for(var ze=0;ze<ce.length;++ze)Ct[ze]=ce[ze]}function ga(Ct,ce,ze,wr,Rr,br,Ar){for(var jr=0,Hr=0;Hr<ze;++Hr)for(var Kr=0;Kr<wr;++Kr)Ct[jr++]=ce[Rr*Hr+br*Kr+Ar]}function ys(Ct,ce,ze,wr){var Rr=0,br={};function Ar(tt){this.id=Rr++,this.buffer=Ct.createBuffer(),this.type=tt,this.usage=es,this.byteLength=0,this.dimension=1,this.dtype=so,this.persistentData=null,ze.profile&&(this.stats={size:0})}Ar.prototype.bind=function(){Ct.bindBuffer(this.type,this.buffer)},Ar.prototype.destroy=function(){d(this)};var jr=[];function Hr(tt,lt){var pt=jr.pop();return pt||(pt=new Ar(tt)),pt.bind(),Qr(pt,lt,Wn,0,1,!1),pt}function Kr(tt){jr.push(tt)}function Vr(tt,lt,pt){tt.byteLength=lt.byteLength,Ct.bufferData(tt.type,lt,pt)}function Qr(tt,lt,pt,St,Ot,Ut){var qt;if(tt.usage=pt,Array.isArray(lt)){if(tt.dtype=St||ia,lt.length>0){var fe;if(Array.isArray(lt[0])){qt=ts(lt);for(var oe=1,Ne=1;Ne<qt.length;++Ne)oe*=qt[Ne];tt.dimension=oe,fe=gs(lt,qt,tt.dtype),Vr(tt,fe,pt),Ut?tt.persistentData=fe:Dt.freeType(fe)}else if(typeof lt[0]=="number"){tt.dimension=Ot;var rr=Dt.allocType(tt.dtype,lt.length);Po(rr,lt),Vr(tt,rr,pt),Ut?tt.persistentData=rr:Dt.freeType(rr)}else w(lt[0])?(tt.dimension=lt[0].length,tt.dtype=St||rs(lt[0])||ia,fe=gs(lt,[lt.length,lt[0].length],tt.dtype),Vr(tt,fe,pt),Ut?tt.persistentData=fe:Dt.freeType(fe)):ft.raise("invalid buffer data")}}else if(w(lt))tt.dtype=St||rs(lt),tt.dimension=Ot,Vr(tt,lt,pt),Ut&&(tt.persistentData=new Uint8Array(new Uint8Array(lt.buffer)));else if(Ea(lt)){qt=lt.shape;var Pr=lt.stride,ur=lt.offset,hr=0,fr=0,Xr=0,fn=0;qt.length===1?(hr=qt[0],fr=1,Xr=Pr[0],fn=0):qt.length===2?(hr=qt[0],fr=qt[1],Xr=Pr[0],fn=Pr[1]):ft.raise("invalid shape"),tt.dtype=St||rs(lt.data)||ia,tt.dimension=fr;var tn=Dt.allocType(tt.dtype,hr*fr);ga(tn,lt.data,hr,fr,Xr,fn,ur),Vr(tt,tn,pt),Ut?tt.persistentData=tn:Dt.freeType(tn)}else lt instanceof ArrayBuffer?(tt.dtype=so,tt.dimension=Ot,Vr(tt,lt,pt),Ut&&(tt.persistentData=new Uint8Array(new Uint8Array(lt)))):ft.raise("invalid buffer data")}function d(tt){ce.bufferCount--,wr(tt);var lt=tt.buffer;ft(lt,"buffer must not be deleted already"),Ct.deleteBuffer(lt),tt.buffer=null,delete br[tt.id]}function L(tt,lt,pt,St){ce.bufferCount++;var Ot=new Ar(lt);br[Ot.id]=Ot;function Ut(oe){var Ne=es,rr=null,Pr=0,ur=0,hr=1;return Array.isArray(oe)||w(oe)||Ea(oe)||oe instanceof ArrayBuffer?rr=oe:typeof oe=="number"?Pr=oe|0:oe&&(ft.type(oe,"object","buffer arguments must be an object, a number or an array"),"data"in oe&&(ft(rr===null||Array.isArray(rr)||w(rr)||Ea(rr),"invalid data for buffer"),rr=oe.data),"usage"in oe&&(ft.parameter(oe.usage,bo,"invalid buffer usage"),Ne=bo[oe.usage]),"type"in oe&&(ft.parameter(oe.type,Xa,"invalid buffer type"),ur=Xa[oe.type]),"dimension"in oe&&(ft.type(oe.dimension,"number","invalid dimension"),hr=oe.dimension|0),"length"in oe&&(ft.nni(Pr,"buffer length must be a nonnegative integer"),Pr=oe.length|0)),Ot.bind(),rr?Qr(Ot,rr,Ne,ur,hr,St):(Pr&&Ct.bufferData(Ot.type,Pr,Ne),Ot.dtype=ur||so,Ot.usage=Ne,Ot.dimension=hr,Ot.byteLength=Pr),ze.profile&&(Ot.stats.size=Ot.byteLength*Bi[Ot.dtype]),Ut}function qt(oe,Ne){ft(Ne+oe.byteLength<=Ot.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+oe.byteLength+" starting from offset "+Ne+" to a buffer of size "+Ot.byteLength),Ct.bufferSubData(Ot.type,Ne,oe)}function fe(oe,Ne){var rr=(Ne||0)|0,Pr;if(Ot.bind(),w(oe)||oe instanceof ArrayBuffer)qt(oe,rr);else if(Array.isArray(oe)){if(oe.length>0)if(typeof oe[0]=="number"){var ur=Dt.allocType(Ot.dtype,oe.length);Po(ur,oe),qt(ur,rr),Dt.freeType(ur)}else if(Array.isArray(oe[0])||w(oe[0])){Pr=ts(oe);var hr=gs(oe,Pr,Ot.dtype);qt(hr,rr),Dt.freeType(hr)}else ft.raise("invalid buffer data")}else if(Ea(oe)){Pr=oe.shape;var fr=oe.stride,Xr=0,fn=0,tn=0,Tn=0;Pr.length===1?(Xr=Pr[0],fn=1,tn=fr[0],Tn=0):Pr.length===2?(Xr=Pr[0],fn=Pr[1],tn=fr[0],Tn=fr[1]):ft.raise("invalid shape");var wn=Array.isArray(oe.data)?Ot.dtype:rs(oe.data),Rn=Dt.allocType(wn,Xr*fn);ga(Rn,oe.data,Xr,fn,tn,Tn,oe.offset),qt(Rn,rr),Dt.freeType(Rn)}else ft.raise("invalid data for buffer subdata");return Ut}return pt||Ut(tt),Ut._reglType="buffer",Ut._buffer=Ot,Ut.subdata=fe,ze.profile&&(Ut.stats=Ot.stats),Ut.destroy=function(){d(Ot)},Ut}function j(){ta(br).forEach(function(tt){tt.buffer=Ct.createBuffer(),Ct.bindBuffer(tt.type,tt.buffer),Ct.bufferData(tt.type,tt.persistentData||tt.byteLength,tt.usage)})}return ze.profile&&(ce.getTotalBufferSize=function(){var tt=0;return Object.keys(br).forEach(function(lt){tt+=br[lt].stats.size}),tt}),{create:L,createStream:Hr,destroyStream:Kr,clear:function(){ta(br).forEach(d),jr.forEach(d)},getBuffer:function(tt){return tt&&tt._buffer instanceof Ar?tt._buffer:null},restore:j,_initBuffer:Qr}}var Qs=0,ms=0,Eo=1,Ai=1,Ya=4,bs=4,Ha={points:Qs,point:ms,lines:Eo,line:Ai,triangles:Ya,triangle:bs,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ns=0,La=1,ya=4,Za=5120,xo=5121,Ka=5122,Ga=5123,Js=5124,ka=5125,$a=34963,wo=35040,qa=35044;function Xo(Ct,ce,ze,wr){var Rr={},br=0,Ar={uint8:xo,uint16:Ga};ce.oes_element_index_uint&&(Ar.uint32=ka);function jr(j){this.id=br++,Rr[this.id]=this,this.buffer=j,this.primType=ya,this.vertCount=0,this.type=0}jr.prototype.bind=function(){this.buffer.bind()};var Hr=[];function Kr(j){var tt=Hr.pop();return tt||(tt=new jr(ze.create(null,$a,!0,!1)._buffer)),Qr(tt,j,wo,-1,-1,0,0),tt}function Vr(j){Hr.push(j)}function Qr(j,tt,lt,pt,St,Ot,Ut){j.buffer.bind();var qt;if(tt){var fe=Ut;!Ut&&(!w(tt)||Ea(tt)&&!w(tt.data))&&(fe=ce.oes_element_index_uint?ka:Ga),ze._initBuffer(j.buffer,tt,lt,fe,3)}else Ct.bufferData($a,Ot,lt),j.buffer.dtype=qt||xo,j.buffer.usage=lt,j.buffer.dimension=3,j.buffer.byteLength=Ot;if(qt=Ut,!Ut){switch(j.buffer.dtype){case xo:case Za:qt=xo;break;case Ga:case Ka:qt=Ga;break;case ka:case Js:qt=ka;break;default:ft.raise("unsupported type for element array")}j.buffer.dtype=qt}j.type=qt,ft(qt!==ka||!!ce.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var oe=St;oe<0&&(oe=j.buffer.byteLength,qt===Ga?oe>>=1:qt===ka&&(oe>>=2)),j.vertCount=oe;var Ne=pt;if(pt<0){Ne=ya;var rr=j.buffer.dimension;rr===1&&(Ne=Ns),rr===2&&(Ne=La),rr===3&&(Ne=ya)}j.primType=Ne}function d(j){wr.elementsCount--,ft(j.buffer!==null,"must not double destroy elements"),delete Rr[j.id],j.buffer.destroy(),j.buffer=null}function L(j,tt){var lt=ze.create(null,$a,!0),pt=new jr(lt._buffer);wr.elementsCount++;function St(Ot){if(!Ot)lt(),pt.primType=ya,pt.vertCount=0,pt.type=xo;else if(typeof Ot=="number")lt(Ot),pt.primType=ya,pt.vertCount=Ot|0,pt.type=xo;else{var Ut=null,qt=qa,fe=-1,oe=-1,Ne=0,rr=0;Array.isArray(Ot)||w(Ot)||Ea(Ot)?Ut=Ot:(ft.type(Ot,"object","invalid arguments for elements"),"data"in Ot&&(Ut=Ot.data,ft(Array.isArray(Ut)||w(Ut)||Ea(Ut),"invalid data for element buffer")),"usage"in Ot&&(ft.parameter(Ot.usage,bo,"invalid element buffer usage"),qt=bo[Ot.usage]),"primitive"in Ot&&(ft.parameter(Ot.primitive,Ha,"invalid element buffer primitive"),fe=Ha[Ot.primitive]),"count"in Ot&&(ft(typeof Ot.count=="number"&&Ot.count>=0,"invalid vertex count for elements"),oe=Ot.count|0),"type"in Ot&&(ft.parameter(Ot.type,Ar,"invalid buffer type"),rr=Ar[Ot.type]),"length"in Ot?Ne=Ot.length|0:(Ne=oe,rr===Ga||rr===Ka?Ne*=2:(rr===ka||rr===Js)&&(Ne*=4))),Qr(pt,Ut,qt,fe,oe,Ne,rr)}return St}return St(j),St._reglType="elements",St._elements=pt,St.subdata=function(Ot,Ut){return lt.subdata(Ot,Ut),St},St.destroy=function(){d(pt)},St}return{create:L,createStream:Kr,destroyStream:Vr,getElements:function(j){return typeof j=="function"&&j._elements instanceof jr?j._elements:null},clear:function(){ta(Rr).forEach(d)}}}var fi=new Float32Array(1),ma=new Uint32Array(fi.buffer),to=5123;function ba(Ct){for(var ce=Dt.allocType(to,Ct.length),ze=0;ze<Ct.length;++ze)if(isNaN(Ct[ze]))ce[ze]=65535;else if(Ct[ze]===1/0)ce[ze]=31744;else if(Ct[ze]===-1/0)ce[ze]=64512;else{fi[0]=Ct[ze];var wr=ma[0],Rr=wr>>>31<<15,br=(wr<<1>>>24)-127,Ar=wr>>13&(1<<10)-1;if(br<-24)ce[ze]=Rr;else if(br<-14){var jr=-14-br;ce[ze]=Rr+(Ar+(1<<10)>>jr)}else br>15?ce[ze]=Rr+31744:ce[ze]=Rr+(br+15<<10)+Ar}return ce}function Mi(Ct){return Array.isArray(Ct)||w(Ct)}var ca=function(Ct){return!(Ct&Ct-1)&&!!Ct},Es=34467,aa=3553,uo=34067,eo=34069,fo=6408,qs=6406,Yo=6407,Oo=6409,ns=6410,Wu=32854,yu=32855,xs=36194,Xt=32819,ue=32820,nr=33635,cr=34042,Gr=6402,cn=34041,xn=35904,Zn=35906,Wi=36193,Ra=33776,Fa=33777,Ho=33778,xf=33779,wa=35986,ro=35987,mu=34798,ic=35840,Yc=35841,wf=35842,_f=35843,Sf=36196,tu=5121,bu=5123,eu=5125,co=5126,Hc=10242,Mf=10243,zl=10497,Ls=33071,Wl=33648,Vl=10240,Eu=10241,Xn=9728,Cf=9729,Af=9984,Vu=9985,ac=9986,Tf=9987,oc=33170,If=4352,sc=4353,Zc=4354,Pf=34046,Kc=3317,jl=37440,ks=37441,$c=37443,ju=37444,Xu=33984,Qc=[Af,ac,Vu,Tf],Yu=[0,Oo,ns,Yo,fo],Do={};Do[Oo]=Do[qs]=Do[Gr]=1,Do[cn]=Do[ns]=2,Do[Yo]=Do[xn]=3,Do[fo]=Do[Zn]=4;function xu(Ct){return"[object "+Ct+"]"}var Jc=xu("HTMLCanvasElement"),Xl=xu("OffscreenCanvas"),qc=xu("CanvasRenderingContext2D"),Yl=xu("ImageBitmap"),Of=xu("HTMLImageElement"),Hl=xu("HTMLVideoElement"),tl=Object.keys(ao).concat([Jc,Xl,qc,Yl,Of,Hl]),ru=[];ru[tu]=1,ru[co]=4,ru[Wi]=2,ru[bu]=2,ru[eu]=4;var Aa=[];Aa[Wu]=2,Aa[yu]=2,Aa[xs]=2,Aa[cn]=4,Aa[Ra]=.5,Aa[Fa]=.5,Aa[Ho]=1,Aa[xf]=1,Aa[wa]=.5,Aa[ro]=1,Aa[mu]=1,Aa[ic]=.5,Aa[Yc]=.25,Aa[wf]=.5,Aa[_f]=.25,Aa[Sf]=.5;function Df(Ct){return Array.isArray(Ct)&&(Ct.length===0||typeof Ct[0]=="number")}function nu(Ct){if(!Array.isArray(Ct))return!1;var ce=Ct.length;return!(ce===0||!Mi(Ct[0]))}function Zo(Ct){return Object.prototype.toString.call(Ct)}function el(Ct){return Zo(Ct)===Jc}function rl(Ct){return Zo(Ct)===Xl}function Zl(Ct){return Zo(Ct)===qc}function Kl(Ct){return Zo(Ct)===Yl}function $l(Ct){return Zo(Ct)===Of}function nl(Ct){return Zo(Ct)===Hl}function Ko(Ct){if(!Ct)return!1;var ce=Zo(Ct);return tl.indexOf(ce)>=0?!0:Df(Ct)||nu(Ct)||Ea(Ct)}function il(Ct){return ao[Object.prototype.toString.call(Ct)]|0}function al(Ct,ce){var ze=ce.length;switch(Ct.type){case tu:case bu:case eu:case co:var wr=Dt.allocType(Ct.type,ze);wr.set(ce),Ct.data=wr;break;case Wi:Ct.data=ba(ce);break;default:ft.raise("unsupported texture type, must specify a typed array")}}function ol(Ct,ce){return Dt.allocType(Ct.type===Wi?co:Ct.type,ce)}function Ql(Ct,ce){Ct.type===Wi?(Ct.data=ba(ce),Dt.freeType(ce)):Ct.data=ce}function sl(Ct,ce,ze,wr,Rr,br){for(var Ar=Ct.width,jr=Ct.height,Hr=Ct.channels,Kr=Ar*jr*Hr,Vr=ol(Ct,Kr),Qr=0,d=0;d<jr;++d)for(var L=0;L<Ar;++L)for(var j=0;j<Hr;++j)Vr[Qr++]=ce[ze*L+wr*d+Rr*j+br];Ql(Ct,Vr)}function Ta(Ct,ce,ze,wr,Rr,br){var Ar;if(typeof Aa[Ct]!="undefined"?Ar=Aa[Ct]:Ar=Do[Ct]*ru[ce],br&&(Ar*=6),Rr){for(var jr=0,Hr=ze;Hr>=1;)jr+=Ar*Hr*Hr,Hr/=2;return jr}else return Ar*ze*wr}function Nh(Ct,ce,ze,wr,Rr,br,Ar){var jr={"don't care":If,"dont care":If,nice:Zc,fast:sc},Hr={repeat:zl,clamp:Ls,mirror:Wl},Kr={nearest:Xn,linear:Cf},Vr=S({mipmap:Tf,"nearest mipmap nearest":Af,"linear mipmap nearest":Vu,"nearest mipmap linear":ac,"linear mipmap linear":Tf},Kr),Qr={none:0,browser:ju},d={uint8:tu,rgba4:Xt,rgb565:nr,"rgb5 a1":ue},L={alpha:qs,luminance:Oo,"luminance alpha":ns,rgb:Yo,rgba:fo,rgba4:Wu,"rgb5 a1":yu,rgb565:xs},j={};ce.ext_srgb&&(L.srgb=xn,L.srgba=Zn),ce.oes_texture_float&&(d.float32=d.float=co),ce.oes_texture_half_float&&(d.float16=d["half float"]=Wi),ce.webgl_depth_texture&&(S(L,{depth:Gr,"depth stencil":cn}),S(d,{uint16:bu,uint32:eu,"depth stencil":cr})),ce.webgl_compressed_texture_s3tc&&S(j,{"rgb s3tc dxt1":Ra,"rgba s3tc dxt1":Fa,"rgba s3tc dxt3":Ho,"rgba s3tc dxt5":xf}),ce.webgl_compressed_texture_atc&&S(j,{"rgb atc":wa,"rgba atc explicit alpha":ro,"rgba atc interpolated alpha":mu}),ce.webgl_compressed_texture_pvrtc&&S(j,{"rgb pvrtc 4bppv1":ic,"rgb pvrtc 2bppv1":Yc,"rgba pvrtc 4bppv1":wf,"rgba pvrtc 2bppv1":_f}),ce.webgl_compressed_texture_etc1&&(j["rgb etc1"]=Sf);var tt=Array.prototype.slice.call(Ct.getParameter(Es));Object.keys(j).forEach(function(ke){var _r=j[ke];tt.indexOf(_r)>=0&&(L[ke]=_r)});var lt=Object.keys(L);ze.textureFormats=lt;var pt=[];Object.keys(L).forEach(function(ke){var _r=L[ke];pt[_r]=ke});var St=[];Object.keys(d).forEach(function(ke){var _r=d[ke];St[_r]=ke});var Ot=[];Object.keys(Kr).forEach(function(ke){var _r=Kr[ke];Ot[_r]=ke});var Ut=[];Object.keys(Vr).forEach(function(ke){var _r=Vr[ke];Ut[_r]=ke});var qt=[];Object.keys(Hr).forEach(function(ke){var _r=Hr[ke];qt[_r]=ke});var fe=lt.reduce(function(ke,_r){var xr=L[_r];return xr===Oo||xr===qs||xr===Oo||xr===ns||xr===Gr||xr===cn||ce.ext_srgb&&(xr===xn||xr===Zn)?ke[xr]=xr:xr===yu||_r.indexOf("rgba")>=0?ke[xr]=fo:ke[xr]=Yo,ke},{});function oe(){this.internalformat=fo,this.format=fo,this.type=tu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ju,this.width=0,this.height=0,this.channels=0}function Ne(ke,_r){ke.internalformat=_r.internalformat,ke.format=_r.format,ke.type=_r.type,ke.compressed=_r.compressed,ke.premultiplyAlpha=_r.premultiplyAlpha,ke.flipY=_r.flipY,ke.unpackAlignment=_r.unpackAlignment,ke.colorSpace=_r.colorSpace,ke.width=_r.width,ke.height=_r.height,ke.channels=_r.channels}function rr(ke,_r){if(!(typeof _r!="object"||!_r)){if("premultiplyAlpha"in _r&&(ft.type(_r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),ke.premultiplyAlpha=_r.premultiplyAlpha),"flipY"in _r&&(ft.type(_r.flipY,"boolean","invalid texture flip"),ke.flipY=_r.flipY),"alignment"in _r&&(ft.oneOf(_r.alignment,[1,2,4,8],"invalid texture unpack alignment"),ke.unpackAlignment=_r.alignment),"colorSpace"in _r&&(ft.parameter(_r.colorSpace,Qr,"invalid colorSpace"),ke.colorSpace=Qr[_r.colorSpace]),"type"in _r){var xr=_r.type;ft(ce.oes_texture_float||!(xr==="float"||xr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ft(ce.oes_texture_half_float||!(xr==="half float"||xr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ft(ce.webgl_depth_texture||!(xr==="uint16"||xr==="uint32"||xr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ft.parameter(xr,d,"invalid texture type"),ke.type=d[xr]}var En=ke.width,si=ke.height,_e=ke.channels,se=!1;"shape"in _r?(ft(Array.isArray(_r.shape)&&_r.shape.length>=2,"shape must be an array"),En=_r.shape[0],si=_r.shape[1],_r.shape.length===3&&(_e=_r.shape[2],ft(_e>0&&_e<=4,"invalid number of channels"),se=!0),ft(En>=0&&En<=ze.maxTextureSize,"invalid width"),ft(si>=0&&si<=ze.maxTextureSize,"invalid height")):("radius"in _r&&(En=si=_r.radius,ft(En>=0&&En<=ze.maxTextureSize,"invalid radius")),"width"in _r&&(En=_r.width,ft(En>=0&&En<=ze.maxTextureSize,"invalid width")),"height"in _r&&(si=_r.height,ft(si>=0&&si<=ze.maxTextureSize,"invalid height")),"channels"in _r&&(_e=_r.channels,ft(_e>0&&_e<=4,"invalid number of channels"),se=!0)),ke.width=En|0,ke.height=si|0,ke.channels=_e|0;var $e=!1;if("format"in _r){var dr=_r.format;ft(ce.webgl_depth_texture||!(dr==="depth"||dr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ft.parameter(dr,L,"invalid texture format");var gr=ke.internalformat=L[dr];ke.format=fe[gr],dr in d&&("type"in _r||(ke.type=d[dr])),dr in j&&(ke.compressed=!0),$e=!0}!se&&$e?ke.channels=Do[ke.format]:se&&!$e?ke.channels!==Yu[ke.format]&&(ke.format=ke.internalformat=Yu[ke.channels]):$e&&se&&ft(ke.channels===Do[ke.format],"number of channels inconsistent with specified format")}}function Pr(ke){Ct.pixelStorei(jl,ke.flipY),Ct.pixelStorei(ks,ke.premultiplyAlpha),Ct.pixelStorei($c,ke.colorSpace),Ct.pixelStorei(Kc,ke.unpackAlignment)}function ur(){oe.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function hr(ke,_r){var xr=null;if(Ko(_r)?xr=_r:_r&&(ft.type(_r,"object","invalid pixel data type"),rr(ke,_r),"x"in _r&&(ke.xOffset=_r.x|0),"y"in _r&&(ke.yOffset=_r.y|0),Ko(_r.data)&&(xr=_r.data)),ft(!ke.compressed||xr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),_r.copy){ft(!xr,"can not specify copy and data field for the same texture");var En=Rr.viewportWidth,si=Rr.viewportHeight;ke.width=ke.width||En-ke.xOffset,ke.height=ke.height||si-ke.yOffset,ke.needsCopy=!0,ft(ke.xOffset>=0&&ke.xOffset<En&&ke.yOffset>=0&&ke.yOffset<si&&ke.width>0&&ke.width<=En&&ke.height>0&&ke.height<=si,"copy texture read out of bounds")}else if(!xr)ke.width=ke.width||1,ke.height=ke.height||1,ke.channels=ke.channels||4;else if(w(xr))ke.channels=ke.channels||4,ke.data=xr,!("type"in _r)&&ke.type===tu&&(ke.type=il(xr));else if(Df(xr))ke.channels=ke.channels||4,al(ke,xr),ke.alignment=1,ke.needsFree=!0;else if(Ea(xr)){var _e=xr.data;!Array.isArray(_e)&&ke.type===tu&&(ke.type=il(_e));var se=xr.shape,$e=xr.stride,dr,gr,Je,Qe,ir,we;se.length===3?(Je=se[2],we=$e[2]):(ft(se.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Je=1,we=1),dr=se[0],gr=se[1],Qe=$e[0],ir=$e[1],ke.alignment=1,ke.width=dr,ke.height=gr,ke.channels=Je,ke.format=ke.internalformat=Yu[Je],ke.needsFree=!0,sl(ke,_e,Qe,ir,we,xr.offset)}else if(el(xr)||rl(xr)||Zl(xr))el(xr)||rl(xr)?ke.element=xr:ke.element=xr.canvas,ke.width=ke.element.width,ke.height=ke.element.height,ke.channels=4;else if(Kl(xr))ke.element=xr,ke.width=xr.width,ke.height=xr.height,ke.channels=4;else if($l(xr))ke.element=xr,ke.width=xr.naturalWidth,ke.height=xr.naturalHeight,ke.channels=4;else if(nl(xr))ke.element=xr,ke.width=xr.videoWidth,ke.height=xr.videoHeight,ke.channels=4;else if(nu(xr)){var He=ke.width||xr[0].length,be=ke.height||xr.length,lr=ke.channels;Mi(xr[0][0])?lr=lr||xr[0][0].length:lr=lr||1;for(var mr=mo.shape(xr),kr=1,Ur=0;Ur<mr.length;++Ur)kr*=mr[Ur];var Or=ol(ke,kr);mo.flatten(xr,mr,"",Or),Ql(ke,Or),ke.alignment=1,ke.width=He,ke.height=be,ke.channels=lr,ke.format=ke.internalformat=Yu[lr],ke.needsFree=!0}ke.type===co?ft(ze.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):ke.type===Wi&&ft(ze.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function fr(ke,_r,xr){var En=ke.element,si=ke.data,_e=ke.internalformat,se=ke.format,$e=ke.type,dr=ke.width,gr=ke.height;Pr(ke),En?Ct.texImage2D(_r,xr,se,se,$e,En):ke.compressed?Ct.compressedTexImage2D(_r,xr,_e,dr,gr,0,si):ke.needsCopy?(wr(),Ct.copyTexImage2D(_r,xr,se,ke.xOffset,ke.yOffset,dr,gr,0)):Ct.texImage2D(_r,xr,se,dr,gr,0,se,$e,si||null)}function Xr(ke,_r,xr,En,si){var _e=ke.element,se=ke.data,$e=ke.internalformat,dr=ke.format,gr=ke.type,Je=ke.width,Qe=ke.height;Pr(ke),_e?Ct.texSubImage2D(_r,si,xr,En,dr,gr,_e):ke.compressed?Ct.compressedTexSubImage2D(_r,si,xr,En,$e,Je,Qe,se):ke.needsCopy?(wr(),Ct.copyTexSubImage2D(_r,si,xr,En,ke.xOffset,ke.yOffset,Je,Qe)):Ct.texSubImage2D(_r,si,xr,En,Je,Qe,dr,gr,se)}var fn=[];function tn(){return fn.pop()||new ur}function Tn(ke){ke.needsFree&&Dt.freeType(ke.data),ur.call(ke),fn.push(ke)}function wn(){oe.call(this),this.genMipmaps=!1,this.mipmapHint=If,this.mipmask=0,this.images=Array(16)}function Rn(ke,_r,xr){var En=ke.images[0]=tn();ke.mipmask=1,En.width=ke.width=_r,En.height=ke.height=xr,En.channels=ke.channels=4}function Kn(ke,_r){var xr=null;if(Ko(_r))xr=ke.images[0]=tn(),Ne(xr,ke),hr(xr,_r),ke.mipmask=1;else if(rr(ke,_r),Array.isArray(_r.mipmap))for(var En=_r.mipmap,si=0;si<En.length;++si)xr=ke.images[si]=tn(),Ne(xr,ke),xr.width>>=si,xr.height>>=si,hr(xr,En[si]),ke.mipmask|=1<<si;else xr=ke.images[0]=tn(),Ne(xr,ke),hr(xr,_r),ke.mipmask=1;Ne(ke,ke.images[0]),ke.compressed&&(ke.internalformat===Ra||ke.internalformat===Fa||ke.internalformat===Ho||ke.internalformat===xf)&&ft(ke.width%4===0&&ke.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Fn(ke,_r){for(var xr=ke.images,En=0;En<xr.length;++En){if(!xr[En])return;fr(xr[En],_r,En)}}var Vi=[];function Qn(){var ke=Vi.pop()||new wn;oe.call(ke),ke.mipmask=0;for(var _r=0;_r<16;++_r)ke.images[_r]=null;return ke}function oa(ke){for(var _r=ke.images,xr=0;xr<_r.length;++xr)_r[xr]&&Tn(_r[xr]),_r[xr]=null;Vi.push(ke)}function Di(){this.minFilter=Xn,this.magFilter=Xn,this.wrapS=Ls,this.wrapT=Ls,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=If}function ui(ke,_r){if("min"in _r){var xr=_r.min;ft.parameter(xr,Vr),ke.minFilter=Vr[xr],Qc.indexOf(ke.minFilter)>=0&&!("faces"in _r)&&(ke.genMipmaps=!0)}if("mag"in _r){var En=_r.mag;ft.parameter(En,Kr),ke.magFilter=Kr[En]}var si=ke.wrapS,_e=ke.wrapT;if("wrap"in _r){var se=_r.wrap;typeof se=="string"?(ft.parameter(se,Hr),si=_e=Hr[se]):Array.isArray(se)&&(ft.parameter(se[0],Hr),ft.parameter(se[1],Hr),si=Hr[se[0]],_e=Hr[se[1]])}else{if("wrapS"in _r){var $e=_r.wrapS;ft.parameter($e,Hr),si=Hr[$e]}if("wrapT"in _r){var dr=_r.wrapT;ft.parameter(dr,Hr),_e=Hr[dr]}}if(ke.wrapS=si,ke.wrapT=_e,"anisotropic"in _r){var gr=_r.anisotropic;ft(typeof gr=="number"&&gr>=1&&gr<=ze.maxAnisotropic,"aniso samples must be between 1 and "),ke.anisotropic=_r.anisotropic}if("mipmap"in _r){var Je=!1;switch(typeof _r.mipmap){case"string":ft.parameter(_r.mipmap,jr,"invalid mipmap hint"),ke.mipmapHint=jr[_r.mipmap],ke.genMipmaps=!0,Je=!0;break;case"boolean":Je=ke.genMipmaps=_r.mipmap;break;case"object":ft(Array.isArray(_r.mipmap),"invalid mipmap type"),ke.genMipmaps=!1,Je=!0;break;default:ft.raise("invalid mipmap type")}Je&&!("min"in _r)&&(ke.minFilter=Af)}}function Qi(ke,_r){Ct.texParameteri(_r,Eu,ke.minFilter),Ct.texParameteri(_r,Vl,ke.magFilter),Ct.texParameteri(_r,Hc,ke.wrapS),Ct.texParameteri(_r,Mf,ke.wrapT),ce.ext_texture_filter_anisotropic&&Ct.texParameteri(_r,Pf,ke.anisotropic),ke.genMipmaps&&(Ct.hint(oc,ke.mipmapHint),Ct.generateMipmap(_r))}var sa=0,_a={},za=ze.maxTextureUnits,Sa=Array(za).map(function(){return null});function ni(ke){oe.call(this),this.mipmask=0,this.internalformat=fo,this.id=sa++,this.refCount=1,this.target=ke,this.texture=Ct.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Di,Ar.profile&&(this.stats={size:0})}function Wa(ke){Ct.activeTexture(Xu),Ct.bindTexture(ke.target,ke.texture)}function Ii(){var ke=Sa[0];ke?Ct.bindTexture(ke.target,ke.texture):Ct.bindTexture(aa,null)}function Vn(ke){var _r=ke.texture;ft(_r,"must not double destroy texture");var xr=ke.unit,En=ke.target;xr>=0&&(Ct.activeTexture(Xu+xr),Ct.bindTexture(En,null),Sa[xr]=null),Ct.deleteTexture(_r),ke.texture=null,ke.params=null,ke.pixels=null,ke.refCount=0,delete _a[ke.id],br.textureCount--}S(ni.prototype,{bind:function(){var ke=this;ke.bindCount+=1;var _r=ke.unit;if(_r<0){for(var xr=0;xr<za;++xr){var En=Sa[xr];if(En){if(En.bindCount>0)continue;En.unit=-1}Sa[xr]=ke,_r=xr;break}_r>=za&&ft.raise("insufficient number of texture units"),Ar.profile&&br.maxTextureUnits<_r+1&&(br.maxTextureUnits=_r+1),ke.unit=_r,Ct.activeTexture(Xu+_r),Ct.bindTexture(ke.target,ke.texture)}return _r},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Vn(this)}});function ci(ke,_r){var xr=new ni(aa);_a[xr.id]=xr,br.textureCount++;function En(se,$e){var dr=xr.texInfo;Di.call(dr);var gr=Qn();return typeof se=="number"?typeof $e=="number"?Rn(gr,se|0,$e|0):Rn(gr,se|0,se|0):se?(ft.type(se,"object","invalid arguments to regl.texture"),ui(dr,se),Kn(gr,se)):Rn(gr,1,1),dr.genMipmaps&&(gr.mipmask=(gr.width<<1)-1),xr.mipmask=gr.mipmask,Ne(xr,gr),ft.texture2D(dr,gr,ze),xr.internalformat=gr.internalformat,En.width=gr.width,En.height=gr.height,Wa(xr),Fn(gr,aa),Qi(dr,aa),Ii(),oa(gr),Ar.profile&&(xr.stats.size=Ta(xr.internalformat,xr.type,gr.width,gr.height,dr.genMipmaps,!1)),En.format=pt[xr.internalformat],En.type=St[xr.type],En.mag=Ot[dr.magFilter],En.min=Ut[dr.minFilter],En.wrapS=qt[dr.wrapS],En.wrapT=qt[dr.wrapT],En}function si(se,$e,dr,gr){ft(!!se,"must specify image data");var Je=$e|0,Qe=dr|0,ir=gr|0,we=tn();return Ne(we,xr),we.width=0,we.height=0,hr(we,se),we.width=we.width||(xr.width>>ir)-Je,we.height=we.height||(xr.height>>ir)-Qe,ft(xr.type===we.type&&xr.format===we.format&&xr.internalformat===we.internalformat,"incompatible format for texture.subimage"),ft(Je>=0&&Qe>=0&&Je+we.width<=xr.width&&Qe+we.height<=xr.height,"texture.subimage write out of bounds"),ft(xr.mipmask&1<<ir,"missing mipmap data"),ft(we.data||we.element||we.needsCopy,"missing image data"),Wa(xr),Xr(we,aa,Je,Qe,ir),Ii(),Tn(we),En}function _e(se,$e){var dr=se|0,gr=$e|0||dr;if(dr===xr.width&&gr===xr.height)return En;En.width=xr.width=dr,En.height=xr.height=gr,Wa(xr);for(var Je=0;xr.mipmask>>Je;++Je){var Qe=dr>>Je,ir=gr>>Je;if(!Qe||!ir)break;Ct.texImage2D(aa,Je,xr.format,Qe,ir,0,xr.format,xr.type,null)}return Ii(),Ar.profile&&(xr.stats.size=Ta(xr.internalformat,xr.type,dr,gr,!1,!1)),En}return En(ke,_r),En.subimage=si,En.resize=_e,En._reglType="texture2d",En._texture=xr,Ar.profile&&(En.stats=xr.stats),En.destroy=function(){xr.decRef()},En}function yi(ke,_r,xr,En,si,_e){var se=new ni(uo);_a[se.id]=se,br.cubeCount++;var $e=new Array(6);function dr(Qe,ir,we,He,be,lr){var mr,kr=se.texInfo;for(Di.call(kr),mr=0;mr<6;++mr)$e[mr]=Qn();if(typeof Qe=="number"||!Qe){var Ur=Qe|0||1;for(mr=0;mr<6;++mr)Rn($e[mr],Ur,Ur)}else if(typeof Qe=="object")if(ir)Kn($e[0],Qe),Kn($e[1],ir),Kn($e[2],we),Kn($e[3],He),Kn($e[4],be),Kn($e[5],lr);else if(ui(kr,Qe),rr(se,Qe),"faces"in Qe){var Or=Qe.faces;for(ft(Array.isArray(Or)&&Or.length===6,"cube faces must be a length 6 array"),mr=0;mr<6;++mr)ft(typeof Or[mr]=="object"&&!!Or[mr],"invalid input for cube map face"),Ne($e[mr],se),Kn($e[mr],Or[mr])}else for(mr=0;mr<6;++mr)Kn($e[mr],Qe);else ft.raise("invalid arguments to cube map");for(Ne(se,$e[0]),ze.npotTextureCube||ft(ca(se.width)&&ca(se.height),"your browser does not support non power or two texture dimensions"),kr.genMipmaps?se.mipmask=($e[0].width<<1)-1:se.mipmask=$e[0].mipmask,ft.textureCube(se,kr,$e,ze),se.internalformat=$e[0].internalformat,dr.width=$e[0].width,dr.height=$e[0].height,Wa(se),mr=0;mr<6;++mr)Fn($e[mr],eo+mr);for(Qi(kr,uo),Ii(),Ar.profile&&(se.stats.size=Ta(se.internalformat,se.type,dr.width,dr.height,kr.genMipmaps,!0)),dr.format=pt[se.internalformat],dr.type=St[se.type],dr.mag=Ot[kr.magFilter],dr.min=Ut[kr.minFilter],dr.wrapS=qt[kr.wrapS],dr.wrapT=qt[kr.wrapT],mr=0;mr<6;++mr)oa($e[mr]);return dr}function gr(Qe,ir,we,He,be){ft(!!ir,"must specify image data"),ft(typeof Qe=="number"&&Qe===(Qe|0)&&Qe>=0&&Qe<6,"invalid face");var lr=we|0,mr=He|0,kr=be|0,Ur=tn();return Ne(Ur,se),Ur.width=0,Ur.height=0,hr(Ur,ir),Ur.width=Ur.width||(se.width>>kr)-lr,Ur.height=Ur.height||(se.height>>kr)-mr,ft(se.type===Ur.type&&se.format===Ur.format&&se.internalformat===Ur.internalformat,"incompatible format for texture.subimage"),ft(lr>=0&&mr>=0&&lr+Ur.width<=se.width&&mr+Ur.height<=se.height,"texture.subimage write out of bounds"),ft(se.mipmask&1<<kr,"missing mipmap data"),ft(Ur.data||Ur.element||Ur.needsCopy,"missing image data"),Wa(se),Xr(Ur,eo+Qe,lr,mr,kr),Ii(),Tn(Ur),dr}function Je(Qe){var ir=Qe|0;if(ir!==se.width){dr.width=se.width=ir,dr.height=se.height=ir,Wa(se);for(var we=0;we<6;++we)for(var He=0;se.mipmask>>He;++He)Ct.texImage2D(eo+we,He,se.format,ir>>He,ir>>He,0,se.format,se.type,null);return Ii(),Ar.profile&&(se.stats.size=Ta(se.internalformat,se.type,dr.width,dr.height,!1,!0)),dr}}return dr(ke,_r,xr,En,si,_e),dr.subimage=gr,dr.resize=Je,dr._reglType="textureCube",dr._texture=se,Ar.profile&&(dr.stats=se.stats),dr.destroy=function(){se.decRef()},dr}function ha(){for(var ke=0;ke<za;++ke)Ct.activeTexture(Xu+ke),Ct.bindTexture(aa,null),Sa[ke]=null;ta(_a).forEach(Vn),br.cubeCount=0,br.textureCount=0}Ar.profile&&(br.getTotalTextureSize=function(){var ke=0;return Object.keys(_a).forEach(function(_r){ke+=_a[_r].stats.size}),ke});function vu(){for(var ke=0;ke<za;++ke){var _r=Sa[ke];_r&&(_r.bindCount=0,_r.unit=-1,Sa[ke]=null)}ta(_a).forEach(function(xr){xr.texture=Ct.createTexture(),Ct.bindTexture(xr.target,xr.texture);for(var En=0;En<32;++En)if(xr.mipmask&1<<En)if(xr.target===aa)Ct.texImage2D(aa,En,xr.internalformat,xr.width>>En,xr.height>>En,0,xr.internalformat,xr.type,null);else for(var si=0;si<6;++si)Ct.texImage2D(eo+si,En,xr.internalformat,xr.width>>En,xr.height>>En,0,xr.internalformat,xr.type,null);Qi(xr.texInfo,xr.target)})}function Qf(){for(var ke=0;ke<za;++ke){var _r=Sa[ke];_r&&(_r.bindCount=0,_r.unit=-1,Sa[ke]=null),Ct.activeTexture(Xu+ke),Ct.bindTexture(aa,null),Ct.bindTexture(uo,null)}}return{create2D:ci,createCube:yi,clear:ha,getTexture:function(ke){return null},restore:vu,refresh:Qf}}var bn=36161,Nf=32854,Ei=32855,ul=36194,Jl=33189,Hu=36168,ql=34041,uc=35907,Lh=34836,th=34842,kh=34843,ws=[];ws[Nf]=2,ws[Ei]=2,ws[ul]=2,ws[Jl]=2,ws[Hu]=1,ws[ql]=4,ws[uc]=4,ws[Lh]=16,ws[th]=8,ws[kh]=6;function Rh(Ct,ce,ze){return ws[Ct]*ce*ze}var fc=function(Ct,ce,ze,wr,Rr){var br={rgba4:Nf,rgb565:ul,"rgb5 a1":Ei,depth:Jl,stencil:Hu,"depth stencil":ql};ce.ext_srgb&&(br.srgba=uc),ce.ext_color_buffer_half_float&&(br.rgba16f=th,br.rgb16f=kh),ce.webgl_color_buffer_float&&(br.rgba32f=Lh);var Ar=[];Object.keys(br).forEach(function(L){var j=br[L];Ar[j]=L});var jr=0,Hr={};function Kr(L){this.id=jr++,this.refCount=1,this.renderbuffer=L,this.format=Nf,this.width=0,this.height=0,Rr.profile&&(this.stats={size:0})}Kr.prototype.decRef=function(){--this.refCount<=0&&Vr(this)};function Vr(L){var j=L.renderbuffer;ft(j,"must not double destroy renderbuffer"),Ct.bindRenderbuffer(bn,null),Ct.deleteRenderbuffer(j),L.renderbuffer=null,L.refCount=0,delete Hr[L.id],wr.renderbufferCount--}function Qr(L,j){var tt=new Kr(Ct.createRenderbuffer());Hr[tt.id]=tt,wr.renderbufferCount++;function lt(St,Ot){var Ut=0,qt=0,fe=Nf;if(typeof St=="object"&&St){var oe=St;if("shape"in oe){var Ne=oe.shape;ft(Array.isArray(Ne)&&Ne.length>=2,"invalid renderbuffer shape"),Ut=Ne[0]|0,qt=Ne[1]|0}else"radius"in oe&&(Ut=qt=oe.radius|0),"width"in oe&&(Ut=oe.width|0),"height"in oe&&(qt=oe.height|0);"format"in oe&&(ft.parameter(oe.format,br,"invalid renderbuffer format"),fe=br[oe.format])}else typeof St=="number"?(Ut=St|0,typeof Ot=="number"?qt=Ot|0:qt=Ut):St?ft.raise("invalid arguments to renderbuffer constructor"):Ut=qt=1;if(ft(Ut>0&&qt>0&&Ut<=ze.maxRenderbufferSize&&qt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),!(Ut===tt.width&&qt===tt.height&&fe===tt.format))return lt.width=tt.width=Ut,lt.height=tt.height=qt,tt.format=fe,Ct.bindRenderbuffer(bn,tt.renderbuffer),Ct.renderbufferStorage(bn,fe,Ut,qt),ft(Ct.getError()===0,"invalid render buffer format"),Rr.profile&&(tt.stats.size=Rh(tt.format,tt.width,tt.height)),lt.format=Ar[tt.format],lt}function pt(St,Ot){var Ut=St|0,qt=Ot|0||Ut;return Ut===tt.width&&qt===tt.height||(ft(Ut>0&&qt>0&&Ut<=ze.maxRenderbufferSize&&qt<=ze.maxRenderbufferSize,"invalid renderbuffer size"),lt.width=tt.width=Ut,lt.height=tt.height=qt,Ct.bindRenderbuffer(bn,tt.renderbuffer),Ct.renderbufferStorage(bn,tt.format,Ut,qt),ft(Ct.getError()===0,"invalid render buffer format"),Rr.profile&&(tt.stats.size=Rh(tt.format,tt.width,tt.height))),lt}return lt(L,j),lt.resize=pt,lt._reglType="renderbuffer",lt._renderbuffer=tt,Rr.profile&&(lt.stats=tt.stats),lt.destroy=function(){tt.decRef()},lt}Rr.profile&&(wr.getTotalRenderbufferSize=function(){var L=0;return Object.keys(Hr).forEach(function(j){L+=Hr[j].stats.size}),L});function d(){ta(Hr).forEach(function(L){L.renderbuffer=Ct.createRenderbuffer(),Ct.bindRenderbuffer(bn,L.renderbuffer),Ct.renderbufferStorage(bn,L.format,L.width,L.height)}),Ct.bindRenderbuffer(bn,null)}return{create:Qr,clear:function(){ta(Hr).forEach(Vr)},restore:d}},ea=36160,cc=36161,_s=3553,Lf=34069,eh=36064,Bh=36096,iu=36128,fl=33306,is=36053,Zu=36054,lc=36055,hc=36057,Ss=36061,as=36193,cl=5121,_o=5126,dc=6407,au=6408,ll=6402,rh=[dc,au],vc=[];vc[au]=4,vc[dc]=3;var kf=[];kf[cl]=1,kf[_o]=4,kf[as]=2;var Gi=32854,Rs=32855,os=36194,No=33189,Bs=36168,wu=34041,Gs=35907,Rf=34836,ou=34842,Ku=34843,_u=[Gi,Rs,os,Gs,ou,Ku,Rf],ss={};ss[is]="complete",ss[Zu]="incomplete attachment",ss[hc]="incomplete dimensions",ss[lc]="incomplete, missing attachment",ss[Ss]="unsupported";function hl(Ct,ce,ze,wr,Rr,br){var Ar={cur:null,next:null,dirty:!1,setFBO:null},jr=["rgba"],Hr=["rgba4","rgb565","rgb5 a1"];ce.ext_srgb&&Hr.push("srgba"),ce.ext_color_buffer_half_float&&Hr.push("rgba16f","rgb16f"),ce.webgl_color_buffer_float&&Hr.push("rgba32f");var Kr=["uint8"];ce.oes_texture_half_float&&Kr.push("half float","float16"),ce.oes_texture_float&&Kr.push("float","float32");function Vr(ur,hr,fr){this.target=ur,this.texture=hr,this.renderbuffer=fr;var Xr=0,fn=0;hr?(Xr=hr.width,fn=hr.height):fr&&(Xr=fr.width,fn=fr.height),this.width=Xr,this.height=fn}function Qr(ur){ur&&(ur.texture&&ur.texture._texture.decRef(),ur.renderbuffer&&ur.renderbuffer._renderbuffer.decRef())}function d(ur,hr,fr){if(ur)if(ur.texture){var Xr=ur.texture._texture,fn=Math.max(1,Xr.width),tn=Math.max(1,Xr.height);ft(fn===hr&&tn===fr,"inconsistent width/height for supplied texture"),Xr.refCount+=1}else{var Tn=ur.renderbuffer._renderbuffer;ft(Tn.width===hr&&Tn.height===fr,"inconsistent width/height for renderbuffer"),Tn.refCount+=1}}function L(ur,hr){hr&&(hr.texture?Ct.framebufferTexture2D(ea,ur,hr.target,hr.texture._texture.texture,0):Ct.framebufferRenderbuffer(ea,ur,cc,hr.renderbuffer._renderbuffer.renderbuffer))}function j(ur){var hr=_s,fr=null,Xr=null,fn=ur;typeof ur=="object"&&(fn=ur.data,"target"in ur&&(hr=ur.target|0)),ft.type(fn,"function","invalid attachment data");var tn=fn._reglType;return tn==="texture2d"?(fr=fn,ft(hr===_s)):tn==="textureCube"?(fr=fn,ft(hr>=Lf&&hr<Lf+6,"invalid cube map target")):tn==="renderbuffer"?(Xr=fn,hr=cc):ft.raise("invalid regl object for attachment"),new Vr(hr,fr,Xr)}function tt(ur,hr,fr,Xr,fn){if(fr){var tn=wr.create2D({width:ur,height:hr,format:Xr,type:fn});return tn._texture.refCount=0,new Vr(_s,tn,null)}else{var Tn=Rr.create({width:ur,height:hr,format:Xr});return Tn._renderbuffer.refCount=0,new Vr(cc,null,Tn)}}function lt(ur){return ur&&(ur.texture||ur.renderbuffer)}function pt(ur,hr,fr){ur&&(ur.texture?ur.texture.resize(hr,fr):ur.renderbuffer&&ur.renderbuffer.resize(hr,fr),ur.width=hr,ur.height=fr)}var St=0,Ot={};function Ut(){this.id=St++,Ot[this.id]=this,this.framebuffer=Ct.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function qt(ur){ur.colorAttachments.forEach(Qr),Qr(ur.depthAttachment),Qr(ur.stencilAttachment),Qr(ur.depthStencilAttachment)}function fe(ur){var hr=ur.framebuffer;ft(hr,"must not double destroy framebuffer"),Ct.deleteFramebuffer(hr),ur.framebuffer=null,br.framebufferCount--,delete Ot[ur.id]}function oe(ur){var hr;Ct.bindFramebuffer(ea,ur.framebuffer);var fr=ur.colorAttachments;for(hr=0;hr<fr.length;++hr)L(eh+hr,fr[hr]);for(hr=fr.length;hr<ze.maxColorAttachments;++hr)Ct.framebufferTexture2D(ea,eh+hr,_s,null,0);Ct.framebufferTexture2D(ea,fl,_s,null,0),Ct.framebufferTexture2D(ea,Bh,_s,null,0),Ct.framebufferTexture2D(ea,iu,_s,null,0),L(Bh,ur.depthAttachment),L(iu,ur.stencilAttachment),L(fl,ur.depthStencilAttachment);var Xr=Ct.checkFramebufferStatus(ea);!Ct.isContextLost()&&Xr!==is&&ft.raise("framebuffer configuration not supported, status = "+ss[Xr]),Ct.bindFramebuffer(ea,Ar.next?Ar.next.framebuffer:null),Ar.cur=Ar.next,Ct.getError()}function Ne(ur,hr){var fr=new Ut;br.framebufferCount++;function Xr(tn,Tn){var wn;ft(Ar.next!==fr,"can not update framebuffer which is currently in use");var Rn=0,Kn=0,Fn=!0,Vi=!0,Qn=null,oa=!0,Di="rgba",ui="uint8",Qi=1,sa=null,_a=null,za=null,Sa=!1;if(typeof tn=="number")Rn=tn|0,Kn=Tn|0||Rn;else if(!tn)Rn=Kn=1;else{ft.type(tn,"object","invalid arguments for framebuffer");var ni=tn;if("shape"in ni){var Wa=ni.shape;ft(Array.isArray(Wa)&&Wa.length>=2,"invalid shape for framebuffer"),Rn=Wa[0],Kn=Wa[1]}else"radius"in ni&&(Rn=Kn=ni.radius),"width"in ni&&(Rn=ni.width),"height"in ni&&(Kn=ni.height);("color"in ni||"colors"in ni)&&(Qn=ni.color||ni.colors,Array.isArray(Qn)&&ft(Qn.length===1||ce.webgl_draw_buffers,"multiple render targets not supported")),Qn||("colorCount"in ni&&(Qi=ni.colorCount|0,ft(Qi>0,"invalid color buffer count")),"colorTexture"in ni&&(oa=!!ni.colorTexture,Di="rgba4"),"colorType"in ni&&(ui=ni.colorType,oa?(ft(ce.oes_texture_float||!(ui==="float"||ui==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ft(ce.oes_texture_half_float||!(ui==="half float"||ui==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ui==="half float"||ui==="float16"?(ft(ce.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Di="rgba16f"):(ui==="float"||ui==="float32")&&(ft(ce.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Di="rgba32f"),ft.oneOf(ui,Kr,"invalid color type")),"colorFormat"in ni&&(Di=ni.colorFormat,jr.indexOf(Di)>=0?oa=!0:Hr.indexOf(Di)>=0?oa=!1:oa?ft.oneOf(ni.colorFormat,jr,"invalid color format for texture"):ft.oneOf(ni.colorFormat,Hr,"invalid color format for renderbuffer"))),("depthTexture"in ni||"depthStencilTexture"in ni)&&(Sa=!!(ni.depthTexture||ni.depthStencilTexture),ft(!Sa||ce.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in ni&&(typeof ni.depth=="boolean"?Fn=ni.depth:(sa=ni.depth,Vi=!1)),"stencil"in ni&&(typeof ni.stencil=="boolean"?Vi=ni.stencil:(_a=ni.stencil,Fn=!1)),"depthStencil"in ni&&(typeof ni.depthStencil=="boolean"?Fn=Vi=ni.depthStencil:(za=ni.depthStencil,Fn=!1,Vi=!1))}var Ii=null,Vn=null,ci=null,yi=null;if(Array.isArray(Qn))Ii=Qn.map(j);else if(Qn)Ii=[j(Qn)];else for(Ii=new Array(Qi),wn=0;wn<Qi;++wn)Ii[wn]=tt(Rn,Kn,oa,Di,ui);ft(ce.webgl_draw_buffers||Ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ft(Ii.length<=ze.maxColorAttachments,"too many color attachments, not supported"),Rn=Rn||Ii[0].width,Kn=Kn||Ii[0].height,sa?Vn=j(sa):Fn&&!Vi&&(Vn=tt(Rn,Kn,Sa,"depth","uint32")),_a?ci=j(_a):Vi&&!Fn&&(ci=tt(Rn,Kn,!1,"stencil","uint8")),za?yi=j(za):!sa&&!_a&&Vi&&Fn&&(yi=tt(Rn,Kn,Sa,"depth stencil","depth stencil")),ft(!!sa+!!_a+!!za<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ha=null;for(wn=0;wn<Ii.length;++wn)if(d(Ii[wn],Rn,Kn),ft(!Ii[wn]||Ii[wn].texture&&rh.indexOf(Ii[wn].texture._texture.format)>=0||Ii[wn].renderbuffer&&_u.indexOf(Ii[wn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+wn+" is invalid"),Ii[wn]&&Ii[wn].texture){var vu=vc[Ii[wn].texture._texture.format]*kf[Ii[wn].texture._texture.type];ha===null?ha=vu:ft(ha===vu,"all color attachments much have the same number of bits per pixel.")}return d(Vn,Rn,Kn),ft(!Vn||Vn.texture&&Vn.texture._texture.format===ll||Vn.renderbuffer&&Vn.renderbuffer._renderbuffer.format===No,"invalid depth attachment for framebuffer object"),d(ci,Rn,Kn),ft(!ci||ci.renderbuffer&&ci.renderbuffer._renderbuffer.format===Bs,"invalid stencil attachment for framebuffer object"),d(yi,Rn,Kn),ft(!yi||yi.texture&&yi.texture._texture.format===wu||yi.renderbuffer&&yi.renderbuffer._renderbuffer.format===wu,"invalid depth-stencil attachment for framebuffer object"),qt(fr),fr.width=Rn,fr.height=Kn,fr.colorAttachments=Ii,fr.depthAttachment=Vn,fr.stencilAttachment=ci,fr.depthStencilAttachment=yi,Xr.color=Ii.map(lt),Xr.depth=lt(Vn),Xr.stencil=lt(ci),Xr.depthStencil=lt(yi),Xr.width=fr.width,Xr.height=fr.height,oe(fr),Xr}function fn(tn,Tn){ft(Ar.next!==fr,"can not resize a framebuffer which is currently in use");var wn=Math.max(tn|0,1),Rn=Math.max(Tn|0||wn,1);if(wn===fr.width&&Rn===fr.height)return Xr;for(var Kn=fr.colorAttachments,Fn=0;Fn<Kn.length;++Fn)pt(Kn[Fn],wn,Rn);return pt(fr.depthAttachment,wn,Rn),pt(fr.stencilAttachment,wn,Rn),pt(fr.depthStencilAttachment,wn,Rn),fr.width=Xr.width=wn,fr.height=Xr.height=Rn,oe(fr),Xr}return Xr(ur,hr),S(Xr,{resize:fn,_reglType:"framebuffer",_framebuffer:fr,destroy:function(){fe(fr),qt(fr)},use:function(tn){Ar.setFBO({framebuffer:Xr},tn)}})}function rr(ur){var hr=Array(6);function fr(fn){var tn;ft(hr.indexOf(Ar.next)<0,"can not update framebuffer which is currently in use");var Tn={color:null},wn=0,Rn=null,Kn="rgba",Fn="uint8",Vi=1;if(typeof fn=="number")wn=fn|0;else if(!fn)wn=1;else{ft.type(fn,"object","invalid arguments for framebuffer");var Qn=fn;if("shape"in Qn){var oa=Qn.shape;ft(Array.isArray(oa)&&oa.length>=2,"invalid shape for framebuffer"),ft(oa[0]===oa[1],"cube framebuffer must be square"),wn=oa[0]}else"radius"in Qn&&(wn=Qn.radius|0),"width"in Qn?(wn=Qn.width|0,"height"in Qn&&ft(Qn.height===wn,"must be square")):"height"in Qn&&(wn=Qn.height|0);("color"in Qn||"colors"in Qn)&&(Rn=Qn.color||Qn.colors,Array.isArray(Rn)&&ft(Rn.length===1||ce.webgl_draw_buffers,"multiple render targets not supported")),Rn||("colorCount"in Qn&&(Vi=Qn.colorCount|0,ft(Vi>0,"invalid color buffer count")),"colorType"in Qn&&(ft.oneOf(Qn.colorType,Kr,"invalid color type"),Fn=Qn.colorType),"colorFormat"in Qn&&(Kn=Qn.colorFormat,ft.oneOf(Qn.colorFormat,jr,"invalid color format for texture"))),"depth"in Qn&&(Tn.depth=Qn.depth),"stencil"in Qn&&(Tn.stencil=Qn.stencil),"depthStencil"in Qn&&(Tn.depthStencil=Qn.depthStencil)}var Di;if(Rn)if(Array.isArray(Rn))for(Di=[],tn=0;tn<Rn.length;++tn)Di[tn]=Rn[tn];else Di=[Rn];else{Di=Array(Vi);var ui={radius:wn,format:Kn,type:Fn};for(tn=0;tn<Vi;++tn)Di[tn]=wr.createCube(ui)}for(Tn.color=Array(Di.length),tn=0;tn<Di.length;++tn){var Qi=Di[tn];ft(typeof Qi=="function"&&Qi._reglType==="textureCube","invalid cube map"),wn=wn||Qi.width,ft(Qi.width===wn&&Qi.height===wn,"invalid cube map shape"),Tn.color[tn]={target:Lf,data:Di[tn]}}for(tn=0;tn<6;++tn){for(var sa=0;sa<Di.length;++sa)Tn.color[sa].target=Lf+tn;tn>0&&(Tn.depth=hr[0].depth,Tn.stencil=hr[0].stencil,Tn.depthStencil=hr[0].depthStencil),hr[tn]?hr[tn](Tn):hr[tn]=Ne(Tn)}return S(fr,{width:wn,height:wn,color:Di})}function Xr(fn){var tn,Tn=fn|0;if(ft(Tn>0&&Tn<=ze.maxCubeMapSize,"invalid radius for cube fbo"),Tn===fr.width)return fr;var wn=fr.color;for(tn=0;tn<wn.length;++tn)wn[tn].resize(Tn);for(tn=0;tn<6;++tn)hr[tn].resize(Tn);return fr.width=fr.height=Tn,fr}return fr(ur),S(fr,{faces:hr,resize:Xr,_reglType:"framebufferCube",destroy:function(){hr.forEach(function(fn){fn.destroy()})}})}function Pr(){Ar.cur=null,Ar.next=null,Ar.dirty=!0,ta(Ot).forEach(function(ur){ur.framebuffer=Ct.createFramebuffer(),oe(ur)})}return S(Ar,{getFramebuffer:function(ur){if(typeof ur=="function"&&ur._reglType==="framebuffer"){var hr=ur._framebuffer;if(hr instanceof Ut)return hr}return null},create:Ne,createCube:rr,clear:function(){ta(Ot).forEach(fe)},restore:Pr})}var Fs=5126,an=34962;function Bf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Fs,this.offset=0,this.stride=0,this.divisor=0}function Gh(Ct,ce,ze,wr,Rr){for(var br=ze.maxAttributes,Ar=new Array(br),jr=0;jr<br;++jr)Ar[jr]=new Bf;var Hr=0,Kr={},Vr={Record:Bf,scope:{},state:Ar,currentVAO:null,targetVAO:null,restore:d()?Ot:function(){},createVAO:Ut,getVAO:j,destroyBuffer:Qr,setVAO:d()?tt:lt,clear:d()?pt:function(){}};function Qr(qt){for(var fe=0;fe<Ar.length;++fe){var oe=Ar[fe];oe.buffer===qt&&(Ct.disableVertexAttribArray(fe),oe.buffer=null)}}function d(){return ce.oes_vertex_array_object}function L(){return ce.angle_instanced_arrays}function j(qt){return typeof qt=="function"&&qt._vao?qt._vao:null}function tt(qt){if(qt!==Vr.currentVAO){var fe=d();qt?fe.bindVertexArrayOES(qt.vao):fe.bindVertexArrayOES(null),Vr.currentVAO=qt}}function lt(qt){if(qt!==Vr.currentVAO){if(qt)qt.bindAttrs();else for(var fe=L(),oe=0;oe<Ar.length;++oe){var Ne=Ar[oe];Ne.buffer?(Ct.enableVertexAttribArray(oe),Ct.vertexAttribPointer(oe,Ne.size,Ne.type,Ne.normalized,Ne.stride,Ne.offfset),fe&&Ne.divisor&&fe.vertexAttribDivisorANGLE(oe,Ne.divisor)):(Ct.disableVertexAttribArray(oe),Ct.vertexAttrib4f(oe,Ne.x,Ne.y,Ne.z,Ne.w))}Vr.currentVAO=qt}}function pt(){ta(Kr).forEach(function(qt){qt.destroy()})}function St(){this.id=++Hr,this.attributes=[];var qt=d();qt?this.vao=qt.createVertexArrayOES():this.vao=null,Kr[this.id]=this,this.buffers=[]}St.prototype.bindAttrs=function(){for(var qt=L(),fe=this.attributes,oe=0;oe<fe.length;++oe){var Ne=fe[oe];Ne.buffer?(Ct.enableVertexAttribArray(oe),Ct.bindBuffer(an,Ne.buffer.buffer),Ct.vertexAttribPointer(oe,Ne.size,Ne.type,Ne.normalized,Ne.stride,Ne.offset),qt&&Ne.divisor&&qt.vertexAttribDivisorANGLE(oe,Ne.divisor)):(Ct.disableVertexAttribArray(oe),Ct.vertexAttrib4f(oe,Ne.x,Ne.y,Ne.z,Ne.w))}for(var rr=fe.length;rr<br;++rr)Ct.disableVertexAttribArray(rr)},St.prototype.refresh=function(){var qt=d();qt&&(qt.bindVertexArrayOES(this.vao),this.bindAttrs(),Vr.currentVAO=this)},St.prototype.destroy=function(){if(this.vao){var qt=d();this===Vr.currentVAO&&(Vr.currentVAO=null,qt.bindVertexArrayOES(null)),qt.deleteVertexArrayOES(this.vao),this.vao=null}Kr[this.id]&&(delete Kr[this.id],wr.vaoCount-=1)};function Ot(){var qt=d();qt&&ta(Kr).forEach(function(fe){fe.refresh()})}function Ut(qt){var fe=new St;wr.vaoCount+=1;function oe(Ne){ft(Array.isArray(Ne),"arguments to vertex array constructor must be an array"),ft(Ne.length<br,"too many attributes"),ft(Ne.length>0,"must specify at least one attribute");var rr={},Pr=fe.attributes;Pr.length=Ne.length;for(var ur=0;ur<Ne.length;++ur){var hr=Ne[ur],fr=Pr[ur]=new Bf,Xr=hr.data||hr;if(Array.isArray(Xr)||w(Xr)||Ea(Xr)){var fn;fe.buffers[ur]&&(fn=fe.buffers[ur],w(Xr)&&fn._buffer.byteLength>=Xr.byteLength?fn.subdata(Xr):(fn.destroy(),fe.buffers[ur]=null)),fe.buffers[ur]||(fn=fe.buffers[ur]=Rr.create(hr,an,!1,!0)),fr.buffer=Rr.getBuffer(fn),fr.size=fr.buffer.dimension|0,fr.normalized=!1,fr.type=fr.buffer.dtype,fr.offset=0,fr.stride=0,fr.divisor=0,fr.state=1,rr[ur]=1}else Rr.getBuffer(hr)?(fr.buffer=Rr.getBuffer(hr),fr.size=fr.buffer.dimension|0,fr.normalized=!1,fr.type=fr.buffer.dtype,fr.offset=0,fr.stride=0,fr.divisor=0,fr.state=1):Rr.getBuffer(hr.buffer)?(fr.buffer=Rr.getBuffer(hr.buffer),fr.size=(+hr.size||fr.buffer.dimension)|0,fr.normalized=!!hr.normalized||!1,"type"in hr?(ft.parameter(hr.type,Xa,"invalid buffer type"),fr.type=Xa[hr.type]):fr.type=fr.buffer.dtype,fr.offset=(hr.offset||0)|0,fr.stride=(hr.stride||0)|0,fr.divisor=(hr.divisor||0)|0,fr.state=1,ft(fr.size>=1&&fr.size<=4,"size must be between 1 and 4"),ft(fr.offset>=0,"invalid offset"),ft(fr.stride>=0&&fr.stride<=255,"stride must be between 0 and 255"),ft(fr.divisor>=0,"divisor must be positive"),ft(!fr.divisor||!!ce.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in hr?(ft(ur>0,"first attribute must not be a constant"),fr.x=+hr.x||0,fr.y=+hr.y||0,fr.z=+hr.z||0,fr.w=+hr.w||0,fr.state=2):ft(!1,"invalid attribute spec for location "+ur)}for(var tn=0;tn<fe.buffers.length;++tn)!rr[tn]&&fe.buffers[tn]&&(fe.buffers[tn].destroy(),fe.buffers[tn]=null);return fe.refresh(),oe}return oe.destroy=function(){for(var Ne=0;Ne<fe.buffers.length;++Ne)fe.buffers[Ne]&&fe.buffers[Ne].destroy();fe.buffers.length=0,fe.destroy()},oe._vao=fe,oe._reglType="vao",oe(qt)}return Vr}var Gf=35632,Fh=35633,Uh=35718,pc=35721;function dl(Ct,ce,ze,wr){var Rr={},br={};function Ar(tt,lt,pt,St){this.name=tt,this.id=lt,this.location=pt,this.info=St}function jr(tt,lt){for(var pt=0;pt<tt.length;++pt)if(tt[pt].id===lt.id){tt[pt].location=lt.location;return}tt.push(lt)}function Hr(tt,lt,pt){var St=tt===Gf?Rr:br,Ot=St[lt];if(!Ot){var Ut=ce.str(lt);Ot=Ct.createShader(tt),Ct.shaderSource(Ot,Ut),Ct.compileShader(Ot),ft.shaderError(Ct,Ot,Ut,tt,pt),St[lt]=Ot}return Ot}var Kr={},Vr=[],Qr=0;function d(tt,lt){this.id=Qr++,this.fragId=tt,this.vertId=lt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,wr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function L(tt,lt,pt){var St,Ot,Ut=Hr(Gf,tt.fragId),qt=Hr(Fh,tt.vertId),fe=tt.program=Ct.createProgram();if(Ct.attachShader(fe,Ut),Ct.attachShader(fe,qt),pt)for(St=0;St<pt.length;++St){var oe=pt[St];Ct.bindAttribLocation(fe,oe[0],oe[1])}Ct.linkProgram(fe),ft.linkError(Ct,fe,ce.str(tt.fragId),ce.str(tt.vertId),lt);var Ne=Ct.getProgramParameter(fe,Uh);wr.profile&&(tt.stats.uniformsCount=Ne);var rr=tt.uniforms;for(St=0;St<Ne;++St)if(Ot=Ct.getActiveUniform(fe,St),Ot)if(Ot.size>1)for(var Pr=0;Pr<Ot.size;++Pr){var ur=Ot.name.replace("[0]","["+Pr+"]");jr(rr,new Ar(ur,ce.id(ur),Ct.getUniformLocation(fe,ur),Ot))}else jr(rr,new Ar(Ot.name,ce.id(Ot.name),Ct.getUniformLocation(fe,Ot.name),Ot));var hr=Ct.getProgramParameter(fe,pc);wr.profile&&(tt.stats.attributesCount=hr);var fr=tt.attributes;for(St=0;St<hr;++St)Ot=Ct.getActiveAttrib(fe,St),Ot&&jr(fr,new Ar(Ot.name,ce.id(Ot.name),Ct.getAttribLocation(fe,Ot.name),Ot))}wr.profile&&(ze.getMaxUniformsCount=function(){var tt=0;return Vr.forEach(function(lt){lt.stats.uniformsCount>tt&&(tt=lt.stats.uniformsCount)}),tt},ze.getMaxAttributesCount=function(){var tt=0;return Vr.forEach(function(lt){lt.stats.attributesCount>tt&&(tt=lt.stats.attributesCount)}),tt});function j(){Rr={},br={};for(var tt=0;tt<Vr.length;++tt)L(Vr[tt],null,Vr[tt].attributes.map(function(lt){return[lt.location,lt.name]}))}return{clear:function(){var tt=Ct.deleteShader.bind(Ct);ta(Rr).forEach(tt),Rr={},ta(br).forEach(tt),br={},Vr.forEach(function(lt){Ct.deleteProgram(lt.program)}),Vr.length=0,Kr={},ze.shaderCount=0},program:function(tt,lt,pt,St){ft.command(tt>=0,"missing vertex shader",pt),ft.command(lt>=0,"missing fragment shader",pt);var Ot=Kr[lt];Ot||(Ot=Kr[lt]={});var Ut=Ot[tt];if(Ut&&(Ut.refCount++,!St))return Ut;var qt=new d(lt,tt);return ze.shaderCount++,L(qt,pt,St),Ut||(Ot[tt]=qt),Vr.push(qt),S(qt,{destroy:function(){if(qt.refCount--,qt.refCount<=0){Ct.deleteProgram(qt.program);var fe=Vr.indexOf(qt);Vr.splice(fe,1),ze.shaderCount--}Ot[qt.vertId].refCount<=0&&(Ct.deleteShader(br[qt.vertId]),delete br[qt.vertId],delete Kr[qt.fragId][qt.vertId]),Object.keys(Kr[qt.fragId]).length||(Ct.deleteShader(Rr[qt.fragId]),delete Rr[qt.fragId],delete Kr[qt.fragId])}})},restore:j,shader:Hr,frag:-1,vert:-1}}var nh=6408,Us=5121,Su=3333,Mu=5126;function $u(Ct,ce,ze,wr,Rr,br,Ar){function jr(Vr){var Qr;ce.next===null?(ft(Rr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Qr=Us):(ft(ce.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Qr=ce.next.colorAttachments[0].texture._texture.type,br.oes_texture_float?(ft(Qr===Us||Qr===Mu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Qr===Mu&&ft(Ar.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ft(Qr===Us,"Reading from a framebuffer is only allowed for the type 'uint8'"));var d=0,L=0,j=wr.framebufferWidth,tt=wr.framebufferHeight,lt=null;w(Vr)?lt=Vr:Vr&&(ft.type(Vr,"object","invalid arguments to regl.read()"),d=Vr.x|0,L=Vr.y|0,ft(d>=0&&d<wr.framebufferWidth,"invalid x offset for regl.read"),ft(L>=0&&L<wr.framebufferHeight,"invalid y offset for regl.read"),j=(Vr.width||wr.framebufferWidth-d)|0,tt=(Vr.height||wr.framebufferHeight-L)|0,lt=Vr.data||null),lt&&(Qr===Us?ft(lt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Qr===Mu&&ft(lt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ft(j>0&&j+d<=wr.framebufferWidth,"invalid width for read pixels"),ft(tt>0&&tt+L<=wr.framebufferHeight,"invalid height for read pixels"),ze();var pt=j*tt*4;return lt||(Qr===Us?lt=new Uint8Array(pt):Qr===Mu&&(lt=lt||new Float32Array(pt))),ft.isTypedArray(lt,"data buffer for regl.read() must be a typedarray"),ft(lt.byteLength>=pt,"data buffer for regl.read() too small"),Ct.pixelStorei(Su,4),Ct.readPixels(d,L,j,tt,nh,Qr,lt),lt}function Hr(Vr){var Qr;return ce.setFBO({framebuffer:Vr.framebuffer},function(){Qr=jr(Vr)}),Qr}function Kr(Vr){return!Vr||!("framebuffer"in Vr)?jr(Vr):Hr(Vr)}return Kr}function Ms(Ct){return Array.prototype.slice.call(Ct)}function lo(Ct){return Ms(Ct).join("")}function ih(){var Ct=0,ce=[],ze=[];function wr(Qr){for(var d=0;d<ze.length;++d)if(ze[d]===Qr)return ce[d];var L="g"+Ct++;return ce.push(L),ze.push(Qr),L}function Rr(){var Qr=[];function d(){Qr.push.apply(Qr,Ms(arguments))}var L=[];function j(){var tt="v"+Ct++;return L.push(tt),arguments.length>0&&(Qr.push(tt,"="),Qr.push.apply(Qr,Ms(arguments)),Qr.push(";")),tt}return S(d,{def:j,toString:function(){return lo([L.length>0?"var "+L.join(",")+";":"",lo(Qr)])}})}function br(){var Qr=Rr(),d=Rr(),L=Qr.toString,j=d.toString;function tt(lt,pt){d(lt,pt,"=",Qr.def(lt,pt),";")}return S(function(){Qr.apply(Qr,Ms(arguments))},{def:Qr.def,entry:Qr,exit:d,save:tt,set:function(lt,pt,St){tt(lt,pt),Qr(lt,pt,"=",St,";")},toString:function(){return L()+j()}})}function Ar(){var Qr=lo(arguments),d=br(),L=br(),j=d.toString,tt=L.toString;return S(d,{then:function(){return d.apply(d,Ms(arguments)),this},else:function(){return L.apply(L,Ms(arguments)),this},toString:function(){var lt=tt();return lt&&(lt="else{"+lt+"}"),lo(["if(",Qr,"){",j(),"}",lt])}})}var jr=Rr(),Hr={};function Kr(Qr,d){var L=[];function j(){var Ot="a"+L.length;return L.push(Ot),Ot}d=d||0;for(var tt=0;tt<d;++tt)j();var lt=br(),pt=lt.toString,St=Hr[Qr]=S(lt,{arg:j,toString:function(){return lo(["function(",L.join(),"){",pt(),"}"])}});return St}function Vr(){var Qr=['"use strict";',jr,"return {"];Object.keys(Hr).forEach(function(j){Qr.push('"',j,'":',Hr[j].toString(),",")}),Qr.push("}");var d=lo(Qr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),L=Function.apply(null,ce.concat(d));return L.apply(null,ze)}return{global:jr,link:wr,block:Rr,proc:Kr,scope:br,cond:Ar,compile:Vr}}var Qu="xyzw".split(""),ah=5121,Ju=1,vl=2,pl=0,gl=1,gc=2,yc=3,mc=4,yl=5,qu=6,ml="dither",Ff="blend.enable",oh="blend.color",tf="blend.equation",gi="blend.func",sh="depth.enable",bl="depth.func",bc="depth.range",ef="depth.mask",Ec="colorMask",Ke="cull.enable",$o="cull.face",zs="frontFace",rf="lineWidth",El="polygonOffset.enable",xc="polygonOffset.offset",Cu="sample.alpha",wc="sample.enable",nf="sample.coverage",_c="stencil.enable",Sc="stencil.mask",af="stencil.func",la="stencil.opFront",su="stencil.opBack",xl="scissor.enable",Uf="scissor.box",Lo="viewport",uu="profile",fu="framebuffer",Cs="vert",cu="frag",As="elements",lu="primitive",Ts="count",Au="offset",zf="instances",of="vao",Mc="Width",us="Height",Tu=fu+Mc,ko=fu+us,Cc=Lo+Mc,Ac=Lo+us,Iu="drawingBuffer",Tc=Iu+Mc,Qo=Iu+us,Ic=[gi,tf,af,la,su,nf,Lo,Uf,xc],Pu=34962,uh=34963,fs=35632,sf=35633,cs=3553,Ro=34067,Wf=2884,Is=3042,Bo=3024,Pc=2960,ls=2929,Ws=3089,Ua=32823,hs=32926,Go=32928,Ps=5126,Oc=35664,Vf=35665,uf=35666,wl=5124,Dc=35667,jf=35668,ff=35669,_l=35670,Ou=35671,Xf=35672,ds=35673,Yf=35674,Jo=35675,cf=35676,Hf=35678,$i=35680,Du=4,Nu=1028,Vs=1029,fh=2304,Zf=2305,zh=32775,ch=32776,Wh=519,Lu=7680,lh=0,hh=1,Sl=32774,Vh=513,dh=36160,jh=36064,Qa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},vh=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ku={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ml={frag:fs,vert:sf},ph={cw:fh,ccw:Zf};function Kf(Ct){return Array.isArray(Ct)||w(Ct)||Ea(Ct)}function gh(Ct){return Ct.sort(function(ce,ze){return ce===Lo?-1:ze===Lo?1:ce<ze?-1:1})}function ho(Ct,ce,ze,wr){this.thisDep=Ct,this.contextDep=ce,this.propDep=ze,this.append=wr}function du(Ct){return Ct&&!(Ct.thisDep||Ct.contextDep||Ct.propDep)}function ii(Ct){return new ho(!1,!1,!1,Ct)}function no(Ct,ce){var ze=Ct.type;if(ze===pl){var wr=Ct.data.length;return new ho(!0,wr>=1,wr>=2,ce)}else if(ze===mc){var Rr=Ct.data;return new ho(Rr.thisDep,Rr.contextDep,Rr.propDep,ce)}else{if(ze===yl)return new ho(!1,!1,!1,ce);if(ze===qu){for(var br=!1,Ar=!1,jr=!1,Hr=0;Hr<Ct.data.length;++Hr){var Kr=Ct.data[Hr];if(Kr.type===gl)jr=!0;else if(Kr.type===gc)Ar=!0;else if(Kr.type===yc)br=!0;else if(Kr.type===pl){br=!0;var Vr=Kr.data;Vr>=1&&(Ar=!0),Vr>=2&&(jr=!0)}else Kr.type===mc&&(br=br||Kr.data.thisDep,Ar=Ar||Kr.data.contextDep,jr=jr||Kr.data.propDep)}return new ho(br,Ar,jr,ce)}else return new ho(ze===yc,ze===gc,ze===gl,ce)}}var Nc=new ho(!1,!1,!1,function(){});function Xh(Ct,ce,ze,wr,Rr,br,Ar,jr,Hr,Kr,Vr,Qr,d,L,j){var tt=Kr.Record,lt={add:32774,subtract:32778,"reverse subtract":32779};ze.ext_blend_minmax&&(lt.min=zh,lt.max=ch);var pt=ze.angle_instanced_arrays,St=ze.webgl_draw_buffers,Ot={dirty:!0,profile:j.profile},Ut={},qt=[],fe={},oe={};function Ne(_e){return _e.replace(".","_")}function rr(_e,se,$e){var dr=Ne(_e);qt.push(_e),Ut[dr]=Ot[dr]=!!$e,fe[dr]=se}function Pr(_e,se,$e){var dr=Ne(_e);qt.push(_e),Array.isArray($e)?(Ot[dr]=$e.slice(),Ut[dr]=$e.slice()):Ot[dr]=Ut[dr]=$e,oe[dr]=se}rr(ml,Bo),rr(Ff,Is),Pr(oh,"blendColor",[0,0,0,0]),Pr(tf,"blendEquationSeparate",[Sl,Sl]),Pr(gi,"blendFuncSeparate",[hh,lh,hh,lh]),rr(sh,ls,!0),Pr(bl,"depthFunc",Vh),Pr(bc,"depthRange",[0,1]),Pr(ef,"depthMask",!0),Pr(Ec,Ec,[!0,!0,!0,!0]),rr(Ke,Wf),Pr($o,"cullFace",Vs),Pr(zs,zs,Zf),Pr(rf,rf,1),rr(El,Ua),Pr(xc,"polygonOffset",[0,0]),rr(Cu,hs),rr(wc,Go),Pr(nf,"sampleCoverage",[1,!1]),rr(_c,Pc),Pr(Sc,"stencilMask",-1),Pr(af,"stencilFunc",[Wh,0,-1]),Pr(la,"stencilOpSeparate",[Nu,Lu,Lu,Lu]),Pr(su,"stencilOpSeparate",[Vs,Lu,Lu,Lu]),rr(xl,Ws),Pr(Uf,"scissor",[0,0,Ct.drawingBufferWidth,Ct.drawingBufferHeight]),Pr(Lo,Lo,[0,0,Ct.drawingBufferWidth,Ct.drawingBufferHeight]);var ur={gl:Ct,context:d,strings:ce,next:Ut,current:Ot,draw:Qr,elements:br,buffer:Rr,shader:Vr,attributes:Kr.state,vao:Kr,uniforms:Hr,framebuffer:jr,extensions:ze,timer:L,isBufferArgs:Kf},hr={primTypes:Ha,compareFuncs:ku,blendFuncs:Qa,blendEquations:lt,stencilOps:hu,glTypes:Xa,orientationType:ph};ft.optional(function(){ur.isArrayLike=Mi}),St&&(hr.backBuffer=[Vs],hr.drawBuffer=pn(wr.maxDrawbuffers,function(_e){return _e===0?[0]:pn(_e,function(se){return jh+se})}));var fr=0;function Xr(){var _e=ih(),se=_e.link,$e=_e.global;_e.id=fr++,_e.batchId="0";var dr=se(ur),gr=_e.shared={props:"a0"};Object.keys(ur).forEach(function(He){gr[He]=$e.def(dr,".",He)}),ft.optional(function(){_e.CHECK=se(ft),_e.commandStr=ft.guessCommand(),_e.command=se(_e.commandStr),_e.assert=function(He,be,lr){He("if(!(",be,"))",this.CHECK,".commandRaise(",se(lr),",",this.command,");")},hr.invalidBlendCombinations=vh});var Je=_e.next={},Qe=_e.current={};Object.keys(oe).forEach(function(He){Array.isArray(Ot[He])&&(Je[He]=$e.def(gr.next,".",He),Qe[He]=$e.def(gr.current,".",He))});var ir=_e.constants={};Object.keys(hr).forEach(function(He){ir[He]=$e.def(JSON.stringify(hr[He]))}),_e.invoke=function(He,be){switch(be.type){case pl:var lr=["this",gr.context,gr.props,_e.batchId];return He.def(se(be.data),".call(",lr.slice(0,Math.max(be.data.length+1,4)),")");case gl:return He.def(gr.props,be.data);case gc:return He.def(gr.context,be.data);case yc:return He.def("this",be.data);case mc:return be.data.append(_e,He),be.data.ref;case yl:return be.data.toString();case qu:return be.data.map(function(mr){return _e.invoke(He,mr)})}},_e.attribCache={};var we={};return _e.scopeAttrib=function(He){var be=ce.id(He);if(be in we)return we[be];var lr=Kr.scope[be];lr||(lr=Kr.scope[be]=new tt);var mr=we[be]=se(lr);return mr},_e}function fn(_e){var se=_e.static,$e=_e.dynamic,dr;if(uu in se){var gr=!!se[uu];dr=ii(function(Qe,ir){return gr}),dr.enable=gr}else if(uu in $e){var Je=$e[uu];dr=no(Je,function(Qe,ir){return Qe.invoke(ir,Je)})}return dr}function tn(_e,se){var $e=_e.static,dr=_e.dynamic;if(fu in $e){var gr=$e[fu];return gr?(gr=jr.getFramebuffer(gr),ft.command(gr,"invalid framebuffer object"),ii(function(Qe,ir){var we=Qe.link(gr),He=Qe.shared;ir.set(He.framebuffer,".next",we);var be=He.context;return ir.set(be,"."+Tu,we+".width"),ir.set(be,"."+ko,we+".height"),we})):ii(function(Qe,ir){var we=Qe.shared;ir.set(we.framebuffer,".next","null");var He=we.context;return ir.set(He,"."+Tu,He+"."+Tc),ir.set(He,"."+ko,He+"."+Qo),"null"})}else if(fu in dr){var Je=dr[fu];return no(Je,function(Qe,ir){var we=Qe.invoke(ir,Je),He=Qe.shared,be=He.framebuffer,lr=ir.def(be,".getFramebuffer(",we,")");ft.optional(function(){Qe.assert(ir,"!"+we+"||"+lr,"invalid framebuffer object")}),ir.set(be,".next",lr);var mr=He.context;return ir.set(mr,"."+Tu,lr+"?"+lr+".width:"+mr+"."+Tc),ir.set(mr,"."+ko,lr+"?"+lr+".height:"+mr+"."+Qo),lr})}else return null}function Tn(_e,se,$e){var dr=_e.static,gr=_e.dynamic;function Je(we){if(we in dr){var He=dr[we];ft.commandType(He,"object","invalid "+we,$e.commandStr);var be=!0,lr=He.x|0,mr=He.y|0,kr,Ur;return"width"in He?(kr=He.width|0,ft.command(kr>=0,"invalid "+we,$e.commandStr)):be=!1,"height"in He?(Ur=He.height|0,ft.command(Ur>=0,"invalid "+we,$e.commandStr)):be=!1,new ho(!be&&se&&se.thisDep,!be&&se&&se.contextDep,!be&&se&&se.propDep,function(An,qn){var Mn=An.shared.context,jn=kr;"width"in He||(jn=qn.def(Mn,".",Tu,"-",lr));var $n=Ur;return"height"in He||($n=qn.def(Mn,".",ko,"-",mr)),[lr,mr,jn,$n]})}else if(we in gr){var Or=gr[we],qr=no(Or,function(An,qn){var Mn=An.invoke(qn,Or);ft.optional(function(){An.assert(qn,Mn+"&&typeof "+Mn+'==="object"',"invalid "+we)});var jn=An.shared.context,$n=qn.def(Mn,".x|0"),Ci=qn.def(Mn,".y|0"),da=qn.def('"width" in ',Mn,"?",Mn,".width|0:","(",jn,".",Tu,"-",$n,")"),Fo=qn.def('"height" in ',Mn,"?",Mn,".height|0:","(",jn,".",ko,"-",Ci,")");return ft.optional(function(){An.assert(qn,da+">=0&&"+Fo+">=0","invalid "+we)}),[$n,Ci,da,Fo]});return se&&(qr.thisDep=qr.thisDep||se.thisDep,qr.contextDep=qr.contextDep||se.contextDep,qr.propDep=qr.propDep||se.propDep),qr}else return se?new ho(se.thisDep,se.contextDep,se.propDep,function(An,qn){var Mn=An.shared.context;return[0,0,qn.def(Mn,".",Tu),qn.def(Mn,".",ko)]}):null}var Qe=Je(Lo);if(Qe){var ir=Qe;Qe=new ho(Qe.thisDep,Qe.contextDep,Qe.propDep,function(we,He){var be=ir.append(we,He),lr=we.shared.context;return He.set(lr,"."+Cc,be[2]),He.set(lr,"."+Ac,be[3]),be})}return{viewport:Qe,scissor_box:Je(Uf)}}function wn(_e,se){var $e=_e.static,dr=typeof $e[cu]=="string"&&typeof $e[Cs]=="string";if(dr){if(Object.keys(se.dynamic).length>0)return null;var gr=se.static,Je=Object.keys(gr);if(Je.length>0&&typeof gr[Je[0]]=="number"){for(var Qe=[],ir=0;ir<Je.length;++ir)ft(typeof gr[Je[ir]]=="number","must specify all vertex attribute locations when using vaos"),Qe.push([gr[Je[ir]]|0,Je[ir]]);return Qe}}return null}function Rn(_e,se,$e){var dr=_e.static,gr=_e.dynamic;function Je(be){if(be in dr){var lr=ce.id(dr[be]);ft.optional(function(){Vr.shader(Ml[be],lr,ft.guessCommand())});var mr=ii(function(){return lr});return mr.id=lr,mr}else if(be in gr){var kr=gr[be];return no(kr,function(Ur,Or){var qr=Ur.invoke(Or,kr),An=Or.def(Ur.shared.strings,".id(",qr,")");return ft.optional(function(){Or(Ur.shared.shader,".shader(",Ml[be],",",An,",",Ur.command,");")}),An})}return null}var Qe=Je(cu),ir=Je(Cs),we=null,He;return du(Qe)&&du(ir)?(we=Vr.program(ir.id,Qe.id,null,$e),He=ii(function(be,lr){return be.link(we)})):He=new ho(Qe&&Qe.thisDep||ir&&ir.thisDep,Qe&&Qe.contextDep||ir&&ir.contextDep,Qe&&Qe.propDep||ir&&ir.propDep,function(be,lr){var mr=be.shared.shader,kr;Qe?kr=Qe.append(be,lr):kr=lr.def(mr,".",cu);var Ur;ir?Ur=ir.append(be,lr):Ur=lr.def(mr,".",Cs);var Or=mr+".program("+Ur+","+kr;return ft.optional(function(){Or+=","+be.command}),lr.def(Or+")")}),{frag:Qe,vert:ir,progVar:He,program:we}}function Kn(_e,se){var $e=_e.static,dr=_e.dynamic;function gr(){if(As in $e){var be=$e[As];Kf(be)?be=br.getElements(br.create(be,!0)):be&&(be=br.getElements(be),ft.command(be,"invalid elements",se.commandStr));var lr=ii(function(kr,Ur){if(be){var Or=kr.link(be);return kr.ELEMENTS=Or,Or}return kr.ELEMENTS=null,null});return lr.value=be,lr}else if(As in dr){var mr=dr[As];return no(mr,function(kr,Ur){var Or=kr.shared,qr=Or.isBufferArgs,An=Or.elements,qn=kr.invoke(Ur,mr),Mn=Ur.def("null"),jn=Ur.def(qr,"(",qn,")"),$n=kr.cond(jn).then(Mn,"=",An,".createStream(",qn,");").else(Mn,"=",An,".getElements(",qn,");");return ft.optional(function(){kr.assert($n.else,"!"+qn+"||"+Mn,"invalid elements")}),Ur.entry($n),Ur.exit(kr.cond(jn).then(An,".destroyStream(",Mn,");")),kr.ELEMENTS=Mn,Mn})}return null}var Je=gr();function Qe(){if(lu in $e){var be=$e[lu];return ft.commandParameter(be,Ha,"invalid primitve",se.commandStr),ii(function(mr,kr){return Ha[be]})}else if(lu in dr){var lr=dr[lu];return no(lr,function(mr,kr){var Ur=mr.constants.primTypes,Or=mr.invoke(kr,lr);return ft.optional(function(){mr.assert(kr,Or+" in "+Ur,"invalid primitive, must be one of "+Object.keys(Ha))}),kr.def(Ur,"[",Or,"]")})}else if(Je)return du(Je)?Je.value?ii(function(mr,kr){return kr.def(mr.ELEMENTS,".primType")}):ii(function(){return Du}):new ho(Je.thisDep,Je.contextDep,Je.propDep,function(mr,kr){var Ur=mr.ELEMENTS;return kr.def(Ur,"?",Ur,".primType:",Du)});return null}function ir(be,lr){if(be in $e){var mr=$e[be]|0;return ft.command(!lr||mr>=0,"invalid "+be,se.commandStr),ii(function(Ur,Or){return lr&&(Ur.OFFSET=mr),mr})}else if(be in dr){var kr=dr[be];return no(kr,function(Ur,Or){var qr=Ur.invoke(Or,kr);return lr&&(Ur.OFFSET=qr,ft.optional(function(){Ur.assert(Or,qr+">=0","invalid "+be)})),qr})}else if(lr&&Je)return ii(function(Ur,Or){return Ur.OFFSET="0",0});return null}var we=ir(Au,!0);function He(){if(Ts in $e){var be=$e[Ts]|0;return ft.command(typeof be=="number"&&be>=0,"invalid vertex count",se.commandStr),ii(function(){return be})}else if(Ts in dr){var lr=dr[Ts];return no(lr,function(Ur,Or){var qr=Ur.invoke(Or,lr);return ft.optional(function(){Ur.assert(Or,"typeof "+qr+'==="number"&&'+qr+">=0&&"+qr+"===("+qr+"|0)","invalid vertex count")}),qr})}else if(Je)if(du(Je)){if(Je)return we?new ho(we.thisDep,we.contextDep,we.propDep,function(Ur,Or){var qr=Or.def(Ur.ELEMENTS,".vertCount-",Ur.OFFSET);return ft.optional(function(){Ur.assert(Or,qr+">=0","invalid vertex offset/element buffer too small")}),qr}):ii(function(Ur,Or){return Or.def(Ur.ELEMENTS,".vertCount")});var mr=ii(function(){return-1});return ft.optional(function(){mr.MISSING=!0}),mr}else{var kr=new ho(Je.thisDep||we.thisDep,Je.contextDep||we.contextDep,Je.propDep||we.propDep,function(Ur,Or){var qr=Ur.ELEMENTS;return Ur.OFFSET?Or.def(qr,"?",qr,".vertCount-",Ur.OFFSET,":-1"):Or.def(qr,"?",qr,".vertCount:-1")});return ft.optional(function(){kr.DYNAMIC=!0}),kr}return null}return{elements:Je,primitive:Qe(),count:He(),instances:ir(zf,!1),offset:we}}function Fn(_e,se){var $e=_e.static,dr=_e.dynamic,gr={};return qt.forEach(function(Je){var Qe=Ne(Je);function ir(we,He){if(Je in $e){var be=we($e[Je]);gr[Qe]=ii(function(){return be})}else if(Je in dr){var lr=dr[Je];gr[Qe]=no(lr,function(mr,kr){return He(mr,kr,mr.invoke(kr,lr))})}}switch(Je){case Ke:case Ff:case ml:case _c:case sh:case xl:case El:case Cu:case wc:case ef:return ir(function(we){return ft.commandType(we,"boolean",Je,se.commandStr),we},function(we,He,be){return ft.optional(function(){we.assert(He,"typeof "+be+'==="boolean"',"invalid flag "+Je,we.commandStr)}),be});case bl:return ir(function(we){return ft.commandParameter(we,ku,"invalid "+Je,se.commandStr),ku[we]},function(we,He,be){var lr=we.constants.compareFuncs;return ft.optional(function(){we.assert(He,be+" in "+lr,"invalid "+Je+", must be one of "+Object.keys(ku))}),He.def(lr,"[",be,"]")});case bc:return ir(function(we){return ft.command(Mi(we)&&we.length===2&&typeof we[0]=="number"&&typeof we[1]=="number"&&we[0]<=we[1],"depth range is 2d array",se.commandStr),we},function(we,He,be){ft.optional(function(){we.assert(He,we.shared.isArrayLike+"("+be+")&&"+be+".length===2&&typeof "+be+'[0]==="number"&&typeof '+be+'[1]==="number"&&'+be+"[0]<="+be+"[1]","depth range must be a 2d array")});var lr=He.def("+",be,"[0]"),mr=He.def("+",be,"[1]");return[lr,mr]});case gi:return ir(function(we){ft.commandType(we,"object","blend.func",se.commandStr);var He="srcRGB"in we?we.srcRGB:we.src,be="srcAlpha"in we?we.srcAlpha:we.src,lr="dstRGB"in we?we.dstRGB:we.dst,mr="dstAlpha"in we?we.dstAlpha:we.dst;return ft.commandParameter(He,Qa,Qe+".srcRGB",se.commandStr),ft.commandParameter(be,Qa,Qe+".srcAlpha",se.commandStr),ft.commandParameter(lr,Qa,Qe+".dstRGB",se.commandStr),ft.commandParameter(mr,Qa,Qe+".dstAlpha",se.commandStr),ft.command(vh.indexOf(He+", "+lr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+He+", "+lr+")",se.commandStr),[Qa[He],Qa[lr],Qa[be],Qa[mr]]},function(we,He,be){var lr=we.constants.blendFuncs;ft.optional(function(){we.assert(He,be+"&&typeof "+be+'==="object"',"invalid blend func, must be an object")});function mr(Mn,jn){var $n=He.def('"',Mn,jn,'" in ',be,"?",be,".",Mn,jn,":",be,".",Mn);return ft.optional(function(){we.assert(He,$n+" in "+lr,"invalid "+Je+"."+Mn+jn+", must be one of "+Object.keys(Qa))}),$n}var kr=mr("src","RGB"),Ur=mr("dst","RGB");ft.optional(function(){var Mn=we.constants.invalidBlendCombinations;we.assert(He,Mn+".indexOf("+kr+'+", "+'+Ur+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Or=He.def(lr,"[",kr,"]"),qr=He.def(lr,"[",mr("src","Alpha"),"]"),An=He.def(lr,"[",Ur,"]"),qn=He.def(lr,"[",mr("dst","Alpha"),"]");return[Or,An,qr,qn]});case tf:return ir(function(we){if(typeof we=="string")return ft.commandParameter(we,lt,"invalid "+Je,se.commandStr),[lt[we],lt[we]];if(typeof we=="object")return ft.commandParameter(we.rgb,lt,Je+".rgb",se.commandStr),ft.commandParameter(we.alpha,lt,Je+".alpha",se.commandStr),[lt[we.rgb],lt[we.alpha]];ft.commandRaise("invalid blend.equation",se.commandStr)},function(we,He,be){var lr=we.constants.blendEquations,mr=He.def(),kr=He.def(),Ur=we.cond("typeof ",be,'==="string"');return ft.optional(function(){function Or(qr,An,qn){we.assert(qr,qn+" in "+lr,"invalid "+An+", must be one of "+Object.keys(lt))}Or(Ur.then,Je,be),we.assert(Ur.else,be+"&&typeof "+be+'==="object"',"invalid "+Je),Or(Ur.else,Je+".rgb",be+".rgb"),Or(Ur.else,Je+".alpha",be+".alpha")}),Ur.then(mr,"=",kr,"=",lr,"[",be,"];"),Ur.else(mr,"=",lr,"[",be,".rgb];",kr,"=",lr,"[",be,".alpha];"),He(Ur),[mr,kr]});case oh:return ir(function(we){return ft.command(Mi(we)&&we.length===4,"blend.color must be a 4d array",se.commandStr),pn(4,function(He){return+we[He]})},function(we,He,be){return ft.optional(function(){we.assert(He,we.shared.isArrayLike+"("+be+")&&"+be+".length===4","blend.color must be a 4d array")}),pn(4,function(lr){return He.def("+",be,"[",lr,"]")})});case Sc:return ir(function(we){return ft.commandType(we,"number",Qe,se.commandStr),we|0},function(we,He,be){return ft.optional(function(){we.assert(He,"typeof "+be+'==="number"',"invalid stencil.mask")}),He.def(be,"|0")});case af:return ir(function(we){ft.commandType(we,"object",Qe,se.commandStr);var He=we.cmp||"keep",be=we.ref||0,lr="mask"in we?we.mask:-1;return ft.commandParameter(He,ku,Je+".cmp",se.commandStr),ft.commandType(be,"number",Je+".ref",se.commandStr),ft.commandType(lr,"number",Je+".mask",se.commandStr),[ku[He],be,lr]},function(we,He,be){var lr=we.constants.compareFuncs;ft.optional(function(){function Or(){we.assert(He,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Or(be+"&&typeof ",be,'==="object"'),Or('!("cmp" in ',be,")||(",be,".cmp in ",lr,")")});var mr=He.def('"cmp" in ',be,"?",lr,"[",be,".cmp]",":",Lu),kr=He.def(be,".ref|0"),Ur=He.def('"mask" in ',be,"?",be,".mask|0:-1");return[mr,kr,Ur]});case la:case su:return ir(function(we){ft.commandType(we,"object",Qe,se.commandStr);var He=we.fail||"keep",be=we.zfail||"keep",lr=we.zpass||"keep";return ft.commandParameter(He,hu,Je+".fail",se.commandStr),ft.commandParameter(be,hu,Je+".zfail",se.commandStr),ft.commandParameter(lr,hu,Je+".zpass",se.commandStr),[Je===su?Vs:Nu,hu[He],hu[be],hu[lr]]},function(we,He,be){var lr=we.constants.stencilOps;ft.optional(function(){we.assert(He,be+"&&typeof "+be+'==="object"',"invalid "+Je)});function mr(kr){return ft.optional(function(){we.assert(He,'!("'+kr+'" in '+be+")||("+be+"."+kr+" in "+lr+")","invalid "+Je+"."+kr+", must be one of "+Object.keys(hu))}),He.def('"',kr,'" in ',be,"?",lr,"[",be,".",kr,"]:",Lu)}return[Je===su?Vs:Nu,mr("fail"),mr("zfail"),mr("zpass")]});case xc:return ir(function(we){ft.commandType(we,"object",Qe,se.commandStr);var He=we.factor|0,be=we.units|0;return ft.commandType(He,"number",Qe+".factor",se.commandStr),ft.commandType(be,"number",Qe+".units",se.commandStr),[He,be]},function(we,He,be){ft.optional(function(){we.assert(He,be+"&&typeof "+be+'==="object"',"invalid "+Je)});var lr=He.def(be,".factor|0"),mr=He.def(be,".units|0");return[lr,mr]});case $o:return ir(function(we){var He=0;return we==="front"?He=Nu:we==="back"&&(He=Vs),ft.command(!!He,Qe,se.commandStr),He},function(we,He,be){return ft.optional(function(){we.assert(He,be+'==="front"||'+be+'==="back"',"invalid cull.face")}),He.def(be,'==="front"?',Nu,":",Vs)});case rf:return ir(function(we){return ft.command(typeof we=="number"&&we>=wr.lineWidthDims[0]&&we<=wr.lineWidthDims[1],"invalid line width, must be a positive number between "+wr.lineWidthDims[0]+" and "+wr.lineWidthDims[1],se.commandStr),we},function(we,He,be){return ft.optional(function(){we.assert(He,"typeof "+be+'==="number"&&'+be+">="+wr.lineWidthDims[0]+"&&"+be+"<="+wr.lineWidthDims[1],"invalid line width")}),be});case zs:return ir(function(we){return ft.commandParameter(we,ph,Qe,se.commandStr),ph[we]},function(we,He,be){return ft.optional(function(){we.assert(He,be+'==="cw"||'+be+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),He.def(be+'==="cw"?'+fh+":"+Zf)});case Ec:return ir(function(we){return ft.command(Mi(we)&&we.length===4,"color.mask must be length 4 array",se.commandStr),we.map(function(He){return!!He})},function(we,He,be){return ft.optional(function(){we.assert(He,we.shared.isArrayLike+"("+be+")&&"+be+".length===4","invalid color.mask")}),pn(4,function(lr){return"!!"+be+"["+lr+"]"})});case nf:return ir(function(we){ft.command(typeof we=="object"&&we,Qe,se.commandStr);var He="value"in we?we.value:1,be=!!we.invert;return ft.command(typeof He=="number"&&He>=0&&He<=1,"sample.coverage.value must be a number between 0 and 1",se.commandStr),[He,be]},function(we,He,be){ft.optional(function(){we.assert(He,be+"&&typeof "+be+'==="object"',"invalid sample.coverage")});var lr=He.def('"value" in ',be,"?+",be,".value:1"),mr=He.def("!!",be,".invert");return[lr,mr]})}}),gr}function Vi(_e,se){var $e=_e.static,dr=_e.dynamic,gr={};return Object.keys($e).forEach(function(Je){var Qe=$e[Je],ir;if(typeof Qe=="number"||typeof Qe=="boolean")ir=ii(function(){return Qe});else if(typeof Qe=="function"){var we=Qe._reglType;we==="texture2d"||we==="textureCube"?ir=ii(function(He){return He.link(Qe)}):we==="framebuffer"||we==="framebufferCube"?(ft.command(Qe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Je+'"',se.commandStr),ir=ii(function(He){return He.link(Qe.color[0])})):ft.commandRaise('invalid data for uniform "'+Je+'"',se.commandStr)}else Mi(Qe)?ir=ii(function(He){var be=He.global.def("[",pn(Qe.length,function(lr){return ft.command(typeof Qe[lr]=="number"||typeof Qe[lr]=="boolean","invalid uniform "+Je,He.commandStr),Qe[lr]}),"]");return be}):ft.commandRaise('invalid or missing data for uniform "'+Je+'"',se.commandStr);ir.value=Qe,gr[Je]=ir}),Object.keys(dr).forEach(function(Je){var Qe=dr[Je];gr[Je]=no(Qe,function(ir,we){return ir.invoke(we,Qe)})}),gr}function Qn(_e,se){var $e=_e.static,dr=_e.dynamic,gr={};return Object.keys($e).forEach(function(Je){var Qe=$e[Je],ir=ce.id(Je),we=new tt;if(Kf(Qe))we.state=Ju,we.buffer=Rr.getBuffer(Rr.create(Qe,Pu,!1,!0)),we.type=0;else{var He=Rr.getBuffer(Qe);if(He)we.state=Ju,we.buffer=He,we.type=0;else if(ft.command(typeof Qe=="object"&&Qe,"invalid data for attribute "+Je,se.commandStr),"constant"in Qe){var be=Qe.constant;we.buffer="null",we.state=vl,typeof be=="number"?we.x=be:(ft.command(Mi(be)&&be.length>0&&be.length<=4,"invalid constant for attribute "+Je,se.commandStr),Qu.forEach(function(An,qn){qn<be.length&&(we[An]=be[qn])}))}else{Kf(Qe.buffer)?He=Rr.getBuffer(Rr.create(Qe.buffer,Pu,!1,!0)):He=Rr.getBuffer(Qe.buffer),ft.command(!!He,'missing buffer for attribute "'+Je+'"',se.commandStr);var lr=Qe.offset|0;ft.command(lr>=0,'invalid offset for attribute "'+Je+'"',se.commandStr);var mr=Qe.stride|0;ft.command(mr>=0&&mr<256,'invalid stride for attribute "'+Je+'", must be integer betweeen [0, 255]',se.commandStr);var kr=Qe.size|0;ft.command(!("size"in Qe)||kr>0&&kr<=4,'invalid size for attribute "'+Je+'", must be 1,2,3,4',se.commandStr);var Ur=!!Qe.normalized,Or=0;"type"in Qe&&(ft.commandParameter(Qe.type,Xa,"invalid type for attribute "+Je,se.commandStr),Or=Xa[Qe.type]);var qr=Qe.divisor|0;"divisor"in Qe&&(ft.command(qr===0||pt,'cannot specify divisor for attribute "'+Je+'", instancing not supported',se.commandStr),ft.command(qr>=0,'invalid divisor for attribute "'+Je+'"',se.commandStr)),ft.optional(function(){var An=se.commandStr,qn=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Qe).forEach(function(Mn){ft.command(qn.indexOf(Mn)>=0,'unknown parameter "'+Mn+'" for attribute pointer "'+Je+'" (valid parameters are '+qn+")",An)})}),we.buffer=He,we.state=Ju,we.size=kr,we.normalized=Ur,we.type=Or||He.dtype,we.offset=lr,we.stride=mr,we.divisor=qr}}gr[Je]=ii(function(An,qn){var Mn=An.attribCache;if(ir in Mn)return Mn[ir];var jn={isStream:!1};return Object.keys(we).forEach(function($n){jn[$n]=we[$n]}),we.buffer&&(jn.buffer=An.link(we.buffer),jn.type=jn.type||jn.buffer+".dtype"),Mn[ir]=jn,jn})}),Object.keys(dr).forEach(function(Je){var Qe=dr[Je];function ir(we,He){var be=we.invoke(He,Qe),lr=we.shared,mr=we.constants,kr=lr.isBufferArgs,Ur=lr.buffer;ft.optional(function(){we.assert(He,be+"&&(typeof "+be+'==="object"||typeof '+be+'==="function")&&('+kr+"("+be+")||"+Ur+".getBuffer("+be+")||"+Ur+".getBuffer("+be+".buffer)||"+kr+"("+be+'.buffer)||("constant" in '+be+"&&(typeof "+be+'.constant==="number"||'+lr.isArrayLike+"("+be+".constant))))",'invalid dynamic attribute "'+Je+'"')});var Or={isStream:He.def(!1)},qr=new tt;qr.state=Ju,Object.keys(qr).forEach(function(jn){Or[jn]=He.def(""+qr[jn])});var An=Or.buffer,qn=Or.type;He("if(",kr,"(",be,")){",Or.isStream,"=true;",An,"=",Ur,".createStream(",Pu,",",be,");",qn,"=",An,".dtype;","}else{",An,"=",Ur,".getBuffer(",be,");","if(",An,"){",qn,"=",An,".dtype;",'}else if("constant" in ',be,"){",Or.state,"=",vl,";","if(typeof "+be+'.constant === "number"){',Or[Qu[0]],"=",be,".constant;",Qu.slice(1).map(function(jn){return Or[jn]}).join("="),"=0;","}else{",Qu.map(function(jn,$n){return Or[jn]+"="+be+".constant.length>"+$n+"?"+be+".constant["+$n+"]:0;"}).join(""),"}}else{","if(",kr,"(",be,".buffer)){",An,"=",Ur,".createStream(",Pu,",",be,".buffer);","}else{",An,"=",Ur,".getBuffer(",be,".buffer);","}",qn,'="type" in ',be,"?",mr.glTypes,"[",be,".type]:",An,".dtype;",Or.normalized,"=!!",be,".normalized;");function Mn(jn){He(Or[jn],"=",be,".",jn,"|0;")}return Mn("size"),Mn("offset"),Mn("stride"),Mn("divisor"),He("}}"),He.exit("if(",Or.isStream,"){",Ur,".destroyStream(",An,");","}"),Or}gr[Je]=no(Qe,ir)}),gr}function oa(_e,se){var $e=_e.static,dr=_e.dynamic;if(of in $e){var gr=$e[of];return gr!==null&&Kr.getVAO(gr)===null&&(gr=Kr.createVAO(gr)),ii(function(Qe){return Qe.link(Kr.getVAO(gr))})}else if(of in dr){var Je=dr[of];return no(Je,function(Qe,ir){var we=Qe.invoke(ir,Je);return ir.def(Qe.shared.vao+".getVAO("+we+")")})}return null}function Di(_e){var se=_e.static,$e=_e.dynamic,dr={};return Object.keys(se).forEach(function(gr){var Je=se[gr];dr[gr]=ii(function(Qe,ir){return typeof Je=="number"||typeof Je=="boolean"?""+Je:Qe.link(Je)})}),Object.keys($e).forEach(function(gr){var Je=$e[gr];dr[gr]=no(Je,function(Qe,ir){return Qe.invoke(ir,Je)})}),dr}function ui(_e,se,$e,dr,gr){var Je=_e.static,Qe=_e.dynamic;ft.optional(function(){var Mn=[fu,Cs,cu,As,lu,Au,Ts,zf,uu,of].concat(qt);function jn($n){Object.keys($n).forEach(function(Ci){ft.command(Mn.indexOf(Ci)>=0,'unknown parameter "'+Ci+'"',gr.commandStr)})}jn(Je),jn(Qe)});var ir=wn(_e,se),we=tn(_e,gr),He=Tn(_e,we,gr),be=Kn(_e,gr),lr=Fn(_e,gr),mr=Rn(_e,gr,ir);function kr(Mn){var jn=He[Mn];jn&&(lr[Mn]=jn)}kr(Lo),kr(Ne(Uf));var Ur=Object.keys(lr).length>0,Or={framebuffer:we,draw:be,shader:mr,state:lr,dirty:Ur,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Or.profile=fn(_e,gr),Or.uniforms=Vi($e,gr),Or.drawVAO=Or.scopeVAO=oa(_e,gr),!Or.drawVAO&&mr.program&&!ir&&ze.angle_instanced_arrays){var qr=!0,An=mr.program.attributes.map(function(Mn){var jn=se.static[Mn];return qr=qr&&!!jn,jn});if(qr&&An.length>0){var qn=Kr.getVAO(Kr.createVAO(An));Or.drawVAO=new ho(null,null,null,function(Mn,jn){return Mn.link(qn)}),Or.useVAO=!0}}return ir?Or.useVAO=!0:Or.attributes=Qn(se,gr),Or.context=Di(dr,gr),Or}function Qi(_e,se,$e){var dr=_e.shared,gr=dr.context,Je=_e.scope();Object.keys($e).forEach(function(Qe){se.save(gr,"."+Qe);var ir=$e[Qe],we=ir.append(_e,se);Array.isArray(we)?Je(gr,".",Qe,"=[",we.join(),"];"):Je(gr,".",Qe,"=",we,";")}),se(Je)}function sa(_e,se,$e,dr){var gr=_e.shared,Je=gr.gl,Qe=gr.framebuffer,ir;St&&(ir=se.def(gr.extensions,".webgl_draw_buffers"));var we=_e.constants,He=we.drawBuffer,be=we.backBuffer,lr;$e?lr=$e.append(_e,se):lr=se.def(Qe,".next"),dr||se("if(",lr,"!==",Qe,".cur){"),se("if(",lr,"){",Je,".bindFramebuffer(",dh,",",lr,".framebuffer);"),St&&se(ir,".drawBuffersWEBGL(",He,"[",lr,".colorAttachments.length]);"),se("}else{",Je,".bindFramebuffer(",dh,",null);"),St&&se(ir,".drawBuffersWEBGL(",be,");"),se("}",Qe,".cur=",lr,";"),dr||se("}")}function _a(_e,se,$e){var dr=_e.shared,gr=dr.gl,Je=_e.current,Qe=_e.next,ir=dr.current,we=dr.next,He=_e.cond(ir,".dirty");qt.forEach(function(be){var lr=Ne(be);if(!(lr in $e.state)){var mr,kr;if(lr in Qe){mr=Qe[lr],kr=Je[lr];var Ur=pn(Ot[lr].length,function(qr){return He.def(mr,"[",qr,"]")});He(_e.cond(Ur.map(function(qr,An){return qr+"!=="+kr+"["+An+"]"}).join("||")).then(gr,".",oe[lr],"(",Ur,");",Ur.map(function(qr,An){return kr+"["+An+"]="+qr}).join(";"),";"))}else{mr=He.def(we,".",lr);var Or=_e.cond(mr,"!==",ir,".",lr);He(Or),lr in fe?Or(_e.cond(mr).then(gr,".enable(",fe[lr],");").else(gr,".disable(",fe[lr],");"),ir,".",lr,"=",mr,";"):Or(gr,".",oe[lr],"(",mr,");",ir,".",lr,"=",mr,";")}}}),Object.keys($e.state).length===0&&He(ir,".dirty=false;"),se(He)}function za(_e,se,$e,dr){var gr=_e.shared,Je=_e.current,Qe=gr.current,ir=gr.gl;gh(Object.keys($e)).forEach(function(we){var He=$e[we];if(!(dr&&!dr(He))){var be=He.append(_e,se);if(fe[we]){var lr=fe[we];du(He)?be?se(ir,".enable(",lr,");"):se(ir,".disable(",lr,");"):se(_e.cond(be).then(ir,".enable(",lr,");").else(ir,".disable(",lr,");")),se(Qe,".",we,"=",be,";")}else if(Mi(be)){var mr=Je[we];se(ir,".",oe[we],"(",be,");",be.map(function(kr,Ur){return mr+"["+Ur+"]="+kr}).join(";"),";")}else se(ir,".",oe[we],"(",be,");",Qe,".",we,"=",be,";")}})}function Sa(_e,se){pt&&(_e.instancing=se.def(_e.shared.extensions,".angle_instanced_arrays"))}function ni(_e,se,$e,dr,gr){var Je=_e.shared,Qe=_e.stats,ir=Je.current,we=Je.timer,He=$e.profile;function be(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var lr,mr;function kr(Mn){lr=se.def(),Mn(lr,"=",be(),";"),typeof gr=="string"?Mn(Qe,".count+=",gr,";"):Mn(Qe,".count++;"),L&&(dr?(mr=se.def(),Mn(mr,"=",we,".getNumPendingQueries();")):Mn(we,".beginQuery(",Qe,");"))}function Ur(Mn){Mn(Qe,".cpuTime+=",be(),"-",lr,";"),L&&(dr?Mn(we,".pushScopeStats(",mr,",",we,".getNumPendingQueries(),",Qe,");"):Mn(we,".endQuery();"))}function Or(Mn){var jn=se.def(ir,".profile");se(ir,".profile=",Mn,";"),se.exit(ir,".profile=",jn,";")}var qr;if(He){if(du(He)){He.enable?(kr(se),Ur(se.exit),Or("true")):Or("false");return}qr=He.append(_e,se),Or(qr)}else qr=se.def(ir,".profile");var An=_e.block();kr(An),se("if(",qr,"){",An,"}");var qn=_e.block();Ur(qn),se.exit("if(",qr,"){",qn,"}")}function Wa(_e,se,$e,dr,gr){var Je=_e.shared;function Qe(we){switch(we){case Oc:case Dc:case Ou:return 2;case Vf:case jf:case Xf:return 3;case uf:case ff:case ds:return 4;default:return 1}}function ir(we,He,be){var lr=Je.gl,mr=se.def(we,".location"),kr=se.def(Je.attributes,"[",mr,"]"),Ur=be.state,Or=be.buffer,qr=[be.x,be.y,be.z,be.w],An=["buffer","normalized","offset","stride"];function qn(){se("if(!",kr,".buffer){",lr,".enableVertexAttribArray(",mr,");}");var jn=be.type,$n;if(be.size?$n=se.def(be.size,"||",He):$n=He,se("if(",kr,".type!==",jn,"||",kr,".size!==",$n,"||",An.map(function(da){return kr+"."+da+"!=="+be[da]}).join("||"),"){",lr,".bindBuffer(",Pu,",",Or,".buffer);",lr,".vertexAttribPointer(",[mr,$n,jn,be.normalized,be.stride,be.offset],");",kr,".type=",jn,";",kr,".size=",$n,";",An.map(function(da){return kr+"."+da+"="+be[da]+";"}).join(""),"}"),pt){var Ci=be.divisor;se("if(",kr,".divisor!==",Ci,"){",_e.instancing,".vertexAttribDivisorANGLE(",[mr,Ci],");",kr,".divisor=",Ci,";}")}}function Mn(){se("if(",kr,".buffer){",lr,".disableVertexAttribArray(",mr,");",kr,".buffer=null;","}if(",Qu.map(function(jn,$n){return kr+"."+jn+"!=="+qr[$n]}).join("||"),"){",lr,".vertexAttrib4f(",mr,",",qr,");",Qu.map(function(jn,$n){return kr+"."+jn+"="+qr[$n]+";"}).join(""),"}")}Ur===Ju?qn():Ur===vl?Mn():(se("if(",Ur,"===",Ju,"){"),qn(),se("}else{"),Mn(),se("}"))}dr.forEach(function(we){var He=we.name,be=$e.attributes[He],lr;if(be){if(!gr(be))return;lr=be.append(_e,se)}else{if(!gr(Nc))return;var mr=_e.scopeAttrib(He);ft.optional(function(){_e.assert(se,mr+".state","missing attribute "+He)}),lr={},Object.keys(new tt).forEach(function(kr){lr[kr]=se.def(mr,".",kr)})}ir(_e.link(we),Qe(we.info.type),lr)})}function Ii(_e,se,$e,dr,gr){for(var Je=_e.shared,Qe=Je.gl,ir,we=0;we<dr.length;++we){var He=dr[we],be=He.name,lr=He.info.type,mr=$e.uniforms[be],kr=_e.link(He),Ur=kr+".location",Or;if(mr){if(!gr(mr))continue;if(du(mr)){var qr=mr.value;if(ft.command(qr!==null&&typeof qr!="undefined",'missing uniform "'+be+'"',_e.commandStr),lr===Hf||lr===$i){ft.command(typeof qr=="function"&&(lr===Hf&&(qr._reglType==="texture2d"||qr._reglType==="framebuffer")||lr===$i&&(qr._reglType==="textureCube"||qr._reglType==="framebufferCube")),"invalid texture for uniform "+be,_e.commandStr);var An=_e.link(qr._texture||qr.color[0]._texture);se(Qe,".uniform1i(",Ur,",",An+".bind());"),se.exit(An,".unbind();")}else if(lr===Yf||lr===Jo||lr===cf){ft.optional(function(){ft.command(Mi(qr),"invalid matrix for uniform "+be,_e.commandStr),ft.command(lr===Yf&&qr.length===4||lr===Jo&&qr.length===9||lr===cf&&qr.length===16,"invalid length for matrix uniform "+be,_e.commandStr)});var qn=_e.global.def("new Float32Array(["+Array.prototype.slice.call(qr)+"])"),Mn=2;lr===Jo?Mn=3:lr===cf&&(Mn=4),se(Qe,".uniformMatrix",Mn,"fv(",Ur,",false,",qn,");")}else{switch(lr){case Ps:ft.commandType(qr,"number","uniform "+be,_e.commandStr),ir="1f";break;case Oc:ft.command(Mi(qr)&&qr.length===2,"uniform "+be,_e.commandStr),ir="2f";break;case Vf:ft.command(Mi(qr)&&qr.length===3,"uniform "+be,_e.commandStr),ir="3f";break;case uf:ft.command(Mi(qr)&&qr.length===4,"uniform "+be,_e.commandStr),ir="4f";break;case _l:ft.commandType(qr,"boolean","uniform "+be,_e.commandStr),ir="1i";break;case wl:ft.commandType(qr,"number","uniform "+be,_e.commandStr),ir="1i";break;case Ou:ft.command(Mi(qr)&&qr.length===2,"uniform "+be,_e.commandStr),ir="2i";break;case Dc:ft.command(Mi(qr)&&qr.length===2,"uniform "+be,_e.commandStr),ir="2i";break;case Xf:ft.command(Mi(qr)&&qr.length===3,"uniform "+be,_e.commandStr),ir="3i";break;case jf:ft.command(Mi(qr)&&qr.length===3,"uniform "+be,_e.commandStr),ir="3i";break;case ds:ft.command(Mi(qr)&&qr.length===4,"uniform "+be,_e.commandStr),ir="4i";break;case ff:ft.command(Mi(qr)&&qr.length===4,"uniform "+be,_e.commandStr),ir="4i";break}se(Qe,".uniform",ir,"(",Ur,",",Mi(qr)?Array.prototype.slice.call(qr):qr,");")}continue}else Or=mr.append(_e,se)}else{if(!gr(Nc))continue;Or=se.def(Je.uniforms,"[",ce.id(be),"]")}lr===Hf?(ft(!Array.isArray(Or),"must specify a scalar prop for textures"),se("if(",Or,"&&",Or,'._reglType==="framebuffer"){',Or,"=",Or,".color[0];","}")):lr===$i&&(ft(!Array.isArray(Or),"must specify a scalar prop for cube maps"),se("if(",Or,"&&",Or,'._reglType==="framebufferCube"){',Or,"=",Or,".color[0];","}")),ft.optional(function(){function Fo(vo,Hh){_e.assert(se,vo,'bad data or missing for uniform "'+be+'".  '+Hh)}function Jf(vo){ft(!Array.isArray(Or),"must not specify an array type for uniform"),Fo("typeof "+Or+'==="'+vo+'"',"invalid type, expected "+vo)}function Uo(vo,Hh){Array.isArray(Or)?ft(Or.length===vo,"must have length "+vo):Fo(Je.isArrayLike+"("+Or+")&&"+Or+".length==="+vo,"invalid vector, should have length "+vo,_e.commandStr)}function mh(vo){ft(!Array.isArray(Or),"must not specify a value type"),Fo("typeof "+Or+'==="function"&&'+Or+'._reglType==="texture'+(vo===cs?"2d":"Cube")+'"',"invalid texture type",_e.commandStr)}switch(lr){case wl:Jf("number");break;case Dc:Uo(2,"number");break;case jf:Uo(3,"number");break;case ff:Uo(4,"number");break;case Ps:Jf("number");break;case Oc:Uo(2,"number");break;case Vf:Uo(3,"number");break;case uf:Uo(4,"number");break;case _l:Jf("boolean");break;case Ou:Uo(2,"boolean");break;case Xf:Uo(3,"boolean");break;case ds:Uo(4,"boolean");break;case Yf:Uo(4,"number");break;case Jo:Uo(9,"number");break;case cf:Uo(16,"number");break;case Hf:mh(cs);break;case $i:mh(Ro);break}});var jn=1;switch(lr){case Hf:case $i:var $n=se.def(Or,"._texture");se(Qe,".uniform1i(",Ur,",",$n,".bind());"),se.exit($n,".unbind();");continue;case wl:case _l:ir="1i";break;case Dc:case Ou:ir="2i",jn=2;break;case jf:case Xf:ir="3i",jn=3;break;case ff:case ds:ir="4i",jn=4;break;case Ps:ir="1f";break;case Oc:ir="2f",jn=2;break;case Vf:ir="3f",jn=3;break;case uf:ir="4f",jn=4;break;case Yf:ir="Matrix2fv";break;case Jo:ir="Matrix3fv";break;case cf:ir="Matrix4fv";break}if(se(Qe,".uniform",ir,"(",Ur,","),ir.charAt(0)==="M"){var Ci=Math.pow(lr-Yf+2,2),da=_e.global.def("new Float32Array(",Ci,")");Array.isArray(Or)?se("false,(",pn(Ci,function(Fo){return da+"["+Fo+"]="+Or[Fo]}),",",da,")"):se("false,(Array.isArray(",Or,")||",Or," instanceof Float32Array)?",Or,":(",pn(Ci,function(Fo){return da+"["+Fo+"]="+Or+"["+Fo+"]"}),",",da,")")}else jn>1?se(pn(jn,function(Fo){return Array.isArray(Or)?Or[Fo]:Or+"["+Fo+"]"})):(ft(!Array.isArray(Or),"uniform value must not be an array"),se(Or));se(");")}}function Vn(_e,se,$e,dr){var gr=_e.shared,Je=gr.gl,Qe=gr.draw,ir=dr.draw;function we(){var $n=ir.elements,Ci,da=se;return $n?(($n.contextDep&&dr.contextDynamic||$n.propDep)&&(da=$e),Ci=$n.append(_e,da)):Ci=da.def(Qe,".",As),Ci&&da("if("+Ci+")"+Je+".bindBuffer("+uh+","+Ci+".buffer.buffer);"),Ci}function He(){var $n=ir.count,Ci,da=se;return $n?(($n.contextDep&&dr.contextDynamic||$n.propDep)&&(da=$e),Ci=$n.append(_e,da),ft.optional(function(){$n.MISSING&&_e.assert(se,"false","missing vertex count"),$n.DYNAMIC&&_e.assert(da,Ci+">=0","missing vertex count")})):(Ci=da.def(Qe,".",Ts),ft.optional(function(){_e.assert(da,Ci+">=0","missing vertex count")})),Ci}var be=we();function lr($n){var Ci=ir[$n];return Ci?Ci.contextDep&&dr.contextDynamic||Ci.propDep?Ci.append(_e,$e):Ci.append(_e,se):se.def(Qe,".",$n)}var mr=lr(lu),kr=lr(Au),Ur=He();if(typeof Ur=="number"){if(Ur===0)return}else $e("if(",Ur,"){"),$e.exit("}");var Or,qr;pt&&(Or=lr(zf),qr=_e.instancing);var An=be+".type",qn=ir.elements&&du(ir.elements);function Mn(){function $n(){$e(qr,".drawElementsInstancedANGLE(",[mr,Ur,An,kr+"<<(("+An+"-"+ah+")>>1)",Or],");")}function Ci(){$e(qr,".drawArraysInstancedANGLE(",[mr,kr,Ur,Or],");")}be?qn?$n():($e("if(",be,"){"),$n(),$e("}else{"),Ci(),$e("}")):Ci()}function jn(){function $n(){$e(Je+".drawElements("+[mr,Ur,An,kr+"<<(("+An+"-"+ah+")>>1)"]+");")}function Ci(){$e(Je+".drawArrays("+[mr,kr,Ur]+");")}be?qn?$n():($e("if(",be,"){"),$n(),$e("}else{"),Ci(),$e("}")):Ci()}pt&&(typeof Or!="number"||Or>=0)?typeof Or=="string"?($e("if(",Or,">0){"),Mn(),$e("}else if(",Or,"<0){"),jn(),$e("}")):Mn():jn()}function ci(_e,se,$e,dr,gr){var Je=Xr(),Qe=Je.proc("body",gr);return ft.optional(function(){Je.commandStr=se.commandStr,Je.command=Je.link(se.commandStr)}),pt&&(Je.instancing=Qe.def(Je.shared.extensions,".angle_instanced_arrays")),_e(Je,Qe,$e,dr),Je.compile().body}function yi(_e,se,$e,dr){Sa(_e,se),$e.useVAO?$e.drawVAO?se(_e.shared.vao,".setVAO(",$e.drawVAO.append(_e,se),");"):se(_e.shared.vao,".setVAO(",_e.shared.vao,".targetVAO);"):(se(_e.shared.vao,".setVAO(null);"),Wa(_e,se,$e,dr.attributes,function(){return!0})),Ii(_e,se,$e,dr.uniforms,function(){return!0}),Vn(_e,se,se,$e)}function ha(_e,se){var $e=_e.proc("draw",1);Sa(_e,$e),Qi(_e,$e,se.context),sa(_e,$e,se.framebuffer),_a(_e,$e,se),za(_e,$e,se.state),ni(_e,$e,se,!1,!0);var dr=se.shader.progVar.append(_e,$e);if($e(_e.shared.gl,".useProgram(",dr,".program);"),se.shader.program)yi(_e,$e,se,se.shader.program);else{$e(_e.shared.vao,".setVAO(null);");var gr=_e.global.def("{}"),Je=$e.def(dr,".id"),Qe=$e.def(gr,"[",Je,"]");$e(_e.cond(Qe).then(Qe,".call(this,a0);").else(Qe,"=",gr,"[",Je,"]=",_e.link(function(ir){return ci(yi,_e,se,ir,1)}),"(",dr,");",Qe,".call(this,a0);"))}Object.keys(se.state).length>0&&$e(_e.shared.current,".dirty=true;")}function vu(_e,se,$e,dr){_e.batchId="a1",Sa(_e,se);function gr(){return!0}Wa(_e,se,$e,dr.attributes,gr),Ii(_e,se,$e,dr.uniforms,gr),Vn(_e,se,se,$e)}function Qf(_e,se,$e,dr){Sa(_e,se);var gr=$e.contextDep,Je=se.def(),Qe="a0",ir="a1",we=se.def();_e.shared.props=we,_e.batchId=Je;var He=_e.scope(),be=_e.scope();se(He.entry,"for(",Je,"=0;",Je,"<",ir,";++",Je,"){",we,"=",Qe,"[",Je,"];",be,"}",He.exit);function lr(An){return An.contextDep&&gr||An.propDep}function mr(An){return!lr(An)}if($e.needsContext&&Qi(_e,be,$e.context),$e.needsFramebuffer&&sa(_e,be,$e.framebuffer),za(_e,be,$e.state,lr),$e.profile&&lr($e.profile)&&ni(_e,be,$e,!1,!0),dr)$e.useVAO?$e.drawVAO?lr($e.drawVAO)?be(_e.shared.vao,".setVAO(",$e.drawVAO.append(_e,be),");"):He(_e.shared.vao,".setVAO(",$e.drawVAO.append(_e,He),");"):He(_e.shared.vao,".setVAO(",_e.shared.vao,".targetVAO);"):(He(_e.shared.vao,".setVAO(null);"),Wa(_e,He,$e,dr.attributes,mr),Wa(_e,be,$e,dr.attributes,lr)),Ii(_e,He,$e,dr.uniforms,mr),Ii(_e,be,$e,dr.uniforms,lr),Vn(_e,He,be,$e);else{var kr=_e.global.def("{}"),Ur=$e.shader.progVar.append(_e,be),Or=be.def(Ur,".id"),qr=be.def(kr,"[",Or,"]");be(_e.shared.gl,".useProgram(",Ur,".program);","if(!",qr,"){",qr,"=",kr,"[",Or,"]=",_e.link(function(An){return ci(vu,_e,$e,An,2)}),"(",Ur,");}",qr,".call(this,a0[",Je,"],",Je,");")}}function ke(_e,se){var $e=_e.proc("batch",2);_e.batchId="0",Sa(_e,$e);var dr=!1,gr=!0;Object.keys(se.context).forEach(function(kr){dr=dr||se.context[kr].propDep}),dr||(Qi(_e,$e,se.context),gr=!1);var Je=se.framebuffer,Qe=!1;Je?(Je.propDep?dr=Qe=!0:Je.contextDep&&dr&&(Qe=!0),Qe||sa(_e,$e,Je)):sa(_e,$e,null),se.state.viewport&&se.state.viewport.propDep&&(dr=!0);function ir(kr){return kr.contextDep&&dr||kr.propDep}_a(_e,$e,se),za(_e,$e,se.state,function(kr){return!ir(kr)}),(!se.profile||!ir(se.profile))&&ni(_e,$e,se,!1,"a1"),se.contextDep=dr,se.needsContext=gr,se.needsFramebuffer=Qe;var we=se.shader.progVar;if(we.contextDep&&dr||we.propDep)Qf(_e,$e,se,null);else{var He=we.append(_e,$e);if($e(_e.shared.gl,".useProgram(",He,".program);"),se.shader.program)Qf(_e,$e,se,se.shader.program);else{$e(_e.shared.vao,".setVAO(null);");var be=_e.global.def("{}"),lr=$e.def(He,".id"),mr=$e.def(be,"[",lr,"]");$e(_e.cond(mr).then(mr,".call(this,a0,a1);").else(mr,"=",be,"[",lr,"]=",_e.link(function(kr){return ci(Qf,_e,se,kr,2)}),"(",He,");",mr,".call(this,a0,a1);"))}}Object.keys(se.state).length>0&&$e(_e.shared.current,".dirty=true;")}function _r(_e,se){var $e=_e.proc("scope",3);_e.batchId="a2";var dr=_e.shared,gr=dr.current;Qi(_e,$e,se.context),se.framebuffer&&se.framebuffer.append(_e,$e),gh(Object.keys(se.state)).forEach(function(Qe){var ir=se.state[Qe],we=ir.append(_e,$e);Mi(we)?we.forEach(function(He,be){$e.set(_e.next[Qe],"["+be+"]",He)}):$e.set(dr.next,"."+Qe,we)}),ni(_e,$e,se,!0,!0),[As,Au,Ts,zf,lu].forEach(function(Qe){var ir=se.draw[Qe];ir&&$e.set(dr.draw,"."+Qe,""+ir.append(_e,$e))}),Object.keys(se.uniforms).forEach(function(Qe){var ir=se.uniforms[Qe].append(_e,$e);Array.isArray(ir)&&(ir="["+ir.join()+"]"),$e.set(dr.uniforms,"["+ce.id(Qe)+"]",ir)}),Object.keys(se.attributes).forEach(function(Qe){var ir=se.attributes[Qe].append(_e,$e),we=_e.scopeAttrib(Qe);Object.keys(new tt).forEach(function(He){$e.set(we,"."+He,ir[He])})}),se.scopeVAO&&$e.set(dr.vao,".targetVAO",se.scopeVAO.append(_e,$e));function Je(Qe){var ir=se.shader[Qe];ir&&$e.set(dr.shader,"."+Qe,ir.append(_e,$e))}Je(Cs),Je(cu),Object.keys(se.state).length>0&&($e(gr,".dirty=true;"),$e.exit(gr,".dirty=true;")),$e("a1(",_e.shared.context,",a0,",_e.batchId,");")}function xr(_e){if(!(typeof _e!="object"||Mi(_e))){for(var se=Object.keys(_e),$e=0;$e<se.length;++$e)if(or.isDynamic(_e[se[$e]]))return!0;return!1}}function En(_e,se,$e){var dr=se.static[$e];if(!dr||!xr(dr))return;var gr=_e.global,Je=Object.keys(dr),Qe=!1,ir=!1,we=!1,He=_e.global.def("{}");Je.forEach(function(lr){var mr=dr[lr];if(or.isDynamic(mr)){typeof mr=="function"&&(mr=dr[lr]=or.unbox(mr));var kr=no(mr,null);Qe=Qe||kr.thisDep,we=we||kr.propDep,ir=ir||kr.contextDep}else{switch(gr(He,".",lr,"="),typeof mr){case"number":gr(mr);break;case"string":gr('"',mr,'"');break;case"object":Array.isArray(mr)&&gr("[",mr.join(),"]");break;default:gr(_e.link(mr));break}gr(";")}});function be(lr,mr){Je.forEach(function(kr){var Ur=dr[kr];if(or.isDynamic(Ur)){var Or=lr.invoke(mr,Ur);mr(He,".",kr,"=",Or,";")}})}se.dynamic[$e]=new or.DynamicVariable(mc,{thisDep:Qe,contextDep:ir,propDep:we,ref:He,append:be}),delete se.static[$e]}function si(_e,se,$e,dr,gr){var Je=Xr();Je.stats=Je.link(gr),Object.keys(se.static).forEach(function(ir){En(Je,se,ir)}),Ic.forEach(function(ir){En(Je,_e,ir)});var Qe=ui(_e,se,$e,dr,Je);return ha(Je,Qe),_r(Je,Qe),ke(Je,Qe),S(Je.compile(),{destroy:function(){Qe.shader.program.destroy()}})}return{next:Ut,current:Ot,procs:function(){var _e=Xr(),se=_e.proc("poll"),$e=_e.proc("refresh"),dr=_e.block();se(dr),$e(dr);var gr=_e.shared,Je=gr.gl,Qe=gr.next,ir=gr.current;dr(ir,".dirty=false;"),sa(_e,se),sa(_e,$e,null,!0);var we;pt&&(we=_e.link(pt)),ze.oes_vertex_array_object&&$e(_e.link(ze.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var He=0;He<wr.maxAttributes;++He){var be=$e.def(gr.attributes,"[",He,"]"),lr=_e.cond(be,".buffer");lr.then(Je,".enableVertexAttribArray(",He,");",Je,".bindBuffer(",Pu,",",be,".buffer.buffer);",Je,".vertexAttribPointer(",He,",",be,".size,",be,".type,",be,".normalized,",be,".stride,",be,".offset);").else(Je,".disableVertexAttribArray(",He,");",Je,".vertexAttrib4f(",He,",",be,".x,",be,".y,",be,".z,",be,".w);",be,".buffer=null;"),$e(lr),pt&&$e(we,".vertexAttribDivisorANGLE(",He,",",be,".divisor);")}return $e(_e.shared.vao,".currentVAO=null;",_e.shared.vao,".setVAO(",_e.shared.vao,".targetVAO);"),Object.keys(fe).forEach(function(mr){var kr=fe[mr],Ur=dr.def(Qe,".",mr),Or=_e.block();Or("if(",Ur,"){",Je,".enable(",kr,")}else{",Je,".disable(",kr,")}",ir,".",mr,"=",Ur,";"),$e(Or),se("if(",Ur,"!==",ir,".",mr,"){",Or,"}")}),Object.keys(oe).forEach(function(mr){var kr=oe[mr],Ur=Ot[mr],Or,qr,An=_e.block();if(An(Je,".",kr,"("),Mi(Ur)){var qn=Ur.length;Or=_e.global.def(Qe,".",mr),qr=_e.global.def(ir,".",mr),An(pn(qn,function(Mn){return Or+"["+Mn+"]"}),");",pn(qn,function(Mn){return qr+"["+Mn+"]="+Or+"["+Mn+"];"}).join("")),se("if(",pn(qn,function(Mn){return Or+"["+Mn+"]!=="+qr+"["+Mn+"]"}).join("||"),"){",An,"}")}else Or=dr.def(Qe,".",mr),qr=dr.def(ir,".",mr),An(Or,");",ir,".",mr,"=",Or,";"),se("if(",Or,"!==",qr,"){",An,"}");$e(An)}),_e.compile()}(),compile:si}}function Cl(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Yh=34918,yh=34919,Lc=35007,Al=function(Ct,ce){if(!ce.ext_disjoint_timer_query)return null;var ze=[];function wr(){return ze.pop()||ce.ext_disjoint_timer_query.createQueryEXT()}function Rr(pt){ze.push(pt)}var br=[];function Ar(pt){var St=wr();ce.ext_disjoint_timer_query.beginQueryEXT(Lc,St),br.push(St),L(br.length-1,br.length,pt)}function jr(){ce.ext_disjoint_timer_query.endQueryEXT(Lc)}function Hr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Kr=[];function Vr(){return Kr.pop()||new Hr}function Qr(pt){Kr.push(pt)}var d=[];function L(pt,St,Ot){var Ut=Vr();Ut.startQueryIndex=pt,Ut.endQueryIndex=St,Ut.sum=0,Ut.stats=Ot,d.push(Ut)}var j=[],tt=[];function lt(){var pt,St,Ot=br.length;if(Ot!==0){tt.length=Math.max(tt.length,Ot+1),j.length=Math.max(j.length,Ot+1),j[0]=0,tt[0]=0;var Ut=0;for(pt=0,St=0;St<br.length;++St){var qt=br[St];ce.ext_disjoint_timer_query.getQueryObjectEXT(qt,yh)?(Ut+=ce.ext_disjoint_timer_query.getQueryObjectEXT(qt,Yh),Rr(qt)):br[pt++]=qt,j[St+1]=Ut,tt[St+1]=pt}for(br.length=pt,pt=0,St=0;St<d.length;++St){var fe=d[St],oe=fe.startQueryIndex,Ne=fe.endQueryIndex;fe.sum+=j[Ne]-j[oe];var rr=tt[oe],Pr=tt[Ne];Pr===rr?(fe.stats.gpuTime+=fe.sum/1e6,Qr(fe)):(fe.startQueryIndex=rr,fe.endQueryIndex=Pr,d[pt++]=fe)}d.length=pt}}return{beginQuery:Ar,endQuery:jr,pushScopeStats:L,update:lt,getNumPendingQueries:function(){return br.length},clear:function(){ze.push.apply(ze,br);for(var pt=0;pt<ze.length;pt++)ce.ext_disjoint_timer_query.deleteQueryEXT(ze[pt]);br.length=0,ze.length=0},restore:function(){br.length=0,ze.length=0}}},Tl=16384,Os=256,Il=1024,lf=34962,kc="webglcontextlost",Ru="webglcontextrestored",$f=1,io=2,js=3;function Xs(Ct,ce){for(var ze=0;ze<Ct.length;++ze)if(Ct[ze]===ce)return ze;return-1}function Rc(Ct){var ce=vn(Ct);if(!ce)return null;var ze=ce.gl,wr=ze.getContextAttributes(),Rr=ze.isContextLost(),br=ln(ze,ce);if(!br)return null;var Ar=Cr(),jr=Cl(),Hr=br.extensions,Kr=Al(ze,Hr),Vr=yr(),Qr=ze.drawingBufferWidth,d=ze.drawingBufferHeight,L={tick:0,time:0,viewportWidth:Qr,viewportHeight:d,framebufferWidth:Qr,framebufferHeight:d,drawingBufferWidth:Qr,drawingBufferHeight:d,pixelRatio:ce.pixelRatio},j={},tt={elements:null,primitive:4,count:-1,offset:0,instances:-1},lt=yo(ze,Hr),pt=ys(ze,jr,ce,Ot),St=Gh(ze,Hr,lt,jr,pt);function Ot(Vn){return St.destroyBuffer(Vn)}var Ut=Xo(ze,Hr,pt,jr),qt=dl(ze,Ar,jr,ce),fe=Nh(ze,Hr,lt,function(){rr.procs.poll()},L,jr,ce),oe=fc(ze,Hr,lt,jr,ce),Ne=hl(ze,Hr,lt,fe,oe,jr),rr=Xh(ze,Ar,Hr,lt,pt,Ut,fe,Ne,j,St,qt,tt,L,Kr,ce),Pr=$u(ze,Ne,rr.procs.poll,L,wr,Hr,lt),ur=rr.next,hr=ze.canvas,fr=[],Xr=[],fn=[],tn=[ce.onDestroy],Tn=null;function wn(){if(fr.length===0){Kr&&Kr.update(),Tn=null;return}Tn=Ae.next(wn),za();for(var Vn=fr.length-1;Vn>=0;--Vn){var ci=fr[Vn];ci&&ci(L,null,0)}ze.flush(),Kr&&Kr.update()}function Rn(){!Tn&&fr.length>0&&(Tn=Ae.next(wn))}function Kn(){Tn&&(Ae.cancel(wn),Tn=null)}function Fn(Vn){Vn.preventDefault(),Rr=!0,Kn(),Xr.forEach(function(ci){ci()})}function Vi(Vn){ze.getError(),Rr=!1,br.restore(),qt.restore(),pt.restore(),fe.restore(),oe.restore(),Ne.restore(),St.restore(),Kr&&Kr.restore(),rr.procs.refresh(),Rn(),fn.forEach(function(ci){ci()})}hr&&(hr.addEventListener(kc,Fn,!1),hr.addEventListener(Ru,Vi,!1));function Qn(){fr.length=0,Kn(),hr&&(hr.removeEventListener(kc,Fn),hr.removeEventListener(Ru,Vi)),qt.clear(),Ne.clear(),oe.clear(),fe.clear(),Ut.clear(),pt.clear(),St.clear(),Kr&&Kr.clear(),tn.forEach(function(Vn){Vn()})}function oa(Vn){ft(!!Vn,"invalid args to regl({...})"),ft.type(Vn,"object","invalid args to regl({...})");function ci(gr){var Je=S({},gr);delete Je.uniforms,delete Je.attributes,delete Je.context,delete Je.vao,"stencil"in Je&&Je.stencil.op&&(Je.stencil.opBack=Je.stencil.opFront=Je.stencil.op,delete Je.stencil.op);function Qe(ir){if(ir in Je){var we=Je[ir];delete Je[ir],Object.keys(we).forEach(function(He){Je[ir+"."+He]=we[He]})}}return Qe("blend"),Qe("depth"),Qe("cull"),Qe("stencil"),Qe("polygonOffset"),Qe("scissor"),Qe("sample"),"vao"in gr&&(Je.vao=gr.vao),Je}function yi(gr,Je){var Qe={},ir={};return Object.keys(gr).forEach(function(we){var He=gr[we];if(or.isDynamic(He)){ir[we]=or.unbox(He,we);return}else if(Je&&Array.isArray(He)){for(var be=0;be<He.length;++be)if(or.isDynamic(He[be])){ir[we]=or.unbox(He,we);return}}Qe[we]=He}),{dynamic:ir,static:Qe}}var ha=yi(Vn.context||{},!0),vu=yi(Vn.uniforms||{},!0),Qf=yi(Vn.attributes||{},!1),ke=yi(ci(Vn),!1),_r={gpuTime:0,cpuTime:0,count:0},xr=rr.compile(ke,Qf,vu,ha,_r),En=xr.draw,si=xr.batch,_e=xr.scope,se=[];function $e(gr){for(;se.length<gr;)se.push(null);return se}function dr(gr,Je){var Qe;if(Rr&&ft.raise("context lost"),typeof gr=="function")return _e.call(this,null,gr,0);if(typeof Je=="function")if(typeof gr=="number")for(Qe=0;Qe<gr;++Qe)_e.call(this,null,Je,Qe);else if(Array.isArray(gr))for(Qe=0;Qe<gr.length;++Qe)_e.call(this,gr[Qe],Je,Qe);else return _e.call(this,gr,Je,0);else if(typeof gr=="number"){if(gr>0)return si.call(this,$e(gr|0),gr|0)}else if(Array.isArray(gr)){if(gr.length)return si.call(this,gr,gr.length)}else return En.call(this,gr)}return S(dr,{stats:_r,destroy:function(){xr.destroy()}})}var Di=Ne.setFBO=oa({framebuffer:or.define.call(null,$f,"framebuffer")});function ui(Vn,ci){var yi=0;rr.procs.poll();var ha=ci.color;ha&&(ze.clearColor(+ha[0]||0,+ha[1]||0,+ha[2]||0,+ha[3]||0),yi|=Tl),"depth"in ci&&(ze.clearDepth(+ci.depth),yi|=Os),"stencil"in ci&&(ze.clearStencil(ci.stencil|0),yi|=Il),ft(!!yi,"called regl.clear with no buffer specified"),ze.clear(yi)}function Qi(Vn){if(ft(typeof Vn=="object"&&Vn,"regl.clear() takes an object as input"),"framebuffer"in Vn)if(Vn.framebuffer&&Vn.framebuffer_reglType==="framebufferCube")for(var ci=0;ci<6;++ci)Di(S({framebuffer:Vn.framebuffer.faces[ci]},Vn),ui);else Di(Vn,ui);else ui(null,Vn)}function sa(Vn){ft.type(Vn,"function","regl.frame() callback must be a function"),fr.push(Vn);function ci(){var yi=Xs(fr,Vn);ft(yi>=0,"cannot cancel a frame twice");function ha(){var vu=Xs(fr,ha);fr[vu]=fr[fr.length-1],fr.length-=1,fr.length<=0&&Kn()}fr[yi]=ha}return Rn(),{cancel:ci}}function _a(){var Vn=ur.viewport,ci=ur.scissor_box;Vn[0]=Vn[1]=ci[0]=ci[1]=0,L.viewportWidth=L.framebufferWidth=L.drawingBufferWidth=Vn[2]=ci[2]=ze.drawingBufferWidth,L.viewportHeight=L.framebufferHeight=L.drawingBufferHeight=Vn[3]=ci[3]=ze.drawingBufferHeight}function za(){L.tick+=1,L.time=ni(),_a(),rr.procs.poll()}function Sa(){fe.refresh(),_a(),rr.procs.refresh(),Kr&&Kr.update()}function ni(){return(yr()-Vr)/1e3}Sa();function Wa(Vn,ci){ft.type(ci,"function","listener callback must be a function");var yi;switch(Vn){case"frame":return sa(ci);case"lost":yi=Xr;break;case"restore":yi=fn;break;case"destroy":yi=tn;break;default:ft.raise("invalid event, must be one of frame,lost,restore,destroy")}return yi.push(ci),{cancel:function(){for(var ha=0;ha<yi.length;++ha)if(yi[ha]===ci){yi[ha]=yi[yi.length-1],yi.pop();return}}}}var Ii=S(oa,{clear:Qi,prop:or.define.bind(null,$f),context:or.define.bind(null,io),this:or.define.bind(null,js),draw:oa({}),buffer:function(Vn){return pt.create(Vn,lf,!1,!1)},elements:function(Vn){return Ut.create(Vn,!1)},texture:fe.create2D,cube:fe.createCube,renderbuffer:oe.create,framebuffer:Ne.create,framebufferCube:Ne.createCube,vao:St.createVAO,attributes:wr,frame:sa,on:Wa,limits:lt,hasExtension:function(Vn){return lt.extensions.indexOf(Vn.toLowerCase())>=0},read:Pr,destroy:Qn,_gl:ze,_refresh:Sa,poll:function(){za(),Kr&&Kr.update()},now:ni,stats:jr});return ce.onDone(null,Ii),Ii}return Rc})},5458:function(ae,w,S){"use strict";var x=S(89161),z=Array.prototype.concat,k=Array.prototype.slice,E=ae.exports=function(T){for(var m=[],y=0,v=T.length;y<v;y++){var p=T[y];x(p)?m=z.call(m,k.call(p)):m.push(p)}return m};E.wrap=function(N){return function(){return N(E(arguments))}}},79590:function(ae,w,S){var x;(function(z){var k=/^\s+/,E=/\s+$/,N=0,T=z.round,m=z.min,y=z.max,v=z.random;function p(dt,bt){if(dt=dt||"",bt=bt||{},dt instanceof p)return dt;if(!(this instanceof p))return new p(dt,bt);var wt=g(dt);this._originalInput=dt,this._r=wt.r,this._g=wt.g,this._b=wt.b,this._a=wt.a,this._roundA=T(100*this._a)/100,this._format=bt.format||wt.format,this._gradientType=bt.gradientType,this._r<1&&(this._r=T(this._r)),this._g<1&&(this._g=T(this._g)),this._b<1&&(this._b=T(this._b)),this._ok=wt.ok,this._tc_id=N++}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var dt=this.toRgb();return(dt.r*299+dt.g*587+dt.b*114)/1e3},getLuminance:function(){var dt=this.toRgb(),bt,wt,D,rt,Nt,ft;return bt=dt.r/255,wt=dt.g/255,D=dt.b/255,bt<=.03928?rt=bt/12.92:rt=z.pow((bt+.055)/1.055,2.4),wt<=.03928?Nt=wt/12.92:Nt=z.pow((wt+.055)/1.055,2.4),D<=.03928?ft=D/12.92:ft=z.pow((D+.055)/1.055,2.4),.2126*rt+.7152*Nt+.0722*ft},setAlpha:function(dt){return this._a=Vt(dt),this._roundA=T(100*this._a)/100,this},toHsv:function(){var dt=O(this._r,this._g,this._b);return{h:dt.h*360,s:dt.s,v:dt.v,a:this._a}},toHsvString:function(){var dt=O(this._r,this._g,this._b),bt=T(dt.h*360),wt=T(dt.s*100),D=T(dt.v*100);return this._a==1?"hsv("+bt+", "+wt+"%, "+D+"%)":"hsva("+bt+", "+wt+"%, "+D+"%, "+this._roundA+")"},toHsl:function(){var dt=_(this._r,this._g,this._b);return{h:dt.h*360,s:dt.s,l:dt.l,a:this._a}},toHslString:function(){var dt=_(this._r,this._g,this._b),bt=T(dt.h*360),wt=T(dt.s*100),D=T(dt.l*100);return this._a==1?"hsl("+bt+", "+wt+"%, "+D+"%)":"hsla("+bt+", "+wt+"%, "+D+"%, "+this._roundA+")"},toHex:function(dt){return l(this._r,this._g,this._b,dt)},toHexString:function(dt){return"#"+this.toHex(dt)},toHex8:function(dt){return K(this._r,this._g,this._b,this._a,dt)},toHex8String:function(dt){return"#"+this.toHex8(dt)},toRgb:function(){return{r:T(this._r),g:T(this._g),b:T(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+T(this._r)+", "+T(this._g)+", "+T(this._b)+")":"rgba("+T(this._r)+", "+T(this._g)+", "+T(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:T(Ht(this._r,255)*100)+"%",g:T(Ht(this._g,255)*100)+"%",b:T(Ht(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+T(Ht(this._r,255)*100)+"%, "+T(Ht(this._g,255)*100)+"%, "+T(Ht(this._b,255)*100)+"%)":"rgba("+T(Ht(this._r,255)*100)+"%, "+T(Ht(this._g,255)*100)+"%, "+T(Ht(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Q[l(this._r,this._g,this._b,!0)]||!1},toFilter:function(dt){var bt="#"+Z(this._r,this._g,this._b,this._a),wt=bt,D=this._gradientType?"GradientType = 1, ":"";if(dt){var rt=p(dt);wt="#"+Z(rt._r,rt._g,rt._b,rt._a)}return"progid:DXImageTransform.Microsoft.gradient("+D+"startColorstr="+bt+",endColorstr="+wt+")"},toString:function(dt){var bt=!!dt;dt=dt||this._format;var wt=!1,D=this._a<1&&this._a>=0,rt=!bt&&D&&(dt==="hex"||dt==="hex6"||dt==="hex3"||dt==="hex4"||dt==="hex8"||dt==="name");return rt?dt==="name"&&this._a===0?this.toName():this.toRgbString():(dt==="rgb"&&(wt=this.toRgbString()),dt==="prgb"&&(wt=this.toPercentageRgbString()),(dt==="hex"||dt==="hex6")&&(wt=this.toHexString()),dt==="hex3"&&(wt=this.toHexString(!0)),dt==="hex4"&&(wt=this.toHex8String(!0)),dt==="hex8"&&(wt=this.toHex8String()),dt==="name"&&(wt=this.toName()),dt==="hsl"&&(wt=this.toHslString()),dt==="hsv"&&(wt=this.toHsvString()),wt||this.toHexString())},clone:function(){return p(this.toString())},_applyModification:function(dt,bt){var wt=dt.apply(null,[this].concat([].slice.call(bt)));return this._r=wt._r,this._g=wt._g,this._b=wt._b,this.setAlpha(wt._a),this},lighten:function(){return this._applyModification(et,arguments)},brighten:function(){return this._applyModification(at,arguments)},darken:function(){return this._applyModification(J,arguments)},desaturate:function(){return this._applyModification(X,arguments)},saturate:function(){return this._applyModification(W,arguments)},greyscale:function(){return this._applyModification(U,arguments)},spin:function(){return this._applyModification(nt,arguments)},_applyCombination:function(dt,bt){return dt.apply(null,[this].concat([].slice.call(bt)))},analogous:function(){return this._applyCombination(re,arguments)},complement:function(){return this._applyCombination(mt,arguments)},monochromatic:function(){return this._applyCombination(Rt,arguments)},splitcomplement:function(){return this._applyCombination(zt,arguments)},triad:function(){return this._applyCombination(Mt,arguments)},tetrad:function(){return this._applyCombination(vt,arguments)}},p.fromRatio=function(dt,bt){if(typeof dt=="object"){var wt={};for(var D in dt)dt.hasOwnProperty(D)&&(D==="a"?wt[D]=dt[D]:wt[D]=Pt(dt[D]));dt=wt}return p(dt,bt)};function g(dt){var bt={r:0,g:0,b:0},wt=1,D=null,rt=null,Nt=null,ft=!1,ie=!1;return typeof dt=="string"&&(dt=Zt(dt)),typeof dt=="object"&&(Tt(dt.r)&&Tt(dt.g)&&Tt(dt.b)?(bt=I(dt.r,dt.g,dt.b),ft=!0,ie=String(dt.r).substr(-1)==="%"?"prgb":"rgb"):Tt(dt.h)&&Tt(dt.s)&&Tt(dt.v)?(D=Pt(dt.s),rt=Pt(dt.v),bt=b(dt.h,D,rt),ft=!0,ie="hsv"):Tt(dt.h)&&Tt(dt.s)&&Tt(dt.l)&&(D=Pt(dt.s),Nt=Pt(dt.l),bt=C(dt.h,D,Nt),ft=!0,ie="hsl"),dt.hasOwnProperty("a")&&(wt=dt.a)),wt=Vt(wt),{ok:ft,format:dt.format||ie,r:m(255,y(bt.r,0)),g:m(255,y(bt.g,0)),b:m(255,y(bt.b,0)),a:wt}}function I(dt,bt,wt){return{r:Ht(dt,255)*255,g:Ht(bt,255)*255,b:Ht(wt,255)*255}}function _(dt,bt,wt){dt=Ht(dt,255),bt=Ht(bt,255),wt=Ht(wt,255);var D=y(dt,bt,wt),rt=m(dt,bt,wt),Nt,ft,ie=(D+rt)/2;if(D==rt)Nt=ft=0;else{var ge=D-rt;switch(ft=ie>.5?ge/(2-D-rt):ge/(D+rt),D){case dt:Nt=(bt-wt)/ge+(bt<wt?6:0);break;case bt:Nt=(wt-dt)/ge+2;break;case wt:Nt=(dt-bt)/ge+4;break}Nt/=6}return{h:Nt,s:ft,l:ie}}function C(dt,bt,wt){var D,rt,Nt;dt=Ht(dt,360),bt=Ht(bt,100),wt=Ht(wt,100);function ft(Ge,Re,qe){return qe<0&&(qe+=1),qe>1&&(qe-=1),qe<1/6?Ge+(Re-Ge)*6*qe:qe<1/2?Re:qe<2/3?Ge+(Re-Ge)*(2/3-qe)*6:Ge}if(bt===0)D=rt=Nt=wt;else{var ie=wt<.5?wt*(1+bt):wt+bt-wt*bt,ge=2*wt-ie;D=ft(ge,ie,dt+1/3),rt=ft(ge,ie,dt),Nt=ft(ge,ie,dt-1/3)}return{r:D*255,g:rt*255,b:Nt*255}}function O(dt,bt,wt){dt=Ht(dt,255),bt=Ht(bt,255),wt=Ht(wt,255);var D=y(dt,bt,wt),rt=m(dt,bt,wt),Nt,ft,ie=D,ge=D-rt;if(ft=D===0?0:ge/D,D==rt)Nt=0;else{switch(D){case dt:Nt=(bt-wt)/ge+(bt<wt?6:0);break;case bt:Nt=(wt-dt)/ge+2;break;case wt:Nt=(dt-bt)/ge+4;break}Nt/=6}return{h:Nt,s:ft,v:ie}}function b(dt,bt,wt){dt=Ht(dt,360)*6,bt=Ht(bt,100),wt=Ht(wt,100);var D=z.floor(dt),rt=dt-D,Nt=wt*(1-bt),ft=wt*(1-rt*bt),ie=wt*(1-(1-rt)*bt),ge=D%6,Ge=[wt,ft,Nt,Nt,ie,wt][ge],Re=[ie,wt,wt,ft,Nt,Nt][ge],qe=[Nt,Nt,ie,wt,wt,ft][ge];return{r:Ge*255,g:Re*255,b:qe*255}}function l(dt,bt,wt,D){var rt=[kt(T(dt).toString(16)),kt(T(bt).toString(16)),kt(T(wt).toString(16))];return D&&rt[0].charAt(0)==rt[0].charAt(1)&&rt[1].charAt(0)==rt[1].charAt(1)&&rt[2].charAt(0)==rt[2].charAt(1)?rt[0].charAt(0)+rt[1].charAt(0)+rt[2].charAt(0):rt.join("")}function K(dt,bt,wt,D,rt){var Nt=[kt(T(dt).toString(16)),kt(T(bt).toString(16)),kt(T(wt).toString(16)),kt(_t(D))];return rt&&Nt[0].charAt(0)==Nt[0].charAt(1)&&Nt[1].charAt(0)==Nt[1].charAt(1)&&Nt[2].charAt(0)==Nt[2].charAt(1)&&Nt[3].charAt(0)==Nt[3].charAt(1)?Nt[0].charAt(0)+Nt[1].charAt(0)+Nt[2].charAt(0)+Nt[3].charAt(0):Nt.join("")}function Z(dt,bt,wt,D){var rt=[kt(_t(D)),kt(T(dt).toString(16)),kt(T(bt).toString(16)),kt(T(wt).toString(16))];return rt.join("")}p.equals=function(dt,bt){return!dt||!bt?!1:p(dt).toRgbString()==p(bt).toRgbString()},p.random=function(){return p.fromRatio({r:v(),g:v(),b:v()})};function X(dt,bt){bt=bt===0?0:bt||10;var wt=p(dt).toHsl();return wt.s-=bt/100,wt.s=It(wt.s),p(wt)}function W(dt,bt){bt=bt===0?0:bt||10;var wt=p(dt).toHsl();return wt.s+=bt/100,wt.s=It(wt.s),p(wt)}function U(dt){return p(dt).desaturate(100)}function et(dt,bt){bt=bt===0?0:bt||10;var wt=p(dt).toHsl();return wt.l+=bt/100,wt.l=It(wt.l),p(wt)}function at(dt,bt){bt=bt===0?0:bt||10;var wt=p(dt).toRgb();return wt.r=y(0,m(255,wt.r-T(255*-(bt/100)))),wt.g=y(0,m(255,wt.g-T(255*-(bt/100)))),wt.b=y(0,m(255,wt.b-T(255*-(bt/100)))),p(wt)}function J(dt,bt){bt=bt===0?0:bt||10;var wt=p(dt).toHsl();return wt.l-=bt/100,wt.l=It(wt.l),p(wt)}function nt(dt,bt){var wt=p(dt).toHsl(),D=(wt.h+bt)%360;return wt.h=D<0?360+D:D,p(wt)}function mt(dt){var bt=p(dt).toHsl();return bt.h=(bt.h+180)%360,p(bt)}function Mt(dt){var bt=p(dt).toHsl(),wt=bt.h;return[p(dt),p({h:(wt+120)%360,s:bt.s,l:bt.l}),p({h:(wt+240)%360,s:bt.s,l:bt.l})]}function vt(dt){var bt=p(dt).toHsl(),wt=bt.h;return[p(dt),p({h:(wt+90)%360,s:bt.s,l:bt.l}),p({h:(wt+180)%360,s:bt.s,l:bt.l}),p({h:(wt+270)%360,s:bt.s,l:bt.l})]}function zt(dt){var bt=p(dt).toHsl(),wt=bt.h;return[p(dt),p({h:(wt+72)%360,s:bt.s,l:bt.l}),p({h:(wt+216)%360,s:bt.s,l:bt.l})]}function re(dt,bt,wt){bt=bt||6,wt=wt||30;var D=p(dt).toHsl(),rt=360/wt,Nt=[p(dt)];for(D.h=(D.h-(rt*bt>>1)+720)%360;--bt;)D.h=(D.h+rt)%360,Nt.push(p(D));return Nt}function Rt(dt,bt){bt=bt||6;for(var wt=p(dt).toHsv(),D=wt.h,rt=wt.s,Nt=wt.v,ft=[],ie=1/bt;bt--;)ft.push(p({h:D,s:rt,v:Nt})),Nt=(Nt+ie)%1;return ft}p.mix=function(dt,bt,wt){wt=wt===0?0:wt||50;var D=p(dt).toRgb(),rt=p(bt).toRgb(),Nt=wt/100,ft={r:(rt.r-D.r)*Nt+D.r,g:(rt.g-D.g)*Nt+D.g,b:(rt.b-D.b)*Nt+D.b,a:(rt.a-D.a)*Nt+D.a};return p(ft)},p.readability=function(dt,bt){var wt=p(dt),D=p(bt);return(z.max(wt.getLuminance(),D.getLuminance())+.05)/(z.min(wt.getLuminance(),D.getLuminance())+.05)},p.isReadable=function(dt,bt,wt){var D=p.readability(dt,bt),rt,Nt;switch(Nt=!1,rt=Ee(wt),rt.level+rt.size){case"AAsmall":case"AAAlarge":Nt=D>=4.5;break;case"AAlarge":Nt=D>=3;break;case"AAAsmall":Nt=D>=7;break}return Nt},p.mostReadable=function(dt,bt,wt){var D=null,rt=0,Nt,ft,ie,ge;wt=wt||{},ft=wt.includeFallbackColors,ie=wt.level,ge=wt.size;for(var Ge=0;Ge<bt.length;Ge++)Nt=p.readability(dt,bt[Ge]),Nt>rt&&(rt=Nt,D=p(bt[Ge]));return p.isReadable(dt,D,{level:ie,size:ge})||!ft?D:(wt.includeFallbackColors=!1,p.mostReadable(dt,["#fff","#000"],wt))};var At=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=p.hexNames=gt(At);function gt(dt){var bt={};for(var wt in dt)dt.hasOwnProperty(wt)&&(bt[dt[wt]]=wt);return bt}function Vt(dt){return dt=parseFloat(dt),(isNaN(dt)||dt<0||dt>1)&&(dt=1),dt}function Ht(dt,bt){De(dt)&&(dt="100%");var wt=Ye(dt);return dt=m(bt,y(0,parseFloat(dt))),wt&&(dt=parseInt(dt*bt,10)/100),z.abs(dt-bt)<1e-6?1:dt%bt/parseFloat(bt)}function It(dt){return m(1,y(0,dt))}function de(dt){return parseInt(dt,16)}function De(dt){return typeof dt=="string"&&dt.indexOf(".")!=-1&&parseFloat(dt)===1}function Ye(dt){return typeof dt=="string"&&dt.indexOf("%")!=-1}function kt(dt){return dt.length==1?"0"+dt:""+dt}function Pt(dt){return dt<=1&&(dt=dt*100+"%"),dt}function _t(dt){return z.round(parseFloat(dt)*255).toString(16)}function jt(dt){return de(dt)/255}var Qt=function(){var dt="[-\\+]?\\d+%?",bt="[-\\+]?\\d*\\.\\d+%?",wt="(?:"+bt+")|(?:"+dt+")",D="[\\s|\\(]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")\\s*\\)?",rt="[\\s|\\(]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")[,|\\s]+("+wt+")\\s*\\)?";return{CSS_UNIT:new RegExp(wt),rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+rt),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+rt),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+rt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Tt(dt){return!!Qt.CSS_UNIT.exec(dt)}function Zt(dt){dt=dt.replace(k,"").replace(E,"").toLowerCase();var bt=!1;if(At[dt])dt=At[dt],bt=!0;else if(dt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var wt;return(wt=Qt.rgb.exec(dt))?{r:wt[1],g:wt[2],b:wt[3]}:(wt=Qt.rgba.exec(dt))?{r:wt[1],g:wt[2],b:wt[3],a:wt[4]}:(wt=Qt.hsl.exec(dt))?{h:wt[1],s:wt[2],l:wt[3]}:(wt=Qt.hsla.exec(dt))?{h:wt[1],s:wt[2],l:wt[3],a:wt[4]}:(wt=Qt.hsv.exec(dt))?{h:wt[1],s:wt[2],v:wt[3]}:(wt=Qt.hsva.exec(dt))?{h:wt[1],s:wt[2],v:wt[3],a:wt[4]}:(wt=Qt.hex8.exec(dt))?{r:de(wt[1]),g:de(wt[2]),b:de(wt[3]),a:jt(wt[4]),format:bt?"name":"hex8"}:(wt=Qt.hex6.exec(dt))?{r:de(wt[1]),g:de(wt[2]),b:de(wt[3]),format:bt?"name":"hex"}:(wt=Qt.hex4.exec(dt))?{r:de(wt[1]+""+wt[1]),g:de(wt[2]+""+wt[2]),b:de(wt[3]+""+wt[3]),a:jt(wt[4]+""+wt[4]),format:bt?"name":"hex8"}:(wt=Qt.hex3.exec(dt))?{r:de(wt[1]+""+wt[1]),g:de(wt[2]+""+wt[2]),b:de(wt[3]+""+wt[3]),format:bt?"name":"hex"}:!1}function Ee(dt){var bt,wt;return dt=dt||{level:"AA",size:"small"},bt=(dt.level||"AA").toUpperCase(),wt=(dt.size||"small").toLowerCase(),bt!=="AA"&&bt!=="AAA"&&(bt="AA"),wt!=="small"&&wt!=="large"&&(wt="small"),{level:bt,size:wt}}ae.exports?ae.exports=p:(x=function(){return p}.call(w,S,w,ae),x!==void 0&&(ae.exports=x))})(Math)},39889:function(ae,w,S){"use strict";S.r(w),S.d(w,{__assign:function(){return k},__asyncDelegator:function(){return et},__asyncGenerator:function(){return U},__asyncValues:function(){return at},__await:function(){return W},__awaiter:function(){return I},__classPrivateFieldGet:function(){return vt},__classPrivateFieldIn:function(){return re},__classPrivateFieldSet:function(){return zt},__createBinding:function(){return C},__decorate:function(){return N},__esDecorate:function(){return m},__exportStar:function(){return O},__extends:function(){return z},__generator:function(){return _},__importDefault:function(){return Mt},__importStar:function(){return mt},__makeTemplateObject:function(){return J},__metadata:function(){return g},__param:function(){return T},__propKey:function(){return v},__read:function(){return l},__rest:function(){return E},__runInitializers:function(){return y},__setFunctionName:function(){return p},__spread:function(){return K},__spreadArray:function(){return X},__spreadArrays:function(){return Z},__values:function(){return b}});var x=function(Rt,At){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,gt){Q.__proto__=gt}||function(Q,gt){for(var Vt in gt)Object.prototype.hasOwnProperty.call(gt,Vt)&&(Q[Vt]=gt[Vt])},x(Rt,At)};function z(Rt,At){if(typeof At!="function"&&At!==null)throw new TypeError("Class extends value "+String(At)+" is not a constructor or null");x(Rt,At);function Q(){this.constructor=Rt}Rt.prototype=At===null?Object.create(At):(Q.prototype=At.prototype,new Q)}var k=function(){return k=Object.assign||function(At){for(var Q,gt=1,Vt=arguments.length;gt<Vt;gt++){Q=arguments[gt];for(var Ht in Q)Object.prototype.hasOwnProperty.call(Q,Ht)&&(At[Ht]=Q[Ht])}return At},k.apply(this,arguments)};function E(Rt,At){var Q={};for(var gt in Rt)Object.prototype.hasOwnProperty.call(Rt,gt)&&At.indexOf(gt)<0&&(Q[gt]=Rt[gt]);if(Rt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Vt=0,gt=Object.getOwnPropertySymbols(Rt);Vt<gt.length;Vt++)At.indexOf(gt[Vt])<0&&Object.prototype.propertyIsEnumerable.call(Rt,gt[Vt])&&(Q[gt[Vt]]=Rt[gt[Vt]]);return Q}function N(Rt,At,Q,gt){var Vt=arguments.length,Ht=Vt<3?At:gt===null?gt=Object.getOwnPropertyDescriptor(At,Q):gt,It;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ht=Reflect.decorate(Rt,At,Q,gt);else for(var de=Rt.length-1;de>=0;de--)(It=Rt[de])&&(Ht=(Vt<3?It(Ht):Vt>3?It(At,Q,Ht):It(At,Q))||Ht);return Vt>3&&Ht&&Object.defineProperty(At,Q,Ht),Ht}function T(Rt,At){return function(Q,gt){At(Q,gt,Rt)}}function m(Rt,At,Q,gt,Vt,Ht){function It(Ee){if(Ee!==void 0&&typeof Ee!="function")throw new TypeError("Function expected");return Ee}for(var de=gt.kind,De=de==="getter"?"get":de==="setter"?"set":"value",Ye=!At&&Rt?gt.static?Rt:Rt.prototype:null,kt=At||(Ye?Object.getOwnPropertyDescriptor(Ye,gt.name):{}),Pt,_t=!1,jt=Q.length-1;jt>=0;jt--){var Qt={};for(var Tt in gt)Qt[Tt]=Tt==="access"?{}:gt[Tt];for(var Tt in gt.access)Qt.access[Tt]=gt.access[Tt];Qt.addInitializer=function(Ee){if(_t)throw new TypeError("Cannot add initializers after decoration has completed");Ht.push(It(Ee||null))};var Zt=(0,Q[jt])(de==="accessor"?{get:kt.get,set:kt.set}:kt[De],Qt);if(de==="accessor"){if(Zt===void 0)continue;if(Zt===null||typeof Zt!="object")throw new TypeError("Object expected");(Pt=It(Zt.get))&&(kt.get=Pt),(Pt=It(Zt.set))&&(kt.set=Pt),(Pt=It(Zt.init))&&Vt.push(Pt)}else(Pt=It(Zt))&&(de==="field"?Vt.push(Pt):kt[De]=Pt)}Ye&&Object.defineProperty(Ye,gt.name,kt),_t=!0}function y(Rt,At,Q){for(var gt=arguments.length>2,Vt=0;Vt<At.length;Vt++)Q=gt?At[Vt].call(Rt,Q):At[Vt].call(Rt);return gt?Q:void 0}function v(Rt){return typeof Rt=="symbol"?Rt:"".concat(Rt)}function p(Rt,At,Q){return typeof At=="symbol"&&(At=At.description?"[".concat(At.description,"]"):""),Object.defineProperty(Rt,"name",{configurable:!0,value:Q?"".concat(Q," ",At):At})}function g(Rt,At){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Rt,At)}function I(Rt,At,Q,gt){function Vt(Ht){return Ht instanceof Q?Ht:new Q(function(It){It(Ht)})}return new(Q||(Q=Promise))(function(Ht,It){function de(kt){try{Ye(gt.next(kt))}catch(Pt){It(Pt)}}function De(kt){try{Ye(gt.throw(kt))}catch(Pt){It(Pt)}}function Ye(kt){kt.done?Ht(kt.value):Vt(kt.value).then(de,De)}Ye((gt=gt.apply(Rt,At||[])).next())})}function _(Rt,At){var Q={label:0,sent:function(){if(Ht[0]&1)throw Ht[1];return Ht[1]},trys:[],ops:[]},gt,Vt,Ht,It;return It={next:de(0),throw:de(1),return:de(2)},typeof Symbol=="function"&&(It[Symbol.iterator]=function(){return this}),It;function de(Ye){return function(kt){return De([Ye,kt])}}function De(Ye){if(gt)throw new TypeError("Generator is already executing.");for(;It&&(It=0,Ye[0]&&(Q=0)),Q;)try{if(gt=1,Vt&&(Ht=Ye[0]&2?Vt.return:Ye[0]?Vt.throw||((Ht=Vt.return)&&Ht.call(Vt),0):Vt.next)&&!(Ht=Ht.call(Vt,Ye[1])).done)return Ht;switch(Vt=0,Ht&&(Ye=[Ye[0]&2,Ht.value]),Ye[0]){case 0:case 1:Ht=Ye;break;case 4:return Q.label++,{value:Ye[1],done:!1};case 5:Q.label++,Vt=Ye[1],Ye=[0];continue;case 7:Ye=Q.ops.pop(),Q.trys.pop();continue;default:if(Ht=Q.trys,!(Ht=Ht.length>0&&Ht[Ht.length-1])&&(Ye[0]===6||Ye[0]===2)){Q=0;continue}if(Ye[0]===3&&(!Ht||Ye[1]>Ht[0]&&Ye[1]<Ht[3])){Q.label=Ye[1];break}if(Ye[0]===6&&Q.label<Ht[1]){Q.label=Ht[1],Ht=Ye;break}if(Ht&&Q.label<Ht[2]){Q.label=Ht[2],Q.ops.push(Ye);break}Ht[2]&&Q.ops.pop(),Q.trys.pop();continue}Ye=At.call(Rt,Q)}catch(kt){Ye=[6,kt],Vt=0}finally{gt=Ht=0}if(Ye[0]&5)throw Ye[1];return{value:Ye[0]?Ye[1]:void 0,done:!0}}}var C=Object.create?function(Rt,At,Q,gt){gt===void 0&&(gt=Q);var Vt=Object.getOwnPropertyDescriptor(At,Q);(!Vt||("get"in Vt?!At.__esModule:Vt.writable||Vt.configurable))&&(Vt={enumerable:!0,get:function(){return At[Q]}}),Object.defineProperty(Rt,gt,Vt)}:function(Rt,At,Q,gt){gt===void 0&&(gt=Q),Rt[gt]=At[Q]};function O(Rt,At){for(var Q in Rt)Q!=="default"&&!Object.prototype.hasOwnProperty.call(At,Q)&&C(At,Rt,Q)}function b(Rt){var At=typeof Symbol=="function"&&Symbol.iterator,Q=At&&Rt[At],gt=0;if(Q)return Q.call(Rt);if(Rt&&typeof Rt.length=="number")return{next:function(){return Rt&&gt>=Rt.length&&(Rt=void 0),{value:Rt&&Rt[gt++],done:!Rt}}};throw new TypeError(At?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(Rt,At){var Q=typeof Symbol=="function"&&Rt[Symbol.iterator];if(!Q)return Rt;var gt=Q.call(Rt),Vt,Ht=[],It;try{for(;(At===void 0||At-- >0)&&!(Vt=gt.next()).done;)Ht.push(Vt.value)}catch(de){It={error:de}}finally{try{Vt&&!Vt.done&&(Q=gt.return)&&Q.call(gt)}finally{if(It)throw It.error}}return Ht}function K(){for(var Rt=[],At=0;At<arguments.length;At++)Rt=Rt.concat(l(arguments[At]));return Rt}function Z(){for(var Rt=0,At=0,Q=arguments.length;At<Q;At++)Rt+=arguments[At].length;for(var gt=Array(Rt),Vt=0,At=0;At<Q;At++)for(var Ht=arguments[At],It=0,de=Ht.length;It<de;It++,Vt++)gt[Vt]=Ht[It];return gt}function X(Rt,At,Q){if(Q||arguments.length===2)for(var gt=0,Vt=At.length,Ht;gt<Vt;gt++)(Ht||!(gt in At))&&(Ht||(Ht=Array.prototype.slice.call(At,0,gt)),Ht[gt]=At[gt]);return Rt.concat(Ht||Array.prototype.slice.call(At))}function W(Rt){return this instanceof W?(this.v=Rt,this):new W(Rt)}function U(Rt,At,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt=Q.apply(Rt,At||[]),Vt,Ht=[];return Vt={},It("next"),It("throw"),It("return"),Vt[Symbol.asyncIterator]=function(){return this},Vt;function It(_t){gt[_t]&&(Vt[_t]=function(jt){return new Promise(function(Qt,Tt){Ht.push([_t,jt,Qt,Tt])>1||de(_t,jt)})})}function de(_t,jt){try{De(gt[_t](jt))}catch(Qt){Pt(Ht[0][3],Qt)}}function De(_t){_t.value instanceof W?Promise.resolve(_t.value.v).then(Ye,kt):Pt(Ht[0][2],_t)}function Ye(_t){de("next",_t)}function kt(_t){de("throw",_t)}function Pt(_t,jt){_t(jt),Ht.shift(),Ht.length&&de(Ht[0][0],Ht[0][1])}}function et(Rt){var At,Q;return At={},gt("next"),gt("throw",function(Vt){throw Vt}),gt("return"),At[Symbol.iterator]=function(){return this},At;function gt(Vt,Ht){At[Vt]=Rt[Vt]?function(It){return(Q=!Q)?{value:W(Rt[Vt](It)),done:!1}:Ht?Ht(It):It}:Ht}}function at(Rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var At=Rt[Symbol.asyncIterator],Q;return At?At.call(Rt):(Rt=typeof b=="function"?b(Rt):Rt[Symbol.iterator](),Q={},gt("next"),gt("throw"),gt("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function gt(Ht){Q[Ht]=Rt[Ht]&&function(It){return new Promise(function(de,De){It=Rt[Ht](It),Vt(de,De,It.done,It.value)})}}function Vt(Ht,It,de,De){Promise.resolve(De).then(function(Ye){Ht({value:Ye,done:de})},It)}}function J(Rt,At){return Object.defineProperty?Object.defineProperty(Rt,"raw",{value:At}):Rt.raw=At,Rt}var nt=Object.create?function(Rt,At){Object.defineProperty(Rt,"default",{enumerable:!0,value:At})}:function(Rt,At){Rt.default=At};function mt(Rt){if(Rt&&Rt.__esModule)return Rt;var At={};if(Rt!=null)for(var Q in Rt)Q!=="default"&&Object.prototype.hasOwnProperty.call(Rt,Q)&&C(At,Rt,Q);return nt(At,Rt),At}function Mt(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}function vt(Rt,At,Q,gt){if(Q==="a"&&!gt)throw new TypeError("Private accessor was defined without a getter");if(typeof At=="function"?Rt!==At||!gt:!At.has(Rt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Q==="m"?gt:Q==="a"?gt.call(Rt):gt?gt.value:At.get(Rt)}function zt(Rt,At,Q,gt,Vt){if(gt==="m")throw new TypeError("Private method is not writable");if(gt==="a"&&!Vt)throw new TypeError("Private accessor was defined without a setter");if(typeof At=="function"?Rt!==At||!Vt:!At.has(Rt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return gt==="a"?Vt.call(Rt,Q):Vt?Vt.value=Q:At.set(Rt,Q),Q}function re(Rt,At){if(At===null||typeof At!="object"&&typeof At!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Rt=="function"?At===Rt:Rt.has(At)}},87599:function(ae,w,S){"use strict";S.r(w),S.d(w,{forceCenter:function(){return x},forceCollide:function(){return m},forceLink:function(){return I},forceManyBody:function(){return Ee},forceRadial:function(){return dt},forceSimulation:function(){return Zt},forceX:function(){return bt},forceY:function(){return wt}});function x(D,rt){var Nt,ft=1;D==null&&(D=0),rt==null&&(rt=0);function ie(){var ge,Ge=Nt.length,Re,qe=0,Ve=0;for(ge=0;ge<Ge;++ge)Re=Nt[ge],qe+=Re.x,Ve+=Re.y;for(qe=(qe/Ge-D)*ft,Ve=(Ve/Ge-rt)*ft,ge=0;ge<Ge;++ge)Re=Nt[ge],Re.x-=qe,Re.y-=Ve}return ie.initialize=function(ge){Nt=ge},ie.x=function(ge){return arguments.length?(D=+ge,ie):D},ie.y=function(ge){return arguments.length?(rt=+ge,ie):rt},ie.strength=function(ge){return arguments.length?(ft=+ge,ie):ft},ie}var z=S(90696);function k(D){return function(){return D}}function E(D){return(D()-.5)*1e-6}function N(D){return D.x+D.vx}function T(D){return D.y+D.vy}function m(D){var rt,Nt,ft,ie=1,ge=1;typeof D!="function"&&(D=k(D==null?1:+D));function Ge(){for(var Ve,le=rt.length,Le,je,Be,vr,or,Ae,yr=0;yr<ge;++yr)for(Le=(0,z.Z)(rt,N,T).visitAfter(Re),Ve=0;Ve<le;++Ve)je=rt[Ve],or=Nt[je.index],Ae=or*or,Be=je.x+je.vx,vr=je.y+je.vy,Le.visit(Cr);function Cr(zr,Mr,un,hn,Un){var nn=zr.data,vn=zr.r,ln=or+vn;if(nn){if(nn.index>je.index){var pn=Be-nn.x-nn.vx,Bn=vr-nn.y-nn.vy,Pe=pn*pn+Bn*Bn;Pe<ln*ln&&(pn===0&&(pn=E(ft),Pe+=pn*pn),Bn===0&&(Bn=E(ft),Pe+=Bn*Bn),Pe=(ln-(Pe=Math.sqrt(Pe)))/Pe*ie,je.vx+=(pn*=Pe)*(ln=(vn*=vn)/(Ae+vn)),je.vy+=(Bn*=Pe)*ln,nn.vx-=pn*(ln=1-ln),nn.vy-=Bn*ln)}return}return Mr>Be+ln||hn<Be-ln||un>vr+ln||Un<vr-ln}}function Re(Ve){if(Ve.data)return Ve.r=Nt[Ve.data.index];for(var le=Ve.r=0;le<4;++le)Ve[le]&&Ve[le].r>Ve.r&&(Ve.r=Ve[le].r)}function qe(){if(rt){var Ve,le=rt.length,Le;for(Nt=new Array(le),Ve=0;Ve<le;++Ve)Le=rt[Ve],Nt[Le.index]=+D(Le,Ve,rt)}}return Ge.initialize=function(Ve,le){rt=Ve,ft=le,qe()},Ge.iterations=function(Ve){return arguments.length?(ge=+Ve,Ge):ge},Ge.strength=function(Ve){return arguments.length?(ie=+Ve,Ge):ie},Ge.radius=function(Ve){return arguments.length?(D=typeof Ve=="function"?Ve:k(+Ve),qe(),Ge):D},Ge}var y=S(64020),v=S.n(y);function p(D){return D.index}function g(D,rt){var Nt=D.get(rt);if(!Nt)throw new Error("node not found: "+rt);return Nt}function I(D){var rt=p,Nt=Le,ft,ie=k(30),ge,Ge,Re,qe,Ve,le=1;D==null&&(D=[]);function Le(Ae){return 1/Math.min(Re[Ae.source.index],Re[Ae.target.index])}function je(Ae){for(var yr=0,Cr=D.length;yr<le;++yr)for(var zr=0,Mr,un,hn,Un,nn,vn,ln;zr<Cr;++zr)Mr=D[zr],un=Mr.source,hn=Mr.target,Un=hn.x+hn.vx-un.x-un.vx||E(Ve),nn=hn.y+hn.vy-un.y-un.vy||E(Ve),vn=Math.sqrt(Un*Un+nn*nn),vn=(vn-ge[zr])/vn*Ae*ft[zr],Un*=vn,nn*=vn,hn.vx-=Un*(ln=qe[zr]),hn.vy-=nn*ln,un.vx+=Un*(ln=1-ln),un.vy+=nn*ln}function Be(){if(Ge){var Ae,yr=Ge.length,Cr=D.length,zr=new Map(Ge.map(function(un,hn){return[rt(un,hn,Ge),un]})),Mr;for(Ae=0,Re=new Array(yr);Ae<Cr;++Ae)Mr=D[Ae],Mr.index=Ae,v()(Mr.source)!=="object"&&(Mr.source=g(zr,Mr.source)),v()(Mr.target)!=="object"&&(Mr.target=g(zr,Mr.target)),Re[Mr.source.index]=(Re[Mr.source.index]||0)+1,Re[Mr.target.index]=(Re[Mr.target.index]||0)+1;for(Ae=0,qe=new Array(Cr);Ae<Cr;++Ae)Mr=D[Ae],qe[Ae]=Re[Mr.source.index]/(Re[Mr.source.index]+Re[Mr.target.index]);ft=new Array(Cr),vr(),ge=new Array(Cr),or()}}function vr(){if(Ge)for(var Ae=0,yr=D.length;Ae<yr;++Ae)ft[Ae]=+Nt(D[Ae],Ae,D)}function or(){if(Ge)for(var Ae=0,yr=D.length;Ae<yr;++Ae)ge[Ae]=+ie(D[Ae],Ae,D)}return je.initialize=function(Ae,yr){Ge=Ae,Ve=yr,Be()},je.links=function(Ae){return arguments.length?(D=Ae,Be(),je):D},je.id=function(Ae){return arguments.length?(rt=Ae,je):rt},je.iterations=function(Ae){return arguments.length?(le=+Ae,je):le},je.strength=function(Ae){return arguments.length?(Nt=typeof Ae=="function"?Ae:k(+Ae),vr(),je):Nt},je.distance=function(Ae){return arguments.length?(ie=typeof Ae=="function"?Ae:k(+Ae),or(),je):ie},je}var _={value:function(){}};function C(){for(var D=0,rt=arguments.length,Nt={},ft;D<rt;++D){if(!(ft=arguments[D]+"")||ft in Nt||/[\s.]/.test(ft))throw new Error("illegal type: "+ft);Nt[ft]=[]}return new O(Nt)}function O(D){this._=D}function b(D,rt){return D.trim().split(/^|\s+/).map(function(Nt){var ft="",ie=Nt.indexOf(".");if(ie>=0&&(ft=Nt.slice(ie+1),Nt=Nt.slice(0,ie)),Nt&&!rt.hasOwnProperty(Nt))throw new Error("unknown type: "+Nt);return{type:Nt,name:ft}})}O.prototype=C.prototype={constructor:O,on:function(rt,Nt){var ft=this._,ie=b(rt+"",ft),ge,Ge=-1,Re=ie.length;if(arguments.length<2){for(;++Ge<Re;)if((ge=(rt=ie[Ge]).type)&&(ge=l(ft[ge],rt.name)))return ge;return}if(Nt!=null&&typeof Nt!="function")throw new Error("invalid callback: "+Nt);for(;++Ge<Re;)if(ge=(rt=ie[Ge]).type)ft[ge]=K(ft[ge],rt.name,Nt);else if(Nt==null)for(ge in ft)ft[ge]=K(ft[ge],rt.name,null);return this},copy:function(){var rt={},Nt=this._;for(var ft in Nt)rt[ft]=Nt[ft].slice();return new O(rt)},call:function(rt,Nt){if((ge=arguments.length-2)>0)for(var ft=new Array(ge),ie=0,ge,Ge;ie<ge;++ie)ft[ie]=arguments[ie+2];if(!this._.hasOwnProperty(rt))throw new Error("unknown type: "+rt);for(Ge=this._[rt],ie=0,ge=Ge.length;ie<ge;++ie)Ge[ie].value.apply(Nt,ft)},apply:function(rt,Nt,ft){if(!this._.hasOwnProperty(rt))throw new Error("unknown type: "+rt);for(var ie=this._[rt],ge=0,Ge=ie.length;ge<Ge;++ge)ie[ge].value.apply(Nt,ft)}};function l(D,rt){for(var Nt=0,ft=D.length,ie;Nt<ft;++Nt)if((ie=D[Nt]).name===rt)return ie.value}function K(D,rt,Nt){for(var ft=0,ie=D.length;ft<ie;++ft)if(D[ft].name===rt){D[ft]=_,D=D.slice(0,ft).concat(D.slice(ft+1));break}return Nt!=null&&D.push({name:rt,value:Nt}),D}var Z=C,X=0,W=0,U=0,et=1e3,at,J,nt=0,mt=0,Mt=0,vt=typeof performance=="object"&&performance.now?performance:Date,zt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(D){setTimeout(D,17)};function re(){return mt||(zt(Rt),mt=vt.now()+Mt)}function Rt(){mt=0}function At(){this._call=this._time=this._next=null}At.prototype=Q.prototype={constructor:At,restart:function(D,rt,Nt){if(typeof D!="function")throw new TypeError("callback is not a function");Nt=(Nt==null?re():+Nt)+(rt==null?0:+rt),!this._next&&J!==this&&(J?J._next=this:at=this,J=this),this._call=D,this._time=Nt,de()},stop:function(){this._call&&(this._call=null,this._time=1/0,de())}};function Q(D,rt,Nt){var ft=new At;return ft.restart(D,rt,Nt),ft}function gt(){re(),++X;for(var D=at,rt;D;)(rt=mt-D._time)>=0&&D._call.call(null,rt),D=D._next;--X}function Vt(){mt=(nt=vt.now())+Mt,X=W=0;try{gt()}finally{X=0,It(),mt=0}}function Ht(){var D=vt.now(),rt=D-nt;rt>et&&(Mt-=rt,nt=D)}function It(){for(var D,rt=at,Nt,ft=1/0;rt;)rt._call?(ft>rt._time&&(ft=rt._time),D=rt,rt=rt._next):(Nt=rt._next,rt._next=null,rt=D?D._next=Nt:at=Nt);J=D,de(ft)}function de(D){if(!X){W&&(W=clearTimeout(W));var rt=D-mt;rt>24?(D<1/0&&(W=setTimeout(Vt,D-vt.now()-Mt)),U&&(U=clearInterval(U))):(U||(nt=vt.now(),U=setInterval(Ht,et)),X=1,zt(Vt))}}var De=1664525,Ye=1013904223,kt=4294967296;function Pt(){var D=1;return function(){return(D=(De*D+Ye)%kt)/kt}}function _t(D){return D.x}function jt(D){return D.y}var Qt=10,Tt=Math.PI*(3-Math.sqrt(5));function Zt(D){var rt,Nt=1,ft=.001,ie=1-Math.pow(ft,1/300),ge=0,Ge=.6,Re=new Map,qe=Q(Le),Ve=Z("tick","end"),le=Pt();D==null&&(D=[]);function Le(){je(),Ve.call("tick",rt),Nt<ft&&(qe.stop(),Ve.call("end",rt))}function je(or){var Ae,yr=D.length,Cr;or===void 0&&(or=1);for(var zr=0;zr<or;++zr)for(Nt+=(ge-Nt)*ie,Re.forEach(function(Mr){Mr(Nt)}),Ae=0;Ae<yr;++Ae)Cr=D[Ae],Cr.fx==null?Cr.x+=Cr.vx*=Ge:(Cr.x=Cr.fx,Cr.vx=0),Cr.fy==null?Cr.y+=Cr.vy*=Ge:(Cr.y=Cr.fy,Cr.vy=0);return rt}function Be(){for(var or=0,Ae=D.length,yr;or<Ae;++or){if(yr=D[or],yr.index=or,yr.fx!=null&&(yr.x=yr.fx),yr.fy!=null&&(yr.y=yr.fy),isNaN(yr.x)||isNaN(yr.y)){var Cr=Qt*Math.sqrt(.5+or),zr=or*Tt;yr.x=Cr*Math.cos(zr),yr.y=Cr*Math.sin(zr)}(isNaN(yr.vx)||isNaN(yr.vy))&&(yr.vx=yr.vy=0)}}function vr(or){return or.initialize&&or.initialize(D,le),or}return Be(),rt={tick:je,restart:function(){return qe.restart(Le),rt},stop:function(){return qe.stop(),rt},nodes:function(Ae){return arguments.length?(D=Ae,Be(),Re.forEach(vr),rt):D},alpha:function(Ae){return arguments.length?(Nt=+Ae,rt):Nt},alphaMin:function(Ae){return arguments.length?(ft=+Ae,rt):ft},alphaDecay:function(Ae){return arguments.length?(ie=+Ae,rt):+ie},alphaTarget:function(Ae){return arguments.length?(ge=+Ae,rt):ge},velocityDecay:function(Ae){return arguments.length?(Ge=1-Ae,rt):1-Ge},randomSource:function(Ae){return arguments.length?(le=Ae,Re.forEach(vr),rt):le},force:function(Ae,yr){return arguments.length>1?(yr==null?Re.delete(Ae):Re.set(Ae,vr(yr)),rt):Re.get(Ae)},find:function(Ae,yr,Cr){var zr=0,Mr=D.length,un,hn,Un,nn,vn;for(Cr==null?Cr=1/0:Cr*=Cr,zr=0;zr<Mr;++zr)nn=D[zr],un=Ae-nn.x,hn=yr-nn.y,Un=un*un+hn*hn,Un<Cr&&(vn=nn,Cr=Un);return vn},on:function(Ae,yr){return arguments.length>1?(Ve.on(Ae,yr),rt):Ve.on(Ae)}}}function Ee(){var D,rt,Nt,ft,ie=k(-30),ge,Ge=1,Re=1/0,qe=.81;function Ve(Be){var vr,or=D.length,Ae=(0,z.Z)(D,_t,jt).visitAfter(Le);for(ft=Be,vr=0;vr<or;++vr)rt=D[vr],Ae.visit(je)}function le(){if(D){var Be,vr=D.length,or;for(ge=new Array(vr),Be=0;Be<vr;++Be)or=D[Be],ge[or.index]=+ie(or,Be,D)}}function Le(Be){var vr=0,or,Ae,yr=0,Cr,zr,Mr;if(Be.length){for(Cr=zr=Mr=0;Mr<4;++Mr)(or=Be[Mr])&&(Ae=Math.abs(or.value))&&(vr+=or.value,yr+=Ae,Cr+=Ae*or.x,zr+=Ae*or.y);Be.x=Cr/yr,Be.y=zr/yr}else{or=Be,or.x=or.data.x,or.y=or.data.y;do vr+=ge[or.data.index];while(or=or.next)}Be.value=vr}function je(Be,vr,or,Ae){if(!Be.value)return!0;var yr=Be.x-rt.x,Cr=Be.y-rt.y,zr=Ae-vr,Mr=yr*yr+Cr*Cr;if(zr*zr/qe<Mr)return Mr<Re&&(yr===0&&(yr=E(Nt),Mr+=yr*yr),Cr===0&&(Cr=E(Nt),Mr+=Cr*Cr),Mr<Ge&&(Mr=Math.sqrt(Ge*Mr)),rt.vx+=yr*Be.value*ft/Mr,rt.vy+=Cr*Be.value*ft/Mr),!0;if(Be.length||Mr>=Re)return;(Be.data!==rt||Be.next)&&(yr===0&&(yr=E(Nt),Mr+=yr*yr),Cr===0&&(Cr=E(Nt),Mr+=Cr*Cr),Mr<Ge&&(Mr=Math.sqrt(Ge*Mr)));do Be.data!==rt&&(zr=ge[Be.data.index]*ft/Mr,rt.vx+=yr*zr,rt.vy+=Cr*zr);while(Be=Be.next)}return Ve.initialize=function(Be,vr){D=Be,Nt=vr,le()},Ve.strength=function(Be){return arguments.length?(ie=typeof Be=="function"?Be:k(+Be),le(),Ve):ie},Ve.distanceMin=function(Be){return arguments.length?(Ge=Be*Be,Ve):Math.sqrt(Ge)},Ve.distanceMax=function(Be){return arguments.length?(Re=Be*Be,Ve):Math.sqrt(Re)},Ve.theta=function(Be){return arguments.length?(qe=Be*Be,Ve):Math.sqrt(qe)},Ve}function dt(D,rt,Nt){var ft,ie=k(.1),ge,Ge;typeof D!="function"&&(D=k(+D)),rt==null&&(rt=0),Nt==null&&(Nt=0);function Re(Ve){for(var le=0,Le=ft.length;le<Le;++le){var je=ft[le],Be=je.x-rt||1e-6,vr=je.y-Nt||1e-6,or=Math.sqrt(Be*Be+vr*vr),Ae=(Ge[le]-or)*ge[le]*Ve/or;je.vx+=Be*Ae,je.vy+=vr*Ae}}function qe(){if(ft){var Ve,le=ft.length;for(ge=new Array(le),Ge=new Array(le),Ve=0;Ve<le;++Ve)Ge[Ve]=+D(ft[Ve],Ve,ft),ge[Ve]=isNaN(Ge[Ve])?0:+ie(ft[Ve],Ve,ft)}}return Re.initialize=function(Ve){ft=Ve,qe()},Re.strength=function(Ve){return arguments.length?(ie=typeof Ve=="function"?Ve:k(+Ve),qe(),Re):ie},Re.radius=function(Ve){return arguments.length?(D=typeof Ve=="function"?Ve:k(+Ve),qe(),Re):D},Re.x=function(Ve){return arguments.length?(rt=+Ve,Re):rt},Re.y=function(Ve){return arguments.length?(Nt=+Ve,Re):Nt},Re}function bt(D){var rt=k(.1),Nt,ft,ie;typeof D!="function"&&(D=k(D==null?0:+D));function ge(Re){for(var qe=0,Ve=Nt.length,le;qe<Ve;++qe)le=Nt[qe],le.vx+=(ie[qe]-le.x)*ft[qe]*Re}function Ge(){if(Nt){var Re,qe=Nt.length;for(ft=new Array(qe),ie=new Array(qe),Re=0;Re<qe;++Re)ft[Re]=isNaN(ie[Re]=+D(Nt[Re],Re,Nt))?0:+rt(Nt[Re],Re,Nt)}}return ge.initialize=function(Re){Nt=Re,Ge()},ge.strength=function(Re){return arguments.length?(rt=typeof Re=="function"?Re:k(+Re),Ge(),ge):rt},ge.x=function(Re){return arguments.length?(D=typeof Re=="function"?Re:k(+Re),Ge(),ge):D},ge}function wt(D){var rt=k(.1),Nt,ft,ie;typeof D!="function"&&(D=k(D==null?0:+D));function ge(Re){for(var qe=0,Ve=Nt.length,le;qe<Ve;++qe)le=Nt[qe],le.vy+=(ie[qe]-le.y)*ft[qe]*Re}function Ge(){if(Nt){var Re,qe=Nt.length;for(ft=new Array(qe),ie=new Array(qe),Re=0;Re<qe;++Re)ft[Re]=isNaN(ie[Re]=+D(Nt[Re],Re,Nt))?0:+rt(Nt[Re],Re,Nt)}}return ge.initialize=function(Re){Nt=Re,Ge()},ge.strength=function(Re){return arguments.length?(rt=typeof Re=="function"?Re:k(+Re),Ge(),ge):rt},ge.y=function(Re){return arguments.length?(D=typeof Re=="function"?Re:k(+Re),Ge(),ge):D},ge}},60340:function(ae,w,S){"use strict";S.r(w),S.d(w,{AbstractMatrix:function(){return D},CHO:function(){return Si},CholeskyDecomposition:function(){return Si},EVD:function(){return Cn},EigenvalueDecomposition:function(){return Cn},LU:function(){return yr},LuDecomposition:function(){return yr},Matrix:function(){return ft},MatrixColumnSelectionView:function(){return Ge},MatrixColumnView:function(){return ge},MatrixFlipColumnView:function(){return Re},MatrixFlipRowView:function(){return qe},MatrixRowSelectionView:function(){return le},MatrixRowView:function(){return Ve},MatrixSelectionView:function(){return Le},MatrixSubView:function(){return je},MatrixTransposeView:function(){return Be},NIPALS:function(){return pi},Nipals:function(){return pi},QR:function(){return zr},QrDecomposition:function(){return zr},SVD:function(){return Mr},SingularValueDecomposition:function(){return Mr},WrapperMatrix1D:function(){return vr},WrapperMatrix2D:function(){return or},correlation:function(){return Pe},covariance:function(){return Bn},default:function(){return ft},determinant:function(){return Un},inverse:function(){return un},linearDependencies:function(){return ln},pseudoInverse:function(){return pn},solve:function(){return hn},wrap:function(){return Ae}});var x=S(74158),z=S.n(x),k=S(33649),E=S.n(k),N=S(26979),T=S.n(N),m=S(64020),y=S.n(m),v=S(32078),p=S.n(v),g=S(82357),I=S.n(g);const _=Object.prototype.toString;function C(Dt){return _.call(Dt).endsWith("Array]")}function O(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!C(Dt))throw new TypeError("input must be an array");if(Dt.length===0)throw new TypeError("input must not be empty");var H=Lt.fromIndex,G=H===void 0?0:H,F=Lt.toIndex,st=F===void 0?Dt.length:F;if(G<0||G>=Dt.length||!Number.isInteger(G))throw new Error("fromIndex must be a positive integer smaller than length");if(st<=G||st>Dt.length||!Number.isInteger(st))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Bt=Dt[G],Kt=G+1;Kt<st;Kt++)Dt[Kt]>Bt&&(Bt=Dt[Kt]);return Bt}function b(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!C(Dt))throw new TypeError("input must be an array");if(Dt.length===0)throw new TypeError("input must not be empty");var H=Lt.fromIndex,G=H===void 0?0:H,F=Lt.toIndex,st=F===void 0?Dt.length:F;if(G<0||G>=Dt.length||!Number.isInteger(G))throw new Error("fromIndex must be a positive integer smaller than length");if(st<=G||st>Dt.length||!Number.isInteger(st))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Bt=Dt[G],Kt=G+1;Kt<st;Kt++)Dt[Kt]<Bt&&(Bt=Dt[Kt]);return Bt}function l(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(Dt)){if(Dt.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var H;if(Lt.output!==void 0){if(!C(Lt.output))throw new TypeError("output option must be an array if specified");H=Lt.output}else H=new Array(Dt.length);var G=b(Dt),F=O(Dt);if(G===F)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var st=Lt.min,Bt=st===void 0?Lt.autoMinMax?G:0:st,Kt=Lt.max,Yt=Kt===void 0?Lt.autoMinMax?F:1:Kt;if(Bt>=Yt)throw new RangeError("min option must be smaller than max option");for(var he=(Yt-Bt)/(F-G),ot=0;ot<Dt.length;ot++)H[ot]=(Dt[ot]-G)*he+Bt;return H}var K=" ".repeat(2),Z=" ".repeat(4);function X(){return W(this)}function W(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=Lt.maxRows,G=H===void 0?15:H,F=Lt.maxColumns,st=F===void 0?10:F,Bt=Lt.maxNumSize,Kt=Bt===void 0?8:Bt;return"".concat(Dt.constructor.name,` {
`).concat(K,`[
`).concat(Z).concat(U(Dt,G,st,Kt),`
`).concat(K,`]
`).concat(K,"rows: ").concat(Dt.rows,`
`).concat(K,"columns: ").concat(Dt.columns,`
}`)}function U(Dt,Lt,H,G){for(var F=Dt.rows,st=Dt.columns,Bt=Math.min(F,Lt),Kt=Math.min(st,H),Yt=[],he=0;he<Bt;he++){for(var ot=[],yt=0;yt<Kt;yt++)ot.push(et(Dt.get(he,yt),G));Yt.push("".concat(ot.join(" ")))}return Kt!==st&&(Yt[Yt.length-1]+=" ... ".concat(st-H," more columns")),Bt!==F&&Yt.push("... ".concat(F-Lt," more rows")),Yt.join(`
`.concat(Z))}function et(Dt,Lt){var H=String(Dt);if(H.length<=Lt)return H.padEnd(Lt," ");var G=Dt.toPrecision(Lt-2);if(G.length<=Lt)return G;var F=Dt.toExponential(Lt-2),st=F.indexOf("e"),Bt=F.slice(st);return F.slice(0,Lt-Bt.length)+Bt}function at(Dt,Lt){Dt.prototype.add=function(G){return typeof G=="number"?this.addS(G):this.addM(G)},Dt.prototype.addS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)+G);return this},Dt.prototype.addM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)+G.get(F,st));return this},Dt.add=function(G,F){var st=new Lt(G);return st.add(F)},Dt.prototype.sub=function(G){return typeof G=="number"?this.subS(G):this.subM(G)},Dt.prototype.subS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)-G);return this},Dt.prototype.subM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)-G.get(F,st));return this},Dt.sub=function(G,F){var st=new Lt(G);return st.sub(F)},Dt.prototype.subtract=Dt.prototype.sub,Dt.prototype.subtractS=Dt.prototype.subS,Dt.prototype.subtractM=Dt.prototype.subM,Dt.subtract=Dt.sub,Dt.prototype.mul=function(G){return typeof G=="number"?this.mulS(G):this.mulM(G)},Dt.prototype.mulS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)*G);return this},Dt.prototype.mulM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)*G.get(F,st));return this},Dt.mul=function(G,F){var st=new Lt(G);return st.mul(F)},Dt.prototype.multiply=Dt.prototype.mul,Dt.prototype.multiplyS=Dt.prototype.mulS,Dt.prototype.multiplyM=Dt.prototype.mulM,Dt.multiply=Dt.mul,Dt.prototype.div=function(G){return typeof G=="number"?this.divS(G):this.divM(G)},Dt.prototype.divS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)/G);return this},Dt.prototype.divM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)/G.get(F,st));return this},Dt.div=function(G,F){var st=new Lt(G);return st.div(F)},Dt.prototype.divide=Dt.prototype.div,Dt.prototype.divideS=Dt.prototype.divS,Dt.prototype.divideM=Dt.prototype.divM,Dt.divide=Dt.div,Dt.prototype.mod=function(G){return typeof G=="number"?this.modS(G):this.modM(G)},Dt.prototype.modS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)%G);return this},Dt.prototype.modM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)%G.get(F,st));return this},Dt.mod=function(G,F){var st=new Lt(G);return st.mod(F)},Dt.prototype.modulus=Dt.prototype.mod,Dt.prototype.modulusS=Dt.prototype.modS,Dt.prototype.modulusM=Dt.prototype.modM,Dt.modulus=Dt.mod,Dt.prototype.and=function(G){return typeof G=="number"?this.andS(G):this.andM(G)},Dt.prototype.andS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)&G);return this},Dt.prototype.andM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)&G.get(F,st));return this},Dt.and=function(G,F){var st=new Lt(G);return st.and(F)},Dt.prototype.or=function(G){return typeof G=="number"?this.orS(G):this.orM(G)},Dt.prototype.orS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)|G);return this},Dt.prototype.orM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)|G.get(F,st));return this},Dt.or=function(G,F){var st=new Lt(G);return st.or(F)},Dt.prototype.xor=function(G){return typeof G=="number"?this.xorS(G):this.xorM(G)},Dt.prototype.xorS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)^G);return this},Dt.prototype.xorM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)^G.get(F,st));return this},Dt.xor=function(G,F){var st=new Lt(G);return st.xor(F)},Dt.prototype.leftShift=function(G){return typeof G=="number"?this.leftShiftS(G):this.leftShiftM(G)},Dt.prototype.leftShiftS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)<<G);return this},Dt.prototype.leftShiftM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)<<G.get(F,st));return this},Dt.leftShift=function(G,F){var st=new Lt(G);return st.leftShift(F)},Dt.prototype.signPropagatingRightShift=function(G){return typeof G=="number"?this.signPropagatingRightShiftS(G):this.signPropagatingRightShiftM(G)},Dt.prototype.signPropagatingRightShiftS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)>>G);return this},Dt.prototype.signPropagatingRightShiftM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)>>G.get(F,st));return this},Dt.signPropagatingRightShift=function(G,F){var st=new Lt(G);return st.signPropagatingRightShift(F)},Dt.prototype.rightShift=function(G){return typeof G=="number"?this.rightShiftS(G):this.rightShiftM(G)},Dt.prototype.rightShiftS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)>>>G);return this},Dt.prototype.rightShiftM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,this.get(F,st)>>>G.get(F,st));return this},Dt.rightShift=function(G,F){var st=new Lt(G);return st.rightShift(F)},Dt.prototype.zeroFillRightShift=Dt.prototype.rightShift,Dt.prototype.zeroFillRightShiftS=Dt.prototype.rightShiftS,Dt.prototype.zeroFillRightShiftM=Dt.prototype.rightShiftM,Dt.zeroFillRightShift=Dt.rightShift,Dt.prototype.not=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,~this.get(G,F));return this},Dt.not=function(G){var F=new Lt(G);return F.not()},Dt.prototype.abs=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.abs(this.get(G,F)));return this},Dt.abs=function(G){var F=new Lt(G);return F.abs()},Dt.prototype.acos=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.acos(this.get(G,F)));return this},Dt.acos=function(G){var F=new Lt(G);return F.acos()},Dt.prototype.acosh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.acosh(this.get(G,F)));return this},Dt.acosh=function(G){var F=new Lt(G);return F.acosh()},Dt.prototype.asin=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.asin(this.get(G,F)));return this},Dt.asin=function(G){var F=new Lt(G);return F.asin()},Dt.prototype.asinh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.asinh(this.get(G,F)));return this},Dt.asinh=function(G){var F=new Lt(G);return F.asinh()},Dt.prototype.atan=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.atan(this.get(G,F)));return this},Dt.atan=function(G){var F=new Lt(G);return F.atan()},Dt.prototype.atanh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.atanh(this.get(G,F)));return this},Dt.atanh=function(G){var F=new Lt(G);return F.atanh()},Dt.prototype.cbrt=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.cbrt(this.get(G,F)));return this},Dt.cbrt=function(G){var F=new Lt(G);return F.cbrt()},Dt.prototype.ceil=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.ceil(this.get(G,F)));return this},Dt.ceil=function(G){var F=new Lt(G);return F.ceil()},Dt.prototype.clz32=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.clz32(this.get(G,F)));return this},Dt.clz32=function(G){var F=new Lt(G);return F.clz32()},Dt.prototype.cos=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.cos(this.get(G,F)));return this},Dt.cos=function(G){var F=new Lt(G);return F.cos()},Dt.prototype.cosh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.cosh(this.get(G,F)));return this},Dt.cosh=function(G){var F=new Lt(G);return F.cosh()},Dt.prototype.exp=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.exp(this.get(G,F)));return this},Dt.exp=function(G){var F=new Lt(G);return F.exp()},Dt.prototype.expm1=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.expm1(this.get(G,F)));return this},Dt.expm1=function(G){var F=new Lt(G);return F.expm1()},Dt.prototype.floor=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.floor(this.get(G,F)));return this},Dt.floor=function(G){var F=new Lt(G);return F.floor()},Dt.prototype.fround=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.fround(this.get(G,F)));return this},Dt.fround=function(G){var F=new Lt(G);return F.fround()},Dt.prototype.log=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log(this.get(G,F)));return this},Dt.log=function(G){var F=new Lt(G);return F.log()},Dt.prototype.log1p=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log1p(this.get(G,F)));return this},Dt.log1p=function(G){var F=new Lt(G);return F.log1p()},Dt.prototype.log10=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log10(this.get(G,F)));return this},Dt.log10=function(G){var F=new Lt(G);return F.log10()},Dt.prototype.log2=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.log2(this.get(G,F)));return this},Dt.log2=function(G){var F=new Lt(G);return F.log2()},Dt.prototype.round=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.round(this.get(G,F)));return this},Dt.round=function(G){var F=new Lt(G);return F.round()},Dt.prototype.sign=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sign(this.get(G,F)));return this},Dt.sign=function(G){var F=new Lt(G);return F.sign()},Dt.prototype.sin=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sin(this.get(G,F)));return this},Dt.sin=function(G){var F=new Lt(G);return F.sin()},Dt.prototype.sinh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sinh(this.get(G,F)));return this},Dt.sinh=function(G){var F=new Lt(G);return F.sinh()},Dt.prototype.sqrt=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.sqrt(this.get(G,F)));return this},Dt.sqrt=function(G){var F=new Lt(G);return F.sqrt()},Dt.prototype.tan=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.tan(this.get(G,F)));return this},Dt.tan=function(G){var F=new Lt(G);return F.tan()},Dt.prototype.tanh=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.tanh(this.get(G,F)));return this},Dt.tanh=function(G){var F=new Lt(G);return F.tanh()},Dt.prototype.trunc=function(){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,Math.trunc(this.get(G,F)));return this},Dt.trunc=function(G){var F=new Lt(G);return F.trunc()},Dt.pow=function(G,F){var st=new Lt(G);return st.pow(F)},Dt.prototype.pow=function(G){return typeof G=="number"?this.powS(G):this.powM(G)},Dt.prototype.powS=function(G){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,Math.pow(this.get(F,st),G));return this},Dt.prototype.powM=function(G){if(G=Lt.checkMatrix(G),this.rows!==G.rows||this.columns!==G.columns)throw new RangeError("Matrices dimensions must be equal");for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.set(F,st,Math.pow(this.get(F,st),G.get(F,st)));return this}}function J(Dt,Lt,H){var G=H?Dt.rows:Dt.rows-1;if(Lt<0||Lt>G)throw new RangeError("Row index out of range")}function nt(Dt,Lt,H){var G=H?Dt.columns:Dt.columns-1;if(Lt<0||Lt>G)throw new RangeError("Column index out of range")}function mt(Dt,Lt){if(Lt.to1DArray&&(Lt=Lt.to1DArray()),Lt.length!==Dt.columns)throw new RangeError("vector size must be the same as the number of columns");return Lt}function Mt(Dt,Lt){if(Lt.to1DArray&&(Lt=Lt.to1DArray()),Lt.length!==Dt.rows)throw new RangeError("vector size must be the same as the number of rows");return Lt}function vt(Dt,Lt){if(!C(Lt))throw new TypeError("row indices must be an array");for(var H=0;H<Lt.length;H++)if(Lt[H]<0||Lt[H]>=Dt.rows)throw new RangeError("row indices are out of range")}function zt(Dt,Lt){if(!C(Lt))throw new TypeError("column indices must be an array");for(var H=0;H<Lt.length;H++)if(Lt[H]<0||Lt[H]>=Dt.columns)throw new RangeError("column indices are out of range")}function re(Dt,Lt,H,G,F){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(At("startRow",Lt),At("endRow",H),At("startColumn",G),At("endColumn",F),Lt>H||G>F||Lt<0||Lt>=Dt.rows||H<0||H>=Dt.rows||G<0||G>=Dt.columns||F<0||F>=Dt.columns)throw new RangeError("Submatrix indices are out of range")}function Rt(Dt){for(var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=[],G=0;G<Dt;G++)H.push(Lt);return H}function At(Dt,Lt){if(typeof Lt!="number")throw new TypeError("".concat(Dt," must be a number"))}function Q(Dt){if(Dt.isEmpty())throw new Error("Empty matrix has no elements to index")}function gt(Dt){for(var Lt=Rt(Dt.rows),H=0;H<Dt.rows;++H)for(var G=0;G<Dt.columns;++G)Lt[H]+=Dt.get(H,G);return Lt}function Vt(Dt){for(var Lt=Rt(Dt.columns),H=0;H<Dt.rows;++H)for(var G=0;G<Dt.columns;++G)Lt[G]+=Dt.get(H,G);return Lt}function Ht(Dt){for(var Lt=0,H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Lt+=Dt.get(H,G);return Lt}function It(Dt){for(var Lt=Rt(Dt.rows,1),H=0;H<Dt.rows;++H)for(var G=0;G<Dt.columns;++G)Lt[H]*=Dt.get(H,G);return Lt}function de(Dt){for(var Lt=Rt(Dt.columns,1),H=0;H<Dt.rows;++H)for(var G=0;G<Dt.columns;++G)Lt[G]*=Dt.get(H,G);return Lt}function De(Dt){for(var Lt=1,H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Lt*=Dt.get(H,G);return Lt}function Ye(Dt,Lt,H){for(var G=Dt.rows,F=Dt.columns,st=[],Bt=0;Bt<G;Bt++){for(var Kt=0,Yt=0,he=0,ot=0;ot<F;ot++)he=Dt.get(Bt,ot)-H[Bt],Kt+=he,Yt+=he*he;Lt?st.push((Yt-Kt*Kt/F)/(F-1)):st.push((Yt-Kt*Kt/F)/F)}return st}function kt(Dt,Lt,H){for(var G=Dt.rows,F=Dt.columns,st=[],Bt=0;Bt<F;Bt++){for(var Kt=0,Yt=0,he=0,ot=0;ot<G;ot++)he=Dt.get(ot,Bt)-H[Bt],Kt+=he,Yt+=he*he;Lt?st.push((Yt-Kt*Kt/G)/(G-1)):st.push((Yt-Kt*Kt/G)/G)}return st}function Pt(Dt,Lt,H){for(var G=Dt.rows,F=Dt.columns,st=G*F,Bt=0,Kt=0,Yt=0,he=0;he<G;he++)for(var ot=0;ot<F;ot++)Yt=Dt.get(he,ot)-H,Bt+=Yt,Kt+=Yt*Yt;return Lt?(Kt-Bt*Bt/st)/(st-1):(Kt-Bt*Bt/st)/st}function _t(Dt,Lt){for(var H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Dt.set(H,G,Dt.get(H,G)-Lt[H])}function jt(Dt,Lt){for(var H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Dt.set(H,G,Dt.get(H,G)-Lt[G])}function Qt(Dt,Lt){for(var H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Dt.set(H,G,Dt.get(H,G)-Lt)}function Tt(Dt){for(var Lt=[],H=0;H<Dt.rows;H++){for(var G=0,F=0;F<Dt.columns;F++)G+=Math.pow(Dt.get(H,F),2)/(Dt.columns-1);Lt.push(Math.sqrt(G))}return Lt}function Zt(Dt,Lt){for(var H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Dt.set(H,G,Dt.get(H,G)/Lt[H])}function Ee(Dt){for(var Lt=[],H=0;H<Dt.columns;H++){for(var G=0,F=0;F<Dt.rows;F++)G+=Math.pow(Dt.get(F,H),2)/(Dt.rows-1);Lt.push(Math.sqrt(G))}return Lt}function dt(Dt,Lt){for(var H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Dt.set(H,G,Dt.get(H,G)/Lt[G])}function bt(Dt){for(var Lt=Dt.size-1,H=0,G=0;G<Dt.columns;G++)for(var F=0;F<Dt.rows;F++)H+=Math.pow(Dt.get(F,G),2)/Lt;return Math.sqrt(H)}function wt(Dt,Lt){for(var H=0;H<Dt.rows;H++)for(var G=0;G<Dt.columns;G++)Dt.set(H,G,Dt.get(H,G)/Lt)}var D=function(){function Dt(){p()(this,Dt)}return I()(Dt,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(H){if(typeof H!="function")throw new TypeError("callback must be a function");for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.call(this,G,F);return this}},{key:"to1DArray",value:function(){for(var H=[],G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.push(this.get(G,F));return H}},{key:"to2DArray",value:function(){for(var H=[],G=0;G<this.rows;G++){H.push([]);for(var F=0;F<this.columns;F++)H[G].push(this.get(G,F))}return H}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var H=0;H<this.rows;H++)for(var G=0;G<=H;G++)if(this.get(H,G)!==this.get(G,H))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var H=0,G=0,F=-1,st=!0,Bt=!1;H<this.rows&&st;){for(G=0,Bt=!1;G<this.columns&&Bt===!1;)this.get(H,G)===0?G++:this.get(H,G)===1&&G>F?(Bt=!0,F=G):(st=!1,Bt=!0);H++}return st}},{key:"isReducedEchelonForm",value:function(){for(var H=0,G=0,F=-1,st=!0,Bt=!1;H<this.rows&&st;){for(G=0,Bt=!1;G<this.columns&&Bt===!1;)this.get(H,G)===0?G++:this.get(H,G)===1&&G>F?(Bt=!0,F=G):(st=!1,Bt=!0);for(var Kt=G+1;Kt<this.rows;Kt++)this.get(H,Kt)!==0&&(st=!1);H++}return st}},{key:"echelonForm",value:function(){for(var H=this.clone(),G=0,F=0;G<H.rows&&F<H.columns;){for(var st=G,Bt=G;Bt<H.rows;Bt++)H.get(Bt,F)>H.get(st,F)&&(st=Bt);if(H.get(st,F)===0)F++;else{H.swapRows(G,st);for(var Kt=H.get(G,F),Yt=F;Yt<H.columns;Yt++)H.set(G,Yt,H.get(G,Yt)/Kt);for(var he=G+1;he<H.rows;he++){var ot=H.get(he,F)/H.get(G,F);H.set(he,F,0);for(var yt=F+1;yt<H.columns;yt++)H.set(he,yt,H.get(he,yt)-H.get(G,yt)*ot)}G++,F++}}return H}},{key:"reducedEchelonForm",value:function(){for(var H=this.echelonForm(),G=H.columns,F=H.rows,st=F-1;st>=0;)if(H.maxRow(st)===0)st--;else{for(var Bt=0,Kt=!1;Bt<F&&Kt===!1;)H.get(st,Bt)===1?Kt=!0:Bt++;for(var Yt=0;Yt<st;Yt++)for(var he=H.get(Yt,Bt),ot=Bt;ot<G;ot++){var yt=H.get(Yt,ot)-he*H.get(st,ot);H.set(Yt,ot,yt)}st--}return H}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(H)!=="object")throw new TypeError("options must be an object");var G=H.rows,F=G===void 0?1:G,st=H.columns,Bt=st===void 0?1:st;if(!Number.isInteger(F)||F<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Bt)||Bt<=0)throw new TypeError("columns must be a positive integer");for(var Kt=new ft(this.rows*F,this.columns*Bt),Yt=0;Yt<F;Yt++)for(var he=0;he<Bt;he++)Kt.setSubMatrix(this,this.rows*Yt,this.columns*he);return Kt}},{key:"fill",value:function(H){for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,H);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(H){J(this,H);for(var G=[],F=0;F<this.columns;F++)G.push(this.get(H,F));return G}},{key:"getRowVector",value:function(H){return ft.rowVector(this.getRow(H))}},{key:"setRow",value:function(H,G){J(this,H),G=mt(this,G);for(var F=0;F<this.columns;F++)this.set(H,F,G[F]);return this}},{key:"swapRows",value:function(H,G){J(this,H),J(this,G);for(var F=0;F<this.columns;F++){var st=this.get(H,F);this.set(H,F,this.get(G,F)),this.set(G,F,st)}return this}},{key:"getColumn",value:function(H){nt(this,H);for(var G=[],F=0;F<this.rows;F++)G.push(this.get(F,H));return G}},{key:"getColumnVector",value:function(H){return ft.columnVector(this.getColumn(H))}},{key:"setColumn",value:function(H,G){nt(this,H),G=Mt(this,G);for(var F=0;F<this.rows;F++)this.set(F,H,G[F]);return this}},{key:"swapColumns",value:function(H,G){nt(this,H),nt(this,G);for(var F=0;F<this.rows;F++){var st=this.get(F,H);this.set(F,H,this.get(F,G)),this.set(F,G,st)}return this}},{key:"addRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)+H[F]);return this}},{key:"subRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)-H[F]);return this}},{key:"mulRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)*H[F]);return this}},{key:"divRowVector",value:function(H){H=mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)/H[F]);return this}},{key:"addColumnVector",value:function(H){H=Mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)+H[G]);return this}},{key:"subColumnVector",value:function(H){H=Mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)-H[G]);return this}},{key:"mulColumnVector",value:function(H){H=Mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)*H[G]);return this}},{key:"divColumnVector",value:function(H){H=Mt(this,H);for(var G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)this.set(G,F,this.get(G,F)/H[G]);return this}},{key:"mulRow",value:function(H,G){J(this,H);for(var F=0;F<this.columns;F++)this.set(H,F,this.get(H,F)*G);return this}},{key:"mulColumn",value:function(H,G){nt(this,H);for(var F=0;F<this.rows;F++)this.set(F,H,this.get(F,H)*G);return this}},{key:"max",value:function(H){if(this.isEmpty())return NaN;switch(H){case"row":{for(var G=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.get(F,st)>G[F]&&(G[F]=this.get(F,st));return G}case"column":{for(var Bt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Kt=0;Kt<this.rows;Kt++)for(var Yt=0;Yt<this.columns;Yt++)this.get(Kt,Yt)>Bt[Yt]&&(Bt[Yt]=this.get(Kt,Yt));return Bt}case void 0:{for(var he=this.get(0,0),ot=0;ot<this.rows;ot++)for(var yt=0;yt<this.columns;yt++)this.get(ot,yt)>he&&(he=this.get(ot,yt));return he}default:throw new Error("invalid option: ".concat(H))}}},{key:"maxIndex",value:function(){Q(this);for(var H=this.get(0,0),G=[0,0],F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.get(F,st)>H&&(H=this.get(F,st),G[0]=F,G[1]=st);return G}},{key:"min",value:function(H){if(this.isEmpty())return NaN;switch(H){case"row":{for(var G=new Array(this.rows).fill(Number.POSITIVE_INFINITY),F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.get(F,st)<G[F]&&(G[F]=this.get(F,st));return G}case"column":{for(var Bt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Kt=0;Kt<this.rows;Kt++)for(var Yt=0;Yt<this.columns;Yt++)this.get(Kt,Yt)<Bt[Yt]&&(Bt[Yt]=this.get(Kt,Yt));return Bt}case void 0:{for(var he=this.get(0,0),ot=0;ot<this.rows;ot++)for(var yt=0;yt<this.columns;yt++)this.get(ot,yt)<he&&(he=this.get(ot,yt));return he}default:throw new Error("invalid option: ".concat(H))}}},{key:"minIndex",value:function(){Q(this);for(var H=this.get(0,0),G=[0,0],F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)this.get(F,st)<H&&(H=this.get(F,st),G[0]=F,G[1]=st);return G}},{key:"maxRow",value:function(H){if(J(this,H),this.isEmpty())return NaN;for(var G=this.get(H,0),F=1;F<this.columns;F++)this.get(H,F)>G&&(G=this.get(H,F));return G}},{key:"maxRowIndex",value:function(H){J(this,H),Q(this);for(var G=this.get(H,0),F=[H,0],st=1;st<this.columns;st++)this.get(H,st)>G&&(G=this.get(H,st),F[1]=st);return F}},{key:"minRow",value:function(H){if(J(this,H),this.isEmpty())return NaN;for(var G=this.get(H,0),F=1;F<this.columns;F++)this.get(H,F)<G&&(G=this.get(H,F));return G}},{key:"minRowIndex",value:function(H){J(this,H),Q(this);for(var G=this.get(H,0),F=[H,0],st=1;st<this.columns;st++)this.get(H,st)<G&&(G=this.get(H,st),F[1]=st);return F}},{key:"maxColumn",value:function(H){if(nt(this,H),this.isEmpty())return NaN;for(var G=this.get(0,H),F=1;F<this.rows;F++)this.get(F,H)>G&&(G=this.get(F,H));return G}},{key:"maxColumnIndex",value:function(H){nt(this,H),Q(this);for(var G=this.get(0,H),F=[0,H],st=1;st<this.rows;st++)this.get(st,H)>G&&(G=this.get(st,H),F[0]=st);return F}},{key:"minColumn",value:function(H){if(nt(this,H),this.isEmpty())return NaN;for(var G=this.get(0,H),F=1;F<this.rows;F++)this.get(F,H)<G&&(G=this.get(F,H));return G}},{key:"minColumnIndex",value:function(H){nt(this,H),Q(this);for(var G=this.get(0,H),F=[0,H],st=1;st<this.rows;st++)this.get(st,H)<G&&(G=this.get(st,H),F[0]=st);return F}},{key:"diag",value:function(){for(var H=Math.min(this.rows,this.columns),G=[],F=0;F<H;F++)G.push(this.get(F,F));return G}},{key:"norm",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",G=0;if(H==="max")return this.max();if(H==="frobenius"){for(var F=0;F<this.rows;F++)for(var st=0;st<this.columns;st++)G=G+this.get(F,st)*this.get(F,st);return Math.sqrt(G)}else throw new RangeError("unknown norm type: ".concat(H))}},{key:"cumulativeSum",value:function(){for(var H=0,G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H+=this.get(G,F),this.set(G,F,H);return this}},{key:"dot",value:function(H){Dt.isMatrix(H)&&(H=H.to1DArray());var G=this.to1DArray();if(G.length!==H.length)throw new RangeError("vectors do not have the same size");for(var F=0,st=0;st<G.length;st++)F+=G[st]*H[st];return F}},{key:"mmul",value:function(H){H=ft.checkMatrix(H);for(var G=this.rows,F=this.columns,st=H.columns,Bt=new ft(G,st),Kt=new Float64Array(F),Yt=0;Yt<st;Yt++){for(var he=0;he<F;he++)Kt[he]=H.get(he,Yt);for(var ot=0;ot<G;ot++){for(var yt=0,te=0;te<F;te++)yt+=this.get(ot,te)*Kt[te];Bt.set(ot,Yt,yt)}}return Bt}},{key:"strassen2x2",value:function(H){H=ft.checkMatrix(H);var G=new ft(2,2),F=this.get(0,0),st=H.get(0,0),Bt=this.get(0,1),Kt=H.get(0,1),Yt=this.get(1,0),he=H.get(1,0),ot=this.get(1,1),yt=H.get(1,1),te=(F+ot)*(st+yt),Me=(Yt+ot)*st,Se=F*(Kt-yt),er=ot*(he-st),sr=(F+Bt)*yt,ye=(Yt-F)*(st+Kt),Fe=(Bt-ot)*(he+yt),tr=te+er-sr+Fe,Sr=Se+sr,Er=Me+er,me=te-Me+Se+ye;return G.set(0,0,tr),G.set(0,1,Sr),G.set(1,0,Er),G.set(1,1,me),G}},{key:"strassen3x3",value:function(H){H=ft.checkMatrix(H);var G=new ft(3,3),F=this.get(0,0),st=this.get(0,1),Bt=this.get(0,2),Kt=this.get(1,0),Yt=this.get(1,1),he=this.get(1,2),ot=this.get(2,0),yt=this.get(2,1),te=this.get(2,2),Me=H.get(0,0),Se=H.get(0,1),er=H.get(0,2),sr=H.get(1,0),ye=H.get(1,1),Fe=H.get(1,2),tr=H.get(2,0),Sr=H.get(2,1),Er=H.get(2,2),me=(F+st+Bt-Kt-Yt-yt-te)*ye,Ft=(F-Kt)*(-Se+ye),ne=Yt*(-Me+Se+sr-ye-Fe-tr+Er),Ie=(-F+Kt+Yt)*(Me-Se+ye),Ce=(Kt+Yt)*(-Me+Se),Ue=F*Me,Xe=(-F+ot+yt)*(Me-er+Fe),Wr=(-F+ot)*(er-Fe),$r=(ot+yt)*(-Me+er),mn=(F+st+Bt-Yt-he-ot-yt)*Fe,Nn=yt*(-Me+er+sr-ye-Fe-tr+Sr),kn=(-Bt+yt+te)*(ye+tr-Sr),Jn=(Bt-te)*(ye-Sr),ri=Bt*tr,Ri=(yt+te)*(-tr+Sr),di=(-Bt+Yt+he)*(Fe+tr-Er),Ki=(Bt-he)*(Fe-Er),yo=(Yt+he)*(-tr+Er),Ea=st*sr,ta=he*Sr,mo=Kt*er,Na=ot*Se,To=te*Er,vi=Ue+ri+Ea,xa=me+Ie+Ce+Ue+kn+ri+Ri,Vo=Ue+Xe+$r+mn+ri+di+yo,zi=Ft+ne+Ie+Ue+ri+di+Ki,ao=Ft+Ie+Ce+Ue+ta,jo=ri+di+Ki+yo+mo,ps=Ue+Xe+Wr+Nn+kn+Jn+ri,Io=kn+Jn+ri+Ri+Na,Ja=Ue+Xe+Wr+$r+To;return G.set(0,0,vi),G.set(0,1,xa),G.set(0,2,Vo),G.set(1,0,zi),G.set(1,1,ao),G.set(1,2,jo),G.set(2,0,ps),G.set(2,1,Io),G.set(2,2,Ja),G}},{key:"mmulStrassen",value:function(H){H=ft.checkMatrix(H);var G=this.clone(),F=G.rows,st=G.columns,Bt=H.rows,Kt=H.columns;st!==Bt&&console.warn("Multiplying ".concat(F," x ").concat(st," and ").concat(Bt," x ").concat(Kt," matrix: dimensions do not match."));function Yt(te,Me,Se){var er=te.rows,sr=te.columns;if(er===Me&&sr===Se)return te;var ye=Dt.zeros(Me,Se);return ye=ye.setSubMatrix(te,0,0),ye}var he=Math.max(F,Bt),ot=Math.max(st,Kt);G=Yt(G,he,ot),H=Yt(H,he,ot);function yt(te,Me,Se,er){if(Se<=512||er<=512)return te.mmul(Me);Se%2===1&&er%2===1?(te=Yt(te,Se+1,er+1),Me=Yt(Me,Se+1,er+1)):Se%2===1?(te=Yt(te,Se+1,er),Me=Yt(Me,Se+1,er)):er%2===1&&(te=Yt(te,Se,er+1),Me=Yt(Me,Se,er+1));var sr=parseInt(te.rows/2,10),ye=parseInt(te.columns/2,10),Fe=te.subMatrix(0,sr-1,0,ye-1),tr=Me.subMatrix(0,sr-1,0,ye-1),Sr=te.subMatrix(0,sr-1,ye,te.columns-1),Er=Me.subMatrix(0,sr-1,ye,Me.columns-1),me=te.subMatrix(sr,te.rows-1,0,ye-1),Ft=Me.subMatrix(sr,Me.rows-1,0,ye-1),ne=te.subMatrix(sr,te.rows-1,ye,te.columns-1),Ie=Me.subMatrix(sr,Me.rows-1,ye,Me.columns-1),Ce=yt(Dt.add(Fe,ne),Dt.add(tr,Ie),sr,ye),Ue=yt(Dt.add(me,ne),tr,sr,ye),Xe=yt(Fe,Dt.sub(Er,Ie),sr,ye),Wr=yt(ne,Dt.sub(Ft,tr),sr,ye),$r=yt(Dt.add(Fe,Sr),Ie,sr,ye),mn=yt(Dt.sub(me,Fe),Dt.add(tr,Er),sr,ye),Nn=yt(Dt.sub(Sr,ne),Dt.add(Ft,Ie),sr,ye),kn=Dt.add(Ce,Wr);kn.sub($r),kn.add(Nn);var Jn=Dt.add(Xe,$r),ri=Dt.add(Ue,Wr),Ri=Dt.sub(Ce,Ue);Ri.add(Xe),Ri.add(mn);var di=Dt.zeros(2*kn.rows,2*kn.columns);return di=di.setSubMatrix(kn,0,0),di=di.setSubMatrix(Jn,kn.rows,0),di=di.setSubMatrix(ri,0,kn.columns),di=di.setSubMatrix(Ri,kn.rows,kn.columns),di.subMatrix(0,Se-1,0,er-1)}return yt(G,H,he,ot)}},{key:"scaleRows",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(H)!=="object")throw new TypeError("options must be an object");var G=H.min,F=G===void 0?0:G,st=H.max,Bt=st===void 0?1:st;if(!Number.isFinite(F))throw new TypeError("min must be a number");if(!Number.isFinite(Bt))throw new TypeError("max must be a number");if(F>=Bt)throw new RangeError("min must be smaller than max");for(var Kt=new ft(this.rows,this.columns),Yt=0;Yt<this.rows;Yt++){var he=this.getRow(Yt);he.length>0&&l(he,{min:F,max:Bt,output:he}),Kt.setRow(Yt,he)}return Kt}},{key:"scaleColumns",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(y()(H)!=="object")throw new TypeError("options must be an object");var G=H.min,F=G===void 0?0:G,st=H.max,Bt=st===void 0?1:st;if(!Number.isFinite(F))throw new TypeError("min must be a number");if(!Number.isFinite(Bt))throw new TypeError("max must be a number");if(F>=Bt)throw new RangeError("min must be smaller than max");for(var Kt=new ft(this.rows,this.columns),Yt=0;Yt<this.columns;Yt++){var he=this.getColumn(Yt);he.length&&l(he,{min:F,max:Bt,output:he}),Kt.setColumn(Yt,he)}return Kt}},{key:"flipRows",value:function(){for(var H=Math.ceil(this.columns/2),G=0;G<this.rows;G++)for(var F=0;F<H;F++){var st=this.get(G,F),Bt=this.get(G,this.columns-1-F);this.set(G,F,Bt),this.set(G,this.columns-1-F,st)}return this}},{key:"flipColumns",value:function(){for(var H=Math.ceil(this.rows/2),G=0;G<this.columns;G++)for(var F=0;F<H;F++){var st=this.get(F,G),Bt=this.get(this.rows-1-F,G);this.set(F,G,Bt),this.set(this.rows-1-F,G,st)}return this}},{key:"kroneckerProduct",value:function(H){H=ft.checkMatrix(H);for(var G=this.rows,F=this.columns,st=H.rows,Bt=H.columns,Kt=new ft(G*st,F*Bt),Yt=0;Yt<G;Yt++)for(var he=0;he<F;he++)for(var ot=0;ot<st;ot++)for(var yt=0;yt<Bt;yt++)Kt.set(st*Yt+ot,Bt*he+yt,this.get(Yt,he)*H.get(ot,yt));return Kt}},{key:"kroneckerSum",value:function(H){if(H=ft.checkMatrix(H),!this.isSquare()||!H.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var G=this.rows,F=H.rows,st=this.kroneckerProduct(ft.eye(F,F)),Bt=ft.eye(G,G).kroneckerProduct(H);return st.add(Bt)}},{key:"transpose",value:function(){for(var H=new ft(this.columns,this.rows),G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.set(F,G,this.get(G,F));return H}},{key:"sortRows",value:function(){for(var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rt,G=0;G<this.rows;G++)this.setRow(G,this.getRow(G).sort(H));return this}},{key:"sortColumns",value:function(){for(var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rt,G=0;G<this.columns;G++)this.setColumn(G,this.getColumn(G).sort(H));return this}},{key:"subMatrix",value:function(H,G,F,st){re(this,H,G,F,st);for(var Bt=new ft(G-H+1,st-F+1),Kt=H;Kt<=G;Kt++)for(var Yt=F;Yt<=st;Yt++)Bt.set(Kt-H,Yt-F,this.get(Kt,Yt));return Bt}},{key:"subMatrixRow",value:function(H,G,F){if(G===void 0&&(G=0),F===void 0&&(F=this.columns-1),G>F||G<0||G>=this.columns||F<0||F>=this.columns)throw new RangeError("Argument out of range");for(var st=new ft(H.length,F-G+1),Bt=0;Bt<H.length;Bt++)for(var Kt=G;Kt<=F;Kt++){if(H[Bt]<0||H[Bt]>=this.rows)throw new RangeError("Row index out of range: ".concat(H[Bt]));st.set(Bt,Kt-G,this.get(H[Bt],Kt))}return st}},{key:"subMatrixColumn",value:function(H,G,F){if(G===void 0&&(G=0),F===void 0&&(F=this.rows-1),G>F||G<0||G>=this.rows||F<0||F>=this.rows)throw new RangeError("Argument out of range");for(var st=new ft(F-G+1,H.length),Bt=0;Bt<H.length;Bt++)for(var Kt=G;Kt<=F;Kt++){if(H[Bt]<0||H[Bt]>=this.columns)throw new RangeError("Column index out of range: ".concat(H[Bt]));st.set(Kt-G,Bt,this.get(Kt,H[Bt]))}return st}},{key:"setSubMatrix",value:function(H,G,F){if(H=ft.checkMatrix(H),H.isEmpty())return this;var st=G+H.rows-1,Bt=F+H.columns-1;re(this,G,st,F,Bt);for(var Kt=0;Kt<H.rows;Kt++)for(var Yt=0;Yt<H.columns;Yt++)this.set(G+Kt,F+Yt,H.get(Kt,Yt));return this}},{key:"selection",value:function(H,G){vt(this,H),zt(this,G);for(var F=new ft(H.length,G.length),st=0;st<H.length;st++)for(var Bt=H[st],Kt=0;Kt<G.length;Kt++){var Yt=G[Kt];F.set(st,Kt,this.get(Bt,Yt))}return F}},{key:"trace",value:function(){for(var H=Math.min(this.rows,this.columns),G=0,F=0;F<H;F++)G+=this.get(F,F);return G}},{key:"clone",value:function(){for(var H=new ft(this.rows,this.columns),G=0;G<this.rows;G++)for(var F=0;F<this.columns;F++)H.set(G,F,this.get(G,F));return H}},{key:"sum",value:function(H){switch(H){case"row":return gt(this);case"column":return Vt(this);case void 0:return Ht(this);default:throw new Error("invalid option: ".concat(H))}}},{key:"product",value:function(H){switch(H){case"row":return It(this);case"column":return de(this);case void 0:return De(this);default:throw new Error("invalid option: ".concat(H))}}},{key:"mean",value:function(H){var G=this.sum(H);switch(H){case"row":{for(var F=0;F<this.rows;F++)G[F]/=this.columns;return G}case"column":{for(var st=0;st<this.columns;st++)G[st]/=this.rows;return G}case void 0:return G/this.size;default:throw new Error("invalid option: ".concat(H))}}},{key:"variance",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(H)==="object"&&(G=H,H=void 0),y()(G)!=="object")throw new TypeError("options must be an object");var F=G,st=F.unbiased,Bt=st===void 0?!0:st,Kt=F.mean,Yt=Kt===void 0?this.mean(H):Kt;if(typeof Bt!="boolean")throw new TypeError("unbiased must be a boolean");switch(H){case"row":{if(!C(Yt))throw new TypeError("mean must be an array");return Ye(this,Bt,Yt)}case"column":{if(!C(Yt))throw new TypeError("mean must be an array");return kt(this,Bt,Yt)}case void 0:{if(typeof Yt!="number")throw new TypeError("mean must be a number");return Pt(this,Bt,Yt)}default:throw new Error("invalid option: ".concat(H))}}},{key:"standardDeviation",value:function(H,G){y()(H)==="object"&&(G=H,H=void 0);var F=this.variance(H,G);if(H===void 0)return Math.sqrt(F);for(var st=0;st<F.length;st++)F[st]=Math.sqrt(F[st]);return F}},{key:"center",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(H)==="object"&&(G=H,H=void 0),y()(G)!=="object")throw new TypeError("options must be an object");var F=G,st=F.center,Bt=st===void 0?this.mean(H):st;switch(H){case"row":{if(!C(Bt))throw new TypeError("center must be an array");return _t(this,Bt),this}case"column":{if(!C(Bt))throw new TypeError("center must be an array");return jt(this,Bt),this}case void 0:{if(typeof Bt!="number")throw new TypeError("center must be a number");return Qt(this,Bt),this}default:throw new Error("invalid option: ".concat(H))}}},{key:"scale",value:function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(y()(H)==="object"&&(G=H,H=void 0),y()(G)!=="object")throw new TypeError("options must be an object");var F=G.scale;switch(H){case"row":{if(F===void 0)F=Tt(this);else if(!C(F))throw new TypeError("scale must be an array");return Zt(this,F),this}case"column":{if(F===void 0)F=Ee(this);else if(!C(F))throw new TypeError("scale must be an array");return dt(this,F),this}case void 0:{if(F===void 0)F=bt(this);else if(typeof F!="number")throw new TypeError("scale must be a number");return wt(this,F),this}default:throw new Error("invalid option: ".concat(H))}}},{key:"toString",value:function(H){return W(this,H)}}],[{key:"from1DArray",value:function(H,G,F){var st=H*G;if(st!==F.length)throw new RangeError("data length does not match given dimensions");for(var Bt=new ft(H,G),Kt=0;Kt<H;Kt++)for(var Yt=0;Yt<G;Yt++)Bt.set(Kt,Yt,F[Kt*G+Yt]);return Bt}},{key:"rowVector",value:function(H){for(var G=new ft(1,H.length),F=0;F<H.length;F++)G.set(0,F,H[F]);return G}},{key:"columnVector",value:function(H){for(var G=new ft(H.length,1),F=0;F<H.length;F++)G.set(F,0,H[F]);return G}},{key:"zeros",value:function(H,G){return new ft(H,G)}},{key:"ones",value:function(H,G){return new ft(H,G).fill(1)}},{key:"rand",value:function(H,G){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y()(F)!=="object")throw new TypeError("options must be an object");for(var st=F.random,Bt=st===void 0?Math.random:st,Kt=new ft(H,G),Yt=0;Yt<H;Yt++)for(var he=0;he<G;he++)Kt.set(Yt,he,Bt());return Kt}},{key:"randInt",value:function(H,G){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y()(F)!=="object")throw new TypeError("options must be an object");var st=F.min,Bt=st===void 0?0:st,Kt=F.max,Yt=Kt===void 0?1e3:Kt,he=F.random,ot=he===void 0?Math.random:he;if(!Number.isInteger(Bt))throw new TypeError("min must be an integer");if(!Number.isInteger(Yt))throw new TypeError("max must be an integer");if(Bt>=Yt)throw new RangeError("min must be smaller than max");for(var yt=Yt-Bt,te=new ft(H,G),Me=0;Me<H;Me++)for(var Se=0;Se<G;Se++){var er=Bt+Math.round(ot()*yt);te.set(Me,Se,er)}return te}},{key:"eye",value:function(H,G,F){G===void 0&&(G=H),F===void 0&&(F=1);for(var st=Math.min(H,G),Bt=this.zeros(H,G),Kt=0;Kt<st;Kt++)Bt.set(Kt,Kt,F);return Bt}},{key:"diag",value:function(H,G,F){var st=H.length;G===void 0&&(G=st),F===void 0&&(F=G);for(var Bt=Math.min(st,G,F),Kt=this.zeros(G,F),Yt=0;Yt<Bt;Yt++)Kt.set(Yt,Yt,H[Yt]);return Kt}},{key:"min",value:function(H,G){H=this.checkMatrix(H),G=this.checkMatrix(G);for(var F=H.rows,st=H.columns,Bt=new ft(F,st),Kt=0;Kt<F;Kt++)for(var Yt=0;Yt<st;Yt++)Bt.set(Kt,Yt,Math.min(H.get(Kt,Yt),G.get(Kt,Yt)));return Bt}},{key:"max",value:function(H,G){H=this.checkMatrix(H),G=this.checkMatrix(G);for(var F=H.rows,st=H.columns,Bt=new this(F,st),Kt=0;Kt<F;Kt++)for(var Yt=0;Yt<st;Yt++)Bt.set(Kt,Yt,Math.max(H.get(Kt,Yt),G.get(Kt,Yt)));return Bt}},{key:"checkMatrix",value:function(H){return Dt.isMatrix(H)?H:new ft(H)}},{key:"isMatrix",value:function(H){return H!=null&&H.klass==="Matrix"}}]),Dt}();D.prototype.klass="Matrix",typeof Symbol!="undefined"&&(D.prototype[Symbol.for("nodejs.util.inspect.custom")]=X);function rt(Dt,Lt){return Dt-Lt}function Nt(Dt){return Dt.every(function(Lt){return typeof Lt=="number"})}D.random=D.rand,D.randomInt=D.randInt,D.diagonal=D.diag,D.prototype.diagonal=D.prototype.diag,D.identity=D.eye,D.prototype.negate=D.prototype.neg,D.prototype.tensorProduct=D.prototype.kroneckerProduct;var ft=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F){var st;if(p()(this,H),st=Lt.call(this),H.isMatrix(G))return z()(st,G.clone());if(Number.isInteger(G)&&G>=0)if(st.data=[],Number.isInteger(F)&&F>=0)for(var Bt=0;Bt<G;Bt++)st.data.push(new Float64Array(F));else throw new TypeError("nColumns must be a positive integer");else if(C(G)){var Kt=G;if(G=Kt.length,F=G?Kt[0].length:0,typeof F!="number")throw new TypeError("Data must be a 2D array with at least one element");st.data=[];for(var Yt=0;Yt<G;Yt++){if(Kt[Yt].length!==F)throw new RangeError("Inconsistent array dimensions");if(!Nt(Kt[Yt]))throw new TypeError("Input data contains non-numeric values");st.data.push(Float64Array.from(Kt[Yt]))}}else throw new TypeError("First argument must be a positive number or an array");return st.rows=G,st.columns=F,st}return I()(H,[{key:"set",value:function(F,st,Bt){return this.data[F][st]=Bt,this}},{key:"get",value:function(F,st){return this.data[F][st]}},{key:"removeRow",value:function(F){return J(this,F),this.data.splice(F,1),this.rows-=1,this}},{key:"addRow",value:function(F,st){return st===void 0&&(st=F,F=this.rows),J(this,F,!0),st=Float64Array.from(mt(this,st)),this.data.splice(F,0,st),this.rows+=1,this}},{key:"removeColumn",value:function(F){nt(this,F);for(var st=0;st<this.rows;st++){for(var Bt=new Float64Array(this.columns-1),Kt=0;Kt<F;Kt++)Bt[Kt]=this.data[st][Kt];for(var Yt=F+1;Yt<this.columns;Yt++)Bt[Yt-1]=this.data[st][Yt];this.data[st]=Bt}return this.columns-=1,this}},{key:"addColumn",value:function(F,st){typeof st=="undefined"&&(st=F,F=this.columns),nt(this,F,!0),st=Mt(this,st);for(var Bt=0;Bt<this.rows;Bt++){for(var Kt=new Float64Array(this.columns+1),Yt=0;Yt<F;Yt++)Kt[Yt]=this.data[Bt][Yt];for(Kt[Yt++]=st[Bt];Yt<this.columns+1;Yt++)Kt[Yt]=this.data[Bt][Yt-1];this.data[Bt]=Kt}return this.columns+=1,this}}]),H}(D);at(D,ft);var ie=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F,st){var Bt;return p()(this,H),Bt=Lt.call(this),Bt.matrix=G,Bt.rows=F,Bt.columns=st,Bt}return I()(H)}(D),ge=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F){var st;return p()(this,H),nt(G,F),st=Lt.call(this,G,G.rows,1),st.column=F,st}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(F,this.column,Bt),this}},{key:"get",value:function(F){return this.matrix.get(F,this.column)}}]),H}(ie),Ge=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F){var st;return p()(this,H),zt(G,F),st=Lt.call(this,G,G.rows,F.length),st.columnIndices=F,st}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(F,this.columnIndices[st],Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(F,this.columnIndices[st])}}]),H}(ie),Re=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G){return p()(this,H),Lt.call(this,G,G.rows,G.columns)}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(F,this.columns-st-1,Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(F,this.columns-st-1)}}]),H}(ie),qe=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G){return p()(this,H),Lt.call(this,G,G.rows,G.columns)}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(this.rows-F-1,st,Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(this.rows-F-1,st)}}]),H}(ie),Ve=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F){var st;return p()(this,H),J(G,F),st=Lt.call(this,G,1,G.columns),st.row=F,st}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(this.row,st,Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(this.row,st)}}]),H}(ie),le=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F){var st;return p()(this,H),vt(G,F),st=Lt.call(this,G,F.length,G.columns),st.rowIndices=F,st}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(this.rowIndices[F],st,Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(this.rowIndices[F],st)}}]),H}(ie),Le=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F,st){var Bt;return p()(this,H),vt(G,F),zt(G,st),Bt=Lt.call(this,G,F.length,st.length),Bt.rowIndices=F,Bt.columnIndices=st,Bt}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(this.rowIndices[F],this.columnIndices[st],Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(this.rowIndices[F],this.columnIndices[st])}}]),H}(ie),je=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G,F,st,Bt,Kt){var Yt;return p()(this,H),re(G,F,st,Bt,Kt),Yt=Lt.call(this,G,st-F+1,Kt-Bt+1),Yt.startRow=F,Yt.startColumn=Bt,Yt}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(this.startRow+F,this.startColumn+st,Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(this.startRow+F,this.startColumn+st)}}]),H}(ie),Be=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G){return p()(this,H),Lt.call(this,G,G.columns,G.rows)}return I()(H,[{key:"set",value:function(F,st,Bt){return this.matrix.set(st,F,Bt),this}},{key:"get",value:function(F,st){return this.matrix.get(st,F)}}]),H}(ie),vr=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G){var F,st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p()(this,H);var Bt=st.rows,Kt=Bt===void 0?1:Bt;if(G.length%Kt!==0)throw new Error("the data length is not divisible by the number of rows");return F=Lt.call(this),F.rows=Kt,F.columns=G.length/Kt,F.data=G,F}return I()(H,[{key:"set",value:function(F,st,Bt){var Kt=this._calculateIndex(F,st);return this.data[Kt]=Bt,this}},{key:"get",value:function(F,st){var Bt=this._calculateIndex(F,st);return this.data[Bt]}},{key:"_calculateIndex",value:function(F,st){return F*this.columns+st}}]),H}(D),or=function(Dt){E()(H,Dt);var Lt=T()(H);function H(G){var F;return p()(this,H),F=Lt.call(this),F.data=G,F.rows=G.length,F.columns=G[0].length,F}return I()(H,[{key:"set",value:function(F,st,Bt){return this.data[F][st]=Bt,this}},{key:"get",value:function(F,st){return this.data[F][st]}}]),H}(D);function Ae(Dt,Lt){if(C(Dt))return Dt[0]&&C(Dt[0])?new or(Dt):new vr(Dt,Lt);throw new Error("the argument is not an array")}var yr=function(){function Dt(Lt){p()(this,Dt),Lt=or.checkMatrix(Lt);var H=Lt.clone(),G=H.rows,F=H.columns,st=new Float64Array(G),Bt=1,Kt,Yt,he,ot,yt,te,Me,Se,er;for(Kt=0;Kt<G;Kt++)st[Kt]=Kt;for(Se=new Float64Array(G),Yt=0;Yt<F;Yt++){for(Kt=0;Kt<G;Kt++)Se[Kt]=H.get(Kt,Yt);for(Kt=0;Kt<G;Kt++){for(er=Math.min(Kt,Yt),yt=0,he=0;he<er;he++)yt+=H.get(Kt,he)*Se[he];Se[Kt]-=yt,H.set(Kt,Yt,Se[Kt])}for(ot=Yt,Kt=Yt+1;Kt<G;Kt++)Math.abs(Se[Kt])>Math.abs(Se[ot])&&(ot=Kt);if(ot!==Yt){for(he=0;he<F;he++)te=H.get(ot,he),H.set(ot,he,H.get(Yt,he)),H.set(Yt,he,te);Me=st[ot],st[ot]=st[Yt],st[Yt]=Me,Bt=-Bt}if(Yt<G&&H.get(Yt,Yt)!==0)for(Kt=Yt+1;Kt<G;Kt++)H.set(Kt,Yt,H.get(Kt,Yt)/H.get(Yt,Yt))}this.LU=H,this.pivotVector=st,this.pivotSign=Bt}return I()(Dt,[{key:"isSingular",value:function(){for(var H=this.LU,G=H.columns,F=0;F<G;F++)if(H.get(F,F)===0)return!0;return!1}},{key:"solve",value:function(H){H=ft.checkMatrix(H);var G=this.LU,F=G.rows;if(F!==H.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var st=H.columns,Bt=H.subMatrixRow(this.pivotVector,0,st-1),Kt=G.columns,Yt,he,ot;for(ot=0;ot<Kt;ot++)for(Yt=ot+1;Yt<Kt;Yt++)for(he=0;he<st;he++)Bt.set(Yt,he,Bt.get(Yt,he)-Bt.get(ot,he)*G.get(Yt,ot));for(ot=Kt-1;ot>=0;ot--){for(he=0;he<st;he++)Bt.set(ot,he,Bt.get(ot,he)/G.get(ot,ot));for(Yt=0;Yt<ot;Yt++)for(he=0;he<st;he++)Bt.set(Yt,he,Bt.get(Yt,he)-Bt.get(ot,he)*G.get(Yt,ot))}return Bt}},{key:"determinant",get:function(){var H=this.LU;if(!H.isSquare())throw new Error("Matrix must be square");for(var G=this.pivotSign,F=H.columns,st=0;st<F;st++)G*=H.get(st,st);return G}},{key:"lowerTriangularMatrix",get:function(){for(var H=this.LU,G=H.rows,F=H.columns,st=new ft(G,F),Bt=0;Bt<G;Bt++)for(var Kt=0;Kt<F;Kt++)Bt>Kt?st.set(Bt,Kt,H.get(Bt,Kt)):Bt===Kt?st.set(Bt,Kt,1):st.set(Bt,Kt,0);return st}},{key:"upperTriangularMatrix",get:function(){for(var H=this.LU,G=H.rows,F=H.columns,st=new ft(G,F),Bt=0;Bt<G;Bt++)for(var Kt=0;Kt<F;Kt++)Bt<=Kt?st.set(Bt,Kt,H.get(Bt,Kt)):st.set(Bt,Kt,0);return st}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),Dt}();function Cr(Dt,Lt){var H=0;return Math.abs(Dt)>Math.abs(Lt)?(H=Lt/Dt,Math.abs(Dt)*Math.sqrt(1+H*H)):Lt!==0?(H=Dt/Lt,Math.abs(Lt)*Math.sqrt(1+H*H)):0}var zr=function(){function Dt(Lt){p()(this,Dt),Lt=or.checkMatrix(Lt);var H=Lt.clone(),G=Lt.rows,F=Lt.columns,st=new Float64Array(F),Bt,Kt,Yt,he;for(Yt=0;Yt<F;Yt++){var ot=0;for(Bt=Yt;Bt<G;Bt++)ot=Cr(ot,H.get(Bt,Yt));if(ot!==0){for(H.get(Yt,Yt)<0&&(ot=-ot),Bt=Yt;Bt<G;Bt++)H.set(Bt,Yt,H.get(Bt,Yt)/ot);for(H.set(Yt,Yt,H.get(Yt,Yt)+1),Kt=Yt+1;Kt<F;Kt++){for(he=0,Bt=Yt;Bt<G;Bt++)he+=H.get(Bt,Yt)*H.get(Bt,Kt);for(he=-he/H.get(Yt,Yt),Bt=Yt;Bt<G;Bt++)H.set(Bt,Kt,H.get(Bt,Kt)+he*H.get(Bt,Yt))}}st[Yt]=-ot}this.QR=H,this.Rdiag=st}return I()(Dt,[{key:"solve",value:function(H){H=ft.checkMatrix(H);var G=this.QR,F=G.rows;if(H.rows!==F)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var st=H.columns,Bt=H.clone(),Kt=G.columns,Yt,he,ot,yt;for(ot=0;ot<Kt;ot++)for(he=0;he<st;he++){for(yt=0,Yt=ot;Yt<F;Yt++)yt+=G.get(Yt,ot)*Bt.get(Yt,he);for(yt=-yt/G.get(ot,ot),Yt=ot;Yt<F;Yt++)Bt.set(Yt,he,Bt.get(Yt,he)+yt*G.get(Yt,ot))}for(ot=Kt-1;ot>=0;ot--){for(he=0;he<st;he++)Bt.set(ot,he,Bt.get(ot,he)/this.Rdiag[ot]);for(Yt=0;Yt<ot;Yt++)for(he=0;he<st;he++)Bt.set(Yt,he,Bt.get(Yt,he)-Bt.get(ot,he)*G.get(Yt,ot))}return Bt.subMatrix(0,Kt-1,0,st-1)}},{key:"isFullRank",value:function(){for(var H=this.QR.columns,G=0;G<H;G++)if(this.Rdiag[G]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var H=this.QR,G=H.columns,F=new ft(G,G),st,Bt;for(st=0;st<G;st++)for(Bt=0;Bt<G;Bt++)st<Bt?F.set(st,Bt,H.get(st,Bt)):st===Bt?F.set(st,Bt,this.Rdiag[st]):F.set(st,Bt,0);return F}},{key:"orthogonalMatrix",get:function(){var H=this.QR,G=H.rows,F=H.columns,st=new ft(G,F),Bt,Kt,Yt,he;for(Yt=F-1;Yt>=0;Yt--){for(Bt=0;Bt<G;Bt++)st.set(Bt,Yt,0);for(st.set(Yt,Yt,1),Kt=Yt;Kt<F;Kt++)if(H.get(Yt,Yt)!==0){for(he=0,Bt=Yt;Bt<G;Bt++)he+=H.get(Bt,Yt)*st.get(Bt,Kt);for(he=-he/H.get(Yt,Yt),Bt=Yt;Bt<G;Bt++)st.set(Bt,Kt,st.get(Bt,Kt)+he*H.get(Bt,Yt))}}return st}}]),Dt}(),Mr=function(){function Dt(Lt){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(p()(this,Dt),Lt=or.checkMatrix(Lt),Lt.isEmpty())throw new Error("Matrix must be non-empty");var G=Lt.rows,F=Lt.columns,st=H.computeLeftSingularVectors,Bt=st===void 0?!0:st,Kt=H.computeRightSingularVectors,Yt=Kt===void 0?!0:Kt,he=H.autoTranspose,ot=he===void 0?!1:he,yt=Boolean(Bt),te=Boolean(Yt),Me=!1,Se;if(G<F)if(!ot)Se=Lt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Se=Lt.transpose(),G=Se.rows,F=Se.columns,Me=!0;var er=yt;yt=te,te=er}else Se=Lt.clone();for(var sr=Math.min(G,F),ye=Math.min(G+1,F),Fe=new Float64Array(ye),tr=new ft(G,sr),Sr=new ft(F,F),Er=new Float64Array(F),me=new Float64Array(G),Ft=new Float64Array(ye),ne=0;ne<ye;ne++)Ft[ne]=ne;for(var Ie=Math.min(G-1,F),Ce=Math.max(0,Math.min(F-2,G)),Ue=Math.max(Ie,Ce),Xe=0;Xe<Ue;Xe++){if(Xe<Ie){Fe[Xe]=0;for(var Wr=Xe;Wr<G;Wr++)Fe[Xe]=Cr(Fe[Xe],Se.get(Wr,Xe));if(Fe[Xe]!==0){Se.get(Xe,Xe)<0&&(Fe[Xe]=-Fe[Xe]);for(var $r=Xe;$r<G;$r++)Se.set($r,Xe,Se.get($r,Xe)/Fe[Xe]);Se.set(Xe,Xe,Se.get(Xe,Xe)+1)}Fe[Xe]=-Fe[Xe]}for(var mn=Xe+1;mn<F;mn++){if(Xe<Ie&&Fe[Xe]!==0){for(var Nn=0,kn=Xe;kn<G;kn++)Nn+=Se.get(kn,Xe)*Se.get(kn,mn);Nn=-Nn/Se.get(Xe,Xe);for(var Jn=Xe;Jn<G;Jn++)Se.set(Jn,mn,Se.get(Jn,mn)+Nn*Se.get(Jn,Xe))}Er[mn]=Se.get(Xe,mn)}if(yt&&Xe<Ie)for(var ri=Xe;ri<G;ri++)tr.set(ri,Xe,Se.get(ri,Xe));if(Xe<Ce){Er[Xe]=0;for(var Ri=Xe+1;Ri<F;Ri++)Er[Xe]=Cr(Er[Xe],Er[Ri]);if(Er[Xe]!==0){Er[Xe+1]<0&&(Er[Xe]=0-Er[Xe]);for(var di=Xe+1;di<F;di++)Er[di]/=Er[Xe];Er[Xe+1]+=1}if(Er[Xe]=-Er[Xe],Xe+1<G&&Er[Xe]!==0){for(var Ki=Xe+1;Ki<G;Ki++)me[Ki]=0;for(var yo=Xe+1;yo<G;yo++)for(var Ea=Xe+1;Ea<F;Ea++)me[yo]+=Er[Ea]*Se.get(yo,Ea);for(var ta=Xe+1;ta<F;ta++)for(var mo=-Er[ta]/Er[Xe+1],Na=Xe+1;Na<G;Na++)Se.set(Na,ta,Se.get(Na,ta)+mo*me[Na])}if(te)for(var To=Xe+1;To<F;To++)Sr.set(To,Xe,Er[To])}}var vi=Math.min(F,G+1);if(Ie<F&&(Fe[Ie]=Se.get(Ie,Ie)),G<vi&&(Fe[vi-1]=0),Ce+1<vi&&(Er[Ce]=Se.get(Ce,vi-1)),Er[vi-1]=0,yt){for(var xa=Ie;xa<sr;xa++){for(var Vo=0;Vo<G;Vo++)tr.set(Vo,xa,0);tr.set(xa,xa,1)}for(var zi=Ie-1;zi>=0;zi--)if(Fe[zi]!==0){for(var ao=zi+1;ao<sr;ao++){for(var jo=0,ps=zi;ps<G;ps++)jo+=tr.get(ps,zi)*tr.get(ps,ao);jo=-jo/tr.get(zi,zi);for(var Io=zi;Io<G;Io++)tr.set(Io,ao,tr.get(Io,ao)+jo*tr.get(Io,zi))}for(var Ja=zi;Ja<G;Ja++)tr.set(Ja,zi,-tr.get(Ja,zi));tr.set(zi,zi,1+tr.get(zi,zi));for(var Pn=0;Pn<zi-1;Pn++)tr.set(Pn,zi,0)}else{for(var $s=0;$s<G;$s++)tr.set($s,zi,0);tr.set(zi,zi,1)}}if(te)for(var na=F-1;na>=0;na--){if(na<Ce&&Er[na]!==0)for(var oo=na+1;oo<F;oo++){for(var Xa=0,qo=na+1;qo<F;qo++)Xa+=Sr.get(qo,na)*Sr.get(qo,oo);Xa=-Xa/Sr.get(na+1,na);for(var On=na+1;On<F;On++)Sr.set(On,oo,Sr.get(On,oo)+Xa*Sr.get(On,na))}for(var bo=0;bo<F;bo++)Sr.set(bo,na,0);Sr.set(na,na,1)}for(var gs=vi-1,ts=0,es=Number.EPSILON;vi>0;){var Wn=void 0,so=void 0;for(Wn=vi-2;Wn>=-1&&Wn!==-1;Wn--){var ia=Number.MIN_VALUE+es*Math.abs(Fe[Wn]+Math.abs(Fe[Wn+1]));if(Math.abs(Er[Wn])<=ia||Number.isNaN(Er[Wn])){Er[Wn]=0;break}}if(Wn===vi-2)so=4;else{var Bi=void 0;for(Bi=vi-1;Bi>=Wn&&Bi!==Wn;Bi--){var rs=(Bi!==vi?Math.abs(Er[Bi]):0)+(Bi!==Wn+1?Math.abs(Er[Bi-1]):0);if(Math.abs(Fe[Bi])<=es*rs){Fe[Bi]=0;break}}Bi===Wn?so=3:Bi===vi-1?so=1:(so=2,Wn=Bi)}switch(Wn++,so){case 1:{var Po=Er[vi-2];Er[vi-2]=0;for(var ga=vi-2;ga>=Wn;ga--){var ys=Cr(Fe[ga],Po),Qs=Fe[ga]/ys,ms=Po/ys;if(Fe[ga]=ys,ga!==Wn&&(Po=-ms*Er[ga-1],Er[ga-1]=Qs*Er[ga-1]),te)for(var Eo=0;Eo<F;Eo++)ys=Qs*Sr.get(Eo,ga)+ms*Sr.get(Eo,vi-1),Sr.set(Eo,vi-1,-ms*Sr.get(Eo,ga)+Qs*Sr.get(Eo,vi-1)),Sr.set(Eo,ga,ys)}break}case 2:{var Ai=Er[Wn-1];Er[Wn-1]=0;for(var Ya=Wn;Ya<vi;Ya++){var bs=Cr(Fe[Ya],Ai),Ha=Fe[Ya]/bs,Ns=Ai/bs;if(Fe[Ya]=bs,Ai=-Ns*Er[Ya],Er[Ya]=Ha*Er[Ya],yt)for(var La=0;La<G;La++)bs=Ha*tr.get(La,Ya)+Ns*tr.get(La,Wn-1),tr.set(La,Wn-1,-Ns*tr.get(La,Ya)+Ha*tr.get(La,Wn-1)),tr.set(La,Ya,bs)}break}case 3:{var ya=Math.max(Math.abs(Fe[vi-1]),Math.abs(Fe[vi-2]),Math.abs(Er[vi-2]),Math.abs(Fe[Wn]),Math.abs(Er[Wn])),Za=Fe[vi-1]/ya,xo=Fe[vi-2]/ya,Ka=Er[vi-2]/ya,Ga=Fe[Wn]/ya,Js=Er[Wn]/ya,ka=((xo+Za)*(xo-Za)+Ka*Ka)/2,$a=Za*Ka*(Za*Ka),wo=0;(ka!==0||$a!==0)&&(ka<0?wo=0-Math.sqrt(ka*ka+$a):wo=Math.sqrt(ka*ka+$a),wo=$a/(ka+wo));for(var qa=(Ga+Za)*(Ga-Za)+wo,Xo=Ga*Js,fi=Wn;fi<vi-1;fi++){var ma=Cr(qa,Xo);ma===0&&(ma=Number.MIN_VALUE);var to=qa/ma,ba=Xo/ma;if(fi!==Wn&&(Er[fi-1]=ma),qa=to*Fe[fi]+ba*Er[fi],Er[fi]=to*Er[fi]-ba*Fe[fi],Xo=ba*Fe[fi+1],Fe[fi+1]=to*Fe[fi+1],te)for(var Mi=0;Mi<F;Mi++)ma=to*Sr.get(Mi,fi)+ba*Sr.get(Mi,fi+1),Sr.set(Mi,fi+1,-ba*Sr.get(Mi,fi)+to*Sr.get(Mi,fi+1)),Sr.set(Mi,fi,ma);if(ma=Cr(qa,Xo),ma===0&&(ma=Number.MIN_VALUE),to=qa/ma,ba=Xo/ma,Fe[fi]=ma,qa=to*Er[fi]+ba*Fe[fi+1],Fe[fi+1]=-ba*Er[fi]+to*Fe[fi+1],Xo=ba*Er[fi+1],Er[fi+1]=to*Er[fi+1],yt&&fi<G-1)for(var ca=0;ca<G;ca++)ma=to*tr.get(ca,fi)+ba*tr.get(ca,fi+1),tr.set(ca,fi+1,-ba*tr.get(ca,fi)+to*tr.get(ca,fi+1)),tr.set(ca,fi,ma)}Er[vi-2]=qa,ts=ts+1;break}case 4:{if(Fe[Wn]<=0&&(Fe[Wn]=Fe[Wn]<0?-Fe[Wn]:0,te))for(var Es=0;Es<=gs;Es++)Sr.set(Es,Wn,-Sr.get(Es,Wn));for(;Wn<gs&&!(Fe[Wn]>=Fe[Wn+1]);){var aa=Fe[Wn];if(Fe[Wn]=Fe[Wn+1],Fe[Wn+1]=aa,te&&Wn<F-1)for(var uo=0;uo<F;uo++)aa=Sr.get(uo,Wn+1),Sr.set(uo,Wn+1,Sr.get(uo,Wn)),Sr.set(uo,Wn,aa);if(yt&&Wn<G-1)for(var eo=0;eo<G;eo++)aa=tr.get(eo,Wn+1),tr.set(eo,Wn+1,tr.get(eo,Wn)),tr.set(eo,Wn,aa);Wn++}ts=0,vi--;break}}}if(Me){var fo=Sr;Sr=tr,tr=fo}this.m=G,this.n=F,this.s=Fe,this.U=tr,this.V=Sr}return I()(Dt,[{key:"solve",value:function(H){for(var G=H,F=this.threshold,st=this.s.length,Bt=ft.zeros(st,st),Kt=0;Kt<st;Kt++)Math.abs(this.s[Kt])<=F?Bt.set(Kt,Kt,0):Bt.set(Kt,Kt,1/this.s[Kt]);for(var Yt=this.U,he=this.rightSingularVectors,ot=he.mmul(Bt),yt=he.rows,te=Yt.rows,Me=ft.zeros(yt,te),Se=0;Se<yt;Se++)for(var er=0;er<te;er++){for(var sr=0,ye=0;ye<st;ye++)sr+=ot.get(Se,ye)*Yt.get(er,ye);Me.set(Se,er,sr)}return Me.mmul(G)}},{key:"solveForDiagonal",value:function(H){return this.solve(ft.diag(H))}},{key:"inverse",value:function(){for(var H=this.V,G=this.threshold,F=H.rows,st=H.columns,Bt=new ft(F,this.s.length),Kt=0;Kt<F;Kt++)for(var Yt=0;Yt<st;Yt++)Math.abs(this.s[Yt])>G&&Bt.set(Kt,Yt,H.get(Kt,Yt)/this.s[Yt]);for(var he=this.U,ot=he.rows,yt=he.columns,te=new ft(F,ot),Me=0;Me<F;Me++)for(var Se=0;Se<ot;Se++){for(var er=0,sr=0;sr<yt;sr++)er+=Bt.get(Me,sr)*he.get(Se,sr);te.set(Me,Se,er)}return te}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var H=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,G=0,F=this.s,st=0,Bt=F.length;st<Bt;st++)F[st]>H&&G++;return G}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return ft.diag(this.s)}}]),Dt}();function un(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Dt=or.checkMatrix(Dt),Lt?new Mr(Dt).inverse():hn(Dt,ft.eye(Dt.rows))}function hn(Dt,Lt){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Dt=or.checkMatrix(Dt),Lt=or.checkMatrix(Lt),H?new Mr(Dt).solve(Lt):Dt.isSquare()?new yr(Dt).solve(Lt):new zr(Dt).solve(Lt)}function Un(Dt){if(Dt=ft.checkMatrix(Dt),Dt.isSquare()){if(Dt.columns===0)return 1;var Lt,H,G,F;if(Dt.columns===2)return Lt=Dt.get(0,0),H=Dt.get(0,1),G=Dt.get(1,0),F=Dt.get(1,1),Lt*F-H*G;if(Dt.columns===3){var st,Bt,Kt;return st=new Le(Dt,[1,2],[1,2]),Bt=new Le(Dt,[1,2],[0,2]),Kt=new Le(Dt,[1,2],[0,1]),Lt=Dt.get(0,0),H=Dt.get(0,1),G=Dt.get(0,2),Lt*Un(st)-H*Un(Bt)+G*Un(Kt)}else return new yr(Dt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function nn(Dt,Lt){for(var H=[],G=0;G<Dt;G++)G!==Lt&&H.push(G);return H}function vn(Dt,Lt,H){var G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(Dt>F)return new Array(Lt.rows+1).fill(0);for(var st=Lt.addRow(H,[0]),Bt=0;Bt<st.rows;Bt++)Math.abs(st.get(Bt,0))<G&&st.set(Bt,0,0);return st.to1DArray()}function ln(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=Lt.thresholdValue,G=H===void 0?1e-9:H,F=Lt.thresholdError,st=F===void 0?1e-9:F;Dt=ft.checkMatrix(Dt);for(var Bt=Dt.rows,Kt=new ft(Bt,Bt),Yt=0;Yt<Bt;Yt++){var he=ft.columnVector(Dt.getRow(Yt)),ot=Dt.subMatrixRow(nn(Bt,Yt)).transpose(),yt=new Mr(ot),te=yt.solve(he),Me=ft.sub(he,ot.mmul(te)).abs().max();Kt.setRow(Yt,vn(Me,te,Yt,G,st))}return Kt}function pn(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(Dt=ft.checkMatrix(Dt),Dt.isEmpty())return Dt.transpose();for(var H=new Mr(Dt,{autoTranspose:!0}),G=H.leftSingularVectors,F=H.rightSingularVectors,st=H.diagonal,Bt=0;Bt<st.length;Bt++)Math.abs(st[Bt])>Lt?st[Bt]=1/st[Bt]:st[Bt]=0;return F.mmul(ft.diag(st).mmul(G.transpose()))}function Bn(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dt,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Dt=new ft(Dt);var G=!1;if(y()(Lt)==="object"&&!ft.isMatrix(Lt)&&!C(Lt)?(H=Lt,Lt=Dt,G=!0):Lt=new ft(Lt),Dt.rows!==Lt.rows)throw new TypeError("Both matrices must have the same number of rows");var F=H,st=F.center,Bt=st===void 0?!0:st;Bt&&(Dt=Dt.center("column"),G||(Lt=Lt.center("column")));for(var Kt=Dt.transpose().mmul(Lt),Yt=0;Yt<Kt.rows;Yt++)for(var he=0;he<Kt.columns;he++)Kt.set(Yt,he,Kt.get(Yt,he)*(1/(Dt.rows-1)));return Kt}function Pe(Dt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Dt,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Dt=new ft(Dt);var G=!1;if(y()(Lt)==="object"&&!ft.isMatrix(Lt)&&!C(Lt)?(H=Lt,Lt=Dt,G=!0):Lt=new ft(Lt),Dt.rows!==Lt.rows)throw new TypeError("Both matrices must have the same number of rows");var F=H,st=F.center,Bt=st===void 0?!0:st,Kt=F.scale,Yt=Kt===void 0?!0:Kt;Bt&&(Dt.center("column"),G||Lt.center("column")),Yt&&(Dt.scale("column"),G||Lt.scale("column"));for(var he=Dt.standardDeviation("column",{unbiased:!0}),ot=G?he:Lt.standardDeviation("column",{unbiased:!0}),yt=Dt.transpose().mmul(Lt),te=0;te<yt.rows;te++)for(var Me=0;Me<yt.columns;Me++)yt.set(te,Me,yt.get(te,Me)*(1/(he[te]*ot[Me]))*(1/(Dt.rows-1)));return yt}var Cn=function(){function Dt(Lt){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p()(this,Dt);var G=H.assumeSymmetric,F=G===void 0?!1:G;if(Lt=or.checkMatrix(Lt),!Lt.isSquare())throw new Error("Matrix is not a square matrix");if(Lt.isEmpty())throw new Error("Matrix must be non-empty");var st=Lt.columns,Bt=new ft(st,st),Kt=new Float64Array(st),Yt=new Float64Array(st),he=Lt,ot,yt,te=!1;if(F?te=!0:te=Lt.isSymmetric(),te){for(ot=0;ot<st;ot++)for(yt=0;yt<st;yt++)Bt.set(ot,yt,he.get(ot,yt));Gn(st,Yt,Kt,Bt),bi(st,Yt,Kt,Bt)}else{var Me=new ft(st,st),Se=new Float64Array(st);for(yt=0;yt<st;yt++)for(ot=0;ot<st;ot++)Me.set(ot,yt,he.get(ot,yt));zn(st,Me,Se,Bt),Hn(st,Yt,Kt,Bt,Me)}this.n=st,this.e=Yt,this.d=Kt,this.V=Bt}return I()(Dt,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var H=this.n,G=this.e,F=this.d,st=new ft(H,H),Bt,Kt;for(Bt=0;Bt<H;Bt++){for(Kt=0;Kt<H;Kt++)st.set(Bt,Kt,0);st.set(Bt,Bt,F[Bt]),G[Bt]>0?st.set(Bt,Bt+1,G[Bt]):G[Bt]<0&&st.set(Bt,Bt-1,G[Bt])}return st}}]),Dt}();function Gn(Dt,Lt,H,G){var F,st,Bt,Kt,Yt,he,ot,yt;for(Yt=0;Yt<Dt;Yt++)H[Yt]=G.get(Dt-1,Yt);for(Kt=Dt-1;Kt>0;Kt--){for(yt=0,Bt=0,he=0;he<Kt;he++)yt=yt+Math.abs(H[he]);if(yt===0)for(Lt[Kt]=H[Kt-1],Yt=0;Yt<Kt;Yt++)H[Yt]=G.get(Kt-1,Yt),G.set(Kt,Yt,0),G.set(Yt,Kt,0);else{for(he=0;he<Kt;he++)H[he]/=yt,Bt+=H[he]*H[he];for(F=H[Kt-1],st=Math.sqrt(Bt),F>0&&(st=-st),Lt[Kt]=yt*st,Bt=Bt-F*st,H[Kt-1]=F-st,Yt=0;Yt<Kt;Yt++)Lt[Yt]=0;for(Yt=0;Yt<Kt;Yt++){for(F=H[Yt],G.set(Yt,Kt,F),st=Lt[Yt]+G.get(Yt,Yt)*F,he=Yt+1;he<=Kt-1;he++)st+=G.get(he,Yt)*H[he],Lt[he]+=G.get(he,Yt)*F;Lt[Yt]=st}for(F=0,Yt=0;Yt<Kt;Yt++)Lt[Yt]/=Bt,F+=Lt[Yt]*H[Yt];for(ot=F/(Bt+Bt),Yt=0;Yt<Kt;Yt++)Lt[Yt]-=ot*H[Yt];for(Yt=0;Yt<Kt;Yt++){for(F=H[Yt],st=Lt[Yt],he=Yt;he<=Kt-1;he++)G.set(he,Yt,G.get(he,Yt)-(F*Lt[he]+st*H[he]));H[Yt]=G.get(Kt-1,Yt),G.set(Kt,Yt,0)}}H[Kt]=Bt}for(Kt=0;Kt<Dt-1;Kt++){if(G.set(Dt-1,Kt,G.get(Kt,Kt)),G.set(Kt,Kt,1),Bt=H[Kt+1],Bt!==0){for(he=0;he<=Kt;he++)H[he]=G.get(he,Kt+1)/Bt;for(Yt=0;Yt<=Kt;Yt++){for(st=0,he=0;he<=Kt;he++)st+=G.get(he,Kt+1)*G.get(he,Yt);for(he=0;he<=Kt;he++)G.set(he,Yt,G.get(he,Yt)-st*H[he])}}for(he=0;he<=Kt;he++)G.set(he,Kt+1,0)}for(Yt=0;Yt<Dt;Yt++)H[Yt]=G.get(Dt-1,Yt),G.set(Dt-1,Yt,0);G.set(Dt-1,Dt-1,1),Lt[0]=0}function bi(Dt,Lt,H,G){var F,st,Bt,Kt,Yt,he,ot,yt,te,Me,Se,er,sr,ye,Fe,tr,Sr;for(Bt=1;Bt<Dt;Bt++)Lt[Bt-1]=Lt[Bt];Lt[Dt-1]=0;var Er=0,me=0,Ft=Number.EPSILON;for(he=0;he<Dt;he++){for(me=Math.max(me,Math.abs(H[he])+Math.abs(Lt[he])),ot=he;ot<Dt&&!(Math.abs(Lt[ot])<=Ft*me);)ot++;if(ot>he){Sr=0;do{for(Sr=Sr+1,F=H[he],yt=(H[he+1]-F)/(2*Lt[he]),te=Cr(yt,1),yt<0&&(te=-te),H[he]=Lt[he]/(yt+te),H[he+1]=Lt[he]*(yt+te),Me=H[he+1],st=F-H[he],Bt=he+2;Bt<Dt;Bt++)H[Bt]-=st;for(Er=Er+st,yt=H[ot],Se=1,er=Se,sr=Se,ye=Lt[he+1],Fe=0,tr=0,Bt=ot-1;Bt>=he;Bt--)for(sr=er,er=Se,tr=Fe,F=Se*Lt[Bt],st=Se*yt,te=Cr(yt,Lt[Bt]),Lt[Bt+1]=Fe*te,Fe=Lt[Bt]/te,Se=yt/te,yt=Se*H[Bt]-Fe*F,H[Bt+1]=st+Fe*(Se*F+Fe*H[Bt]),Yt=0;Yt<Dt;Yt++)st=G.get(Yt,Bt+1),G.set(Yt,Bt+1,Fe*G.get(Yt,Bt)+Se*st),G.set(Yt,Bt,Se*G.get(Yt,Bt)-Fe*st);yt=-Fe*tr*sr*ye*Lt[he]/Me,Lt[he]=Fe*yt,H[he]=Se*yt}while(Math.abs(Lt[he])>Ft*me)}H[he]=H[he]+Er,Lt[he]=0}for(Bt=0;Bt<Dt-1;Bt++){for(Yt=Bt,yt=H[Bt],Kt=Bt+1;Kt<Dt;Kt++)H[Kt]<yt&&(Yt=Kt,yt=H[Kt]);if(Yt!==Bt)for(H[Yt]=H[Bt],H[Bt]=yt,Kt=0;Kt<Dt;Kt++)yt=G.get(Kt,Bt),G.set(Kt,Bt,G.get(Kt,Yt)),G.set(Kt,Yt,yt)}}function zn(Dt,Lt,H,G){var F=0,st=Dt-1,Bt,Kt,Yt,he,ot,yt,te;for(yt=F+1;yt<=st-1;yt++){for(te=0,he=yt;he<=st;he++)te=te+Math.abs(Lt.get(he,yt-1));if(te!==0){for(Yt=0,he=st;he>=yt;he--)H[he]=Lt.get(he,yt-1)/te,Yt+=H[he]*H[he];for(Kt=Math.sqrt(Yt),H[yt]>0&&(Kt=-Kt),Yt=Yt-H[yt]*Kt,H[yt]=H[yt]-Kt,ot=yt;ot<Dt;ot++){for(Bt=0,he=st;he>=yt;he--)Bt+=H[he]*Lt.get(he,ot);for(Bt=Bt/Yt,he=yt;he<=st;he++)Lt.set(he,ot,Lt.get(he,ot)-Bt*H[he])}for(he=0;he<=st;he++){for(Bt=0,ot=st;ot>=yt;ot--)Bt+=H[ot]*Lt.get(he,ot);for(Bt=Bt/Yt,ot=yt;ot<=st;ot++)Lt.set(he,ot,Lt.get(he,ot)-Bt*H[ot])}H[yt]=te*H[yt],Lt.set(yt,yt-1,te*Kt)}}for(he=0;he<Dt;he++)for(ot=0;ot<Dt;ot++)G.set(he,ot,he===ot?1:0);for(yt=st-1;yt>=F+1;yt--)if(Lt.get(yt,yt-1)!==0){for(he=yt+1;he<=st;he++)H[he]=Lt.get(he,yt-1);for(ot=yt;ot<=st;ot++){for(Kt=0,he=yt;he<=st;he++)Kt+=H[he]*G.get(he,ot);for(Kt=Kt/H[yt]/Lt.get(yt,yt-1),he=yt;he<=st;he++)G.set(he,ot,G.get(he,ot)+Kt*H[he])}}}function Hn(Dt,Lt,H,G,F){var st=Dt-1,Bt=0,Kt=Dt-1,Yt=Number.EPSILON,he=0,ot=0,yt=0,te=0,Me=0,Se=0,er=0,sr=0,ye,Fe,tr,Sr,Er,me,Ft,ne,Ie,Ce,Ue,Xe,Wr,$r,mn;for(ye=0;ye<Dt;ye++)for((ye<Bt||ye>Kt)&&(H[ye]=F.get(ye,ye),Lt[ye]=0),Fe=Math.max(ye-1,0);Fe<Dt;Fe++)ot=ot+Math.abs(F.get(ye,Fe));for(;st>=Bt;){for(Sr=st;Sr>Bt&&(Se=Math.abs(F.get(Sr-1,Sr-1))+Math.abs(F.get(Sr,Sr)),Se===0&&(Se=ot),!(Math.abs(F.get(Sr,Sr-1))<Yt*Se));)Sr--;if(Sr===st)F.set(st,st,F.get(st,st)+he),H[st]=F.get(st,st),Lt[st]=0,st--,sr=0;else if(Sr===st-1){if(Ft=F.get(st,st-1)*F.get(st-1,st),yt=(F.get(st-1,st-1)-F.get(st,st))/2,te=yt*yt+Ft,er=Math.sqrt(Math.abs(te)),F.set(st,st,F.get(st,st)+he),F.set(st-1,st-1,F.get(st-1,st-1)+he),ne=F.get(st,st),te>=0){for(er=yt>=0?yt+er:yt-er,H[st-1]=ne+er,H[st]=H[st-1],er!==0&&(H[st]=ne-Ft/er),Lt[st-1]=0,Lt[st]=0,ne=F.get(st,st-1),Se=Math.abs(ne)+Math.abs(er),yt=ne/Se,te=er/Se,Me=Math.sqrt(yt*yt+te*te),yt=yt/Me,te=te/Me,Fe=st-1;Fe<Dt;Fe++)er=F.get(st-1,Fe),F.set(st-1,Fe,te*er+yt*F.get(st,Fe)),F.set(st,Fe,te*F.get(st,Fe)-yt*er);for(ye=0;ye<=st;ye++)er=F.get(ye,st-1),F.set(ye,st-1,te*er+yt*F.get(ye,st)),F.set(ye,st,te*F.get(ye,st)-yt*er);for(ye=Bt;ye<=Kt;ye++)er=G.get(ye,st-1),G.set(ye,st-1,te*er+yt*G.get(ye,st)),G.set(ye,st,te*G.get(ye,st)-yt*er)}else H[st-1]=ne+yt,H[st]=ne+yt,Lt[st-1]=er,Lt[st]=-er;st=st-2,sr=0}else{if(ne=F.get(st,st),Ie=0,Ft=0,Sr<st&&(Ie=F.get(st-1,st-1),Ft=F.get(st,st-1)*F.get(st-1,st)),sr===10){for(he+=ne,ye=Bt;ye<=st;ye++)F.set(ye,ye,F.get(ye,ye)-ne);Se=Math.abs(F.get(st,st-1))+Math.abs(F.get(st-1,st-2)),ne=Ie=.75*Se,Ft=-.4375*Se*Se}if(sr===30&&(Se=(Ie-ne)/2,Se=Se*Se+Ft,Se>0)){for(Se=Math.sqrt(Se),Ie<ne&&(Se=-Se),Se=ne-Ft/((Ie-ne)/2+Se),ye=Bt;ye<=st;ye++)F.set(ye,ye,F.get(ye,ye)-Se);he+=Se,ne=Ie=Ft=.964}for(sr=sr+1,Er=st-2;Er>=Sr&&(er=F.get(Er,Er),Me=ne-er,Se=Ie-er,yt=(Me*Se-Ft)/F.get(Er+1,Er)+F.get(Er,Er+1),te=F.get(Er+1,Er+1)-er-Me-Se,Me=F.get(Er+2,Er+1),Se=Math.abs(yt)+Math.abs(te)+Math.abs(Me),yt=yt/Se,te=te/Se,Me=Me/Se,!(Er===Sr||Math.abs(F.get(Er,Er-1))*(Math.abs(te)+Math.abs(Me))<Yt*(Math.abs(yt)*(Math.abs(F.get(Er-1,Er-1))+Math.abs(er)+Math.abs(F.get(Er+1,Er+1))))));)Er--;for(ye=Er+2;ye<=st;ye++)F.set(ye,ye-2,0),ye>Er+2&&F.set(ye,ye-3,0);for(tr=Er;tr<=st-1&&($r=tr!==st-1,tr!==Er&&(yt=F.get(tr,tr-1),te=F.get(tr+1,tr-1),Me=$r?F.get(tr+2,tr-1):0,ne=Math.abs(yt)+Math.abs(te)+Math.abs(Me),ne!==0&&(yt=yt/ne,te=te/ne,Me=Me/ne)),ne!==0);tr++)if(Se=Math.sqrt(yt*yt+te*te+Me*Me),yt<0&&(Se=-Se),Se!==0){for(tr!==Er?F.set(tr,tr-1,-Se*ne):Sr!==Er&&F.set(tr,tr-1,-F.get(tr,tr-1)),yt=yt+Se,ne=yt/Se,Ie=te/Se,er=Me/Se,te=te/yt,Me=Me/yt,Fe=tr;Fe<Dt;Fe++)yt=F.get(tr,Fe)+te*F.get(tr+1,Fe),$r&&(yt=yt+Me*F.get(tr+2,Fe),F.set(tr+2,Fe,F.get(tr+2,Fe)-yt*er)),F.set(tr,Fe,F.get(tr,Fe)-yt*ne),F.set(tr+1,Fe,F.get(tr+1,Fe)-yt*Ie);for(ye=0;ye<=Math.min(st,tr+3);ye++)yt=ne*F.get(ye,tr)+Ie*F.get(ye,tr+1),$r&&(yt=yt+er*F.get(ye,tr+2),F.set(ye,tr+2,F.get(ye,tr+2)-yt*Me)),F.set(ye,tr,F.get(ye,tr)-yt),F.set(ye,tr+1,F.get(ye,tr+1)-yt*te);for(ye=Bt;ye<=Kt;ye++)yt=ne*G.get(ye,tr)+Ie*G.get(ye,tr+1),$r&&(yt=yt+er*G.get(ye,tr+2),G.set(ye,tr+2,G.get(ye,tr+2)-yt*Me)),G.set(ye,tr,G.get(ye,tr)-yt),G.set(ye,tr+1,G.get(ye,tr+1)-yt*te)}}}if(ot!==0){for(st=Dt-1;st>=0;st--)if(yt=H[st],te=Lt[st],te===0)for(Sr=st,F.set(st,st,1),ye=st-1;ye>=0;ye--){for(Ft=F.get(ye,ye)-yt,Me=0,Fe=Sr;Fe<=st;Fe++)Me=Me+F.get(ye,Fe)*F.get(Fe,st);if(Lt[ye]<0)er=Ft,Se=Me;else if(Sr=ye,Lt[ye]===0?F.set(ye,st,Ft!==0?-Me/Ft:-Me/(Yt*ot)):(ne=F.get(ye,ye+1),Ie=F.get(ye+1,ye),te=(H[ye]-yt)*(H[ye]-yt)+Lt[ye]*Lt[ye],me=(ne*Se-er*Me)/te,F.set(ye,st,me),F.set(ye+1,st,Math.abs(ne)>Math.abs(er)?(-Me-Ft*me)/ne:(-Se-Ie*me)/er)),me=Math.abs(F.get(ye,st)),Yt*me*me>1)for(Fe=ye;Fe<=st;Fe++)F.set(Fe,st,F.get(Fe,st)/me)}else if(te<0)for(Sr=st-1,Math.abs(F.get(st,st-1))>Math.abs(F.get(st-1,st))?(F.set(st-1,st-1,te/F.get(st,st-1)),F.set(st-1,st,-(F.get(st,st)-yt)/F.get(st,st-1))):(mn=hi(0,-F.get(st-1,st),F.get(st-1,st-1)-yt,te),F.set(st-1,st-1,mn[0]),F.set(st-1,st,mn[1])),F.set(st,st-1,0),F.set(st,st,1),ye=st-2;ye>=0;ye--){for(Ce=0,Ue=0,Fe=Sr;Fe<=st;Fe++)Ce=Ce+F.get(ye,Fe)*F.get(Fe,st-1),Ue=Ue+F.get(ye,Fe)*F.get(Fe,st);if(Ft=F.get(ye,ye)-yt,Lt[ye]<0)er=Ft,Me=Ce,Se=Ue;else if(Sr=ye,Lt[ye]===0?(mn=hi(-Ce,-Ue,Ft,te),F.set(ye,st-1,mn[0]),F.set(ye,st,mn[1])):(ne=F.get(ye,ye+1),Ie=F.get(ye+1,ye),Xe=(H[ye]-yt)*(H[ye]-yt)+Lt[ye]*Lt[ye]-te*te,Wr=(H[ye]-yt)*2*te,Xe===0&&Wr===0&&(Xe=Yt*ot*(Math.abs(Ft)+Math.abs(te)+Math.abs(ne)+Math.abs(Ie)+Math.abs(er))),mn=hi(ne*Me-er*Ce+te*Ue,ne*Se-er*Ue-te*Ce,Xe,Wr),F.set(ye,st-1,mn[0]),F.set(ye,st,mn[1]),Math.abs(ne)>Math.abs(er)+Math.abs(te)?(F.set(ye+1,st-1,(-Ce-Ft*F.get(ye,st-1)+te*F.get(ye,st))/ne),F.set(ye+1,st,(-Ue-Ft*F.get(ye,st)-te*F.get(ye,st-1))/ne)):(mn=hi(-Me-Ie*F.get(ye,st-1),-Se-Ie*F.get(ye,st),er,te),F.set(ye+1,st-1,mn[0]),F.set(ye+1,st,mn[1]))),me=Math.max(Math.abs(F.get(ye,st-1)),Math.abs(F.get(ye,st))),Yt*me*me>1)for(Fe=ye;Fe<=st;Fe++)F.set(Fe,st-1,F.get(Fe,st-1)/me),F.set(Fe,st,F.get(Fe,st)/me)}for(ye=0;ye<Dt;ye++)if(ye<Bt||ye>Kt)for(Fe=ye;Fe<Dt;Fe++)G.set(ye,Fe,F.get(ye,Fe));for(Fe=Dt-1;Fe>=Bt;Fe--)for(ye=Bt;ye<=Kt;ye++){for(er=0,tr=Bt;tr<=Math.min(Fe,Kt);tr++)er=er+G.get(ye,tr)*F.get(tr,Fe);G.set(ye,Fe,er)}}}function hi(Dt,Lt,H,G){var F,st;return Math.abs(H)>Math.abs(G)?(F=G/H,st=H+F*G,[(Dt+F*Lt)/st,(Lt-F*Dt)/st]):(F=H/G,st=G+F*H,[(F*Dt+Lt)/st,(F*Lt-Dt)/st])}var Si=function(){function Dt(Lt){if(p()(this,Dt),Lt=or.checkMatrix(Lt),!Lt.isSymmetric())throw new Error("Matrix is not symmetric");var H=Lt,G=H.rows,F=new ft(G,G),st=!0,Bt,Kt,Yt;for(Kt=0;Kt<G;Kt++){var he=0;for(Yt=0;Yt<Kt;Yt++){var ot=0;for(Bt=0;Bt<Yt;Bt++)ot+=F.get(Yt,Bt)*F.get(Kt,Bt);ot=(H.get(Kt,Yt)-ot)/F.get(Yt,Yt),F.set(Kt,Yt,ot),he=he+ot*ot}for(he=H.get(Kt,Kt)-he,st&=he>0,F.set(Kt,Kt,Math.sqrt(Math.max(he,0))),Yt=Kt+1;Yt<G;Yt++)F.set(Kt,Yt,0)}this.L=F,this.positiveDefinite=Boolean(st)}return I()(Dt,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(H){H=or.checkMatrix(H);var G=this.L,F=G.rows;if(H.rows!==F)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var st=H.columns,Bt=H.clone(),Kt,Yt,he;for(he=0;he<F;he++)for(Yt=0;Yt<st;Yt++){for(Kt=0;Kt<he;Kt++)Bt.set(he,Yt,Bt.get(he,Yt)-Bt.get(Kt,Yt)*G.get(he,Kt));Bt.set(he,Yt,Bt.get(he,Yt)/G.get(he,he))}for(he=F-1;he>=0;he--)for(Yt=0;Yt<st;Yt++){for(Kt=he+1;Kt<F;Kt++)Bt.set(he,Yt,Bt.get(he,Yt)-Bt.get(Kt,Yt)*G.get(Kt,he));Bt.set(he,Yt,Bt.get(he,Yt)/G.get(he,he))}return Bt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),Dt}(),pi=I()(function Dt(Lt){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p()(this,Dt),Lt=or.checkMatrix(Lt);var G=H.Y,F=H.scaleScores,st=F===void 0?!1:F,Bt=H.maxIterations,Kt=Bt===void 0?1e3:Bt,Yt=H.terminationCriteria,he=Yt===void 0?1e-10:Yt,ot;if(G){if(C(G)&&typeof G[0]=="number"?G=ft.columnVector(G):G=or.checkMatrix(G),G.rows!==Lt.rows)throw new Error("Y should have the same number of rows as X");ot=G.getColumnVector(0)}else ot=Lt.getColumnVector(0);for(var yt=1,te,Me,Se,er,sr=0;sr<Kt&&yt>he;sr++)Se=Lt.transpose().mmul(ot).div(ot.transpose().mmul(ot).get(0,0)),Se=Se.div(Se.norm()),te=Lt.mmul(Se).div(Se.transpose().mmul(Se).get(0,0)),sr>0&&(yt=te.clone().sub(er).pow(2).sum()),er=te.clone(),G?(Me=G.transpose().mmul(te).div(te.transpose().mmul(te).get(0,0)),Me=Me.div(Me.norm()),ot=G.mmul(Me).div(Me.transpose().mmul(Me).get(0,0))):ot=te;if(G){var ye=Lt.transpose().mmul(te).div(te.transpose().mmul(te).get(0,0));ye=ye.div(ye.norm());var Fe=Lt.clone().sub(te.clone().mmul(ye.transpose())),tr=ot.transpose().mmul(te).div(te.transpose().mmul(te).get(0,0)),Sr=G.clone().sub(te.clone().mulS(tr.get(0,0)).mmul(Me.transpose()));this.t=te,this.p=ye.transpose(),this.w=Se.transpose(),this.q=Me,this.u=ot,this.s=te.transpose().mmul(te),this.xResidual=Fe,this.yResidual=Sr,this.betas=tr}else this.w=Se.transpose(),this.s=te.transpose().mmul(te).sqrt(),st?this.t=te.clone().div(this.s.get(0,0)):this.t=te,this.xResidual=Lt.sub(te.mmul(Se.transpose()))})},19979:function(ae,w,S){var x=S(89415);function z(k){if(Array.isArray(k))return x(k)}ae.exports=z,ae.exports.__esModule=!0,ae.exports.default=ae.exports},44220:function(ae){function w(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}ae.exports=w,ae.exports.__esModule=!0,ae.exports.default=ae.exports},32078:function(ae){function w(S,x){if(!(S instanceof x))throw new TypeError("Cannot call a class as a function")}ae.exports=w,ae.exports.__esModule=!0,ae.exports.default=ae.exports},82357:function(ae,w,S){var x=S(11926);function z(E,N){for(var T=0;T<N.length;T++){var m=N[T];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(E,x(m.key),m)}}function k(E,N,T){return N&&z(E.prototype,N),T&&z(E,T),Object.defineProperty(E,"prototype",{writable:!1}),E}ae.exports=k,ae.exports.__esModule=!0,ae.exports.default=ae.exports},26979:function(ae,w,S){var x=S(12982),z=S(52391),k=S(74158);function E(N){var T=z();return function(){var y=x(N),v;if(T){var p=x(this).constructor;v=Reflect.construct(y,arguments,p)}else v=y.apply(this,arguments);return k(this,v)}}ae.exports=E,ae.exports.__esModule=!0,ae.exports.default=ae.exports},12982:function(ae){function w(S){return ae.exports=w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(z){return z.__proto__||Object.getPrototypeOf(z)},ae.exports.__esModule=!0,ae.exports.default=ae.exports,w(S)}ae.exports=w,ae.exports.__esModule=!0,ae.exports.default=ae.exports},33649:function(ae,w,S){var x=S(91337);function z(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),E&&x(k,E)}ae.exports=z,ae.exports.__esModule=!0,ae.exports.default=ae.exports},52391:function(ae){function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(S){return!1}}ae.exports=w,ae.exports.__esModule=!0,ae.exports.default=ae.exports},10424:function(ae){function w(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}ae.exports=w,ae.exports.__esModule=!0,ae.exports.default=ae.exports},19621:function(ae){function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ae.exports=w,ae.exports.__esModule=!0,ae.exports.default=ae.exports},74158:function(ae,w,S){var x=S(64020).default,z=S(44220);function k(E,N){if(N&&(x(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z(E)}ae.exports=k,ae.exports.__esModule=!0,ae.exports.default=ae.exports},91337:function(ae){function w(S,x){return ae.exports=w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,E){return k.__proto__=E,k},ae.exports.__esModule=!0,ae.exports.default=ae.exports,w(S,x)}ae.exports=w,ae.exports.__esModule=!0,ae.exports.default=ae.exports},65645:function(ae,w,S){var x=S(19979),z=S(10424),k=S(70891),E=S(19621);function N(T){return x(T)||z(T)||k(T)||E()}ae.exports=N,ae.exports.__esModule=!0,ae.exports.default=ae.exports},366:function(ae,w,S){var x=S(88501)();ae.exports=x;try{regeneratorRuntime=x}catch(z){typeof globalThis=="object"?globalThis.regeneratorRuntime=x:Function("r","regeneratorRuntime = r")(x)}}}]);
