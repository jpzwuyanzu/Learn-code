import { Checkbox } from "antd";
import { useEffect, useState } from "react";
export default (props) => {
  const { options, value: initValue = [] } = props;
  const [checkAll, setCheckAll] = useState(false);
  const [value, setValue] = useState([]);
  const [indeterminate, setIndeterminate] = useState(
    initValue.length && initValue.length < options.length
  );
  useEffect(() => {
    props?.onChange?.(value);
  }, [value]);
  const onChange = (list) => {
    setValue(list);
    setIndeterminate(list.length > 0 && list.length < options.length);
    setCheckAll(list.length > 0 && list.length === options.length);
  };
  const onCheckAllChange = (e) => {
    setIndeterminate(false);
    setCheckAll(e.target.checked);
    const items = options.map((item) => item.value);
    setValue(e.target.checked ? items : []);
  };
  useEffect(() => {
    props?.onChange?.(initValue);
    onChange(initValue);
  }, [initValue]);
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(
    Checkbox,
    {
      indeterminate,
      onChange: onCheckAllChange,
      checked: checkAll,
      style: { marginBottom: 7 }
    },
    "\u5168\u9009"
  ), /* @__PURE__ */ React.createElement(
    Checkbox.Group,
    {
      name: "merchantIds",
      options,
      value,
      onChange
    }
  ));
};
