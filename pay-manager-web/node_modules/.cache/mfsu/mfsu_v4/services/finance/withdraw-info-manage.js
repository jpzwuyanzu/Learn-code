import request from "@/utils/request";
import services from "@/services";
import _ from "lodash";
export default {
  /**
   * USDT充值列表
   */
  list: (params) => {
    return request.get(`/financial/exchange/findList`, { params });
  },
  /**
   * 新增
   */
  add: (params) => {
    return request.post(`/financial/exchange/addExchange`, params);
  },
  /**
   * 编辑
   */
  edit: (params) => {
    return request.post(`/financial/exchange/updateExchange`, params);
  },
  /**
   * 商户设置
   */
  updateMerchant: (params) => {
    return request.post(`/financial/exchange/updateMerchant`, params);
  },
  /**
   * 币种设置
   */
  updateCurrency: (params) => {
    return request.post(`/financial/exchange/updateCurrency`, params);
  },
  /**
   * 保留金额设置
   */
  saveMinAmount: (params) => {
    return request.post(`/financial/exchangeStrategy/saveMinAmount`, params);
  },
  /**
   * 获取提现策略配置
   */
  getStrategy: (params) => {
    return request.get(`/financial/exchangeStrategy/findStrategy`, {
      params
    });
  },
  /**
   * 提现机制配置
   */
  saveStrategy: (params) => {
    return request.post(`/financial/exchangeStrategy/saveStrategy`, params);
  },
  /**
   * 货币系数列表
   */
  listCurrencyRate: (params) => {
    return request.get(`/financial/currency/findList`, { params });
  },
  /**
   * 货币系数配置
   */
  updateCurrencyRate: (params) => {
    return request.post(`/financial/currency/saveCurrency`, params);
  },
  /**
   * 查询币种余额
   */
  getBalanceMap: async (params) => {
    const items = await services.accountInfo.getMerchantInfo(params);
    const currencyItems = _.get(items, "[0].currency", "").split(",");
    const currencyMap = {};
    currencyItems.forEach((currency, index) => {
      currencyMap[currency] = items[index];
    });
    return currencyMap;
  }
};
