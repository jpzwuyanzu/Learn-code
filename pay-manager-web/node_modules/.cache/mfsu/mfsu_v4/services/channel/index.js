import request from "@/utils/request";
import { APP_IS_PAYMENT } from "@/constants";
export default {
  /**
   * 获取下拉框的通道id
   */
  getTunnelIdList(params) {
    return request.post("/tunnel/config/selectValidTunnelIdList", params);
  },
  /**
   * 新增通道
   */
  addTunnelConfig(params) {
    return request.post("/tunnel/config/add", params);
  },
  /**
   * 编辑通道
   */
  editTunnelConfig(params) {
    return request.post("/tunnel/config/edit", params);
  },
  /**
   * 通道列表
   */
  getTunnelConfigList(params) {
    return request.table("/tunnel/config/list", params, {
      method: "post",
      customConfig: { filter: true }
    });
  },
  /**
   * 修改通道余额
   */
  updateTunnelBalance(params) {
    return request.post("/tunnel/config/updateTunnelBalance", params);
  },
  /**
   * 通道分配
   */
  updateTunnelDistribute(params) {
    return request.post("/tunnel/config/tunnelDistribute", params);
  },
  /**
   * 启用通道
   */
  enableTunnelConfig(params) {
    return request.post("/tunnel/config/enableTunnelByTunnelId", params);
  },
  /**
   * 禁用通道
   */
  disableTunnelConfig(params) {
    return request.post("/tunnel/config/disableTunnelByTunnelId", params);
  },
  /**
   * 通道下拉列表
   */
  async getTunnelOptions(params = {}) {
    const items = await request.get("/tunnel/config/tunnelOption", {
      params
    });
    return items.map((item) => ({
      label: APP_IS_PAYMENT ? item.tunnelName : item.tunnelId,
      value: item.tunnelId
    }));
  },
  /**
   * 通道余额记录
   */
  tunnelMoneyRecordList(params) {
    return request.table("/tunnel/config/tunnelMoneyRecordList", params, {
      method: "post"
    });
  },
  /**
   * 获取通道余额
   */
  getTunnelBalance(tunnelId) {
    const params = { tunnelId };
    return request.get("/tunnel/config/getTunnelBalance", { params });
  },
  /**
   * 提现
   */
  withdraw(params) {
    return request.post("/tunnel/config/withdraw", params);
  }
};
