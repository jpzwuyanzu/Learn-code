import { ModalForm, ProFormText } from "@ant-design/pro-components";
import { useRef } from "react";
import services from "@/services";
import common from "@/utils/common";
import { message } from "antd";
export default (props) => {
  const { visible, setVisible, current } = props;
  const formRef = useRef();
  return /* @__PURE__ */ React.createElement(
    ModalForm,
    {
      title: "\u4FEE\u6539\u63D0\u73B0USDT\u5730\u5740",
      formRef,
      open: visible,
      autoFocusFirstInput: true,
      grid: true,
      modalProps: {
        onCancel: () => {
          formRef.current?.resetFields();
          setVisible(false);
        }
      },
      colProps: { span: 24 },
      rowProps: { gutter: 10 },
      width: 500,
      onFinish: async (values) => {
        values.id = current.merchantId;
        await services.accountInfo.updateUsdtAddress(values);
        setVisible(false);
        message.success("\u4FEE\u6539\u6210\u529F");
        props?.reload();
        return true;
      }
    },
    /* @__PURE__ */ React.createElement(
      ProFormText,
      {
        label: "\u8D26\u6237\u5F53\u524D\u63D0\u73B0USDT\u5730\u5740",
        readonly: true,
        fieldProps: {
          value: current?.usdt || "\u672A\u8BBE\u7F6E"
        }
      }
    ),
    /* @__PURE__ */ React.createElement(
      ProFormText,
      {
        name: "usdt",
        label: "\u65B0\u7684\u63D0\u73B0USDT\u5730\u5740",
        placeholder: "\u8BF7\u8F93\u5165\u65B0\u7684\u63D0\u73B0USDT\u5730\u5740",
        rules: [
          common.ruleUtils.getRule("required", "\u8BF7\u8F93\u5165\u65B0\u7684\u63D0\u73B0USDT\u5730\u5740"),
          common.ruleUtils.getRule("usdtAddress")
        ]
      }
    ),
    current?.isPayPassword === 1 && /* @__PURE__ */ React.createElement(
      ProFormText.Password,
      {
        name: "payPassword",
        label: "\u652F\u4ED8\u5BC6\u7801",
        placeholder: "\u8BF7\u8F93\u5165\u652F\u4ED8\u5BC6\u7801",
        rules: [common.ruleUtils.getRule("required", "\u8BF7\u8F93\u5165\u652F\u4ED8\u5BC6\u7801")]
      }
    )
  );
};
