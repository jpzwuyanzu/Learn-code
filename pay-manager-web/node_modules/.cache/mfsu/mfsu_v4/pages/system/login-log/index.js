import TablePage from "@/components/TablePage";
import services from "@/services";
import common from "@/utils/common";
import { DatePicker } from "antd";
import { useState } from "react";
const { RangePicker } = DatePicker;
export default () => {
  const [listDate] = useState(
    common.dateUtils.getDateRange(7)
  );
  const columns = [
    {
      title: "ID",
      dataIndex: "infoId",
      hideInSearch: true
    },
    {
      title: "\u64CD\u4F5C\u8005",
      dataIndex: "userName"
    },
    {
      title: "\u767B\u5F55\u65F6\u95F4",
      dataIndex: "loginTime",
      valueType: "dateTimeRange",
      fieldProps: {
        presets: common.dateUtils.rangePresets,
        showTime: {
          defaultValue: common.dateUtils.rangeDefaultTime()
        }
      },
      initialValue: listDate,
      render: (_, record) => record.loginTime,
      colSize: 2,
      order: 1
    },
    {
      title: "IP",
      dataIndex: "ipaddr"
    },
    {
      title: "\u767B\u5F55\u8BBE\u5907",
      dataIndex: "browser"
    }
  ];
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(
    TablePage,
    {
      moduleTitle: "\u767B\u5F55\u65E5\u5FD7",
      columns,
      scroll: { x: 1e3 },
      listRequest: async (values) => {
        const { loginTime } = values;
        if (loginTime && Array.isArray(loginTime)) {
          const [beginTime, endTime] = common.dateUtils.toFormatDateParams(
            loginTime,
            { formatTime: true }
          );
          values.beginTime = beginTime;
          values.endTime = endTime;
          delete values.loginTime;
        }
        return services.system.loginLog.list(values);
      }
    }
  ));
};
