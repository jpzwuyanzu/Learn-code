"use strict";(self.webpackChunkproxy=self.webpackChunkproxy||[]).push([[147,35],{3478:function(e,t,r){r.d(t,{cq:function(){return f},yp:function(){return m},bB:function(){return l},OS:function(){return d},HC:function(){return p},q:function(){return u}});var n=r(3263),a=r(691),o=r.n(a),s=r(712),c=n.Z.create({baseURL:"https://fuxqis.wrrtxr.xyz",timeout:1e4});c.interceptors.request.use((function(e){return e.headers["X-Token"]="test token",o().start(),e}),(function(e){return console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){var t=e.data;if(200===t.code||10038===t.code)return o().done(),t;s.FN.show(t.msg)}),(function(e){return console.log("error:"+e),Promise.reject(e)}));var i=c;function u(e){return i.post("/api/sys/upload/uploadFile",e)}function d(e){return i.post("/chat/agent/onlineAgent",e)}function l(e){return i.post("/api/agent/notice/queryNotice",e)}function f(e){return i.post("/api/agent/report/add",e)}function p(e){return i.post("/api/agent/queryAgentOrder",e)}function m(e){return i.post("/api/agent/updateOrderPayStatus",e)}},6273:function(e,t,r){r.d(t,{C:function(){return o},T:function(){return a}});var n=r(9434),a=n.I0,o=n.v9},9147:function(e,t,r){r.r(t);var n=r(4165),a=r(5861),o=r(885),s=r(2791),c=r(7689),i=r(712),u=r(6273),d=r(9035),l=r(3478),f=r(2434),p=r(184),m={close:"\u8be5\u5546\u5bb6\u4ee3\u7406\u5df2\u505c\u6b62\u8425\u4e1a\uff0c\u4e3a\u4e86\u4e0d\u5f71\u54cd\u60a8\u7684\u5145\u503c\u4f53\u9a8c\uff0c\u8bf7\u6362\u4e00\u4e2a\u5e97\u94fa",offLine:"\u8be5\u5546\u5bb6\u4ee3\u7406\u5df2\u79bb\u7ebf\uff0c\u4e3a\u4e86\u4e0d\u5f71\u54cd\u60a8\u7684\u5145\u503c\u4f53\u9a8c\uff0c\u8bf7\u6362\u4e00\u4e2a\u5e97\u94fa",trading:"\u5b58\u5728\u6b63\u5728\u8fdb\u884c\u4e2d\u7684\u8ba2\u5355\uff0c\u8bf7\u5148\u5b8c\u6210!"};t.default=function(){var e=(0,s.useState)(!1),t=(0,o.Z)(e,2),r=t[0],_=t[1],x=(0,s.useState)(!1),y=(0,o.Z)(x,2),h=y[0],g=y[1],N=(0,s.useState)(!1),v=(0,o.Z)(N,2),j=v[0],b=v[1],k=(0,s.useState)(""),w=(0,o.Z)(k,2),Z=w[0],T=w[1],U=(0,s.useState)([]),O=(0,o.Z)(U,2),S=O[0],A=O[1],I=(0,s.useState)(""),C=(0,o.Z)(I,2),L=C[0],B=C[1],F=(0,s.useState)(1),M=(0,o.Z)(F,2),q=M[0],H=M[1],P=(0,c.TH)(),E=(P.pathname,P.search),J=new URLSearchParams(E),V=(0,c.s0)(),R=(0,u.T)(),z=(0,s.useMemo)((function(){var e=[];return S.forEach((function(t,r){e.push({id:t.id,avatar:L+t.headImage,name:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:d.default.proxy_name,children:t.name}),(0,p.jsx)("span",{className:d.default.socketStatus,children:(0,p.jsxs)("span",{className:d.default.proxy_flex,children:[(0,p.jsx)("span",{className:1===Number(q)?d.default.status_point:d.default.statusOffLine}),(0,p.jsx)("span",{className:d.default.proxy_status,children:1===Number(q)?"\u5728\u7ebf":"\u79bb\u7ebf"})]})})]}),description:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("span",{className:d.default.descript_container,children:[(0,p.jsx)("span",{className:d.default.proxy_store,children:"\u5e97\u94fa"}),(0,p.jsxs)("span",{className:d.default.proxy_num,children:["\u5df2\u7d2f\u8ba1\u5145\u503c",Number(t.realOrderCount)+Number(t.fakeOrderCount),"\u5355"]})]})}),status:1,proxyName:t.name})})),e}),[S]),D=function(e){var t,r,n;e.status?(r=e.id,n=e.proxyName,V("/chat/chatroom?toUserId=AGENT_".concat(r,"&toUserName=").concat(n,"&orderNumber=").concat(J.get("orderNumber"),"&orderAmount=").concat(J.get("orderAmount"),"&orderType=").concat(J.get("orderType"),"&fromUserId=").concat(J.get("fromUserId"),"&fromUserName=").concat(J.get("fromUserName")))):(t="close",i.Vq.alert({confirmText:"\u77e5\u9053\u4e86",content:m[String(t)],onConfirm:function(){console.log("Confirmed")}}))},G=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.OS)({orderNumber:J.get("orderNumber"),orderAmount:J.get("orderAmount"),orderType:J.get("orderType"),fromUserId:J.get("fromUserId")});case 2:200===(t=e.sent).code&&(R((0,f.ki)({status:!0})),A(t.data?t.data.agent:[]),B(t.data?t.data.fastUrl:""),H(t.data.isOnline));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.bB)({});case 2:200===(t=e.sent).code&&t.data&&(T(t.data.notice?t.data.notice:""),t.data.notice&&!h&&_(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e;window.WebLocalBridge?window.WebLocalBridge.rechargeBack():null!==(e=window.webkit)&&void 0!==e&&e.messageHandlers&&window.webkit.messageHandlers.JsToOc.postMessage("rechargeBack")},X=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.HC)({orderNumber:J.get("orderNumber")});case 2:return t=e.sent,e.next=5,(0,l.OS)({orderNumber:J.get("orderNumber"),orderAmount:J.get("orderAmount"),orderType:J.get("orderType"),fromUserId:J.get("fromUserId")});case 5:r=e.sent,a=[],t&&200===t.code&&t.data.order?(r&&200===r.code&&r.data&&r.data.agent&&r.data.agent.length&&r.data.agent.forEach((function(e,t){a.push(Number(e.id))})),-1!==a.indexOf(Number(t.data.order.agentId))?V("/chat/chatroom?toUserId=AGENT_".concat(Number(t.data.order.agentId),"&toUserName=").concat(t.data.order.agentName,"&orderNumber=").concat(J.get("orderNumber"),"&orderAmount=").concat(J.get("orderAmount"),"&orderType=").concat(J.get("orderType"),"&fromUserId=").concat(J.get("fromUserId"),"&fromUserName=").concat(J.get("fromUserName"))):g(!0)):r&&10038===r.code||!(r&&200===r.code&&r.data&&r.data.agent&&r.data.agent.length)?b(!0):(G(),K());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=3;break}return e.next=3,(0,l.yp)({merchantOrderId:J.get("orderNumber"),payStatus:4});case 3:b(!1),_(!1),g(!1),W();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){X()}),[]),(0,p.jsxs)("div",{className:d.default.proxy_container,children:[(0,p.jsx)("div",{className:d.default.top_nav_bar,children:(0,p.jsx)(i.l2,{onBack:function(){return W()},children:"\u5168\u90e8\u4ee3\u7406"})}),(0,p.jsx)("div",{className:d.default.all_proxy_list,children:(0,p.jsx)(i.aV,{children:z.map((function(e){return(0,p.jsx)(i.aV.Item,{prefix:(0,p.jsx)(i.Ee,{src:e.avatar,style:{borderRadius:60},fit:"cover",width:60,height:60}),description:e.description,arrow:null,onClick:function(){return D(e)},children:e.name},e.id)}))})}),(0,p.jsx)(i.u_,{visible:r,content:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.default.annoceMent_container,children:[(0,p.jsx)("div",{className:d.default.title,children:"\u4ee3\u7406\u516c\u544a"}),(0,p.jsx)("div",{className:d.default.content,children:(0,p.jsx)("div",{className:d.default.insert_element,dangerouslySetInnerHTML:{__html:Z}})})]})}),closeOnAction:!0,onClose:function(){_(!1)},actions:[{key:"confirm",text:"\u6211\u77e5\u9053\u4e86"}]}),(0,p.jsx)(i.u_,{visible:h,content:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.default.annoceMent_container,children:[(0,p.jsx)("div",{className:d.default.title,children:"\u63d0\u793a"}),(0,p.jsx)("div",{className:d.default.content,children:(0,p.jsx)("div",{className:d.default.insert_element,children:"\u5546\u5bb6\u4ee3\u7406\u5df2\u6682\u505c\u8425\u4e1a\uff0c\u5c06\u81ea\u52a8\u5173\u95ed\u8ba2\u5355\uff0c\u8bf7\u91cd\u65b0\u4e0b\u5355"})})]})}),closeOnAction:!0,actions:[{key:"confirm",text:"\u91cd\u65b0\u4e0b\u5355",onClick:function(){return Y()}}]}),(0,p.jsx)(i.u_,{visible:j,content:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:d.default.annoceMent_container,children:[(0,p.jsx)("div",{className:d.default.title,children:"\u63d0\u793a"}),(0,p.jsx)("div",{className:d.default.content,children:(0,p.jsx)("div",{className:d.default.insert_element,children:"\u5f53\u524d\u6682\u65e0\u4ee3\u7406\u63a5\u5355\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u5176\u4ed6\u652f\u4ed8\u65b9\u5f0f!"})})]})}),closeOnAction:!0,actions:[{key:"confirm",text:"\u5173\u95ed",onClick:function(){return Y()}}]})]})}},9035:function(e,t,r){r.r(t),t.default={proxy_container:"proxy_proxy_container__rJXJC",top_nav_bar:"proxy_top_nav_bar__joJmV",all_proxy_list:"proxy_all_proxy_list__H55Dk",proxy_name:"proxy_proxy_name__uyT-9",socketStatus:"proxy_socketStatus__vIKNO",proxy_flex:"proxy_proxy_flex__PdFUj",status_point:"proxy_status_point__PAbm9",statusOffLine:"proxy_statusOffLine__wTzdT",proxy_status:"proxy_proxy_status__iyyuJ",descript_container:"proxy_descript_container__-DOCh",proxy_store:"proxy_proxy_store__rxh1L",proxy_num:"proxy_proxy_num__ktRA0",annoceMent_container:"proxy_annoceMent_container__yLNhY",title:"proxy_title__41VAZ",content:"proxy_content__VsBJK",insert_element:"proxy_insert_element__b8SPa"}}}]);
//# sourceMappingURL=147.77c1c710.chunk.js.map