{"ast":null,"code":"var _jsxFileName = \"/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/src/views/films/NowPlaying.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { InfiniteScroll, List, Image, Button } from \"antd-mobile\";\nimport axios from \"axios\";\nimport PageLoading from \"../../components/PageLoading\";\nimport styles from \"./NowPlaying.module.scss\";\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function NowPlaying() {\n  _s();\n  const navigate = useNavigate();\n  const [data, setData] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  const [pageNum, setPageNum] = useState(1);\n  const loadMore = async () => {\n    // 向后端请求数据\n    const res = await axios({\n      url: `https://m.maizuo.com/gateway?cityId=310100&pageNum=${pageNum}&pageSize=10&type=1&k=2984491`,\n      headers: {\n        \"X-Client-Info\": '{\"a\":\"3000\",\"ch\":\"1002\",\"v\":\"5.2.0\",\"e\":\"16558863921792667809742849\"}',\n        \"X-Host\": \"mall.film-ticket.film.list\"\n      }\n    });\n    setData(val => [...val, ...res.data.data.films]);\n    setHasMore(res.data.data.films.length > 0);\n    setPageNum(pageNum + 1);\n  };\n  useEffect(() => {\n    loadMore();\n    // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.film_contianer,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.homeList_content,\n      children: !data.length ? /*#__PURE__*/_jsxDEV(PageLoading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(List, {\n          children: data.map((item, index) => /*#__PURE__*/_jsxDEV(List.Item, {\n            arrow: false,\n            prefix: /*#__PURE__*/_jsxDEV(Image, {\n              src: item.poster,\n              fit: \"cover\",\n              width: 66,\n              height: 92\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 21\n            }, this),\n            description: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.film_right_part,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.film_desc,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.detail,\n                  children: [\"\\u89C2\\u4F17\\u8BC4\\u5206\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: styles.grade,\n                    children: item.grade\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 57,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.detail,\n                  children: [\"\\u5BFC\\u6F14\\uFF1A\", item.director]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 59,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.detail,\n                  children: [item.nation, \" | \", item.runtime, \"\\u5206\\u949F\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 62,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                className: styles.buyNow_btn,\n                color: \"primary\",\n                fill: \"outline\",\n                children: \"\\u8D2D\\u7968\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 21\n            }, this),\n            onClick: () => {\n              navigate(`/film/detail/${item.filmId}`);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.film_title,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.film_name,\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.film_type,\n                children: item.item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n          loadMore: loadMore,\n          hasMore: hasMore,\n          threshold: 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), \" \"]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(NowPlaying, \"lqHEcwzq+8B4e+sO4WRQfiSE+io=\", false, function () {\n  return [useNavigate];\n});\n_c = NowPlaying;\nvar _c;\n$RefreshReg$(_c, \"NowPlaying\");","map":{"version":3,"names":["React","useEffect","useState","InfiniteScroll","List","Image","Button","axios","PageLoading","styles","useNavigate","NowPlaying","navigate","data","setData","hasMore","setHasMore","pageNum","setPageNum","loadMore","res","url","headers","val","films","length","film_contianer","homeList_content","map","item","index","poster","film_right_part","film_desc","detail","grade","director","nation","runtime","buyNow_btn","filmId","film_title","film_name","name","film_type"],"sources":["/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/src/views/films/NowPlaying.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { InfiniteScroll, List, Image, Button } from \"antd-mobile\";\nimport axios from \"axios\";\nimport PageLoading from \"../../components/PageLoading\";\nimport styles from \"./NowPlaying.module.scss\";\nimport { useNavigate } from 'react-router-dom'\n\nexport default function NowPlaying() {\n  const navigate = useNavigate();\n  const [data, setData] = useState<string[]>([]);\n  const [hasMore, setHasMore] = useState(false);\n  const [pageNum, setPageNum] = useState(1);\n  const loadMore = async () => {\n    // 向后端请求数据\n    const res = await axios({\n      url: `https://m.maizuo.com/gateway?cityId=310100&pageNum=${pageNum}&pageSize=10&type=1&k=2984491`,\n      headers: {\n        \"X-Client-Info\":\n          '{\"a\":\"3000\",\"ch\":\"1002\",\"v\":\"5.2.0\",\"e\":\"16558863921792667809742849\"}',\n        \"X-Host\": \"mall.film-ticket.film.list\",\n      },\n    });\n    setData((val) => [...val, ...res.data.data.films]);\n    setHasMore(res.data.data.films.length > 0);\n    setPageNum(pageNum + 1);\n  };\n\n  useEffect(() => {\n    loadMore();\n    // eslint-disable-next-line\n  }, []);\n  return (\n    <div className={styles.film_contianer}>\n      <div className={styles.homeList_content}>\n        {!data.length ? (\n          <PageLoading />\n        ) : (\n          <>\n            <List>\n              {data.map((item: any, index) => (\n                <List.Item\n                  key={index}\n                  arrow={ false }\n                  prefix={\n                    <Image\n                      src={item.poster}\n                      fit=\"cover\"\n                      width={66}\n                      height={92}\n                    />\n                  }\n                  description={\n                    <div className={styles.film_right_part}>\n                      <div className={styles.film_desc}>\n                        <div className={styles.detail}>\n                          观众评分\n                          <span className={styles.grade}>{item.grade}</span>\n                        </div>\n                        <div className={styles.detail}>\n                          导演：{item.director}\n                        </div>\n                        <div className={styles.detail}>\n                          {item.nation} | {item.runtime}分钟\n                        </div>\n                      </div>\n                      <Button\n                        className={styles.buyNow_btn}\n                        color=\"primary\"\n                        fill=\"outline\"\n                      >\n                        购票\n                      </Button>\n                    </div>\n                  }\n                  onClick={ () => {\n                    navigate(`/film/detail/${item.filmId}`)\n                  } }\n                >\n                  <div className={styles.film_title}>\n                    <span className={styles.film_name}>{item.name}</span>\n                    <span className={styles.film_type}>{item.item.name}</span>\n                  </div>\n                </List.Item>\n              ))}\n            </List>\n            <InfiniteScroll\n              loadMore={loadMore}\n              hasMore={hasMore}\n              threshold={0}\n            />{\" \"}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}