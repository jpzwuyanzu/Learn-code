{"ast":null,"code":"var _jsxFileName = \"/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/src/views/login/Login.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAppDispatch } from '../../hooks/redux-hook';\nimport { switchTabBar } from '../../store/tabbar.slice';\nimport styles from './Login.module.scss';\nimport loginBg from '../../assets/imgs/logo.png';\nimport { Form, Input, Button, Toast } from 'antd-mobile';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const [canVerify, setCanVerify] = useState(false);\n  const [verifyDesc, setVerifyDesc] = useState('获取验证码');\n  const countdownHandler = () => {\n    setCanVerify(false);\n    let number = 60;\n    var countdown = function () {\n      if (number === 0) {\n        setVerifyDesc('获取验证码');\n        number = 60;\n        return;\n      } else {\n        setVerifyDesc(number + \"秒 重新发送\");\n        number--;\n      }\n      setTimeout(countdown, 1000);\n    };\n    setTimeout(countdown, 1000);\n  };\n  const onFinish = values => {\n    if (!values.phone) {\n      Toast.show({\n        content: '请输入手机号',\n        position: 'top'\n      });\n    }\n    if (!values.verifyCode) {\n      Toast.show({\n        content: '请输入验证码',\n        position: 'top'\n      });\n    }\n    if (values.phone && values.verifyCode) {\n      localStorage.setItem('token', values.phone);\n      navigate('/center');\n    }\n  };\n  useEffect(() => {\n    dispatch(switchTabBar({\n      status: false\n    }));\n    return () => {\n      dispatch(switchTabBar({\n        status: true\n      }));\n    };\n    // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.login_container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.login_bg,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: styles.logo,\n        src: loginBg,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.login_Form_part,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"horizontal\",\n        mode: \"card\",\n        className: styles.my_form,\n        name: \"form\",\n        onFinish: onFinish,\n        footer: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            block: true,\n            color: \"primary\",\n            size: \"middle\",\n            children: \"\\u767B\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.can_not_receive,\n            children: \"\\u6536\\u4E0D\\u5230\\u9A8C\\u8BC1\\u7801\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true),\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          extra: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: canVerify ? styles.activeVerifyCode_btn : styles.getVerifyCode_btn,\n            onClick: canVerify ? countdownHandler : () => {\n              console.log();\n            },\n            children: verifyDesc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 24\n          }, this),\n          name: \"phone\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u624B\\u673A\\u53F7\",\n            type: \"sting\",\n            maxLength: 11,\n            clearable: true,\n            className: styles.my_input,\n            onChange: value => {\n              value.length === 11 ? setCanVerify(true) : setCanVerify(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"verifyCode\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u9A8C\\u8BC1\\u7801\",\n            clearable: true,\n            className: styles.my_input\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 22\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"9ZL8scQeUHy+FOeH8zfOOsHF8Q0=\", false, function () {\n  return [useAppDispatch, useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","useAppDispatch","switchTabBar","styles","loginBg","Form","Input","Button","Toast","useNavigate","Login","dispatch","navigate","canVerify","setCanVerify","verifyDesc","setVerifyDesc","countdownHandler","number","countdown","setTimeout","onFinish","values","phone","show","content","position","verifyCode","localStorage","setItem","status","login_container","login_bg","logo","login_Form_part","my_form","can_not_receive","activeVerifyCode_btn","getVerifyCode_btn","console","log","my_input","value","length"],"sources":["/Users/xinyonghu/Desktop/personalCode/react18-learn/xiaotaimei/src/views/login/Login.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useAppDispatch } from '../../hooks/redux-hook'\nimport { switchTabBar } from '../../store/tabbar.slice'\nimport styles from './Login.module.scss'\nimport loginBg from '../../assets/imgs/logo.png'\nimport { Form, Input, Button, Toast } from 'antd-mobile'\nimport { useNavigate } from 'react-router-dom'\n\nexport default function Login() {\n    const dispatch = useAppDispatch();\n    const navigate = useNavigate();\n    const [canVerify, setCanVerify] = useState(false);\n    const [verifyDesc, setVerifyDesc] = useState('获取验证码');\n    \n    const countdownHandler = () => {\n        setCanVerify(false)\n\t\tlet number = 60;\n\t\tvar countdown = function(){\n\t\t\tif (number === 0) {\n                setVerifyDesc('获取验证码')\n\t            number = 60;\n\t            return;\n\t        } else {\n\t        \tsetVerifyDesc(number + \"秒 重新发送\");\n\t        \tnumber--;\n\t        }\n\t\t\tsetTimeout(countdown,1000);\n\t\t}\n\t\tsetTimeout(countdown,1000);\n\t}\n    const onFinish = (values: any) => {\n        if(!values.phone) {\n            Toast.show({\n                content: '请输入手机号',\n                position: 'top'\n            })\n        }\n        if(!values.verifyCode) {\n            Toast.show({\n                content: '请输入验证码',\n                position: 'top'\n            })\n        }\n        if(values.phone && values.verifyCode) {\n            localStorage.setItem('token', values.phone)\n            navigate('/center')\n        }\n  }\n  \n\n    useEffect(() => {\n        dispatch(switchTabBar({ status: false }))\n        return () => {\n          dispatch(switchTabBar({ status: true }))\n        }\n        // eslint-disable-next-line\n    }, [])\n    return (\n        <div className={ styles.login_container }>\n            <div className={ styles.login_bg }>\n                <img className={ styles.logo } src={ loginBg } alt=\"\"/>\n            </div>\n            <div className={ styles.login_Form_part }>\n            <Form layout='horizontal' mode='card' className={ styles.my_form }\n                name='form'\n                onFinish={onFinish}\n                footer={\n                <>\n                    <Button type='submit' block color='primary' size='middle'>\n                        登录\n                    </Button>\n                    <div className={ styles.can_not_receive }>收不到验证码</div>\n                </>\n                }\n            >\n                <Form.Item  \n                extra={<span className={ canVerify ? styles.activeVerifyCode_btn :  styles.getVerifyCode_btn } onClick={ canVerify ? countdownHandler : () => {console.log()} }>{ verifyDesc }</span>}\n                name=\"phone\"\n                >\n                    <Input placeholder='手机号' type=\"sting\"  maxLength={11} clearable className={ styles.my_input } onChange={ (value: string) => {\n                        value.length === 11 ? setCanVerify(true) : setCanVerify(false)\n                    } } />\n                </Form.Item>\n                <Form.Item \n                name=\"verifyCode\">\n                     <Input placeholder='验证码' clearable className={ styles.my_input } />\n                </Form.Item>\n            </Form>\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}